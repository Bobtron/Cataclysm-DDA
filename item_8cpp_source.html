<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/item.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">item.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="item_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cctype&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;clocale&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ammo_8h.html">ammo.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ascii__art_8h.html">ascii_art.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bionics_8h.html">bionics.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodygraph_8h.html">bodygraph.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__assert_8h.html">cata_assert.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="catacharset_8h.html">catacharset.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__id_8h.html">character_id.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__martial__arts_8h.html">character_martial_arts.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="city_8h.html">city.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clothing__mod_8h.html">clothing_mod.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clzones_8h.html">clzones.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="coordinates_8h.html">coordinates.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="craft__command_8h.html">craft_command.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="damage_8h.html">damage.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dispersion_8h.html">dispersion.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">display.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span> <span class="comment">// for weed_msg</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect__source_8h.html">effect_source.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enum__traits_8h.html">enum_traits.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="explosion_8h.html">explosion.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="faction_8h.html">faction.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fault_8h.html">fault.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="field__type_8h.html">field_type.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fire_8h.html">fire.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flag_8h.html">flag.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gun__mode_8h.html">gun_mode.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iexamine_8h.html">iexamine.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="inventory_8h.html">inventory.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__category_8h.html">item_category.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__factory_8h.html">item_factory.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__group_8h.html">item_group.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__tname_8h.html">item_tname.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iteminfo__query_8h.html">iteminfo_query.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse_8h.html">iuse.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iuse__actor_8h.html">iuse_actor.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="line_8h.html">line.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="localized__comparator_8h.html">localized_comparator.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="magic_8h.html">magic.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="magic__enchantment_8h.html">magic_enchantment.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="make__static_8h.html">make_static.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="martialarts_8h.html">martialarts.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="material_8h.html">material.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mod__manager_8h.html">mod_manager.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="monster_8h.html">monster.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtype_8h.html">mtype.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutation_8h.html">mutation.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="npc_8h.html">npc.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="options_8h.html">options.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pimpl_8h.html">pimpl.h</a>&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pocket__type_8h.html">pocket_type.h</a>&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="point_8h.html">point.h</a>&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="proficiency_8h.html">proficiency.h</a>&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="projectile_8h.html">projectile.h</a>&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ranged_8h.html">ranged.h</a>&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recipe_8h.html">recipe.h</a>&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recipe__dictionary_8h.html">recipe_dictionary.h</a>&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="relic_8h.html">relic.h</a>&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="requirements_8h.html">requirements.h</a>&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="skill_8h.html">skill.h</a>&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stomach_8h.html">stomach.h</a>&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__id_8h.html">string_id.h</a>&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__id__utils_8h.html">string_id_utils.h</a>&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="text__snippets_8h.html">text_snippets.h</a>&quot;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trap_8h.html">trap.h</a>&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="try__parse__integer_8h.html">try_parse_integer.h</a>&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units__fwd_8h.html">units_fwd.h</a>&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units__utility_8h.html">units_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="value__ptr_8h.html">value_ptr.h</a>&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vitamin_8h.html">vitamin.h</a>&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__type_8h.html">veh_type.h</a>&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather__gen_8h.html">weather_gen.h</a>&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather__type_8h.html">weather_type.h</a>&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="item_8cpp.html#adc11d823a2cedb6fcbcd76d3b6ce6828">  119</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="item_8cpp.html#adc11d823a2cedb6fcbcd76d3b6ce6828">GUN_MODE_VAR_NAME</a>( <span class="stringliteral">&quot;item::mode&quot;</span> );</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="item_8cpp.html#aab0054280289e72ae8b8d9f062e20e47">  120</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="item_8cpp.html#aab0054280289e72ae8b8d9f062e20e47">CLOTHING_MOD_VAR_PREFIX</a>( <span class="stringliteral">&quot;clothing_mod_&quot;</span> );</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">  122</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="item_8cpp.html#a609c386685fa395233e3f1765e57a38b">  123</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="item_8cpp.html#a609c386685fa395233e3f1765e57a38b">ammo_bolt</a>( <span class="stringliteral">&quot;bolt&quot;</span> );</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="item_8cpp.html#aedcf91fddc2bef37ccd577b68c4ad604">  124</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="item_8cpp.html#aedcf91fddc2bef37ccd577b68c4ad604">ammo_money</a>( <span class="stringliteral">&quot;money&quot;</span> );</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">  125</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a>( <span class="stringliteral">&quot;plutonium&quot;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="item_8cpp.html#a36f9b5f5d763f2c224b59b75af340c6c">  127</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="item_8cpp.html#a36f9b5f5d763f2c224b59b75af340c6c">bio_digestion</a>( <span class="stringliteral">&quot;bio_digestion&quot;</span> );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="item_8cpp.html#ab2f4ce2352fb943ced1db3ac4136b355">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodygraph_id</a> <a class="code" href="item_8cpp.html#ab2f4ce2352fb943ced1db3ac4136b355">bodygraph_full_body_iteminfo</a>( <span class="stringliteral">&quot;full_body_iteminfo&quot;</span> );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="item_8cpp.html#acc343fa0f8e04fd5007e8abc6105f8a8">  131</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="item_8cpp.html#acc343fa0f8e04fd5007e8abc6105f8a8">damage_acid</a>( <span class="stringliteral">&quot;acid&quot;</span> );</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="item_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">  132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="item_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a>( <span class="stringliteral">&quot;bash&quot;</span> );</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="item_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">  133</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="item_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a>( <span class="stringliteral">&quot;bullet&quot;</span> );</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="item_8cpp.html#aecd517a9e74b5a5a21f0c75f88f50090">  134</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="item_8cpp.html#aecd517a9e74b5a5a21f0c75f88f50090">damage_cut</a>( <span class="stringliteral">&quot;cut&quot;</span> );</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="item_8cpp.html#ae01ac1ba15b1a58809aef8bc1f735b5b">  135</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> <a class="code" href="item_8cpp.html#ae01ac1ba15b1a58809aef8bc1f735b5b">damage_heat</a>( <span class="stringliteral">&quot;heat&quot;</span> );</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="item_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">  137</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="item_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>( <span class="stringliteral">&quot;bleed&quot;</span> );</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="item_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>( <span class="stringliteral">&quot;cig&quot;</span> );</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="item_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">  139</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="item_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a>( <span class="stringliteral">&quot;shakes&quot;</span> );</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="item_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">  140</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="item_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a>( <span class="stringliteral">&quot;sleep&quot;</span> );</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="item_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">  141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="item_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a>( <span class="stringliteral">&quot;weed_high&quot;</span> );</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">  143</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> <a class="code" href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">fault_overheat_safety</a>( <span class="stringliteral">&quot;fault_overheat_safety&quot;</span> );</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="item_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">  145</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="item_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active&quot;</span> );</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="item_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">  146</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="item_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a>( <span class="stringliteral">&quot;f_smoking_rack_active&quot;</span> );</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="item_8cpp.html#a49d1951d52402e972f602eb8767311f1">  147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="item_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a>( <span class="stringliteral">&quot;f_water_mill_active&quot;</span> );</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="item_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">  148</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> <a class="code" href="item_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a>( <span class="stringliteral">&quot;f_wind_mill_active&quot;</span> );</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0e987240fca9e226501b6c99ad0dd4a4">  150</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">gun_mode_id</a> <a class="code" href="item_8cpp.html#a0e987240fca9e226501b6c99ad0dd4a4">gun_mode_REACH</a>( <span class="stringliteral">&quot;REACH&quot;</span> );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">  152</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a>( <span class="stringliteral">&quot;container&quot;</span> );</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8619c531b6d61b558022c1f34944259f">  153</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#a8619c531b6d61b558022c1f34944259f">item_category_drugs</a>( <span class="stringliteral">&quot;drugs&quot;</span> );</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="item_8cpp.html#ad178609087c011320fb56782f1a30cf0">  154</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#ad178609087c011320fb56782f1a30cf0">item_category_food</a>( <span class="stringliteral">&quot;food&quot;</span> );</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="item_8cpp.html#af0fac6da14e7370e2af006f09efbd8c7">  155</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#af0fac6da14e7370e2af006f09efbd8c7">item_category_maps</a>( <span class="stringliteral">&quot;maps&quot;</span> );</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0d04d7dcbc96ca001764ebf419003a8b">  156</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#a0d04d7dcbc96ca001764ebf419003a8b">item_category_spare_parts</a>( <span class="stringliteral">&quot;spare_parts&quot;</span> );</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="item_8cpp.html#ae7965d5383e2733895a2d2c28ddd85c3">  157</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#ae7965d5383e2733895a2d2c28ddd85c3">item_category_tools</a>( <span class="stringliteral">&quot;tools&quot;</span> );</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="item_8cpp.html#a66f8cc86597ffd0b135246de0ff57d40">  158</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">item_category_id</a> <a class="code" href="item_8cpp.html#a66f8cc86597ffd0b135246de0ff57d40">item_category_weapons</a>( <span class="stringliteral">&quot;weapons&quot;</span> );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="item_8cpp.html#ace91bfda35938e1a3053b644a6104cff">  160</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#ace91bfda35938e1a3053b644a6104cff">itype_arredondo_chute</a>( <span class="stringliteral">&quot;arredondo_chute&quot;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">  161</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a>( <span class="stringliteral">&quot;barrel_small&quot;</span> );</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">  162</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>( <span class="stringliteral">&quot;battery&quot;</span> );</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8de56f93319e34c27cd5c62dd4fa4e72">  163</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a8de56f93319e34c27cd5c62dd4fa4e72">itype_blood</a>( <span class="stringliteral">&quot;blood&quot;</span> );</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0ccb4d60ab6785e534c7eaa8ad7d07c6">  164</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a0ccb4d60ab6785e534c7eaa8ad7d07c6">itype_brass_catcher</a>( <span class="stringliteral">&quot;brass_catcher&quot;</span> );</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="item_8cpp.html#a204277b3b0298457495ded9833c01151">  165</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a204277b3b0298457495ded9833c01151">itype_bullet_crossbow</a>( <span class="stringliteral">&quot;bullet_crossbow&quot;</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">  166</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>( <span class="stringliteral">&quot;cash_card&quot;</span> );</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="item_8cpp.html#a231490a5aa819b4014f1ed02ca49728d">  167</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a231490a5aa819b4014f1ed02ca49728d">itype_cig_butt</a>( <span class="stringliteral">&quot;cig_butt&quot;</span> );</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="item_8cpp.html#aea8dde0d69cd34d32b4388bc5deab0af">  168</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#aea8dde0d69cd34d32b4388bc5deab0af">itype_cig_lit</a>( <span class="stringliteral">&quot;cig_lit&quot;</span> );</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0aab3ef75ee5235f416a510b0876cad3">  169</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a0aab3ef75ee5235f416a510b0876cad3">itype_cigar_butt</a>( <span class="stringliteral">&quot;cigar_butt&quot;</span> );</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="item_8cpp.html#a9d98553b0009d1e6f15c077178c09149">  170</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a9d98553b0009d1e6f15c077178c09149">itype_cigar_lit</a>( <span class="stringliteral">&quot;cigar_lit&quot;</span> );</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">  171</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a>( <span class="stringliteral">&quot;disassembly&quot;</span> );</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="item_8cpp.html#a15d4c6dd0bd83d4205a6f043cd65fbb4">  172</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a15d4c6dd0bd83d4205a6f043cd65fbb4">itype_hand_crossbow</a>( <span class="stringliteral">&quot;hand_crossbow&quot;</span> );</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="item_8cpp.html#a1482bd2efd92c10f5f8ec958ff39d27b">  173</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a1482bd2efd92c10f5f8ec958ff39d27b">itype_joint_roach</a>( <span class="stringliteral">&quot;joint_roach&quot;</span> );</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="item_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">  174</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a>( <span class="stringliteral">&quot;null&quot;</span> );</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="item_8cpp.html#abbe226ec1f3022a926b5846833cb4ee7">  175</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#abbe226ec1f3022a926b5846833cb4ee7">itype_power_cord</a>( <span class="stringliteral">&quot;power_cord&quot;</span> );</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8c80c02fb14cd9bf70ec9aa43eba5164">  176</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a8c80c02fb14cd9bf70ec9aa43eba5164">itype_rad_badge</a>( <span class="stringliteral">&quot;rad_badge&quot;</span> );</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0c2ffb782502d4509c0a854a315dfdeb">  177</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a0c2ffb782502d4509c0a854a315dfdeb">itype_rm13_armor</a>( <span class="stringliteral">&quot;rm13_armor&quot;</span> );</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac71caa61fb71b31b4ad12dfcc0d9dfef">  178</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#ac71caa61fb71b31b4ad12dfcc0d9dfef">itype_stock_none</a>( <span class="stringliteral">&quot;stock_none&quot;</span> );</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa3482398423564904395b3f85ca0e730">  179</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#aa3482398423564904395b3f85ca0e730">itype_tuned_mechanism</a>( <span class="stringliteral">&quot;tuned_mechanism&quot;</span> );</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="item_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">  180</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>( <span class="stringliteral">&quot;water&quot;</span> );</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="item_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">  181</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>( <span class="stringliteral">&quot;water_clean&quot;</span> );</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="item_8cpp.html#a7630095c203f119c01b0a65a02437d76">  182</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="item_8cpp.html#a7630095c203f119c01b0a65a02437d76">itype_waterproof_gunmod</a>( <span class="stringliteral">&quot;waterproof_gunmod&quot;</span> );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="item_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">  184</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="item_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a>( <span class="stringliteral">&quot;CANNIBAL&quot;</span> );</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="item_8cpp.html#af818d8b81e06cfaa815792270032453f">  185</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="item_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a>( <span class="stringliteral">&quot;IMMUNE_SPOIL&quot;</span> );</div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="item_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">  186</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="item_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a>( <span class="stringliteral">&quot;PSYCHOPATH&quot;</span> );</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">  187</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="item_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a>( <span class="stringliteral">&quot;SAPIOVORE&quot;</span> );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="item_8cpp.html#a6311ae33d9c01bff4835e9889df231f3">  189</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> <a class="code" href="item_8cpp.html#a6311ae33d9c01bff4835e9889df231f3">RAPID</a>( <span class="stringliteral">&quot;RAPID&quot;</span> );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="item_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">  191</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> <a class="code" href="item_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a>( <span class="stringliteral">&quot;wool&quot;</span> );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="item_8cpp.html#aaada8b39e1e59783b5dc682d67db64e0">  193</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">morale_type</a> <a class="code" href="item_8cpp.html#aaada8b39e1e59783b5dc682d67db64e0">morale_null</a>( <span class="stringliteral">&quot;morale_null&quot;</span> );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="item_8cpp.html#a48c584d65e77094efa0a53c595771d31">  195</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="item_8cpp.html#a48c584d65e77094efa0a53c595771d31">mon_human</a>( <span class="stringliteral">&quot;mon_human&quot;</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="item_8cpp.html#a9369361029f3d8faf5d727f460de0ba4">  196</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="item_8cpp.html#a9369361029f3d8faf5d727f460de0ba4">mon_zombie_smoker</a>( <span class="stringliteral">&quot;mon_zombie_smoker&quot;</span> );</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="item_8cpp.html#a233acdd06d6158e3a5383d4c81afe5cd">  197</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="item_8cpp.html#a233acdd06d6158e3a5383d4c81afe5cd">mon_zombie_soldier_no_weakpoints</a>( <span class="stringliteral">&quot;mon_zombie_soldier_no_weakpoints&quot;</span> );</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="item_8cpp.html#ad63c8e54fd505f8568be27342a2414f8">  198</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="item_8cpp.html#ad63c8e54fd505f8568be27342a2414f8">mon_zombie_survivor_no_weakpoints</a>( <span class="stringliteral">&quot;mon_zombie_survivor_no_weakpoints&quot;</span> );</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="item_8cpp.html#a851ee4038ae4717b80a721f64cd184f3">  199</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="item_8cpp.html#a851ee4038ae4717b80a721f64cd184f3">pseudo_debug_mon</a>( <span class="stringliteral">&quot;pseudo_debug_mon&quot;</span> );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac27854471d10c049f77918a38d801b70">  201</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> <a class="code" href="item_8cpp.html#ac27854471d10c049f77918a38d801b70">qual_BOIL</a>( <span class="stringliteral">&quot;BOIL&quot;</span> );</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="item_8cpp.html#a3648d0ee246d4a66df0dcd8f2be595e8">  202</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> <a class="code" href="item_8cpp.html#a3648d0ee246d4a66df0dcd8f2be595e8">qual_JACK</a>( <span class="stringliteral">&quot;JACK&quot;</span> );</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="item_8cpp.html#a5ffeadef52daa921bcfd6024526f8feb">  203</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> <a class="code" href="item_8cpp.html#a5ffeadef52daa921bcfd6024526f8feb">qual_LIFT</a>( <span class="stringliteral">&quot;LIFT&quot;</span> );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="item_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">  205</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="item_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>( <span class="stringliteral">&quot;cooking&quot;</span> );</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="item_8cpp.html#a917f093dcdc3861c86a6adf734a52641">  206</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="item_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a>( <span class="stringliteral">&quot;melee&quot;</span> );</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac038c6319122de04af85fb88e6618601">  207</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="item_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>( <span class="stringliteral">&quot;survival&quot;</span> );</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="item_8cpp.html#a35f2f8386cafac888b1488869514370c">  208</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="item_8cpp.html#a35f2f8386cafac888b1488869514370c">skill_weapon</a>( <span class="stringliteral">&quot;weapon&quot;</span> );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="item_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">  210</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">species_id</a> <a class="code" href="item_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a>( <span class="stringliteral">&quot;ROBOT&quot;</span> );</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="item_8cpp.html#a77e4ff334cff4f91e1553f63fe6e8b92">  212</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> <a class="code" href="item_8cpp.html#a77e4ff334cff4f91e1553f63fe6e8b92">sub_body_part_torso_lower</a>( <span class="stringliteral">&quot;torso_lower&quot;</span> );</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0a159d6d4279cc648752aff679722d70">  213</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> <a class="code" href="item_8cpp.html#a0a159d6d4279cc648752aff679722d70">sub_body_part_torso_upper</a>( <span class="stringliteral">&quot;torso_upper&quot;</span> );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="item_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">  215</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="item_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a>( <span class="stringliteral">&quot;CARNIVORE&quot;</span> );</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="item_8cpp.html#a13183aed1904f5a0f40cc7fd7981593e">  216</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="item_8cpp.html#a13183aed1904f5a0f40cc7fd7981593e">trait_JITTERY</a>( <span class="stringliteral">&quot;JITTERY&quot;</span> );</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="item_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">  217</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="item_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a>( <span class="stringliteral">&quot;LIGHTWEIGHT&quot;</span> );</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="item_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">  218</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="item_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a>( <span class="stringliteral">&quot;TOLERANCE&quot;</span> );</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="item_8cpp.html#a1ed0e0569ca42bfbb736694d90fd03fa">  219</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="item_8cpp.html#a1ed0e0569ca42bfbb736694d90fd03fa">trait_WOOLALLERGY</a>( <span class="stringliteral">&quot;WOOLALLERGY&quot;</span> );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">  221</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> <a class="code" href="item_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a>( <span class="stringliteral">&quot;human_flesh_vitamin&quot;</span> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// vitamin flags</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="item_8cpp.html#a33913b0fb893e7e3a076518b02aa5fb8">  224</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="item_8cpp.html#a33913b0fb893e7e3a076518b02aa5fb8">flag_NO_DISPLAY</a>( <span class="stringliteral">&quot;NO_DISPLAY&quot;</span> );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">// fault flags</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="item_8cpp.html#ae1a1f893ca0a1908ca7906a1b86e4865">  227</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="item_8cpp.html#ae1a1f893ca0a1908ca7906a1b86e4865">flag_BLACKPOWDER_FOULING_DAMAGE</a>( <span class="stringliteral">&quot;BLACKPOWDER_FOULING_DAMAGE&quot;</span> );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">// item pricing</span></div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="item_8cpp.html#abda20c3b343cd71d0b07d5899ab6a8cb">  230</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="item_8cpp.html#abda20c3b343cd71d0b07d5899ab6a8cb">PRICE_FILTHY_MALUS</a> = 100;  <span class="comment">// cents</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">  232</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">float</span> <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> = 0.001f;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">class </span><a class="code" href="classnpc__class.html">npc_class</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="item_8cpp.html#a7413a5cfb0fe40e0bcd082ec6a449102">  236</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classstring__id.html">npc_class_id</a> = <a class="code" href="classstring__id.html">string_id&lt;npc_class&gt;</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="item_8cpp.html#a42c61c45a7c529e35bbd74c72b32a9ee">  238</a></span>&#160;<a class="code" href="structlight__emission.html">light_emission</a> <a class="code" href="item_8cpp.html#a42c61c45a7c529e35bbd74c72b32a9ee">nolight</a> = {0, 0, 0};</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// Returns the default item type, used for the null item (default constructed),</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">// the returned pointer is always valid, it&#39;s never cleared by the @ref Item_factory.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">  242</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">nullitem</a>()</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">static</span> <a class="code" href="structitype.html">itype</a> nullitem_m;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> &amp;nullitem_m;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">  248</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a>()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">static</span> <a class="code" href="classitem.html">item</a> result{};</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// reset it, in case a previous caller has changed it</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    result = <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html">  256</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceitem__internal.html">item_internal</a></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">  258</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">goes_bad_temp_cache</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">  259</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">goes_bad_temp_cache_for</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#ab29e65ae2a5f57badbdb39863fc56496">  260</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceitem__internal.html#ab29e65ae2a5f57badbdb39863fc56496">goes_bad_cache_fetch</a>()</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">goes_bad_temp_cache</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#aeb6a5884dc69181dcad735402600ac74">  264</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespaceitem__internal.html#aeb6a5884dc69181dcad735402600ac74">goes_bad_cache_set</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *i )</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">goes_bad_temp_cache</a> = i-&gt;<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">goes_bad_temp_cache_for</a> = i;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#a6b64bf03e7d0612af4681fe5d9297a8d">  269</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespaceitem__internal.html#a6b64bf03e7d0612af4681fe5d9297a8d">goes_bad_cache_unset</a>()</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">goes_bad_temp_cache</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">goes_bad_temp_cache_for</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="namespaceitem__internal.html#a27b6b980a290a373be63b1ef6c0d6d09">  274</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceitem__internal.html#a27b6b980a290a373be63b1ef6c0d6d09">goes_bad_cache_is_for</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *i )</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;{</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">goes_bad_temp_cache_for</a> == i;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structitem__internal_1_1scoped__goes__bad__cache.html">  279</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structitem__internal_1_1scoped__goes__bad__cache.html">scoped_goes_bad_cache</a> {</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="structitem__internal_1_1scoped__goes__bad__cache.html#aa1469bdfabcf1a484d40c1a7c96fcd98">  280</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="structitem__internal_1_1scoped__goes__bad__cache.html#aa1469bdfabcf1a484d40c1a7c96fcd98">scoped_goes_bad_cache</a>( <a class="code" href="classitem.html">item</a> *i ) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="namespaceitem__internal.html#aeb6a5884dc69181dcad735402600ac74">goes_bad_cache_set</a>( i );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structitem__internal_1_1scoped__goes__bad__cache.html#a9c04c10d3077efbb0ad9f9cf3240fc26">  283</a></span>&#160;    <a class="code" href="structitem__internal_1_1scoped__goes__bad__cache.html#a9c04c10d3077efbb0ad9f9cf3240fc26">~scoped_goes_bad_cache</a>() {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="namespaceitem__internal.html#a6b64bf03e7d0612af4681fe5d9297a8d">goes_bad_cache_unset</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;};</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;} <span class="comment">// namespace item_internal</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a> = INT_MAX;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">  291</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>() : bday( <a class="code" href="namespacecalendar.html">calendar</a>::<a class="code" href="namespacecalendar.html#a0b28c598688bb85fbe9619baa7edf24b">start_of_cataclysm</a> )</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> = <a class="code" href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">nullitem</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a> = <a class="code" href="classitem__contents.html">item_contents</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> );</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1">select_itype_variant</a>();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classitem.html#a0552d34d4de5a353fd4453f0ae51c52d">  299</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *type, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <span class="keywordtype">int</span> qty ) : type( type ), bday( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a> )</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a> = <a class="code" href="classitem__contents.html">item_contents</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">countdown_interval</a> &gt; 0_seconds ) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">countdown_interval</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a6f46e6ed5941eccded3fe37eba0491e7">item_variables</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a> ) ) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> = &amp;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">source_monster</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">source_monster</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() &amp;&amp; !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">source_monster</a>-&gt;<a class="code" href="structmtype.html#a2e7e15bb4c03b2e0a3e487f13d25e9bf">zombify_into</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;zombie_form&quot;</span>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">source_monster</a>-&gt;<a class="code" href="structmtype.html#a2e7e15bb4c03b2e0a3e487f13d25e9bf">zombify_into</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span>( qty &gt;= 0 ) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af2971652c35b420d02faa9337c51c00b">can_have_charges</a>() ) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = qty;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( qty &gt; 1 ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set charges for item %s that could not have them!&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;rand_charges.size() &gt; 1 ) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> charge_roll = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;rand_charges.size() - 1 );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> charge_count = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;rand_charges[charge_roll - 1],</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                          <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;rand_charges[charge_roll] );</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), charge_count );</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b1e66074009ee39624c81309110a96f">flag_SPAWN_ACTIVE</a> ) ) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">activate</a>();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5a03883a0cc36bc27471d1ae7423b86c">flag_COLLAPSE_CONTENTS</a> ) ) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a66b8daaa8fa204e7738a601a50a402b6">get_all_standard_pockets</a>() ) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            pocket-&gt;settings.set_collapse( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> mag_filter = []( <a class="code" href="classitem__pocket.html">item_pocket</a> <span class="keyword">const</span> &amp; pck ) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">return</span> pck.is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ||</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                   pck.is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        };</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa63a64b9dda0208d68267945e7b76615">get_pockets</a>( mag_filter ) ) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            pocket-&gt;settings.set_collapse( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af2023595557d26bb6f4c19f23578ec75">flag_NANOFAB_TEMPLATE</a> ) ) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> nanofab_recipe =</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="namespaceitem__group.html#ac3c103acdb13db1667ce38b1bc2bf8a1">item_group::item_from</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a78dfdecbef70d937bd669c233af65693">nanofab_template_group</a> ).<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;NANOFAB_ITEM_ID&quot;</span>, nanofab_recipe.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1">select_itype_variant</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;built_in_mods ) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <a class="code" href="classitem.html">item</a> it( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, qty );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            it.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#acb8b508d58dee8c00950d284b017e520">flag_IRREMOVABLE</a> );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( it, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;default_mods ) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, qty ), <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;count &gt; 0 ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;default_ammo, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;count ),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = <a class="code" href="classitem.html#a628659a14a3b57d0627ddd5093e94147">bday</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &amp;&amp; !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) &amp;&amp; !<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;magazine_converted&quot;</span>, 1 );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">snippet_category</a>.empty() ) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#aff12dd426e9f0340f5e861ddd291cea3">random_id_from_category</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">snippet_category</a> );</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3bb287064006eccf3ef665895976bc7c">expand_snippets</a> ) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;description&quot;</span>, <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>() ) );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().expand_snippets ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;description&quot;</span>, <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( <a class="code" href="classitem.html#aeaa5462841292fc890f32e4a67712faa">variant_description</a>() ) );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a8c401a12a2610fd42cb90e25a5c538c7">phase_id::PNULL</a> ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// item always has any relic properties from itype.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classitem.html#a524c47b7b5d92cdb4a89f3f80c688697">  408</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span>, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    : <a class="code" href="classitem.html">item</a>( find_type( <a class="code" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a> ), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, qty ) {}</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classitem.html#a074a384b1684658fdf19fb0f1b309ff8">  411</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *type, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <a class="code" href="structitem_1_1default__charges__tag.html">default_charges_tag</a> )</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    : <a class="code" href="classitem.html">item</a>( type, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, type-&gt;charges_default() ) {}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="classitem.html#a11e805b0342b5898fad45ba992c1b65b">  414</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span>, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <a class="code" href="structitem_1_1default__charges__tag.html">default_charges_tag</a> tag )</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    : <a class="code" href="classitem.html">item</a>( find_type( <a class="code" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a> ), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, tag ) {}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classitem.html#ae87bf7b06175e484777ad2b830b980f8">  417</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *type, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <a class="code" href="structitem_1_1solitary__tag.html">solitary_tag</a> )</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    : <a class="code" href="classitem.html">item</a>( type, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, type-&gt;count_by_charges() ? 1 : -1 ) {}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classitem.html#a96d2b1e24ec86feebadff1973e9ba2ae">  420</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span>, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, <a class="code" href="structitem_1_1solitary__tag.html">solitary_tag</a> tag )</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    : <a class="code" href="classitem.html">item</a>( find_type( <a class="code" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a> ), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, tag ) {}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="classitem.html#ab5606d3baf832d8d2b7a531e4da5e899">  423</a></span>&#160;<a class="code" href="classsafe__reference.html">safe_reference&lt;item&gt;</a> <a class="code" href="classitem.html#ab5606d3baf832d8d2b7a531e4da5e899">item::get_safe_reference</a>()</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ad01c7f66719cc660c50d2d28086073ad">anchor</a>-&gt;<a class="code" href="classsafe__reference__anchor.html#abc6afb71bf5ae0dbd9392122bd46d42b">reference_to</a>( <span class="keyword">this</span> );</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="item_8cpp.html#a42b82c3f4a090a1bad809a74175c2e2e">  428</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="item_8cpp.html#a42b82c3f4a090a1bad809a74175c2e2e">get_most_rotten_component</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a> )</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *most_rotten = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a>.components ) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span>( !tvp.second.front().goes_bad() ) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="comment">// they&#39;re all the same type, so this should be the same for all</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span>( !most_rotten || it.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() &gt; most_rotten-&gt;<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() ) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                most_rotten = &amp;it;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> most_rotten;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">// sorts with localized_compare, and enumerates entries, if more than \p max entries</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">// the rest are abbreviated into &quot; and %d more&quot;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">  447</a></span>&#160;<span class="keyword">static</span> std::string <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;v,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = 5 )</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> &lt; 1 ) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Expected max to be 1 or more&quot;</span> );</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>( std::min&lt;size_t&gt;( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>, v.size() ) );</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    std::partial_sort_copy( v.begin(), v.end(), <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.begin(), <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.end(), <a class="code" href="localized__comparator_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a> );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> more = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( v.size() - <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.size() );</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span>( more == 0 ) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">const</span> std::string res = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> == 1 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s and %d more&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s, and %d more&quot;</span> ), res, more );</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="item_8cpp.html#a038037d5395f07c017ddf669f528d0b9">  464</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="item_8cpp.html#a038037d5395f07c017ddf669f528d0b9">get_shortest_lifespan_from_components</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a> )</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *shortest_lifespan_component = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> shortest_lifespan = 0_turns;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a>.components ) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span>( !tvp.second.front().goes_bad() ) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment">// they&#39;re all the same type, so this should be the same for all</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <a class="code" href="classtime__duration.html">time_duration</a> lifespan = it.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() - it.<a class="code" href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">get_rot</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordflow">if</span>( !shortest_lifespan_component || ( lifespan &lt; shortest_lifespan ) ) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                shortest_lifespan_component = &amp;it;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                shortest_lifespan = shortest_lifespan_component-&gt;<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() -</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                    shortest_lifespan_component-&gt;<a class="code" href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">get_rot</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">return</span> shortest_lifespan;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8e9978cebc9f2cddace428089ec0ae2d">  485</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#a8e9978cebc9f2cddace428089ec0ae2d">shelf_life_less_than_each_component</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a> )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a>.components ) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">if</span>( !tvp.second.front().goes_bad() || !tvp.second.front().is_comestible() ) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="comment">// they&#39;re all the same type, so this should be the same for all</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() &lt; <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">craft</a>.get_shelf_life() ) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">// There are two ways rot is inherited:</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">// 1) Inherit the remaining lifespan of the component with the lowest remaining lifespan</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">// 2) Inherit the relative rot of the component with the highest relative rot</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">// Method 1 is used when the result of the recipe has a lower maximum shelf life than all of</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">// its component&#39;s maximum shelf lives. Relative rot is not good to inherit in this case because</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// it can make an extremely short resultant remaining lifespan on the product.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// Method 2 is used when any component has a longer maximum shelf life than the result does.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">// Inheriting the lowest remaining lifespan can not be used in this case because it would break</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">// food preservation recipes.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="item_8cpp.html#a78d952aba835a888ff4be076d6f2142b">  512</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#a78d952aba835a888ff4be076d6f2142b">inherit_rot_from_components</a>( <a class="code" href="classitem.html">item</a> &amp;it )</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;{</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="item_8cpp.html#a8e9978cebc9f2cddace428089ec0ae2d">shelf_life_less_than_each_component</a>( it ) ) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> shortest_lifespan = <a class="code" href="item_8cpp.html#a038037d5395f07c017ddf669f528d0b9">get_shortest_lifespan_from_components</a>( it );</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span>( shortest_lifespan &gt; 0_turns &amp;&amp; shortest_lifespan &lt; it.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            it.<a class="code" href="classitem.html#a9721daec3304aeb9965b5679f9db3e7f">set_rot</a>( it.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() - shortest_lifespan );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Fallthrough: shortest_lifespan &lt;= 0_turns (all components are rotten)</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *most_rotten = <a class="code" href="item_8cpp.html#a42b82c3f4a090a1bad809a74175c2e2e">get_most_rotten_component</a>( it );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span>( most_rotten ) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        it.<a class="code" href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae">set_relative_rot</a>( most_rotten-&gt;<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="classitem.html#a51ceef1e5f64185401f2cf5037f9a004">  529</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *rec, <span class="keywordtype">int</span> qty, <a class="code" href="classitem__components.html">item_components</a> items, std::vector&lt;item_comp&gt; selections )</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    : <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;craft&quot;</span>, <a class="code" href="namespacecalendar.html">calendar</a>::<a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a> )</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> = cata::make_value&lt;craft_data&gt;();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making = rec;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;disassembly = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;batch_size = qty;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> = std::move( items );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;comps_used = std::move( selections );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = <a class="code" href="classitem.html#a628659a14a3b57d0627ddd5093e94147">bday</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <a class="code" href="item_8cpp.html#a78d952aba835a888ff4be076d6f2142b">inherit_rot_from_components</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> : tvp.second ) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f : <a class="code" href="structcomponent.html">component</a>.get_flags() ) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">if</span>( f-&gt;craft_inherit() ) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( f );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f : <a class="code" href="structcomponent.html">component</a>.<a class="code" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>() ) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="keywordflow">if</span>( f-&gt;craft_inherit() ) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( f );</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="classitem.html#aada58551ec3ccbffb8ce04a402db856e">  563</a></span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *rec, <span class="keywordtype">int</span> qty, <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> )</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    : <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;disassembly&quot;</span>, <a class="code" href="namespacecalendar.html">calendar</a>::<a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a> )</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> = cata::make_value&lt;craft_data&gt;();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making = rec;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;disassembly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;batch_size = qty;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="classitem__components.html">item_components</a> items;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    items.<a class="code" href="classitem__components.html#a8fd66d14ce513ca8fc5868a29791276b">add</a>( <a class="code" href="structcomponent.html">component</a> );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> = items;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = <a class="code" href="classitem.html#a628659a14a3b57d0627ddd5093e94147">bday</a>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <a class="code" href="item_8cpp.html#a78d952aba835a888ff4be076d6f2142b">inherit_rot_from_components</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;comp : tvp.second ) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f : comp.<a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>() ) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <span class="keywordflow">if</span>( f-&gt;craft_inherit() ) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( f );</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f : comp.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>() ) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">if</span>( f-&gt;craft_inherit() ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( f );</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; ) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a>( <a class="code" href="classitem.html">item</a> &amp;&amp; ) noexcept = default;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<a class="code" href="classitem.html">item</a>::~<a class="code" href="classitem.html">item</a>() = default;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html">item</a>::operator=( const <a class="code" href="classitem.html">item</a> &amp; ) = default;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html">item</a>::operator=( <a class="code" href="classitem.html">item</a> &amp;&amp; ) noexcept = default;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="classitem.html#a843e57d31c5f26b3300b607446c8b860">  604</a></span>&#160;<a class="code" href="classitem.html">item</a> <a class="code" href="classitem.html">item</a>::make_corpse( const <a class="code" href="classstring__id.html">mtype_id</a> &amp;mt, <a class="code" href="classtime__point.html">time_point</a> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a>, const std::<span class="keywordtype">string</span> &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        const <span class="keywordtype">int</span> upgrade_time )</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span>( !mt.is_valid() ) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to make a corpse with an invalid mtype id&quot;</span> );</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    std::string corpse_type = mt == <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">mtype_id::NULL_ID</a>() ? <span class="stringliteral">&quot;corpse_generic_human&quot;</span> : <span class="stringliteral">&quot;corpse&quot;</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="classitem.html">item</a> result( corpse_type, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a> );</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    result.<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> = &amp;mt.obj();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span>( result.<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#a9611ac53122972087173a34c2d62e422">mon_flag_REVIVES</a> ) ) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            result.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#ac5b035ad53c74c5becc89b7492bd797b">flag_REVIVE_SPECIAL</a> );</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        result.<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;upgrade_time&quot;</span>, <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( upgrade_time ) );</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span>( !mt-&gt;zombify_into.is_empty() ) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        result.<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;zombie_form&quot;</span>, mt-&gt;zombify_into.c_str() );</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// This is unconditional because the const itemructor above sets result.name to</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// &quot;human corpse&quot;.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    result.<a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a> = <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="classitem.html#abf446115b6197c91dd21139de6688d18">  634</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">item::convert</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;new_type, <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;{</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// Carry over relative rot similar to crafting</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> rel_rot = <a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">find_type</a>( new_type );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae">set_relative_rot</a>( rel_rot );</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> = <span class="keyword">true</span>; <span class="comment">// new type may have &quot;active&quot; flags</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="classitem.html">item</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.contents = <a class="code" href="classitem__contents.html">item_contents</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> );</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a59536fcea7580503b51d8899552fa31c">mods</a>() ) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.put_in( *it, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ).success() ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;failed to insert mod&quot;</span> );</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.update_modified_pockets();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.contents.combine( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a> = <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.contents;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = new_type-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() != new_type-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = new_type-&gt;<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>.type-&gt;countdown_interval &gt; 0_seconds ) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">countdown_interval</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span>( carrier &amp;&amp; carrier-&gt;<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        carrier-&gt;<a class="code" href="classCharacter.html#af313d5e6787a710d5d8419acea7e8f7e">on_item_acquire</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>();</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">  668</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">item::deactivate</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *ch, <span class="keywordtype">bool</span> alert )</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="comment">// no-op</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">if</span>( ch &amp;&amp; alert &amp;&amp; !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;revert_msg.empty() ) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            ch-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;revert_msg.translated(), <a class="code" href="namespacetname.html">tname</a>() );</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> );</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno"><a class="line" href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">  685</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">item::activate</a>()</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;{</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>; <span class="comment">// no-op</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classitem.html#ac8356682e1760d4b4d4f62353eeb9ba9">  696</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac8356682e1760d4b4d4f62353eeb9ba9">item::activate_thrown</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a76600c0d6a88c8d983838f0df2276212">invoke</a>( <span class="keyword">nullptr</span>, *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).value_or( 0 );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classitem.html#a0265172cdecddf0ae112a4f4d87fdb77">  701</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#a0265172cdecddf0ae112a4f4d87fdb77">item::mod_energy</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::energy</a> &amp;qty )</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;{</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">is_vehicle_battery</a>() ) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set energy of non-battery item&quot;</span> );</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> 0_J;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::energy</a> val = <a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">energy_remaining</a>( <span class="keyword">nullptr</span> ) + qty;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span>( val &lt; 0_J ) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> val;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity ) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> = val;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">return</span> 0_J;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">  719</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;ammo, <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span>( !ammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> ) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;can&#39;t set ammo %s in %s as it is not an ammo&quot;</span>, ammo.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>(), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> = ammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span>( qty &lt; 0 ) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">// completely fill an integral or existing magazine</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">//if( magazine_current() ) then we need capacity of the magazine instead of the item maybe?</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() || <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            qty = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="comment">// else try to add a magazine using default ammo count property if set</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>( <span class="keyword">true</span> ).<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="classitem.html">item</a> mag( <a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="keywordflow">if</span>( mag.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;count &gt; 0 ) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                qty = mag.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;count;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                qty = mag.<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span>( qty &lt;= 0 ) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">ammo_unset</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// handle reloadable tools and guns with no specific ammo type as special case</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span>( ammo.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() &amp;&amp; <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty, <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) );</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> temp_ammo( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty, <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) ) );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( temp_ammo, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// check ammo is valid for the item</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    std::set&lt;itype_id&gt; mags = <a class="code" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">magazine_compatible</a>();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) == 0 &amp;&amp; !( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() &amp;&amp;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    !std::any_of( mags.begin(), mags.end(), [&amp;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; mag ) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    return mag-&gt;magazine-&gt;type.count( ammo_type );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    } ) ) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set invalid ammo of %s for %s&quot;</span>, ammo.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>(), <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().c_str() );</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">ammo_unset</a>();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="classitem.html">item</a> set_ammo( ammo, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty, <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) ) );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab0fa10b3db4d9eb9429524f8e0d0f0cd">flag_NO_UNLOAD</a> ) ) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            set_ammo.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a> );</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            set_ammo.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#acb8b508d58dee8c00950d284b017e520">flag_IRREMOVABLE</a> );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( set_ammo, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> mag = <a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>();</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="keywordflow">if</span>( !mag-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set ammo of %s without suitable magazine for %s&quot;</span>,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                          ammo.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>(), <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().c_str() );</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="classitem.html">item</a> mag_item( mag );</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="comment">// if default magazine too small fetch instead closest available match</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span>( mag_item.<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) &lt; qty ) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                std::vector&lt;item&gt; opts;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;mag_type : mags ) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                    <span class="keywordflow">if</span>( mag_type-&gt;magazine-&gt;type.count( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a> ) ) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        opts.emplace_back( mag_type );</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="keywordflow">if</span>( opts.empty() ) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                    <span class="keyword">const</span> std::string magazines_str = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( mags,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; mag ) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                        <span class="keyword">const</span> std::string ammotype_str = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( mag-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                        []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp; <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                            return a.str();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                        } );</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s (taking %s)&quot;</span> ), mag.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), ammotype_str );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                    } );</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Cannot find magazine fitting %s with any capacity for ammo %s &quot;</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                              <span class="stringliteral">&quot;(ammotype %s).  Magazines considered were %s&quot;</span>,</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                              <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str(), ammo.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), magazines_str );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                std::sort( opts.begin(), opts.end(), [&amp;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; lhs, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; rhs ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    return lhs.ammo_capacity( ammo_type ) &lt; rhs.ammo_capacity( ammo_type );</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                } );</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keyword">auto</span> iter = std::find_if( opts.begin(), opts.end(), [&amp;qty, &amp;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; mag ) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    return mag.ammo_capacity( ammo_type ) &gt;= qty;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                } );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">if</span>( iter != opts.end() ) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                    mag = iter-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    mag = opts.back().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( mag ), <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="classitem.html">item</a> *mag_cur = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">if</span>( mag_cur != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            mag_cur-&gt;<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo, qty );</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">  837</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">item::ammo_unset</a>()</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;{</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="comment">// do nothing</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">is_money</a>() ) { <span class="comment">// charges are set wrong on cash cards.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a09498883cc39f742e1f1486b95f1b8c1">clear_magazines</a>();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a09498883cc39f742e1f1486b95f1b8c1">clear_magazines</a>();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">ammo_unset</a>();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;}</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">  858</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;}</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">  863</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">item::degradation</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="classitem.html#a68dcc193f7192ee4a989abe18f93597a">  868</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a68dcc193f7192ee4a989abe18f93597a">item::rand_degradation</a>()</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">degrade_increments</a>() == 0 ) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// likely count_by_charges</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">set_degradation</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() ) * 50.0f / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">degrade_increments</a>() );</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">  876</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">item::damage_level</a>( <span class="keywordtype">bool</span> precise )<span class="keyword"> const</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">return</span> precise ? <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5b7d715170e5bd7304bde8831dbe39bb">damage_level</a>( <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> );</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classitem.html#a1703999bf22b8d2459823a6b779d13b7">  881</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a1703999bf22b8d2459823a6b779d13b7">item::damage_adjusted_melee_weapon_damage</a>( <span class="keywordtype">float</span> value )<span class="keyword"> const</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">return</span> value; <span class="comment">// count by charges items don&#39;t have partial damage</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">return</span> value * ( 1.0f - 0.1f * <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() - 1 ) );</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classitem.html#a146815219eb98e0016eb0b006b0d4812">  889</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a146815219eb98e0016eb0b006b0d4812">item::damage_adjusted_gun_damage</a>( <span class="keywordtype">float</span> value )<span class="keyword"> const</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">return</span> value; <span class="comment">// count by charges items don&#39;t have partial damage</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">return</span> value - 2 * <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() - 1 );</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="classitem.html#adcc19485b2436da770a7b1dc46cb756a">  897</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#adcc19485b2436da770a7b1dc46cb756a">item::damage_adjusted_armor_resist</a>( <span class="keywordtype">float</span> value )<span class="keyword"> const</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">return</span> value; <span class="comment">// count by charges items don&#39;t have partial damage</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">return</span> value * ( 1.0f - <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() - 1 ) * 0.125f );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="classitem.html#afebc00bf525bada288b71deebbc84d84">  905</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#afebc00bf525bada288b71deebbc84d84">item::set_damage</a>( <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">std::clamp</a>( qty, <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a>, <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() );</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">  910</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">item::set_degradation</a>( <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">degrade_increments</a>() &gt; 0 ) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">std::clamp</a>( qty, 0, <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() );</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> = 0;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="classitem.html#afebc00bf525bada288b71deebbc84d84">set_damage</a>( <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> );</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;}</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">  920</a></span>&#160;<a class="code" href="classitem.html">item</a> <a class="code" href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">item::split</a>( <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;{</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || qty &lt;= 0 || qty &gt;= <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="classitem.html">item</a> res = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    res.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = qty;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= qty;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="classitem.html#a4d5555082454b3cb192f59a70838c891">  931</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Actually, type should never by null at all.</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> == <span class="keyword">nullptr</span> || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> == <a class="code" href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">nullitem</a>() || <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() );</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">  937</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">item::is_frozen_liquid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a> ) &amp;&amp; <a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> );</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="classitem.html#a9ebcf20bf4749a6065b05af4b8653d2a">  942</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">item::covers</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// if the item has no armor data it doesn&#39;t cover that part</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordtype">bool</span> has_sub_data = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// If the item has no sub location info and covers the part&#39;s parent,</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="comment">// then assume that the item covers that sub body part.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            has_sub_data = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span>( !has_sub_data ) {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;parent );</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordtype">bool</span> does_cover = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordtype">bool</span> subpart_cover = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="classitem.html#ae66a5aed603c71426e451799110fbee3">iterate_covered_sub_body_parts_internal</a>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>(), [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp; covered ) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        does_cover = does_cover || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == covered;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    } );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">return</span> does_cover || subpart_cover;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;}</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">  974</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">item::covers</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">bool</span> does_cover = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordtype">bool</span> subpart_cover = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="classitem.html#a59c811236ff70ccf999c72bf51cd756c">iterate_covered_body_parts_internal</a>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>(), [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp; covered ) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        does_cover = does_cover || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == covered;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    } );</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span> does_cover || subpart_cover;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;}</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="classitem.html#a130dbad844e69ded0020642fbb251c6a">  985</a></span>&#160;std::optional&lt;side&gt; <a class="code" href="classitem.html#a130dbad844e69ded0020642fbb251c6a">item::covers_overlaps</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>() != rhs.<a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>() ) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *rhs_armor = rhs.<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span>( rhs_armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="classbody__part__set.html">body_part_set</a> this_covers;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : armor-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            this_covers.<a class="code" href="classbody__part__set.html#ada23c12a13e46717fc6bc09b02f24169">unify_set</a>( *data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a> );</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="classbody__part__set.html">body_part_set</a> rhs_covers;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : rhs_armor-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            rhs_covers.<a class="code" href="classbody__part__set.html#ada23c12a13e46717fc6bc09b02f24169">unify_set</a>( *data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a> );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span>( this_covers.<a class="code" href="classbody__part__set.html#a5d5d8749b28939d75c8953e08bf97e3a">intersect_set</a>( rhs_covers ).<a class="code" href="classbody__part__set.html#ab73d8c38feeabf0f9ab423fec3ebc834">any</a>() ) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">return</span> rhs.<a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;}</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"><a class="line" href="classitem.html#adeee506a678ad91ac6c07e77296e7325"> 1017</a></span>&#160;std::vector&lt;sub_bodypart_id&gt; <a class="code" href="classitem.html#adeee506a678ad91ac6c07e77296e7325">item::get_covered_sub_body_parts</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#adeee506a678ad91ac6c07e77296e7325">get_covered_sub_body_parts</a>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>() );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="classitem.html#aa7a5449013b85cf11438af016b9c6e48"> 1022</a></span>&#160;std::vector&lt;sub_bodypart_id&gt; <a class="code" href="classitem.html#adeee506a678ad91ac6c07e77296e7325">item::get_covered_sub_body_parts</a>( <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s )<span class="keyword"> const</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    std::vector&lt;sub_bodypart_id&gt; res;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="classitem.html#ae66a5aed603c71426e451799110fbee3">iterate_covered_sub_body_parts_internal</a>( s, [&amp;]( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp; <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        res.push_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    } );</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"><a class="line" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5"> 1031</a></span>&#160;<a class="code" href="classbody__part__set.html">body_part_set</a> <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">item::get_covered_body_parts</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>() );</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;}</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="classitem.html#a28eef763e61e3986a0ca58786113749a"> 1036</a></span>&#160;<a class="code" href="classbody__part__set.html">body_part_set</a> <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">item::get_covered_body_parts</a>( <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s )<span class="keyword"> const</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classbody__part__set.html">body_part_set</a> res;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="classitem.html#a59c811236ff70ccf999c72bf51cd756c">iterate_covered_body_parts_internal</a>( s, [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp; <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        res.<a class="code" href="classbody__part__set.html#ab53afcd91c970552cf7f8914e2d7b151">set</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    } );</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;}</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html"> 1045</a></span>&#160;<span class="keyword">namespace</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;{</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a5bd8eb99bd3fab0ab52f95e05c950ecc"> 1048</a></span>&#160;<span class="keyword">const</span> std::array&lt;bodypart_str_id, 4&gt; &amp;<a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a5bd8eb99bd3fab0ab52f95e05c950ecc">left_side_parts</a>()</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;bodypart_str_id, 4&gt; result{ {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <a class="code" href="bodypart_8cpp.html#a954b36de93f2258bf1d31e8f24494ad0">body_part_arm_l</a>,</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <a class="code" href="bodypart_8cpp.html#ae00eb113c2ff69f1818aeefe0d00f876">body_part_hand_l</a>,</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <a class="code" href="bodypart_8cpp.html#a92caf587794873fa1f3cc4bace29993c">body_part_leg_l</a>,</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <a class="code" href="bodypart_8cpp.html#aebd4726eec42047e34e492f029b52206">body_part_foot_l</a></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        } };</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#ac8941c70393d783ff5f0880ec175bc9e"> 1059</a></span>&#160;<span class="keyword">const</span> std::array&lt;bodypart_str_id, 4&gt; &amp;<a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#ac8941c70393d783ff5f0880ec175bc9e">right_side_parts</a>()</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;{</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;bodypart_str_id, 4&gt; result{ {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <a class="code" href="bodypart_8cpp.html#aa26e675361f884c329258a89ecbdf0ec">body_part_arm_r</a>,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <a class="code" href="bodypart_8cpp.html#a67fd1441077f21f79e895830d0534b2b">body_part_hand_r</a>,</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            <a class="code" href="bodypart_8cpp.html#aa372ea85b9fd9dee0197b2c16362d7a9">body_part_leg_r</a>,</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <a class="code" href="bodypart_8cpp.html#a1e5a8dc07b262107fd65bfbe882b5458">body_part_foot_r</a></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        } };</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;}</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"><a class="line" href="item_8cpp.html#ac471118dac34127cf80986b963ab30b6"> 1072</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#ac471118dac34127cf80986b963ab30b6">iterate_helper_sbp</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *i, <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s,</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                                <span class="keyword">const</span> std::function&lt;<span class="keywordtype">void</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp; )&gt; &amp;cb )</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = i-&gt;<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">if</span>( !armor-&gt;<a class="code" href="structislot__armor.html#a0da3d1bef6cc7dd66499906eadfaf57f">sided</a> || s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> || s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">side::num_sides</a> ) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    cb( bpid );</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <span class="keywordflow">if</span>( bpid-&gt;<a class="code" href="structsub__body__part__type.html#a4fe2420efee3c7c4a189c2137bb464b9">part_side</a> == s || bpid-&gt;<a class="code" href="structsub__body__part__type.html#a4fe2420efee3c7c4a189c2137bb464b9">part_side</a> == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> ) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    cb( bpid );</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="classitem.html#ae66a5aed603c71426e451799110fbee3"> 1097</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae66a5aed603c71426e451799110fbee3">item::iterate_covered_sub_body_parts_internal</a>( <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keyword">const</span> std::function&lt;<span class="keywordtype">void</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp; )&gt; &amp;cb )<span class="keyword"> const</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="item_8cpp.html#ac471118dac34127cf80986b963ab30b6">iterate_helper_sbp</a>( <span class="keyword">this</span>, s, cb );</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">//check for ablative armor too</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <a class="code" href="item_8cpp.html#ac471118dac34127cf80986b963ab30b6">iterate_helper_sbp</a>( &amp;ablative_armor, s, cb );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="item_8cpp.html#a430d0178c03f104d92fc2b4180a96344"> 1115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#a430d0178c03f104d92fc2b4180a96344">iterate_helper</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *i, <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                            <span class="keyword">const</span> std::function&lt;<span class="keywordtype">void</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp; )&gt; &amp;cb )</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;{</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = i-&gt;<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// If we are querying for only one side of the body, we ignore coverage</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// for parts on the opposite side of the body.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;opposite_side_parts = s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a> ? <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#ac8941c70393d783ff5f0880ec175bc9e">right_side_parts</a>() : <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a5bd8eb99bd3fab0ab52f95e05c950ecc">left_side_parts</a>();</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : armor-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">if</span>( data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="keywordflow">if</span>( !armor-&gt;<a class="code" href="structislot__armor.html#a0da3d1bef6cc7dd66499906eadfaf57f">sided</a> || s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> || s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">side::num_sides</a> ) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    cb( bpid );</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                <span class="keywordflow">if</span>( std::find( opposite_side_parts.begin(), opposite_side_parts.end(),</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                               bpid ) == opposite_side_parts.end() ) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                    cb( bpid );</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="classitem.html#a59c811236ff70ccf999c72bf51cd756c"> 1145</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a59c811236ff70ccf999c72bf51cd756c">item::iterate_covered_body_parts_internal</a>( <span class="keyword">const</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keyword">const</span> std::function&lt;<span class="keywordtype">void</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp; )&gt; &amp;cb )<span class="keyword"> const</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <a class="code" href="item_8cpp.html#a430d0178c03f104d92fc2b4180a96344">iterate_helper</a>( <span class="keyword">this</span>, s, cb );</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">//check for ablative armor too</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                <a class="code" href="item_8cpp.html#a430d0178c03f104d92fc2b4180a96344">iterate_helper</a>( &amp;ablative_armor, s, cb );</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56"> 1163</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">item::is_sided</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> t ? t-&gt;<a class="code" href="structislot__armor.html#a0da3d1bef6cc7dd66499906eadfaf57f">sided</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;}</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="classitem.html#aecf84874cbc13ba0ce8a205690747305"> 1169</a></span>&#160;<a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">item::get_side</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// MSVC complains if directly cast double to enum</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a><span class="keyword">&gt;</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( std::string{ <span class="stringliteral">&quot;lateral&quot;</span> } ),</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> ) ) ) );</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9"> 1176</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">item::set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a> s )</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">is_sided</a>() ) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span>( s == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> ) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;lateral&quot;</span> );</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;lateral&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( s ) );</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="classitem.html#ac972bd94fc3a86b96499c34b8b1741a6"> 1191</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac972bd94fc3a86b96499c34b8b1741a6">item::swap_side</a>()</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;{</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="bodypart_8cpp.html#a7e67f6bbe865282540080a39151106c6">opposite_side</a>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>() ) );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8"> 1196</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">item::is_ablative</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">return</span> t ? t-&gt;<a class="code" href="structislot__armor.html#aab35b43e855613f4b94d4e86f01d145c">ablative</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="classitem.html#a601098e9f42af97e6fd3922bf574ca4a"> 1202</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a601098e9f42af97e6fd3922bf574ca4a">item::has_additional_encumbrance</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">return</span> t ? t-&gt;<a class="code" href="structislot__armor.html#a37e19d473b3b2fdcec3cf2f59b28688e">additional_pocket_enc</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="classitem.html#a08b2eb703a81548c3ace81c4fa22f376"> 1208</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a08b2eb703a81548c3ace81c4fa22f376">item::has_ripoff_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span> t ? t-&gt;<a class="code" href="structislot__armor.html#acb2526811c5599ca3ba595cff89c9015">ripoff_chance</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"><a class="line" href="classitem.html#a28f50b62c3ba4191f8b96b77c780a555"> 1214</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a28f50b62c3ba4191f8b96b77c780a555">item::has_noisy_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> t ? t-&gt;<a class="code" href="structislot__armor.html#a341f7e97f96ee806e781dd9177a4f6da">noisy</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="classitem.html#a0894d963d06ccd7c7237d4b2b837956d"> 1220</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0894d963d06ccd7c7237d4b2b837956d">item::is_worn_only_with</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() &amp;&amp; it.<a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() &amp;&amp; it.<a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) );</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="classitem.html#a97c519c4be7a500111112216e64a25a6"> 1224</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a97c519c4be7a500111112216e64a25a6">item::is_worn_by_player</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"><a class="line" href="classitem.html#afa838813479794c29ea01ccecf833791"> 1229</a></span>&#160;<a class="code" href="classitem.html">item</a> <a class="code" href="classitem.html#afa838813479794c29ea01ccecf833791">item::in_its_container</a>( <span class="keywordtype">int</span> qty )<span class="keyword"> const</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a9631255be918afc443309fd2f3647b69">in_container</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a>.value_or( <a class="code" href="item_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a> ), qty,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                         <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a402963af27c727a87b20bddb4362754e">default_container_sealed</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">default_container_variant</a>.value_or( <span class="stringliteral">&quot;&quot;</span> ) );</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"><a class="line" href="classitem.html#a9631255be918afc443309fd2f3647b69"> 1235</a></span>&#160;<a class="code" href="classitem.html">item</a> <a class="code" href="classitem.html#a9631255be918afc443309fd2f3647b69">item::in_container</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;cont, <span class="keywordtype">int</span> qty, <span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a41f2ec594f3c9a854551ea75977e6d6e">sealed</a>,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                         <span class="keyword">const</span> std::string &amp;variant )<span class="keyword"> const</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span>( cont.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">if</span>( qty &lt;= 0 ) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        qty = <a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="classitem.html">item</a> container( cont, <a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span>( !variant.empty() ) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        container.<a class="code" href="classitem.html#a2307462a36b9809493966946645c2bc4">set_itype_variant</a>( variant );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span>( container.<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        container.<a class="code" href="classitem.html#abfc3474737590a81c25c5c5d7154aaa2">fill_with</a>( *<span class="keyword">this</span>, qty );</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        container.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> = <a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a41f2ec594f3c9a854551ea75977e6d6e">sealed</a> ) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            container.<a class="code" href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">seal</a>();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="keywordflow">if</span>( !container.<a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( [&amp;cont]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        return it.typeId() == cont;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        } ) ) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: failed to put %s in its container %s&quot;</span>, <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().c_str(), cont.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        container.<a class="code" href="classitem.html#a08d13927517213cba082edf26c3ed767">add_automatic_whitelist</a>();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">return</span> container;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8ad991121ec586b5527bd9b0d79e7ef0">is_software</a>() &amp;&amp; container.<a class="code" href="classitem.html#ae9889725e446c9acbd5f23aa6cde35eb">is_software_storage</a>() ) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        container.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( *<span class="keyword">this</span>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548">pocket_type::SOFTWARE</a> );</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        container.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> = <a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">return</span> container;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"><a class="line" href="classitem.html#a08d13927517213cba082edf26c3ed767"> 1271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a08d13927517213cba082edf26c3ed767">item::add_automatic_whitelist</a>()</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;{</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    std::vector&lt;item_pocket *&gt; pkts = <a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span>( pkts.size() == 1 &amp;&amp; <a class="code" href="classitem.html#a9691e635ae33464eb0b2700e8bfce0ba">contents_only_one_type</a>() ) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        pkts.front()-&gt;settings.whitelist_item( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac610119ad38ef4567c80490e9b0e5f83">first_item</a>().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        pkts.front()-&gt;settings.set_priority( 100 );</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"><a class="line" href="classitem.html#ab6ed09134cd52fef2ca7a56cbd32597e"> 1280</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ab6ed09134cd52fef2ca7a56cbd32597e">item::clear_automatic_whitelist</a>()</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;{</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    std::vector&lt;item_pocket *&gt; pkts = <a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span>( pkts.size() == 1 &amp;&amp; !pkts.front()-&gt;settings.was_edited() ) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;itype_id&gt;</a> <span class="keyword">const</span> &amp;wl = pkts.front()-&gt;settings.get_item_whitelist();</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span>( !wl.empty() ) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            pkts.front()-&gt;settings.clear_item( *wl.<a class="code" href="classcata_1_1flat__set.html#a038c2f807983027c730259560308285c">begin</a>() );</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            pkts.front()-&gt;settings.set_priority( 0 );</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"><a class="line" href="classitem.html#ae47123eefc3d9d809658ea474091c8d7"> 1292</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae47123eefc3d9d809658ea474091c8d7">item::update_modified_pockets</a>()</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;{</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    std::optional&lt;const pocket_data *&gt; mag_or_mag_well;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    std::vector&lt;const pocket_data *&gt; container_pockets;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="comment">// Prevent cleanup of pockets belonging to the item base type</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">pockets</a> ) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            container_pockets.push_back( &amp;pocket );</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ||</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                   pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            mag_or_mag_well = &amp;pocket;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// Prevent cleanup of added modular pockets</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad676d0ea6aeb3bc7d4d4077271174d5c">get_added_pockets</a>() ) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : it-&gt;<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a>-&gt;pockets ) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                container_pockets.push_back( &amp;pocket );</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>() ) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;mod ) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classpocket__data.html">pocket_data</a> &amp;pocket : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;mod-&gt;add_pockets ) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                    container_pockets.push_back( &amp;pocket );</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ||</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                           pocket.<a class="code" href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">type</a> == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                    mag_or_mag_well = &amp;pocket;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ae80c1497df815a196ba8b3dee2932706">update_modified_pockets</a>( mag_or_mag_well, container_pockets );</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="classitem.html#a902e330a0505ae225e2ed05921bdf004"> 1332</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a902e330a0505ae225e2ed05921bdf004">item::charges_per_volume</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> &amp;vol, <span class="keywordtype">bool</span> suppress_warning )<span class="keyword"> const</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> == 0_ml ) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <span class="keywordflow">if</span>( !suppress_warning ) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item &#39;%s&#39; with zero volume&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="comment">// Type cast to prevent integer overflow with large volume containers like the cargo</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="comment">// dimension</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="keywordflow">return</span> vol * <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> ) / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::volume</a> my_volume = <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>();</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">if</span>( my_volume == 0_ml ) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">if</span>( !suppress_warning ) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item &#39;%s&#39; with zero volume&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">return</span> vol / my_volume;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;}</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"><a class="line" href="classitem.html#a732ea713c6965bb7a15ba7f2fe08f2b5"> 1356</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a732ea713c6965bb7a15ba7f2fe08f2b5">item::charges_per_weight</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::mass</a> &amp;m, <span class="keywordtype">bool</span> suppress_warning )<span class="keyword"> const</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a> == 0_gram ) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <span class="keywordflow">if</span>( !suppress_warning ) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item &#39;%s&#39; with zero weight&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">return</span> m / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::mass</a> my_weight = <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keywordflow">if</span>( my_weight == 0_gram ) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <span class="keywordflow">if</span>( !suppress_warning ) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item &#39;%s&#39; with zero weight&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordflow">return</span> m / my_weight;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"><a class="line" href="classitem.html#a7454027d8aaeb67f6e9d6b374bae55c7"> 1378</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a7454027d8aaeb67f6e9d6b374bae55c7">item::display_stacked_with</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs, <span class="keywordtype">bool</span> check_components )<span class="keyword"> const</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() &amp;&amp; <a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">stacks_with</a>( rhs, check_components );</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="classitem.html#ab8b0e2273c6555d01adbe242697940ab"> 1383</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab8b0e2273c6555d01adbe242697940ab">item::can_combine</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() || !rhs.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() ) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">stacks_with</a>( rhs, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52"> 1397</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">item::combine</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;{</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab8b0e2273c6555d01adbe242697940ab">can_combine</a>( rhs ) ) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <span class="comment">//use maximum rot between the two</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <a class="code" href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae">set_relative_rot</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>(),</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                                        rhs.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() ) );</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> lhs_energy = <a class="code" href="classitem.html#a0ea923d4cc56e08aef374d499f17345e">get_item_thermal_energy</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> rhs_energy = rhs.<a class="code" href="classitem.html#a0ea923d4cc56e08aef374d499f17345e">get_item_thermal_energy</a>();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">if</span>( rhs_energy &gt; 0 &amp;&amp; lhs_energy &gt; 0 ) {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> combined_specific_energy = ( lhs_energy + rhs_energy ) / ( <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">to_gram</a>(</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                    <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() ) + <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">to_gram</a>( rhs.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() ) );</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            <a class="code" href="classitem.html#a3e61d7a533464d792856622eecd480a3">set_item_specific_energy</a>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( combined_specific_energy ) );</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> += rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">if</span>( !rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> ) ) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> );</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;}</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160; </div>
<div class="line"><a name="l01424"></a><span class="lineno"><a class="line" href="classitem.html#a1db937b8d866b6a424bf95e797ba4d55"> 1424</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a1db937b8d866b6a424bf95e797ba4d55">item::same_for_rle</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> != rhs.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> != rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8856a40c607a785ad15c0cd8b10c4931">empty_with_no_mods</a>() || !rhs.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8856a40c607a785ad15c0cd8b10c4931">empty_with_no_mods</a>() ) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>( <span class="keyword">false</span> ) != rhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>( <span class="keyword">false</span> ) ||</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        ( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>( <span class="keyword">false</span> ) &amp;&amp; rhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>( <span class="keyword">false</span> ) &amp;&amp;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;          <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<span class="keywordtype">id</span> != rhs.<a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a> ) ) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">stacks_with</a>( rhs, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 999, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;}</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="keyword">namespace</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;{</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#abbbb568da4ba6d57fa2a2026c9d6fb1b"> 1446</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#abbbb568da4ba6d57fa2a2026c9d6fb1b">_stacks_whiteblacklist</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;{</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordtype">bool</span> wbl = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span>( lhs.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#aafc14797017b022d8911a5c2317e05bf">size</a>() == rhs.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#aafc14797017b022d8911a5c2317e05bf">size</a>() ) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        std::vector&lt;item_pocket const *&gt; <span class="keyword">const</span> lpkts = lhs.<a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        std::vector&lt;item_pocket const *&gt; <span class="keyword">const</span> rpkts = rhs.<a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="keywordflow">if</span>( lpkts.size() == rpkts.size() ) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            wbl = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="keywordflow">for</span>( std::size_t i = 0; i &lt; lpkts.size(); i++ ) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                wbl &amp;= lpkts[i]-&gt;settings.get_item_whitelist() == rpkts[i]-&gt;settings.get_item_whitelist() &amp;&amp;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                       lpkts[i]-&gt;settings.get_item_blacklist() == rpkts[i]-&gt;settings.get_item_blacklist() &amp;&amp;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                       lpkts[i]-&gt;settings.get_category_whitelist() == rpkts[i]-&gt;settings.get_category_whitelist() &amp;&amp;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                       lpkts[i]-&gt;settings.get_category_blacklist() == rpkts[i]-&gt;settings.get_category_blacklist();</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                <span class="keywordflow">if</span>( !wbl ) {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">return</span> wbl;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1cc7d633d8c8dabf76ce5d5598a11953"> 1468</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1cc7d633d8c8dabf76ce5d5598a11953">_stacks_weapon_mods</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;{</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> *<span class="keyword">const</span> lb = lhs.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? lhs.<a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> *<span class="keyword">const</span> rb = rhs.<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? rhs.<a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">return</span> ( ( lb &amp;&amp; rb ) || ( !lb &amp;&amp; !rb ) ) &amp;&amp;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;           lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aea4b740c27cf414b16f59faf9a1e4c0e">flag_REMOVED_STOCK</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aea4b740c27cf414b16f59faf9a1e4c0e">flag_REMOVED_STOCK</a> ) &amp;&amp;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;           lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a> );</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;}</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#accb9130dcead64497b26dadae41bb1bf"> 1477</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#accb9130dcead64497b26dadae41bb1bf">_stacks_location_hint</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;{</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::string omt_loc_var = <span class="stringliteral">&quot;spawn_location_omt&quot;</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> this_loc( lhs.<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( omt_loc_var, <a class="code" href="point_8h.html#a0e8dbdd2aded60a5e099d44f5bbff80d">tripoint_max</a> ) );</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> that_loc( rhs.<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( omt_loc_var, <a class="code" href="point_8h.html#a0e8dbdd2aded60a5e099d44f5bbff80d">tripoint_max</a> ) );</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span>( this_loc == that_loc ) {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( this_loc.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() != <a class="code" href="point_8h.html#a0e8dbdd2aded60a5e099d44f5bbff80d">tripoint_max</a> &amp;&amp; that_loc.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() != <a class="code" href="point_8h.html#a0e8dbdd2aded60a5e099d44f5bbff80d">tripoint_max</a> ) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> player_loc( <a class="code" href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getabs(</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                               <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>() ) ) );</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> this_dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( player_loc, this_loc );</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> that_dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( player_loc, that_loc );</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> get_bucket = []( <span class="keyword">const</span> <span class="keywordtype">int</span> dist ) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            <span class="keywordflow">if</span>( dist &lt; 1 ) {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dist &lt; 6 ) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dist &lt; 30 ) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        };</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <span class="keywordflow">return</span> get_bucket( this_dist ) == get_bucket( that_dist );</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;}</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a82933526ce3524e8ca382afd38bc4c90"> 1505</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a82933526ce3524e8ca382afd38bc4c90">_stacks_rot</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs, <span class="keywordtype">bool</span> combine_liquid )</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;{</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// Stack items that fall into the same &quot;bucket&quot; of freshness.</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// Distant buckets are larger than near ones.</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    std::pair&lt;int, clipped_unit&gt; my_clipped_time_to_rot =</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <a class="code" href="calendar_8cpp.html#adac9b8b192cda93a6b30e3fa016029dd">clipped_time</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( lhs.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() - lhs.<a class="code" href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">get_rot</a>(), 0_seconds ) );</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    std::pair&lt;int, clipped_unit&gt; other_clipped_time_to_rot =</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <a class="code" href="calendar_8cpp.html#adac9b8b192cda93a6b30e3fa016029dd">clipped_time</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( rhs.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() - rhs.<a class="code" href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">get_rot</a>(), 0_seconds ) );</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span> ( ( combine_liquid &amp;&amp; lhs.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;               rhs.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) ||</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;             my_clipped_time_to_rot == other_clipped_time_to_rot ) &amp;&amp;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;           lhs.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() == rhs.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>();</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;}</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a2b3605c8e12295478c02c7fb1518109f"> 1520</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a2b3605c8e12295478c02c7fb1518109f">_stacks_mushy_dirty</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;{</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">return</span> lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) &amp;&amp;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;           lhs.<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> ) == rhs.<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> );</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;}</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1fa8d8ca0069cee62506f654568fe9a2"> 1526</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1fa8d8ca0069cee62506f654568fe9a2">_stacks_food_status</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> ( lhs.<a class="code" href="classitem.html#ac3898605336bf9c45ee3ce37d41d5ead">is_fresh</a>() == rhs.<a class="code" href="classitem.html#ac3898605336bf9c45ee3ce37d41d5ead">is_fresh</a>() || lhs.<a class="code" href="classitem.html#a4661d733113e53ee370d5aa83e31137b">is_going_bad</a>() == rhs.<a class="code" href="classitem.html#a4661d733113e53ee370d5aa83e31137b">is_going_bad</a>() ||</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;             lhs.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() == rhs.<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) &amp;&amp;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;           <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a2b3605c8e12295478c02c7fb1518109f">_stacks_mushy_dirty</a>( lhs, rhs );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a3d96e2f85dfb148fc4cab8267ee34bf9"> 1533</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a3d96e2f85dfb148fc4cab8267ee34bf9">_stacks_food_traits</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;{</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">return</span> ( !lhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) ||</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;           ( lhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a> ) &amp;&amp;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> ) );</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;}</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#affbfd9a205a1000e8580d50d80555a1b"> 1541</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#affbfd9a205a1000e8580d50d80555a1b">_stacks_food_irradiated</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;{</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">return</span> lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43bdf243cb0c0e6f3c61a551442bcfc2">flag_IRRADIATED</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43bdf243cb0c0e6f3c61a551442bcfc2">flag_IRRADIATED</a> );</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a336335899269e48473019fdd419e0e08"> 1546</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a336335899269e48473019fdd419e0e08">_stacks_food_perishable</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs, <span class="keywordtype">bool</span> check_cat )</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;{</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">return</span> !check_cat || ( !lhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) ||</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;           ( lhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; lhs.<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() == rhs.<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34da07ccc8b142916d801b317ffa84d1">flag_INEDIBLE</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34da07ccc8b142916d801b317ffa84d1">flag_INEDIBLE</a> ) );</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;}</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#ad735a9abff454661870219a95e2d05f3"> 1553</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#ad735a9abff454661870219a95e2d05f3">_stacks_clothing_size</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;{</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60a">item::sizing</a> <span class="keyword">const</span> u_sizing = lhs.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> );</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> u_sizing == rhs.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> ) &amp;&amp;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;           ( u_sizing == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a> ||</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;             ( lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) &amp;&amp;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;               lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#aea8d1217c01c8b5fe2477d14ce362584"> 1563</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#aea8d1217c01c8b5fe2477d14ce362584">_stacks_wetness</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs, <span class="keywordtype">bool</span> precise )</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;{</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">return</span> lhs.<a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> == rhs.<a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> || ( !precise &amp;&amp; ( lhs.<a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &gt; 0 ) == ( rhs.<a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &gt; 0 ) );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#afacc97507175c600a08649b292d2ab07"> 1568</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#afacc97507175c600a08649b292d2ab07">_stacks_cbm_status</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;{</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">return</span> ( !lhs.<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() ) ||</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;           ( lhs.<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() &amp;&amp;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a> ) &amp;&amp;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a> ) );</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4755131e594275351353f5b854aced43"> 1576</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4755131e594275351353f5b854aced43">_stacks_ethereal</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;{</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::string varname( <span class="stringliteral">&quot;ethereal&quot;</span> );</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">return</span> ( !lhs.<a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> &amp;&amp; !rhs.<a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> ) ||</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;           ( lhs. <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a0b4cf21bb2ec450d1ca6f2fa58a685b9">ethereal</a> &amp;&amp; rhs.<a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> &amp;&amp; lhs.<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( varname ) == rhs.<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( varname ) );</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;}</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6cc1aaa23d76ce4b15ecb782231219ec"> 1583</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6cc1aaa23d76ce4b15ecb782231219ec">_stacks_ups</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;{</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">return</span> ( !lhs.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) ||</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;           ( lhs.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;             lhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) );</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;}</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a95b52b23a156728336166bfc7e35071c"> 1590</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a95b52b23a156728336166bfc7e35071c">_stacks_mods</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;{</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keyword">const</span> std::vector&lt;const item *&gt; this_mods = lhs.<a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keyword">const</span> std::vector&lt;const item *&gt; that_mods = rhs.<a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>();</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">if</span>( lhs.<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; lhs.<a class="code" href="classitem.html#ad1862bc5d5995e30dd224fab31d61f77">has_clothing_mod</a>() != rhs.<a class="code" href="classitem.html#ad1862bc5d5995e30dd224fab31d61f77">has_clothing_mod</a>() ) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordflow">if</span>( this_mods.size() != that_mods.size() ) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it1 : this_mods ) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordtype">bool</span> match = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> i1_isnull = it1 == <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it2 : that_mods ) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> i2_isnull = it2 == <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="keywordflow">if</span>( i1_isnull != i2_isnull ) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it1 == it2 || it1-&gt;typeId() == it2-&gt;typeId() ) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                match = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keywordflow">if</span>( !match ) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;}</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6102f0a5a28fd9671fc702566b6c56ed"> 1619</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6102f0a5a28fd9671fc702566b6c56ed">_stacks_variant</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;{</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">return</span> ( !lhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() ) ||</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;           ( lhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;             lhs.<a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a> == rhs.<a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a> );</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;}</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1f95437ac6525dae91393d7da0fda791"> 1626</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1f95437ac6525dae91393d7da0fda791">_stacks_components</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;lhs, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs, <span class="keywordtype">bool</span> check_components )</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;{</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">return</span> ( !check_components &amp;&amp; !lhs.<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() &amp;&amp; !lhs.<a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) ||</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;           <span class="comment">// Only check if at least one item isn&#39;t using the default recipe or is comestible</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;           ( lhs.<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() ) ||</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;           ( lhs.<a class="code" href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">get_uncraft_components</a>() == rhs.<a class="code" href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">get_uncraft_components</a>() );</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;}</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"><a class="line" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f"> 1636</a></span>&#160;<a class="code" href="structstacking__info.html">stacking_info</a> <a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">item::stacks_with</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs, <span class="keywordtype">bool</span> check_components, <span class="keywordtype">bool</span> combine_liquid,</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                                 <span class="keywordtype">bool</span> check_cat, <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> maxdepth, <span class="keywordtype">bool</span> precise )<span class="keyword"> const</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="classenum__bitset.html">tname::segment_bitset</a> <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> == rhs.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79">tname::segments::TYPE</a> );</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a7023640d655ead944f66a4544efc56c7">tname::segments::WHEEL_DIAMETER</a> );</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a947745295c7a69e66d294305d72eae3c">tname::segments::WHITEBLACKLIST</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#abbbb568da4ba6d57fa2a2026c9d6fb1b">_stacks_whiteblacklist</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span>( !check_cat &amp;&amp; <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.none() ) {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ae38583f3a073fa2a86a841b672aba548">tname::segments::CATEGORY</a>,</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;              !check_cat ||</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;              <a class="code" href="classitem.html#a7c9257f060bf53de49af433651eb9194">get_category_of_contents</a>( depth, maxdepth ).<a class="code" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>() ==</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;              rhs.<a class="code" href="classitem.html#a7c9257f060bf53de49af433651eb9194">get_category_of_contents</a>( depth, maxdepth ).<a class="code" href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">get_id</a>() );</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">if</span>( check_cat &amp;&amp; <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.none() ) {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6acda7182af4cc0451672a1cd50d36f3a2">tname::segments::VARIANT</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6102f0a5a28fd9671fc702566b6c56ed">_stacks_variant</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a> = <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>[<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79">tname::segments::TYPE</a>] &amp;&amp; <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>[<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6acda7182af4cc0451672a1cd50d36f3a2">tname::segments::VARIANT</a>];</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a62a15eeee54e263cd65b587e86f0004f">tname::segments::RELIC</a>, <a class="code" href="classitem.html#a06cf15fba046181d217790bd95b77f20">is_same_relic</a>( rhs ) );</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="comment">// This function is also used to test whether items counted by charges should be merged, for that</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">// check the, the charges must be ignored. In all other cases (tools/guns), the charges are important.</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a17acb5339914b65206909e97bc4242e7">tname::segments::CHARGES</a>,</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;              <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a> &amp;&amp; ( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) );</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac26e1a550a336551c4e26732369c9a83">tname::segments::FAVORITE_PRE</a>, <a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> == rhs.<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> );</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a57ccff8da88794bd74f0aacaf9682f22">tname::segments::FAVORITE_POST</a>, <a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> == rhs.<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> );</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac79312b5cadc8553c3740929cca71136">tname::segments::DURABILITY</a>,</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;              <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>( precise ) == rhs.<a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>( precise ) &amp;&amp; <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> == rhs.<a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> );</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a6ce5f855f667c4a7b51360d8c37e2e66">tname::segments::BURN</a>, <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> == rhs.<a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> );</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a18ff74f43da410c5529f7d6fca84f115">tname::segments::ACTIVE</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> == rhs.<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> );</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a9a66b5bf216bb23cf642da436bc5297e">tname::segments::FILTHY</a>, <a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() == rhs.<a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() );</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afc7deac95948dfebf5028ffdc7bcbb06">tname::segments::WETNESS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#aea8d1217c01c8b5fe2477d14ce362584">_stacks_wetness</a>( *<span class="keyword">this</span>, rhs, precise ) );</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a130e56729a947fb46d4f9a61addde6a0">tname::segments::WEAPON_MODS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1cc7d633d8c8dabf76ce5d5598a11953">_stacks_weapon_mods</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">if</span>( combine_liquid &amp;&amp; <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a> &amp;&amp; <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() &amp;&amp; <a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="comment">// we can combine liquids of same type and different temperatures</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b">tname::segments::TAGS</a>, <a class="code" href="cata__utility_8h.html#ad1e66aa881456b8be11c0af88dfc70fe">equal_ignoring_elements</a>( rhs.<a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>(), <a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>(),</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        { <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a>, <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a>, <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a>, <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a>, <a class="code" href="flag_8cpp.html#a61c1220c2f02301b1f4e854b0dd6a670">flag_FROM_FROZEN_LIQUID</a> } ) );</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ab976538812ef6e3e5881e245d5fc3c76">tname::segments::TEMPERATURE</a> );</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ab976538812ef6e3e5881e245d5fc3c76">tname::segments::TEMPERATURE</a>, <a class="code" href="classitem.html#acd759b167a7c80974842fac5eca8fcbf">is_same_temperature</a>( rhs ) );</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b">tname::segments::TAGS</a>, <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a> == rhs.<a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a> );</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a17c581785220dc0f84ffc0f0a787a299">tname::segments::CUSTOM_ITEM_PREFIX</a>, <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>[<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b">tname::segments::TAGS</a>] );</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4197f2a19f3662c85663bf81b4a722ee">tname::segments::CUSTOM_ITEM_SUFFIX</a>, <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>[<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b">tname::segments::TAGS</a>] );</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac99d29efbd4fc48503faa81b5312f697">tname::segments::FAULTS</a>, <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a> == rhs.<a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a> );</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a3ca55dfc198ca8884e24cd29a72ef0f7">tname::segments::TECHNIQUES</a>, <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a> == rhs.<a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a> );</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a922b63193a7449068fe51b17a75f9546">tname::segments::OVERHEAT</a>, <a class="code" href="classitem.html#a80618c347b04de8ef3414f21b2f136f6">overheat_symbol</a>() == rhs.<a class="code" href="classitem.html#a80618c347b04de8ef3414f21b2f136f6">overheat_symbol</a>() );</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a3ef5656907af69ff36347e8dc2416744">tname::segments::DIRT</a>, <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;dirt&quot;</span>, 0 ) == rhs.<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;dirt&quot;</span>, 0 ) );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6aec5d5b35e9ef72273e016a6f629004f9">tname::segments::SEALED</a>, <a class="code" href="classitem.html#a23fca649e0d12cfcd94139e6fe39b9f1">all_pockets_sealed</a>() == rhs.<a class="code" href="classitem.html#a23fca649e0d12cfcd94139e6fe39b9f1">all_pockets_sealed</a>() );</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4833df75743b2c5ce47d270268ef5579">tname::segments::CBM_STATUS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#afacc97507175c600a08649b292d2ab07">_stacks_cbm_status</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a10c4a304905dd48439743b393540ce88">tname::segments::BROKEN</a>, <a class="code" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">is_broken</a>() == rhs.<a class="code" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">is_broken</a>() );</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a0e60ac85bc39f1e221d66a048ff164da">tname::segments::UPS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a6cc1aaa23d76ce4b15ecb782231219ec">_stacks_ups</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="comment">// Guns that differ only by dirt/shot_counter can still stack,</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="comment">// but other item_vars such as label/note will prevent stacking</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;std::string&gt; ignore_keys = { <span class="stringliteral">&quot;dirt&quot;</span>, <span class="stringliteral">&quot;shot_counter&quot;</span>, <span class="stringliteral">&quot;spawn_location_omt&quot;</span>, <span class="stringliteral">&quot;ethereal&quot;</span> };</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ad0db3f5a4a306cff20be4187b3ef3445">tname::segments::VARS</a>, <a class="code" href="cata__utility_8h.html#a4df936321d43e41a9a8e17bf014b0b2f">map_equal_ignoring_keys</a>( <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>, rhs.<a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>, ignore_keys ) );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a1327f5ea7ca842398f7fa76405897ee3">tname::segments::ETHEREAL</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4755131e594275351353f5b854aced43">_stacks_ethereal</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a5759c29105f0562576beb55d8981effe">tname::segments::LOCATION_HINT</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#accb9130dcead64497b26dadae41bb1bf">_stacks_location_hint</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> this_goes_bad = <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>();</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> that_goes_bad = rhs.<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>();</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span>( this_goes_bad &amp;&amp; that_goes_bad ) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a> ) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac134494bb047e373adba0c7fc26e5188">tname::segments::FOOD_STATUS</a>,</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                      <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a82933526ce3524e8ca382afd38bc4c90">_stacks_rot</a>( *<span class="keyword">this</span>, rhs, combine_liquid ) &amp;&amp; <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a2b3605c8e12295478c02c7fb1518109f">_stacks_mushy_dirty</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac134494bb047e373adba0c7fc26e5188">tname::segments::FOOD_STATUS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1fa8d8ca0069cee62506f654568fe9a2">_stacks_food_status</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6af680f85e3db4d6b1e202f72f922b4498">tname::segments::FOOD_IRRADIATED</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#affbfd9a205a1000e8580d50d80555a1b">_stacks_food_irradiated</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !this_goes_bad &amp;&amp; !that_goes_bad ) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac134494bb047e373adba0c7fc26e5188">tname::segments::FOOD_STATUS</a> );</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6af680f85e3db4d6b1e202f72f922b4498">tname::segments::FOOD_IRRADIATED</a> );</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a41ecf3c2c3261d190038bf99196cbbd5">tname::segments::FOOD_TRAITS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a3d96e2f85dfb148fc4cab8267ee34bf9">_stacks_food_traits</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afd1267e84434bdbba6fd4fa7f869117d">tname::segments::CORPSE</a>,</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;              ( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> == <span class="keyword">nullptr</span> &amp;&amp; rhs.<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> == <span class="keyword">nullptr</span> ) ||</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;              ( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> != <span class="keyword">nullptr</span> &amp;&amp; rhs.<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == rhs.<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> &amp;&amp;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                <a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a> == rhs.<a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a> ) );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a761123ba86a33d83dcf34060114e9832">tname::segments::FOOD_PERISHABLE</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a336335899269e48473019fdd419e0e08">_stacks_food_perishable</a>( *<span class="keyword">this</span>, rhs, check_cat ) );</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a29e93352d0d973625131b5a71a0d24b1">tname::segments::CLOTHING_SIZE</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#ad735a9abff454661870219a95e2d05f3">_stacks_clothing_size</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a10c4a304905dd48439743b393540ce88">tname::segments::BROKEN</a>, <a class="code" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">is_broken</a>() == rhs.<a class="code" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">is_broken</a>() );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="comment">// In-progress crafts are always distinct items. Easier to handle for the player,</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="comment">// and there shouldn&#39;t be that many items of this type around anyway.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a2ac0ed3f00fa0069d39782c633e29d17">tname::segments::CRAFT</a>, !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> &amp;&amp; !rhs.<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> );</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a7370b57f42f84ed1172abf10459344a7">tname::segments::COMPONENTS</a>, <a class="code" href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a> &amp;&amp;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;              <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a1f95437ac6525dae91393d7da0fda791">_stacks_components</a>( *<span class="keyword">this</span>, rhs, check_components ) );</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a58c0a0e97e6d2f615bc264c2775fda44">tname::segments::LINK</a>,</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;              <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>() == rhs.<a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>() &amp;&amp; <a class="code" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">max_link_length</a>() == rhs.<a class="code" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">max_link_length</a>() );</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a835b7a4ebc88d61845570e227e3a890d">tname::segments::MODS</a>, <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a95b52b23a156728336166bfc7e35071c">_stacks_mods</a>( *<span class="keyword">this</span>, rhs ) );</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ad1cd941e9361399f0433d63e6f7d7c76">tname::segments::last_segment</a> );</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="comment">// only check contents if everything else matches</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> b_contents =</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        ( <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a> | <a class="code" href="namespacetname.html#aa1554d737e65bcbb35adabd62a2a9b9d">tname::tname_contents</a> ).<a class="code" href="namespaceom__direction.html#a27cad92b0d05637eb934f1a7f3424e41">all</a>() &amp;&amp; <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#afef2f5ea31859d7634bad3821fcbb922">stacks_with</a>( rhs.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>, depth, maxdepth );</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a8b926ca329dfb31daa1211d0e158e05e">tname::segments::CONTENTS</a>, b_contents );</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a200bf336a31a735fc0d946866b24554f">tname::segments::CONTENTS_FULL</a>, b_contents );</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afdb51dc036a8e6d2076497cad6c66046">tname::segments::CONTENTS_ABREV</a>, b_contents );</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a>.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a343494c4351f9f0ed130abd7cedb1c27">tname::segments::CONTENTS_COUNT</a>, b_contents );</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">return</span> { <a class="code" href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">bits</a> };</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;}</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="classitem.html#af46a8b8045e5ce3e7c175796599ca038"> 1750</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af46a8b8045e5ce3e7c175796599ca038">item::same_contents</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#aa1a6051fd4d4d1e6ae10a560e4081916">same_contents</a>( rhs.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>() );</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"><a class="line" href="classitem.html#a2d50ee340d6b9591ef0525425967b8fc"> 1755</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2d50ee340d6b9591ef0525425967b8fc">item::merge_charges</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;rhs )</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;{</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || !<a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">stacks_with</a>( rhs ) ) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">// Prevent overflow when either item has &quot;near infinite&quot; charges.</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt;= <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a> / 2 || rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt;= <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a> / 2 ) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// We&#39;ll just hope that the item counter represents the same thing for both items</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> &gt; 0 || rhs.<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> &gt; 0 ) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> ) * <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> + <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                         ( rhs.<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> ) * rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) / ( <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> + rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> += rhs.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="classitem.html#af7e3523e193bb5422557e885ae050309"> 1774</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af7e3523e193bb5422557e885ae050309">item::obtain_cost</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a4e484f8fa34ce47faa26c543c9a284f9">obtain_cost</a>( it );</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;}</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"><a class="line" href="classitem.html#a24d69941d5b9d9934f28540d83359eb8"> 1779</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a24d69941d5b9d9934f28540d83359eb8">item::insert_cost</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a9023dcc3a2bc014e8a28c2b08ca90ef3">insert_cost</a>( it );</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;}</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"><a class="line" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02"> 1784</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">item::put_in</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;payload, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type,</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">bool</span> unseal_pockets, <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;{</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <a class="code" href="classret__val.html">ret_val&lt;item *&gt;</a> result = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad1a6e1b76f8b54ae8a4229d455a5aab8">insert_item</a>( payload, pk_type, <span class="keyword">false</span>, unseal_pockets );</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span>( !result.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to put an item (%s) count (%d) in a container (%s) that cannot contain it: %s&quot;</span>,</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                  payload.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), payload.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>(), <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str(), result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">if</span>( pk_type == <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <a class="code" href="classitem.html#ae47123eefc3d9d809658ea474091c8d7">update_modified_pockets</a>();</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        result.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>()-&gt;on_pickup( *carrier );</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>( result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;}</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"><a class="line" href="classitem.html#a8b6013a4dab952626df6834f46ec048f"> 1803</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a8b6013a4dab952626df6834f46ec048f">item::force_insert_item</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;{</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa496e1176a8378bec444c8ea1fe373d4">force_insert_item</a>( it, pk_type );</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="classitem.html#afed495d5303347fcb8a9fe4d55d3345d">update_inherited_flags</a>();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;}</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"><a class="line" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff"> 1809</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> value )</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;{</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    std::ostringstream tmpstream;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    tmpstream.imbue( std::locale::classic() );</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    tmpstream &lt;&lt; value;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = tmpstream.str();</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;}</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"><a class="line" href="classitem.html#a18732ca3aff63571fda6694121bbce00"> 1817</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> value )</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;{</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    std::ostringstream tmpstream;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    tmpstream.imbue( std::locale::classic() );</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    tmpstream &lt;&lt; value;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = tmpstream.str();</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;}</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">// NOLINTNEXTLINE(cata-no-long)</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="classitem.html#a87f796d664ad47aa742223d124f350d3"> 1826</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <span class="keywordtype">long</span> value )</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    std::ostringstream tmpstream;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    tmpstream.imbue( std::locale::classic() );</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    tmpstream &lt;&lt; value;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = tmpstream.str();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;}</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"><a class="line" href="classitem.html#a360be7d4eea9410e98d7c8da043cada9"> 1834</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <span class="keywordtype">double</span> value )</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;{</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%f&quot;</span>, value );</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"><a class="line" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5"> 1839</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <span class="keywordtype">double</span> default_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">return</span> default_value;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keyword">const</span> std::string &amp;val = it-&gt;second;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    errno = 0;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordtype">double</span> result = strtod( val.data(), &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span>( errno != 0 ) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error parsing floating point value from %s in item::get_var: %s&quot;</span>,</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                  val, strerror( errno ) );</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="keywordflow">return</span> default_value;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> != val.data() + val.size() ) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keywordflow">if</span>( *<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> == <span class="charliteral">&#39;,&#39;</span> ) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            <span class="comment">// likely legacy format with localized &#39;,&#39; for fraction separator instead of &#39;.&#39;</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            std::string converted_val = val;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            converted_val[<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> - val.data()] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            errno = 0;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <span class="keywordtype">double</span> result = strtod( converted_val.data(), &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> );</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">if</span>( errno != 0 ) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error parsing floating point value from %s in item::get_var: %s&quot;</span>,</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                          val, strerror( errno ) );</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                <span class="keywordflow">return</span> default_value;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a> != converted_val.data() + converted_val.size() ) {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Stray characters at end of floating point value %s in item::get_var&quot;</span>, val );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Stray characters at end of floating point value %s in item::get_var&quot;</span>, val );</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;}</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"><a class="line" href="classitem.html#a64e7f746dd9292f94080f6cc6450ca5c"> 1876</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;value )</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;{</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d,%d,%d&quot;</span>, value.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, value.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, value.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"><a class="line" href="classitem.html#a686539d1437fbb15ec9b289d2d656dc3"> 1881</a></span>&#160;<a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;default_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">return</span> default_value;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    std::vector&lt;std::string&gt; values = <a class="code" href="cata__utility_8cpp.html#a382c43734c8a029c36f3d3707195a303">string_split</a>( it-&gt;second, <span class="charliteral">&#39;,&#39;</span> );</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( values.size() == 3 );</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keyword">auto</span> convert_or_error = []( <span class="keyword">const</span> std::string_view s ) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <a class="code" href="classret__val.html">ret_val&lt;int&gt;</a> result = <a class="code" href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt;int&gt;</a>( s, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <span class="keywordflow">if</span>( result.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <span class="keywordflow">return</span> result.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>();</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error parsing tripoint coordinate in item::get_var: %s&quot;</span>, result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    };</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>( convert_or_error( values[0] ),</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                     convert_or_error( values[1] ),</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                     convert_or_error( values[2] ) );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;}</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"><a class="line" href="classitem.html#a75359b32b9e0bb99e69b17380e78150f"> 1903</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> std::string &amp;value )</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;{</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>] = value;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"><a class="line" href="classitem.html#a8c60191080c9f0022a97131727db43d9"> 1908</a></span>&#160;std::string <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> std::string &amp;default_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        <span class="keywordflow">return</span> default_value;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;}</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"><a class="line" href="classitem.html#a9c745bc1090f7d261d4009995eb2389c"> 1917</a></span>&#160;std::string <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;}</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"><a class="line" href="classitem.html#a4683e228cc8fa5f63e94932bc7f7b73c"> 1922</a></span>&#160;std::optional&lt;std::string&gt; <a class="code" href="classitem.html#a4683e228cc8fa5f63e94932bc7f7b73c">item::maybe_get_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> it == <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ? std::nullopt : std::optional&lt;std::string&gt; { it-&gt;second };</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;}</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"><a class="line" href="classitem.html#a478ecf81e48540e1ba39de33df968c43"> 1928</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.count( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) &gt; 0;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"><a class="line" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b"> 1933</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">item::erase_var</a>( <span class="keyword">const</span> std::string &amp;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> )</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;{</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.erase( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;}</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01938"></a><span class="lineno"><a class="line" href="classitem.html#acf9b4242998c869e09a76406ffe0bb34"> 1938</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#acf9b4242998c869e09a76406ffe0bb34">item::clear_vars</a>()</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;{</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.clear();</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;}</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">// TODO: Get rid of, handle multiple types gracefully</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"><a class="line" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2"> 1944</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( <span class="keyword">const</span> <a class="code" href="structcommon__ranged__data.html">common_ranged_data</a> &amp;ranged )</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;{</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span>( ranged.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#af81002fc0a5fafe2690d31403941d2d6">empty</a>() ) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    }</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">return</span> ranged.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a>.front().res_pen;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;}</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"><a class="line" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231"> 1953</a></span>&#160;std::string <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a>( <span class="keywordtype">bool</span> showtext )<span class="keyword"> const</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    std::vector&lt;iteminfo&gt; dummy;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>( showtext, dummy );</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;}</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"><a class="line" href="classitem.html#a18cb1a59a34d4674d1ab39aea2ff107d"> 1959</a></span>&#160;std::string <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a>( <span class="keywordtype">bool</span> showtext, std::vector&lt;iteminfo&gt; &amp;<a class="code" href="structiteminfo.html">iteminfo</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>( showtext, <a class="code" href="structiteminfo.html">iteminfo</a>, 1 );</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;}</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"><a class="line" href="classitem.html#a052b3ba6b4afad1862b3ee2d13758d54"> 1964</a></span>&#160;std::string <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a>( <span class="keywordtype">bool</span> showtext, std::vector&lt;iteminfo&gt; &amp;<a class="code" href="structiteminfo.html">iteminfo</a>, <span class="keywordtype">int</span> batch )<span class="keyword"> const</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>( <a class="code" href="structiteminfo.html">iteminfo</a>, showtext ? &amp;<a class="code" href="classiteminfo__query.html#a5bd07a0642fad2dcf4e6a6d1484a41b9">iteminfo_query::all</a> : &amp;<a class="code" href="classiteminfo__query.html#acf3436028f42b76c954c3571460e1783">iteminfo_query::notext</a>, batch );</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;}</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="comment">// Generates a long-form description of the freshness of the given rottable food item.</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="comment">// NB: Doesn&#39;t check for non-rottable!</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"><a class="line" href="item_8cpp.html#aca6160da93053b44b107ccef5e04175f"> 1971</a></span>&#160;<span class="keyword">static</span> std::string <a class="code" href="item_8cpp.html#aca6160da93053b44b107ccef5e04175f">get_freshness_description</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;food_item )</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;{</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// So, skilled characters looking at food that is neither super-fresh nor about to rot</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// can guess its age as one of {quite fresh,midlife,past midlife,old soon}, and also</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">// guess about how long until it spoils.</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> rot_progress = food_item.<a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>();</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> shelf_life = food_item.<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>();</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> time_left = shelf_life - ( shelf_life * rot_progress );</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="comment">// Correct for an estimate that exceeds shelf life -- this happens especially with</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="comment">// fresh items.</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordflow">if</span>( time_left &gt; shelf_life ) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        time_left = shelf_life;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span>( food_item.<a class="code" href="classitem.html#ac3898605336bf9c45ee3ce37d41d5ead">is_fresh</a>() ) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="comment">// Fresh food is assumed to be obviously so regardless of skill.</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">can_estimate_rot</a>() ) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks as &lt;good&gt;fresh&lt;/good&gt; as it can be.  &quot;</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                                     <span class="stringliteral">&quot;It still has &lt;info&gt;%s&lt;/info&gt; until it spoils.&quot;</span> ),</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                  <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks as &lt;good&gt;fresh&lt;/good&gt; as it can be.&quot;</span> );</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        }</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( food_item.<a class="code" href="classitem.html#a4661d733113e53ee370d5aa83e31137b">is_going_bad</a>() ) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="comment">// Old food likewise is assumed to be fairly obvious.</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">can_estimate_rot</a>() ) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks &lt;bad&gt;old&lt;/bad&gt;.  &quot;</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                                     <span class="stringliteral">&quot;It&#39;s just &lt;info&gt;%s&lt;/info&gt; from becoming inedible.&quot;</span> ),</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                                  <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks &lt;bad&gt;old&lt;/bad&gt;.  &quot;</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                      <span class="stringliteral">&quot;It&#39;s on the brink of becoming inedible.&quot;</span> );</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    }</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160; </div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">can_estimate_rot</a>() ) {</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="comment">// Unskilled characters only get a hint that more information exists...</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks &lt;info&gt;fine&lt;/info&gt;.  If you were more skilled in &quot;</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                  <span class="stringliteral">&quot;cooking or survival, you might be able to make a better estimation.&quot;</span> );</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    }</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="comment">// Otherwise, a skilled character can determine the below options:</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keywordflow">if</span>( rot_progress &lt; 0.3 ) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="comment">//~ here, %s is an approximate time span, e.g., &quot;over 2 weeks&quot; or &quot;about 1 season&quot;</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks &lt;good&gt;quite fresh&lt;/good&gt;.  &quot;</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                                 <span class="stringliteral">&quot;It has &lt;info&gt;%s&lt;/info&gt; until it spoils.&quot;</span> ),</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                              <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rot_progress &lt; 0.5 ) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <span class="comment">//~ here, %s is an approximate time span, e.g., &quot;over 2 weeks&quot; or &quot;about 1 season&quot;</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks like it is reaching its &lt;neutral&gt;midlife&lt;/neutral&gt;.  &quot;</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                 <span class="stringliteral">&quot;There&#39;s &lt;info&gt;%s&lt;/info&gt; before it spoils.&quot;</span> ),</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                              <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rot_progress &lt; 0.7 ) {</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        <span class="comment">//~ here, %s is an approximate time span, e.g., &quot;over 2 weeks&quot; or &quot;about 1 season&quot;</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks like it has &lt;neutral&gt;passed its midlife&lt;/neutral&gt;.  &quot;</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                                 <span class="stringliteral">&quot;Edible, but will go bad in &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ),</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                              <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="comment">//~ here, %s is an approximate time span, e.g., &quot;over 2 weeks&quot; or &quot;about 1 season&quot;</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food looks like it &lt;bad&gt;will be old soon&lt;/bad&gt;.  &quot;</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                 <span class="stringliteral">&quot;It has &lt;info&gt;%s&lt;/info&gt;, so if you plan to use it, it&#39;s now or never.&quot;</span> ),</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                              <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( time_left ) );</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;}</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"><a class="line" href="classitem.html#ac72213261395e0c525121ee6d2553a97"> 2038</a></span>&#160;<a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60a">item::sizing</a> <a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">item::get_sizing</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p )<span class="keyword"> const</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor_data = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span>( !armor_data ) {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">sizing::ignore</a>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    }</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordtype">bool</span> to_ignore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;piece : armor_data-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keywordflow">if</span>( piece.<a class="code" href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">encumber</a> != 0 ) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            to_ignore = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">if</span>( to_ignore ) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">sizing::ignore</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> = p.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> big = p.<a class="code" href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#abe92fef8aa87ba82f19f82a32795f3ed">flag_INTEGRATED</a> ) ) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <span class="keywordflow">if</span>( big ) {</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3c281ac6effc3982eea0c56df3fe766">sizing::big_sized_big_char</a>;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa096d4645ed938b760b6111684abd8c4c">sizing::small_sized_small_char</a>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa781d038afb4ccd0fb1b2085adfefd1c3">sizing::human_sized_human_char</a>;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="comment">// due to the iterative nature of these features, something can fit and be undersized/oversized</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="comment">// but that is fine because we have separate logic to adjust encumbrance per each. One day we</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="comment">// may want to have fit be a flag that only applies if a piece of clothing is sized for you as there</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="comment">// is a bit of cognitive dissonance when something &#39;fits&#39; and is &#39;oversized&#39; and the same time</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> undersize = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a> );</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> oversize = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a465180aa3b409ee617f564f29ec8ce4f">flag_OVERSIZE</a> );</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="keywordflow">if</span>( undersize ) {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) {</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa096d4645ed938b760b6111684abd8c4c">sizing::small_sized_small_char</a>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( big ) {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">sizing::small_sized_big_char</a>;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">sizing::small_sized_human_char</a>;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( oversize ) {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            <span class="keywordflow">if</span>( big ) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3c281ac6effc3982eea0c56df3fe766">sizing::big_sized_big_char</a>;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">sizing::big_sized_small_char</a>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c">sizing::big_sized_human_char</a>;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            }</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">if</span>( big ) {</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">sizing::human_sized_big_char</a>;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">sizing::human_sized_small_char</a>;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa781d038afb4ccd0fb1b2085adfefd1c3">sizing::human_sized_human_char</a>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            }</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"><a class="line" href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d"> 2102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d">get_base_env_resist</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;{</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = it.<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;env_resist * it.<a class="code" href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39">get_relative_health</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        }</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structislot__armor.html#a0c18142004c2a71350e49205a67c7073">avg_env_resist</a>() * it.<a class="code" href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39">get_relative_health</a>();</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;}</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"><a class="line" href="classitem.html#a0b35b9066ad71987b77727af45d96059"> 2116</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <span class="keywordtype">bool</span> available_to_take )<span class="keyword"> const</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="comment">// owner.is_null() implies faction_id( &quot;no_faction&quot; ) which shouldn&#39;t happen, or no owner at all.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="comment">// either way, certain situations this means the thing is available to take.</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <span class="comment">// in other scenarios we actually really want to check for id == id, even for no_faction</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">return</span> available_to_take;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Character %s has no faction&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id == <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>();</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;}</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160; </div>
<div class="line"><a name="l02131"></a><span class="lineno"><a class="line" href="classitem.html#af1b936248c528ae3165dc07cc5ecfd94"> 2131</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a>( <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> &amp;m, <span class="keywordtype">bool</span> available_to_take )<span class="keyword"> const</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="comment">// owner.is_null() implies faction_id( &quot;no_faction&quot; ) which shouldn&#39;t happen, or no owner at all.</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="comment">// either way, certain situations this means the thing is available to take.</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="comment">// in other scenarios we actually really want to check for id == id, even for no_faction</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">return</span> available_to_take;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const faction_id, faction&gt; &amp;fact : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;all() ) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <span class="keywordflow">if</span>( fact.second.mon_faction != m.<a class="code" href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">faction</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        }</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <span class="keywordflow">return</span> fact.first == <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;}</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"><a class="line" href="classitem.html#a4d85d48a0b3ca00ee3a68db59046c7c8"> 2148</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a4d85d48a0b3ca00ee3a68db59046c7c8">item::is_old_owner</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <span class="keywordtype">bool</span> available_to_take )<span class="keyword"> const</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">get_old_owner</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="keywordflow">return</span> available_to_take;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Character %s has no faction.&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id == <a class="code" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">get_old_owner</a>();</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;}</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"><a class="line" href="classitem.html#ac1b69026c16641b40c0bfa8d9d42fa7c"> 2160</a></span>&#160;std::string <a class="code" href="classitem.html#ac1b69026c16641b40c0bfa8d9d42fa7c">item::get_old_owner_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">get_old_owner</a>() ) ) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item::get_owner_name() item %s has no valid nor null faction id&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;no owner&quot;</span>;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">get_old_owner</a>() )-&gt;name;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="classitem.html#ae490218700ff9658235247b46ba75a56"> 2169</a></span>&#160;std::string <a class="code" href="classitem.html#ae490218700ff9658235247b46ba75a56">item::get_owner_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>() ) ) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item::get_owner_name() item %s has no valid nor null faction id &quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;no owner&quot;</span>;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>() )-&gt;name;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;}</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160; </div>
<div class="line"><a name="l02178"></a><span class="lineno"><a class="line" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6"> 2178</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">item::set_owner</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">faction_id</a> &amp;new_owner )</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;{</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a> = new_owner;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>() ) {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        e-&gt;set_owner( new_owner );</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;}</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"><a class="line" href="classitem.html#adb29e5bc20e230588356abad6cc9f363"> 2186</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">item::set_owner</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> )</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;{</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction() ) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item::set_owner() Character %s has no valid faction&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.disp_name() );</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">set_owner</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.get_faction()-&gt;id );</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"><a class="line" href="classitem.html#a326dae8709070c316f6859ef0704bf85"> 2195</a></span>&#160;<a class="code" href="classstring__id.html">faction_id</a> <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">item::get_owner</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <a class="code" href="classitem.html#a381a3d667caa4c26c8961fd08f3c5a7f">validate_ownership</a>();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;}</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"><a class="line" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196"> 2201</a></span>&#160;<a class="code" href="classstring__id.html">faction_id</a> <a class="code" href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">item::get_old_owner</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <a class="code" href="classitem.html#a381a3d667caa4c26c8961fd08f3c5a7f">validate_ownership</a>();</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a155a45ada3eb970d006b701a50026c27">old_owner</a>;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;}</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"><a class="line" href="classitem.html#a381a3d667caa4c26c8961fd08f3c5a7f"> 2207</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a381a3d667caa4c26c8961fd08f3c5a7f">item::validate_ownership</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a155a45ada3eb970d006b701a50026c27">old_owner</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() &amp;&amp; !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#a155a45ada3eb970d006b701a50026c27">old_owner</a>, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <a class="code" href="classitem.html#a3c8e850e9700f46d933b86dc4ef3aa2b">remove_old_owner</a>();</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() &amp;&amp; !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;faction_manager_ptr-&gt;get( <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <a class="code" href="classitem.html#a41b668b8e4cd352077e032d4e152f365">remove_owner</a>();</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;}</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d"> 2217</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( std::vector&lt;iteminfo&gt; &amp;info )</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;{</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">if</span>( info.empty() || info.back().sName != <span class="stringliteral">&quot;--&quot;</span> ) {</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;        info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <span class="stringliteral">&quot;--&quot;</span> );</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    }</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;}</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment"> * 0 based lookup table of accuracy - monster defense converted into number of hits per 10000</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment"> * attacks</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment"> * data painstakingly looked up at http://onlinestatbook.com/2/calculators/normal_dist.html</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"><a class="line" href="item_8cpp.html#ae2c8f05535bb3a3db47f7e79704bbacb"> 2229</a></span>&#160;<span class="keyword">static</span> constexpr std::array&lt;double, 41&gt; <a class="code" href="item_8cpp.html#ae2c8f05535bb3a3db47f7e79704bbacb">hits_by_accuracy</a> = {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    0,    1,   2,   3,   7, <span class="comment">// -20 to -16</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    13,   26,  47,   82,  139, <span class="comment">// -15 to -11</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    228,   359,  548,  808, 1151, <span class="comment">// -10 to -6</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    1587, 2119, 2743, 3446, 4207, <span class="comment">// -5 to -1</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    5000,  <span class="comment">// 0</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    5793, 6554, 7257, 7881, 8413, <span class="comment">// 1 to 5</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    8849, 9192, 9452, 9641, 9772, <span class="comment">// 6 to 10</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    9861, 9918, 9953, 9974, 9987, <span class="comment">// 11 to 15</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    9993, 9997, 9998, 9999, 10000 <span class="comment">// 16 to 20</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;};</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"><a class="line" href="classitem.html#ab40a3018f90c675715e80cc39384cde0"> 2241</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#ab40a3018f90c675715e80cc39384cde0">item::effective_dps</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy, <a class="code" href="classCreature.html">Creature</a> &amp;mon )<span class="keyword"> const</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> mon_dodge = mon.<a class="code" href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">get_dodge</a>();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordtype">float</span> base_hit = guy.<a class="code" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() / 4.0f + guy.<a class="code" href="classCharacter.html#a52dfbf13174b42bc92e9bea730b1e1ef">get_hit_weapon</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    base_hit *= <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.25f, 1.0f - guy.<a class="code" href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">avg_encumb_of_limb_type</a>( <a class="code" href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a42155934c716c14660745bf822f4ff63">body_part_type::type::torso</a> ) /</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                          100.0f );</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordtype">float</span> mon_defense = mon_dodge + mon.<a class="code" href="classCreature.html#a6748055fb3a5922e1fa55c4214aff48f">size_melee_penalty</a>() / 5.0f;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    constexpr <span class="keywordtype">double</span> hit_trials = 10000.0;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> rng_mean = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( base_hit - mon_defense ), 20 ),</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                   -20 ) + 20;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordtype">double</span> num_all_hits = <a class="code" href="item_8cpp.html#ae2c8f05535bb3a3db47f7e79704bbacb">hits_by_accuracy</a>[ rng_mean ];</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="comment">/* critical hits have two chances to occur: triple critical hits happen much less frequently,</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment">     * and double critical hits can only occur if a hit roll is more than 1.5 * monster dodge.</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="comment">     * Not the hit roll used to determine the attack, another one.</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">     * the way the math works, some percentage of the total hits are eligible to be double</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">     * critical hits, and the rest are eligible to be triple critical hits, but in each case,</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">     * only some small percent of them actually become critical hits.</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> rng_high_mean = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( base_hit - 1.5 * mon_dodge ),</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                                        20 ), -20 ) + 20;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordtype">double</span> num_high_hits = <a class="code" href="item_8cpp.html#ae2c8f05535bb3a3db47f7e79704bbacb">hits_by_accuracy</a>[ rng_high_mean ] * num_all_hits / hit_trials;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordtype">double</span> double_crit_chance = guy.<a class="code" href="classCharacter.html#a938cbb0dad93f07152c6e81fd270b153">crit_chance</a>( 4, 0, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordtype">double</span> crit_chance = guy.<a class="code" href="classCharacter.html#a938cbb0dad93f07152c6e81fd270b153">crit_chance</a>( 0, 0, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="keywordtype">double</span> num_low_hits = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, num_all_hits - num_high_hits );</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordtype">double</span> moves_per_attack = guy.<a class="code" href="classCharacter.html#a5f7078fd5aa2cb335228c0d205497ed6">attack_speed</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="comment">// attacks that miss do no damage but take time</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keywordtype">double</span> total_moves = ( hit_trials - num_all_hits ) * moves_per_attack;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordtype">double</span> total_damage = 0.0;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordtype">double</span> num_crits = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( num_low_hits * crit_chance + num_high_hits * double_crit_chance,</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                                 num_all_hits );</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="comment">// critical hits are counted separately</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordtype">double</span> num_hits = num_all_hits - num_crits;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="comment">// sum average damage past armor and return the number of moves required to achieve</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="comment">// that damage</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> calc_effective_damage = [ &amp;, moves_per_attack]( <span class="keyword">const</span> <span class="keywordtype">double</span> num_strikes,</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> crit, <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp; guy, <a class="code" href="classCreature.html">Creature</a> &amp; mon ) {</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        <a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> = <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> );</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <a class="code" href="classCreature.html">Creature</a> *temp_mon = &amp;mon;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <span class="keywordtype">double</span> subtotal_damage = 0;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <a class="code" href="structdamage__instance.html">damage_instance</a> base_damage;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        guy.<a class="code" href="classCharacter.html#a3b5ceae6740ffe700604539fa037bb62">roll_all_damage</a>( crit, base_damage, <span class="keyword">true</span>, *<span class="keyword">this</span>, <span class="stringliteral">&quot;WEAPON&quot;</span>, &amp;mon, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <a class="code" href="structdamage__instance.html">damage_instance</a> dealt_damage = base_damage;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="comment">// TODO: Modify DPS calculation to consider weakpoints.</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <a class="code" href="structresistances.html">resistances</a> r = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">static_cast&lt;</span><a class="code" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( temp_mon ) );</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg_unit : dealt_damage.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a> ) {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            dmg_unit.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> -= <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( r.<a class="code" href="structresistances.html#ab2707e673b2def1188ac7397012c1afb">get_effective_resist</a>( dmg_unit ), dmg_unit.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> );</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="structdealt__damage__instance.html">dealt_damage_instance</a> dealt_dams;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg_unit : dealt_damage.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a> ) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            <span class="keywordtype">int</span> cur_damage = 0;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <span class="keywordtype">int</span> total_pain = 0;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            temp_mon-&gt;<a class="code" href="classCreature.html#a17d04695b45ce48064d39ba9f4118f55">deal_damage_handle_type</a>( <a class="code" href="classeffect__source.html#ab2b651053f5ad648e694e35d00b9bca1">effect_source::empty</a>(), dmg_unit, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>,</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                                               cur_damage, total_pain );</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            <span class="keywordflow">if</span>( cur_damage &gt; 0 ) {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                dealt_dams.<a class="code" href="structdealt__damage__instance.html#a2e105b0204c9295376296ffb405d5c34">dealt_dams</a>[dmg_unit.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a>] += cur_damage;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            }</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        <span class="keywordtype">double</span> damage_per_hit = dealt_dams.<a class="code" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        subtotal_damage = damage_per_hit * num_strikes;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <span class="keywordtype">double</span> subtotal_moves = moves_per_attack * num_strikes;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160; </div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab842b7c3aaa4d813575035be37cd3714">has_technique</a>( <a class="code" href="item_8cpp.html#a6311ae33d9c01bff4835e9889df231f3">RAPID</a> ) ) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <a class="code" href="classCreature.html">Creature</a> *temp_rs_mon = &amp;mon;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            <a class="code" href="structdamage__instance.html">damage_instance</a> rs_base_damage;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            guy.<a class="code" href="classCharacter.html#a3b5ceae6740ffe700604539fa037bb62">roll_all_damage</a>( crit, rs_base_damage, <span class="keyword">true</span>, *<span class="keyword">this</span>, <span class="stringliteral">&quot;WEAPON&quot;</span>, &amp;mon, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <a class="code" href="structdamage__instance.html">damage_instance</a> dealt_rs_damage = rs_base_damage;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg_unit : dealt_rs_damage.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a> ) {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                dmg_unit.<a class="code" href="structdamage__unit.html#a8c5cf76dd074bd5dac9b76aaece0ecf4">damage_multiplier</a> *= 0.66;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;            }</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;            <span class="comment">// TODO: Modify DPS calculation to consider weakpoints.</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            <a class="code" href="structresistances.html">resistances</a> rs_r = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">static_cast&lt;</span><a class="code" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( temp_rs_mon ) );</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg_unit : dealt_rs_damage.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a> ) {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                dmg_unit.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> -= <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( rs_r.<a class="code" href="structresistances.html#ab2707e673b2def1188ac7397012c1afb">get_effective_resist</a>( dmg_unit ), dmg_unit.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> );</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <a class="code" href="structdealt__damage__instance.html">dealt_damage_instance</a> rs_dealt_dams;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg_unit : dealt_rs_damage.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a> ) {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                <span class="keywordtype">int</span> cur_damage = 0;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                <span class="keywordtype">int</span> total_pain = 0;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                temp_rs_mon-&gt;<a class="code" href="classCreature.html#a17d04695b45ce48064d39ba9f4118f55">deal_damage_handle_type</a>( <a class="code" href="classeffect__source.html#ab2b651053f5ad648e694e35d00b9bca1">effect_source::empty</a>(), dmg_unit, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>,</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                                                      cur_damage, total_pain );</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                <span class="keywordflow">if</span>( cur_damage &gt; 0 ) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                    rs_dealt_dams.<a class="code" href="structdealt__damage__instance.html#a2e105b0204c9295376296ffb405d5c34">dealt_dams</a>[dmg_unit.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a>] += cur_damage;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            <span class="keywordtype">double</span> rs_damage_per_hit = rs_dealt_dams.<a class="code" href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">total_damage</a>();</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            subtotal_moves *= 0.5;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            subtotal_damage *= 0.5;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            subtotal_moves += moves_per_attack * num_strikes * 0.33;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            subtotal_damage += rs_damage_per_hit * num_strikes * 0.5;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="keywordflow">return</span> std::make_pair( subtotal_moves, subtotal_damage );</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    };</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    std::pair&lt;double, double&gt; crit_summary = calc_effective_damage( num_crits, <span class="keyword">true</span>, guy, mon );</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    total_moves += crit_summary.first;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    total_damage += crit_summary.second;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    std::pair&lt;double, double&gt; summary = calc_effective_damage( num_hits, <span class="keyword">false</span>, guy, mon );</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    total_moves += summary.first;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    total_damage += summary.second;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordflow">return</span> total_damage * to_moves&lt;double&gt;( 1_seconds ) / total_moves;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;}</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"><a class="line" href="structdps__comp__data.html"> 2344</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdps__comp__data.html">dps_comp_data</a> {</div>
<div class="line"><a name="l02345"></a><span class="lineno"><a class="line" href="structdps__comp__data.html#a34a0ab29aae9696788cc629fc1c093ee"> 2345</a></span>&#160;    <a class="code" href="classstring__id.html">mtype_id</a> <a class="code" href="structdps__comp__data.html#a34a0ab29aae9696788cc629fc1c093ee">mon_id</a>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"><a class="line" href="structdps__comp__data.html#a4c1151181678cb470c879e7f0a740e2e"> 2346</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structdps__comp__data.html#a4c1151181678cb470c879e7f0a740e2e">display</a>;</div>
<div class="line"><a name="l02347"></a><span class="lineno"><a class="line" href="structdps__comp__data.html#ac62324c773057b2780903f7a7bae8db5"> 2347</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structdps__comp__data.html#ac62324c773057b2780903f7a7bae8db5">evaluate</a>;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;};</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"><a class="line" href="item_8cpp.html#a17134d1aca453e886b1c7af72b8c7339"> 2350</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;translation, dps_comp_data&gt;&gt; <a class="code" href="item_8cpp.html#a17134d1aca453e886b1c7af72b8c7339">dps_comp_monsters</a> = {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    { <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Best&quot;</span> ), { <a class="code" href="item_8cpp.html#a851ee4038ae4717b80a721f64cd184f3">pseudo_debug_mon</a>, <span class="keyword">true</span>, <span class="keyword">false</span> } },</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    { <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Vs. Agile&quot;</span> ), { <a class="code" href="item_8cpp.html#a9369361029f3d8faf5d727f460de0ba4">mon_zombie_smoker</a>, <span class="keyword">true</span>, <span class="keyword">true</span> } },</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    { <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Vs. Armored&quot;</span> ), { <a class="code" href="item_8cpp.html#a233acdd06d6158e3a5383d4c81afe5cd">mon_zombie_soldier_no_weakpoints</a>, <span class="keyword">true</span>, <span class="keyword">true</span> } },</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    { <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;Vs. Mixed&quot;</span> ), { <a class="code" href="item_8cpp.html#ad63c8e54fd505f8568be27342a2414f8">mon_zombie_survivor_no_weakpoints</a>, <span class="keyword">false</span>, <span class="keyword">true</span> } },</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;};</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="classitem.html#af0875ee1532053dc7144147e34145d89"> 2357</a></span>&#160;std::map&lt;std::string, double&gt; <a class="code" href="classitem.html#af0875ee1532053dc7144147e34145d89">item::dps</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> for_display, <span class="keyword">const</span> <span class="keywordtype">bool</span> for_calc,</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    std::map&lt;std::string, double&gt; results;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;translation, dps_comp_data&gt; &amp;comp_mon : <a class="code" href="item_8cpp.html#a17134d1aca453e886b1c7af72b8c7339">dps_comp_monsters</a> ) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <span class="keywordflow">if</span>( ( comp_mon.second.display != for_display ) &amp;&amp;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            ( comp_mon.second.evaluate != for_calc ) ) {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        }</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <a class="code" href="classmonster.html">monster</a> test_mon = <a class="code" href="classmonster.html">monster</a>( comp_mon.second.mon_id );</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        results[ comp_mon.first.translated() ] = <a class="code" href="classitem.html#ab40a3018f90c675715e80cc39384cde0">effective_dps</a>( guy, test_mon );</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">return</span> results;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;}</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"><a class="line" href="classitem.html#a39870eb9db6162668a1e093864e09315"> 2372</a></span>&#160;std::map&lt;std::string, double&gt; <a class="code" href="classitem.html#af0875ee1532053dc7144147e34145d89">item::dps</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> for_display, <span class="keyword">const</span> <span class="keywordtype">bool</span> for_calc )<span class="keyword"> const</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#af0875ee1532053dc7144147e34145d89">dps</a>( for_display, for_calc, <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>() );</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;}</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"><a class="line" href="classitem.html#add69e68717a184135498a334e4d4e9f9"> 2377</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#add69e68717a184135498a334e4d4e9f9">item::average_dps</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordtype">double</span> dmg_count = 0.0;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keyword">const</span> std::map&lt;std::string, double&gt; &amp;dps_data = <a class="code" href="classitem.html#af0875ee1532053dc7144147e34145d89">dps</a>( <span class="keyword">false</span>, <span class="keyword">true</span>, guy );</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, double&gt; &amp;dps_entry : dps_data ) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        dmg_count += dps_entry.second;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">return</span> dmg_count / dps_data.size();</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;}</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"><a class="line" href="classitem.html#ad4e3984fc584c1fa9a77b6cee933d355"> 2387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ad4e3984fc584c1fa9a77b6cee933d355">item::basic_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch,</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                       <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa873770393665c1a496127caa092e469c">iteminfo_parts::BASE_MOD_SRC</a> ) ) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Origin: %s&quot;</span> ), <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">src</a>,</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        []( <span class="keyword">const</span> std::pair&lt;itype_id, mod_id&gt; &amp;source ) {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            return string_format( <span class="stringliteral">&quot;&#39;%s&#39;&quot;</span>, source.second-&gt;name() );</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a9022a153e6190f10d9b57aa4232b8aea">enumeration_conjunction::arrow</a> ) ) );</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6955cbfacb4d87c3d346f014cddc23f0">iteminfo_parts::BASE_MATERIAL</a> ) ) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keyword">const</span> std::vector&lt;const material_type *&gt; mat_types = <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>();</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="keywordflow">if</span>( !mat_types.empty() ) {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;            <span class="keyword">const</span> std::string <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a> = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( mat_types,</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> * material ) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>, material-&gt;<a class="code" href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">name</a>() );</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> );</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Material: %s&quot;</span> ), <a class="code" href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a> ) );</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        }</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    }</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71cf0f0e6acd28ae9bf66f560dccbb88">iteminfo_parts::BASE_VOLUME</a> ) ) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.push_back( <a class="code" href="item_8cpp.html#a617cda6dfe4d90ab4f9fac6cb1651c3b">vol_to_info</a>( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Volume: &quot;</span> ), <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * batch, 3 ) );</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    }</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5f4bf2d7052eaecdf7226763b1979a43">iteminfo_parts::BASE_WEIGHT</a> ) ) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.push_back( <a class="code" href="item_8cpp.html#a0296b65c9fcfa2ef2a33679368a6f4fc">weight_to_info</a>( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Weight: &quot;</span> ), <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() * batch ) );</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7f765fca08e85106c719b46800a668f9">iteminfo_parts::BASE_LENGTH</a> ) &amp;&amp; <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>() &gt; 0_mm ) {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Length: &quot;</span> ),</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;num&gt; %s&quot;</span>, <a class="code" href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">length_units</a>( <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>() ) ),</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                           <a class="code" href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a>( <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>() ), <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>().<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>() );</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa59024009f0d2f9f4dd87fc60d36545c6">iteminfo_parts::BASE_OWNER</a> ) &amp;&amp; !<a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Owner: %s&quot;</span> ),</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <a class="code" href="classitem.html#ae490218700ff9658235247b46ba75a56">get_owner_name</a>() ) ) );</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa75a792139684dc53e8d06ed67b4c2b05">iteminfo_parts::BASE_CATEGORY</a> ) ) {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Category: &quot;</span> ),</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                           <span class="stringliteral">&quot;&lt;header&gt;&quot;</span> + <a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>().<a class="code" href="classitem__category.html#a2de48450f318c5ce81abdb60d6a2f532">name_header</a>() + <span class="stringliteral">&quot;&lt;/header&gt;&quot;</span> );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa35ba4a2677442e210c23a00a5601aba3">iteminfo_parts::DESCRIPTION</a> ) ) {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keyword">const</span> std::map&lt;std::string, std::string&gt;::const_iterator idescription =</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <span class="stringliteral">&quot;description&quot;</span> );</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        <span class="keyword">const</span> std::optional&lt;translation&gt; snippet = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">get_snippet_by_id</a>( <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> );</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="keywordflow">if</span>( snippet.has_value() ) {</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            <span class="comment">// Just use the dynamic description</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, snippet.value().translated() );</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;            <span class="comment">// only ever do the effect for a snippet the first time you see it</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().has_seen_snippet( <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> ) ) {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                <span class="comment">// Have looked at the item so call the on examine EOC for the snippet</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                <span class="keyword">const</span> std::optional&lt;talk_effect_t&gt; examine_effect = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a6edcf1dde9fb06d1df1b952a3162489e">get_EOC_by_id</a>( <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> );</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                <span class="keywordflow">if</span>( examine_effect.has_value() ) {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                    <span class="comment">// activate the effect</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                    <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>() ), <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                    examine_effect.value().apply( d );</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                <span class="comment">//note that you have seen the snippet</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classavatar.html#adcd442574ee8441af971162f8d9857be">add_snippet</a>( <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> );</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( idescription != <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, idescription-&gt;second );</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() ) {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="classitem.html#aeaa5462841292fc890f32e4a67712faa">variant_description</a>() );</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a53d0bc56754749f4b8cea22528bc79c0">flag_MAGIC_FOCUS</a> ) ) {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item is a &lt;info&gt;magical focus&lt;/info&gt;.  &quot;</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                                      <span class="stringliteral">&quot;You can cast spells with it in your hand.&quot;</span> ) );</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;            }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <span class="keyword">const</span> std::string desc = ( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a> ) ?</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is an in progress disassembly of %s.  &quot;</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                                            <span class="stringliteral">&quot;It is %d percent complete.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This is an in progress %s.  &quot;</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                                                    <span class="stringliteral">&quot;It is %d percent complete.&quot;</span> );</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> percent_progress = <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> / 100000;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( desc,</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                                   <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making-&gt;result_name(),</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                                   percent_progress ) );</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>() );</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            }</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafd1b98d244fca3b7323bf1c4be601739">iteminfo_parts::BASE_REQUIREMENTS</a> ) ) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <span class="comment">// Display any minimal stat or skill requirements for the item</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        std::vector&lt;std::string&gt; req;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2899a37f781e1efea9465a98277141c7">get_min_str</a>() &gt; 0 ) {</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            req.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %d&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;strength&quot;</span> ), <a class="code" href="classitem.html#a2899a37f781e1efea9465a98277141c7">get_min_str</a>() ) );</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        }</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a025457dc0d2c2545e84cbb01533ed535">min_dex</a> &gt; 0 ) {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            req.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %d&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;dexterity&quot;</span> ), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a025457dc0d2c2545e84cbb01533ed535">min_dex</a> ) );</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a203a347d8d0a2784baa916490e2f377a">min_int</a> &gt; 0 ) {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            req.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %d&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;intelligence&quot;</span> ), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a203a347d8d0a2784baa916490e2f377a">min_int</a> ) );</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        }</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3425c169f961247fd33daa19b98934ce">min_per</a> &gt; 0 ) {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            req.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %d&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;perception&quot;</span> ), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3425c169f961247fd33daa19b98934ce">min_per</a> ) );</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;skill_id, int&gt; &amp;sk : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abef0d8869ced8040dc3004db7db39d57">min_skills</a> ) ) {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            req.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %d&quot;</span>, sk.first-&gt;name(), sk.second ) );</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        }</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="keywordflow">if</span>( !req.empty() ) {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Minimum requirements&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( req ) );</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    }</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac2437dc830ebe555fbc8bf71e8975be8">iteminfo_parts::BASE_CONTENTS</a> ) ) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Contains: %s&quot;</span> ),</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                           <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span> ) ) );</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    }</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() &amp;&amp; !<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; !<a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() &amp;&amp;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0bc56aace05539f0536ac1c5ba320e20">iteminfo_parts::BASE_AMOUNT</a> ) ) {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Amount: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                           <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> * batch );</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    }</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;}</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"><a class="line" href="classitem.html#acfb5cbbf8bdda521d5c8c8b667ae478d"> 2517</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#acfb5cbbf8bdda521d5c8c8b667ae478d">item::debug_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/* batch */</span>,</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                       <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa282d49c6e57b86ca0494ffe2425fa785">iteminfo_parts::BASE_DEBUG</a> ) ) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;itype_id: %s&quot;</span>,</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                               <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str() ) );</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a155a45ada3eb970d006b701a50026c27">old_owner</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Old owner: %s&quot;</span> ),</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <a class="code" href="classitem.html#ac1b69026c16641b40c0bfa8d9d42fa7c">get_old_owner_name</a>() ) ) );</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;            }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;age (hours): &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                               to_hours&lt;int&gt;( <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() ) );</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;charges: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                               <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;damage: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                               <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> );</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;degradation: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                               <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> );</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;active: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                               <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> );</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;burn: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                               <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> );</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> != <a class="code" href="namespacecalendar.html#adb38241f6561412667ab9be5fd29fdce">calendar::turn_max</a> ) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;countdown: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                                   to_seconds&lt;int&gt;( <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> - <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <span class="keyword">const</span> std::string tags_listed = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>,</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; f ) {</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                <span class="keywordflow">return</span> f.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> );</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;tags: %s&quot;</span> ), tags_listed ) );</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160; </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            <span class="keyword">const</span> std::string flags_listed = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>(),</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; f ) {</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                return f.str();</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> );</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;flags: %s&quot;</span> ), flags_listed ) );</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span> &amp;imap : <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a> ) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;item var: %s, %s&quot;</span> ), imap.first,</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                                                  imap.second ) );</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;wetness: &quot;</span> ),</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                               <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                               <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> );</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160; </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;age (turns): &quot;</span> ),</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                                   to_turns&lt;int&gt;( <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() ) );</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;rot (turns): &quot;</span> ),</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                                   to_turns&lt;int&gt;( <a class="code" href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">rot</a> ) );</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;max rot (turns): &quot;</span> ),</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                                   to_turns&lt;int&gt;( <a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() ) );</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;last temp: &quot;</span> ),</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                                   to_turn&lt;int&gt;( <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> ) );</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Temp: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                                   <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> ) );</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spec ener: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                                   <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) );</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spec heat lq: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                                   <a class="code" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">get_specific_heat_liquid</a>() );</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spec heat sld: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                                   <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">get_specific_heat_solid</a>() );</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;latent heat: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                                   <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">get_latent_heat</a>() );</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Freeze point: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                                   <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>() ) );</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            }</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;}</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"><a class="line" href="classitem.html#a3ce3a9a28569e6784c5499e3aa7f55be"> 2605</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a3ce3a9a28569e6784c5499e3aa7f55be">item::med_info</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *med_item, std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                     <span class="keywordtype">int</span> batch, <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_comestible&gt;</a> &amp;med_com = med_item-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="keywordflow">if</span>( med_com-&gt;quench != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaec54fa3e497fad749440f8970873f1b4">iteminfo_parts::MED_QUENCH</a> ) ) {</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Quench: &quot;</span> ), med_com-&gt;quench );</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    }</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160; </div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keywordflow">if</span>( med_item-&gt;<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4ec8d89f01be7fffe75d3f217900512b">iteminfo_parts::MED_JOY</a> ) ) {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Enjoyability: &quot;</span> ),</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                           player_character.<a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( *med_item ).first );</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    }</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa96ead93df4385b3073d7a12643212b2d">iteminfo_parts::FOOD_HEALTH</a> ) &amp;&amp; med_com-&gt;healthy != 0 ) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Health: &quot;</span> ), <a class="code" href="output_8cpp.html#af3c457642e21078c897f89206b1a8501">healthy_bar</a>( med_com-&gt;healthy ) );</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    }</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="keywordflow">if</span>( med_com-&gt;stim != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9f3ddddbbac6b640d1777fd1b7492b6e">iteminfo_parts::MED_STIMULATION</a> ) ) {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stimulation: &quot;</span> ),</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                                          med_com-&gt;stim &gt; 0 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Upper&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Downer&quot;</span> ) );</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160; </div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa402590280b74396031d11226881121d9">iteminfo_parts::MED_PORTIONS</a> ) ) {</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Portions: &quot;</span> ),</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                           <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( med_item-&gt;<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() ) * batch ) );</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    }</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160; </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0f4fff99a379125e58d84de37966580a">iteminfo_parts::MED_CONSUME_TIME</a> ) ) {</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Consume time: &quot;</span> ),</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                           <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( player_character.<a class="code" href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">get_consume_time</a>( *med_item ) ) );</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    }</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160; </div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <span class="keywordtype">bool</span> addictive = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const addiction_id, int&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a> : med_com-&gt;addictions ) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">add</a>.second &gt; 0 ) {</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            addictive = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        }</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    }</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">if</span>( addictive &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa834c0f2e3ff7fd9660e7359b2b3eed9f">iteminfo_parts::DESCRIPTION_MED_ADDICTING</a> ) ) {</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* Consuming this item is &lt;bad&gt;addicting&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    }</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <a class="code" href="classitem.html#abe25f0ce7aaa37bfe3bc70371f9f0f6c">rot_info</a>( med_item, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;}</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160; </div>
<div class="line"><a name="l02653"></a><span class="lineno"><a class="line" href="classitem.html#aecc0a01ad32ee5f835915f41e818f59e"> 2653</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aecc0a01ad32ee5f835915f41e818f59e">item::food_info</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *food_item, std::vector&lt;iteminfo&gt; &amp;info,</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch, <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> min_nutr;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="structnutrients.html">nutrients</a> max_nutr;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160; </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    std::string recipe_exemplar = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;recipe_exemplar&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keywordflow">if</span>( recipe_exemplar.empty() ) {</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        min_nutr = max_nutr = player_character.<a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( *food_item );</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        std::map&lt;recipe_id, std::pair&lt;nutrients, nutrients&gt;&gt; rec_cache;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        std::tie( min_nutr, max_nutr ) =</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            player_character.<a class="code" href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">compute_nutrient_range</a>( *food_item, <a class="code" href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a>( recipe_exemplar ), rec_cache );</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    }</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordtype">bool</span> show_nutr = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0b722d518bb16d21ae0d735b0e0a5163">iteminfo_parts::FOOD_NUTRITION</a> ) ||</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                     parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa347683c8f53a1a7f66b004254a18438d">iteminfo_parts::FOOD_VITAMINS</a> );</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">if</span>( min_nutr != max_nutr &amp;&amp; show_nutr ) {</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back(</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;            <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nutrition will &lt;color_cyan&gt;vary with chosen ingredients&lt;/color&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a>.<a class="code" href="classrecipe__dictionary.html#a5f22263eae1314377f1c64ff6d6400fe">is_item_on_loop</a>( food_item-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back(</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nutrition range cannot be calculated accurately due to &quot;</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                           <span class="stringliteral">&quot;&lt;color_red&gt;recipe loops&lt;/color&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="keywordflow">if</span>( max_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() != 0 || food_item-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench != 0 ) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0b722d518bb16d21ae0d735b0e0a5163">iteminfo_parts::FOOD_NUTRITION</a> ) ) {</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Calories (kcal)&lt;/bold&gt;: &quot;</span> ),</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                               <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, min_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() );</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            <span class="keywordflow">if</span>( max_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() != min_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() ) {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;-&quot;</span> ),</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, max_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() );</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            }</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        }</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0c708ea0bab72a2433ec6b6fab2c956b">iteminfo_parts::FOOD_QUENCH</a> ) ) {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Quench: &quot;</span> ),</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                               food_item-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench );</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaafe59b95a4b840314b82d76e529a01e0">iteminfo_parts::FOOD_SATIATION</a> ) ) {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            <span class="keywordflow">if</span>( max_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() == min_nutr.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() ) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Satiety: &lt;/bold&gt;&quot;</span> ),</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                                   <a class="code" href="output_8cpp.html#a4a97da0b37bd470ce4622141ad111286">satiety_bar</a>( player_character.<a class="code" href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">compute_calories_per_effective_volume</a>( *food_item ) ) );</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Satiety: &lt;/bold&gt;&quot;</span> ),</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                                   <a class="code" href="output_8cpp.html#a4a97da0b37bd470ce4622141ad111286">satiety_bar</a>( player_character.<a class="code" href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">compute_calories_per_effective_volume</a>( *food_item, &amp;min_nutr ) ),</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                                 );</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; - &quot;</span> ),</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                                   <a class="code" href="output_8cpp.html#a4a97da0b37bd470ce4622141ad111286">satiety_bar</a>( player_character.<a class="code" href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">compute_calories_per_effective_volume</a>( *food_item, &amp;max_nutr ) ) );</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            }</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        }</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    }</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160; </div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keyword">const</span> std::pair&lt;int, int&gt; fun_for_food_item = player_character.<a class="code" href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">fun_for</a>( *food_item );</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="keywordflow">if</span>( fun_for_food_item.first != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa9336e8db6fe4df7cb5f461ce256685c">iteminfo_parts::FOOD_JOY</a> ) ) {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Enjoyability: &quot;</span> ), fun_for_food_item.first );</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    }</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160; </div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa96ead93df4385b3073d7a12643212b2d">iteminfo_parts::FOOD_HEALTH</a> ) &amp;&amp; food_item-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy != 0 ) {</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MED&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Health: &quot;</span> ),</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                           <a class="code" href="output_8cpp.html#af3c457642e21078c897f89206b1a8501">healthy_bar</a>( food_item-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy ) );</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    }</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160; </div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade6794c936294d98290d82987eb6ee81">iteminfo_parts::FOOD_PORTIONS</a> ) ) {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Portions: &quot;</span> ),</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                           <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( food_item-&gt;<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() ) * batch ) );</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    }</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> != <span class="keyword">nullptr</span> &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa17f398622223b7a7cab29171e28ca7c">iteminfo_parts::FOOD_SMELL</a> ) &amp;&amp;</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        ( <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> || ( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> != <span class="keyword">nullptr</span> &amp;&amp; player_character.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="item_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a> ) ) ) ) {</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Smells like: &quot;</span> ) + food_item-&gt;<a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>() );</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    }</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160; </div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad9dc894b41a9db0242eeda7aa7245ddd">iteminfo_parts::FOOD_CONSUME_TIME</a> ) ) {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Consume time: &quot;</span> ),</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                           <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( player_character.<a class="code" href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">get_consume_time</a>( *food_item ) ) );</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    }</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keyword">auto</span> format_vitamin = [&amp;]( <span class="keyword">const</span> std::pair&lt;vitamin_id, int&gt; &amp;v, <span class="keywordtype">bool</span> display_vitamins ) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> is_vitamin = v.first-&gt;type() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a>;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        <span class="comment">// only display vitamins that we actually require</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">vitamin_rate</a>( v.first ) == 0_turns || v.second == 0 ||</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            display_vitamins != is_vitamin || v.first-&gt;has_flag( <a class="code" href="item_8cpp.html#a33913b0fb893e7e3a076518b02aa5fb8">flag_NO_DISPLAY</a> ) ) {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        }</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> min_value = min_nutr.<a class="code" href="structnutrients.html#a6f702fc676d942df593b7cac4e2facd0">get_vitamin</a>( v.first );</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> max_value = v.second;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> min_rda = player_character.<a class="code" href="classCharacter.html#aa23ac0479291f0d7cfec1432ec4612d2">vitamin_RDA</a>( v.first, min_value );</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> max_rda = player_character.<a class="code" href="classCharacter.html#aa23ac0479291f0d7cfec1432ec4612d2">vitamin_RDA</a>( v.first, max_value );</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        std::pair&lt;std::string, std::string&gt; weight_and_units = v.first-&gt;mass_str_from_units( v.second );</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        std::string weight_str;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        <span class="keywordflow">if</span>( !weight_and_units.first.empty() ) {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;            <span class="keywordflow">if</span>( min_value != max_value ) {</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;                std::pair&lt;std::string, std::string&gt; min_weight_and_units = v.first-&gt;mass_str_from_units(</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                            min_nutr.<a class="code" href="structnutrients.html#a6f702fc676d942df593b7cac4e2facd0">get_vitamin</a>( v.first ) );</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> show_first_unit = ( min_value != 0 ) &amp;&amp;</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                                             ( min_weight_and_units.second != weight_and_units.second );</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                std::string first_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( !show_first_unit ? <span class="stringliteral">&quot;%s&quot;</span> : <span class="stringliteral">&quot;%s %s&quot;</span>,</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                                           min_weight_and_units.first, min_weight_and_units.second );</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                weight_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s-%s %s &quot;</span>, first_string, weight_and_units.first,</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                                            weight_and_units.second );</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                weight_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s &quot;</span>, weight_and_units.first, weight_and_units.second );</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;            }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        }</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        std::string format;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        <span class="keywordflow">if</span>( is_vitamin ) {</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;            format = min_value == max_value ? <span class="stringliteral">&quot;%s%s (%i%%)&quot;</span> : <span class="stringliteral">&quot;%s%s (%i-%i%%)&quot;</span>;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( format, weight_str, v.first-&gt;name(), min_rda, max_rda );</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        format = min_value == max_value ? <span class="stringliteral">&quot;%s%s (%i U)&quot;</span> : <span class="stringliteral">&quot;%s%s (%i-%i U)&quot;</span>;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( format, weight_str, v.first-&gt;name(), min_value, max_value );</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    };</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160; </div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> max_nutr_vitamins = <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( max_nutr.<a class="code" href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">vitamins</a>() );</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keyword">const</span> std::string required_vits = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( max_nutr_vitamins,</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    [&amp;]( <span class="keyword">const</span> std::pair&lt;vitamin_id, int&gt; &amp;v ) {</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <span class="keywordflow">return</span> format_vitamin( v, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    } );</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160; </div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keyword">const</span> std::string effect_vits = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( max_nutr_vitamins,</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    [&amp;]( <span class="keyword">const</span> std::pair&lt;vitamin_id, int&gt; &amp;v ) {</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <span class="keywordflow">return</span> format_vitamin( v, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    } );</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="keywordflow">if</span>( !required_vits.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa347683c8f53a1a7f66b004254a18438d">iteminfo_parts::FOOD_VITAMINS</a> ) ) {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Vitamins (RDA): &quot;</span> ), required_vits );</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    }</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keywordflow">if</span>( !effect_vits.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa03aac02ab98286d03fecc04cd363c0a2">iteminfo_parts::FOOD_VIT_EFFECTS</a> ) ) {</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;FOOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Other contents: &quot;</span> ), effect_vits );</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    }</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160; </div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160; </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1f41d6a176d75ca1df32f76a81bd2e37">iteminfo_parts::FOOD_ALLERGEN</a> )</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        &amp;&amp; player_character.<a class="code" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">allergy_type</a>( *food_item ) != <a class="code" href="item_8cpp.html#aaada8b39e1e59783b5dc682d67db64e0">morale_null</a> ) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food will cause an &lt;bad&gt;allergic reaction&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160; </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">has_vitamin</a>( <a class="code" href="item_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a> ) &amp;&amp;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadeecc2651cff75ce994f8579b823e929">iteminfo_parts::FOOD_CANNIBALISM</a> ) ) {</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="item_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a> ) &amp;&amp;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            !player_character.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="item_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a> ) &amp;&amp;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            !player_character.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="item_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a> ) ) {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food contains &lt;bad&gt;human flesh&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food contains &lt;good&gt;human flesh&lt;/good&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        }</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    }</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#ac7fc1e9e44759c1ae2dd5ef423fc5c1b">is_tainted</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadeecc2651cff75ce994f8579b823e929">iteminfo_parts::FOOD_CANNIBALISM</a> ) ) {</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This food is &lt;bad&gt;tainted&lt;/bad&gt; and will poison you.&quot;</span> ) );</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    }</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;<span class="comment">    ///\EFFECT_SURVIVAL &gt;=3 allows detection of poisonous food</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a> ) &amp;&amp;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        player_character.<a class="code" href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">get_greater_skill_or_knowledge_level</a>( <a class="code" href="item_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) &gt;= 3 &amp;&amp;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa76bf19daad9839801f098cd4db69d1c">iteminfo_parts::FOOD_POISON</a> ) ) {</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* On closer inspection, this appears to be &quot;</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                              <span class="stringliteral">&quot;&lt;bad&gt;poisonous&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    }</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;<span class="comment">    ///\EFFECT_SURVIVAL &gt;=5 allows detection of hallucinogenic food</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> ) &amp;&amp;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        player_character.<a class="code" href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">get_greater_skill_or_knowledge_level</a>( <a class="code" href="item_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) &gt;= 5 &amp;&amp;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3f2572bc958e4490db06b7322b4675b6">iteminfo_parts::FOOD_HALLUCINOGENIC</a> ) ) {</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* On closer inspection, this appears to be &quot;</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;                              <span class="stringliteral">&quot;&lt;neutral&gt;hallucinogenic&lt;/neutral&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    }</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <a class="code" href="classitem.html#abe25f0ce7aaa37bfe3bc70371f9f0f6c">rot_info</a>( food_item, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;}</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"><a class="line" href="classitem.html#abe25f0ce7aaa37bfe3bc70371f9f0f6c"> 2837</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#abe25f0ce7aaa37bfe3bc70371f9f0f6c">item::rot_info</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<span class="keyword">const</span> food_item, std::vector&lt;iteminfo&gt; &amp;info,</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *<span class="keyword">const</span> parts, <span class="keyword">const</span> <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keyword">const</span> <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3f6f1966e9b2cbe97a4d33992f9fab84">iteminfo_parts::FOOD_ROT</a> ) ) {</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        <span class="keyword">const</span> std::string rot_time = <a class="code" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( food_item-&gt;<a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() );</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item is &lt;neutral&gt;perishable&lt;/neutral&gt;, &quot;</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                                             <span class="stringliteral">&quot;and at room temperature has an estimated nominal &quot;</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                                             <span class="stringliteral">&quot;shelf life of &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), rot_time ) );</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160; </div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        <span class="keywordflow">if</span>( !food_item-&gt;<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="item_8cpp.html#aca6160da93053b44b107ccef5e04175f">get_freshness_description</a>( *food_item ) );</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160; </div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a601e941cb8aaf8e22fbbe2600a467892">flag_FREEZERBURN</a> ) &amp;&amp; !food_item-&gt;<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() &amp;&amp;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;            !food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) ) {</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* Quality of this food suffers when it&#39;s frozen, and it &quot;</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                                  <span class="stringliteral">&quot;&lt;neutral&gt;will become mushy after thawing out&lt;/neutral&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        }</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) &amp;&amp; !food_item-&gt;<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* It was frozen once and after thawing became &lt;bad&gt;mushy and &quot;</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                                  <span class="stringliteral">&quot;tasteless&lt;/bad&gt;.  It will rot quickly if thawed again.&quot;</span> ) );</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        }</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> ) &amp;&amp;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            player_character.<a class="code" href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">get_greater_skill_or_knowledge_level</a>( <a class="code" href="item_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a> ) &gt;= 3 ) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* It seems that deep freezing &lt;good&gt;killed all &quot;</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                                  <span class="stringliteral">&quot;parasites&lt;/good&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        }</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        <span class="keywordflow">if</span>( food_item-&gt;<a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;            <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="item_8cpp.html#a36f9b5f5d763f2c224b59b75af340c6c">bio_digestion</a> ) ) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item has started to &lt;neutral&gt;rot&lt;/neutral&gt;, &quot;</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                                      <span class="stringliteral">&quot;but &lt;info&gt;your bionic digestion can tolerate &quot;</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                                      <span class="stringliteral">&quot;it&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="item_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a> ) ) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item has started to &lt;neutral&gt;rot&lt;/neutral&gt;, &quot;</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                                      <span class="stringliteral">&quot;but &lt;info&gt;you can tolerate it&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item has started to &lt;bad&gt;rot&lt;/bad&gt;. &quot;</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                                      <span class="stringliteral">&quot;&lt;info&gt;Eating&lt;/info&gt; it would be a &lt;bad&gt;very bad &quot;</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                                      <span class="stringliteral">&quot;idea&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            }</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        }</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;}</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"><a class="line" href="classitem.html#a884a7ea3cc59c2ed8342e3054c07a922"> 2890</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a884a7ea3cc59c2ed8342e3054c07a922">item::magazine_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                          <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1d6da470e2d0c764e84877215a30f42c">flag_NO_RELOAD</a> ) || <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    }</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160; </div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3491c37770c53413735486b0251f95e0">iteminfo_parts::MAGAZINE_COMPATIBLE_GUNS</a> ) &amp;&amp;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        <a class="code" href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a>.find( this-&gt;typeId() ) != <a class="code" href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a>.end() ) {</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacegame__menus_1_1inv.html#ac3a1cc6107728c90e65e9af775f7c279">compare</a> = []( <span class="keyword">const</span> <span class="keyword">auto</span> &amp; lhs, <span class="keyword">const</span> <span class="keyword">auto</span> &amp; rhs ) {</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="localized__comparator_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a>( lhs, rhs );</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        };</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        std::set&lt;std::string, decltype( <a class="code" href="namespacegame__menus_1_1inv.html#ac3a1cc6107728c90e65e9af775f7c279">compare</a> )&gt; compatible_guns( <a class="code" href="namespacegame__menus_1_1inv.html#ac3a1cc6107728c90e65e9af775f7c279">compare</a> );</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160; </div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;gun_type_id : <a class="code" href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a>[this-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>()] ) {</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp;<a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a> = gun_type_id.obj();</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;            <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;SHOW_GUN_VARIANTS&quot;</span> ) ) {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a>.variants.empty() ) {</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                    compatible_guns.insert( <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a>.nname( 1 ) );</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                }</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype__variant__data.html">itype_variant_data</a> &amp;variant_type : <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a>.variants ) {</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                    compatible_guns.insert( variant_type.<a class="code" href="structitype__variant__data.html#af3729c5714d51d418ce498aee324a6b0">alt_name</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>() );</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                compatible_guns.insert( <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a>.nname( 1 ) );</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            }</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160; </div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="keywordflow">if</span>( !compatible_guns.empty() ) {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;            <span class="keyword">const</span> std::string mag_names = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( compatible_guns );</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MAGAZINE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Compatible guns&lt;/bold&gt;: &quot;</span> ) + mag_names );</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        }</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    }</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf0ec68231ba718dede64697046faa4d7">iteminfo_parts::MAGAZINE_CAPACITY</a> ) ) {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>() ) {</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            <span class="keyword">const</span> std::string fmt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;&lt;num&gt; round of %s&quot;</span>,</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                                                   <span class="stringliteral">&quot;&lt;num&gt; rounds of %s&quot;</span>, <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( at ) ),</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;                                                   at-&gt;name() );</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MAGAZINE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Capacity: &quot;</span> ), fmt, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;                               <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( at ) );</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        }</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf337aad4b8ab1035e42a67cdff177ea7">iteminfo_parts::MAGAZINE_COMPATABILITY</a> ) ) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>() ) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            std::string ammo_details = <a class="code" href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">print_ammo</a>( at );</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <span class="keywordflow">if</span>( !ammo_details.empty() ) {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MAGAZINE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Variants: &quot;</span> ), ammo_details, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            }</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160; </div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        }</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa8e7c238014ebc7462d62e5ac9ce0f8d">iteminfo_parts::MAGAZINE_RELOAD</a> ) &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;MAGAZINE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload time: &quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt; moves per round&quot;</span> ),</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;reload_time );</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;}</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"><a class="line" href="classitem.html#ad1a1b9e061715c122074e2df204d9bbc"> 2949</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ad1a1b9e061715c122074e2df204d9bbc">item::ammo_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/* batch */</span>,</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                      <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <span class="comment">// Skip this section for guns and items without ammo data</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || !<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ||</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab4804ffed45bd62b1cf22c64689f5f73">iteminfo_parts::AMMO_REMAINING_OR_TYPES</a> ) ) {</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    }</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160; </div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__ammo.html">islot_ammo</a> &amp;ammo = *<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="keywordflow">if</span>( !ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#af81002fc0a5fafe2690d31403941d2d6">empty</a>() || ammo.<a class="code" href="structislot__ammo.html#af589f0ff6323e19b6e010407eb2d7078">force_stat_display</a> ) {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Ammunition type&lt;/bold&gt;: &quot;</span> ), <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>()-&gt;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>() );</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &gt; 0 ) {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Ammunition&lt;/bold&gt;: &quot;</span> ),</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;                               <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">nname</a>( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) );</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160; </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        <span class="keywordflow">if</span>( !ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#af81002fc0a5fafe2690d31403941d2d6">empty</a>() &amp;&amp; ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a>.front().amount &gt; 0 ) {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4432c18ca4c6fd70a6b99fd5a7e8f054">iteminfo_parts::AMMO_DAMAGE_VALUE</a> ) ) {</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>() );</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            }</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae58473536d734de42d07bf9d27600975">iteminfo_parts::AMMO_DAMAGE_PROPORTIONAL</a> ) ) {</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> multiplier = ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#af81002fc0a5fafe2690d31403941d2d6">empty</a>() ? 1.0f</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;                                     : ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a>.front().unconditional_damage_mult;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage multiplier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;                               multiplier );</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        }</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2d91ee39d9f8e2e454e450aaac74c3c7">iteminfo_parts::AMMO_DAMAGE_AP</a> ) ) {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Armor-pierce: &quot;</span> ), <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( ammo ) );</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1bdd24bef41876fa1bbc468b1b424e22">iteminfo_parts::AMMO_DAMAGE_RANGE</a> ) ) {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span> + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, ammo.<a class="code" href="structcommon__ranged__data.html#af73392bcb456d04c3fdf1a413b6b3a9e">range</a> );</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        }</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="keywordflow">if</span>( ammo.<a class="code" href="structcommon__ranged__data.html#ab1bb4e43a99ecb7ec197e23d00fc9a5a">range_multiplier</a> != 1.0f &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa563e1f1350c073cf54b65a31d0ea9c7">iteminfo_parts::AMMO_DAMAGE_RANGE_MULTIPLIER</a> ) ) {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range Multiplier: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>,</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>, ammo.<a class="code" href="structcommon__ranged__data.html#ab1bb4e43a99ecb7ec197e23d00fc9a5a">range_multiplier</a> );</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        }</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa224525ca8e47b698bde157fed0155b8">iteminfo_parts::AMMO_DAMAGE_DISPERSION</a> ) ) {</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dispersion: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, ammo.<a class="code" href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">dispersion</a> );</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        }</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa55a9e0ce1999085f92e071912acf1111">iteminfo_parts::AMMO_DAMAGE_RECOIL</a> ) ) {</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Recoil: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, ammo.<a class="code" href="structislot__ammo.html#a9bf197805d7d623f18b832dd3e5dc770">recoil</a> );</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        }</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb2cc65ff75bdde8efd603f5bbe9fd04">iteminfo_parts::AMMO_DAMAGE_CRIT_MULTIPLIER</a> ) ) {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Critical multiplier: &quot;</span> ), ammo.<a class="code" href="structislot__ammo.html#a8554ea4bc34374622ff0c3c5d0da956d">critical_multiplier</a> );</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        }</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad7aceee2cdc8eb25ceebcb1d2805c33c">iteminfo_parts::AMMO_BARREL_DETAILS</a> ) ) {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;            std::string barrel_details;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> = 150_mm;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a> = 400_mm;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a> = 600_mm;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> small_damage = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a5b1ceec989d22133cef221930fddecf1">di_considering_length</a>(</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;                                         <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>() );</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> medium_damage = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a5b1ceec989d22133cef221930fddecf1">di_considering_length</a>(</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;                                          <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a> ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>() );</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> large_damage = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a>.<a class="code" href="structdamage__instance.html#a5b1ceec989d22133cef221930fddecf1">di_considering_length</a>(</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;                                         <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a> ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>() );</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> small_dispersion = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structislot__ammo.html#a8f5e8f2dc748abe2ce3b079236120e17">dispersion_considering_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) );</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> medium_dispersion = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structislot__ammo.html#a8f5e8f2dc748abe2ce3b079236120e17">dispersion_considering_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a> ) );</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> large_dispersion = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ammo.<a class="code" href="structislot__ammo.html#a8f5e8f2dc748abe2ce3b079236120e17">dispersion_considering_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a> ) );</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;            <span class="keywordflow">if</span>( small_damage != medium_damage || medium_damage != large_damage ||</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;                small_dispersion != medium_dispersion || medium_damage != large_dispersion ) {</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage and dispersion by barrel length: &quot;</span> ) );</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                <span class="keyword">const</span> std::string small_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; &lt;info&gt;%d %s&lt;/info&gt;: &quot;</span>,</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;                                                 <a class="code" href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ),</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;                                                 <a class="code" href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">length_units</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a> ) );</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, small_string, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; damage:  &lt;num&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;                                   small_damage );</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; dispersion:  &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, small_dispersion );</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                <span class="keyword">const</span> std::string medium_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; &lt;info&gt;%d %s&lt;/info&gt;: &quot;</span>,</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                                                  <a class="code" href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a> ),</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;                                                  <a class="code" href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">length_units</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">medium</a> ) );</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, medium_string, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; damage:  &lt;num&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                                   medium_damage );</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; dispersion:  &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>  | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, medium_dispersion );</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                <span class="keyword">const</span> std::string large_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; &lt;info&gt;%d %s&lt;/info&gt;: &quot;</span>,</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                                                 <a class="code" href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a> ),</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                                                 <a class="code" href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">length_units</a>( <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a> ) );</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, large_string, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; damage:  &lt;num&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;                                   large_damage );</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; dispersion:  &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, large_dispersion );</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;            }</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;        }</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    }</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160; </div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    std::vector&lt;std::string&gt; fx;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="keywordflow">if</span>( ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;RECYCLED&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2663c3b9f1c1ed682d1f4f69ba120c79">iteminfo_parts::AMMO_FX_RECYCLED</a> ) ) {</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This ammo has been &lt;bad&gt;hand-loaded&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    }</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="keywordflow">if</span>( ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;MATCHHEAD&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa039446a4e6279997122a740b0df3ea31">iteminfo_parts::AMMO_FX_BLACKPOWDER</a> ) ) {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        fx.emplace_back(</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This ammo has been loaded with &lt;bad&gt;matchhead powder&lt;/bad&gt;, and will quickly &quot;</span></div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;               <span class="stringliteral">&quot;clog and rust most guns like blackpowder, but will also rarely cause the gun damage from pressure spikes.&quot;</span> ) );</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;BLACKPOWDER&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;               parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa039446a4e6279997122a740b0df3ea31">iteminfo_parts::AMMO_FX_BLACKPOWDER</a> ) ) {</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        fx.emplace_back(</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This ammo has been loaded with &lt;bad&gt;blackpowder&lt;/bad&gt;, and will quickly &quot;</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;               <span class="stringliteral">&quot;clog up most guns, and cause rust if the gun is not cleaned.&quot;</span> ) );</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    }</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <span class="keywordflow">if</span>( ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;NEVER_MISFIRES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23133795303bd0faeeeb6810bb3ad640">iteminfo_parts::AMMO_FX_CANTMISSFIRE</a> ) ) {</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This ammo &lt;good&gt;never misfires&lt;/good&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    }</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafdcbd046e0cbc1e78bd81613144e188a">iteminfo_parts::AMMO_FX_RECOVER</a> ) ) {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;<a class="code" href="classeffect.html">effect</a> : ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a> ) {</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="cata__utility_8h.html#a00069567a0e8438fa2707a5214e53ca4">string_starts_with</a>( <a class="code" href="classeffect.html">effect</a>, <span class="stringliteral">&quot;RECOVER_&quot;</span> ) ) {</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;                <a class="code" href="classret__val.html">ret_val&lt;int&gt;</a> try_recover_chance =</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;                    <a class="code" href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt;int&gt;</a>( <a class="code" href="classeffect.html">effect</a>.substr( 8 ), <span class="keyword">false</span> );</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;                <span class="keywordflow">if</span>( !try_recover_chance.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error parsing ammo RECOVER_ denominator: %s&quot;</span>,</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;                              try_recover_chance.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;                }</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                <span class="keywordtype">int</span> recover_chance = try_recover_chance.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>();</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;                <span class="keywordflow">if</span>( recover_chance &lt;= 5 ) {</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;                    fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stands a &lt;bad&gt;very low&lt;/bad&gt; chance of remaining intact once fired.&quot;</span> ) );</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recover_chance &lt;= 10 ) {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                    fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stands a &lt;bad&gt;low&lt;/bad&gt; chance of remaining intact once fired.&quot;</span> ) );</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recover_chance &lt;= 20 ) {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;                    fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stands a &lt;bad&gt;somewhat low&lt;/bad&gt; chance of remaining intact once fired.&quot;</span> ) );</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recover_chance &lt;= 30 ) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;                    fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stands a &lt;good&gt;decent&lt;/good&gt; chance of remaining intact once fired.&quot;</span> ) );</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;                    fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stands a &lt;good&gt;good&lt;/good&gt; chance of remaining intact once fired.&quot;</span> ) );</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;                }</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;            }</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        }</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    }</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">if</span>( ( ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;INCENDIARY&quot;</span> ) || ammo.<a class="code" href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">ammo_effects</a>.count( <span class="stringliteral">&quot;IGNITE&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa915a3c09f875175875701035a29aca5e">iteminfo_parts::AMMO_FX_INCENDIARY</a> ) ) {</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        fx.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This ammo &lt;neutral&gt;may start fires&lt;/neutral&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    }</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <span class="keywordflow">if</span>( !fx.empty() ) {</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;e : fx ) {</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, e );</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        }</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    }</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;}</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"><a class="line" href="classitem.html#a6d1f49b55eaaf92e616359490624bad2"> 3102</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a6d1f49b55eaaf92e616359490624bad2">item::gun_info</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>, std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                     <span class="keywordtype">int</span> <span class="comment">/* batch */</span>, <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__gun.html">islot_gun</a> &amp;<a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> = *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gun;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="keyword">const</span> <a class="code" href="classSkill.html">Skill</a> &amp;skill = *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;gun_skill();</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160; </div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="comment">// many statistics are dependent upon loaded ammo</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <span class="comment">// if item is unloaded (or is RELOAD_AND_SHOOT) shows approximate stats using default ammo</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *loaded_mod = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="classitem.html">item</a> tmp;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *curammo = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() &amp;&amp; !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_remaining() ) {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        tmp = *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">if</span>( tmp.<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().size() == 1 &amp;&amp; *tmp.<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().begin() == <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">ammotype::NULL_ID</a>() ) {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> default_bore_type_id = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>();</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;bore_type_id : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;default_mods ) {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                std::map&lt; ammotype, std::set&lt;itype_id&gt; &gt; magazine_adaptor = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">find_type</a>(</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;                            bore_type_id )-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;magazine_adaptor;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                <span class="keywordflow">if</span>( !magazine_adaptor.empty() &amp;&amp; !magazine_adaptor.begin()-&gt;second.empty() ) {</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;                    default_bore_type_id = bore_type_id;</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;                    <a class="code" href="classitem.html">item</a> tmp_mod( bore_type_id );</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                    tmp.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( tmp_mod, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> );</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;                    <a class="code" href="classitem.html">item</a> tmp_mag( *magazine_adaptor.begin()-&gt;second.begin() );</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;                    tmp_mag.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( magazine_adaptor.begin()-&gt;first-&gt;default_ammotype() );</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                    tmp.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( tmp_mag, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;                }</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            }</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8ef1966ad26aa52b50358d1e5055454e">iteminfo_parts::GUN_DEFAULT_BORE</a> ) ) {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;                <span class="keywordflow">if</span>( default_bore_type_id != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>,</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Weapon is &lt;bad&gt;not attached a bore mod&lt;/bad&gt;, so stats below assume the default bore mod: &quot;</span> ),</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                                                      default_bore_type_id-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) ) );</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>,</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Weapon is &lt;bad&gt;not attached a bore mod&lt;/bad&gt;. &quot;</span> ) );</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                }</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            }</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        }</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> default_ammo = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;magazine_current() ? tmp.<a class="code" href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">common_ammo_default</a>() : tmp.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>();</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <span class="keywordflow">if</span>( !default_ammo.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            tmp.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( default_ammo );</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !tmp.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>().<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            <span class="comment">// clear out empty magazines so put_in below doesn&#39;t error</span></div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *i : tmp.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>() ) {</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                <span class="keywordflow">if</span>( i-&gt;<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                    tmp.<a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *i );</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                    tmp.<a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                }</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            }</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <a class="code" href="classitem.html">item</a> tmp_mag( tmp.<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>() );</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;            tmp_mag.<a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( tmp_mag.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() );</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            tmp.<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( tmp_mag, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        }</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;        loaded_mod = &amp;tmp;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;        curammo = loaded_mod-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        <span class="comment">// TODO: Should this be .is_null(), rather than comparing to &quot;none&quot;?</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;        <span class="keywordflow">if</span>( loaded_mod == <span class="keyword">nullptr</span> || loaded_mod-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() == <span class="stringliteral">&quot;none&quot;</span> ||</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            curammo == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> mag_default = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>();</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                <span class="keywordflow">if</span>( mag_default.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;gun %s has magazine %s with no default ammo&quot;</span>,</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                              <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().c_str(), <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().c_str() );</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;                }</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                curammo = &amp;mag_default.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;loaded a nun or ammo_data() is nullptr&quot;</span> );</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;            }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        }</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa84f8270ca8b51f73539bdf7546473ebf">iteminfo_parts::GUN_DEFAULT_AMMO</a> ) ) {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>,</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Weapon is &lt;bad&gt;not loaded&lt;/bad&gt;, so stats below assume the default ammo: &quot;</span> ),</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;                                              curammo-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) ) );</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        }</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        curammo = loaded_mod-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    }</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160; </div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa437183a2ee10b05dd04a2373e30f9fbb">iteminfo_parts::GUN_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Ranged damage&lt;/bold&gt;: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;gun_damage( <span class="keyword">false</span> ).total_damage() );</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160; </div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() ) {</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <span class="comment">// ammo_damage, sum_of_damage, and ammo_mult not shown so don&#39;t need to translate.</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <span class="keywordtype">float</span> dmg_mult = 1.0f;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;dmg : curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;damage.damage_units ) {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            dmg_mult *= dmg.<a class="code" href="structdamage__unit.html#a86471803f7e56a7064bedd8da78672ee">unconditional_damage_mult</a>;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        }</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        <span class="keywordflow">if</span>( dmg_mult != 1.0f ) {</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9d768f7499a8ffda5df1565ab746872a">iteminfo_parts::GUN_DAMAGE_AMMOPROP</a> ) ) {</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;ammo_mult&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>, dmg_mult );</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            }</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9a043b451970b64c8fd3d543c424bab9">iteminfo_parts::GUN_DAMAGE_LOADEDAMMO</a> ) ) {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                <a class="code" href="structdamage__instance.html">damage_instance</a> ammo_dam = curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;damage;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                <span class="keywordtype">int</span> bullet_damage = ammo_dam.<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>();</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;barrel_length().value() &gt; 0 ) {</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                    bullet_damage = ammo_dam.<a class="code" href="structdamage__instance.html#a5b1ceec989d22133cef221930fddecf1">di_considering_length</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;barrel_length() ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>();</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                }</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;ammo_damage&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> |</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, bullet_damage );</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        }</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160; </div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a> = loaded_mod-&gt;<a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a>( <span class="keyword">true</span> ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>();</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <a class="code" href="classitem.html">item</a> intact_mod( *loaded_mod );</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            intact_mod.<a class="code" href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">set_degradation</a>( 0 );</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            intact_mod.<a class="code" href="classitem.html#afebc00bf525bada288b71deebbc84d84">set_damage</a>( 0 );</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> intact_damage = intact_mod.<a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a>( <span class="keyword">true</span> ).<a class="code" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>();</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            <span class="keywordflow">if</span>( intact_damage != <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a> ) {</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> dmg_penalty = <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a> - intact_damage;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;damaged_weapon_penalty&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>, dmg_penalty );</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;            }</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160; </div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad12a5950956c105707821b2948f71750">iteminfo_parts::GUN_DAMAGE_TOTAL</a> ) ) {</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;sum_of_damage&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; = &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>, <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">gun_damage</a> );</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    }</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160; </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;barrel_length().value() &gt; 0 ) {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2a5ccca16709f945ec4f0d12d6162167">iteminfo_parts::GUN_BARRELLENGTH</a> ) ) {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Barrel Length: &lt;info&gt;%d %s&lt;/info&gt;&quot;</span> ),</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                               <a class="code" href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;barrel_length() ), <a class="code" href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">length_units</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;barrel_length() ) ),</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        }</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160; </div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() &amp;&amp; curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;critical_multiplier != 1.0 ) {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb2cc65ff75bdde8efd603f5bbe9fd04">iteminfo_parts::AMMO_DAMAGE_CRIT_MULTIPLIER</a> ) ) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Critical multiplier: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>,</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;critical_multiplier );</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    }</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160; </div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="keywordtype">int</span> max_gun_range = loaded_mod-&gt;<a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">gun_range</a>( &amp;player_character );</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordflow">if</span>( max_gun_range &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc57ce01d968aafed58059e1bc743a04">iteminfo_parts::GUN_MAX_RANGE</a> ) ) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Maximum range: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;                           max_gun_range );</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    }</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160; </div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <span class="comment">// TODO: This doesn&#39;t cover multiple damage types</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160; </div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaabae2ef3e5dc3ef734661234a6c8b263">iteminfo_parts::GUN_ARMORPIERCE</a> ) ) {</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Armor-pierce: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> ) );</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() ) {</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <span class="keywordtype">int</span> ammo_pierce = <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( *curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> );</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <span class="comment">// ammo_armor_pierce and sum_of_armor_pierce don&#39;t need to translate.</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5f2fd59bf414e99ed703bbfa774e911e">iteminfo_parts::GUN_ARMORPIERCE_LOADEDAMMO</a> ) ) {</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;ammo_armor_pierce&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> |</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, ammo_pierce );</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        }</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa02464f1f20716c4b55229bfa5ae25e12">iteminfo_parts::GUN_ARMORPIERCE_TOTAL</a> ) ) {</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;sum_of_armor_pierce&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; = &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>,</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;                               <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> ) + ammo_pierce );</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        }</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    }</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160; </div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabf08329f3b4cb553c370380d01c111d6">iteminfo_parts::GUN_DISPERSION</a> ) ) {</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dispersion: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;gun_dispersion( <span class="keyword">false</span>, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    }</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() ) {</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <span class="keywordtype">int</span> ammo_dispersion = curammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;dispersion_considering_length( <a class="code" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">barrel_length</a>() );</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <span class="comment">// ammo_dispersion and sum_of_dispersion don&#39;t need to translate.</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0c804e4fd5de9f864355262e269b3c99">iteminfo_parts::GUN_DISPERSION_LOADEDAMMO</a> ) ) {</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;ammo_dispersion&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> |</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>,</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;                               ammo_dispersion );</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        }</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1b56f4aab725171f7745e0e0d8000bd7">iteminfo_parts::GUN_DISPERSION_TOTAL</a> ) ) {</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;sum_of_dispersion&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; = &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>,</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;                               loaded_mod-&gt;<a class="code" href="classitem.html#adfd6f9946d4895a6ef2190e07c2486a3">gun_dispersion</a>( <span class="keyword">true</span>, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        }</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="comment">// if effective sight dispersion differs from actual sight dispersion display both</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    std::pair&lt;int, int&gt; disp = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;sight_dispersion( player_character );</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordtype">int</span> act_disp = disp.first;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="keywordtype">int</span> eff_disp = disp.second;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <span class="keywordtype">int</span> adj_disp = eff_disp - act_disp;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <span class="keywordtype">int</span> point_shooting_limit = player_character.<a class="code" href="classCharacter.html#aa8c5e2457ca6645b57dd269184bc4b54">point_shooting_limit</a>( *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160; </div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7079d6c7eaab71f6fefcf4ea1c52698d">iteminfo_parts::GUN_DISPERSION_SIGHT</a> ) ) {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;        <span class="keywordflow">if</span>( point_shooting_limit &lt;= eff_disp ) {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sight dispersion (point shooting): &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;                               point_shooting_limit );</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sight dispersion: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                               act_disp );</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;            <span class="keywordflow">if</span>( adj_disp ) {</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;sight_adj_disp&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> |</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, adj_disp );</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;sight_eff_disp&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; = &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>,</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                                   eff_disp );</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;            }</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;        }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    }</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160; </div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    <span class="keywordtype">bool</span> bipod = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#afd2f01270d78e47d439c7c4a44c5d1a6">flag_BIPOD</a> );</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">if</span>( loaded_mod-&gt;<a class="code" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">gun_recoil</a>( player_character ) ) {</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaace40cbc4372a34b39ed693890360b024">iteminfo_parts::GUN_RECOIL</a> ) ) {</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Effective recoil: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                               loaded_mod-&gt;<a class="code" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">gun_recoil</a>( player_character ) );</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;        }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        <span class="keywordflow">if</span>( bipod &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa772f1191a9b2a8eea1de9ac71fa19e0">iteminfo_parts::GUN_RECOIL_BIPOD</a> ) ) {</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;bipod_recoil&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (with bipod &lt;num&gt;)&quot;</span> ),</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>,</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                               loaded_mod-&gt;<a class="code" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">gun_recoil</a>( player_character, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        }</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160; </div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaacd2d84f7fd6f2d2a3a6872031695ffa">iteminfo_parts::GUN_RECOIL_THEORETICAL_MINIMUM</a> ) ) {</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Theoretical minimum recoil: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, loaded_mod-&gt;<a class="code" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">gun_recoil</a>( player_character, <span class="keyword">true</span>,</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                                       <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        }</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabd9c2bb184e2bcbe3f940ac6a130e6d4">iteminfo_parts:: GUN_IDEAL_STRENGTH</a> ) ) {</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <span class="stringliteral">&quot;ideal_strength&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (when strength reaches: &lt;num&gt;)&quot;</span> ),</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a>,</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                               loaded_mod-&gt;<a class="code" href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">gun_base_weight</a>() / 333.0_gram );</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        }</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    }</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    std::map&lt;gun_mode_id, gun_mode&gt; fire_modes = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;gun_all_modes();</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160; </div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6d831a28effbb6efe262c19a550349c5">iteminfo_parts::GUN_RELOAD_TIME</a> ) ) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload time: &quot;</span> ),</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                           <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a> ) ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt; moves per round&quot;</span> ) :</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt; moves&quot;</span> ),</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,  <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;get_reload_time() );</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160; </div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae0d4cc1534f28794a7c0af424108e5f9">iteminfo_parts::GUN_CURRENT_LOUDNESS</a> ) ) {</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> is_default_fire_mode = loaded_mod-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">tname</a>() == <span class="stringliteral">&quot;DEFAULT&quot;</span>;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <span class="comment">//if empty, use the temporary gun loaded with default ammo</span></div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitem_1_1sound__data.html">item::sound_data</a> data = ( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() &amp;&amp;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                        !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_remaining() ) ? tmp.<a class="code" href="classitem.html#a3694c5d9138956736af2444bd7b3972e">gun_noise</a>( is_default_fire_mode ) : loaded_mod-&gt;<a class="code" href="classitem.html#a3694c5d9138956736af2444bd7b3972e">gun_noise</a>(</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                                          is_default_fire_mode );</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> loudness = data.<a class="code" href="structitem_1_1sound__data.html#aa2fb844ce506ca62f0c5d1d549f54826">volume</a>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Loudness with current fire mode: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                           loudness );</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    }</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160; </div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabd3949d1da788505014ce644dd38b245">iteminfo_parts::GUN_USEDSKILL</a> ) ) {</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skill used: &quot;</span> ),</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                           <span class="stringliteral">&quot;&lt;info&gt;&quot;</span> + skill.<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() + <span class="stringliteral">&quot;&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    }</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;magazine_integral() || <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;magazine_current() ) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;magazine_current() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaad5a64fee23bfe23b12a01e9b4d7c653">iteminfo_parts::GUN_MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Magazine: &quot;</span> ),</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                                              <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;magazine_current()-&gt;tname() ) );</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        }</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_types().empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa69c5a2af31e3afb9da81b6910c42f90f">iteminfo_parts::GUN_CAPACITY</a> ) ) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_types() ) {</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                <span class="keyword">const</span> std::string fmt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;&lt;num&gt; round of %s&quot;</span>,</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;                                                       <span class="stringliteral">&quot;&lt;num&gt; rounds of %s&quot;</span>,</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;                                                       <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_capacity( at ) ), at-&gt;name() );</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Capacity: &quot;</span> ), fmt, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;                                   <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_capacity( at ) );</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;                std::string ammo_details = <a class="code" href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">print_ammo</a>( at );</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;                <span class="keywordflow">if</span>( !ammo_details.empty() &amp;&amp; !<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Variants: &quot;</span> ), ammo_details, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;                }</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            }</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        }</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa25a4260052ebde6514bb600ecd2a3a5c">iteminfo_parts::GUN_TYPE</a> ) ) {</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        <span class="keyword">const</span> std::set&lt;ammotype&gt; types_of_ammo = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_types();</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;        <span class="keywordflow">if</span>( !types_of_ammo.empty() ) {</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Type: &quot;</span> ), <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( types_of_ammo,</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp; at ) {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                <span class="keywordflow">return</span> at-&gt;<a class="code" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">name</a>();</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> ) );</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    }</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160; </div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_data() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabe9b83b8dfd0a66b1d7097d0f6cbe87e">iteminfo_parts::AMMO_REMAINING</a> ) ) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ammunition: &quot;</span> ), <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_data()-&gt;nname( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_remaining() ) ) );</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160; </div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() &gt; 1 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2561ea773c126af917200bc412fc361c">iteminfo_parts::AMMO_TO_FIRE</a> ) ) {</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>,  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ammunition consumed per shot: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;ammo_required() );</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    }</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160; </div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;get_gun_energy_drain() &gt; 0_kJ &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaaf11b61460c8a0f0f43ab34b995319b5">iteminfo_parts::AMMO_UPSCOST</a> ) ) {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;AMMO&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Energy per shot: &quot;</span> ), <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;                           <a class="code" href="namespaceunits.html#a562f71f7aa63ca761cd6869c48602bba">units::display</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;get_gun_energy_drain() ) ) );</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa48161940e933eea5d0b87c30433ef72f">iteminfo_parts::GUN_AIMING_STATS</a> ) ) {</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structaim__type.html">aim_type</a> &amp;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> : player_character.<a class="code" href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">get_aim_types</a>( *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;            <span class="comment">// Nameless and immediate aim levels don&#39;t get an entry.</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a>.<a class="code" href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">empty</a>() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.threshold == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> ) ) {</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;            }</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;            <span class="comment">// For item comparison to work correctly each info object needs a</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;            <span class="comment">// distinct tag per aim type.</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;            <span class="keyword">const</span> std::string tag = <span class="stringliteral">&quot;GUN_&quot;</span> + <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a>;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( tag, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;&quot;</span>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.<a class="code" href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">name</a> ) );</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;            <span class="keywordtype">int</span> max_dispersion = player_character.<a class="code" href="classCharacter.html#a05331bfbde3df1348a870d987597d29a">get_weapon_dispersion</a>( *loaded_mod ).<a class="code" href="classdispersion__sources.html#ac3dc7f13e78a217aeaba57740f3af17c">max</a>();</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;            <span class="keywordtype">int</span> range = <a class="code" href="ranged_8cpp.html#a6b4c3a2a360b378de261413fbb7d84f0">range_with_even_chance_of_good_hit</a>( max_dispersion + <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.threshold );</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( tag, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Even chance of good hit at range: &quot;</span> ),</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, range );</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            <span class="keywordtype">int</span> aim_mv = player_character.<a class="code" href="classCharacter.html#a94f04577f690dc8400ff13aa991cd6ed">gun_engagement_moves</a>( *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>.threshold );</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( tag, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Time to reach aim level: &quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt; moves&quot;</span> ),</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, aim_mv );</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        }</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160; </div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7978badb14e7a32b55e875471196179f">iteminfo_parts::GUN_FIRE_MODES</a> ) ) {</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        std::vector&lt;std::string&gt; fm;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;e : fire_modes ) {</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;            <span class="keywordflow">if</span>( e.second.target == <span class="keyword">this</span> &amp;&amp; !e.second.melee() ) {</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                fm.emplace_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s (%i)&quot;</span>, e.second.tname(), e.second.qty ) );</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;            }</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;        }</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;        <span class="keywordflow">if</span>( !fm.empty() ) {</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUN&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Fire modes&lt;/bold&gt;: &quot;</span> ) + <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( fm ) );</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        }</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    }</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160; </div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacc0f6ba13027bdd335f96daf25b14ef5">iteminfo_parts::GUN_ALLOWED_MAGAZINES</a> ) ) {</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">uses_magazine</a>() ) {</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;            <span class="comment">// Keep this identical with tool magazines in item::tool_info</span></div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;            <span class="keyword">const</span> std::vector&lt;itype_id&gt; compat_sorted = <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">magazine_compatible</a>() );</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;            <span class="keyword">const</span> std::string mag_names = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( compat_sorted,</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;            } );</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160; </div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;            <span class="keyword">const</span> std::set&lt;flag_id&gt; flag_restrictions = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a35e08b506568fb5b4d480422e2e030d2">magazine_flag_restrictions</a>();</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;            <span class="keyword">const</span> std::string flag_names = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( flag_restrictions,</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; e ) {</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;                <span class="keywordflow">return</span> e-&gt;<a class="code" href="classjson__flag.html#a6f1e6f90c7c8cd8b307136ceee121fb1">name</a>();</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;            } );</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160; </div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            std::string <a class="code" href="namespacedisplay.html">display</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Compatible magazines&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;            <span class="keywordflow">if</span>( !compat_sorted.empty() ) {</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                <a class="code" href="namespacedisplay.html">display</a> += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n&lt;bold&gt;Types&lt;/bold&gt;: &quot;</span> ) + mag_names;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;            }</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;            <span class="keywordflow">if</span>( !flag_restrictions.empty() ) {</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                <a class="code" href="namespacedisplay.html">display</a> += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n&lt;bold&gt;Form factors&lt;/bold&gt;: &quot;</span> ) + flag_names;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;            }</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160; </div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="namespacedisplay.html">display</a> );</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        }</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    }</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160; </div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>.valid_mod_locations.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab8fdef243cfde306c9265b61ebf47080">iteminfo_parts::DESCRIPTION_GUN_MODS</a> ) ) {</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160; </div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        std::string mod_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Mods&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160; </div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;        std::map&lt;gunmod_location, int&gt; mod_locations = <a class="code" href="classitem.html#a727917284cddff4dbf0113d1329fec51">get_mod_locations</a>();</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160; </div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;        <span class="keywordtype">int</span> iternum = 0;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;        mod_str += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;const gunmod_location, int&gt; &amp;elem : mod_locations ) {</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            <span class="keywordflow">if</span>( iternum != 0 ) {</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                mod_str += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;            }</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> free_slots = elem.second - <a class="code" href="classitem.html#ad345f0faefeda773220f01b75acb9f28">get_free_mod_locations</a>( elem.first );</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;            mod_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;color_cyan&gt;# &lt;/color&gt;%s:&quot;</span>, elem.first.name() );</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *gmod : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;                <span class="keywordflow">if</span>( gmod-&gt;type-&gt;gunmod-&gt;location == elem.first ) { <span class="comment">// if mod for this location</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;                    mod_str +=</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                        <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;\n    &lt;stat&gt;[&lt;/stat&gt;&lt;color_light_green&gt;● &lt;/color&gt;&lt;stat&gt;%s]&lt;/stat&gt;&quot;</span>,</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                                       gmod-&gt;tname( 1, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                }</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = free_slots + 1 ; i &lt;= elem.second ; i++ ) {</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                <span class="keywordflow">if</span>( i == free_slots + 1 &amp;&amp; i &lt;= elem.second ) {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                    mod_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;\n   &quot;</span> );</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                }</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                mod_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; &lt;color_dark_gray&gt;[-%s-]&lt;/color&gt;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;empty&quot;</span> ) );</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;            }</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;            iternum++;</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;        }</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, mod_str );</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    }</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160; </div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;casings_count() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade426a25931d2a93b8b2377ecd103687">iteminfo_parts::DESCRIPTION_GUN_CASINGS</a> ) ) {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;        std::string tmp = <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Contains &lt;stat&gt;%i&lt;/stat&gt; casing&quot;</span>,</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                                     <span class="stringliteral">&quot;Contains &lt;stat&gt;%i&lt;/stat&gt; casings&quot;</span>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;casings_count() );</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( tmp, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;casings_count() ) );</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    }</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160; </div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a> ) &amp;&amp;</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafa560e15f742e18dd9c9308413882612">iteminfo_parts::DESCRIPTION_TWOHANDED</a> ) ) {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This weapon needs &lt;info&gt;two free hands&lt;/info&gt; to fire.&quot;</span> ) );</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    }</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;}</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160; </div>
<div class="line"><a name="l03542"></a><span class="lineno"><a class="line" href="classitem.html#a0ad233b27797b39be495f7713e9ec6c0"> 3542</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a0ad233b27797b39be495f7713e9ec6c0">item::gunmod_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/* batch */</span>,</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                        <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    }</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__gunmod.html">islot_gunmod</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a>;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160; </div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc97189dd338a4574eb8cb260b8364b2">iteminfo_parts::DESCRIPTION_GUNMOD</a> ) ) {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This mod &lt;info&gt;must be attached to a gun&lt;/info&gt;, &quot;</span></div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                              <span class="stringliteral">&quot;it can not be fired separately.&quot;</span> ) );</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    }</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff44f29fcfbf562378921b15c7b62214">iteminfo_parts::DESCRIPTION_GUNMOD_REACH</a> ) ) {</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;When attached to a gun, &lt;good&gt;allows&lt;/good&gt; making &quot;</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;                              <span class="stringliteral">&quot;&lt;info&gt;reach melee attacks&lt;/info&gt; with it.&quot;</span> ) );</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;    }</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160; </div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3bd057608cf14b681c32b1cef61d7b3d">flag_DISABLE_SIGHTS</a> ) &amp;&amp;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4087f2afe0ce4e0ac1deb457321cc3a2">iteminfo_parts::DESCRIPTION_GUNMOD_DISABLESSIGHTS</a> ) ) {</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This mod &lt;bad&gt;obscures sights&lt;/bad&gt; of the &quot;</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;                              <span class="stringliteral">&quot;base weapon.&quot;</span> ) );</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    }</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3bcbf7092a1bea453e53428f8bc5881f">flag_CONSUMABLE</a> ) &amp;&amp;</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad1c2acf6fd6e337cb1de996a8e264a80">iteminfo_parts::DESCRIPTION_GUNMOD_CONSUMABLE</a> ) ) {</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This mod might &lt;bad&gt;suffer wear&lt;/bad&gt; when firing &quot;</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;                              <span class="stringliteral">&quot;the base weapon.&quot;</span> ) );</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    }</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.dispersion != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0900665dd96e1f42ee85cfedc4289cd9">iteminfo_parts::GUNMOD_DISPERSION</a> ) ) {</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dispersion modifier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>,</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.dispersion );</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;    }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.sight_dispersion != -1 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa06c04c2e1ad34f82cf09e10bff068b57">iteminfo_parts::GUNMOD_DISPERSION_SIGHT</a> ) ) {</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sight dispersion: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.sight_dispersion );</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;    }</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.field_of_view &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5615faa78d7a8dc50ce95a14429c22b2">iteminfo_parts::GUNMOD_FIELD_OF_VIEW</a> ) ) {</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.field_of_view &gt;= <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> ) {</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Field of view: &lt;good&gt;No limit&lt;/good&gt;&quot;</span> ) );</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Field of view: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.field_of_view );</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        }</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    }</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.field_of_view &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa64e9486987d038b896593666ea873e60">iteminfo_parts::GUNMOD_AIM_SPEED_MODIFIER</a> ) ) {</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Aim speed modifier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.aim_speed_modifier );</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    }</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <span class="keywordtype">int</span> total_damage = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.damage.total_damage() );</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="keywordflow">if</span>( total_damage != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0589989590a223dd4c620484f6a6ab5d">iteminfo_parts::GUNMOD_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>,</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                           total_damage );</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    }</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    <span class="keywordtype">int</span> pierce = <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaba9e4ebccb5c1d0c86f74b485aef1a11">iteminfo_parts::GUNMOD_ARMORPIERCE</a> ) ) {</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Armor-pierce: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>,</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                           pierce );</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    }</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.range != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23d8a241f0e32fd9929daac4d49ef340">iteminfo_parts::GUNMOD_RANGE</a> ) ) {</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.range );</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    }</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.range_multiplier != 1.0f &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa26563106819030fc129bd25776f4bd9a">iteminfo_parts::GUNMOD_RANGE_MULTIPLIER</a> ) ) {</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range Multiplier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.range_multiplier );</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    }</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.handling != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae0582478e0939db9658c75609f93395a">iteminfo_parts::GUNMOD_HANDLING</a> ) ) {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Handling modifier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.handling );</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;    }</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.loudness != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa9cc0e872cc4847d3b48be6bd9e79554">iteminfo_parts::GUNMOD_LOUDNESS_MODIFIER</a> ) ) {</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Loudness modifier: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>,</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.loudness );</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    }</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;ammo_modifier.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc47330fd0111d3045c4f72fd8d7bcc2">iteminfo_parts::GUNMOD_AMMO</a> ) ) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;ammo_modifier ) {</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ammo: &lt;stat&gt;%s&lt;/stat&gt;&quot;</span> ),</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                               at-&gt;<a class="code" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">name</a>() ) );</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;        }</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;    }</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.reload_modifier != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6cd1da54ade64f53c7b7cbfacab49ed2">iteminfo_parts::GUNMOD_RELOAD</a> ) ) {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload modifier: &quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;num&gt;%&quot;</span> ),</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.reload_modifier );</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    }</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.min_str_required_mod &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaddc94a8ab77ad873422caa16ceeabd96">iteminfo_parts::GUNMOD_STRENGTH</a> ) ) {</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Minimum strength required modifier: &quot;</span> ),</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                           <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.min_str_required_mod );</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    }</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.add_mod.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa4d9a9d6597a0dbc66433c9ca051413b">iteminfo_parts::GUNMOD_ADD_MOD</a> ) ) {</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;        std::string mod_loc_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Adds mod locations: &lt;/bold&gt; &quot;</span> );</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160; </div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        std::map&lt;gunmod_location, int&gt; mod_locations = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.add_mod;</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        <span class="keywordtype">int</span> iternum = 0;</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        <span class="keywordflow">for</span>( std::pair&lt;const gunmod_location, int&gt; &amp;elem : mod_locations ) {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            <span class="keywordflow">if</span>( iternum != 0 ) {</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                mod_loc_str += <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;            }</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;            mod_loc_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt; %s&quot;</span>, elem.second, elem.first.name() );</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            iternum++;</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;        }</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        mod_loc_str += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, mod_loc_str );</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    }</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160; </div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa68367ada6561c3d16a3445277703e8a3">iteminfo_parts::GUNMOD_USEDON</a> ) ) {</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        std::set&lt;std::string&gt; used_on_translated; <span class="comment">// uses set to prune duplicates</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classgun__type__type.html">gun_type_type</a> &amp;gtt : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.usable ) {</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            used_on_translated.emplace( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;&quot;</span>, gtt.<a class="code" href="classgun__type__type.html#a2a3d83b1e6d5401701c23d783d3168a0">name</a>() ) );</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;        }</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Used on: &quot;</span> ) + <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( used_on_translated ) );</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    }</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160; </div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa35d582a771a2eb1e3b971ecda7ae6d84">iteminfo_parts::GUNMOD_LOCATION</a> ) ) {</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Location: %s&quot;</span> ), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.location.name() ) );</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    }</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160; </div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.blacklist_slot.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaecd965c9acf656475c6d46511fec0488">iteminfo_parts::GUNMOD_BLACKLIST_SLOT</a> ) ) {</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        std::string mod_black_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Incompatible with gunmods: &lt;/bold&gt; &quot;</span> );</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="keywordtype">int</span> iternum = 0;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classgunmod__location.html">gunmod_location</a> &amp;<a class="code" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5">black</a> : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.blacklist_slot ) {</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;            <span class="keywordflow">if</span>( iternum != 0 ) {</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;                mod_black_str += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;            }</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            mod_black_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s&quot;</span>, ( <a class="code" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5">black</a>.name() ) );</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            iternum++;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        }</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        mod_black_str += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, mod_black_str );</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    }</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.blacklist_mod.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa70eb37b2dee60ddc859aa633437f52f3">iteminfo_parts::GUNMOD_BLACKLIST_MOD</a> ) ) {</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        std::string mod_black_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Incompatible with slots: &lt;/bold&gt; &quot;</span> );</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160; </div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        <span class="keywordtype">int</span> iternum = 0;</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5">black</a> : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.blacklist_mod ) {</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            <span class="keywordflow">if</span>( iternum != 0 ) {</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                mod_black_str += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;            }</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;            mod_black_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s&quot;</span>, ( <a class="code" href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5">black</a>-&gt;nname( 1 ) ) );</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;            iternum++;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;        }</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        mod_black_str += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;GUNMOD&quot;</span>, mod_black_str );</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    }</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;}</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03700"></a><span class="lineno"><a class="line" href="item_8cpp.html#a421c7142796da54f1b8a19d369170a39"> 3700</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#a421c7142796da54f1b8a19d369170a39">armor_encumb_header_info</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, std::vector&lt;iteminfo&gt; &amp;info )</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;{</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    std::string format;</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> sizing_matters = it.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( player_character ) != <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a>;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160; </div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;    <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;        format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;info&gt;(fits)&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) &amp;&amp; sizing_matters ) {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;bad&gt;(poor fit)&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    }</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <span class="keywordflow">if</span>( sizing_matters ) {</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60a">item::sizing</a> sizing_level = it.<a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( player_character );</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        <span class="comment">//If we have the wrong size, we do not fit so alert the player</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;        <span class="keywordflow">if</span>( sizing_level == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">item::sizing::human_sized_small_char</a> ) {</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;bad&gt;(too big)&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sizing_level == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">item::sizing::big_sized_small_char</a> ) {</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;bad&gt;(huge!)&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sizing_level == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">item::sizing::small_sized_human_char</a> ||</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;                   sizing_level == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">item::sizing::human_sized_big_char</a> ) {</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;bad&gt;(too small)&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sizing_level == <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">item::sizing::small_sized_big_char</a> ) {</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            format = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;bad&gt;(tiny!)&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        }</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    }</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <span class="keywordflow">if</span>( format.empty() ) {</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    }</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160; </div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="comment">//~ The size or fit of an article of clothing (fits / poor fit)</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    info.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Size/Fit&lt;/bold&gt;:&quot;</span> ) + format );</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;}</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"><a class="line" href="classitem.html#ac4e99595add1c21e6294a22829174f0b"> 3734</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac4e99595add1c21e6294a22829174f0b">item::armor_full_protection_info</a>( std::vector&lt;iteminfo&gt; &amp;info,</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts )<span class="keyword"> const</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    <span class="keywordtype">bool</span> divider_needed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160; </div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>() ) {</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;        <span class="keywordflow">if</span>( t-&gt;data.empty() ) {</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;        }</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;p : t-&gt;sub_data ) {</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;            <span class="keywordflow">if</span>( divider_needed ) {</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;                <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;            }</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;            std::vector&lt;sub_bodypart_id&gt; covered( p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.size() );</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;            std::transform( p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.begin(), p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.end(),</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;            covered.begin(), []( <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> ) {</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;                return a.id();</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;            } );</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( covered );</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;            std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Protection for&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;            }</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;            <span class="comment">// the following function need one representative sub limb from which to query data</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            <a class="code" href="classitem.html#a351d64ea176e3c74ce6ea132740bf5f1">armor_material_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, 0, <span class="keyword">false</span>, *p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.begin() );</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            <a class="code" href="classitem.html#a36a7af141da0dcabe5ab34223ff4e2ff">armor_attribute_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, 0, <span class="keyword">false</span>, *p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.begin() );</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;            <a class="code" href="classitem.html#a0c4776d50b09c80de894e61e06742995">armor_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, 0, <span class="keyword">false</span>, *p.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.begin() );</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;            divider_needed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;        }</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a53001758768062a7756a6d5b5cd91789">flag_IS_ARMOR</a> ) ) {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;        <span class="keywordflow">if</span>( divider_needed ) {</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;        }</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        <span class="comment">//right now all eligible gunmods (shoulder_strap, belt_clip) have the is_armor flag and use the torso</span></div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Torso:&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="classitem.html#afeaaf502a3517e5359409ca0b9f658ad">get_avg_encumber</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>() ) );</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160; </div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;        <span class="comment">//~ Limb-specific coverage (for guns strapped to torso)</span></div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Torso coverage&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;        <span class="comment">//~ Regular/Default coverage</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Default:&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() ) );</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        <span class="comment">//~ Melee coverage</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Melee:&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>(), <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">cover_type::COVER_MELEE</a> ) );</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        <span class="comment">//~ Ranged coverage</span></div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ranged:&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>(), <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">cover_type::COVER_RANGED</a> ) );</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        <span class="comment">//~ Vitals coverage</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Vitals:&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>(), <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">cover_type::COVER_VITALS</a> ) );</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    }</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160; </div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;}</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160; </div>
<div class="line"><a name="l03797"></a><span class="lineno"><a class="line" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b"> 3797</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a>( <span class="keywordtype">int</span> dmg, std::vector&lt;iteminfo&gt; &amp;info )</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;{</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <span class="keywordflow">if</span>( dmg &gt; 0 ) {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        info.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection values are &lt;bad&gt;reduced by damage&lt;/bad&gt; and &quot;</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;                                       <span class="stringliteral">&quot;you may be able to &lt;info&gt;improve them by repairing this &quot;</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                                       <span class="stringliteral">&quot;item&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    }</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;}</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160; </div>
<div class="line"><a name="l03806"></a><span class="lineno"><a class="line" href="classitem.html#a0c4776d50b09c80de894e61e06742995"> 3806</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a0c4776d50b09c80de894e61e06742995">item::armor_protection_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;                                  <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span>, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; !<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    }</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160; </div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a> ) ) {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        std::string bp_cat = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;ARMOR&quot;</span> );</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        std::string layering;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160; </div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;        <span class="comment">// get the layers this bit of the armor covers if its unique compared to the rest of the armor</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;ll : <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>( sbp ) ) {</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;            <span class="keywordflow">switch</span>( ll ) {</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">layer_level::PERSONAL</a>:</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Personal aura&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075">layer_level::SKINTIGHT</a>:</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Close to skin&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">layer_level::NORMAL</a>:</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Normal&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b">layer_level::WAIST</a>:</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Waist&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f">layer_level::OUTER</a>:</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Outer&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a>:</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Strapped&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78">layer_level::AURA</a>:</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;stat&gt;Outer aura&lt;/stat&gt;.&quot;</span> );</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                    layering += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; Should never see this.&quot;</span> );</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;            }</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        }</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        <span class="comment">//~ Limb-specific coverage (%s = name of limb)</span></div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Coverage&lt;/bold&gt;:%s&quot;</span> ), layering ) );</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="comment">//~ Regular/Default coverage</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Default:&quot;</span> ), <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp ) );</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp ) != <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">item::cover_type::COVER_MELEE</a> ) ) {</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;            <span class="comment">//~ Melee coverage</span></div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Melee:&quot;</span> ), <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">item::cover_type::COVER_MELEE</a> ) );</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        }</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp ) != <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">item::cover_type::COVER_RANGED</a> ) ) {</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;            <span class="comment">//~ Ranged coverage</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ranged:&quot;</span> ), <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">item::cover_type::COVER_RANGED</a> ) );</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;        }</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">item::cover_type::COVER_VITALS</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;            <span class="comment">//~ Vitals coverage</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Vitals:&quot;</span> ), <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sbp, <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">item::cover_type::COVER_VITALS</a> ) );</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        }</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160; </div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        <span class="keywordtype">bool</span> printed_any = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160; </div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        <span class="comment">// gather all the protection data</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;        <span class="comment">// the rolls are basically a perfect hit for protection and a</span></div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        <span class="comment">// worst possible</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;        <a class="code" href="structresistances.html">resistances</a> worst_res = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, 99, sbp );</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        <a class="code" href="structresistances.html">resistances</a> best_res = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, 0, sbp );</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;        <a class="code" href="structresistances.html">resistances</a> median_res = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, 50, sbp );</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160; </div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        <span class="keywordtype">int</span> percent_best = 100;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        <span class="keywordtype">int</span> percent_worst = 0;</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( sbp );</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="comment">// if there isn&#39;t a portion this is probably pet armor</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        <span class="keywordflow">if</span>( portion ) {</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;            percent_best = portion-&gt;<a class="code" href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">best_protection_chance</a>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;            percent_worst = portion-&gt;<a class="code" href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">worst_protection_chance</a>;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;        }</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160; </div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        <span class="keywordtype">bool</span> display_median = percent_best &lt; 50 &amp;&amp; percent_worst &lt; 50;</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160; </div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;        <span class="keywordflow">if</span>( display_median ) {</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;: &lt;bad&gt;%d%%&lt;/bad&gt;, &lt;color_c_yellow&gt;Median&lt;/color&gt;, &lt;good&gt;%d%%&lt;/good&gt;&quot;</span>,</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;                                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection&quot;</span> ), percent_worst, percent_best ) );</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_worst &gt; 0 ) {</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;: &lt;bad&gt;%d%%&lt;/bad&gt;, &lt;good&gt;%d%%&lt;/good&gt;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection&quot;</span> ),</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                                              percent_worst, percent_best ) );</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;:&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection&quot;</span> ) ) );</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        }</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160; </div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__info__order.html">damage_info_order</a> &amp;dio : <a class="code" href="structdamage__info__order.html#af833d28c6a767a77ad046a57366d749f">damage_info_order::get_all</a>(</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                 <a class="code" href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fa987a70821eb884ca13ccdf425fde0b14">damage_info_order::info_type::PROT</a> ) ) {</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;            <span class="keywordflow">if</span>( best_res.<a class="code" href="structresistances.html#a2360b00d9d46ab595d0ca46429c056e6">resist_vals</a>.count( dio.dmg_type ) &lt;= 0 ||</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;                best_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ) &lt; 1.0f ) {</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;            }</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;            <span class="keywordtype">bool</span> skipped_detailed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;            <span class="keywordflow">if</span>( dio.info_display == <a class="code" href="structdamage__info__order.html#abcd148754833299b0e047090ca6aa171abd990d94a212daf00c8198366850fcbe">damage_info_order::info_disp::DETAILED</a> ) {</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;                <span class="keywordflow">if</span>( display_median ) {</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat,</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;                                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s:  &lt;bad&gt;%.2f&lt;/bad&gt;, &lt;color_c_yellow&gt;%.2f&lt;/color&gt;, &lt;good&gt;%.2f&lt;/good&gt;&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;                                                      <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.dmg_type-&gt;name.translated() ), worst_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ),</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;                                                      median_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ), best_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ) ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                                       <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;                    printed_any = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_worst &gt; 0 ) {</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s:  &lt;bad&gt;%.2f&lt;/bad&gt;, &lt;good&gt;%.2f&lt;/good&gt;&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                                       <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.dmg_type-&gt;name.translated() ),</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                                       worst_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ), best_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ) ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;                                       <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;                    printed_any = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;                    skipped_detailed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;                }</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            }</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            <span class="keywordflow">if</span>( skipped_detailed || dio.info_display == <a class="code" href="structdamage__info__order.html#abcd148754833299b0e047090ca6aa171ae4ac03f6c9f00665644e868dd1fb9f1e">damage_info_order::info_disp::BASIC</a> ) {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s: &quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                                   <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.dmg_type-&gt;name.translated() ) ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>, best_res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( dio.dmg_type ) );</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;                printed_any = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;            }</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;        }</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d">get_base_env_resist</a>( *<span class="keyword">this</span> ) &gt;= 1 ) {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Environmental: &quot;</span> ) ),</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;                               <a class="code" href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d">get_base_env_resist</a>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;            printed_any = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;        }</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;        <span class="comment">// if we haven&#39;t printed any armor data acknowledge that</span></div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        <span class="keywordflow">if</span>( !printed_any ) {</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Negligible Protection&quot;</span> ) ) );</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;        }</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;GASMASK&quot;</span> ) || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;DIVE_TANK&quot;</span> ) ) {</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;:&quot;</span>,</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection when active&quot;</span> ) ) );</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Acid: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                               <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a>( <a class="code" href="item_8cpp.html#acc343fa0f8e04fd5007e8abc6105f8a8">damage_acid</a>, <span class="keyword">false</span>, sbp, <a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">get_base_env_resist_w_filter</a>() ) );</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fire: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                               <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a>( <a class="code" href="item_8cpp.html#ae01ac1ba15b1a58809aef8bc1f735b5b">damage_heat</a>, <span class="keyword">false</span>, sbp, <a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">get_base_env_resist_w_filter</a>() ) );</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Environmental: &quot;</span> ),</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;                               <a class="code" href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95">get_env_resist</a>( <a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">get_base_env_resist_w_filter</a>() ) );</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;        }</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160; </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        <span class="keywordflow">if</span>( sbp == <a class="code" href="subbodypart_8h.html#afe416be1d7ca88687ead27c9ef9ffb82">sub_bodypart_id</a>() &amp;&amp; <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;            <a class="code" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>(), <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        }</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    }</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;}</div>
<div class="line"><a name="l03959"></a><span class="lineno"><a class="line" href="classitem.html#a351d64ea176e3c74ce6ea132740bf5f1"> 3959</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a351d64ea176e3c74ce6ea132740bf5f1">item::armor_material_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                                <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span>, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; !<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    }</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160; </div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9ed695b93399bca71885d0c5c3533aff">iteminfo_parts::ARMOR_MATERIALS</a> ) ) {</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;        <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        std::string bp_cat = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;ARMOR&quot;</span> );</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;        std::string materials_list;</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;        std::string units_info = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;length unit: milimeter&quot;</span>, <span class="stringliteral">&quot;mm&quot;</span> );</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> *mat : <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">armor_made_of</a>( sbp ) ) {</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;            materials_list.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;  %s %.2f%s (%d%%).&quot;</span>, mat-&gt;id-&gt;name(), mat-&gt;thickness,</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                                                  units_info, mat-&gt;cover ) );</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;        }</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160; </div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Materials&lt;/bold&gt;:&quot;</span> ),</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;                           materials_list ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;    }</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;}</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160; </div>
<div class="line"><a name="l03983"></a><span class="lineno"><a class="line" href="classitem.html#a36a7af141da0dcabe5ab34223ff4e2ff"> 3983</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a36a7af141da0dcabe5ab34223ff4e2ff">item::armor_attribute_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;                                 <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span>, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; !<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;    }</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160; </div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6f6107c063610b35a62796befffd6dbf">iteminfo_parts::ARMOR_ADDITIONAL_INFO</a> ) ) {</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;        <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        std::string bp_cat = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;ARMOR&quot;</span> );</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160; </div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;        <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion_data = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( sbp ) ) {</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            <span class="keywordflow">if</span>( portion_data-&gt;rigid_layer_only ) {</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( bp_cat, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;Rigid items only conflict on shared layers&lt;/info&gt;&quot;</span> ),</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                                   <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a> );</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            }</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        }</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    }</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;}</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160; </div>
<div class="line"><a name="l04004"></a><span class="lineno"><a class="line" href="classitem.html#a7905983b6a499f90dec87250ed395acf"> 4004</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a7905983b6a499f90dec87250ed395acf">item::pet_armor_protection_info</a>( std::vector&lt;iteminfo&gt; &amp;info,</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts )<span class="keyword"> const</span></div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    }</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160; </div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a> ) ) {</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160; </div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Protection&lt;/bold&gt;:&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160; </div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__info__order.html">damage_info_order</a> &amp;dio : <a class="code" href="structdamage__info__order.html#af833d28c6a767a77ad046a57366d749f">damage_info_order::get_all</a>(</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                 <a class="code" href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fac52e47040347f6f55900e8318909b3c5">damage_info_order::info_type::PET</a> ) ) {</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s: &quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                               <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.dmg_type-&gt;name.translated() ) ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>, <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a>( dio.dmg_type ) );</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;        }</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160; </div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Environmental: &quot;</span> ),</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;                           <a class="code" href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d">get_base_env_resist</a>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160; </div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>,</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Protection values are &lt;bad&gt;reduced by damage&lt;/bad&gt; and &quot;</span></div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                                  <span class="stringliteral">&quot;you may be able to &lt;info&gt;improve them by repairing this &quot;</span></div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                                  <span class="stringliteral">&quot;item&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;        }</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    }</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;}</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160; </div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="comment">// simple struct used for organizing encumberance in an ordered set</span></div>
<div class="line"><a name="l04036"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html"> 4036</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structarmor__encumb__data.html">armor_encumb_data</a> {</div>
<div class="line"><a name="l04037"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6"> 4037</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">encumb</a>;</div>
<div class="line"><a name="l04038"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html#a49aabc36c526ef49db46d768ed5987d4"> 4038</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structarmor__encumb__data.html#a49aabc36c526ef49db46d768ed5987d4">encumb_max</a>;</div>
<div class="line"><a name="l04039"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html#a11a58acbcda685d67a069b512a35ca54"> 4039</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structarmor__encumb__data.html#a11a58acbcda685d67a069b512a35ca54">encumb_min</a>;</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160; </div>
<div class="line"><a name="l04041"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html#a6bf72773db835afce0883fd837366244"> 4041</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structarmor__encumb__data.html#a6bf72773db835afce0883fd837366244">operator==</a>( <span class="keyword">const</span> <a class="code" href="structarmor__encumb__data.html">armor_encumb_data</a> &amp;<a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> )<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">encumb</a> == <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>.encumb &amp;&amp;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;               <a class="code" href="structarmor__encumb__data.html#a11a58acbcda685d67a069b512a35ca54">encumb_min</a> == <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>.encumb_min &amp;&amp;</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;               <a class="code" href="structarmor__encumb__data.html#a49aabc36c526ef49db46d768ed5987d4">encumb_max</a> == <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>.encumb_max;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    }</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160; </div>
<div class="line"><a name="l04047"></a><span class="lineno"><a class="line" href="structarmor__encumb__data.html#a5c0874cd95046ba3cc57c17be0fc33a0"> 4047</a></span>&#160;    <a class="code" href="structarmor__encumb__data.html#a5c0874cd95046ba3cc57c17be0fc33a0">armor_encumb_data</a>( <span class="keywordtype">int</span> in_encumb_min, <span class="keywordtype">int</span> in_encumb, <span class="keywordtype">int</span> in_encumb_max ) {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;        <a class="code" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">encumb</a> = in_encumb;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;        <a class="code" href="structarmor__encumb__data.html#a11a58acbcda685d67a069b512a35ca54">encumb_min</a> = in_encumb_min;</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;        <a class="code" href="structarmor__encumb__data.html#a49aabc36c526ef49db46d768ed5987d4">encumb_max</a> = in_encumb_max;</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;    }</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;};</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160; </div>
<div class="line"><a name="l04054"></a><span class="lineno"><a class="line" href="item_8cpp.html#af1d92921df5b51c49b4339d821ccc7a3"> 4054</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#af1d92921df5b51c49b4339d821ccc7a3">operator&lt;</a>( <span class="keyword">const</span> <a class="code" href="structarmor__encumb__data.html">armor_encumb_data</a> &amp;lhs, <span class="keyword">const</span> <a class="code" href="structarmor__encumb__data.html">armor_encumb_data</a> &amp;rhs )</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;{</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;    <span class="keywordflow">return</span> lhs.<a class="code" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">encumb</a> &lt; rhs.<a class="code" href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">encumb</a>;</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;}</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160; </div>
<div class="line"><a name="l04059"></a><span class="lineno"><a class="line" href="classitem.html#ac77c48d5e9c233b89f29a0aa9c68b9e7"> 4059</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ac77c48d5e9c233b89f29a0aa9c68b9e7">item::armor_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch,</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;                       <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() ) {</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    }</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160; </div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <a class="code" href="classbody__part__set.html">body_part_set</a> covered_parts = <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>();</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <span class="keywordtype">bool</span> covers_anything = covered_parts.<a class="code" href="classbody__part__set.html#ab73d8c38feeabf0f9ab423fec3ebc834">any</a>();</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_bodygraph = get_option&lt;bool&gt;( <span class="stringliteral">&quot;ITEM_BODYGRAPH&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                                parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa10f8d133cc6fc9369c17060fb690b1b9">iteminfo_parts::ARMOR_BODYGRAPH</a> );</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160; </div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3d1d4eabca63b8b7c6102dbe638425cc">iteminfo_parts::ARMOR_BODYPARTS</a> ) ) {</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        std::vector&lt;sub_bodypart_id&gt; covered = <a class="code" href="classitem.html#adeee506a678ad91ac6c07e77296e7325">get_covered_sub_body_parts</a>();</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;        std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Covers&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160; </div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;        <span class="keywordflow">if</span>( !covered.empty() ) {</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( covered );</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            }</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;        }</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160; </div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        <span class="keywordflow">if</span>( !covers_anything ) {</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;            coverage += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;info&gt;Nothing&lt;/info&gt;.&quot;</span> );</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;        }</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160; </div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    }</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160; </div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae7d00106a8c2dced27fe9db2474a89be">iteminfo_parts::ARMOR_RIGIDITY</a> ) &amp;&amp; ( <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a>() || <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) ) {</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;        <span class="comment">// if the item has no armor data it doesn&#39;t cover that part</span></div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;        <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;        <span class="keywordflow">if</span>( armor != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;            <span class="keywordflow">if</span>( armor-&gt;<a class="code" href="structislot__armor.html#a831be734e376a8631d48eb028d116c76">rigid</a> ) {</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;This armor is rigid&lt;/bold&gt;&quot;</span> );</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;                <span class="comment">// only some parts are rigid</span></div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;                std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Rigid Locations&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;                std::set&lt;sub_bodypart_id&gt; covered;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;                <span class="comment">// if ablative check if there are hard plates in locations</span></div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;                <span class="keywordflow">if</span>( armor-&gt;<a class="code" href="structislot__armor.html#aab35b43e855613f4b94d4e86f01d145c">ablative</a> ) {</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;                    <span class="comment">// if item has ablative armor we should check those too.</span></div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>() ) {</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;                        <span class="comment">// if the pocket is ablative and not empty we should use its values</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                        <span class="keywordflow">if</span>( pocket-&gt;get_pocket_data()-&gt;ablative &amp;&amp; !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;                            <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : ablative_armor.<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>()-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                                <span class="keywordflow">if</span>( entry.rigid ) {</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;                                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : entry.sub_coverage ) {</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;                                        covered.emplace( sbp );</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;                                    }</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;                                }</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;                            }</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                        }</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;                    }</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;                }</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                    <span class="keywordflow">if</span>( entry.<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a> ) {</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : entry.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                            covered.emplace( sbp );</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                        }</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;                    }</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;                }</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160; </div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;                <span class="keywordflow">if</span>( !covered.empty() ) {</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;                    std::vector&lt;sub_bodypart_id&gt; covered_vec( covered.begin(), covered.end() );</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;                    std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( covered_vec );</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;                        coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;                    }</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;                }</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;            }</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;        }</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    }</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160; </div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae7d00106a8c2dced27fe9db2474a89be">iteminfo_parts::ARMOR_RIGIDITY</a> ) &amp;&amp; <a class="code" href="classitem.html#a291b3aa036d6f1867b079950faefbc74">is_comfortable</a>() ) {</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;        <span class="comment">// if the item has no armor data it doesn&#39;t cover that part</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;        <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;        <span class="keywordflow">if</span>( armor != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;            <span class="keywordflow">if</span>( armor-&gt;<a class="code" href="structislot__armor.html#aa80ca308d08bf529c3a2c602819fc431">comfortable</a> ) {</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;                std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;This armor is comfortable&lt;/bold&gt;&quot;</span> );</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                <span class="comment">// only some parts are comfortable</span></div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                std::string coverage = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Comfortable Locations&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                std::vector&lt;sub_bodypart_id&gt; covered;</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                    <span class="keywordflow">if</span>( entry.<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a> ) {</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : entry.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                            covered.emplace_back( sbp );</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;                        }</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;                    }</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                }</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                <span class="keywordflow">if</span>( !covered.empty() ) {</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;                    std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( covered );</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                        coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;                    }</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, coverage );</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;                }</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;            }</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;        }</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    }</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160; </div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9cc36647cacaabd70c736b2dc5021807">iteminfo_parts::ARMOR_COVERAGE</a> ) &amp;&amp; covers_anything ) {</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        std::map&lt;int, std::vector&lt;bodypart_id&gt;&gt; limb_groups;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>() ) {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;            <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;            <span class="keywordflow">if</span>( portion ) {</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                limb_groups[portion-&gt;<a class="code" href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">coverage</a>].emplace_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;            }</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;        }</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;        <span class="comment">// keep on one line if only 1 entry</span></div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        <span class="keywordflow">if</span>( limb_groups.size() == 1 ) {</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Total Coverage&lt;/bold&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Total Coverage&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;        }</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160; </div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;entry : limb_groups ) {</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( entry.second );</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;            std::string coverage;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;            }</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;  &lt;num&gt;%%:%s&quot;</span>, coverage ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;                               entry.first );</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        }</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    }</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160; </div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa057c55297103ac35d60509c54620e6e1">iteminfo_parts::ARMOR_ENCUMBRANCE</a> ) &amp;&amp; covers_anything ) {</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;        std::map&lt;armor_encumb_data, std::vector&lt;bodypart_id&gt;&gt; limb_groups;</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160; </div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;        <a class="code" href="item_8cpp.html#a421c7142796da54f1b8a19d369170a39">armor_encumb_header_info</a>( *<span class="keyword">this</span>, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>() ) {</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            <a class="code" href="structarmor__encumb__data.html">armor_encumb_data</a> encumbrance( <a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">get_encumber</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36aba8ec6c1d4c689a9d653e1b9da324ce4">item::encumber_flags::assume_empty</a> ),</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                                           <a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">get_encumber</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ), <a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">get_encumber</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36a858e3134c711ff26c7fc1b99dbcd8607">item::encumber_flags::assume_full</a> ) );</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160; </div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;            limb_groups[encumbrance].emplace_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;        }</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;        <span class="comment">// keep on one line if only 1 entry</span></div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;        <span class="keywordflow">if</span>( limb_groups.size() == 1 ) {</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Encumbrance&lt;/bold&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Encumbrance&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;        }</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;entry : limb_groups ) {</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( entry.second );</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;            std::string coverage;</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            std::string encumbrance_info;</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;            }</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160; </div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;            <span class="comment">//encumbrance_info = string_format( &quot;%d&quot;, entry.first.encumb );</span></div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160; </div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;            <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;                               entry.first.encumb );</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160; </div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;            <span class="comment">// if it has a max value</span></div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;            <span class="keywordflow">if</span>( entry.first.encumb != entry.first.encumb_max ) {</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;                std::string when_full_message = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;, When full&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>;</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, when_full_message, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;                                   entry.first.encumb_max );</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;            }</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160; </div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;            <span class="comment">// if it has a min value</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            <span class="keywordflow">if</span>( entry.first.encumb != entry.first.encumb_min ) {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                std::string when_empty_message = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;, When empty&quot;</span> ) + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, when_empty_message, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, entry.first.encumb_min );</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;            }</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;:%s&quot;</span>, coverage ) );</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;        }</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    }</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160; </div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa43a9ade55f151d022d902d69e31507b7">iteminfo_parts::ARMOR_WARMTH</a> ) &amp;&amp; covers_anything ) {</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        <span class="comment">// TODO: Make this less inflexible on anatomy</span></div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;        std::map&lt;int, std::vector&lt;bodypart_id&gt;&gt; limb_groups;</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>() ) {</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            limb_groups[<a class="code" href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854">get_warmth</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )].emplace_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;        }</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;        <span class="comment">// keep on one line if only 1 entry</span></div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;        <span class="keywordflow">if</span>( limb_groups.size() == 1 ) {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Warmth&lt;/bold&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Warmth&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;        }</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;entry : limb_groups ) {</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( entry.second );</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;            std::string coverage;</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;            }</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;  &lt;num&gt;:%s&quot;</span>, coverage ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;                               entry.first );</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;        }</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    }</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160; </div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa53c3ce10a18ab7d07a3d00ba4868718">iteminfo_parts::ARMOR_BREATHABILITY</a> ) &amp;&amp; covers_anything ) {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160; </div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;        std::map&lt;int, std::vector&lt;bodypart_id&gt;&gt; limb_groups;</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>() ) {</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;            <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;            <span class="keywordflow">if</span>( portion ) {</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;                limb_groups[portion-&gt;<a class="code" href="structarmor__portion__data.html#aaf42a2c3d471eaf19bd53d22003b4bf9">breathability</a>].emplace_back( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;            }</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;        }</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;        <span class="comment">// keep on one line if only 1 entry</span></div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;        <span class="keywordflow">if</span>( limb_groups.size() == 1 ) {</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Breathability&lt;/bold&gt;&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Breathability&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;        }</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;entry : limb_groups ) {</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;            std::set&lt;translation, localized_comparator&gt; to_print = <a class="code" href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a>( entry.second );</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;            std::string coverage;</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;entry : to_print ) {</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                coverage += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; The &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ), entry );</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;            }</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;  &lt;num&gt;%%:%s&quot;</span>, coverage ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;                               entry.first );</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;        }</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    }</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160; </div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160; </div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;    <span class="keywordflow">if</span>( covers_anything ) {</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160; </div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() == <a class="code" href="item_8cpp.html#a0c2ffb782502d4509c0a854a315dfdeb">itype_rm13_armor</a> ) {</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;            <a class="code" href="classitem.html">item</a> tmp = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;            <span class="comment">//no need to clutter the ui with inactive versions when the armor is already active</span></div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;            <span class="keywordflow">if</span>( !( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> || ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw &gt; 0_W ) ) ) {</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;                <span class="keywordtype">bool</span> print_prot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;                <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a> ) ) {</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;                    print_prot = !tmp.<a class="code" href="classitem.html#ac4e99595add1c21e6294a22829174f0b">armor_full_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts );</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;                }</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;                <span class="keywordflow">if</span>( print_prot ) {</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;                    tmp.<a class="code" href="classitem.html#a0c4776d50b09c80de894e61e06742995">armor_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;                }</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;                <a class="code" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a>( tmp.<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>(), <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;                <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;When active&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;                tmp = tmp.<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( tmp.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot;_on&quot;</span> ) );</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;            }</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160; </div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;            <span class="keywordtype">bool</span> print_prot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a> ) ) {</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;                print_prot = !tmp.<a class="code" href="classitem.html#ac4e99595add1c21e6294a22829174f0b">armor_full_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts );</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;            }</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;            <span class="keywordflow">if</span>( print_prot ) {</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;                tmp.<a class="code" href="classitem.html#a0c4776d50b09c80de894e61e06742995">armor_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;            }</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;            <a class="code" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a>( tmp.<a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>(), <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;            <span class="keywordtype">bool</span> print_prot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a> ) ) {</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;                print_prot = !<a class="code" href="classitem.html#ac4e99595add1c21e6294a22829174f0b">armor_full_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts );</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;            }</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;            <span class="keywordflow">if</span>( print_prot ) {</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;                <a class="code" href="classitem.html#a0c4776d50b09c80de894e61e06742995">armor_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;            }</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;            <a class="code" href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>(), <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        }</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;    }</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160; </div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;    <span class="comment">// Whatever the last entry was, we want a newline at this point</span></div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().bNewLine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160; </div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    <span class="keywordflow">if</span>( show_bodygraph ) {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160; </div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;        <span class="keyword">auto</span> bg_cb = [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="structbodygraph__part.html">bodygraph_part</a> * bgp, <span class="keyword">const</span> std::string &amp; sym ) {</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;            <span class="keywordflow">if</span>( !bgp ) {</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( sym, <a class="code" href="item_8cpp.html#ab2f4ce2352fb943ced1db3ac4136b355">bodygraph_full_body_iteminfo</a>-&gt;<a class="code" href="structbodygraph.html#a84e2f8c5fd4e680df9689ba1bf4de6f2">fill_color</a> );</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;            }</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;            std::set&lt;sub_bodypart_id&gt; grp{ bgp-&gt;<a class="code" href="structbodygraph__part.html#a0775b5ec433e45367cb49c7146fa13df">sub_bodyparts</a>.begin(), bgp-&gt;<a class="code" href="structbodygraph__part.html#a0775b5ec433e45367cb49c7146fa13df">sub_bodyparts</a>.end() };</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;bid : bgp-&gt;<a class="code" href="structbodygraph__part.html#a6513c65aab49c5ea7d2f14870ccf7681">bodyparts</a> ) {</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;                grp.insert( bid-&gt;<a class="code" href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">sub_parts</a>.begin(), bid-&gt;<a class="code" href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">sub_parts</a>.end() );</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;            }</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;            <a class="code" href="classnc__color.html">nc_color</a> clr = <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;            <span class="keywordtype">int</span> cov_val = 0;</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sid : grp ) {</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;                <span class="keywordtype">int</span> tmp = <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( sid );</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;                cov_val = tmp &gt; cov_val ? tmp : cov_val;</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            }</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;            <span class="keywordflow">if</span>( cov_val &lt;= 5 ) {</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;                clr = <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cov_val &lt;= 10 ) {</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;                clr = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cov_val &lt;= 25 ) {</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;                clr = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cov_val &lt;= 60 ) {</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                clr = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cov_val &lt;= 80 ) {</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;                clr = <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>;</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;                clr = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;            }</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( sym, clr );</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;        };</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;        std::vector&lt;std::string&gt; bg_lines = <a class="code" href="bodygraph_8cpp.html#a77f2ae96377858abec7dddb20348c69b">get_bodygraph_lines</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(), bg_cb,</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                                            <a class="code" href="item_8cpp.html#ab2f4ce2352fb943ced1db3ac4136b355">bodygraph_full_body_iteminfo</a> );</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;<a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : bg_lines ) {</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;ARMOR&quot;</span>, <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> );</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;        }</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    }</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;}</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160; </div>
<div class="line"><a name="l04379"></a><span class="lineno"><a class="line" href="classitem.html#a364460e515672c6b19b7afeee0b9d560"> 4379</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a364460e515672c6b19b7afeee0b9d560">item::animal_armor_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;                              <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ) {</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    }</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <a class="code" href="classitem.html#a7905983b6a499f90dec87250ed395acf">pet_armor_protection_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts );</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;}</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160; </div>
<div class="line"><a name="l04388"></a><span class="lineno"><a class="line" href="classitem.html#ac46c94fbae3a31ba0e21f348875a3e74"> 4388</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ac46c94fbae3a31ba0e21f348875a3e74">item::armor_fit_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;                           <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() ) {</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    }</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160; </div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60a">sizing</a> sizing_level = <a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( player_character );</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160; </div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade87c958bfce7f5ecb1b1a701b71fa88">iteminfo_parts::DESCRIPTION_FLAGS_FITS</a> ) ) {</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;        <span class="keywordflow">switch</span>( sizing_level ) {</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa781d038afb4ccd0fb1b2085adfefd1c3">sizing::human_sized_human_char</a>:</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;                                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing &lt;info&gt;fits&lt;/info&gt; you perfectly.&quot;</span> ) );</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;                }</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3c281ac6effc3982eea0c56df3fe766">sizing::big_sized_big_char</a>:</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing &lt;info&gt;fits&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;                                                         <span class="stringliteral">&quot;your large frame perfectly.&quot;</span> ) );</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;                }</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa096d4645ed938b760b6111684abd8c4c">sizing::small_sized_small_char</a>:</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing &lt;info&gt;fits&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;                                                         <span class="stringliteral">&quot;your small frame perfectly.&quot;</span> ) );</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;                }</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c">sizing::big_sized_human_char</a>:</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is &lt;bad&gt;oversized&lt;/bad&gt; &quot;</span></div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;                                                     <span class="stringliteral">&quot;and does &lt;bad&gt;not fit&lt;/bad&gt; you.&quot;</span> ) );</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">sizing::big_sized_small_char</a>:</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is hilariously &lt;bad&gt;oversized&lt;/bad&gt; &quot;</span></div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                                      <span class="stringliteral">&quot;and does &lt;bad&gt;not fit&lt;/bad&gt; your &lt;info&gt;abnormally &quot;</span></div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                                      <span class="stringliteral">&quot;small mutated anatomy&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">sizing::human_sized_big_char</a>:</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is &lt;bad&gt;normal sized&lt;/bad&gt; and does &quot;</span></div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;                                      <span class="stringliteral">&quot;&lt;bad&gt;not fit&lt;/info&gt; your &lt;info&gt;abnormally large &quot;</span></div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;                                      <span class="stringliteral">&quot;mutated anatomy&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">sizing::human_sized_small_char</a>:</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is &lt;bad&gt;normal sized&lt;/bad&gt; and does &quot;</span></div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;                                      <span class="stringliteral">&quot;&lt;bad&gt;not fit&lt;/bad&gt; your &lt;info&gt;abnormally small &quot;</span></div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;                                      <span class="stringliteral">&quot;mutated anatomy&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">sizing::small_sized_big_char</a>:</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is hilariously &lt;bad&gt;undersized&lt;/bad&gt; &quot;</span></div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;                                      <span class="stringliteral">&quot;and does &lt;bad&gt;not fit&lt;/bad&gt; your &lt;info&gt;abnormally &quot;</span></div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;                                      <span class="stringliteral">&quot;large mutated anatomy&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">sizing::small_sized_human_char</a>:</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing is &lt;bad&gt;undersized&lt;/bad&gt; &quot;</span></div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;                                                     <span class="stringliteral">&quot;and does &lt;bad&gt;not fit&lt;/bad&gt; you.&quot;</span> ) );</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;        }</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;    }</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160; </div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7e8f048a626c868dd942374a9e53ae9a">iteminfo_parts::DESCRIPTION_FLAGS_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            std::string resize_str;</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) ) {</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;                <span class="keywordflow">switch</span>( sizing_level ) {</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">sizing::small_sized_human_char</a>:</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;can be upsized&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">sizing::human_sized_small_char</a>:</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;can be downsized&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c">sizing::big_sized_human_char</a>:</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">sizing::big_sized_small_char</a>:</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bad&gt;can not be downsized&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">sizing::small_sized_big_char</a>:</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">sizing::human_sized_big_char</a>:</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bad&gt;can not be upsized&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;                }</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;                <span class="keywordflow">if</span>( !resize_str.empty() ) {</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;                    std::string info_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing %s.&quot;</span> ), resize_str );</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, info_str );</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;                }</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;                <span class="keywordflow">switch</span>( sizing_level ) {</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">sizing::small_sized_human_char</a>:</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; and &lt;info&gt;upsized&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">sizing::human_sized_small_char</a>:</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; and &lt;info&gt;downsized&lt;/info&gt;&quot;</span> );</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c">sizing::big_sized_human_char</a>:</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">sizing::big_sized_small_char</a>:</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; but &lt;bad&gt;not downsized&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">sizing::small_sized_big_char</a>:</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">sizing::human_sized_big_char</a>:</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;                        resize_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; but &lt;bad&gt;not upsized&lt;/bad&gt;&quot;</span> );</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;                }</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;                std::string info_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing &lt;info&gt;can be &quot;</span></div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;                                                      <span class="stringliteral">&quot;refitted&lt;/info&gt;%s.&quot;</span> ), resize_str );</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, info_str );</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;            }</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This clothing &lt;bad&gt;can not be refitted, &quot;</span></div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;                                                 <span class="stringliteral">&quot;upsized, or downsized&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;        }</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;    }</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160; </div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">is_sided</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab79dd8bd02009ff88f5d2b475a87c296">iteminfo_parts::DESCRIPTION_FLAGS_SIDED</a> ) ) {</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can be worn on &lt;info&gt;either side&lt;/info&gt; of &quot;</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;                              <span class="stringliteral">&quot;the body.&quot;</span> ) );</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;    }</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5789a7c68b3aaf7dfb33db96e6a86665">iteminfo_parts::DESCRIPTION_FLAGS_POWERARMOR</a> ) ) {</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This gear is a part of power armor.&quot;</span> ) );</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad677c6c4526b3d8b3f2596d9e61661c4">iteminfo_parts::DESCRIPTION_FLAGS_POWERARMOR_RADIATIONHINT</a> ) ) {</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> ) ) ) {</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* When worn with a power armor suit, it will &quot;</span></div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;                                      <span class="stringliteral">&quot;&lt;good&gt;fully protect&lt;/good&gt; you from &quot;</span></div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;                                      <span class="stringliteral">&quot;&lt;info&gt;radiation&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* When worn with a power armor helmet, it will &quot;</span></div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;                                      <span class="stringliteral">&quot;&lt;good&gt;fully protect&lt;/good&gt; you from &quot;</span></div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;                                      <span class="stringliteral">&quot;&lt;info&gt;radiation&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;            }</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;        }</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    }</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160; </div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a8c80c02fb14cd9bf70ec9aa43eba5164">itype_rad_badge</a> &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa59be0d71ec1b070b18d9f4215fa4a90f">iteminfo_parts::DESCRIPTION_IRRADIATION</a> ) ) {</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* The film strip on the badge is %s.&quot;</span> ),</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;                                          <a class="code" href="output_8cpp.html#ad0b1d7ba5d5282e4c40c0bf03a2f90c2">rad_badge_color</a>( <a class="code" href="classitem.html#a663816619c55096d7e2736484047ce5a">irradiation</a> ).first ) );</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    }</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;}</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"><a class="line" href="classitem.html#ae0863124133813cad747398f561c8048"> 4540</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae0863124133813cad747398f561c8048">item::book_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/* batch */</span>,</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;                      <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    }</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160; </div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__book.html">islot_book</a> &amp;book = *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="comment">// Some things about a book you CAN tell by it&#39;s cover.</span></div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <span class="keywordflow">if</span>( !book.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> &amp;&amp; !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaeafa6693cfe4c71733292bbdd1611086">iteminfo_parts::BOOK_SUMMARY</a> ) &amp;&amp;</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;        player_character.<a class="code" href="classCharacter.html#a8679cb3fa7f8cd4d88c226ab4b7ab94b">studied_all_recipes</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Just for fun.&quot;</span> ) );</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    }</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaeafa6693cfe4c71733292bbdd1611086">iteminfo_parts::BOOK_SUMMARY</a> ) ) {</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>,</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Some sort of &lt;info&gt;martial arts training &quot;</span></div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;                              <span class="stringliteral">&quot;manual&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> style_to_learn = <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>,</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can learn &lt;info&gt;%s&lt;/info&gt; style &quot;</span></div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;                                                 <span class="stringliteral">&quot;from it.&quot;</span> ), style_to_learn-&gt;<a class="code" href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">name</a> ) );</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>,</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This fighting style is &lt;info&gt;%s&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;                                                 <span class="stringliteral">&quot;to learn.&quot;</span> ),</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;                                              <a class="code" href="martialarts_8cpp.html#abbde71d679db0bf89e89279e18183337">martialart_difficulty</a>( style_to_learn ) ) );</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>,</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;d be easier to master if you&#39;d have &quot;</span></div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;                                                 <span class="stringliteral">&quot;skill expertise in &lt;info&gt;%s&lt;/info&gt;.&quot;</span> ),</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;                                              style_to_learn-&gt;<a class="code" href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">primary_skill</a>-&gt;<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() ) );</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;        }</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    }</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#a899cf37dd220cfce62e17e9f072ca9c5">req</a> == 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6d6682e5ed91cf2005ab30b15a8ae399">iteminfo_parts::BOOK_REQUIREMENTS_BEGINNER</a> ) ) {</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It can be &lt;info&gt;understood by &quot;</span></div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;                                      <span class="stringliteral">&quot;beginners&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    }</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    <span class="keywordflow">if</span>( player_character.<a class="code" href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">has_identified</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;        <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ) {</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;            <span class="keyword">const</span> <a class="code" href="classSkillLevel.html">SkillLevel</a> &amp;skill = player_character.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( book.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> );</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;            <span class="keywordflow">if</span>( skill.<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa73c3939619313f4363334c32da31b09d">iteminfo_parts::BOOK_SKILLRANGE_MAX</a> ) ) {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;                <span class="keyword">const</span> std::string skill_name = book.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a>-&gt;<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>();</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;                std::string fmt;</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;                <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#a6eca476a412d945669fcb56e20d8ef97">level</a> != 0 ) {</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;                    fmt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Can bring your &lt;info&gt;%s skill to&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;                                            <span class="stringliteral">&quot;&lt;num&gt;.&quot;</span> ), skill_name );</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, fmt, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, book.<a class="code" href="structislot__book.html#a6eca476a412d945669fcb56e20d8ef97">level</a> );</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;                }</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;                fmt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your current &lt;stat&gt;%s skill&lt;/stat&gt; is &lt;num&gt;.&quot;</span> ),</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;                                     skill_name );</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, fmt, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, skill.<a class="code" href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">knowledgeLevel</a>() );</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;            }</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160; </div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;            <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#a899cf37dd220cfce62e17e9f072ca9c5">req</a> != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf103bc771e0fce64d83d75d1e7dc067a">iteminfo_parts::BOOK_SKILLRANGE_MIN</a> ) ) {</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;                <span class="keyword">const</span> std::string fmt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;                                            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;Requires %s level&lt;/info&gt; &lt;num&gt; to &quot;</span></div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;                                               <span class="stringliteral">&quot;understand.&quot;</span> ), book.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>() );</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, fmt,</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, book.<a class="code" href="structislot__book.html#a899cf37dd220cfce62e17e9f072ca9c5">req</a> );</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;            }</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;        }</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160; </div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#a817f742eeee09070453b5f2d78d803be">intel</a> != 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa117c0693a41ee090d6ac75ce6161336">iteminfo_parts::BOOK_REQUIREMENTS_INT</a> ) ) {</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Requires &lt;info&gt;intelligence of&lt;/info&gt; &lt;num&gt; to easily &quot;</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;                                  <span class="stringliteral">&quot;read.&quot;</span> ), <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, book.<a class="code" href="structislot__book.html#a817f742eeee09070453b5f2d78d803be">intel</a> );</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;        }</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">book_fun_for</a>( *<span class="keyword">this</span>, player_character ) != 0 &amp;&amp;</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa541e7d1cc18ad35c3563ac800dc15668">iteminfo_parts::BOOK_MORALECHANGE</a> ) ) {</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reading this book affects your morale by &lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, player_character.<a class="code" href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">book_fun_for</a>( *<span class="keyword">this</span>, player_character ) );</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;        }</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff1ab3ea7bb7737d5b002849ad4bfb3a">iteminfo_parts::BOOK_TIMEPERCHAPTER</a> ) ) {</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;            std::string fmt = <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>(</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;                                  <span class="stringliteral">&quot;A chapter of this book takes &lt;num&gt; &lt;info&gt;minute to &quot;</span></div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;                                  <span class="stringliteral">&quot;read&lt;/info&gt;.&quot;</span>,</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;                                  <span class="stringliteral">&quot;A chapter of this book takes &lt;num&gt; &lt;info&gt;minutes to &quot;</span></div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;                                  <span class="stringliteral">&quot;read&lt;/info&gt;.&quot;</span>, to_minutes&lt;int&gt;( book.<a class="code" href="structislot__book.html#a399b81c9f3da52b81d3164ae88e2b87a">time</a> ) );</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.count( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) ) {</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;                fmt = <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>(</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;                          <span class="stringliteral">&quot;&lt;info&gt;A training session&lt;/info&gt; with this book takes &quot;</span></div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;                          <span class="stringliteral">&quot;&lt;num&gt; &lt;info&gt;minute&lt;/info&gt;.&quot;</span>,</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;                          <span class="stringliteral">&quot;&lt;info&gt;A training session&lt;/info&gt; with this book takes &quot;</span></div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;                          <span class="stringliteral">&quot;&lt;num&gt; &lt;info&gt;minutes&lt;/info&gt;.&quot;</span>, to_minutes&lt;int&gt;( book.<a class="code" href="structislot__book.html#a399b81c9f3da52b81d3164ae88e2b87a">time</a> ) );</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;            }</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, fmt,</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, to_minutes&lt;int&gt;( book.<a class="code" href="structislot__book.html#a399b81c9f3da52b81d3164ae88e2b87a">time</a> ) );</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;        }</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160; </div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;        <span class="keywordflow">if</span>( book.<a class="code" href="structislot__book.html#aff68466212e42b423a136b0da1a59b38">chapters</a> &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0cd39031ef43b5e6b5d67f56169c9fce">iteminfo_parts::BOOK_NUMUNREADCHAPTERS</a> ) ) {</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> unread = <a class="code" href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">get_remaining_chapters</a>( player_character );</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;            std::string fmt = <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;This book has &lt;num&gt; &lt;info&gt;unread chapter&lt;/info&gt;.&quot;</span>,</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;                                         <span class="stringliteral">&quot;This book has &lt;num&gt; &lt;info&gt;unread chapters&lt;/info&gt;.&quot;</span>,</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;                                         unread );</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, fmt, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, unread );</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;        }</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160; </div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;        <span class="keywordflow">if</span>( !book.<a class="code" href="structislot__book.html#a204a24c6591310275db5b98d764e10dd">proficiencies</a>.empty() ) {</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> enumerate_profs = []( <span class="keyword">const</span> <a class="code" href="structbook__proficiency__bonus.html">book_proficiency_bonus</a> &amp; prof ) {</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;                <span class="keywordflow">return</span> prof.id-&gt;name();</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;            };</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;            <span class="keyword">const</span> std::string profs = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;                                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This book can help with the following proficiencies: %s&quot;</span> ),</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;                                          <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( book.<a class="code" href="structislot__book.html#a204a24c6591310275db5b98d764e10dd">proficiencies</a>, enumerate_profs ) );</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, profs );</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;        }</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160; </div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab93dacbe32497550a2db340c1299a10c">iteminfo_parts::BOOK_INCLUDED_RECIPES</a> ) ) {</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            std::vector&lt;std::string&gt; known_recipe_list;</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;            std::vector&lt;std::string&gt; learnable_recipe_list;</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;            std::vector&lt;std::string&gt; practice_recipe_list;</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;            std::vector&lt;std::string&gt; unlearnable_recipe_list;</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a> &amp;elem : book.<a class="code" href="structislot__book.html#ae240630817ce9b3cee66b3e0d8d40e97">recipes</a> ) {</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> knows_it = player_character.<a class="code" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a> );</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;                <span class="comment">// If the player knows it, they recognize it even if it&#39;s not clearly stated.</span></div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;                <span class="keywordflow">if</span>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#ab1754e8717fef2508852ad9cf8576bff">is_hidden</a>() &amp;&amp; !knows_it ) {</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;                }</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> can_learn = player_character.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) &gt;=</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;                                       elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a281ac0918950f3547a56cb9e218ffe9e">skill_level</a>;</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;                <span class="keywordflow">if</span>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a6ffa5ac015e9cb54bf2d360e5709cff3">is_practice</a>() ) {</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> format = can_learn ? <span class="stringliteral">&quot;&lt;dark&gt;%s&lt;/dark&gt;&quot;</span> : <span class="stringliteral">&quot;&lt;color_brown&gt;%s&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;                    practice_recipe_list.emplace_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( format, elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() ) );</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( knows_it ) {</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;                    <span class="comment">// In case the recipe is known, but has a different name in the book, use the</span></div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;                    <span class="comment">// real name to avoid confusing the player.</span></div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;                    known_recipe_list.emplace_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;&quot;</span>, elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() ) );</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !can_learn ) {</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;                    unlearnable_recipe_list.emplace_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;color_brown&gt;%s&lt;/color&gt;&quot;</span>, elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() ) );</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;                    learnable_recipe_list.emplace_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;dark&gt;%s&lt;/dark&gt;&quot;</span>, elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() ) );</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;                }</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;            }</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160; </div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;            <span class="keyword">const</span> std::size_t num_crafting_recipes = known_recipe_list.size() + learnable_recipe_list.size() +</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;                    unlearnable_recipe_list.size();</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;            <span class="keyword">const</span> std::size_t num_total_recipes = num_crafting_recipes + practice_recipe_list.size();</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;            <span class="keywordflow">if</span>( num_total_recipes &gt; 0 &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa7f05cead12d1622791c76d94c3b999a">iteminfo_parts::DESCRIPTION_BOOK_RECIPES</a> ) ) {</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;                std::vector&lt;std::string&gt; lines;</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                <span class="keywordflow">if</span>( num_crafting_recipes &gt; 0 ) {</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;                    lines.emplace_back(</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;                        <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;This book contains %u crafting recipe.&quot;</span>,</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;                                                  <span class="stringliteral">&quot;This book contains %u crafting recipes.&quot;</span>,</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;                                                  num_crafting_recipes ), num_crafting_recipes ) );</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;                }</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;                <span class="keywordflow">if</span>( !known_recipe_list.empty() ) {</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;                    lines.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You already know how to craft:&quot;</span> ) );</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;                    lines.emplace_back( <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( known_recipe_list ) );</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;                }</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;                <span class="keywordflow">if</span>( !learnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;                    lines.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You understand how to craft:&quot;</span> ) );</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;                    lines.emplace_back( <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( learnable_recipe_list ) );</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;                }</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;                <span class="keywordflow">if</span>( !unlearnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;                    lines.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lack the skills to understand:&quot;</span> ) );</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;                    lines.emplace_back( <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( unlearnable_recipe_list ) );</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;                }</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;                <span class="keywordflow">if</span>( !practice_recipe_list.empty() ) {</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;                    lines.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This book can help you practice:&quot;</span> ) );</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                    lines.emplace_back( <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( practice_recipe_list ) );</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;                }</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;                <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;recipe_line : lines ) {</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;                }</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;            }</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160; </div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;            <span class="keywordflow">if</span>( num_total_recipes &lt; book.<a class="code" href="structislot__book.html#ae240630817ce9b3cee66b3e0d8d40e97">recipes</a>.size() &amp;&amp;</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;                parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa934647d484c8702f12e803d76213775c">iteminfo_parts::DESCRIPTION_BOOK_ADDITIONAL_RECIPES</a> ) ) {</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It might help you figuring out some &lt;good&gt;more recipes&lt;/good&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;            }</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;        }</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160; </div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef2292520530e690d802d8d4e663a9ca">iteminfo_parts::BOOK_UNREAD</a> ) ) {</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BOOK&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to &lt;info&gt;read this book to see its contents&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;        }</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;    }</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;}</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160; </div>
<div class="line"><a name="l04724"></a><span class="lineno"><a class="line" href="classitem.html#ace11ba657be810e5ee4cc2caeb8a0637"> 4724</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ace11ba657be810e5ee4cc2caeb8a0637">item::battery_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> * <span class="comment">/*parts*/</span>,</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;                         <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">is_vehicle_battery</a>() ) {</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;    }</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160; </div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    std::string info_string;</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity &lt; 1_J ) {</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;        info_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Capacity&lt;/bold&gt;: %dmJ&quot;</span> ),</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;                                     <a class="code" href="namespaceunits.html#a3ace0fc0f1c25f25ff4e75a2b2d22c29">to_millijoule</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity ) );</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity &lt; 1_kJ ) {</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;        info_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Capacity&lt;/bold&gt;: %dJ&quot;</span> ),</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;                                     <a class="code" href="namespaceunits.html#a9e6793937cd630b03c24d520c5415904">to_joule</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity ) );</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity &gt;= 1_kJ ) {</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;        info_string = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Capacity&lt;/bold&gt;: %dkJ&quot;</span> ),</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;                                     <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">to_kilojoule</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity ) );</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    }</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BATTERY&quot;</span>, info_string );</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;}</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160; </div>
<div class="line"><a name="l04746"></a><span class="lineno"><a class="line" href="classitem.html#af5218e06137e038fa90a320550884639"> 4746</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#af5218e06137e038fa90a320550884639">item::tool_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;                      <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160; </div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;    }</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160; </div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadb961649396a1b3006e0eb01f5b37aa5">iteminfo_parts::TOOL_CHARGES</a> ) ) {</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;TOOL&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Charges&lt;/bold&gt;: %d&quot;</span> ),</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;                           <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) );</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;    }</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160; </div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() ) {</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab33e96da85446439ebb1470a45597770">iteminfo_parts::TOOL_MAGAZINE_CURRENT</a> ) ) {</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;TOOL&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Magazine: &quot;</span> ),</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;&quot;</span>, <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;        }</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160; </div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa20f77793c38d1f46f5c61c54cfed6cf7">iteminfo_parts::TOOL_MAGAZINE_COMPATIBLE</a> ) ) {</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">uses_magazine</a>() ) {</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;                <span class="comment">// Keep this identical with gun magazines in item::gun_info</span></div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;                <span class="keyword">const</span> std::vector&lt;itype_id&gt; compat_sorted = <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">magazine_compatible</a>() );</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;                <span class="keyword">const</span> std::string mag_names = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( compat_sorted,</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;                []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;                } );</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160; </div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;                <span class="keyword">const</span> std::set&lt;flag_id&gt; flag_restrictions = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a35e08b506568fb5b4d480422e2e030d2">magazine_flag_restrictions</a>();</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;                <span class="keyword">const</span> std::string flag_names = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( flag_restrictions,</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;                []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp; e ) {</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;                    <span class="keywordflow">return</span> e-&gt;<a class="code" href="classjson__flag.html#a6f1e6f90c7c8cd8b307136ceee121fb1">name</a>();</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;                } );</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160; </div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;                std::string <a class="code" href="namespacedisplay.html">display</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Compatible magazines&lt;/bold&gt;:&quot;</span> );</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;                <span class="keywordflow">if</span>( !compat_sorted.empty() ) {</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;                    <a class="code" href="namespacedisplay.html">display</a> += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n&lt;bold&gt;Types&lt;/bold&gt;: &quot;</span> ) + mag_names;</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;                }</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;                <span class="keywordflow">if</span>( !flag_restrictions.empty() ) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;                    <a class="code" href="namespacedisplay.html">display</a> += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n&lt;bold&gt;Form factors&lt;/bold&gt;: &quot;</span> ) + flag_names;</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;                }</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160; </div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="namespacedisplay.html">display</a> );</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;            }</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;        }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaaee922908a854495f38f7b99bb28f90f">iteminfo_parts::TOOL_CAPACITY</a> ) ) {</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>() ) {</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back(</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;                <span class="stringliteral">&quot;TOOL&quot;</span>,</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;                <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;                    <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>(</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;                        <span class="stringliteral">&quot;Maximum &lt;num&gt; charge of %s.&quot;</span>,</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;                        <span class="stringliteral">&quot;Maximum &lt;num&gt; charges of %s.&quot;</span>,</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;                        <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( at ) ),</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;                    at-&gt;name() ),</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;                <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>,</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;                <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( at ) );</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;        }</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;    }</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160; </div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;    <span class="comment">// UPS, rechargeable power cells, and bionic power</span></div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac9ddd8ec0ae7bb9c31ab86c5b710a26b">iteminfo_parts::DESCRIPTION_RECHARGE_UPSMODDED</a> ) ) {</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This tool has been modified to use a &lt;info&gt;universal &quot;</span></div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;                              <span class="stringliteral">&quot;power supply&lt;/info&gt; and is &lt;neutral&gt;not compatible&quot;</span></div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;                              <span class="stringliteral">&quot;&lt;/neutral&gt; with &lt;info&gt;standard batteries&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1d6da470e2d0c764e84877215a30f42c">flag_NO_RELOAD</a> ) &amp;&amp;</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;               parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa66ded97adad69f0d0e43b011564cd41d">iteminfo_parts::DESCRIPTION_RECHARGE_NORELOAD</a> ) ) {</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This tool has a &lt;info&gt;rechargeable power cell&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;                              <span class="stringliteral">&quot;and is &lt;neutral&gt;not compatible&lt;/neutral&gt; with &quot;</span></div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;                              <span class="stringliteral">&quot;&lt;info&gt;standard batteries&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a> ) &amp;&amp;</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;               parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3a07e3ba4359475b31e1eae6b5743467">iteminfo_parts::DESCRIPTION_RECHARGE_UPSCAPABLE</a> ) ) {</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This tool has a &lt;info&gt;rechargeable power cell&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;                              <span class="stringliteral">&quot;and can be recharged in any &lt;neutral&gt;UPS-compatible &quot;</span></div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;                              <span class="stringliteral">&quot;recharging station&lt;/neutral&gt;. You could charge it with &quot;</span></div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;                              <span class="stringliteral">&quot;&lt;info&gt;standard batteries&lt;/info&gt;, but unloading it is &quot;</span></div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;                              <span class="stringliteral">&quot;impossible.&quot;</span> ) );</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This tool &lt;info&gt;runs on bionic power&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a125f7dde665956a5bae736a8f73fafff">flag_BURNOUT</a> ) &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4fba65fff3f2bb4d8e21216fe405ae0b">iteminfo_parts::TOOL_BURNOUT</a> ) ) {</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;        <span class="keywordtype">int</span> percent_left = 0;</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;            <span class="comment">// Candle items that use ammo instead of charges</span></div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;            <span class="comment">// The capacity should never be zero but clang complains about it</span></div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;            percent_left = 100 * <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;ammo-&gt;type ), 1 );</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>() &gt; 0 ) {</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;            <span class="comment">// Candle items that use charges instead of ammo</span></div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;            percent_left = 100 * <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>();</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;        }</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160; </div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;        std::string feedback;</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;        <span class="keywordflow">if</span>( percent_left == 100 ) {</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s new, and ready to burn.&quot;</span> );</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_left &gt;= 75 ) {</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Almost new, with much material to burn.&quot;</span> );</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_left &gt;= 50 ) {</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;More than a quarter has burned away.&quot;</span> );</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_left &gt;= 25 ) {</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;More than half has burned away.&quot;</span> );</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( percent_left &gt;= 10 ) {</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Less than a quarter left to burn.&quot;</span> );</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;            feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Almost completely burned out.&quot;</span> );</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;        }</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;        feedback = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Fuel&lt;/bold&gt;: &quot;</span> ) + feedback;</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, feedback );</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;    }</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160; </div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;    <span class="comment">// Display e-ink tablet copied recipes from SD cards</span></div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    <span class="keyword">const</span> std::set&lt;recipe_id&gt; saved_recipes = <a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>();</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    <span class="keywordflow">if</span>( !saved_recipes.empty() ) {</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;        std::vector&lt;std::string&gt; known_recipe_list;</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;        std::vector&lt;std::string&gt; learnable_recipe_list;</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;        std::vector&lt;std::string&gt; unlearnable_recipe_list;</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160; </div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;rid : saved_recipes ) {</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;            <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *r = &amp;rid.obj();</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160; </div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> knows_it = player_character.<a class="code" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( r );</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> can_learn = player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( r-&gt;<a class="code" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) &gt;= r-&gt;<a class="code" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a>;</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160; </div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;            <span class="comment">// In case the recipe is known, but has a different name in the item, use the</span></div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;            <span class="comment">// real name to avoid confusing the player.</span></div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;            <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = r-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>();</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160; </div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;            <span class="keywordflow">if</span>( knows_it ) {</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;                known_recipe_list.emplace_back( <span class="stringliteral">&quot;&lt;bold&gt;&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;&lt;/bold&gt;&quot;</span> );</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !can_learn ) {</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;                unlearnable_recipe_list.emplace_back( <span class="stringliteral">&quot;&lt;color_brown&gt;&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;                learnable_recipe_list.emplace_back( <span class="stringliteral">&quot;&lt;dark&gt;&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;&lt;/dark&gt;&quot;</span> );</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;            }</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;        }</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160; </div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;        <span class="keywordtype">int</span> total_recipes = known_recipe_list.size() + learnable_recipe_list.size() +</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;                            unlearnable_recipe_list.size();</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160; </div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;        <span class="keywordflow">if</span>( ( !known_recipe_list.empty() || !learnable_recipe_list.empty() ||</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;              !unlearnable_recipe_list.empty() ) &amp;&amp;</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;            parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa7f05cead12d1622791c76d94c3b999a">iteminfo_parts::DESCRIPTION_BOOK_RECIPES</a> ) ) {</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;            <span class="keyword">const</span> std::string recipe_line =</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Contains %1$d copied crafting recipe:&quot;</span>,</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;                                          <span class="stringliteral">&quot;Contains %1$d copied crafting recipes:&quot;</span>,</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;                                          total_recipes ), total_recipes );</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160; </div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160; </div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;            <span class="keywordflow">if</span>( !known_recipe_list.empty() ) {</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;                <span class="keyword">const</span> std::string recipe_line =</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou already know %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;                                              <span class="stringliteral">&quot;\nYou already know %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;                                              known_recipe_list.size() ),</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;                                   known_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( known_recipe_list ) );</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160; </div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;            }</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160; </div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;            <span class="keywordflow">if</span>( !learnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;                <span class="keyword">const</span> std::string recipe_line =</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou have the skills to craft %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;                                              <span class="stringliteral">&quot;\nYou have the skills to craft %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;                                              learnable_recipe_list.size() ),</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;                                   learnable_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( learnable_recipe_list ) );</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;            }</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160; </div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;            <span class="keywordflow">if</span>( !unlearnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;                <span class="keyword">const</span> std::string recipe_line =</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou lack the skills to craft %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;                                              <span class="stringliteral">&quot;\nYou lack the skills to craft %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;                                              unlearnable_recipe_list.size() ),</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;                                   unlearnable_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( unlearnable_recipe_list ) );</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;            }</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        }</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;    }</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160; </div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;    <span class="comment">// Display e-ink tablet ebook recipes</span></div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">is_ebook_storage</a>() &amp;&amp; !<a class="code" href="classitem.html#a3358e085e55edd073f0dbb4e3dfa5abc">is_broken_on_active</a>() ) {</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        std::vector&lt;std::string&gt; known_recipe_list;</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;        std::vector&lt;std::string&gt; learnable_recipe_list;</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;        std::vector&lt;std::string&gt; unlearnable_recipe_list;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;        std::vector&lt;const item *&gt; book_list = <a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">ebooks</a>();</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;        <span class="keywordtype">int</span> total_ebooks = book_list.size();</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160; </div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *ebook : book_list ) {</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;            <span class="keyword">const</span> <a class="code" href="structislot__book.html">islot_book</a> &amp;book = *ebook-&gt;type-&gt;book;</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a> &amp;elem : book.<a class="code" href="structislot__book.html#ae240630817ce9b3cee66b3e0d8d40e97">recipes</a> ) {</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> knows_it = player_character.<a class="code" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a> );</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> can_learn = player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) &gt;=</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;                                       elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a281ac0918950f3547a56cb9e218ffe9e">skill_level</a>;</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;                <span class="comment">// If the player knows it, they recognize it even if it&#39;s not clearly stated.</span></div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;                <span class="keywordflow">if</span>( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#ab1754e8717fef2508852ad9cf8576bff">is_hidden</a>() &amp;&amp; !knows_it ) {</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                }</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;                <span class="comment">// In case the recipe is known, but has a different name in the book, use the</span></div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;                <span class="comment">// real name to avoid confusing the player.</span></div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;                <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>( <span class="comment">/*decorated=*/</span><span class="keyword">true</span> );</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160; </div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;                <span class="keywordflow">if</span>( knows_it ) {</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;                    std::string recipe_formated = <span class="stringliteral">&quot;&lt;bold&gt;&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;&lt;/bold&gt;&quot;</span>;</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;                    <span class="keywordflow">if</span>( known_recipe_list.end() == std::find( known_recipe_list.begin(), known_recipe_list.end(),</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;                            <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;                        known_recipe_list.emplace_back( <span class="stringliteral">&quot;&lt;bold&gt;&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;&lt;/bold&gt;&quot;</span> );</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;                    }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !can_learn ) {</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;                    std::string recipe_formated = <span class="stringliteral">&quot;&lt;color_brown&gt;&quot;</span> + elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() + <span class="stringliteral">&quot;&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;                    <span class="keywordflow">if</span>( unlearnable_recipe_list.end() == std::find( unlearnable_recipe_list.begin(),</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;                            unlearnable_recipe_list.end(), recipe_formated ) ) {</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;                        unlearnable_recipe_list.emplace_back( recipe_formated );</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;                    }</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;                    std::string recipe_formated = <span class="stringliteral">&quot;&lt;dark&gt;&quot;</span> + elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() + <span class="stringliteral">&quot;&lt;/dark&gt;&quot;</span>;</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                    <span class="keywordflow">if</span>( learnable_recipe_list.end() == std::find( learnable_recipe_list.begin(),</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;                            learnable_recipe_list.end(), recipe_formated ) ) {</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;                        learnable_recipe_list.emplace_back( <span class="stringliteral">&quot;&lt;dark&gt;&quot;</span> + elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">name</a>() + <span class="stringliteral">&quot;&lt;/dark&gt;&quot;</span> );</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;                    }</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;                }</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;            }</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        }</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160; </div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;        <span class="keywordtype">int</span> total_recipes = known_recipe_list.size() + learnable_recipe_list.size() +</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;                            unlearnable_recipe_list.size();</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160; </div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;        <span class="keywordflow">if</span>( ( !known_recipe_list.empty() || !learnable_recipe_list.empty() ||</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;              !unlearnable_recipe_list.empty() ) &amp;&amp;</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;            parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa7f05cead12d1622791c76d94c3b999a">iteminfo_parts::DESCRIPTION_BOOK_RECIPES</a> ) ) {</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;            std::string recipe_line =</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Contains %1$d unique crafting recipe,&quot;</span>,</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;                                          <span class="stringliteral">&quot;Contains %1$d unique crafting recipes,&quot;</span>,</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;                                          total_recipes ), total_recipes );</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;            std::string source_line =</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;                <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;from %1$d stored e-book:&quot;</span>,</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;                                          <span class="stringliteral">&quot;from %1$d stored e-books:&quot;</span>,</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;                                          total_ebooks ), total_ebooks );</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160; </div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, source_line );</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160; </div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            <span class="keywordflow">if</span>( !known_recipe_list.empty() ) {</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;                <span class="keyword">const</span> std::string recipe_line =</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou already know %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;                                              <span class="stringliteral">&quot;\nYou already know %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;                                              known_recipe_list.size() ),</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;                                   known_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( known_recipe_list ) );</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160; </div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;            }</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160; </div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;            <span class="keywordflow">if</span>( !learnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;                std::string recipe_line =</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou have the skills to craft %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;                                              <span class="stringliteral">&quot;\nYou have the skills to craft %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;                                              learnable_recipe_list.size() ),</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;                                   learnable_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( learnable_recipe_list ) );</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160; </div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;            }</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160; </div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;            <span class="keywordflow">if</span>( !unlearnable_recipe_list.empty() ) {</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;                std::string recipe_line =</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;                    <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;\nYou lack the skills to craft %1$d recipe:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;                                              <span class="stringliteral">&quot;\nYou lack the skills to craft %1$d recipes:\n%2$s&quot;</span>,</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;                                              unlearnable_recipe_list.size() ),</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;                                   unlearnable_recipe_list.size(), <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( unlearnable_recipe_list ) );</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160; </div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, recipe_line );</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;            }</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;        }</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    }</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;}</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160; </div>
<div class="line"><a name="l05030"></a><span class="lineno"><a class="line" href="classitem.html#a15fbb2cca86592ca6fc879590fbbbb25"> 5030</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a15fbb2cca86592ca6fc879590fbbbb25">item::actions_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;                         <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160; </div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;    <span class="keyword">const</span> std::map&lt;std::string, use_function&gt; &amp;use_methods = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>;</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    <span class="keywordflow">if</span>( use_methods.empty() || !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff52226e484151c7ca5043d8315203f4">iteminfo_parts::ACTIONS</a> ) ) {</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;    }</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;    std::string actions = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( use_methods,</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    []( <span class="keyword">const</span> std::pair&lt;std::string, use_function&gt; &amp;val ) {</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;&quot;</span>, val.second.get_name() );</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;    } );</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Actions&lt;/bold&gt;: %s&quot;</span> ), actions ) );</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;}</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160; </div>
<div class="line"><a name="l05046"></a><span class="lineno"><a class="line" href="classitem.html#a733d3f8bc85cb1bc0e8d87b6ed5af7ac"> 5046</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a733d3f8bc85cb1bc0e8d87b6ed5af7ac">item::component_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;                           <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() || !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa68c87b5b76e6830a909f2f02a517d4a9">iteminfo_parts::DESCRIPTION_COMPONENTS_MADEFROM</a> ) ) {</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;    }</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Using: %s&quot;</span> ),</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;                           <a class="code" href="classitem.html#adce9200620918ac031843f985f6cbfb7">components_to_string</a>() ) );</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Made from: %s&quot;</span> ),</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;                           <a class="code" href="classitem.html#adce9200620918ac031843f985f6cbfb7">components_to_string</a>() ) );</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    }</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;}</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160; </div>
<div class="line"><a name="l05061"></a><span class="lineno"><a class="line" href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134"> 5061</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134">enchantment_info_helper</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it,</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;                                     <a class="code" href="classenchantment.html#ac3f13881efe10e119c42c5a09e12bebd">enchantment::has</a> type,</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;                                     std::vector&lt;std::string&gt; &amp;always,</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;                                     std::vector&lt;std::string&gt; &amp;active,</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;                                     std::vector&lt;std::string&gt; &amp;inactive )</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;{</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchantment.html">enchantment</a> &amp;ench : it.<a class="code" href="classitem.html#a9e2ba6ad083ca4261daa0890d831d823">get_defined_enchantments</a>() ) {</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;        <span class="comment">// only check conditions matching the given type</span></div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;        <span class="keywordflow">if</span>( ench.active_conditions.first == type ) {</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;            <span class="comment">// if a description is provided use that</span></div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;            <span class="keywordflow">if</span>( !ench.description.empty() ) {</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;                std::string info;</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;                <span class="keywordflow">if</span>( !ench.name.empty() ) {</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;                    info = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;: %s&quot;</span>, ench.name.translated(),</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;                                          ench.description.translated() );</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;                    info = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;Description&lt;/info&gt;: %s&quot;</span> ), ench.description.translated() );</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;                }</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                <span class="keywordflow">switch</span>( ench.active_conditions.second ) {</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::ALWAYS:</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                        <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.push_back( info );</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::ACTIVE:</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;                        active.push_back( info );</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::INACTIVE:</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;                        inactive.push_back( info );</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::DIALOG_CONDITION:</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::NUM_CONDITION:</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;                        <span class="comment">// skip for dialog conditions</span></div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;                }</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;            }</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;        }</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;    }</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;ench : it.<a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">get_proc_enchantments</a>() ) {</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;        <span class="comment">// only check conditions matching the given type</span></div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;        <span class="keywordflow">if</span>( ench.active_conditions.first == type ) {</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;            <span class="comment">// if a description is provided use that</span></div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;            <span class="keywordflow">if</span>( !ench.description.empty() ) {</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;                std::string info;</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;                <span class="keywordflow">if</span>( !ench.name.empty() ) {</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;                    info = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;: %s&quot;</span>, ench.name.translated(),</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;                                          ench.description.translated() );</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;                    info = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;info&gt;Description&lt;/info&gt;: %s&quot;</span> ), ench.description.translated() );</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;                }</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;                <span class="keywordflow">switch</span>( ench.active_conditions.second ) {</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::ALWAYS:</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;                        <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.push_back( info );</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::ACTIVE:</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;                        active.push_back( info );</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::INACTIVE:</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;                        inactive.push_back( info );</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::DIALOG_CONDITION:</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;                    <span class="keywordflow">case</span> enchantment::condition::NUM_CONDITION:</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;                        <span class="comment">// skip for dialog conditions</span></div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                }</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;            }</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;        }</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;    }</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;}</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160; </div>
<div class="line"><a name="l05129"></a><span class="lineno"><a class="line" href="item_8cpp.html#ade1e3db3102b4d852659d72496478736"> 5129</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#ade1e3db3102b4d852659d72496478736">enchantment_info_printer</a>( std::vector&lt;iteminfo&gt; &amp;info,</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;                                      std::vector&lt;std::string&gt; &amp;always,</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;                                      std::vector&lt;std::string&gt; &amp;active,</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;                                      std::vector&lt;std::string&gt; &amp;inactive )</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;{</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.empty() ) {</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;        info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Always&lt;/bold&gt;:&quot;</span> ) ) );</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;entry : <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a> ) {</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;            info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, entry ) );</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;        }</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    }</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;    <span class="keywordflow">if</span>( !active.empty() ) {</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;        info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;When Active&lt;/bold&gt;:&quot;</span> ) ) );</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;entry : active ) {</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;            info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, entry ) );</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;        }</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;    }</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;    <span class="keywordflow">if</span>( !inactive.empty() ) {</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;        info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;When Inactive&lt;/bold&gt;:&quot;</span> ) ) );</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;entry : inactive ) {</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;            info.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, entry ) );</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;        }</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    }</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;}</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160; </div>
<div class="line"><a name="l05154"></a><span class="lineno"><a class="line" href="classitem.html#af7cccefc9d12ce6fdc6f16490f27cdbc"> 5154</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#af7cccefc9d12ce6fdc6f16490f27cdbc">item::enchantment_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;                             <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;    <span class="keywordflow">if</span>( !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2f738a8d3473924f949d7bdd04f3543f">iteminfo_parts::DESCRIPTION_ENCHANTMENTS</a> ) ) {</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;    }</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;    <span class="comment">// if the item has relic data and the item is mundane show some details</span></div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;        <span class="comment">// check WIELD</span></div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;        std::vector&lt;std::string&gt; <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>;</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;        std::vector&lt;std::string&gt; <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>;</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;        std::vector&lt;std::string&gt; inactive;</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;        <a class="code" href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134">enchantment_info_helper</a>( *<span class="keyword">this</span>, <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">enchantment::has::WIELD</a>, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.empty() || !<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>.empty() || !inactive.empty() ) {</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;When &lt;bold&gt;wielded&lt;/bold&gt; this item provides:&quot;</span> ) ) );</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;            <a class="code" href="item_8cpp.html#ade1e3db3102b4d852659d72496478736">enchantment_info_printer</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;        }</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;        <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.clear();</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>.clear();</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;        inactive.clear();</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;        <a class="code" href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134">enchantment_info_helper</a>( *<span class="keyword">this</span>, enchantment::has::WORN, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.empty() || !<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>.empty() || !inactive.empty() ) {</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;When &lt;bold&gt;worn&lt;/bold&gt; this item provides:&quot;</span> ) ) );</div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;            <a class="code" href="item_8cpp.html#ade1e3db3102b4d852659d72496478736">enchantment_info_printer</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;        }</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;        <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.clear();</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>.clear();</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;        inactive.clear();</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;        <a class="code" href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134">enchantment_info_helper</a>( *<span class="keyword">this</span>, enchantment::has::HELD, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>.empty() || !<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>.empty() || !inactive.empty() ) {</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;When &lt;bold&gt;carried&lt;/bold&gt; this item provides:&quot;</span> ) ) );</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;            <a class="code" href="item_8cpp.html#ade1e3db3102b4d852659d72496478736">enchantment_info_printer</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, <a class="code" href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">always</a>, <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>, inactive );</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;        }</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;    }</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;}</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160; </div>
<div class="line"><a name="l05194"></a><span class="lineno"><a class="line" href="classitem.html#a7af3529d3ba327b8eac2d9be8bd5b1d6"> 5194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a7af3529d3ba327b8eac2d9be8bd5b1d6">item::repair_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;                        <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;    <span class="keywordflow">if</span>( !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab4ef9ddece2e01499339603addb5b638">iteminfo_parts::DESCRIPTION_REPAIREDWITH</a> ) ) {</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    }</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    <span class="keyword">const</span> std::vector&lt;itype_id&gt; rep = <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#afd036343012f6275683b8168d84c1be3">repaired_with</a>() );</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;    <span class="keywordflow">if</span>( !rep.empty() ) {</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Repair&lt;/bold&gt; using %s.&quot;</span> ),</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;                           <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( rep,</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; e ) {</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">nname</a>( e );</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;        }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98acfc049a17faac959998820e7aaaf4329">enumeration_conjunction::or_</a> ) ) );</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160; </div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;        <span class="keyword">const</span> std::string repairs_with = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>,</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; e ) {</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;            return string_format( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;&quot;</span>, e-&gt;name() );</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;        } );</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;        <span class="keywordflow">if</span>( !repairs_with.empty() ) {</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;With&lt;/bold&gt; %s.&quot;</span> ), repairs_with ) );</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;        }</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item is &lt;bad&gt;not repairable&lt;/bad&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;    }</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;}</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160; </div>
<div class="line"><a name="l05221"></a><span class="lineno"><a class="line" href="classitem.html#a4ebb47a7b946240255e3a91e892abab5"> 5221</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a4ebb47a7b946240255e3a91e892abab5">item::disassembly_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;                             <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>, <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa68c87b5b76e6830a909f2f02a517d4a9">iteminfo_parts::DESCRIPTION_COMPONENTS_MADEFROM</a> ) ) {</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    }</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    <span class="keywordflow">if</span>( !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3097bde01b4addf9cfdd2d211c3ebf57">iteminfo_parts::DESCRIPTION_COMPONENTS_DISASSEMBLE</a> ) ) {</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    }</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160; </div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;    <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;dis = ( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a> ) ? <a class="code" href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">get_making</a>() :</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;                        <a class="code" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> &amp;req = dis.<a class="code" href="classrecipe.html#a555772480849b6e628c94dd0f56af81e">disassembly_requirements</a>();</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;    <span class="keywordflow">if</span>( !req.<a class="code" href="structrequirement__data.html#a7acde751aa71fb09c3272929afae503f">is_empty</a>() ) {</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;        <span class="keyword">const</span> std::string approx_time = <a class="code" href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a>( dis.<a class="code" href="classrecipe.html#a12122c53b7b7d28364c07465d4573d37">time_to_craft</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>(),</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;                                        <a class="code" href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a> ) );</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160; </div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;        <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a> &amp;comps_list = req.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>();</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;        <span class="keyword">const</span> std::string comps_str = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( comps_list,</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;        []( <span class="keyword">const</span> std::vector&lt;item_comp&gt; &amp;comp_opts ) {</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;            <span class="keywordflow">return</span> comp_opts.front().<a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>();</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;        } );</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160; </div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;        std::vector&lt;std::string&gt; reqs_list;</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;        <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#afa25e820b20f0a2ace91a174fafe648a">requirement_data::alter_tool_comp_vector</a> &amp;tools_list = req.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>();</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;tool_comp&gt; &amp;it : tools_list ) {</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;            <span class="keywordflow">if</span>( !it.empty() ) {</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;                reqs_list.push_back( it.front().to_string() );</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;            }</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;        }</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;        <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#a7aa4a6fdb32c1ef086a2d6a9518ff9d0">requirement_data::alter_quali_req_vector</a> &amp;quals_list = req.<a class="code" href="structrequirement__data.html#ad7733e9b478f08e7e6e1ef94057e3502">get_qualities</a>();</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;quality_requirement&gt; &amp;it : quals_list ) {</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;            <span class="keywordflow">if</span>( !it.empty() ) {</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;                reqs_list.push_back( it.front().to_colored_string() );</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;            }</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;        }</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160; </div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;        std::string descr;</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;        <span class="keywordflow">if</span>( reqs_list.empty() ) {</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;            <span class="comment">//~ 1 is approx. time (e.g. &#39;about 5 minutes&#39;), 2 is a list of items</span></div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;            descr = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Disassembly&lt;/bold&gt; takes %1$s and might yield: %2$s.&quot;</span> ),</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;                                   approx_time, comps_str );</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;            descr = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;                        <span class="comment">//~ 1 is approx. time, 2 is a list of items and tools with qualities, 3 is a list of items.</span></div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;                        <span class="comment">//~ Bold text in the middle makes it easier to see where the second list starts.</span></div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Disassembly&lt;/bold&gt; takes %1$s, requires %2$s and &lt;bold&gt;might yield&lt;/bold&gt;: %3$s.&quot;</span> ),</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;                        approx_time, <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( reqs_list ), comps_str );</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;        }</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160; </div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, descr );</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;    }</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;}</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160; </div>
<div class="line"><a name="l05276"></a><span class="lineno"><a class="line" href="classitem.html#a5f1bd1f37a27ac2a4c994b4123dba5e6"> 5276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a5f1bd1f37a27ac2a4c994b4123dba5e6">item::qualities_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;                           <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;    <span class="comment">// Inline function to emplace a given quality (and its level) onto the info vector</span></div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    <span class="keyword">auto</span> name_quality = [&amp;<a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>]( <span class="keyword">const</span> std::pair&lt;quality_id, int&gt; &amp;q ) {</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;        std::string str;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;        <span class="keywordflow">if</span>( q.first == <a class="code" href="item_8cpp.html#a3648d0ee246d4a66df0dcd8f2be595e8">qual_JACK</a> || q.first == <a class="code" href="item_8cpp.html#a5ffeadef52daa921bcfd6024526f8feb">qual_LIFT</a> ) {</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;            <span class="comment">//~ %1$d is the numeric quality level, and %2$s is the name of the quality.</span></div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;            <span class="comment">//~ %3$d is the amount of weight the jack can lift, and %4$s is the units of that weight.</span></div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;            str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Level &lt;info&gt;%1$d %2$s&lt;/info&gt; quality, &quot;</span></div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;                                    <span class="stringliteral">&quot;rated at &lt;info&gt;%3$d&lt;/info&gt; %4$s&quot;</span> ),</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;                                 q.second, q.first.obj().name,</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( <a class="code" href="item_8h.html#a6f5cb4c44e3212e41e7736890eacbbba">lifting_quality_to_mass</a>( q.second ) ) ),</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;                                 <a class="code" href="units__utility_8cpp.html#adb77a71aaad9051e5936082915961b2f">weight_units</a>() );</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;            <span class="comment">//~ %1$d is the numeric quality level, and %2$s is the name of the quality</span></div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;            str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Level &lt;info&gt;%1$d %2$s&lt;/info&gt; quality&quot;</span> ),</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;                                 q.second, q.first.obj().name );</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        }</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;QUALITIES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, str );</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;    };</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160; </div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;    <span class="comment">// List all qualities of this item granted by its item type</span></div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_any_qualities = !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.empty() || !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.empty();</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23c7a292a8e92a89bd6eaa5e7a0ce5e2">iteminfo_parts::QUALITIES</a> ) &amp;&amp; has_any_qualities ) {</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;        <span class="comment">// List all inherent (unconditional) qualities</span></div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a>.empty() ) {</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;QUALITIES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Has qualities&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;quality_id, int&gt; &amp;q : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a> ) ) {</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;                name_quality( q );</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;            }</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;        }</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;        <span class="comment">// Tools with &quot;charged_qualities&quot; defined may have additional qualities when charged.</span></div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;        <span class="comment">// List them, and show whether there is enough charge to use those qualities.</span></div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.empty() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>() &gt; 0 ) {</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;            <span class="comment">// Use ammo_sufficient() with player character to include bionic/UPS power</span></div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;<a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) ) {</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;QUALITIES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;good&gt;Has enough charges&lt;/good&gt; for qualities:&quot;</span> ) );</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;QUALITIES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bad&gt;Needs %d or more charges&lt;/bad&gt; for qualities:&quot;</span> ),</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;                                                  <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>() ) );</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;            }</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;quality_id, int&gt; &amp;q : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a> ) ) {</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;                name_quality( q );</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;            }</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;        }</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    }</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160; </div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;    <span class="comment">// Accumulate and list all qualities of items contained within this item</span></div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf44ed4a8e26c88133ccc064b0aa8f2d8">iteminfo_parts::QUALITIES_CONTAINED</a> ) &amp;&amp;</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8a6a3cd39a0f44b9cac5197ed38f184f">has_any_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;    return !e.type-&gt;qualities.empty();</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;    }, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160; </div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;QUALITIES&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Contains items with qualities:&quot;</span> ) );</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;        std::map&lt;quality_id, int, quality_id::LexCmp&gt; most_quality;</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>() ) {</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const quality_id, int&gt; &amp;q : e-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a> ) {</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;                <span class="keyword">auto</span> emplace_result = most_quality.emplace( q );</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;                <span class="keywordflow">if</span>( !emplace_result.second &amp;&amp;</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;                    most_quality.at( emplace_result.first-&gt;first ) &lt; q.second ) {</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;                    most_quality[ q.first ] = q.second;</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;                }</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;            }</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;        }</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const quality_id, int&gt; &amp;q : most_quality ) {</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;            name_quality( q );</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;        }</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;    }</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;}</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160; </div>
<div class="line"><a name="l05349"></a><span class="lineno"><a class="line" href="classitem.html#a6233ded50f0c2ddc86761f9b5cef5298"> 5349</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a6233ded50f0c2ddc86761f9b5cef5298">item::bionic_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;                        <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() ) {</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;    }</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160; </div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160; </div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;    <span class="comment">// TODO: Unhide when enforcing limits</span></div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;    <span class="keywordflow">if</span>( get_option &lt; bool &gt;( <span class="stringliteral">&quot;CBM_SLOTS_ENABLED&quot;</span> )</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;        &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa72caeb06228457a87054c4694a11bd7d">iteminfo_parts::DESCRIPTION_CBM_SLOTS</a> ) ) {</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="bionics_8cpp.html#a4d3af7661fa38a46bad775d2ee5419b5">list_occupied_bps</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id,</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This bionic is installed in the following body &quot;</span></div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;                              <span class="stringliteral">&quot;part(s):&quot;</span> ) ) );</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;    }</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160; </div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a> ) ) {</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This bionic is &lt;bad&gt;not sterile&lt;/bad&gt;, use an &lt;info&gt;autoclave&lt;/info&gt; and an &lt;info&gt;autoclave pouch&lt;/info&gt; to sterilize it. &quot;</span> ) );</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;    }</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160; </div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> bid = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id;</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;    <span class="keyword">const</span> std::vector&lt;material_id&gt; &amp;fuels = bid-&gt;<a class="code" href="structbionic__data.html#af544357a22cfa46822491eb947dcba49">fuel_opts</a>;</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;    <span class="keywordflow">if</span>( !fuels.empty() ) {</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;        <span class="keyword">const</span> std::string fuels_str = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( fuels,</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;info&gt;&quot;</span> + <span class="keywordtype">id</span>-&gt;name() + <span class="stringliteral">&quot;&lt;/info&gt;&quot;</span>;</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;        } );</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160; </div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;                           <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;* This bionic can produce power from the following fuel: &quot;</span>,</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;                                      <span class="stringliteral">&quot;* This bionic can produce power from the following fuels: &quot;</span>, fuels.size() )</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;                           + fuels_str );</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;    }</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160; </div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160; </div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <span class="keywordflow">if</span>( bid-&gt;<a class="code" href="structbionic__data.html#a46dddebc77b6ae7d8879c8b12fe02d4f">capacity</a> &gt; 0_mJ ) {</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;CBM&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Power Capacity&lt;/bold&gt;:&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; &lt;num&gt; mJ&quot;</span> ),</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;                           <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code" href="namespaceunits.html#a3ace0fc0f1c25f25ff4e75a2b2d22c29">units::to_millijoule</a>( bid-&gt;<a class="code" href="structbionic__data.html#a46dddebc77b6ae7d8879c8b12fe02d4f">capacity</a> ) ) );</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    }</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160; </div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160; </div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    <span class="keywordflow">if</span>( bid-&gt;<a class="code" href="structbionic__data.html#ac65e81046d312b60730341786da83042">required_bionic</a> ) {</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;CBM&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* This CBM requires another CBM to also be installed: %s&quot;</span>,</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;                           bid-&gt;<a class="code" href="structbionic__data.html#ac65e81046d312b60730341786da83042">required_bionic</a>-&gt;<a class="code" href="structbionic__data.html#a3cf96a3fc532f2c82b73924ab585451e">name</a> ) );</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;    }</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160; </div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;    <span class="comment">// TODO refactor these almost identical blocks</span></div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    <span class="keywordflow">if</span>( !bid-&gt;<a class="code" href="structbionic__data.html#aa169d20729343547cd14f8db2dc07c88">encumbrance</a>.empty() ) {</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Encumbrance&lt;/bold&gt;:&quot;</span> ),</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;bodypart_str_id, int&gt; &amp;element : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( bid-&gt;<a class="code" href="structbionic__data.html#aa169d20729343547cd14f8db2dc07c88">encumbrance</a> ) ) {</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;CBM&quot;</span>, <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="bodypart_8cpp.html#aaae2b06f9b4f3346236711e0140e3bf0">body_part_name_as_heading</a>( element.first.id(), 1 ),</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;                               <span class="stringliteral">&quot; &lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, element.second );</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;        }</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    }</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160; </div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    <span class="keywordflow">if</span>( !bid-&gt;<a class="code" href="structbionic__data.html#a8c9e4ced1429e0cfbb353e2c7bd9bc6d">env_protec</a>.empty() ) {</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Environmental Protection&lt;/bold&gt;:&quot;</span> ),</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt; bodypart_str_id, size_t &gt; &amp;element : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( bid-&gt;<a class="code" href="structbionic__data.html#a8c9e4ced1429e0cfbb353e2c7bd9bc6d">env_protec</a> ) ) {</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;CBM&quot;</span>, <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="bodypart_8cpp.html#aaae2b06f9b4f3346236711e0140e3bf0">body_part_name_as_heading</a>( element.first, 1 ),</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;                               <span class="stringliteral">&quot; &lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( element.second ) );</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;        }</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    }</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160; </div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__info__order.html">damage_info_order</a> &amp;dio : <a class="code" href="structdamage__info__order.html#af833d28c6a767a77ad046a57366d749f">damage_info_order::get_all</a>(</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;             <a class="code" href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fa6cebea0afe887cb6ef78b738eb7ab8a1">damage_info_order::info_type::BIO</a> ) ) {</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;        std::map&lt;bodypart_str_id, float&gt; dt_protec;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const bodypart_str_id, resistances&gt; &amp;prot : bid-&gt;<a class="code" href="structbionic__data.html#a06694835a11655f5202446d51f1e8e4b">protec</a> ) {</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;            <span class="keywordtype">float</span> res = prot.second.type_resist( dio.dmg_type );</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;            <span class="keywordflow">if</span>( res &gt;= 0.f ) {</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;                dt_protec.emplace( prot.first, res );</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;            }</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;        }</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;        <span class="keywordflow">if</span>( !dt_protec.empty() ) {</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;            <span class="comment">//~ Type of protection (ex: &quot;Bash Protection&quot;)</span></div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;            std::string <a class="code" href="structlabel.html">label</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s Protection&lt;/bold&gt;:&quot;</span> ),</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;                                               <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.dmg_type-&gt;name.translated() ) );</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="structlabel.html">label</a>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;bodypart_str_id, float&gt; &amp;element : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( dt_protec ) ) {</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;CBM&quot;</span>, <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="bodypart_8cpp.html#aaae2b06f9b4f3346236711e0140e3bf0">body_part_name_as_heading</a>( element.first, 1 ),</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;                                   <span class="stringliteral">&quot; &lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, element.second );</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;            }</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;        }</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;    }</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160; </div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;}</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160; </div>
<div class="line"><a name="l05445"></a><span class="lineno"><a class="line" href="classitem.html#aae7575192fd862f237fefaeeb76eedd0"> 5445</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aae7575192fd862f237fefaeeb76eedd0">item::melee_combat_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts,</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;                              <span class="keywordtype">int</span> <span class="comment">/*batch*/</span>,</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;                              <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160; </div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;    std::map&lt;damage_type_id, int&gt; dmg_types;</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__type.html">damage_type</a> &amp;dt : <a class="code" href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a>() ) {</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;        <span class="keywordflow">if</span>( dt.physical &amp;&amp; dt.melee_only ) {</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;            <span class="keywordtype">int</span> val = <a class="code" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">damage_melee</a>( dt.id );</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;            <span class="keywordflow">if</span>( val ) {</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;                dmg_types.emplace( dt.id, val );</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;            }</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;        }</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;    }</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160; </div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1c321648d4dd9c894f346daded141455">iteminfo_parts::BASE_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;        std::string sep;</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;        <span class="keywordflow">if</span>( !dmg_types.empty() ) {</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Melee damage&lt;/bold&gt;: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;        }</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dmg_type : dmg_types ) {</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;            <span class="keywordflow">if</span>( !dmg_type.first-&gt;melee_only ) {</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;            }</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, sep + <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dmg_type.first-&gt;name.translated() ) + <span class="stringliteral">&quot;: &quot;</span>,</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;                               <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, dmg_type.second );</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;            sep = <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>;</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;        }</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;    }</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160; </div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;    <span class="keywordflow">if</span>( !dmg_types.empty() ) {</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;        <span class="keywordtype">int</span> stam = 0;</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;        <span class="keywordtype">float</span> stam_pct = 0.0f;</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;        std::map&lt;std::string, double&gt; dps_data;</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160; </div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;        <span class="keywordtype">bool</span> base_tohit = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff564f8fd99c036ec6c012ad5a01d2f5">iteminfo_parts::BASE_TOHIT</a> );</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;        <span class="keywordtype">bool</span> base_moves = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa52620fa7ac46300572fe8ab4a186d1b0">iteminfo_parts::BASE_MOVES</a> );</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;        <span class="keywordtype">bool</span> base_dps = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa90c0b33fada34cb3046edcc25d25f93e">iteminfo_parts::BASE_DPS</a> );</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;        <span class="keywordtype">bool</span> base_stamina = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5fcac0a5daec3f6bcd73a2d0004f1a6a">iteminfo_parts::BASE_STAMINA</a> );</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;        <span class="keywordtype">bool</span> base_dpstam = parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa875044b9e87810a764dc01178665e57a">iteminfo_parts::BASE_DPSTAM</a> );</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160; </div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;        <span class="keywordflow">if</span>( base_stamina || base_dpstam ) {</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;            stam = player_character.<a class="code" href="classCharacter.html#a6d2728107f20687dd0402e6b98bde968">get_total_melee_stamina_cost</a>( <span class="keyword">this</span> ) * -1;</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;            stam_pct = std::truncf( stam * 1000.0 / player_character.<a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() ) / 10;</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;        }</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160; </div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;        <span class="keywordflow">if</span>( base_dps || base_dpstam ) {</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;            dps_data = <a class="code" href="classitem.html#af0875ee1532053dc7144147e34145d89">dps</a>( <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;        }</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160; </div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;        <span class="keywordflow">if</span>( base_tohit ) {</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;To-hit bonus: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">m_to_hit</a> );</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;        }</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160; </div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;        <span class="keywordflow">if</span>( base_moves ) {</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Base moves per attack: &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, <a class="code" href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c">attack_time</a>( player_character ) );</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;        }</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160; </div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;        <span class="keywordflow">if</span>( base_dps ) {</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Typical damage per second:&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;            std::string sep;</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, double&gt; &amp;dps_entry : dps_data ) {</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, sep + dps_entry.first + <span class="stringliteral">&quot;: &quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;                                   dps_entry.second );</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;                sep = <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>;</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;            }</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;        }</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160; </div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;        <span class="keywordflow">if</span>( base_stamina ) {</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Stamina use&lt;/bold&gt;: Costs &quot;</span> ), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> );</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, ( stam_pct ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;about &quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;less than &quot;</span> ) ), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>,</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;                               ( stam_pct &gt; 0.1 ? stam_pct : 0.1 ) );</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;% stamina to swing.&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;        }</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160; </div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;        <span class="keywordflow">if</span>( base_dpstam ) {</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Typical damage per stamina:&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;            std::string sep;</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, double&gt; &amp;dps_entry : dps_data ) {</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, sep + dps_entry.first + <span class="stringliteral">&quot;: &quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;                                   <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;                                   100 * dps_entry.second / stam );</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;                sep = <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>;</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;            }</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;        }</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    }</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160; </div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab5838b25437614ec77a9a8dee31e27f5">iteminfo_parts::DESCRIPTION_TECHNIQUES</a> ) ) {</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;        std::set&lt;matec_id&gt; all_techniques = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>;</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;        all_techniques.insert( <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.begin(), <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.end() );</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160; </div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;        <span class="keywordflow">if</span>( !all_techniques.empty() ) {</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;            <span class="keyword">const</span> std::vector&lt;matec_id&gt; all_tec_sorted = <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( all_techniques );</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Techniques when wielded&lt;/bold&gt;: &quot;</span> ) +</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;            <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( all_tec_sorted, []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> &amp; tid ) {</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;stat&gt;%s&lt;/stat&gt;: &lt;info&gt;%s&lt;/info&gt; &lt;info&gt;%s&lt;/info&gt;&quot;</span>, tid.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classma__technique.html#aafd9a1df0b2618374f169ddca0b392ca">name</a>,</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;                                      tid.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classma__technique.html#a63516053add4bcdfe2c74f47ec500e5b">description</a>, tid.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classma__technique.html#ae61db16a48210ee6d7e026180292fbb3">condition_desc</a> );</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;            } ) );</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;        }</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;    }</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160; </div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    <span class="comment">// display which martial arts styles character can use with this weapon</span></div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf5b11c68a15a74d1a95636d4af06c7fa">iteminfo_parts::DESCRIPTION_APPLICABLEMARTIALARTS</a> ) ) {</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;        <span class="keyword">const</span> std::string valid_styles = player_character.<a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;enumerate_known_styles(</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;                                             <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;        <span class="keywordflow">if</span>( !valid_styles.empty() ) {</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You know how to use this with these martial arts &quot;</span></div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;                                  <span class="stringliteral">&quot;styles: &quot;</span> ) + valid_styles );</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;        }</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;    }</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160; </div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a> ) &amp;&amp;</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab2afd4a6277b698ee512778caa6febf8">iteminfo_parts::DESCRIPTION_GUNMOD_ADDREACHATTACK</a> ) ) {</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af5cf62257c50aab58dba36dbb4d834f6">flag_REACH3</a> ) ) {</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can be used to make &lt;stat&gt;long reach &quot;</span></div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;                                  <span class="stringliteral">&quot;attacks&lt;/stat&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can be used to make &lt;stat&gt;reach &quot;</span></div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;                                  <span class="stringliteral">&quot;attacks&lt;/stat&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;        }</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;    }</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;<span class="comment">    ///\EFFECT_MELEE &gt;2 allows seeing melee damage stats on weapons</span></div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span>( ( player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="item_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> ) &gt;= 3 &amp;&amp;</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;          ( !dmg_types.empty() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">m_to_hit</a> &gt; 0 ) ) || <a class="code" href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;        <a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> = <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> );</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;        <a class="code" href="structdamage__instance.html">damage_instance</a> non_crit;</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;        player_character.<a class="code" href="classCharacter.html#a3b5ceae6740ffe700604539fa037bb62">roll_all_damage</a>( <span class="keyword">false</span>, non_crit, <span class="keyword">true</span>, *<span class="keyword">this</span>, <span class="stringliteral">&quot;WEAPON&quot;</span>, <span class="keyword">nullptr</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;        <a class="code" href="structdamage__instance.html">damage_instance</a> crit;</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;        player_character.<a class="code" href="classCharacter.html#a3b5ceae6740ffe700604539fa037bb62">roll_all_damage</a>( <span class="keyword">true</span>, crit, <span class="keyword">true</span>, *<span class="keyword">this</span>, <span class="stringliteral">&quot;WEAPON&quot;</span>, <span class="keyword">nullptr</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;        <span class="keywordtype">int</span> attack_cost = player_character.<a class="code" href="classCharacter.html#a5f7078fd5aa2cb335228c0d205497ed6">attack_speed</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb04b55844124d02ab4f05a877a0a0ea">iteminfo_parts::DESCRIPTION_MELEEDMG</a> ) ) {</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Average melee damage&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;        }</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;        <span class="comment">// Chance of critical hit</span></div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa77442a937fb6af35a59186ae8128306b">iteminfo_parts::DESCRIPTION_MELEEDMG_CRIT</a> ) ) {</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Critical hit chance &lt;neutral&gt;%d%% - %d%%&lt;/neutral&gt;&quot;</span> ),</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;                                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( player_character.<a class="code" href="classCharacter.html#a938cbb0dad93f07152c6e81fd270b153">crit_chance</a>( 0, 100, *<span class="keyword">this</span> ) *</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;                                                      100 ),</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;                                              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( player_character.<a class="code" href="classCharacter.html#a938cbb0dad93f07152c6e81fd270b153">crit_chance</a>( 100, 0, *<span class="keyword">this</span> ) *</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;                                                      100 ) ) );</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;        }</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4298ef35129a33a7e3899630e2847fda">iteminfo_parts::DESCRIPTION_MELEEDMG_TYPES</a> ) ) {</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__info__order.html">damage_info_order</a> &amp;dio : <a class="code" href="structdamage__info__order.html#af833d28c6a767a77ad046a57366d749f">damage_info_order::get_all</a>(</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;                     <a class="code" href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fae83355135c37d83b1c8e9dde5b446151">damage_info_order::info_type::MELEE</a> ) ) {</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;                <span class="comment">// NOTE: Using &quot;BASE&quot; instead of &quot;DESCRIPTION&quot;, so numerical formatting will work</span></div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;                <span class="comment">// (output.cpp:format_item_info does not interpolate &lt;num&gt; for DESCRIPTION info)</span></div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: &quot;</span>, <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( dio.verb.translated() ) ),</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;                                   <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>, non_crit.<a class="code" href="structdamage__instance.html#a7894635fbb0cc5902154ff39fdc9ea2b">type_damage</a>( dio.dmg_type ) );</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;                <span class="comment">//~ Label used in the melee damage section in the item info screen (ex: &quot;  Critical bash: &quot;)</span></div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;                <span class="comment">//~ %1$s = a prepended space, %2$s = the name of the damage type (bash, cut, pierce, etc.)</span></div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$sCritical %2$s: &quot;</span> ), <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>,</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;                                   dio.dmg_type-&gt;name.translated() ),</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;                                   <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a>, crit.<a class="code" href="structdamage__instance.html#a7894635fbb0cc5902154ff39fdc9ea2b">type_damage</a>( dio.dmg_type ) );</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;            }</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;        }</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;        <span class="comment">// Moves</span></div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad0a3f4aa5c78e900f55d39ba41d6c9ff">iteminfo_parts::DESCRIPTION_MELEEDMG_MOVES</a> ) ) {</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Adjusted moves per attack: &quot;</span> ), <span class="stringliteral">&quot;&lt;num&gt;&quot;</span>,</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;                               <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>, attack_cost );</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;        }</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="item_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a> ) &lt; 3 &amp;&amp;</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;               ( !dmg_types.empty() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">m_to_hit</a> &gt; 0 ) ) {</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb04b55844124d02ab4f05a877a0a0ea">iteminfo_parts::DESCRIPTION_MELEEDMG</a> ) ) {</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Average melee damage&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t know enough about fighting to know how effectively you could use this.&quot;</span> ) );</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;        }</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;    }</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;}</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160; </div>
<div class="line"><a name="l05635"></a><span class="lineno"><a class="line" href="classitem.html#a219a2cb372b167889ab732c9e33a70c5"> 5635</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a219a2cb372b167889ab732c9e33a70c5">item::contents_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch,</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;                          <span class="keywordtype">bool</span> <span class="comment">/*debug*/</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() &amp;&amp; <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() &amp;&amp; <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() ) ||</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;        !parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7087619a79dc1f23208e2aaf2e1ad12b">iteminfo_parts::DESCRIPTION_CONTENTS</a> ) ) {</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;    }</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160; </div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() : <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>() ) {</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;        <span class="comment">// mod_str = &quot;(Integrated) Mod: %mod_name% (%mod_location%) &quot;</span></div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;        std::string mod_str;</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;is_irremovable() ) {</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;            mod_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Integrated mod: &quot;</span> );</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;            mod_str = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mod: &quot;</span> );</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;        }</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;        mod_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bold&gt;%s&lt;/bold&gt;&quot;</span>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;tname() );</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod ) {</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;            mod_str += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%s) &quot;</span>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;location.name() );</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;        }</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, mod_str );</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;description.translated() );</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;    }</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    <span class="keywordtype">bool</span> contents_header = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *contents_item : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>() ) {</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;        <span class="keywordflow">if</span>( !contents_header ) {</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Contents of this item&lt;/bold&gt;:&quot;</span> ) );</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;            contents_header = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;            <span class="comment">// Separate items with a blank line</span></div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> );</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;        }</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160; </div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtranslation.html">translation</a> &amp;description = contents_item-&gt;type-&gt;description;</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160; </div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;        <span class="keywordflow">if</span>( contents_item-&gt;made_of_from_type( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::volume</a> contents_volume = contents_item-&gt;volume() * batch;</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( contents_item-&gt;display_name(),</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;                               contents_item-&gt;color_in_inventory() ) );</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <a class="code" href="item_8cpp.html#a617cda6dfe4d90ab4f9fac6cb1651c3b">vol_to_info</a>( <span class="stringliteral">&quot;CONTAINER&quot;</span>, description + <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a>, contents_volume ) );</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( contents_item-&gt;display_name(),</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;                               contents_item-&gt;color_in_inventory() ) );</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, description.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>() );</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;        }</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    }</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;}</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160; </div>
<div class="line"><a name="l05686"></a><span class="lineno"><a class="line" href="classitem.html#aa8f260a5078a26c0bbd1f1f4fd184721"> 5686</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aa8f260a5078a26c0bbd1f1f4fd184721">item::properties_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch,</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;                            <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;    }</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160; </div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160; </div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf69c0403f5998ebed28c7377c75cf753">iteminfo_parts::BASE_RIGIDITY</a> ) ) {</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;        <span class="keywordtype">bool</span> not_rigid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;        <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>() ) {</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;            <span class="keywordtype">bool</span> any_encumb_increase = std::any_of( t-&gt;data.begin(), t-&gt;data.end(),</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp; data ) {</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;                return data.encumber != data.max_encumber;</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;            } );</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;            <span class="keywordflow">if</span>( any_encumb_increase ) {</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item&#39;s pockets are &lt;info&gt;not rigid&lt;/info&gt;.  Its&quot;</span></div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;                                      <span class="stringliteral">&quot; volume and encumbrance increase with contents.&quot;</span> ) );</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;                not_rigid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;            }</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;        }</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;        <span class="keywordflow">if</span>( !not_rigid &amp;&amp; !<a class="code" href="classitem.html#a75713034c5248d9f6305822f2e976222">all_pockets_rigid</a>() &amp;&amp; !<a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item&#39;s pockets are &lt;info&gt;not rigid&lt;/info&gt;.  Its&quot;</span></div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                                  <span class="stringliteral">&quot; volume increases with contents.&quot;</span> ) );</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;        }</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;    }</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160; </div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa02b2ee1cfc05bf8c73324c9882afe557">iteminfo_parts::DESCRIPTION_CONDUCTIVITY</a> ) ) {</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2cce9a58e90e7bcc596240004ac54288">conductive</a>() ) {</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item &lt;good&gt;does not &quot;</span></div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;                                          <span class="stringliteral">&quot;conduct&lt;/good&gt; electricity.&quot;</span> ) );</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae4e605cf7ef27103856049f726bcfdc8">flag_CONDUCTIVE</a> ) ) {</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>,</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item effectively &lt;bad&gt;conducts&lt;/bad&gt; &quot;</span></div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;                                  <span class="stringliteral">&quot;electricity, as it has no guard.&quot;</span> ) );</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item &lt;bad&gt;conducts&lt;/bad&gt; electricity.&quot;</span> ) );</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;        }</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;    }</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160; </div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa684af65c6df05045e79e249dcb823f99">iteminfo_parts::DESCRIPTION_FLAGS</a> ) ) {</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;        <span class="comment">// concatenate base and acquired flags...</span></div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;        <a class="code" href="classcata_1_1flat__set.html">cata::flat_set&lt;flag_id&gt;</a> flags;</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;        flags.<a class="code" href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">insert</a>( <a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>().begin(), <a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>().<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">end</a>() );</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;        flags.<a class="code" href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">insert</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>().begin(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>().end() );</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;        flags.<a class="code" href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">insert</a>( <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.begin(), <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.end() );</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160; </div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;        <span class="comment">// ...and display those which have an info description</span></div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;e : <a class="code" href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a>( flags ) ) {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;            <span class="keyword">const</span> <a class="code" href="classjson__flag.html">json_flag</a> &amp;f = e.obj();</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;            <span class="keywordflow">if</span>( !f.<a class="code" href="classjson__flag.html#a4e37aa18092793ee949dda50f9fd5ad2">info</a>().empty() ) {</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, f.<a class="code" href="classjson__flag.html#a4e37aa18092793ee949dda50f9fd5ad2">info</a>() ) );</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;            }</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;        }</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;    }</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160; </div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;    <a class="code" href="classitem.html#ac46c94fbae3a31ba0e21f348875a3e74">armor_fit_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160; </div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> ) {</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item disappears as soon as its timer runs out, unless it is permanent or a comestible.&quot;</span> ) );</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    }</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160; </div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a> ) &amp;&amp;</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadf835c38764a7e0322a8c9745f8025f9">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION</a> ) ) {</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a> ) ) {</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item has been modified to listen to &lt;info&gt;radio &quot;</span></div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;                                  <span class="stringliteral">&quot;signals&lt;/info&gt;.  It can still be activated manually.&quot;</span> ) );</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can only be activated by a &lt;info&gt;radio &quot;</span></div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;                                  <span class="stringliteral">&quot;signal&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;        }</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160; </div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;        std::string signame;</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a20d9b9b13ede35084497c208f9938184">flag_RADIOSIGNAL_1</a> ) ) {</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;            signame = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_c_red&gt;red&lt;/color&gt; radio signal&quot;</span> );</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7b1205d03feada08c8559220b861548a">flag_RADIOSIGNAL_2</a> ) ) {</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;            signame = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_c_blue&gt;blue&lt;/color&gt; radio signal&quot;</span> );</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a174140adb2da2c8f0ec6e3779cc5aee2">flag_RADIOSIGNAL_3</a> ) ) {</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;            signame = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_c_green&gt;green&lt;/color&gt; radio signal&quot;</span> );</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;        }</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa57b3ed51f4fb96ad22d4cae36bef975f">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION_CHANNEL</a> ) ) {</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;                               <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* It will be activated by the %s.&quot;</span> ),</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;                                              signame ) );</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;        }</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160; </div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6315fddde1392c4f6fa530a3e2ab1cc7">flag_RADIO_INVOKE_PROC</a> ) &amp;&amp;</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;            parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac8b25c720b60691923e3e81192cc4185">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION_PROC</a> ) ) {</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* Activating this item with a &lt;info&gt;radio signal&lt;/info&gt; will &quot;</span></div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;                                  <span class="stringliteral">&quot;&lt;neutral&gt;detonate&lt;/neutral&gt; it immediately.&quot;</span> ) );</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;        }</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;    }</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160; </div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa816251e60133694a4a2202fb7c52c91a">iteminfo_parts::DESCRIPTION_DIE</a> ) &amp;&amp; this-&gt;get_var( <span class="stringliteral">&quot;die_num_sides&quot;</span>, 0 ) != 0 ) {</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;                           <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can be used as a &lt;info&gt;die&lt;/info&gt;, &quot;</span></div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;                                             <span class="stringliteral">&quot;and has &lt;info&gt;%d&lt;/info&gt; sides.&quot;</span> ),</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;                                          <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( this-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;die_num_sides&quot;</span>,</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;                                                  0 ) ) ) );</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;    }</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160; </div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;}</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160; </div>
<div class="line"><a name="l05796"></a><span class="lineno"><a class="line" href="classitem.html#ae2393a9b4e31f34c14c0f3496ef938a4"> 5796</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae2393a9b4e31f34c14c0f3496ef938a4">item::final_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch,</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;                       <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;    }</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160; </div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160; </div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6f6f3fef65c1799282e6f0e6737a15d0">flag_LEAK_DAM</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a82194a206f84ad991a75e480359d8698">flag_RADIOACTIVE</a> ) &amp;&amp; <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;        &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8dba4b60e82bdf811f35108884eb0c9a">iteminfo_parts::DESCRIPTION_RADIOACTIVITY_DAMAGED</a> ) ) {</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* The casing of this item has &lt;neutral&gt;cracked&lt;/neutral&gt;, &quot;</span></div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;                              <span class="stringliteral">&quot;revealing an &lt;info&gt;ominous green glow&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;    }</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160; </div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a62f31284e240af57f1ccb9b19a39c161">flag_LEAK_ALWAYS</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a82194a206f84ad991a75e480359d8698">flag_RADIOACTIVE</a> ) &amp;&amp;</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;        parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadd581caa6dcfb7e4078b28e30553e329">iteminfo_parts::DESCRIPTION_RADIOACTIVITY_ALWAYS</a> ) ) {</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This object is &lt;neutral&gt;surrounded&lt;/neutral&gt; by a &quot;</span></div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;                              <span class="stringliteral">&quot;&lt;info&gt;sickly green glow&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;    }</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160; </div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">milling_data</a> &amp;&amp; !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">milling_data</a>-&gt;into_.is_null() ) {</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab146a165148526b4cf89907a5eb4c179">iteminfo_parts::DESCRIPTION_MILLEABLE</a> ) ) {</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160; </div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;            <span class="keyword">const</span> <a class="code" href="classislot__milling.html">islot_milling</a> &amp;mdata = *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">milling_data</a>;</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;            <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> rec = *mdata.<a class="code" href="classislot__milling.html#a7c8dd425808713f7b18e5c3a0e678ac7">recipe_</a>;</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160; </div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;            <span class="keywordflow">if</span>( rec.<a class="code" href="classrecipe.html#aaaa0b3bc09bae85e498281e619aaba48">is_null</a>() ) {</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failed to find milling recipe for %s.&quot;</span> ),</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;                          this-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( 1, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> product_size = rec.<a class="code" href="classrecipe.html#a5c4a4110edf3bd4a33732d4fd8a9d53f">makes_amount</a>();</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;                <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a> &amp;<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> =</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;                    rec.<a class="code" href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">simple_requirements</a>().<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>();</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;                <span class="keywordtype">int</span> lot_size = 0;</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160; </div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;                <span class="comment">// Making the assumption that milling only uses a single type of input product. Support for mixed products would require additional logic.</span></div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;                <span class="comment">// We also make the assumption that this is the only relevant input, so if lubricants etc. was to be added more logic would be needed.</span></div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;item_comp&gt; &amp;<a class="code" href="structcomponent.html">component</a> : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitem__comp.html">item_comp</a> &amp;comp : <a class="code" href="structcomponent.html">component</a> ) {</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;                        <span class="keywordflow">if</span>( comp.type == this-&gt;typeId() ) {</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;                            lot_size = comp.count;</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;                        }</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;                    }</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160; </div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;                    <span class="keywordflow">if</span>( lot_size &gt; 0 ) {</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;                    }</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;                }</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160; </div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;                <span class="keywordflow">if</span>( lot_size == 0 ) {</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failed to find milling recipe for %s. It can&#39;t be milled.&quot;</span> ),</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;                              this-&gt;<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>().c_str() );</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;                    std::string rate_info = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;                                                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* &lt;neutral&gt;%d %s&lt;/neutral&gt; can be turned into &lt;neutral&gt;%d %s&lt;/neutral&gt;.&quot;</span> ),</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;                                                lot_size,</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;                                                <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( lot_size ), product_size,</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;                                                mdata.<a class="code" href="classislot__milling.html#aa8ae9e815c2a51ce3d78ee40b95c18d7">into_</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( product_size ) );</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160; </div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;                                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* This item can be &lt;info&gt;milled&lt;/info&gt;.&quot;</span> ) ) );</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, rate_info );</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;                }</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;            }</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;        }</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;    }</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160; </div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>() ) {</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;brewed = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa56d9e37dc7f27fdedca6f786acf78bf7">iteminfo_parts::DESCRIPTION_BREWABLE_DURATION</a> ) ) {</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;            <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> btime = brewed.<a class="code" href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">brewing_time</a>();</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;            <span class="keywordtype">int</span> btime_i = to_days&lt;int&gt;( btime );</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;            <span class="keywordflow">if</span>( btime &lt;= 2_days ) {</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;                btime_i = to_hours&lt;int&gt;( btime );</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;* Once set in a vat, this &quot;</span></div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;                                                  <span class="stringliteral">&quot;will ferment in around %d hour.&quot;</span>,</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;                                                  <span class="stringliteral">&quot;* Once set in a vat, this will ferment in &quot;</span></div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;                                                  <span class="stringliteral">&quot;around %d hours.&quot;</span>, btime_i ), btime_i ) );</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;* Once set in a vat, this &quot;</span></div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;                                                  <span class="stringliteral">&quot;will ferment in around %d day.&quot;</span>,</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;                                                  <span class="stringliteral">&quot;* Once set in a vat, this will ferment in &quot;</span></div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;                                                  <span class="stringliteral">&quot;around %d days.&quot;</span>, btime_i ), btime_i ) );</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;            }</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;        }</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa62d4071aabf7f7291f31959e440cd966">iteminfo_parts::DESCRIPTION_BREWABLE_PRODUCTS</a> ) ) {</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;res : brewed.<a class="code" href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb">brewing_results</a>() ) {</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* Fermenting this will produce &quot;</span></div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;                                                     <span class="stringliteral">&quot;&lt;neutral&gt;%s&lt;/neutral&gt;.&quot;</span> ),</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;                                                  res.first-&gt;nname( res.second ) ) );</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;            }</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;        }</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;    }</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160; </div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">is_compostable</a>() ) {</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;composted = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac2ba20d0d2498b78062040c97f37f63f">iteminfo_parts::DESCRIPTION_COMPOSTABLE_DURATION</a> ) ) {</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;            <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> btime = composted.<a class="code" href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8">composting_time</a>();</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;            <span class="keywordtype">int</span> btime_i = to_days&lt;int&gt;( btime );</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;            <span class="keywordflow">if</span>( btime &lt;= 2_days ) {</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;                btime_i = to_hours&lt;int&gt;( btime );</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;* Once set in an anaerobic digester, this &quot;</span></div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;                                                  <span class="stringliteral">&quot;will ferment in around %d hour.&quot;</span>,</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;                                                  <span class="stringliteral">&quot;* Once set in an anaerobic digester, this will ferment in &quot;</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;                                                  <span class="stringliteral">&quot;around %d hours.&quot;</span>, btime_i ), btime_i ) );</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;* Once set in an anaerobic digester, this &quot;</span></div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;                                                  <span class="stringliteral">&quot;will ferment in around %d day.&quot;</span>,</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;                                                  <span class="stringliteral">&quot;* Once set in an anaerobic digester, this will ferment in &quot;</span></div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;                                                  <span class="stringliteral">&quot;around %d days.&quot;</span>, btime_i ), btime_i ) );</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;            }</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;        }</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;        <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa47e513a56d92c80234a2870e9c2b46dd">iteminfo_parts::DESCRIPTION_COMPOSTABLE_PRODUCTS</a> ) ) {</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;res : composted.<a class="code" href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">composting_results</a>() ) {</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* Fermenting this will produce &quot;</span></div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;                                                     <span class="stringliteral">&quot;&lt;neutral&gt;%s&lt;/neutral&gt;.&quot;</span> ),</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;                                                  res.first-&gt;nname( res.second ) ) );</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;            }</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;        }</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;    }</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160; </div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6a938bcf44eb5ee746d9f76f10fa3c98">iteminfo_parts::DESCRIPTION_FAULTS</a> ) ) {</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> &amp;e : <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a> ) {</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;            <span class="comment">//~ %1$s is the name of a fault and %2$s is the description of the fault</span></div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;* &lt;bad&gt;%1$s&lt;/bad&gt;.  %2$s&quot;</span> ),</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;                               e.obj().name(), e.obj().description() ) );</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;        }</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;    }</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160; </div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;    <span class="comment">// does the item fit in any holsters?</span></div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;    std::vector&lt;const itype *&gt; holsters = <a class="code" href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">Item_factory::find</a>( [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp; e ) {</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;        <span class="keywordflow">if</span>( !e.<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;holster&quot;</span> ) ) {</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;            return false;</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;        }</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;        <span class="keyword">const</span> <a class="code" href="classholster__actor.html">holster_actor</a> *ptr = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classholster__actor.html">holster_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;                                   ( e.<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;holster&quot;</span> )-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> holster_item( &amp;e );</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;        <span class="keywordflow">return</span> ptr-&gt;<a class="code" href="classitem.html#a76165a9e0121b48e5df59d0fcabc1728">can_holster</a>( holster_item, *<span class="keyword">this</span> ) &amp;&amp; !<a class="code" href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a>( holster_item.typeId() );</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;    } );</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160; </div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;    <span class="keywordflow">if</span>( !holsters.empty() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad25e1ad70042be7b6a83d94dc7ec02c6">iteminfo_parts::DESCRIPTION_HOLSTERS</a> ) ) {</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;        std::vector&lt;std::string&gt; holsters_str;</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;        holsters_str.reserve( holsters.size() );</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *e : holsters ) {</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;            holsters_str.emplace_back( player_character.<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( e-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() )</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;                                       ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;good&gt;%s&lt;/good&gt;&quot;</span>, e-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) )</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;                                       : e-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) );</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;        }</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;bold&gt;Can be stored in&lt;/bold&gt;: &quot;</span> ) +</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;                           <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( holsters_str, 30 ) );</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().sName += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;    }</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160; </div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa73a99ae46e1eb6f0d9e007bbc43d1aa0">iteminfo_parts::DESCRIPTION_ACTIVATABLE_TRANSFORMATION</a> ) ) {</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a> ) {</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;            <span class="keyword">const</span> <a class="code" href="classdelayed__transform__iuse.html">delayed_transform_iuse</a> *tt = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classdelayed__transform__iuse.html">delayed_transform_iuse</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;                                               ( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.second.get_actor_ptr() );</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;            <span class="keywordflow">if</span>( tt == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;            }</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> time_to_do = tt-&gt;<a class="code" href="classdelayed__transform__iuse.html#a083d8a58f26d025d8331f01e5c41c6ab">time_to_do</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;            <span class="keywordflow">if</span>( time_to_do &lt;= 0 ) {</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s done and &lt;info&gt;can be activated&lt;/info&gt;.&quot;</span> ) );</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;                <span class="keyword">const</span> std::string time = <a class="code" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( time_to_do ) );</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;                                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will be done in %s.&quot;</span> ),</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;                                                  time.c_str() ) );</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;            }</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;        }</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;    }</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160; </div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;    std::map&lt;std::string, std::string&gt;::const_iterator item_note = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <span class="stringliteral">&quot;item_note&quot;</span> );</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160; </div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;    <span class="keywordflow">if</span>( item_note != <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef9ed3c3dfaa9742675bccedcbb7eb5d">iteminfo_parts::DESCRIPTION_NOTES</a> ) ) {</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;        std::string ntext;</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;        std::map&lt;std::string, std::string&gt;::const_iterator item_note_tool =</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;            <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <span class="stringliteral">&quot;item_note_tool&quot;</span> );</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *use_func =</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;            item_note_tool != <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ?</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;            <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template(</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;                <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( item_note_tool-&gt;second ) )-&gt;get_use( <span class="stringliteral">&quot;inscribe&quot;</span> ) :</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;            <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinscribe__actor.html">inscribe_actor</a> *use_actor =</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;            use_func ? <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classinscribe__actor.html">inscribe_actor</a> *<span class="keyword">&gt;</span>( use_func-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() ) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;        <span class="keywordflow">if</span>( use_actor ) {</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;            <span class="comment">//~ %1$s: gerund (e.g. carved), %2$s: item name, %3$s: inscription text</span></div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;            ntext = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;carving&quot;</span>, <span class="stringliteral">&quot;%1$s on the %2$s is: %3$s&quot;</span> ),</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;                                   use_actor-&gt;<a class="code" href="classinscribe__actor.html#a7c6b1d6a65059ab89625cd314c5c50b6">gerund</a>, <a class="code" href="namespacetname.html">tname</a>(), item_note-&gt;second );</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;            <span class="comment">//~ %1$s: inscription text</span></div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;            ntext = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;carving&quot;</span>, <span class="stringliteral">&quot;Note: %1$s&quot;</span> ), item_note-&gt;second );</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;        }</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, ntext );</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;    }</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160; </div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;    <span class="comment">// Price and barter value</span></div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> price_preapoc = <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a>( <span class="keyword">false</span> ) * batch;</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> price_postapoc = <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a>( <span class="keyword">true</span> ) * batch;</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf274919abb7f766dc610cb2b52cccea9">iteminfo_parts::BASE_PRICE</a> ) ) {</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Price: &quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;$&lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a> | <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>,</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;                           <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( price_preapoc ) / 100 );</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;    }</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;    <span class="keywordflow">if</span>( price_preapoc != price_postapoc &amp;&amp; parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6969097b379c9c7fcb8105d3d51d13a6">iteminfo_parts::BASE_BARTER</a> ) ) {</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;BASE&quot;</span>, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">space</a> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Barter value: &quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;$&lt;num&gt;&quot;</span> ),</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;                           <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>,</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;                           <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( price_postapoc ) / 100 );</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;    }</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160; </div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;    <span class="comment">// Recipes using this item as an ingredient</span></div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef58b71886978f09ff0d371bcb367485">iteminfo_parts::DESCRIPTION_APPLICABLE_RECIPES</a> ) ) {</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;        <span class="comment">// with the inventory display allowing you to select items, showing the things you could make with contained items could be confusing.</span></div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;tid = <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = player_character.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;        <span class="keyword">const</span> <a class="code" href="classrecipe__subset.html">recipe_subset</a> available_recipe_subset = player_character.<a class="code" href="classCharacter.html#aa6f6059b227a5cae968cb85a91a1c501">get_group_available_recipes</a>();</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;        <span class="keyword">const</span> std::set&lt;const recipe *&gt; &amp;item_recipes = available_recipe_subset.<a class="code" href="classrecipe__subset.html#ab4acb1f4fcfc79a7415a55e2eeda9a95">of_component</a>( tid );</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160; </div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;        <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;        <span class="keywordflow">if</span>( item_recipes.empty() ) {</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You know of nothing you could craft with it.&quot;</span> ) );</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;            std::vector&lt;std::string&gt; crafts;</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *r : item_recipes ) {</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> can_make = r-&gt;deduped_requirements()</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;                                      .can_make_with_inventory( crafting_inv, r-&gt;get_component_filter() );</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160; </div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;                <span class="comment">// Endarken recipes that can&#39;t be constructed with the survivor&#39;s inventory</span></div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;                <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = r-&gt;result_name( <span class="comment">/* decorated = */</span> <span class="keyword">true</span> );</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;                crafts.emplace_back( can_make ? <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> : <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;dark&gt;%s&lt;/dark&gt;&quot;</span>, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) );</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;            }</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;            <span class="keyword">const</span> std::string recipes = <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( crafts, 15 );</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot; DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You could use it to craft: %s&quot;</span> ), recipes ) );</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;        }</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;    }</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160; </div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() ) {</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;        <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_wear = player_character.<a class="code" href="classCharacter.html#ab8bb62a82f437cb52719b9862a967311">can_wear</a>( *<span class="keyword">this</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;        <span class="keywordflow">if</span>( !can_wear.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;            <span class="comment">// can_wear returns a translated string</span></div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;bad&gt;%s&lt;/bad&gt;&quot;</span>, can_wear.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() ) );</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;        }</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;    }</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160; </div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;    <span class="comment">// Vehicle parts or appliances using this item as a component</span></div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;    <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0ddc7f830553f82434d009830fcf3cc2">iteminfo_parts::DESCRIPTION_VEHICLE_PARTS</a> ) ) {</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> tid = <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;        std::vector&lt;vpart_info&gt; vparts;</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160; </div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;vpi : <a class="code" href="namespacevehicles_1_1parts.html#a1760b563889a67b60d887f2cd6331846">vehicles::parts::get_all</a>() ) {</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;            <span class="keywordflow">if</span>( vpi.base_item == tid ) {</div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;                vparts.push_back( vpi );</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;            }</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;        }</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160; </div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> print_parts = [&amp;<a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, &amp;player_character](</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;                                     <span class="keyword">const</span> std::vector&lt;vpart_info&gt; &amp;vparts,</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;                                     <span class="keyword">const</span> std::string_view install_where,</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;                                     <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp; )&gt; &amp;predicate</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;        ) {</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;            std::vector&lt;std::string&gt; result_parts;</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;vp : vparts ) {</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> is_duplicate = std::any_of( result_parts.begin(), result_parts.end(),</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;                [<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = vp.name()]( <span class="keyword">const</span> std::string &amp; r ) {</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;                    return r == name;</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;                } );</div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160; </div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;                <span class="keywordflow">if</span>( is_duplicate || !predicate( vp ) ) {</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;                    <span class="keywordflow">continue</span>; <span class="comment">// skip part variants, they have same part names</span></div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;                }</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160; </div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> can_install = player_character.<a class="code" href="classCharacter.html#afc4d3be0006e7ac9643b568bcf531ae9">meets_skill_requirements</a>( vp.install_skills );</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;                <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = vp.name();</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160; </div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;                <span class="comment">// Endarken parts that can&#39;t be installed with the character&#39;s skills</span></div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;                result_parts.emplace_back( can_install ? <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> : <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;dark&gt;%s&lt;/dark&gt;&quot;</span>, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) );</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;            }</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160; </div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;            <span class="keywordflow">if</span>( result_parts.empty() ) {</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;            }</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160; </div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;            <span class="keyword">const</span> std::string installable_parts = <a class="code" href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a>( result_parts, 15 );</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160; </div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;            <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot; DESCRIPTION&quot;</span>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( install_where, installable_parts ) );</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;        };</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160; </div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;        print_parts( vparts, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You could install it in a vehicle: %s&quot;</span> ),</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp; vp ) {</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;            <span class="keywordflow">return</span> !vp.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea8f0159e32409b47888df99c01106fdb5">vpart_bitflags::VPFLAG_APPLIANCE</a> );</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;        } );</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160; </div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;        print_parts( vparts, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You could install it as an appliance: %s&quot;</span> ),</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp; vp ) {</div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;            <span class="keywordflow">return</span> vp.<a class="code" href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">has_flag</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea8f0159e32409b47888df99c01106fdb5">vpart_bitflags::VPFLAG_APPLIANCE</a> );</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;        } );</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;    }</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;}</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160; </div>
<div class="line"><a name="l06113"></a><span class="lineno"><a class="line" href="classitem.html#abcf5c589c501dad415ff5ea3de4b1283"> 6113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#abcf5c589c501dad415ff5ea3de4b1283">item::ascii_art_info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> * <span class="comment">/* parts */</span>,</div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;                           <span class="keywordtype">int</span>  <span class="comment">/* batch */</span>,</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;                           <span class="keywordtype">bool</span> <span class="comment">/* debug */</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;    }</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160; </div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;ENABLE_ASCII_ART&quot;</span> ) ) {</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;        <a class="code" href="classstring__id.html">ascii_art_id</a> art = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4025c470ee962b556a984ad5acbf9e63">picture_id</a>;</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().art.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;            art = <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#a39162967165d0c5b34215f5db409abf9">art</a>;</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;        }</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;        <span class="keywordflow">if</span>( art.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;            <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;<a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : art-&gt;<a class="code" href="classascii__art.html#ad15e094a0d8a2cd64309e4d943f10f39">picture</a> ) {</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;                <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>, <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> );</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;            }</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;        }</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;    }</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;}</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160; </div>
<div class="line"><a name="l06135"></a><span class="lineno"><a class="line" href="classitem.html#ad6d0b5a4ccc9ab29dfd13c83e02313b1"> 6135</a></span>&#160;std::string <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a>( std::vector&lt;iteminfo&gt; &amp;info, <span class="keyword">const</span> <a class="code" href="classiteminfo__query.html">iteminfo_query</a> *parts, <span class="keywordtype">int</span> batch )<span class="keyword"> const</span></div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a>;</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160; </div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;    <span class="keywordflow">if</span>( parts == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;        parts = &amp;<a class="code" href="classiteminfo__query.html#a5bd07a0642fad2dcf4e6a6d1484a41b9">iteminfo_query::all</a>;</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;    }</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160; </div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.clear();</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160; </div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;        <a class="code" href="classitem.html#ad4e3984fc584c1fa9a77b6cee933d355">basic_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;        <a class="code" href="classitem.html#acfb5cbbf8bdda521d5c8c8b667ae478d">debug_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    }</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160; </div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;    <span class="comment">// Different items might want to present the info blocks in different order, depending on what</span></div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;    <span class="comment">// they consider more relevant.</span></div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    std::vector&lt;std::string&gt; all_info_blocks = {<span class="stringliteral">&quot;big_block_of_stuff&quot;</span>, <span class="stringliteral">&quot;contents&quot;</span>, <span class="stringliteral">&quot;melee_combat_info&quot;</span>, <span class="stringliteral">&quot;footer&quot;</span>};</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;    std::vector&lt;std::string&gt; prio_info_blocks = { };</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;    <a class="code" href="classstring__id.html">item_category_id</a> my_cat_id = <a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>().<a class="code" href="classitem__category.html#a5c37c8230f0eea1de063a9bf3e884dc1">id</a>;</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a14558695307ad3352ca95c16ee4f6ed3">is_maybe_melee_weapon</a>() ) {</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;        prio_info_blocks.emplace_back( <span class="stringliteral">&quot;melee_combat_info&quot;</span> );</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( my_cat_id == <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a> ) {</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;        prio_info_blocks.emplace_back( <span class="stringliteral">&quot;contents&quot;</span> );</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;    }</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;    std::vector&lt;std::string&gt; info_block_ordered = prio_info_blocks;</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;blockname : all_info_blocks ) {</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;        <span class="keywordflow">if</span>( std::find( info_block_ordered.begin(), info_block_ordered.end(),</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;                       blockname ) == info_block_ordered.end() ) {</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;            info_block_ordered.push_back( blockname );</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;        }</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;    }</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160; </div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blockname : info_block_ordered ) {</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;        <span class="keywordflow">if</span>( blockname == <span class="stringliteral">&quot;melee_combat_info&quot;</span> ) {</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160; </div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;            <a class="code" href="classitem.html#aae7575192fd862f237fefaeeb76eedd0">melee_combat_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160; </div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( blockname == <span class="stringliteral">&quot;big_block_of_stuff&quot;</span> ) {</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160; </div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() ) {</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;                <a class="code" href="classitem.html#a3ce3a9a28569e6784c5499e3aa7f55be">med_info</a>( <span class="keyword">this</span>, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;            }</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160; </div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) {</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;                <a class="code" href="classitem.html#aecc0a01ad32ee5f835915f41e818f59e">food_info</a>( <span class="keyword">this</span>, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;            }</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160; </div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;            <a class="code" href="classitem.html#a884a7ea3cc59c2ed8342e3054c07a922">magazine_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;            <a class="code" href="classitem.html#ad1a1b9e061715c122074e2df204d9bbc">ammo_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160; </div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;            <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;                <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> = <span class="keyword">this</span>;</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;                <span class="keyword">const</span> <a class="code" href="classgun__mode.html">gun_mode</a> aux = <a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>();</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;                <span class="comment">// if we have an active auxiliary gunmod display stats for this instead</span></div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;                <span class="keywordflow">if</span>( aux &amp;&amp; aux-&gt;<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; aux-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp;</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;                    parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8b373abf4d6fb882f3305e5c698ae7f1">iteminfo_parts::DESCRIPTION_AUX_GUNMOD_HEADER</a> ) ) {</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;                    <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> = &amp;*aux;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;                    <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.emplace_back( <span class="stringliteral">&quot;DESCRIPTION&quot;</span>,</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;                                       <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats of the active &lt;info&gt;gunmod (%s)&lt;/info&gt; &quot;</span></div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;                                                         <span class="stringliteral">&quot;are shown.&quot;</span> ), <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>-&gt;tname() ) );</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;                }</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;            }</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;                <a class="code" href="classitem.html#a6d1f49b55eaaf92e616359490624bad2">gun_info</a>( <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;            }</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160; </div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;            <a class="code" href="classitem.html#a0ad233b27797b39be495f7713e9ec6c0">gunmod_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;            <a class="code" href="classitem.html#ac77c48d5e9c233b89f29a0aa9c68b9e7">armor_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;            <a class="code" href="classitem.html#a364460e515672c6b19b7afeee0b9d560">animal_armor_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;            <a class="code" href="classitem.html#ae0863124133813cad747398f561c8048">book_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;            <a class="code" href="classitem.html#ace11ba657be810e5ee4cc2caeb8a0637">battery_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;            <a class="code" href="classitem.html#af5218e06137e038fa90a320550884639">tool_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;            <a class="code" href="classitem.html#a15fbb2cca86592ca6fc879590fbbbb25">actions_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;            <a class="code" href="classitem.html#a733d3f8bc85cb1bc0e8d87b6ed5af7ac">component_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;            <a class="code" href="classitem.html#a5f1bd1f37a27ac2a4c994b4123dba5e6">qualities_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160; </div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;            <span class="comment">// Uses for item (bandaging quality, holster capacity, grenade activation)</span></div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;            <span class="keywordflow">if</span>( parts-&gt;<a class="code" href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">test</a>( <a class="code" href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4cd71a570f613530bbf1190e214229ee">iteminfo_parts::DESCRIPTION_USE_METHODS</a> ) ) {</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const std::string, use_function&gt; &amp;method : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a> ) {</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;                    <a class="code" href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;                    method.second.dump_info( *<span class="keyword">this</span>, <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a> );</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;                }</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;            }</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160; </div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;            <a class="code" href="classitem.html#a7af3529d3ba327b8eac2d9be8bd5b1d6">repair_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;            <a class="code" href="classitem.html#af7cccefc9d12ce6fdc6f16490f27cdbc">enchantment_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;            <a class="code" href="classitem.html#a4ebb47a7b946240255e3a91e892abab5">disassembly_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;            <a class="code" href="classitem.html#aa8f260a5078a26c0bbd1f1f4fd184721">properties_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;            <a class="code" href="classitem.html#a6233ded50f0c2ddc86761f9b5cef5298">bionic_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160; </div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( blockname == <span class="stringliteral">&quot;contents&quot;</span> ) {</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160; </div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;            <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac5a8e63353625b0e61c0b29611af78af">info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts );</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;            <a class="code" href="classitem.html#a219a2cb372b167889ab732c9e33a70c5">contents_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160; </div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( blockname == <span class="stringliteral">&quot;footer&quot;</span> ) {</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160; </div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;            <a class="code" href="classitem.html#ae2393a9b4e31f34c14c0f3496ef938a4">final_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;            <a class="code" href="classitem.html#abcf5c589c501dad415ff5ea3de4b1283">ascii_art_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, parts, batch, <a class="code" href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug</a> );</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160; </div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160; </div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Trying to show info block named %s which is not valid.&quot;</span>, blockname );</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160; </div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;        }</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;    }</div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160; </div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.empty() &amp;&amp; <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.back().sName == <span class="stringliteral">&quot;--&quot;</span> ) {</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;        <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>.pop_back();</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;    }</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160; </div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="output_8cpp.html#a001be4a8b824418455d413a555b6d025">format_item_info</a>( <a class="code" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>, {} );</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;}</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160; </div>
<div class="line"><a name="l06251"></a><span class="lineno"><a class="line" href="classitem.html#a727917284cddff4dbf0113d1329fec51"> 6251</a></span>&#160;std::map&lt;gunmod_location, int&gt; <a class="code" href="classitem.html#a727917284cddff4dbf0113d1329fec51">item::get_mod_locations</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;    std::map&lt;gunmod_location, int&gt; mod_locations = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;valid_mod_locations;</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160; </div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;add_mod.empty() ) {</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;            std::map&lt;gunmod_location, int&gt; add_locations = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;add_mod;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160; </div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gunmod_location, int&gt; &amp;add_location : add_locations ) {</div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;                mod_locations[add_location.first] += add_location.second;</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;            }</div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;        }</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;    }</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160; </div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    <span class="keywordflow">return</span> mod_locations;</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;}</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160; </div>
<div class="line"><a name="l06268"></a><span class="lineno"><a class="line" href="classitem.html#ad345f0faefeda773220f01b75acb9f28"> 6268</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ad345f0faefeda773220f01b75acb9f28">item::get_free_mod_locations</a>( <span class="keyword">const</span> <a class="code" href="classgunmod__location.html">gunmod_location</a> &amp;<a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;    }</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160; </div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;    std::map&lt;gunmod_location, int&gt; mod_locations = <a class="code" href="classitem.html#a727917284cddff4dbf0113d1329fec51">get_mod_locations</a>();</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160; </div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> loc = mod_locations.find( <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> );</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;    <span class="keywordflow">if</span>( loc == mod_locations.end() ) {</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;    }</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="keywordtype">int</span> result = loc-&gt;second;</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *elem : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ) ) {</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_gunmod&gt;</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = elem-&gt;type-&gt;gunmod;</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &amp;&amp; <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;location == <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> ) {</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;            result--;</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;        }</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    }</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;}</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160; </div>
<div class="line"><a name="l06290"></a><span class="lineno"><a class="line" href="classitem.html#a1ff6f2a9cd0fc994e3484b66138cb049"> 6290</a></span>&#160;<span class="keyword">const</span> std::string &amp;<a class="code" href="classitem.html#a1ff6f2a9cd0fc994e3484b66138cb049">item::symbol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; <a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a>-&gt;<a class="code" href="structitype__variant__data.html#af96c10940879ded444d0c77a8a7569b1">alt_sym</a> ) {</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a>-&gt;<a class="code" href="structitype__variant__data.html#af96c10940879ded444d0c77a8a7569b1">alt_sym</a>;</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;    }</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc032f577167e749b91124d76f56ddfe">sym</a>;</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;}</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160; </div>
<div class="line"><a name="l06298"></a><span class="lineno"><a class="line" href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9"> 6298</a></span>&#160;<a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">item::color_in_inventory</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *<span class="keyword">const</span> ch )<span class="keyword"> const</span></div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;player_character = ch ? *ch : <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160; </div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;    <span class="comment">// Only item not otherwise colored gets colored as favorite</span></div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> ? <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> : <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;learn_spell&quot;</span> ) ) {</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="namespaceiuse.html">iuse</a> = <a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;learn_spell&quot;</span> );</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;        <span class="keyword">const</span> <a class="code" href="classlearn__spell__actor.html">learn_spell_actor</a> *actor_ptr =</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;            <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classlearn__spell__actor.html">learn_spell_actor</a> *<span class="keyword">&gt;</span>( <a class="code" href="namespaceiuse.html">iuse</a>-&gt;get_actor_ptr() );</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;spell_id_str : actor_ptr-&gt;<a class="code" href="classlearn__spell__actor.html#a25721a2c9e023087537b1f6b3026deb4">spells</a> ) {</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> sp_id( spell_id_str );</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;            <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;knows_spell( sp_id ) &amp;&amp;</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;                !player_character.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;get_spell( sp_id ).is_max_level( player_character ) ) {</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;            }</div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;            <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;knows_spell( sp_id ) &amp;&amp;</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;                player_character.<a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;can_learn_spell( player_character, sp_id ) ) {</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;            }</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;        }</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a> ) ) {</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a> ) ) { <span class="comment">// NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; player_character.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="item_8cpp.html#a1ed0e0569ca42bfbb736694d90fd03fa">trait_WOOLALLERGY</a> ) &amp;&amp;</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;               ( <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="item_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a> ) || <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a743b71859cbe5e1bb0852892ece0e7e6">flag_wooled</a> ) ) ) {</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() || <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> ) ) {</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a50c10870af6969c67007ca1374cf5da3">c_brown</a>;</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac381c7232a1e13a326da1727a0ea297c">flag_MUNDANE</a> ) ) {</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a>;</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() ) {</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#abaf38cbcd608c98be0642fe0c866b8a8">is_installable</a>( <span class="keyword">this</span>, <span class="keyword">false</span> ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() &amp;&amp;</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;            ( !player_character.<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id ) || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id-&gt;dupes_allowed ) ) {</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = player_character.<a class="code" href="classCharacter.html#a650c06130969baf51c158c9645a6d769">bionic_installation_issues</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;id ).empty() ? <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> : <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a> ) ) {</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;        }</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6f6f3fef65c1799282e6f0e6737a15d0">flag_LEAK_DAM</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a82194a206f84ad991a75e480359d8698">flag_RADIOACTIVE</a> ) &amp;&amp; <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> &amp;&amp; !<a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) || ( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; <a class="code" href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83">can_revive</a>() ) ) {</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;        <span class="comment">// Active items show up as yellow (corpses only if reviving)</span></div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() || <a class="code" href="classitem.html#a009de9d7138e4186f03640d282ebd621">is_medical_tool</a>() ) {</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() ) {</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;        <span class="comment">// Give color priority to allergy (allergy &gt; inedible by freeze or other conditions)</span></div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;        <span class="comment">// TODO: refactor u.will_eat to let this section handle coloring priority without duplicating code.</span></div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">allergy_type</a>( *<span class="keyword">this</span> ) != <a class="code" href="item_8cpp.html#aaada8b39e1e59783b5dc682d67db64e0">morale_null</a> ) {</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;        }</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160; </div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;        <span class="comment">// Default: permafood, drugs</span></div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;        <span class="comment">// Brown: rotten (for non-saprophages) or non-rotten (for saprophages)</span></div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;        <span class="comment">// Dark gray: inedible</span></div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;        <span class="comment">// Red: morale penalty</span></div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;        <span class="comment">// Yellow: will rot soon</span></div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;        <span class="comment">// Cyan: edible</span></div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;        <span class="comment">// Light Cyan: will rot eventually</span></div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;        <span class="keyword">const</span> <a class="code" href="classret__val.html">ret_val&lt;edible_rating&gt;</a> rating = player_character.<a class="code" href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">will_eat</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;        <span class="comment">// TODO: More colors</span></div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;        <span class="keywordflow">switch</span>( rating.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>() ) {</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa3b91257ff6d4562407871e69d3e78f07">EDIBLE</a>:</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1">TOO_FULL</a>:</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160; </div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;                <span class="comment">// Show old items as yellow</span></div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4661d733113e53ee370d5aa83e31137b">is_going_bad</a>() ) {</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;                }</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;                <span class="comment">// Show perishables as a separate color</span></div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a>;</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;                }</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160; </div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa3e87a6efcba1be007911be670c323a9a">INEDIBLE</a>:</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a>:</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507">ALLERGY</a>:</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f">ALLERGY_WEAK</a>:</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc">CANNIBALISM</a>:</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde">PARASITES</a>:</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b">ROTTEN</a>:</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a50c10870af6969c67007ca1374cf5da3">c_brown</a>;</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093">NAUSEA</a>:</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a>;</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a>:</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;        }</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;        <span class="comment">// Guns are green if you are carrying ammo for them</span></div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;        <span class="comment">// ltred if you have ammo but no mags</span></div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;        <span class="comment">// Gun with integrated mag counts as both</span></div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>() ) {</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;            <span class="comment">// get_ammo finds uncontained ammo, find_ammo finds ammo in magazines</span></div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;            <span class="keywordtype">bool</span> has_ammo = !player_character.<a class="code" href="classCharacter.html#a91c25d98b1050595bb9d1a36454d6740">get_ammo</a>( at ).empty() ||</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;                            !player_character.<a class="code" href="classCharacter.html#af6a33462a9476b6f490a6cea8b19d5a4">find_ammo</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, -1 ).empty();</div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;            <span class="keywordtype">bool</span> has_mag = <a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() || !player_character.<a class="code" href="classCharacter.html#af6a33462a9476b6f490a6cea8b19d5a4">find_ammo</a>( *<span class="keyword">this</span>, <span class="keyword">true</span>, -1 ).empty();</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;            <span class="keywordflow">if</span>( has_ammo &amp;&amp; has_mag ) {</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>;</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( has_ammo || has_mag ) {</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;            }</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;        }</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;        <span class="comment">// Likewise, ammo is green if you have guns that use it</span></div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;        <span class="comment">// ltred if you have the gun but no mags</span></div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;        <span class="comment">// Gun with integrated mag counts as both</span></div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;        <span class="keywordtype">bool</span> has_gun = player_character.<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <span class="stringliteral">&quot;is_gun&quot;</span>, &amp;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a>,</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;            <span class="keywordflow">return</span> i.<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() );</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;        } );</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;        <span class="keywordtype">bool</span> has_mag = player_character.<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <span class="stringliteral">&quot;is_gun&quot;</span>, &amp;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a>,</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;            <span class="keywordflow">return</span> i.<a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">magazine_integral</a>() &amp;&amp; i.<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().count( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() );</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;        } );</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;        has_mag = has_mag ? true :</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;                  player_character.<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <span class="stringliteral">&quot;is_magazine&quot;</span>, &amp;<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">item::is_magazine</a>,</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;            <span class="keywordflow">return</span> i.<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() );</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;        } );</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160; </div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;        <span class="keywordflow">if</span>( has_gun &amp;&amp; has_mag ) {</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>;</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( has_gun || has_mag ) {</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;        }</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;        <span class="comment">// Magazines are green if you have guns and ammo for them</span></div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;        <span class="comment">// ltred if you have one but not the other</span></div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;        <span class="keywordtype">bool</span> has_gun = player_character.<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <span class="stringliteral">&quot;is_gun&quot;</span>, &amp;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a>,</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;            <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">magazine_compatible</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) &gt; 0;</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;        } );</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;        <span class="keywordtype">bool</span> has_ammo = !player_character.<a class="code" href="classCharacter.html#af6a33462a9476b6f490a6cea8b19d5a4">find_ammo</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, -1 ).empty();</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;        <span class="keywordflow">if</span>( has_gun &amp;&amp; has_ammo ) {</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>;</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( has_gun || has_ammo ) {</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;        }</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;        <span class="keyword">const</span> <a class="code" href="structislot__book.html">islot_book</a> &amp;tmp = *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCharacter.html#aa3ff3d07714ad0bda67eca1d98516f9c">has_identified</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;            <span class="keywordflow">if</span>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> &amp;&amp; <span class="comment">// Book can improve skill: blue</span></div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;                player_character.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ).<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() &amp;&amp;</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;                player_character.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ) &gt;= tmp.<a class="code" href="structislot__book.html#a899cf37dd220cfce62e17e9f072ca9c5">req</a> &amp;&amp;</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;                player_character.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ) &lt; tmp.<a class="code" href="structislot__book.html#a6eca476a412d945669fcb56e20d8ef97">level</a></div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;              ) { <span class="comment">//NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;                       !player_character.<a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;has_martialart( <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) ) {</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> &amp;&amp; <span class="comment">// Book can&#39;t improve skill right now, but maybe later: pink</span></div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;                       player_character.<a class="code" href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">get_skill_level_object</a>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ).<a class="code" href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">can_train</a>() &amp;&amp;</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;                       player_character.<a class="code" href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">get_knowledge_level</a>( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> ) &lt; tmp.<a class="code" href="structislot__book.html#a6eca476a412d945669fcb56e20d8ef97">level</a> ) {</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a>;</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#a8679cb3fa7f8cd4d88c226ab4b7ab94b">studied_all_recipes</a>(</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;                           *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) { <span class="comment">// Book can&#39;t improve skill anymore, but has more recipes: yellow</span></div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;            }</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( tmp.<a class="code" href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">skill</a> || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;MA_MANUAL&quot;</span> ) ) ||</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;                   !player_character.<a class="code" href="classCharacter.html#a8679cb3fa7f8cd4d88c226ab4b7ab94b">studied_all_recipes</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) {</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;            <span class="comment">// Book can teach you something and hasn&#39;t been identified yet</span></div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;            <span class="comment">// &quot;just for fun&quot; book that they haven&#39;t read yet</span></div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;        }</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;    }</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;}</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160; </div>
<div class="line"><a name="l06479"></a><span class="lineno"><a class="line" href="classitem.html#adaaab23ac975ab0fbe52607cfa8ffe54"> 6479</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#adaaab23ac975ab0fbe52607cfa8ffe54">item::on_wear</a>( <a class="code" href="classCharacter.html">Character</a> &amp;p )</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;{</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">is_sided</a>() &amp;&amp; <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>() == <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> ) {</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a> ) ) {</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;            <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a> );</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;            <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) ) &amp;&amp; p.<a class="code" href="classCharacter.html#ac2245aed6c7279986f42ef9208e816c0">is_limb_broken</a>( <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;                  !p.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a>, <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) ) ) ||</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;                ( <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ) ) &amp;&amp; p.<a class="code" href="classCharacter.html#ac2245aed6c7279986f42ef9208e816c0">is_limb_broken</a>( <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;                  !p.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a>, <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) ) ) ) {</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;                <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a> );</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;            }</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad4ce7408d409de48211750e6a37bdd31">flag_TOURNIQUET</a> ) ) {</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;            <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a> );</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;            <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;                  p.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="item_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code" href="bodypart_8cpp.html#aa372ea85b9fd9dee0197b2c16362d7a9">body_part_leg_r</a> ) &amp;&amp;</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;                  !p.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#ad4ce7408d409de48211750e6a37bdd31">flag_TOURNIQUET</a>, <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) ) ) ||</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;                ( <a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ) ) &amp;&amp; p.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="item_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code" href="bodypart_8cpp.html#aa26e675361f884c329258a89ecbdf0ec">body_part_arm_r</a> ) &amp;&amp;</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;                  !p.<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#ad4ce7408d409de48211750e6a37bdd31">flag_TOURNIQUET</a>, <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) ) ) ) {</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;                <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a> );</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;            }</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;            <span class="comment">// for sided items wear the item on the side which results in least encumbrance</span></div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;            <span class="keywordtype">int</span> lhs = 0;</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;            <span class="keywordtype">int</span> rhs = 0;</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;            <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a> );</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : p.<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;                lhs += p.<a class="code" href="classCreature.html#a00892cd6e73ac9ecf7c6eb2a043158fc">get_part_encumbrance_data</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).<a class="code" href="structencumbrance__data.html#aa481e5ed996635f0f1b746aba81ed90c">encumbrance</a>;</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;            }</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160; </div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;            <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a> );</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : p.<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;                rhs += p.<a class="code" href="classCreature.html#a00892cd6e73ac9ecf7c6eb2a043158fc">get_part_encumbrance_data</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).<a class="code" href="structencumbrance__data.html#aa481e5ed996635f0f1b746aba81ed90c">encumbrance</a>;</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;            }</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160; </div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;            <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( lhs &lt;= rhs ? <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a> : <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a> );</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;        }</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;    }</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160; </div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;    <span class="comment">// if game is loaded - don&#39;t want ownership assigned during char creation</span></div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().getID().is_valid() ) {</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;        <a class="code" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">handle_pickup_ownership</a>( p );</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;    }</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;    p.<a class="code" href="classCharacter.html#af313d5e6787a710d5d8419acea7e8f7e">on_item_acquire</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    p.<a class="code" href="classCharacter.html#a95d488911238c2c12517dd742b00c81f">on_item_wear</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;}</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160; </div>
<div class="line"><a name="l06525"></a><span class="lineno"><a class="line" href="classitem.html#a8673667a3d9507e9b7c66be499e51d80"> 6525</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a8673667a3d9507e9b7c66be499e51d80">item::on_takeoff</a>( <a class="code" href="classCharacter.html">Character</a> &amp;p )</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;{</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;    p.<a class="code" href="classCharacter.html#ac2e2e141aa01aad994ef237aca8ca53c">on_item_takeoff</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160; </div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">is_sided</a>() ) {</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;        <a class="code" href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">set_side</a>( <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a> );</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;    }</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;    <span class="comment">// reset any pockets to not have restrictions</span></div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7">get_all_standard_pockets</a>() ) {</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;            pocket-&gt;set_no_rigid( {} );</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;        }</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    }</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;}</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160; </div>
<div class="line"><a name="l06540"></a><span class="lineno"><a class="line" href="classitem.html#a313413827f1c30dc42768b275adcd7c5"> 6540</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a313413827f1c30dc42768b275adcd7c5">item::on_wield_cost</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;you )<span class="keyword"> const</span></div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;    <span class="keywordtype">int</span> mv = 0;</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;    <span class="comment">// weapons with bayonet/bipod or other generic &quot;unhandiness&quot;</span></div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5df341d5feeb19e516dc4af0d3851f86">flag_SLOW_WIELD</a> ) &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;        <span class="keywordtype">float</span> d = 32.0f; <span class="comment">// arbitrary linear scaling factor</span></div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;            d /= <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>() ), 1.0f );</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>() ) {</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;            d /= <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classitem.html#a634166a0674bcf69eb3874c7e7789344">melee_skill</a>() ), 1.0f );</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;        }</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160; </div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;        <span class="keywordtype">int</span> penalty = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;volume&quot;</span>, <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> ) * d;</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;        mv += penalty;</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;    }</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160; </div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;    <span class="comment">// firearms with a folding stock or tool/melee without collapse/retract iuse</span></div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1dbd80575a5cd32a6d9214f4c15a4e5b">flag_NEEDS_UNFOLD</a> ) &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;        <span class="keywordtype">int</span> penalty = 50; <span class="comment">// 200-300 for guns, 50-150 for melee, 50 as fallback</span></div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;            penalty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, 300 - <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>() ) * 10 ) );</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>() ) {</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;            penalty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, 150 - <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="classitem.html#a634166a0674bcf69eb3874c7e7789344">melee_skill</a>() ) * 10 ) );</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;        }</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160; </div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;        mv += penalty;</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;    }</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;    <span class="keywordflow">return</span> mv;</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;}</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160; </div>
<div class="line"><a name="l06570"></a><span class="lineno"><a class="line" href="classitem.html#a9fbebe808fb497b219858f7a61fa8419"> 6570</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9fbebe808fb497b219858f7a61fa8419">item::on_wield</a>( <a class="code" href="classCharacter.html">Character</a> &amp;you )</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;{</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;    <span class="keywordtype">int</span> wield_cost = <a class="code" href="classitem.html#a313413827f1c30dc42768b275adcd7c5">on_wield_cost</a>( you );</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -wield_cost );</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160; </div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;    std::string msg;</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160; </div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;    msg = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You wield your %s.&quot;</span> );</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160; </div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;    <span class="comment">// if game is loaded - don&#39;t want ownership assigned during char creation</span></div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().getID().is_valid() ) {</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;        <a class="code" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">handle_pickup_ownership</a>( you );</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    }</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, msg, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160; </div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;selected_is_none() ) {</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;        you.<a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;martialart_use_message( you );</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;    }</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160; </div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    <span class="comment">// Update encumbrance and discomfort in case we were wearing it</span></div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;    you.<a class="code" href="classCharacter.html#a3801457283281bb7dcc0572d3f707e10">flag_encumbrance</a>();</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;    you.<a class="code" href="classCharacter.html#add4660ed70c5b5bcb4b766b3f75cb3bd">calc_discomfort</a>();</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;    you.<a class="code" href="classCharacter.html#af313d5e6787a710d5d8419acea7e8f7e">on_item_acquire</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;}</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160; </div>
<div class="line"><a name="l06595"></a><span class="lineno"><a class="line" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2"> 6595</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">item::handle_pickup_ownership</a>( <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> )</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;{</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) ) {</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;    }</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;    <span class="comment">// Add ownership to item if unowned</span></div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;        <a class="code" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">set_owner</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> );</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) &amp;&amp; <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.is_avatar() ) {</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> sees_stealing = [&amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> &amp; cr ) {</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;                <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> as_npc = cr.<a class="code" href="classnpc.html#a44b69dac954d29133179323df8502339">as_npc</a>();</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> as_monster = cr.<a class="code" href="classmonster.html#a02fa605494e946663ddd216166828f2a">as_monster</a>();</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;                <span class="keywordtype">bool</span> owned_by = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;                <span class="keywordflow">if</span>( as_npc ) {</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;                    owned_by = <a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( *as_npc );</div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( as_monster ) {</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;                    owned_by = <a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( *as_monster );</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;                }</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;                <span class="keywordflow">return</span> &amp;cr != &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> &amp;&amp; owned_by &amp;&amp; <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( cr.pos(), <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.pos() ) &lt; <a class="code" href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a> &amp;&amp;</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;                       cr.sees( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.pos() );</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;            };</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> sort_criteria = []( <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * lhs, <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * rhs ) {</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;                <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> lnpc = lhs-&gt;<a class="code" href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">as_npc</a>();</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;                <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> rnpc = rhs-&gt;<a class="code" href="classnpc.html#a44b69dac954d29133179323df8502339">as_npc</a>();</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;                <span class="keywordflow">if</span>( !lnpc &amp;&amp; !rnpc ) {</div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> lmon = lhs-&gt;<a class="code" href="classCreature.html#a90636bbf110025587c181fad389d616c">as_monster</a>();</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> rmon = rhs-&gt;<a class="code" href="classmonster.html#a02fa605494e946663ddd216166828f2a">as_monster</a>();</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;                    <span class="comment">// Sort more difficult monsters first</span></div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;                    <span class="keywordflow">return</span> ( lmon ? lmon-&gt;<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a7f92cbd89d3870833c9d5300acb325a1">difficulty</a> : 0 ) &gt; ( rmon ? rmon-&gt;<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a7f92cbd89d3870833c9d5300acb325a1">difficulty</a> : 0 );</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( lnpc &amp;&amp; !rnpc ) {</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !lnpc &amp;&amp; rnpc ) {</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;                }</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classnpc.html#aa2736c9bc23fe9d6d780e2d5def2274e">npc::theft_witness_compare</a>( lnpc, rnpc );</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;            };</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;            std::vector&lt;Creature *&gt; witnesses = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_creatures_if( sees_stealing );</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;            std::sort( witnesses.begin(), witnesses.end(), sort_criteria );</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classCreature.html">Creature</a> *<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> : witnesses ) {</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;                <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> elem = <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>-&gt;as_npc();</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;                <span class="keywordflow">if</span>( !elem ) {</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;                    <span class="comment">// Sorted to have NPCs first</span></div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;                }</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;                elem-&gt;<a class="code" href="classnpc.html#a077962bdd033d5a96974c8ddf3e26a59">say</a>( <span class="stringliteral">&quot;&lt;witnessed_thievery&gt;&quot;</span>, 7 );</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;            }</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;            <span class="keywordflow">if</span>( !witnesses.empty() ) {</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;                <a class="code" href="classitem.html#a72a3777436f5b6b0fac303100451a42f">set_old_owner</a>( <a class="code" href="classitem.html#a326dae8709070c316f6859ef0704bf85">get_owner</a>() );</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;                witnesses[0]-&gt;witness_thievery( <span class="keyword">this</span> );</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;            }</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;            <a class="code" href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">set_owner</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> );</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;        }</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;    }</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;}</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160; </div>
<div class="line"><a name="l06651"></a><span class="lineno"><a class="line" href="classitem.html#adf662fb946f6a1188fe5e340ff80a95a"> 6651</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#adf662fb946f6a1188fe5e340ff80a95a">item::on_pickup</a>( <a class="code" href="classCharacter.html">Character</a> &amp;p )</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;{</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;    <span class="comment">// Fake characters are used to determine pickup weight and volume</span></div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCreature.html#a98ef8437aca8647165ccbe2ebb2e1f2c">is_fake</a>() ) {</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;    }</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;    <span class="comment">// if game is loaded - don&#39;t want ownership assigned during char creation</span></div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().getID().is_valid() ) {</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;        <a class="code" href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">handle_pickup_ownership</a>( p );</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;    }</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a1598ad46f758b26462386beb9a386696">on_pickup</a>( p, <span class="keyword">this</span> );</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160; </div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;    p.<a class="code" href="classCharacter.html#a3801457283281bb7dcc0572d3f707e10">flag_encumbrance</a>();</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;    p.<a class="code" href="classCharacter.html#af313d5e6787a710d5d8419acea7e8f7e">on_item_acquire</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;}</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160; </div>
<div class="line"><a name="l06667"></a><span class="lineno"><a class="line" href="classitem.html#afed495d5303347fcb8a9fe4d55d3345d"> 6667</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#afed495d5303347fcb8a9fe4d55d3345d">item::update_inherited_flags</a>()</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;{</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;    <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.clear();</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160; </div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> inehrit_flags = [<span class="keyword">this</span>]( <a class="code" href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">FlagsSetType</a> <span class="keyword">const</span> &amp; Flags ) {</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classstring__id.html">flag_id</a> <span class="keyword">const</span> &amp;f : Flags ) {</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;            <span class="keywordflow">if</span>( f-&gt;inherit() ) {</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;                <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.emplace( f );</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;            }</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;        }</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;    };</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160; </div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() : <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>() ) {</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;        <span class="comment">// gunmods fired separately do not contribute to base gun flags</span></div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;        <span class="keywordflow">if</span>( !e-&gt;is_gun() ) {</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;            inehrit_flags( e-&gt;get_flags() );</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;            inehrit_flags( e-&gt;type-&gt;get_flags() );</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;        }</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;    }</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160; </div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>() ) {</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;        <span class="keywordflow">if</span>( pocket-&gt;inherits_flags() ) {</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : pocket-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>() ) {</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;                inehrit_flags( e-&gt;get_flags() );</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;                inehrit_flags( e-&gt;type-&gt;get_flags() );</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;            }</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;        }</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    }</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;    <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>();</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;}</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160; </div>
<div class="line"><a name="l06698"></a><span class="lineno"><a class="line" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82"> 6698</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">item::update_prefix_suffix_flags</a>()</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;{</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;    <a class="code" href="classitem.html#ab3c721f88b6fae5edd5a79f0da60b752">prefix_tags_cache</a>.clear();</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;    <a class="code" href="classitem.html#a1eb36ac46ad3b85c4d2e4c80ede83ff3">suffix_tags_cache</a>.clear();</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> insert_prefix_suffix_flags = [<span class="keyword">this</span>]( <a class="code" href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">FlagsSetType</a> <span class="keyword">const</span> &amp; Flags ) {</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classstring__id.html">flag_id</a> <span class="keyword">const</span> &amp;f : Flags ) {</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;            <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>( f );</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;        }</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;    };</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    insert_prefix_suffix_flags( <a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">get_flags</a>() );</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;    insert_prefix_suffix_flags( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>() );</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;    insert_prefix_suffix_flags( <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a> );</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;}</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160; </div>
<div class="line"><a name="l06712"></a><span class="lineno"><a class="line" href="classitem.html#a0404b8d55e8fdf1546e5460f2a575be4"> 6712</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">item::update_prefix_suffix_flags</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f )</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;{</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;    <span class="keywordflow">if</span>( !f-&gt;<a class="code" href="classjson__flag.html#a9a3a2e9f8307ff62bdab76d57a63c49a">item_prefix</a>().<a class="code" href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">empty</a>() ) {</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        <a class="code" href="classitem.html#ab3c721f88b6fae5edd5a79f0da60b752">prefix_tags_cache</a>.emplace( f );</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;    }</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;    <span class="keywordflow">if</span>( !f-&gt;<a class="code" href="classjson__flag.html#aad9b17d0cba280db19809257db9ea5e6">item_suffix</a>().<a class="code" href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">empty</a>() ) {</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;        <a class="code" href="classitem.html#a1eb36ac46ad3b85c4d2e4c80ede83ff3">suffix_tags_cache</a>.emplace( f );</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;    }</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;}</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160; </div>
<div class="line"><a name="l06722"></a><span class="lineno"><a class="line" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16"> 6722</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a>()</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;{</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#afb8248de2a7741144640a789db3d7593">update_open_pockets</a>();</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;    <a class="code" href="classitem.html#aa5db17a55d827f446731edccd2815cfd">cached_relative_encumbrance</a>.reset();</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;    <a class="code" href="classitem.html#a1ea7dc9d3bada7236e263edf7f1fd15f">encumbrance_update_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;    <a class="code" href="classitem.html#afed495d5303347fcb8a9fe4d55d3345d">update_inherited_flags</a>();</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;    <a class="code" href="classitem.html#a87b25bdb6c42347eb5875093899d51fa">cached_category</a>.<a class="code" href="structitem_1_1cat__cache.html#a189c7664f1ed87715864524e12847aaa">timestamp</a> = <a class="code" href="namespacecalendar.html#adb38241f6561412667ab9be5fd29fdce">calendar::turn_max</a>;</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a69b6ce2dd3062aa4b7d1dcc043d762bb">empty_container</a>() ) {</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;        <a class="code" href="classitem.html#ab6ed09134cd52fef2ca7a56cbd32597e">clear_automatic_whitelist</a>();</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;    }</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;}</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160; </div>
<div class="line"><a name="l06734"></a><span class="lineno"><a class="line" href="classitem.html#a39a8996cae29680a23de8c36e4835831"> 6734</a></span>&#160;std::string <a class="code" href="classitem.html#a39a8996cae29680a23de8c36e4835831">item::dirt_symbol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    <span class="comment">// these symbols are unicode square characters of different heights, representing a rough</span></div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;    <span class="comment">// estimation of fouling in a gun. This appears instead of &quot;faulty&quot; since most guns will</span></div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;    <span class="comment">// have some level of fouling in them, and usually it is not a big deal.</span></div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;    <span class="keywordflow">switch</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;dirt&quot;</span>, 0 ) / 2000 ) ) {</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;        <span class="comment">// *INDENT-OFF*</span></div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;        <span class="keywordflow">case</span> 1:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;color_white&gt;\u2581&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;        <span class="keywordflow">case</span> 2:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;color_light_gray&gt;\u2583&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;        <span class="keywordflow">case</span> 3:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;color_light_gray&gt;\u2585&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;        <span class="keywordflow">case</span> 4:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;color_dark_gray&gt;\u2587&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;        <span class="keywordflow">case</span> 5:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;color_brown&gt;\u2588&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;        <span class="comment">// *INDENT-ON*</span></div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;    }</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;}</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160; </div>
<div class="line"><a name="l06751"></a><span class="lineno"><a class="line" href="classitem.html#a80618c347b04de8ef3414f21b2f136f6"> 6751</a></span>&#160;std::string <a class="code" href="classitem.html#a80618c347b04de8ef3414f21b2f136f6">item::overheat_symbol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160; </div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;overheat_threshold &lt;= 0.0 ) {</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;    }</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;    <span class="keywordtype">double</span> modifier = 0;</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;    <span class="keywordtype">float</span> multiplier = 1.0f;</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;        modifier += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overheat_threshold_modifier;</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;        multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overheat_threshold_multiplier;</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    }</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.count( <a class="code" href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">fault_overheat_safety</a> ) ) {</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_light_green&gt;\u2588VNT &lt;/color&gt;&quot;</span> ) );</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;    }</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 5, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gun_heat&quot;</span>,</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;                                           0 ) / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;overheat_threshold * multiplier + modifier, 5.0 ) * 5.0 ) ) ) {</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_yellow&gt;\u2583HEAT &lt;/color&gt;&quot;</span> ) );</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_light_red&gt;\u2585HEAT &lt;/color&gt;&quot;</span> ) );</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_red&gt;\u2587HEAT! &lt;/color&gt;&quot;</span> ) ); <span class="comment">// NOLINT(cata-text-style)</span></div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;        <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_pink&gt;\u2588HEAT!! &lt;/color&gt;&quot;</span> ) ); <span class="comment">// NOLINT(cata-text-style)</span></div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;    }</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;}</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160; </div>
<div class="line"><a name="l06783"></a><span class="lineno"><a class="line" href="classitem.html#ad56b5a2556cb36570017c62c30515f18"> 6783</a></span>&#160;std::string <a class="code" href="classitem.html#ad56b5a2556cb36570017c62c30515f18">item::degradation_symbol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> inc = <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() / 5;</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> dgr_lvl = <a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">degradation</a>() / ( inc &gt; 0 ? inc : 1 );</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    std::string dgr_symbol;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160; </div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;    <span class="keywordflow">switch</span>( dgr_lvl ) {</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;            dgr_symbol = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\u2588&quot;</span>, <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> );</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;            dgr_symbol = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\u2587&quot;</span>, <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;            dgr_symbol = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\u2585&quot;</span>, <a class="code" href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a> );</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;            dgr_symbol = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\u2583&quot;</span>, <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a> );</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;            dgr_symbol = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\u2581&quot;</span>, <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;    }</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">degrade_increments</a>() == 0 ? <span class="stringliteral">&quot;&quot;</span> : dgr_symbol;</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;}</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160; </div>
<div class="line"><a name="l06809"></a><span class="lineno"><a class="line" href="classitem.html#ad3eb45210bea4d7389a108fa96fdee6d"> 6809</a></span>&#160;std::string <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity, <span class="keywordtype">bool</span> with_prefix )<span class="keyword"> const</span></div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( quantity, with_prefix ? <a class="code" href="namespacetname.html#a9605486cdd7379b0de8170f658de6dd9">tname::default_tname</a> : <a class="code" href="namespacetname.html#a24cc3734547252a92df94fedcff08ae3">tname::unprefixed_tname</a> );</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;}</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160; </div>
<div class="line"><a name="l06814"></a><span class="lineno"><a class="line" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21"> 6814</a></span>&#160;std::string <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity, <a class="code" href="classenum__bitset.html">tname::segment_bitset</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;    std::string <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160; </div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; static_cast&lt;size_t&gt;( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ad1cd941e9361399f0433d63e6f7d7c76">tname::segments::last_segment</a> ); i++ ) {</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;        <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">tname::segments</a> <span class="keyword">const</span> idx = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">tname::segments</a><span class="keyword">&gt;</span>( i );</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a>[idx] ) {</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;        }</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespacetname.html#a03487240c0884564fdcdd76885dc1db1">tname::print_segment</a>( idx, *<span class="keyword">this</span>, quantity, <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a> );</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;    }</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160; </div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <span class="stringliteral">&quot;item_note&quot;</span> ) != <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;        <span class="comment">//~ %s is an item name. This style is used to denote items with notes.</span></div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;*%s*&quot;</span> ), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;    }</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160; </div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;}</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160; </div>
<div class="line"><a name="l06834"></a><span class="lineno"><a class="line" href="classitem.html#ae1bbacaa88454c4476b531b217bfa3e9"> 6834</a></span>&#160;std::string <a class="code" href="classitem.html#ae1bbacaa88454c4476b531b217bfa3e9">item::display_money</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total,</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;                                 <span class="keyword">const</span> std::optional&lt;unsigned int&gt; &amp;selected )<span class="keyword"> const</span></div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;    <span class="keywordflow">if</span>( selected ) {</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;        <span class="comment">//~ This is a string to display the selected and total amount of money in a stack of cash cards.</span></div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;        <span class="comment">//~ %1$s is the display name of cash cards.</span></div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;        <span class="comment">//~ %2$s is the total amount of money.</span></div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;        <span class="comment">//~ %3$s is the selected amount of money.</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;        <span class="comment">//~ Example: &quot;cash cards $15.35 of $20.48&quot;</span></div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;cash card and money&quot;</span>, <span class="stringliteral">&quot;%1$s %3$s of %2$s&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( quantity ),</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;                              <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( total ), <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( *selected ) );</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;        <span class="comment">//~ This is a string to display the total amount of money in a stack of cash cards.</span></div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;        <span class="comment">//~ %1$s is the display name of cash cards.</span></div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;        <span class="comment">//~ %2$s is the total amount of money on the cash cards.</span></div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;        <span class="comment">//~ Example: &quot;cash cards $20.48&quot;</span></div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;cash card and money&quot;</span>, <span class="stringliteral">&quot;%1$s %2$s&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( quantity ),</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;                              <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( total ) );</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;    }</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;}</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160; </div>
<div class="line"><a name="l06855"></a><span class="lineno"><a class="line" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973"> 6855</a></span>&#160;std::string <a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity )<span class="keyword"> const</span></div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;    std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( quantity );</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;    std::string sidetxt;</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;    std::string amt;</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;    std::string cable;</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160; </div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="classitem.html#aecf84874cbc13ba0ce8a205690747305">get_side</a>() ) {</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a>:</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">side::num_sides</a>:</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a>:</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;            sidetxt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%s)&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;left&quot;</span> ) );</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a>:</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;            sidetxt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%s)&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;right&quot;</span> ) );</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;    }</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;    <span class="keywordtype">int</span> amount = 0;</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;    <span class="keywordtype">int</span> max_amount = 0;</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;    <span class="keywordtype">bool</span> show_amt = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;    <span class="comment">// We should handle infinite charges properly in all cases.</span></div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() &amp;&amp; <a class="code" href="classitem.html#af607ad36c67593022397b437a3a5b5b4">get_chapters</a>() &gt; 0 ) {</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;        <span class="comment">// a book which has remaining unread chapters</span></div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;        amount = <a class="code" href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">get_remaining_chapters</a>( player_character );</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;        show_amt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;        amount = <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *adata = mag-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;        <span class="keywordflow">if</span>( adata ) {</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;            max_amount = mag-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( adata-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type );</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;            max_amount = mag-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template(</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;                                                 mag-&gt;<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;        }</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160; </div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;        <span class="comment">// anything that can be reloaded including tools, magazines, guns and auxiliary gunmods</span></div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;        <span class="comment">// but excluding bows etc., which have ammo, but can&#39;t be reloaded</span></div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;        amount = <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *adata = <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;        <span class="keywordflow">if</span>( adata ) {</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;            max_amount = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( adata-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type );</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;            max_amount = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;        }</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;        show_amt = !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a> );</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() &amp;&amp; !<a class="code" href="classitem.html#a310539e1dbfb640f2b23796a40c881f2">has_infinite_charges</a>() ) {</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;        <span class="comment">// A chargeable item</span></div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;        amount = <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;        <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *adata = <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;        <span class="keywordflow">if</span>( adata ) {</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;            max_amount = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( adata-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type );</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;            max_amount = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;        }</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">is_vehicle_battery</a>() ) {</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;        show_amt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;        amount = <a class="code" href="namespaceunits.html#a9e6793937cd630b03c24d520c5415904">to_joule</a>( <a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">energy_remaining</a>( <span class="keyword">nullptr</span> ) );</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;        max_amount = <a class="code" href="namespaceunits.html#a9e6793937cd630b03c24d520c5415904">to_joule</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>-&gt;max_capacity );</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;    }</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160; </div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;    std::string ammotext;</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() &amp;&amp; ( ( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() ) || <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) &amp;&amp;</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;        get_option&lt;bool&gt;( <span class="stringliteral">&quot;AMMO_IN_NAMES&quot;</span> ) ) {</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;            <span class="comment">// Loaded with ammo</span></div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;            ammotext = <a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>()-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 );</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;            <span class="comment">// Is not loaded but can be loaded</span></div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;            ammotext = <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( *<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().begin() )-&gt;<a class="code" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">name</a>();</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;            <span class="comment">// Is not loaded but has magazine that can be loaded</span></div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;            ammotext = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type-&gt;name();</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;            <span class="comment">// Is not loaded and doesn&#39;t have magazine but can use magazines that could be loaded</span></div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;            <a class="code" href="classitem.html">item</a> tmp_mag( <a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">magazine_default</a>() );</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;            ammotext = tmp_mag.<a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type-&gt;name();</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;        }</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;    }</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160; </div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    <span class="keywordflow">if</span>( ( amount || show_amt ) &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a> ) ) {</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">is_money</a>() ) {</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;            amt = <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( amount );</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;            <span class="keywordflow">if</span>( !ammotext.empty() ) {</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;                ammotext = <span class="stringliteral">&quot; &quot;</span> + ammotext;</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;            }</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160; </div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;            <span class="keywordflow">if</span>( max_amount != 0 ) {</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( amount ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( max_amount );</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;                <a class="code" href="classnc__color.html">nc_color</a> charges_color;</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;                <span class="keywordflow">if</span>( amount == 0 ) {</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;                    charges_color = <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>;</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( amount == max_amount ) {</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;                    charges_color = <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ratio &lt; 1.0 / 3.0 ) {</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;                    charges_color = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ratio &lt; 2.0 / 3.0 ) {</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;                    charges_color = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;                    charges_color = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;                }</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;                amt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%s%s)&quot;</span>, <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%i/%i&quot;</span>, amount, max_amount ),</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;                                     charges_color ),</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;                                     ammotext );</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;                amt = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%i%s)&quot;</span>, amount, ammotext );</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;            }</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;        }</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !ammotext.empty() ) {</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;        amt = <span class="stringliteral">&quot; (&quot;</span> + ammotext + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;    }</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160; </div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;        std::string extensions = <a class="code" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">cables</a>().empty() ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;+%d&quot;</span>, <a class="code" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">cables</a>().<a class="code" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() );</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> link_len = <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>();</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> link_max_len = <a class="code" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">max_link_length</a>();</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;        <span class="keywordflow">if</span>( link_len &lt;= -2 ) {</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;            cable = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (-/%1$d cable%2$s)&quot;</span> ), link_max_len, extensions );</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( link_len == -1 ) {</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;            cable = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (%1$s cable%2$s)&quot;</span> ),</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;                                   <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;×/%d&quot;</span>, link_max_len ), <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a> ), extensions );</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;            <a class="code" href="classnc__color.html">nc_color</a> cable_color;</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">double</span> ratio = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( link_len ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( link_max_len );</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;            <span class="keywordflow">if</span>( ratio &lt; 1.0 / 3.0 ) {</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;                cable_color = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ratio &lt; 2.0 / 3.0 ) {</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;                cable_color = <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a>;</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;                cable_color = <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;            }</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;            cable = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%s)&quot;</span>, <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%d/%d cable%s&quot;</span> ),</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;                                   link_max_len - link_len, link_max_len, extensions ), cable_color ) );</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;        }</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;    }</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160; </div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;    <span class="comment">// HACK: This is a hack to prevent possible crashing when displaying maps as items during character creation</span></div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aaaf3784eda060adabe524a54cc873e68">is_map</a>() &amp;&amp; <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> != <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> ) {</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> map_pos_omt =</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;            <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;reveal_map_center_omt&quot;</span>, player_character.<a class="code" href="classCreature.html#a14ecbd8f044628463354090421a805b4">global_omt_location</a>().<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() );</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;        <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_sm</a> map_pos =</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;            project_to&lt;coords::sm&gt;( <a class="code" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a>( map_pos_omt ) );</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;        <span class="keyword">const</span> <a class="code" href="structcity.html">city</a> *<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">closest_city</a>( map_pos ).<a class="code" href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city</a>;</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;            <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>-&gt;name, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;        }</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;    }</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160; </div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s%s%s%s&quot;</span>, <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, sidetxt, amt, cable );</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;}</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160; </div>
<div class="line"><a name="l07011"></a><span class="lineno"><a class="line" href="classitem.html#a35b2a8d96dc92438f39c898bc210895f"> 7011</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a35b2a8d96dc92438f39c898bc210895f">item::is_collapsed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() &amp;&amp; !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa63a64b9dda0208d68267945e7b76615">get_pockets</a>( []( <a class="code" href="classitem__pocket.html">item_pocket</a> <span class="keyword">const</span> &amp; pocket ) {</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;        <span class="keywordflow">return</span> pocket.<a class="code" href="classitem__pocket.html#afb8bb7dafdbdc114d6ac13506c352b9e">settings</a>.<a class="code" href="classitem__pocket_1_1favorite__settings.html#ab14450aeaf5bf4f0d0cc6570829e58e3">is_collapsed</a>() &amp;&amp; pocket.<a class="code" href="classitem__pocket.html#ab6bc7567101ffc19abc968578f429d55">is_standard_type</a>();</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;    } ).<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>();</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;}</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160; </div>
<div class="line"><a name="l07018"></a><span class="lineno"><a class="line" href="classitem.html#ac3802e76b128e7ee2982352e7ad72030"> 7018</a></span>&#160;<a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="classitem.html#ac3802e76b128e7ee2982352e7ad72030">item::color</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a>;</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;    }</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a6ad4c76593c4cd6423492169733885a1">color</a>;</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;    }</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() &amp;&amp; <a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a>-&gt;<a class="code" href="structitype__variant__data.html#ab37f68892137426385154d939d3a21de">alt_color</a> ) {</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a>-&gt;<a class="code" href="structitype__variant__data.html#ab37f68892137426385154d939d3a21de">alt_color</a>;</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;    }</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a>;</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;}</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160; </div>
<div class="line"><a name="l07032"></a><span class="lineno"><a class="line" href="classitem.html#a910393f5651f273b5df0bdd576bef78d"> 7032</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">item::price</a>( <span class="keywordtype">bool</span> practical )<span class="keyword"> const</span></div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;    <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160; </div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;    <a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>( [&amp;res, practical]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * e, <a class="code" href="classitem.html">item</a> * ) {</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;        res += e-&gt;<a class="code" href="classitem.html#af4bcc60e3d1d786daa3d51f0cc8d71c6">price_no_contents</a>( practical );</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;    } );</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160; </div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;}</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160; </div>
<div class="line"><a name="l07044"></a><span class="lineno"><a class="line" href="classitem.html#af4bcc60e3d1d786daa3d51f0cc8d71c6"> 7044</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af4bcc60e3d1d786daa3d51f0cc8d71c6">item::price_no_contents</a>( <span class="keywordtype">bool</span> practical, std::optional&lt;int&gt; price_override )<span class="keyword"> const</span></div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">rotten</a>() ) {</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;    }</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> = price_override ? *price_override</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;                : <a class="code" href="namespaceunits.html#afc3989e0a676995d9a235753085f235f">units::to_cent</a>( practical ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a435567e9d513701c13586b96e289e33a">price_post</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a41038ca826de1713661d7edd6c1705d0">price</a> );</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;        <span class="comment">// maximal damage level is 5, maximal reduction is 80% of the value.</span></div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;        <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> -= <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() - 1 ) ) / 5;</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;    }</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160; </div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;        <span class="comment">// price from json data is for default-sized stack</span></div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;        <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> *= <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> / <span class="keyword">static_cast&lt;</span> <span class="keywordtype">double</span> <span class="keyword">&gt;</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> );</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160; </div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;max_charges != 0 ) {</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;        <span class="comment">// if tool has no ammo (e.g. spray can) reduce price proportional to remaining charges</span></div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;        <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> *= <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() / <span class="keyword">static_cast&lt;</span> <span class="keywordtype">double</span> <span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>(), 1 ) );</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160; </div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;    }</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160; </div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() ) {</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;        <span class="comment">// Filthy items receieve a fixed price malus. This means common clothing ends up</span></div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;        <span class="comment">// with no value (it&#39;s *everywhere*), but valuable items retain most of their value.</span></div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;        <span class="comment">// https://github.com/CleverRaven/Cataclysm-DDA/issues/49469</span></div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;        <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> - <a class="code" href="item_8cpp.html#abda20c3b343cd71d0b07d5899ab6a8cb">PRICE_FILTHY_MALUS</a>, 0 );</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;    }</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160; </div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classstring__id.html">fault_id</a> <a class="code" href="classfault.html">fault</a> : <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a> ) {</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;        <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a> *= <a class="code" href="classfault.html">fault</a>-&gt;<a class="code" href="classfault.html#a8ef24fc1db5fc3a414948d575af608a5">price_mod</a>();</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;    }</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160; </div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a910393f5651f273b5df0bdd576bef78d">price</a>;</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;}</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160; </div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;<span class="comment">// TODO: MATERIALS add a density field to materials.json</span></div>
<div class="line"><a name="l07081"></a><span class="lineno"><a class="line" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9"> 7081</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a>( <span class="keywordtype">bool</span> include_contents, <span class="keywordtype">bool</span> integral )<span class="keyword"> const</span></div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;        <span class="keywordflow">return</span> 0_gram;</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;    }</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160; </div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;    <span class="comment">// Items that don&#39;t drop aren&#39;t really there, they&#39;re items just for ease of implementation</span></div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a> ) ) {</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;        <span class="keywordflow">return</span> 0_gram;</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;    }</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160; </div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_weight ) {</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0_gram;</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += it.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>();</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;                }</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;            }</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;            <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_weight = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;        }</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_weight;</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;    }</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160; </div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;    <span class="keywordtype">double</span> ret_mul = 1.0;</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;    std::string local_str_mass = integral ? <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;integral_weight&quot;</span> ) : <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;weight&quot;</span> );</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;    <span class="keywordflow">if</span>( local_str_mass.empty() ) {</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = integral ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">integral_weight</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>;</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="namespaceunits.html#a18c591ea28d684e38a315ff0468c7339">units::from_milligram</a>( std::stoll( local_str_mass ) );</div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;    }</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160; </div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa5ce6fa0b5d6f6491b89348c50364c69">flag_REDUCED_WEIGHT</a> ) ) {</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;        ret_mul *= 0.75;</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;    }</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160; </div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;    <span class="comment">// if this is a gun apply all of its gunmods&#39; weight multipliers</span></div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;            ret_mul *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;weight_multiplier;</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;        }</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;    }</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160; </div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;        ret_mul *= <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160; </div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;        <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> ); <span class="comment">// To appease static analysis</span></div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a71161bb5851b4c48f32f3ebaf35b9b1d">weight</a>;</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;        ret_mul = 1.0;</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a> ) ) {</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;            ret_mul *= 0.75;</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;        }</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7de72a0c864c849eaed5fb1c01ed1486">flag_GIBBED</a> ) ) {</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;            ret_mul *= 0.85;</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;        }</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9e3e9a6a06acbe427c7a6071ce59aade">flag_SKINNED</a> ) ) {</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;            ret_mul *= 0.85;</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;        }</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a> ) ) {</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;            ret_mul *= 0.25;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;        }</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160; </div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;    }</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160; </div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> *= ret_mul;</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160; </div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    <span class="comment">// if it has additional pockets include the mass of those</span></div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a56bfd4ca89a4f9b723787eb847431840">has_additional_pockets</a>() ) {</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a91c50caec5703fc518fc88d83f25b5e0">get_additional_weight</a>();</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;    }</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160; </div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;    <span class="keywordflow">if</span>( include_contents ) {</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a37b6d4a1afa64aac1e775869c6c87e6d">item_weight_modifier</a>();</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;    }</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160; </div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;    <span class="comment">// if this is an ammo belt add the weight of any implicitly contained linkages</span></div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;linkage ) {</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;        <a class="code" href="classitem.html">item</a> links( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;linkage );</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;        links.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += links.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>();</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;    }</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160; </div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;    <span class="comment">// reduce weight for sawn-off barrel capped to the apportioned weight of the barrel</span></div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) ) {</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;barrel_volume;</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::mass</a> max_barrel_weight = <a class="code" href="namespaceunits.html#a6d621878032da8dfad8b4e3460c82932">units::from_gram</a>( <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">to_milliliter</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) );</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::mass</a> barrel_weight = <a class="code" href="namespaceunits.html#a6d621878032da8dfad8b4e3460c82932">units::from_gram</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.value() * <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>.<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>() /</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;                                          <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>.<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>() );</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> -= <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( max_barrel_weight, barrel_weight );</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;    }</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160; </div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    <span class="comment">// reduce weight for sawn-off stock</span></div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#ac71caa61fb71b31b4ad12dfcc0d9dfef">itype_stock_none</a> ) ) {</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;        <span class="comment">// Length taken from item::length(), height and width are &quot;average&quot; values</span></div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> stock_dimensions = 0.26f * 0.11f * 0.04f; <span class="comment">// length * height * width = 0.00114 m3.</span></div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;        <span class="comment">// density of &#39;wood&#39; material</span></div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> density = 850;</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> -= <a class="code" href="namespaceunits.html#a9d2095b1d2bb0876ccc98e48a5e99967">units::from_kilogram</a>( stock_dimensions * density );</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;    }</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160; </div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;}</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160; </div>
<div class="line"><a name="l07186"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0faac6210fb0760466112e92f09a1f65"> 7186</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="item_8cpp.html#a0faac6210fb0760466112e92f09a1f65">sawn_off_reduction</a>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *type )</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;{</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;    <span class="keywordtype">int</span> barrel_percentage = type-&gt;gun-&gt;barrel_volume / ( type-&gt;volume / 100 );</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;    <span class="keywordflow">return</span> ( type-&gt;longest_side / 100 ) * barrel_percentage;</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;}</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160; </div>
<div class="line"><a name="l07192"></a><span class="lineno"><a class="line" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002"> 7192</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">item::length</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) || ( <a class="code" href="classitem.html#a481f77e8382794e7b913571ccc109778">is_soft</a>() &amp;&amp; <a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) ) {</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;        <span class="keywordflow">return</span> 0_mm;</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;    }</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160; </div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        <span class="keywordflow">return</span> units::default_length_from_volume&lt;int&gt;( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a228db8f2c45aee4865f92ca5a561889f">volume</a> );</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    }</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160; </div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::length</a> length_adjusted = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a>;</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160; </div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;        <span class="comment">//TODO: Unhardcode this now that integral_longest_side can be used</span></div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) ) {</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;            length_adjusted = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a> - <a class="code" href="item_8cpp.html#a0faac6210fb0760466112e92f09a1f65">sawn_off_reduction</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;        }</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160; </div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;        std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>();</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;        <span class="comment">// only the longest thing sticking off the gun matters for length adjustment</span></div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;        <span class="comment">// TODO: Differentiate from back end mods like stocks vs front end like bayonets and muzzle devices</span></div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::length</a> max_length = 0_mm;</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::length</a> stock_length = 0_mm;</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::length</a> stock_accessory_length = 0_mm;</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> ) {</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;            <span class="comment">// stocks and accessories for stocks are added with whatever the longest thing on the front is</span></div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;            <span class="comment">// stock mount is added here for support for sawing off stocks</span></div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;location.str() == <span class="stringliteral">&quot;stock mount&quot;</span> ) {</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aea4b740c27cf414b16f59faf9a1e4c0e">flag_REMOVED_STOCK</a> ) ) {</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;                    <span class="comment">// stock has been removed so slightly more length removed about 26cm</span></div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;                    stock_length -= 26_cm;</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;                }</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;location.str() == <span class="stringliteral">&quot;stock&quot;</span> ) {</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;                stock_length = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;integral_longest_side;</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0ca4aa6ec2304125eedfe368adbdd613">flag_COLLAPSED_STOCK</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a32853644cb5744de33f201e235ac0809">flag_FOLDED_STOCK</a> ) ) {</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;                    <span class="comment">// stock is folded so need to reduce length</span></div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160; </div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;                    <span class="comment">// folded stock length is estimated at about 20 cm, LOP for guns should be about</span></div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;                    <span class="comment">// 13.5 inches and a folding stock folds past the trigger and isn&#39;t perfectly efficient</span></div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;                    stock_length -= 20_cm;</div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;                }</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;location.str() == <span class="stringliteral">&quot;stock accessory&quot;</span> ) {</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;                stock_accessory_length = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;integral_longest_side;</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;                <a class="code" href="classunits_1_1quantity.html">units::length</a> l = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;integral_longest_side;</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;                <span class="keywordflow">if</span>( l &gt; max_length ) {</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;                    max_length = l;</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;                }</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;            }</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;        }</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;        <span class="keywordflow">return</span> length_adjusted + max_length + stock_length + stock_accessory_length;</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;    }</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160; </div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = <a class="code" href="classitem.html#a481f77e8382794e7b913571ccc109778">is_soft</a>() ? 0_mm : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a883b56941550ca5486ce38fac797b482">longest_side</a>;</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;    <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a6f8cbee71e30797c4efe463d71ffa9e6">item_length_modifier</a>(), <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> );</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>;</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;}</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160; </div>
<div class="line"><a name="l07250"></a><span class="lineno"><a class="line" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae"> 7250</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">item::barrel_length</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::length</a> l = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;barrel_length;</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>() ) {</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;            <span class="comment">// if a gun has a barrel length specifying mod then use that length for sure</span></div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;barrel_length &gt; 0_mm ) {</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;                l = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;barrel_length;</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;                <span class="comment">// if we find an explicit barrel mod then use that and quit the loop</span></div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;            }</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;        }</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;        <span class="comment">// if we&#39;ve sawn off the barrel reduce the damage</span></div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) ) {</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;            l = l - <a class="code" href="item_8cpp.html#a0faac6210fb0760466112e92f09a1f65">sawn_off_reduction</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;        }</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160; </div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;        <span class="keywordflow">return</span> l;</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;        <span class="keywordflow">return</span> 0_mm;</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;    }</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;}</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160; </div>
<div class="line"><a name="l07273"></a><span class="lineno"><a class="line" href="classitem.html#ab0233f37ce5dac9cced5474bdcaffba8"> 7273</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#ab0233f37ce5dac9cced5474bdcaffba8">item::collapsed_volume_delta</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> delta_volume = 0_ml;</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160; </div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;    <span class="comment">// COLLAPSIBLE_STOCK is the legacy version of this just here for mod support</span></div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;    <span class="comment">// TODO Remove at some point</span></div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; ( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a92e7c63899683aef8cd8288bbf555986">flag_COLLAPSIBLE_STOCK</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0ca4aa6ec2304125eedfe368adbdd613">flag_COLLAPSED_STOCK</a> ) ||</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;                      <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aea4b740c27cf414b16f59faf9a1e4c0e">flag_REMOVED_STOCK</a> ) ) ) {</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;        <span class="comment">// consider only the base size of the gun (without mods)</span></div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;        <span class="keywordtype">int</span> tmpvol = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;volume&quot;</span>,</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;                              ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> - <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;barrel_volume ) / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> );</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;        <span class="keywordflow">if</span>( tmpvol &lt;= 3 ) {</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;            <span class="comment">// intentional NOP</span></div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmpvol &lt;= 5 ) {</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;            delta_volume = 250_ml;</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmpvol &lt;= 6 ) {</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;            delta_volume = 500_ml;</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmpvol &lt;= 9 ) {</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;            delta_volume = 750_ml;</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmpvol &lt;= 12 ) {</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;            delta_volume = 1000_ml;</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tmpvol &lt;= 15 ) {</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;            delta_volume = 1250_ml;</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;            delta_volume = 1500_ml;</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;        }</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;    }</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160; </div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;    <span class="keywordflow">return</span> delta_volume;</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;}</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160; </div>
<div class="line"><a name="l07304"></a><span class="lineno"><a class="line" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3"> 7304</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">item::corpse_volume</a>( <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> *corpse )<span class="keyword"> const</span></div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> = <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a228db8f2c45aee4865f92ca5a561889f">volume</a>;</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a> ) ) {</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;        <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> *= 0.25;</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;    }</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a> ) ) {</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;        <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> *= 0.75;</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;    }</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7de72a0c864c849eaed5fb1c01ed1486">flag_GIBBED</a> ) ) {</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;        <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> *= 0.85;</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;    }</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9e3e9a6a06acbe427c7a6071ce59aade">flag_SKINNED</a> ) ) {</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;        <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> *= 0.85;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    }</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> &gt; <a class="code" href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a> ) {</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;        <span class="comment">// Silently set volume so the corpse can still spawn but a mtype can have a volume &gt; MAX_ITEM_VOLUME</span></div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;        <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> = <a class="code" href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a>;</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;    }</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a> &gt; 0_ml ) {</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a>;</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;    }</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;invalid monster volume for corpse&quot;</span> );</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;    <span class="keywordflow">return</span> 0_ml;</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;}</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160; </div>
<div class="line"><a name="l07330"></a><span class="lineno"><a class="line" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e"> 7330</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">item::base_volume</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;        <span class="keywordflow">return</span> 0_ml;</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;    }</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> );</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;    }</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160; </div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0_ml;</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += it.<a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>();</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;            }</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;        }</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;    }</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160; </div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> &gt; 0 ) {</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> % <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> == 0_ml ) {</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a>;</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> + 1_ml;</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;        }</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;    }</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160; </div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>;</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;}</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160; </div>
<div class="line"><a name="l07360"></a><span class="lineno"><a class="line" href="classitem.html#a686df014e8aa8bc4637883802d05f935"> 7360</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a>( <span class="keywordtype">bool</span> integral, <span class="keywordtype">bool</span> ignore_contents, <span class="keywordtype">int</span> charges_in_vol )<span class="keyword"> const</span></div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    charges_in_vol = charges_in_vol &lt; 0 || charges_in_vol &gt; <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ? <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : charges_in_vol;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;        <span class="keywordflow">return</span> 0_ml;</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;    }</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160; </div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">corpse_volume</a>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> );</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;    }</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160; </div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_volume ) {</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0_ml;</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += it.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>();</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;                }</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;            }</div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;            <span class="comment">// 1 mL minimum craft volume to avoid 0 volume errors from practices or hammerspace</span></div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;            <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_volume = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, 1_ml );</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;        }</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_volume;</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;    }</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160; </div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> local_volume = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;volume&quot;</span>, -1 );</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;    <span class="keywordflow">if</span>( local_volume &gt;= 0 ) {</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = local_volume * <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>;</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( integral ) {</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">integral_volume</a>;</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a>;</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;    }</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160; </div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::quantity&lt;int64_t, units::volume_in_milliliter_tag&gt;</a> num = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> * <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span></div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;                ( charges_in_vol );</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> &lt;= 0 ) {</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>() &lt;= 0 ) {</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item type %s has invalid default charges %d&quot;</span>, <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">charges_default</a>() );</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item type %s has invalid stack_size %d&quot;</span>, <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> );</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;            }</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = num;</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = num / <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a>;</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;            <span class="keywordflow">if</span>( num % <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> != 0_ml ) {</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += 1_ml;</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;            }</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;        }</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;    }</div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160; </div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;    <span class="keywordflow">if</span>( !ignore_contents ) {</div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a78b244617d790aa60293b82f356a491b">item_size_modifier</a>();</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;    }</div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160; </div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;    <span class="comment">// if it has additional pockets include the volume of those</span></div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a56bfd4ca89a4f9b723787eb847431840">has_additional_pockets</a>() ) {</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a0e06ccea0158cffe45bb1a5d1db7568b">get_additional_volume</a>();</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;    }</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160; </div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;    <span class="comment">// TODO: do a check if the item is collapsed or not</span></div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> -= <a class="code" href="classitem.html#ab0233f37ce5dac9cced5474bdcaffba8">collapsed_volume_delta</a>();</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160; </div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *elem : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += elem-&gt;volume( <span class="keyword">true</span> );</div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;        }</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160; </div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a> ) ) {</div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> -= <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;barrel_volume;</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;        }</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;    }</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160; </div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;}</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160; </div>
<div class="line"><a name="l07438"></a><span class="lineno"><a class="line" href="classitem.html#a81798b5b03c8bf2a153f9980de316f48"> 7438</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a81798b5b03c8bf2a153f9980de316f48">item::lift_strength</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> = <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() );</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> / 10000, 1 );</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;}</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160; </div>
<div class="line"><a name="l07444"></a><span class="lineno"><a class="line" href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c"> 7444</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c">item::attack_time</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;you )<span class="keyword"> const</span></div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 65 + ( <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / 62.5_ml + <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / 60_gram ) / <a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#a778f402036fcb41dbaf8aeef08304254">calculate_by_enchantment_wield</a>( you, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998afd3fd8d876c094291424cddad4c109da">enchant_vals::mod::ITEM_ATTACK_SPEED</a>,</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;                                          <span class="keyword">true</span> );</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;}</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160; </div>
<div class="line"><a name="l07452"></a><span class="lineno"><a class="line" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc"> 7452</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">item::damage_melee</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dt )<span class="keyword"> const</span></div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;    }</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160; </div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;    <span class="comment">// effectiveness is reduced by 10% per damage level</span></div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;    <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a>.count( dt ) &gt; 0 ) {</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;        res = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">melee</a>.at( dt );</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;    }</div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;    res = <a class="code" href="classitem.html#a1703999bf22b8d2459823a6b779d13b7">damage_adjusted_melee_weapon_damage</a>( res );</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160; </div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;    <span class="comment">// apply type specific flags</span></div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    <span class="comment">// FIXME: Hardcoded damage types</span></div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    <span class="keywordflow">if</span>( dt == <a class="code" href="item_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a410cf578a9c95e78d5ae66287e05dc58">flag_REDUCED_BASHING</a> ) ) {</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;        res *= 0.5;</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    }</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;    <span class="keywordflow">if</span>( dt-&gt;<a class="code" href="structdamage__type.html#a11443d56f5134114d7ab862fabb9b23f">edged</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a> ) ) {</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;        res *= 1.3;</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;    }</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160; </div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;    <span class="comment">// consider any attached bayonets</span></div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;        std::vector&lt;int&gt; opts = { res };</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;is_bayonet ) {</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;                opts.push_back( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;damage_melee( dt ) );</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;            }</div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;        }</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;        <span class="keywordflow">return</span> *std::max_element( opts.begin(), opts.end() );</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160; </div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;    }</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160; </div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( res, 0 );</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;}</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160; </div>
<div class="line"><a name="l07489"></a><span class="lineno"><a class="line" href="classitem.html#a1eabd9cf88a2b7c1cbdd8b8ec28b002d"> 7489</a></span>&#160;<a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="classitem.html#a1eabd9cf88a2b7c1cbdd8b8ec28b002d">item::base_damage_melee</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;    <span class="comment">// TODO: Caching</span></div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;    <a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__type.html">damage_type</a> &amp;dt : <a class="code" href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a>() ) {</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;        <span class="keywordtype">int</span> dam = <a class="code" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">damage_melee</a>( dt.id );</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;        <span class="keywordflow">if</span>( dam &gt; 0 ) {</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add_damage( dt.id, dam );</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;        }</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;    }</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160; </div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;}</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160; </div>
<div class="line"><a name="l07503"></a><span class="lineno"><a class="line" href="classitem.html#a13b2b008995a2f2f2daa63be578b27c8"> 7503</a></span>&#160;<a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="classitem.html#a13b2b008995a2f2f2daa63be578b27c8">item::base_damage_thrown</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;    <span class="comment">// TODO: Create a separate cache for individual items (for modifiers like diamond etc.)</span></div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">thrown_damage</a>;</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;}</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160; </div>
<div class="line"><a name="l07509"></a><span class="lineno"><a class="line" href="classitem.html#a04985a2b99688b687432463fb2f0a853"> 7509</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a04985a2b99688b687432463fb2f0a853">item::reach_range</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;    <span class="keywordtype">int</span> res = 1;</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160; </div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a> ) ) {</div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;        res = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af5cf62257c50aab58dba36dbb4d834f6">flag_REACH3</a> ) ? 3 : 2;</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;    }</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160; </div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;    <span class="comment">// for guns consider any attached gunmods</span></div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;m : <a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>() ) {</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;            <span class="keywordflow">if</span>( guy.<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() &amp;&amp; m.second.flags.count( <span class="stringliteral">&quot;NPC_AVOID&quot;</span> ) ) {</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;            }</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;            <span class="keywordflow">if</span>( m.second.melee() ) {</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;                res = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( res, m.second.qty );</div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;            }</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;        }</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;    }</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160; </div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;}</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160; </div>
<div class="line"><a name="l07532"></a><span class="lineno"><a class="line" href="classitem.html#adb2ea39327f1a8da37740b4bfb171a5d"> 7532</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#adb2ea39327f1a8da37740b4bfb171a5d">item::current_reach_range</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;    <span class="keywordtype">int</span> res = 1;</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160; </div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a> ) ) {</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;        res = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af5cf62257c50aab58dba36dbb4d834f6">flag_REACH3</a> ) ? 3 : 2;</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; <a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="namespacemelee.html">melee</a>() ) {</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;        res = <a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a>-&gt;<a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">gun_range</a>();</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;    }</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160; </div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;        <a class="code" href="classgun__mode.html">gun_mode</a> <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> = <a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>();</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;        <span class="keywordflow">if</span>( !( guy.<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() &amp;&amp; <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>.flags.count( <span class="stringliteral">&quot;NPC_AVOID&quot;</span> ) ) &amp;&amp; <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>.melee() ) {</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;            res = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( res, <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>.qty );</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;        }</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;    }</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160; </div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;}</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160; </div>
<div class="line"><a name="l07552"></a><span class="lineno"><a class="line" href="classitem.html#aa4529b4c18a10ffd5a1f111536ad879b"> 7552</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aa4529b4c18a10ffd5a1f111536ad879b">item::unset_flags</a>()</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;{</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;    <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>.clear();</div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;    <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;}</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160; </div>
<div class="line"><a name="l07558"></a><span class="lineno"><a class="line" href="classitem.html#a45bcd33992b7d26eb4ae9f76a16b58fa"> 7558</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a45bcd33992b7d26eb4ae9f76a16b58fa">item::has_fault</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> &amp;<a class="code" href="classfault.html">fault</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.count( <a class="code" href="classfault.html">fault</a> );</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;}</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160; </div>
<div class="line"><a name="l07563"></a><span class="lineno"><a class="line" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685"> 7563</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">item::has_fault_flag</a>( <span class="keyword">const</span> std::string &amp;searched_flag )<span class="keyword"> const</span></div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> &amp;<a class="code" href="classfault.html">fault</a> : <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a> ) {</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classfault.html">fault</a>-&gt;<a class="code" href="classfault.html#a8aaf546ba1a223455f440c7ba984a155">has_flag</a>( searched_flag ) ) {</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;        }</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;    }</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;}</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160; </div>
<div class="line"><a name="l07573"></a><span class="lineno"><a class="line" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7"> 7573</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">item::has_own_flag</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f )<span class="keyword"> const</span></div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>.find( f ) != <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>.end();</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;}</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160; </div>
<div class="line"><a name="l07578"></a><span class="lineno"><a class="line" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384"> 7578</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;f )<span class="keyword"> const</span></div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;    <span class="keywordflow">if</span>( !f.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to check invalid flag_id %s&quot;</span>, f.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;    }</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160; </div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.find( f ) != <a class="code" href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">inherited_tags_cache</a>.end();</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ) {</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;    }</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160; </div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;    <span class="comment">// other item type flags</span></div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">has_flag</a>( f );</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ) {</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;    }</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160; </div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;    <span class="comment">// now check for item specific flags</span></div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( f );</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;}</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160; </div>
<div class="line"><a name="l07602"></a><span class="lineno"><a class="line" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12"> 7602</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag )</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;{</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;    <span class="keywordflow">if</span>( flag.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;        <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>.insert( flag );</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;        <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>( flag );</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;        <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to set invalid flag_id %s&quot;</span>, flag.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;    }</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;}</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160; </div>
<div class="line"><a name="l07614"></a><span class="lineno"><a class="line" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c"> 7614</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">item::has_vitamin</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> &amp;v )<span class="keyword"> const</span></div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;    <span class="keywordflow">if</span>( !this-&gt;<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;    }</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;    <span class="comment">// We need this function to get all vitamins including from inheritance.</span></div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;    <span class="comment">// But we don&#39;t care about calories, so we can just pass a dummy.</span></div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;    <a class="code" href="classnpc.html">npc</a> dummy;</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;    <span class="keyword">const</span> <a class="code" href="structnutrients.html">nutrients</a> food_item = dummy.<a class="code" href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">compute_effective_nutrients</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> <span class="keyword">const</span>&amp; [vit_id, amount] : food_item.<a class="code" href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">vitamins</a>() ) {</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;        <span class="keywordflow">if</span>( vit_id == v ) {</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;            <span class="keywordflow">if</span>( amount &gt; 0 ) {</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;            }</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;        }</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;    }</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;}</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160; </div>
<div class="line"><a name="l07635"></a><span class="lineno"><a class="line" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0"> 7635</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">item::set_fault</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">fault_id</a> &amp;<a class="code" href="classstring__id.html">fault_id</a> )</div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;{</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;    <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.insert( <a class="code" href="classstring__id.html">fault_id</a> );</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;}</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160; </div>
<div class="line"><a name="l07641"></a><span class="lineno"><a class="line" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab"> 7641</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">item::unset_flag</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag )</div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;{</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;    <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>.erase( flag );</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;    <a class="code" href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">update_prefix_suffix_flags</a>();</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;    <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;}</div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160; </div>
<div class="line"><a name="l07649"></a><span class="lineno"><a class="line" href="classitem.html#a3bd2871ecfac9c7ef3d0c35f098ffe24"> 7649</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a3bd2871ecfac9c7ef3d0c35f098ffe24">item::set_flag_recursive</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag )</div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;{</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( flag );</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;            it.<a class="code" href="classitem.html#a3bd2871ecfac9c7ef3d0c35f098ffe24">set_flag_recursive</a>( flag );</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;        }</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;    }</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;}</div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160; </div>
<div class="line"><a name="l07660"></a><span class="lineno"><a class="line" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1"> 7660</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">item::FlagsSetType</a> &amp;<a class="code" href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">item::get_flags</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a>;</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;}</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160; </div>
<div class="line"><a name="l07665"></a><span class="lineno"><a class="line" href="classitem.html#a4a8ef7489779cfdd9d416ea5ae15f672"> 7665</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">item::FlagsSetType</a> &amp;<a class="code" href="classitem.html#a4a8ef7489779cfdd9d416ea5ae15f672">item::get_prefix_flags</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ab3c721f88b6fae5edd5a79f0da60b752">prefix_tags_cache</a>;</div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;}</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160; </div>
<div class="line"><a name="l07670"></a><span class="lineno"><a class="line" href="classitem.html#a8bd4c9e45ebb4ca6c43c389e1eb6d3af"> 7670</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">item::FlagsSetType</a> &amp;<a class="code" href="classitem.html#a8bd4c9e45ebb4ca6c43c389e1eb6d3af">item::get_suffix_flags</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1eb36ac46ad3b85c4d2e4c80ede83ff3">suffix_tags_cache</a>;</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;}</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160; </div>
<div class="line"><a name="l07675"></a><span class="lineno"><a class="line" href="classitem.html#aeb49bb1b64eba3731e606ffe83e95b4f"> 7675</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aeb49bb1b64eba3731e606ffe83e95b4f">item::has_property</a>( <span class="keyword">const</span> std::string &amp;prop )<span class="keyword"> const</span></div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.find( prop ) != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.end();</div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;}</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160; </div>
<div class="line"><a name="l07680"></a><span class="lineno"><a class="line" href="classitem.html#ac7c536dbf6f3c3e9e28015990a060e41"> 7680</a></span>&#160;std::string <a class="code" href="classitem.html#ac7c536dbf6f3c3e9e28015990a060e41">item::get_property_string</a>( <span class="keyword">const</span> std::string &amp;prop, <span class="keyword">const</span> std::string &amp;def )<span class="keyword"> const</span></div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.find( prop );</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;    <span class="keywordflow">return</span> it != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.end() ? it-&gt;second : def;</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;}</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160; </div>
<div class="line"><a name="l07686"></a><span class="lineno"><a class="line" href="classitem.html#a19e6dd5afd4bada41c8d97792fd0815d"> 7686</a></span>&#160;int64_t <a class="code" href="classitem.html#a19e6dd5afd4bada41c8d97792fd0815d">item::get_property_int64_t</a>( <span class="keyword">const</span> std::string &amp;prop, int64_t def )<span class="keyword"> const</span></div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.find( prop );</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;    <span class="keywordflow">if</span>( it != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">properties</a>.end() ) {</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;        <span class="keywordtype">char</span> *e = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;        int64_t r = std::strtoll( it-&gt;second.c_str(), &amp;e, 10 );</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;second.empty() &amp;&amp; *e == <span class="charliteral">&#39;\0&#39;</span> ) {</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;            <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;        }</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;invalid property &#39;%s&#39; for item &#39;%s&#39;&quot;</span>, prop.c_str(), <a class="code" href="namespacetname.html">tname</a>() );</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;    }</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;    <span class="keywordflow">return</span> def;</div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;}</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160; </div>
<div class="line"><a name="l07700"></a><span class="lineno"><a class="line" href="classitem.html#a25e94e9b8a8008b0fc3981e31cdd57e9"> 7700</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a25e94e9b8a8008b0fc3981e31cdd57e9">item::has_quality_nonrecursive</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> &amp;qual, <span class="keywordtype">int</span> level )<span class="keyword"> const</span></div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a713d080573a79762924441b2b7350909">get_quality_nonrecursive</a>( qual ) &gt;= level;</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;}</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160; </div>
<div class="line"><a name="l07705"></a><span class="lineno"><a class="line" href="classitem.html#a713d080573a79762924441b2b7350909"> 7705</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a713d080573a79762924441b2b7350909">item::get_quality_nonrecursive</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> &amp;<span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">bool</span> strict_boiling )<span class="keyword"> const</span></div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;<span class="keyword"></span>{<span class="comment"></span></div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;<span class="comment">     * EXCEPTION: Items with quality BOIL only count as such if they are empty.</span></div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;    <span class="keywordflow">if</span>( strict_boiling &amp;&amp; <span class="keywordtype">id</span> == <a class="code" href="item_8cpp.html#ac27854471d10c049f77918a38d801b70">qual_BOIL</a> &amp;&amp; !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7a9621218e39e4ad6149f2f0ae48132d">empty_container</a>() ) {</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;        <span class="keywordflow">return</span> INT_MIN;</div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;    }</div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160; </div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;    <span class="keywordtype">int</span> return_quality = INT_MIN;</div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160; </div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;    <span class="comment">// Check for inherent item quality</span></div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const quality_id, int&gt; &amp;<a class="code" href="structquality.html">quality</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">qualities</a> ) {</div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structquality.html">quality</a>.first == <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;            return_quality = <a class="code" href="structquality.html">quality</a>.second;</div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;        }</div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;    }</div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160; </div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;    <span class="comment">// If tool has charged qualities and enough charge to use at least once</span></div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;    <span class="comment">// (using ammo_remaining() with player character to include bionic/UPS power)</span></div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a>.empty() &amp;&amp; <a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;<a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) ) {</div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;        <span class="comment">// see if any charged qualities are better than the current one</span></div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const quality_id, int&gt; &amp;<a class="code" href="structquality.html">quality</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a22bc17798578e23432abf6e9194521f7">charged_qualities</a> ) {</div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="structquality.html">quality</a>.first == <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;                return_quality = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( return_quality, <a class="code" href="structquality.html">quality</a>.second );</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;            }</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;        }</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;    }</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160; </div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;    <span class="keywordflow">return</span> return_quality;</div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;}</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160; </div>
<div class="line"><a name="l07737"></a><span class="lineno"><a class="line" href="classitem.html#a7d1ba8693571b9563e111fe709348438"> 7737</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a7d1ba8693571b9563e111fe709348438">item::get_quality</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">quality_id</a> &amp;<span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">bool</span> strict_boiling )<span class="keyword"> const</span></div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;<span class="keyword"></span>{<span class="comment"></span></div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;<span class="comment">     * EXCEPTION: Items with quality BOIL only count as such if they are empty.</span></div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;    <span class="keywordflow">if</span>( strict_boiling &amp;&amp; <span class="keywordtype">id</span> == <a class="code" href="item_8cpp.html#ac27854471d10c049f77918a38d801b70">qual_BOIL</a> &amp;&amp; !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7a9621218e39e4ad6149f2f0ae48132d">empty_container</a>() ) {</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;        <span class="keywordflow">return</span> INT_MIN;</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;    }</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160; </div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;    <span class="comment">// First check the item itself</span></div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;    <span class="keywordtype">int</span> return_quality = <a class="code" href="classitem.html#a713d080573a79762924441b2b7350909">get_quality_nonrecursive</a>( <span class="keywordtype">id</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160; </div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;    <span class="comment">// If any contained item has a better quality, use that instead</span></div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;    return_quality = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( return_quality, <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac79c45fbf5363f3a79a62083a72c4416">best_quality</a>( <span class="keywordtype">id</span> ) );</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160; </div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;    <span class="keywordflow">return</span> return_quality;</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;}</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160; </div>
<div class="line"><a name="l07755"></a><span class="lineno"><a class="line" href="classitem.html#ab842b7c3aaa4d813575035be37cd3714"> 7755</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab842b7c3aaa4d813575035be37cd3714">item::has_technique</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> &amp;tech )<span class="keyword"> const</span></div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>.count( tech ) &gt; 0 || <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.count( tech ) &gt; 0;</div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;}</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160; </div>
<div class="line"><a name="l07760"></a><span class="lineno"><a class="line" href="classitem.html#a178ada62c301bb1058bb56b1d8531a36"> 7760</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a178ada62c301bb1058bb56b1d8531a36">item::add_technique</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">matec_id</a> &amp;tech )</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;{</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;    <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.insert( tech );</div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;}</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160; </div>
<div class="line"><a name="l07765"></a><span class="lineno"><a class="line" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188"> 7765</a></span>&#160;std::vector&lt;item *&gt; <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">item::toolmods</a>()</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;{</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;    std::vector&lt;item *&gt; res;</div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ) ) {</div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;            <span class="keywordflow">if</span>( e-&gt;is_toolmod() ) {</div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;                res.push_back( e );</div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;            }</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;        }</div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;    }</div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;}</div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160; </div>
<div class="line"><a name="l07778"></a><span class="lineno"><a class="line" href="classitem.html#a9b6423923c34179706a69672ef5f9b0e"> 7778</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">item::toolmods</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;    std::vector&lt;const item *&gt; res;</div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> ) ) {</div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;            <span class="keywordflow">if</span>( e-&gt;is_toolmod() ) {</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;                res.push_back( e );</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;            }</div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;        }</div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;    }</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;}</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160; </div>
<div class="line"><a name="l07791"></a><span class="lineno"><a class="line" href="classitem.html#a26022bd0e72f14c5abf2fa5edf806c81"> 7791</a></span>&#160;std::set&lt;matec_id&gt; <a class="code" href="classitem.html#a26022bd0e72f14c5abf2fa5edf806c81">item::get_techniques</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;    std::set&lt;matec_id&gt; result = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af120b48958f64cb16301d76d95d57d6a">techniques</a>;</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;    result.insert( <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.begin(), <a class="code" href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">techniques</a>.end() );</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;}</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160; </div>
<div class="line"><a name="l07798"></a><span class="lineno"><a class="line" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc"> 7798</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">item::get_comestible_fun</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;    }</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;    <span class="keywordtype">int</span> fun = <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;fun;</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag : <a class="code" href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item_tags</a> ) {</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;        fun += flag-&gt;taste_mod();</div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;    }</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">get_flags</a>() ) {</div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;        fun += flag-&gt;taste_mod();</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;    }</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160; </div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) ) {</div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( -5, fun ); <span class="comment">// defrosted MUSHY food is practically tasteless or tastes off</span></div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;    }</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160; </div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;    <span class="keywordflow">return</span> fun;</div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;}</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160; </div>
<div class="line"><a name="l07818"></a><span class="lineno"><a class="line" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b"> 7818</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">item::goes_bad</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceitem__internal.html#a27b6b980a290a373be63b1ef6c0d6d09">item_internal::goes_bad_cache_is_for</a>( <span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceitem__internal.html#ab29e65ae2a5f57badbdb39863fc56496">item_internal::goes_bad_cache_fetch</a>();</div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;    }</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab701cd1281e9805c39c0e8c3df11c4fc">flag_PROCESSING</a> ) ) {</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;    }</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;        <span class="comment">// Corpses rot only if they are made of rotting materials</span></div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;        <span class="comment">// They also only rot if they are not dormant</span></div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#afded2a41cb5fee46d27f7bc5b0fa3189">mon_flag_DORMANT</a> ) ) {</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;        }</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a9e2c24734b538e61e186fb6777b62c25">made_of_any</a>( <a class="code" href="namespacematerials.html#a9efa40da895bb4f5dbeb7db8f3f0b5bb">materials::get_rotting</a>() );</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;    }</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() &amp;&amp; <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;spoils != 0_turns;</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;}</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160; </div>
<div class="line"><a name="l07837"></a><span class="lineno"><a class="line" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b"> 7837</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">item::get_shelf_life</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;spoils;</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;            <span class="keywordflow">return</span> 24_hours;</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;        }</div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;    }</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;    <span class="keywordflow">return</span> 0_turns;</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;}</div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160; </div>
<div class="line"><a name="l07849"></a><span class="lineno"><a class="line" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905"> 7849</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">item::get_relative_rot</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">rot</a> / <a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>();</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;    }</div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;}</div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160; </div>
<div class="line"><a name="l07857"></a><span class="lineno"><a class="line" href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae"> 7857</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae">item::set_relative_rot</a>( <span class="keywordtype">double</span> val )</div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;{</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;        <a class="code" href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">rot</a> = <a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() * val;</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;        <span class="comment">// calc_rot uses last_temp_check (when it&#39;s not turn_zero) instead of bday.</span></div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;        <span class="comment">// this makes sure the rotting starts from now, not from bday.</span></div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;        <span class="comment">// if this item is the result of smoking or milling don&#39;t do this, we want to start from bday.</span></div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab6927a1d5285fa81b3adeef6193fc08e">flag_PROCESSING_RESULT</a> ) ) {</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;            <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;        }</div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;    }</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;}</div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160; </div>
<div class="line"><a name="l07870"></a><span class="lineno"><a class="line" href="classitem.html#a9721daec3304aeb9965b5679f9db3e7f"> 7870</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9721daec3304aeb9965b5679f9db3e7f">item::set_rot</a>( <a class="code" href="classtime__duration.html">time_duration</a> val )</div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;{</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;    <a class="code" href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">rot</a> = val;</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;}</div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160; </div>
<div class="line"><a name="l07875"></a><span class="lineno"><a class="line" href="classitem.html#a8db778da0efb225d159fd8c9128e6249"> 7875</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a8db778da0efb225d159fd8c9128e6249">item::randomize_rot</a>()</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;{</div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() &amp;&amp; <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;spoils &gt; 0_turns ) {</div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> x_input = <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0, 1.0 );</div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> k_rot = ( 1.0 - x_input ) / ( 1.0 + 2.0 * x_input );</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;        <a class="code" href="classitem.html#a9721daec3304aeb9965b5679f9db3e7f">set_rot</a>( <a class="code" href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">get_shelf_life</a>() * k_rot );</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;    }</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160; </div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>() ) {</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;        <span class="keywordflow">if</span>( pocket-&gt;spoil_multiplier() &gt; 0.0f ) {</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *subitem : pocket-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>() ) {</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;                subitem-&gt;randomize_rot();</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;            }</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;        }</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;    }</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;}</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160; </div>
<div class="line"><a name="l07892"></a><span class="lineno"><a class="line" href="classitem.html#af3e78b2fe634d88db841d879588e1ec3"> 7892</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af3e78b2fe634d88db841d879588e1ec3">item::spoilage_sort_order</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;    <span class="keywordtype">int</span> bottom = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::numeric_limits&lt;int&gt;::max</a>();</div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160; </div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;    <span class="keywordtype">bool</span> any_goes_bad = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> min_spoil_time = <a class="code" href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a>;</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;    <a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>( [&amp;]( <a class="code" href="classitem.html">item</a> * <span class="keyword">const</span> node, <a class="code" href="classitem.html">item</a> * <span class="keyword">const</span> parent ) {</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;        <span class="keywordflow">if</span>( node &amp;&amp; node-&gt;<a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() ) {</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;            float spoil_multiplier = 1.0f;</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;            if( parent ) {</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;                const item_pocket *const parent_pocket = parent-&gt;contained_where( *node );</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;                if( parent_pocket ) {</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;                    spoil_multiplier = parent_pocket-&gt;spoil_multiplier();</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;                }</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;            }</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;            <span class="keywordflow">if</span>( spoil_multiplier &gt; 0.0f ) {</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;                time_duration remaining_shelf_life = node-&gt;get_shelf_life() - node-&gt;rot;</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;                if( !any_goes_bad || min_spoil_time * spoil_multiplier &gt; remaining_shelf_life ) {</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;                    any_goes_bad = true;</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;                    min_spoil_time = remaining_shelf_life / spoil_multiplier;</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;                }</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;            }</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;        }</div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;    } );</div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;    <span class="keywordflow">if</span>( any_goes_bad ) {</div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;        <span class="keywordflow">return</span> to_turns&lt;int&gt;( min_spoil_time );</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;    }</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160; </div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;    <span class="keywordflow">if</span>( get_comestible() ) {</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;        <span class="keywordflow">if</span>( get_category_shallow().<a class="code" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>() == <a class="code" href="item_8cpp.html#ad178609087c011320fb56782f1a30cf0">item_category_food</a> ) {</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;            <span class="keywordflow">return</span> bottom - 3;</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( get_category_shallow().<a class="code" href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">get_id</a>() == <a class="code" href="item_8cpp.html#a8619c531b6d61b558022c1f34944259f">item_category_drugs</a> ) {</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;            <span class="keywordflow">return</span> bottom - 2;</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;            <span class="keywordflow">return</span> bottom - 1;</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;        }</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;    }</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;    <span class="keywordflow">return</span> bottom;</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;}</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;<span class="comment"> * Food decay calculation.</span></div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;<span class="comment"> * Calculate how much food rots per hour, based on 3600 rot/hour at 65 F (18.3 C).</span></div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;<span class="comment"> * Rate of rot doubles every 16 F (~8.8888 C) increase in temperature</span></div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;<span class="comment"> * Rate of rot halves every 16 F decrease in temperature</span></div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;<span class="comment"> * Rot maxes out at 105 F</span></div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;<span class="comment"> * Rot stops below 32 F (0C) and above 145 F (63 C)</span></div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l07941"></a><span class="lineno"><a class="line" href="classitem.html#a2432b268a65b74b73851ed9c0387ce12"> 7941</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a2432b268a65b74b73851ed9c0387ce12">item::calc_hourly_rotpoints_at_temp</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> &amp;temp )<span class="keyword"> const</span></div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> dropoff = <a class="code" href="namespaceunits.html#a0a6a5961539645e3bd56992bf148f639">units::from_fahrenheit</a>( 38 ); <span class="comment">// F, ~3 C</span></div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> max_rot_temp = 105; <span class="comment">// F, ~41 C, Maximum rotting rate is at this temperature</span></div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> safe_temp = 145; <span class="comment">// F, ~63 C, safe temperature above which food stops rotting</span></div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160; </div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> &lt;= <a class="code" href="namespacetemperatures.html#a6fe2961d424ef5406871b8ee32764330">temperatures::freezing</a> ||</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;        <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> &gt; <a class="code" href="namespaceunits.html#a0a6a5961539645e3bd56992bf148f639">units::from_fahrenheit</a>( safe_temp ) ) {</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;        <span class="keywordflow">return</span> 0.f;</div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> &lt; dropoff ) {</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;        <span class="comment">// ditch our fancy equation and do a linear approach to 0 rot from 38 F (3 C) -&gt; 32 F (0 C)</span></div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;        <span class="keywordflow">return</span> 600.f * std::exp2( -27.f / 16.f ) * ( <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> ) - <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>(</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;                    <a class="code" href="namespacetemperatures.html#a6fe2961d424ef5406871b8ee32764330">temperatures::freezing</a> ) );</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> &lt; <a class="code" href="namespaceunits.html#a0a6a5961539645e3bd56992bf148f639">units::from_fahrenheit</a>( max_rot_temp ) ) {</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;        <span class="comment">// Exponential progress from 38 F (3 C) to 105 F (41 C)</span></div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;        <span class="keywordflow">return</span> 3600.f * std::exp2( ( <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> ) - 65.f ) / 16.f );</div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;        <span class="comment">// Constant rot from 105 F (41 C) to 145 F (63 C)</span></div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;        <span class="comment">// This is approximately 20364.67 rot/hour</span></div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;        <span class="keywordflow">return</span> 3600.f * std::exp2( ( max_rot_temp - 65.f ) / 16.f );</div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;    }</div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;}</div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160; </div>
<div class="line"><a name="l07964"></a><span class="lineno"><a class="line" href="classitem.html#a9912c47e06d70bd1ca003a8f588f4a02"> 7964</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9912c47e06d70bd1ca003a8f588f4a02">item::calc_rot</a>( <a class="code" href="classunits_1_1quantity.html">units::temperature</a> temp, <span class="keyword">const</span> <span class="keywordtype">float</span> spoil_modifier,</div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp;time_delta )</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;{</div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;    <span class="comment">// Avoid needlessly calculating already rotten things.  Corpses should</span></div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;    <span class="comment">// always rot away and food rots away at twice the shelf life.  If the food</span></div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;    <span class="comment">// is in a sealed container they won&#39;t rot away, this avoids needlessly</span></div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;    <span class="comment">// calculating their rot in that case.</span></div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; <a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() &gt; 2.0 ) {</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;    }</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160; </div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) ) {</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;    }</div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160; </div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;    <span class="comment">// rot modifier</span></div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;    <span class="keywordtype">float</span> factor = spoil_modifier;</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a> ) ) {</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;        factor *= 0.75;</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;    }</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> ) ) {</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;        factor *= 3.0;</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;    }</div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;    <span class="comment">// Food irradiation can quadruple the shelf life.</span></div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;    <span class="comment">// &quot;Shelf life of ground beef patties treated by gamma radiation&quot;:</span></div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;    <span class="comment">// &gt; Beef patties treated at 1.0 and 3.0 kGy [spoiled] by day 14 and 21, ...</span></div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;    <span class="comment">// &gt; patties treated at 5.0 kGy did not spoil until 42 days.</span></div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;    <span class="comment">// &gt; The nonirradiated control samples for both batches of ground beef spoiled within 7 days</span></div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;    <span class="comment">// We get 0.5, 0.33, and 0.167. 0.25 seems reasonable for irradiation</span></div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a43bdf243cb0c0e6f3c61a551442bcfc2">flag_IRRADIATED</a> ) ) {</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;        factor *= 0.25;</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;    }</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160; </div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> ) ) {</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;        <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="namespacetemperatures.html#a6ac4b0413305dd75769d62227081d8b1">temperatures::fridge</a>, <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;    }</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160; </div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;    <a class="code" href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">rot</a> += factor * time_delta / 1_hours * <a class="code" href="classitem.html#a2432b268a65b74b73851ed9c0387ce12">calc_hourly_rotpoints_at_temp</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> ) * 1_turns;</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;}</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160; </div>
<div class="line"><a name="l08004"></a><span class="lineno"><a class="line" href="classitem.html#a99e821ffbf8bdda7759ac92aff06c910"> 8004</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a99e821ffbf8bdda7759ac92aff06c910">item::calc_rot_while_processing</a>( <a class="code" href="classtime__duration.html">time_duration</a> processing_duration )</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;{</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#ab701cd1281e9805c39c0e8c3df11c4fc">flag_PROCESSING</a> ) ) {</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;calc_rot_while_processing called on non smoking item: %s&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;    }</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160; </div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;    <span class="comment">// Apply no rot or temperature while smoking</span></div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;    <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> += processing_duration;</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;}</div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160; </div>
<div class="line"><a name="l08015"></a><span class="lineno"><a class="line" href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95"> 8015</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95">item::get_env_resist</a>( <span class="keywordtype">int</span> override_base_resist )<span class="keyword"> const</span></div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;env_resist : 0;</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;    }</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;    <span class="comment">// modify if item is a gas mask and has filter</span></div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;    <span class="keywordtype">int</span> resist_base = t-&gt;<a class="code" href="structislot__armor.html#a0c18142004c2a71350e49205a67c7073">avg_env_resist</a>();</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;    <span class="keywordtype">int</span> resist_filter = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span>, 0 );</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( { resist_base, resist_filter, override_base_resist } );</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160; </div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;    <span class="keywordflow">return</span> std::lround( <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> * <a class="code" href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39">get_relative_health</a>() );</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;}</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160; </div>
<div class="line"><a name="l08029"></a><span class="lineno"><a class="line" href="classitem.html#acb31dfc93d0de49315fdbbac504236df"> 8029</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">item::get_base_env_resist_w_filter</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;env_resist_w_filter : 0;</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;    }</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structislot__armor.html#a65b02b04b0a3b268c012131ba5ba3e40">avg_env_resist_w_filter</a>();</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;}</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160; </div>
<div class="line"><a name="l08038"></a><span class="lineno"><a class="line" href="classitem.html#a82e0833373b0141aec30768dfc349bbe"> 8038</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">item::is_power_armor</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;power_armor : <span class="keyword">false</span>;</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;    }</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structislot__armor.html#a7610fea1701c2a18844d1241f743fe21">power_armor</a>;</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;}</div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160; </div>
<div class="line"><a name="l08047"></a><span class="lineno"><a class="line" href="classitem.html#afeaaf502a3517e5359409ca0b9f658ad"> 8047</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#afeaaf502a3517e5359409ca0b9f658ad">item::get_avg_encumber</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p, <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36">encumber_flags</a> flags )<span class="keyword"> const</span></div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;    }</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160; </div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;    <span class="keywordtype">int</span> avg_encumber = 0;</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;    <span class="keywordtype">int</span> avg_ctr = 0;</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160; </div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : t-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;        <span class="keywordflow">if</span>( entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;limb : entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;                <span class="keywordtype">int</span> encumber = <a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">get_encumber</a>( p, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( limb ), flags );</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;                <span class="keywordflow">if</span>( encumber ) {</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;                    avg_encumber += encumber;</div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;                    ++avg_ctr;</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;                }</div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;            }</div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;        }</div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;    }</div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;    <span class="keywordflow">if</span>( avg_encumber == 0 ) {</div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;        avg_encumber /= avg_ctr;</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;        <span class="keywordflow">return</span> avg_encumber;</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;    }</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;}</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160; </div>
<div class="line"><a name="l08076"></a><span class="lineno"><a class="line" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6"> 8076</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">item::get_encumber</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="classbodypart.html">bodypart</a>,</div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;                        <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36">encumber_flags</a> flags )<span class="keyword"> const</span></div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;    <span class="keywordtype">int</span> encumber = 0;</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;    }</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160; </div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;    <span class="keywordtype">float</span> relative_encumbrance;</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160; </div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;    <span class="keywordflow">if</span>( flags &amp; <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36a858e3134c711ff26c7fc1b99dbcd8607">encumber_flags::assume_full</a> ) {</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;        relative_encumbrance = 1.0f;</div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( flags &amp; <a class="code" href="classitem.html#ac7dd765bb12db6e65022f21239987b36aba8ec6c1d4c689a9d653e1b9da324ce4">encumber_flags::assume_empty</a> ) {</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;        relative_encumbrance = 0.0f;</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;        <span class="comment">// Additional encumbrance from non-rigid pockets</span></div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160; </div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;        <span class="comment">// p.get_check_encumbrance() may be set when it&#39;s not possible</span></div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;        <span class="comment">// to reset `cached_relative_encumbrance` for individual items</span></div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;        <span class="comment">// (e.g. when dropping via AIM, see #42983)</span></div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aa5db17a55d827f446731edccd2815cfd">cached_relative_encumbrance</a> || p.<a class="code" href="classCharacter.html#ae43f0438aaa62322ab6d33b7500bc905">get_check_encumbrance</a>() ) {</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;            <a class="code" href="classitem.html#aa5db17a55d827f446731edccd2815cfd">cached_relative_encumbrance</a> = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adce46166dc426ccc7ae7f4b50b9b91d3">relative_encumbrance</a>();</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;        }</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;        relative_encumbrance = *<a class="code" href="classitem.html#aa5db17a55d827f446731edccd2815cfd">cached_relative_encumbrance</a>;</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;    }</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160; </div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion_data = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="classbodypart.html">bodypart</a> ) ) {</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;        encumber = portion_data-&gt;encumber;</div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;            encumber += <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * portion_data-&gt;volume_encumber_modifier /</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;                        <a class="code" href="structarmor__portion__data.html#ab61ec2399ae0c3b760af82685b141dc0">armor_portion_data::volume_per_encumbrance</a>;</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;        }</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160; </div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;        <span class="comment">// encumbrance from added or modified pockets</span></div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="classitem.html#acb4c178eb7901e05c1a7306149f6610d">additional_encumbrance</a> = <a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#a5f91b801e654750e6563df6f09a6c2e6">get_additional_pocket_encumbrance</a>(</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;                                         portion_data-&gt;volume_encumber_modifier );</div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;        encumber += <a class="code" href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">std::ceil</a>( relative_encumbrance * ( portion_data-&gt;max_encumber +</div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;                               <a class="code" href="classitem.html#acb4c178eb7901e05c1a7306149f6610d">additional_encumbrance</a> - portion_data-&gt;encumber ) );</div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160; </div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;        <span class="comment">// add the encumbrance values of any ablative plates and additional encumbrance pockets</span></div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a601098e9f42af97e6fd3922bf574ca4a">has_additional_encumbrance</a>() ) {</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>() ) {</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;                <span class="keywordflow">if</span>( pocket-&gt;get_pocket_data()-&gt;extra_encumbrance &gt; 0 &amp;&amp; !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;                    encumber += pocket-&gt;get_pocket_data()-&gt;extra_encumbrance;</div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;                }</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;            }</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;        }</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;    }</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160; </div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;    <span class="comment">// even if we don&#39;t have data we might have ablative armor draped over it</span></div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;                encumber += ablative_armor.<a class="code" href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">get_encumber</a>( p, <a class="code" href="classbodypart.html">bodypart</a>, flags );</div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;            }</div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;        }</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;    }</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160; </div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;    <span class="comment">// Fit checked before changes, fitting shouldn&#39;t reduce penalties from patching.</span></div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;        encumber = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( encumber / 2, encumber - 10 );</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;    }</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160; </div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;    <span class="comment">// TODO: Should probably have sizing affect coverage</span></div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60a">sizing</a> sizing_level = <a class="code" href="classitem.html#ac72213261395e0c525121ee6d2553a97">get_sizing</a>( p );</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;    <span class="keywordflow">switch</span>( sizing_level ) {</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">sizing::small_sized_human_char</a>:</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">sizing::small_sized_big_char</a>:</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;            <span class="comment">// non small characters have a HARD time wearing undersized clothing</span></div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;            encumber *= 3;</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">sizing::human_sized_small_char</a>:</div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">sizing::big_sized_small_char</a>:</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;            <span class="comment">// clothes bag up around smol characters and encumber them more</span></div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;            encumber *= 2;</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;    }</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160; </div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;    encumber += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">std::ceil</a>( <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ac78afc125f0318b59e4a332b4f7775d6">clothing_mod_type_encumbrance</a> ) ) );</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160; </div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;    <span class="keywordflow">return</span> encumber;</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;}</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160; </div>
<div class="line"><a name="l08164"></a><span class="lineno"><a class="line" href="classitem.html#a8d68589372751014af945302be6992ef"> 8164</a></span>&#160;std::vector&lt;layer_level&gt; <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">item::get_layer</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;();</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;    }</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;    <span class="keywordflow">return</span> armor-&gt;<a class="code" href="structislot__armor.html#ad56f6e5ee6ba203edbce4ea55d11fe2b">all_layers</a>;</div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;}</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160; </div>
<div class="line"><a name="l08173"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa823c9b895269af8721b12b861653c8d"> 8173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="item_8cpp.html#aa823c9b895269af8721b12b861653c8d">get_layer_helper</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *i, <a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, std::set&lt;layer_level&gt; &amp;layers )</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;{</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = i-&gt;<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;    }</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160; </div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : t-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;        }</div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == bpid ) {</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;                layers.insert( data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.begin(), data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.end() );</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;            }</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;        }</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;    }</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;}</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160; </div>
<div class="line"><a name="l08192"></a><span class="lineno"><a class="line" href="classitem.html#aac6ec1dbc8590cdcbd1c275e02e3679a"> 8192</a></span>&#160;std::vector&lt;layer_level&gt; <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">item::get_layer</a>( <a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160; </div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;    std::set&lt;layer_level&gt; layers;</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160; </div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;    <a class="code" href="item_8cpp.html#aa823c9b895269af8721b12b861653c8d">get_layer_helper</a>( <span class="keyword">this</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, layers );</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160; </div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;    <span class="comment">//get layers for ablative armor too</span></div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;                <a class="code" href="item_8cpp.html#aa823c9b895269af8721b12b861653c8d">get_layer_helper</a>( &amp;ablative_armor, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, layers );</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;            }</div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;        }</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;    }</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160; </div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;    <span class="comment">// if the item has additional pockets and is on the torso it should also be strapped</span></div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a> &amp;&amp; <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a56bfd4ca89a4f9b723787eb847431840">has_additional_pockets</a>() ) {</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;        layers.insert( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a> );</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;    }</div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160; </div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;    <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;( layers.begin(), layers.end() );</div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;}</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160; </div>
<div class="line"><a name="l08218"></a><span class="lineno"><a class="line" href="classitem.html#a40c40e7dbfce95fb8ecdb3c40a19a571"> 8218</a></span>&#160;std::vector&lt;layer_level&gt; <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">item::get_layer</a>( <a class="code" href="classint__id.html">sub_bodypart_id</a> sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;();</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;    }</div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160; </div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : t-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;            <span class="keywordflow">if</span>( sbp == bpid ) {</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;                <span class="comment">// if the item has additional pockets and is on the torso it should also be strapped</span></div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;                <span class="keywordflow">if</span>( ( sbp == <a class="code" href="item_8cpp.html#a0a159d6d4279cc648752aff679722d70">sub_body_part_torso_upper</a> || sbp == <a class="code" href="item_8cpp.html#a77e4ff334cff4f91e1553f63fe6e8b92">sub_body_part_torso_lower</a> ) &amp;&amp;</div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;                    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a56bfd4ca89a4f9b723787eb847431840">has_additional_pockets</a>() ) {</div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;                    std::set&lt;layer_level&gt; with_belted = data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>;</div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;                    with_belted.insert( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a> );</div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;                    <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;( with_belted.begin(), with_belted.end() );</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;                    <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;( data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.begin(), data.<a class="code" href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">layers</a>.end() );</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;                }</div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;            }</div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;        }</div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;    }</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;    <span class="comment">// body part not covered by this armour</span></div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;    <span class="keywordflow">return</span> std::vector&lt;layer_level&gt;();</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;}</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160; </div>
<div class="line"><a name="l08244"></a><span class="lineno"><a class="line" href="classitem.html#a491e1bfdd33d64777349e4b472035575"> 8244</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aec5b411d5f37e7ca9a75bfeed5af302b">item::has_layer</a>( <span class="keyword">const</span> std::vector&lt;layer_level&gt; &amp;ll )<span class="keyword"> const</span></div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;    }</div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;test_level : ll ) {</div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;        <span class="keywordflow">if</span>( std::find( t-&gt;<a class="code" href="structislot__armor.html#ad56f6e5ee6ba203edbce4ea55d11fe2b">all_layers</a>.begin(), t-&gt;<a class="code" href="structislot__armor.html#ad56f6e5ee6ba203edbce4ea55d11fe2b">all_layers</a>.end(), test_level ) != t-&gt;<a class="code" href="structislot__armor.html#ad56f6e5ee6ba203edbce4ea55d11fe2b">all_layers</a>.end() ) {</div>
<div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;        }</div>
<div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;    }</div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;}</div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160; </div>
<div class="line"><a name="l08258"></a><span class="lineno"><a class="line" href="classitem.html#aec5b411d5f37e7ca9a75bfeed5af302b"> 8258</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aec5b411d5f37e7ca9a75bfeed5af302b">item::has_layer</a>( <span class="keyword">const</span> std::vector&lt;layer_level&gt; &amp;ll, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;    <span class="keyword">const</span> std::vector&lt;layer_level&gt; layers = <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;test_level : ll ) {</div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;        <span class="keywordflow">if</span>( std::find( layers.begin(), layers.end(), test_level ) != layers.end() ) {</div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;        }</div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;    }</div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;}</div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160; </div>
<div class="line"><a name="l08269"></a><span class="lineno"><a class="line" href="classitem.html#ab8cdcf90574dfd62be683bc25d95f77d"> 8269</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aec5b411d5f37e7ca9a75bfeed5af302b">item::has_layer</a>( <span class="keyword">const</span> std::vector&lt;layer_level&gt; &amp;ll, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;    <span class="keyword">const</span> std::vector&lt;layer_level&gt; layers = <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>( sbp );</div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> &amp;test_level : ll ) {</div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;        <span class="keywordflow">if</span>( std::find( layers.begin(), layers.end(), test_level ) != layers.end() ) {</div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;        }</div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;    }</div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;}</div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160; </div>
<div class="line"><a name="l08280"></a><span class="lineno"><a class="line" href="classitem.html#a7f725d9c740f860c7525706d295a7c7f"> 8280</a></span>&#160;<a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> <a class="code" href="classitem.html#a7f725d9c740f860c7525706d295a7c7f">item::get_highest_layer</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;sbp )<span class="keyword"> const</span></div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;    <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> highest_layer = <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">layer_level::PERSONAL</a>;</div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160; </div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;    <span class="comment">// find highest layer from this item</span></div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a> our_layer : <a class="code" href="classitem.html#a8d68589372751014af945302be6992ef">get_layer</a>( sbp ) ) {</div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;        <span class="keywordflow">if</span>( our_layer &gt; highest_layer ) {</div>
<div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;            highest_layer = our_layer;</div>
<div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;        }</div>
<div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;    }</div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160; </div>
<div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;    <span class="keywordflow">return</span> highest_layer;</div>
<div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;}</div>
<div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160; </div>
<div class="line"><a name="l08294"></a><span class="lineno"><a class="line" href="classitem.html#a2035d8cf9eb2af76e5402bfef0d5964c"> 8294</a></span>&#160;<a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccb">item::cover_type</a> <a class="code" href="classitem.html#a2035d8cf9eb2af76e5402bfef0d5964c">item::get_cover_type</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;type )</div>
<div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;{</div>
<div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;    <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccb">item::cover_type</a> ctype = <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba046adde220491bd0b14fa33adb2cb8e7">item::cover_type::COVER_DEFAULT</a>;</div>
<div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;physical ) {</div>
<div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;melee_only ) {</div>
<div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;            ctype = <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">item::cover_type::COVER_MELEE</a>;</div>
<div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;            ctype = <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">item::cover_type::COVER_RANGED</a>;</div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;        }</div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;    }</div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;    <span class="keywordflow">return</span> ctype;</div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;}</div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160; </div>
<div class="line"><a name="l08307"></a><span class="lineno"><a class="line" href="classitem.html#a8163090872db2e3d3baa018999bf6943"> 8307</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a8163090872db2e3d3baa018999bf6943">item::get_avg_coverage</a>( <span class="keyword">const</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccb">cover_type</a> &amp;type )<span class="keyword"> const</span></div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;    }</div>
<div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;    <span class="keywordtype">int</span> avg_coverage = 0;</div>
<div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;    <span class="keywordtype">int</span> avg_ctr = 0;</div>
<div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : t-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;        <span class="keywordflow">if</span>( entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;limb : entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;                <span class="keywordtype">int</span> coverage = <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">get_coverage</a>( limb, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;                <span class="keywordflow">if</span>( coverage ) {</div>
<div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;                    avg_coverage += coverage;</div>
<div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;                    ++avg_ctr;</div>
<div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;                }</div>
<div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;            }</div>
<div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;        }</div>
<div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;    }</div>
<div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;    <span class="keywordflow">if</span>( avg_coverage == 0 ) {</div>
<div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;        avg_coverage /= avg_ctr;</div>
<div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;        <span class="keywordflow">return</span> avg_coverage;</div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;    }</div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;}</div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160; </div>
<div class="line"><a name="l08334"></a><span class="lineno"><a class="line" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55"> 8334</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">item::get_coverage</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="classbodypart.html">bodypart</a>, <span class="keyword">const</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccb">cover_type</a> &amp;type )<span class="keyword"> const</span></div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion_data = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="classbodypart.html">bodypart</a> ) ) {</div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;        <span class="keywordflow">switch</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) {</div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba046adde220491bd0b14fa33adb2cb8e7">cover_type::COVER_DEFAULT</a>:</div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;coverage;</div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">cover_type::COVER_MELEE</a>:</div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_melee;</div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">cover_type::COVER_RANGED</a>:</div>
<div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_ranged;</div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">cover_type::COVER_VITALS</a>:</div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_vitals;</div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;        }</div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;    }</div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;}</div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160; </div>
<div class="line"><a name="l08351"></a><span class="lineno"><a class="line" href="classitem.html#ac37c9b34d8be1982e0acd3f2b94ed871"> 8351</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">item::get_coverage</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="classbodypart.html">bodypart</a>, <span class="keyword">const</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccb">cover_type</a> &amp;type )<span class="keyword"> const</span></div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion_data = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="classbodypart.html">bodypart</a> ) ) {</div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;        <span class="keywordflow">switch</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) {</div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba046adde220491bd0b14fa33adb2cb8e7">cover_type::COVER_DEFAULT</a>:</div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;coverage;</div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">cover_type::COVER_MELEE</a>:</div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_melee;</div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">cover_type::COVER_RANGED</a>:</div>
<div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_ranged;</div>
<div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">cover_type::COVER_VITALS</a>:</div>
<div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;                <span class="keywordflow">return</span> portion_data-&gt;cover_vitals;</div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;        }</div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;    }</div>
<div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;}</div>
<div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160; </div>
<div class="line"><a name="l08368"></a><span class="lineno"><a class="line" href="classitem.html#ab59128bdf7df9143a5befbeeca60d133"> 8368</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab59128bdf7df9143a5befbeeca60d133">item::has_sublocations</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;    }</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structislot__armor.html#a6a8c453a4a5e6fb69247d9d1f57c5b2a">has_sub_coverage</a>;</div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;}</div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160; </div>
<div class="line"><a name="l08377"></a><span class="lineno"><a class="line" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07"> 8377</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *<a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">item::portion_for_bodypart</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="classbodypart.html">bodypart</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;    }</div>
<div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : t-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;        <span class="keywordflow">if</span>( entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() &amp;&amp; entry.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>-&gt;test( <a class="code" href="classbodypart.html">bodypart</a>.<a class="code" href="classbodypart.html#aecf68b9dedd93cad6660a8d332033168">id</a>() ) ) {</div>
<div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;            <span class="keywordflow">return</span> &amp;entry;</div>
<div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;        }</div>
<div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;    }</div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;}</div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160; </div>
<div class="line"><a name="l08391"></a><span class="lineno"><a class="line" href="classitem.html#a41c48f3222ba00566089f9944b26729f"> 8391</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *<a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">item::portion_for_bodypart</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="classbodypart.html">bodypart</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;    <span class="keywordflow">if</span>( !t ) {</div>
<div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;    }</div>
<div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;entry : t-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;tmp : entry.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;subpart = tmp;</div>
<div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;            <span class="keywordflow">if</span>( subpart == <a class="code" href="classbodypart.html">bodypart</a> ) {</div>
<div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;                <span class="keywordflow">return</span> &amp;entry;</div>
<div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;            }</div>
<div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;        }</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;    }</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;}</div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160; </div>
<div class="line"><a name="l08408"></a><span class="lineno"><a class="line" href="classitem.html#a4798c98065209313df2c98cf49dc50f0"> 8408</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">item::get_thickness</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;    <span class="comment">// if an item isn&#39;t armor we assume it is 1mm thick</span></div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;    <span class="comment">// TODO: Estimate normal items thickness or protection based on weight and density</span></div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;thickness : 1.0f;</div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;    }</div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structislot__armor.html#a696a2447e782ced2fa80de2118742a07">avg_thickness</a>();</div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;}</div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160; </div>
<div class="line"><a name="l08419"></a><span class="lineno"><a class="line" href="classitem.html#a9d96efda69db23ec9a98e836b4541563"> 8419</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">item::get_thickness</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;    <span class="comment">// don&#39;t return a fixed value for this one since an item is never going to be covering a body part</span></div>
<div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;thickness : 0.0f;</div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;    }</div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160; </div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;data : t-&gt;<a class="code" href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">data</a> ) {</div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;        <span class="keywordflow">if</span>( !data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;        }</div>
<div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;bpid : data.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == bpid ) {</div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;                <span class="keywordflow">return</span> data.<a class="code" href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">avg_thickness</a>;</div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;            }</div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;        }</div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;    }</div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;    <span class="comment">// body part not covered by this armour</span></div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;    <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;}</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160; </div>
<div class="line"><a name="l08441"></a><span class="lineno"><a class="line" href="classitem.html#a7d7644fde97f8b8e1ef9dce9cb2ad184"> 8441</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">item::get_thickness</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">get_thickness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;parent );</div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;}</div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160; </div>
<div class="line"><a name="l08446"></a><span class="lineno"><a class="line" href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854"> 8446</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854">item::get_warmth</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *t = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;    <span class="keywordflow">if</span>( t == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;    }</div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;    <span class="keywordtype">int</span> result = t-&gt;<a class="code" href="structislot__armor.html#a2818da442fdeaf06512874cc9944a89b">warmth</a>;</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160; </div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;    result += <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ace6c010f4f6485d88e125e59519e124a">clothing_mod_type_warmth</a> );</div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160; </div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;}</div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160; </div>
<div class="line"><a name="l08459"></a><span class="lineno"><a class="line" href="classitem.html#a76b67354d7d1f9aa7ce8af588ce68e2e"> 8459</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854">item::get_warmth</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;    <span class="keywordtype">double</span> warmth_val = 0.0;</div>
<div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;    <span class="keywordtype">float</span> limb_coverage = 0.0f;</div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;    }</div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;    warmth_val = <a class="code" href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854">get_warmth</a>();</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;    <span class="comment">// calculate how much of the limb the armor ideally covers</span></div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;    <span class="comment">// idea being that an item that covers the shoulders and torso shouldn&#39;t</span></div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;    <span class="comment">// heat the whole arm like it covers it</span></div>
<div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;    <span class="comment">// TODO: fully configure this per armor entry</span></div>
<div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab59128bdf7df9143a5befbeeca60d133">has_sublocations</a>() ) {</div>
<div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;        <span class="comment">// if it doesn&#39;t have sublocations it has 100% covered</span></div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;        limb_coverage = 100;</div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;sbp : <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">sub_parts</a> ) {</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( sbp ) ) {</div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;            }</div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160; </div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;            <span class="comment">// TODO: handle non 100% sub body part coverages</span></div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;            limb_coverage += sbp-&gt;<a class="code" href="structsub__body__part__type.html#acf81c8c9ba88bcdb35daf2e525d38247">max_coverage</a>;</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;        }</div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;    }</div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( warmth_val * limb_coverage / 100.0f );</div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;}</div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160; </div>
<div class="line"><a name="l08487"></a><span class="lineno"><a class="line" href="classitem.html#a6859ce2b8c50444a4991d773b490d58f"> 8487</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a6859ce2b8c50444a4991d773b490d58f">item::get_pet_armor_max_vol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;max_vol : 0_ml;</div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;}</div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160; </div>
<div class="line"><a name="l08492"></a><span class="lineno"><a class="line" href="classitem.html#a1a62737bde2472c83494f4842f49f10c"> 8492</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a1a62737bde2472c83494f4842f49f10c">item::get_pet_armor_min_vol</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;min_vol : 0_ml;</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;}</div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160; </div>
<div class="line"><a name="l08497"></a><span class="lineno"><a class="line" href="classitem.html#ae1413304deaa3b421aa4b4f252ea93d3"> 8497</a></span>&#160;std::string <a class="code" href="classitem.html#ae1413304deaa3b421aa4b4f252ea93d3">item::get_pet_armor_bodytype</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">is_pet_armor</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">pet_armor</a>-&gt;bodytype : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;}</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160; </div>
<div class="line"><a name="l08502"></a><span class="lineno"><a class="line" href="classitem.html#a1c4782661219fccd444ab8d91ec04d58"> 8502</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">item::brewing_time</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">brewable</a>-&gt;time * <a class="code" href="namespacecalendar.html#af2fd3ce014b6191e1f1c0cba755b785a">calendar::season_from_default_ratio</a>() : 0_turns;</div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;}</div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160; </div>
<div class="line"><a name="l08507"></a><span class="lineno"><a class="line" href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb"> 8507</a></span>&#160;<span class="keyword">const</span> std::map&lt;itype_id, int&gt; &amp;<a class="code" href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb">item::brewing_results</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::map&lt;itype_id, int&gt; nulresult{};</div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">brewable</a>-&gt;results : nulresult;</div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;}</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160; </div>
<div class="line"><a name="l08513"></a><span class="lineno"><a class="line" href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8"> 8513</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8">item::composting_time</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">is_compostable</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">compostable</a>-&gt;time * <a class="code" href="namespacecalendar.html#af2fd3ce014b6191e1f1c0cba755b785a">calendar::season_from_default_ratio</a>() : 0_turns;</div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;}</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160; </div>
<div class="line"><a name="l08518"></a><span class="lineno"><a class="line" href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875"> 8518</a></span>&#160;<span class="keyword">const</span> std::map&lt;itype_id, int&gt; &amp;<a class="code" href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">item::composting_results</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::map&lt;itype_id, int&gt; nulresult{};</div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">is_compostable</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">compostable</a>-&gt;results : nulresult;</div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;}</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160; </div>
<div class="line"><a name="l08524"></a><span class="lineno"><a class="line" href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83"> 8524</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83">item::can_revive</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; ( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#a9611ac53122972087173a34c2d62e422">mon_flag_REVIVES</a> ) || <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;zombie_form&quot;</span> ) ) &amp;&amp;</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;           <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt; <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() &amp;&amp;</div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;           !( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a> ) ||</div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;              <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a> ) ||</div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;              <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9e3e9a6a06acbe427c7a6071ce59aade">flag_SKINNED</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab128f2bb0e074fd1dfe41c4abdbd1b4f">flag_PULPED</a> ) );</div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;}</div>
<div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160; </div>
<div class="line"><a name="l08533"></a><span class="lineno"><a class="line" href="classitem.html#a8b80049f3898463f6008b0840f1a8a58"> 8533</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a8b80049f3898463f6008b0840f1a8a58">item::ready_to_revive</a>( <a class="code" href="classmap.html">map</a> &amp;here, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83">can_revive</a>() ) {</div>
<div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;    }</div>
<div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;    }</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_seconds ) ) {</div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;    }</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;    <span class="keywordtype">int</span> age_in_hours = to_hours&lt;int&gt;( <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() );</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;    age_in_hours -= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> ) / ( <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / 250_ml ) );</div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() &gt; 0 ) {</div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;        age_in_hours /= ( <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() + 1 );</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;    }</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;    <span class="keywordtype">int</span> rez_factor = 48 - age_in_hours;</div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;    <span class="keywordflow">if</span>( age_in_hours &gt; 6 &amp;&amp; ( rez_factor &lt;= 0 || <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( rez_factor ) ) ) {</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;        <span class="comment">// If we&#39;re a special revival zombie, wait to get up until the player is nearby.</span></div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> isReviveSpecial = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac5b035ad53c74c5becc89b7492bd797b">flag_REVIVE_SPECIAL</a> );</div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;        <span class="keywordflow">if</span>( isReviveSpecial ) {</div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> distance = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>() );</div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;            <span class="keywordflow">if</span>( distance &gt; 3 ) {</div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;            }</div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( distance + 1 ) ) {</div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;            }</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;        }</div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160; </div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;    }</div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;}</div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160; </div>
<div class="line"><a name="l08568"></a><span class="lineno"><a class="line" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17"> 8568</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">item::is_money</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">is_money</a>( <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>() );</div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;}</div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160; </div>
<div class="line"><a name="l08573"></a><span class="lineno"><a class="line" href="classitem.html#ab79c929fafb84ae4ccf9913c709573a4"> 8573</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">item::is_money</a>( <span class="keyword">const</span> std::set&lt;ammotype&gt; &amp;ammo )<span class="keyword"> const</span></div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;    <span class="keywordflow">return</span> ammo.count( <a class="code" href="item_8cpp.html#aedcf91fddc2bef37ccd577b68c4ad604">ammo_money</a> );</div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;}</div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160; </div>
<div class="line"><a name="l08578"></a><span class="lineno"><a class="line" href="classitem.html#a9099ca6d7da8f258d6efd957ab93cd6d"> 8578</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9099ca6d7da8f258d6efd957ab93cd6d">item::is_cash_card</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>;</div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;}</div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160; </div>
<div class="line"><a name="l08583"></a><span class="lineno"><a class="line" href="classitem.html#a8ad991121ec586b5527bd9b0d79e7ef0"> 8583</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a8ad991121ec586b5527bd9b0d79e7ef0">item::is_software</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;itype_id&gt; &amp;cont = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aaf325d340c06130e2fd994e54400a012">default_container</a> ) {</div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( *cont ).is_software_storage();</div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;    }</div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;}</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160; </div>
<div class="line"><a name="l08591"></a><span class="lineno"><a class="line" href="classitem.html#ae9889725e446c9acbd5f23aa6cde35eb"> 8591</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae9889725e446c9acbd5f23aa6cde35eb">item::is_software_storage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548">pocket_type::SOFTWARE</a> );</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;}</div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160; </div>
<div class="line"><a name="l08596"></a><span class="lineno"><a class="line" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1"> 8596</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">item::is_ebook_storage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">pocket_type::EBOOK</a> );</div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;}</div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160; </div>
<div class="line"><a name="l08601"></a><span class="lineno"><a class="line" href="classitem.html#a14558695307ad3352ca95c16ee4f6ed3"> 8601</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a14558695307ad3352ca95c16ee4f6ed3">item::is_maybe_melee_weapon</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;    <a class="code" href="classstring__id.html">item_category_id</a> my_cat_id = <a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>().<a class="code" href="classitem__category.html#a5c37c8230f0eea1de063a9bf3e884dc1">id</a>;</div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;    <span class="keywordflow">return</span> my_cat_id == <a class="code" href="item_8cpp.html#a66f8cc86597ffd0b135246de0ff57d40">item_category_weapons</a> || my_cat_id == <a class="code" href="item_8cpp.html#a0d04d7dcbc96ca001764ebf419003a8b">item_category_spare_parts</a> ||</div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;           my_cat_id == <a class="code" href="item_8cpp.html#ae7965d5383e2733895a2d2c28ddd85c3">item_category_tools</a>;</div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;}</div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160; </div>
<div class="line"><a name="l08608"></a><span class="lineno"><a class="line" href="classitem.html#a4c20a84da478c9270bbd9e60b5ec8774"> 8608</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a4c20a84da478c9270bbd9e60b5ec8774">item::has_edged_damage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__type.html">damage_type</a> &amp;dt : <a class="code" href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a>() ) {</div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;        <span class="keywordflow">if</span>( dt.edged &amp;&amp; <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>( dt.id ) ) {</div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;        }</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;    }</div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;}</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160; </div>
<div class="line"><a name="l08618"></a><span class="lineno"><a class="line" href="classitem.html#a40963a016376016eb408bdb9dbb94388"> 8618</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>();</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;}</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160; </div>
<div class="line"><a name="l08623"></a><span class="lineno"><a class="line" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b"> 8623</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ? <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : 1;</div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;}</div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160; </div>
<div class="line"><a name="l08628"></a><span class="lineno"><a class="line" href="classitem.html#a8e66b783b8111c0aefb616cb620623c8"> 8628</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a8e66b783b8111c0aefb616cb620623c8">item::craft_has_charges</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() || <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().empty();</div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;}</div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160; </div>
<div class="line"><a name="l08633"></a><span class="lineno"><a class="line" href="classitem.html#a3b56cbc3c21e9bf5c1c180390d2146d2"> 8633</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a3b56cbc3c21e9bf5c1c180390d2146d2">item::get_clothing_mod_val_for_damage_type</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;    <span class="comment">// FIXME: Hardcoded damage types</span></div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;    <span class="keywordflow">if</span>( dmg_type == <a class="code" href="item_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a> ) {</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ad2d4fd94e8035feea26ff5be258bf414">clothing_mod_type_bash</a> );</div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dmg_type == <a class="code" href="item_8cpp.html#aecd517a9e74b5a5a21f0c75f88f50090">damage_cut</a> ) {</div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a342ae4773f302c28b2d13ff8438f7725">clothing_mod_type_cut</a> );</div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dmg_type == <a class="code" href="item_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a> ) {</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a048d839f9586dc3494cec345d96cf53e">clothing_mod_type_bullet</a> );</div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dmg_type == <a class="code" href="item_8cpp.html#ae01ac1ba15b1a58809aef8bc1f735b5b">damage_heat</a> ) {</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ad90ebbf164202c0c673c68e74286a9f2">clothing_mod_type_fire</a> );</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dmg_type == <a class="code" href="item_8cpp.html#acc343fa0f8e04fd5007e8abc6105f8a8">damage_acid</a> ) {</div>
<div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a609bb7188e9c7d465c38a945ec9ff794">clothing_mod_type_acid</a> );</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;    }</div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;    <span class="keywordflow">return</span> 0.0f; <span class="comment">// No mods for other damage types</span></div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;}</div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160; </div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;<span class="comment">// Deal with MSVC compiler bug (#17791, #17958)</span></div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;<span class="preprocessor">#pragma optimize( &quot;&quot;</span>, off )</div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160; </div>
<div class="line"><a name="l08655"></a><span class="lineno"><a class="line" href="classitem.html#aa712e8965a989b46eecab8ab19cd6e62"> 8655</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa712e8965a989b46eecab8ab19cd6e62">item::damage_type_can_damage_items</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;    <span class="keywordflow">return</span> dmg_type-&gt;<a class="code" href="structdamage__type.html#abc55cc8ae4147da338c62941a2646728">physical</a>;</div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;}</div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160; </div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> bodypart_target&gt;</div>
<div class="line"><a name="l08661"></a><span class="lineno"><a class="line" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1"> 8661</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">item::resist</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type, <span class="keyword">const</span> <span class="keywordtype">bool</span> to_self,</div>
<div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;                    <span class="keyword">const</span> bodypart_target &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>,</div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> resist_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;    }</div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160; </div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;    <span class="keywordflow">if</span>( dmg_type.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;    }</div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160; </div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;    <span class="keywordflow">if</span>( !dmg_type.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid damage type: %d&quot;</span>, dmg_type.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;    }</div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160; </div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;    <span class="comment">// Implicit item damage immunity for damage types listed prior to bash</span></div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;    <span class="comment">// Acid/fire immunity would be handled in _environmental_resist, but there are more</span></div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;    <span class="comment">// dmg types that do not affect items such as PURE/COLD etc..</span></div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;    <span class="keywordflow">if</span>( to_self &amp;&amp; !<a class="code" href="classitem.html#aa712e8965a989b46eecab8ab19cd6e62">damage_type_can_damage_items</a>( dmg_type ) ) {</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::numeric_limits&lt;float&gt;::max</a>();</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;    }</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160; </div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> bp_null = <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == bodypart_target();</div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;    <span class="keyword">const</span> std::vector&lt;const part_material *&gt; &amp;armor_mats = <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">armor_made_of</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> avg_thickness = bp_null ? <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">get_thickness</a>() : <a class="code" href="classitem.html#a4798c98065209313df2c98cf49dc50f0">get_thickness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2eaae84e4c8328ecc31325deeb36e6e2">_resist</a>( dmg_type, to_self, resist_value, bp_null, armor_mats, avg_thickness );</div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;}</div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;<span class="keyword">template</span> <span class="keywordtype">float</span> item::resist&lt;bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type,</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> to_self, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> resist_value ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;<span class="keyword">template</span> <span class="keywordtype">float</span> item::resist&lt;sub_bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type,</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> to_self, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> resist_value ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160; </div>
<div class="line"><a name="l08695"></a><span class="lineno"><a class="line" href="classitem.html#a2eaae84e4c8328ecc31325deeb36e6e2"> 8695</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a2eaae84e4c8328ecc31325deeb36e6e2">item::_resist</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type, <span class="keywordtype">bool</span> to_self, <span class="keywordtype">int</span> resist_value,</div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">bool</span> bp_null,</div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;                     <span class="keyword">const</span> std::vector&lt;const part_material *&gt; &amp;armor_mats,</div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">float</span> avg_thickness )<span class="keyword"> const</span></div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;    <span class="keywordflow">if</span>( dmg_type-&gt;<a class="code" href="structdamage__type.html#abc87b4e9d9653f78c489b284bf647f33">env</a> ) {</div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a16892195f36fda81d73ebc746c7e98f0">_environmental_resist</a>( dmg_type, to_self, resist_value, bp_null, armor_mats );</div>
<div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;    }</div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160; </div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;    std::optional&lt;std::pair&lt;damage_type_id, float&gt;&gt; derived;</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;    <span class="keywordflow">if</span>( !dmg_type-&gt;<a class="code" href="structdamage__type.html#aa196496b625df19dc34a17a674b33d02">derived_from</a>.first.is_null() ) {</div>
<div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;        derived = dmg_type-&gt;<a class="code" href="structdamage__type.html#aa196496b625df19dc34a17a674b33d02">derived_from</a>;</div>
<div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;    }</div>
<div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160; </div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> = 0.0f;</div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = <a class="code" href="classitem.html#a3b56cbc3c21e9bf5c1c180390d2146d2">get_clothing_mod_val_for_damage_type</a>( dmg_type );</div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160; </div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> damage_scale = <a class="code" href="classitem.html#adcc19485b2436da770a7b1dc46cb756a">damage_adjusted_armor_resist</a>( 1.0f );</div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160; </div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;    <span class="keywordflow">if</span>( !bp_null ) {</div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;        <span class="comment">// If we have armour portion materials for this body part, use that instead</span></div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;        <span class="keywordflow">if</span>( !armor_mats.empty() ) {</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> *m : armor_mats ) {</div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;                <span class="comment">// only count the material if it&#39;s hit</span></div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160; </div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;                <span class="comment">// if roll is -1 each material is rolled at this point individually</span></div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;                <span class="keywordtype">int</span> internal_roll;</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;                resist_value &lt; 0 ? internal_roll = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 99 ) : internal_roll = resist_value;</div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;                <span class="keywordflow">if</span>( internal_roll &lt; m-&gt;cover ) {</div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;                    <span class="keywordtype">float</span> tmp_add = 0.f;</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;                    <span class="keywordflow">if</span>( derived.has_value() &amp;&amp; !m-&gt;id-&gt;has_dedicated_resist( dmg_type ) ) {</div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;                        tmp_add = m-&gt;id-&gt;resist( derived-&gt;first ) * m-&gt;thickness * derived-&gt;second;</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;                        tmp_add = m-&gt;id-&gt;resist( dmg_type ) * m-&gt;thickness;</div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;                    }</div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;                    <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> += tmp_add;</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;                }</div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;            }</div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;            <span class="keywordflow">return</span> ( <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) * damage_scale;</div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;        }</div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;    }</div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160; </div>
<div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;    <span class="comment">// base resistance</span></div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;    <span class="keywordflow">if</span>( !mats.empty() ) {</div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : mats ) {</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;            <span class="keywordtype">float</span> tmp_add = 0.f;</div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;            <span class="keywordflow">if</span>( derived.has_value() &amp;&amp; !m.first-&gt;has_dedicated_resist( dmg_type ) ) {</div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;                tmp_add = m.first-&gt;resist( derived-&gt;first ) * m.second * derived-&gt;second;</div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;                tmp_add = m.first-&gt;resist( dmg_type ) * m.second;</div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;            }</div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;            <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> += tmp_add;</div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;        }</div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;        <span class="comment">// Average based portion of materials</span></div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;        <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> /= total;</div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;    }</div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160; </div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> * avg_thickness + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) * damage_scale;</div>
<div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;}</div>
<div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160; </div>
<div class="line"><a name="l08757"></a><span class="lineno"><a class="line" href="classitem.html#a16892195f36fda81d73ebc746c7e98f0"> 8757</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a16892195f36fda81d73ebc746c7e98f0">item::_environmental_resist</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dmg_type, <span class="keyword">const</span> <span class="keywordtype">bool</span> to_self,</div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;                                   <span class="keywordtype">int</span> base_env_resist,</div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">bool</span> bp_null,</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;                                   <span class="keyword">const</span> std::vector&lt;const part_material *&gt; &amp;armor_mats )<span class="keyword"> const</span></div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;    <span class="keywordflow">if</span>( to_self ) {</div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;        <span class="comment">// Currently no items are damaged by acid, and fire is handled elsewhere</span></div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::numeric_limits&lt;float&gt;::max</a>();</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;    }</div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160; </div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;    std::optional&lt;std::pair&lt;damage_type_id, float&gt;&gt; derived;</div>
<div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;    <span class="keywordflow">if</span>( !dmg_type-&gt;<a class="code" href="structdamage__type.html#aa196496b625df19dc34a17a674b33d02">derived_from</a>.first.is_null() ) {</div>
<div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;        derived = dmg_type-&gt;<a class="code" href="structdamage__type.html#aa196496b625df19dc34a17a674b33d02">derived_from</a>;</div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;    }</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160; </div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> = 0.0f;</div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = <a class="code" href="classitem.html#a3b56cbc3c21e9bf5c1c180390d2146d2">get_clothing_mod_val_for_damage_type</a>( dmg_type );</div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160; </div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;    <span class="keywordflow">if</span>( !bp_null ) {</div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;        <span class="comment">// If we have armour portion materials for this body part, use that instead</span></div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;        <span class="keywordflow">if</span>( !armor_mats.empty() ) {</div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> *m : armor_mats ) {</div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;                <span class="keywordtype">float</span> tmp_add = 0.f;</div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;                <span class="keywordflow">if</span>( derived.has_value() &amp;&amp; !m-&gt;id-&gt;has_dedicated_resist( dmg_type ) ) {</div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;                    tmp_add = m-&gt;id-&gt;resist( derived-&gt;first ) * m-&gt;cover * 0.01f * derived-&gt;second;</div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;                    tmp_add = m-&gt;id-&gt;resist( dmg_type ) * m-&gt;cover * 0.01f;</div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;                }</div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;                <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> += tmp_add;</div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;            }</div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> env = <a class="code" href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95">get_env_resist</a>( base_env_resist );</div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;            <span class="keywordflow">if</span>( env &lt; 10 ) {</div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;                <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> *= env / 10.0f;</div>
<div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;            }</div>
<div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;        }</div>
<div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;    }</div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160; </div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;    <span class="keywordflow">if</span>( !mats.empty() ) {</div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;        <span class="comment">// Not sure why cut and bash get an armor thickness bonus but acid/fire doesn&#39;t,</span></div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;        <span class="comment">// but such is the way of the code.</span></div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : mats ) {</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;            <span class="keywordtype">float</span> tmp_add = 0.f;</div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;            <span class="keywordflow">if</span>( derived.has_value() &amp;&amp; !m.first-&gt;has_dedicated_resist( dmg_type ) ) {</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;                tmp_add = m.first-&gt;resist( derived-&gt;first ) * m.second * derived-&gt;second;</div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;                tmp_add = m.first-&gt;resist( dmg_type ) * m.second;</div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;            }</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;            <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> += tmp_add;</div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;        }</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;        <span class="comment">// Average based portion of materials</span></div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;        <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> /= total;</div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;    }</div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160; </div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> env = <a class="code" href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95">get_env_resist</a>( base_env_resist );</div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;    <span class="keywordflow">if</span>( env &lt; 10 ) {</div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;        <span class="comment">// Low env protection means it doesn&#39;t prevent acid seeping in.</span></div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;        <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> *= env / 10.0f;</div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;    }</div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160; </div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a> + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;}</div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160; </div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;<span class="preprocessor">#pragma optimize( &quot;&quot;</span>, on )</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160; </div>
<div class="line"><a name="l08826"></a><span class="lineno"><a class="line" href="classitem.html#a9e9650b54f2f46212d765f75b25e8bf0"> 8826</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">item::breathability</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> bp_null = <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>();</div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;    <span class="comment">// if the armor doesn&#39;t have armor data</span></div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;    <span class="comment">// or its not on a specific limb</span></div>
<div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;    <span class="keywordflow">if</span>( bp_null || <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">armor_made_of</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">breathability</a>();</div>
<div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;    }</div>
<div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;    <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *<a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;        <span class="comment">// if it doesn&#39;t cover it breathes great</span></div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;        <span class="keywordflow">return</span> 100;</div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;    }</div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160; </div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;breathability;</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;}</div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160; </div>
<div class="line"><a name="l08843"></a><span class="lineno"><a class="line" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020"> 8843</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">item::breathability</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;    <span class="comment">// very rudimentary average for simple armor and non limb based situations</span></div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">breathability</a> = 0;</div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160; </div>
<div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;    <span class="keywordflow">if</span>( !mats.empty() ) {</div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : mats ) {</div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;            <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">breathability</a> += m.first-&gt;breathability() * m.second;</div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;        }</div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;        <span class="comment">// Average based portion of materials</span></div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;        <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">breathability</a> /= total;</div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;    }</div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160; </div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">breathability</a>;</div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;}</div>
<div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160; </div>
<div class="line"><a name="l08861"></a><span class="lineno"><a class="line" href="classitem.html#aa0acf524e808577447803cd549727617"> 8861</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aa0acf524e808577447803cd549727617">item::chip_resistance</a>( <span class="keywordtype">bool</span> worst, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;    <span class="keywordtype">int</span> res = worst ? INT_MAX : INT_MIN;</div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> != <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>() ) {</div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;        <span class="keyword">const</span> std::vector&lt;const part_material *&gt; &amp;armor_mats = <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">armor_made_of</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;        <span class="comment">// If we have armour portion materials for this body part, use that instead</span></div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;        <span class="keywordflow">if</span>( !armor_mats.empty() ) {</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> *m : armor_mats ) {</div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> val = m-&gt;id-&gt;chip_resist() * m-&gt;cover;</div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;                res = worst ? <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( res, val ) : <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( res, val );</div>
<div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;            }</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;            <span class="keywordflow">if</span>( res == INT_MAX || res == INT_MIN ) {</div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;                <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;            }</div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;            res /= 100;</div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;            <span class="keywordflow">if</span>( res &lt;= 0 ) {</div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;            }</div>
<div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;        }</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;    }</div>
<div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160; </div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; mat : <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>() ) {</div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> val = ( mat.first-&gt;chip_resist() * mat.second ) / total;</div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;        res = worst ? <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( res, val ) : <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( res, val );</div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;    }</div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160; </div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;    <span class="keywordflow">if</span>( res == INT_MAX || res == INT_MIN ) {</div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;        <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;    }</div>
<div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160; </div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;    <span class="keywordflow">if</span>( res &lt;= 0 ) {</div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;    }</div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160; </div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;}</div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160; </div>
<div class="line"><a name="l08900"></a><span class="lineno"><a class="line" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9"> 8900</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">item::max_damage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa0615d0fb9ee03b0b7350fe1f334d77b">damage_max</a>();</div>
<div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;}</div>
<div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160; </div>
<div class="line"><a name="l08905"></a><span class="lineno"><a class="line" href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39"> 8905</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39">item::get_relative_health</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> max_dmg = <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>();</div>
<div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;    <span class="keywordflow">if</span>( max_dmg == 0 ) { <span class="comment">// count_by_charges items</span></div>
<div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;        <span class="keywordflow">return</span> 1.0f;</div>
<div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;    }</div>
<div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;    <span class="keywordflow">return</span> 1.0f - <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() ) / max_dmg;</div>
<div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;}</div>
<div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160; </div>
<div class="line"><a name="l08914"></a><span class="lineno"><a class="line" href="item_8cpp.html#af731207dc00e5afe7ac5c5f4e22ed652"> 8914</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="item_8cpp.html#af731207dc00e5afe7ac5c5f4e22ed652">get_degrade_amount</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <span class="keywordtype">int</span> dmgNow_, <span class="keywordtype">int</span> dmgPrev )</div>
<div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;{</div>
<div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> max_dmg = it.<a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>();</div>
<div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> degrade_increments = it.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">degrade_increments</a>();</div>
<div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;    <span class="keywordflow">if</span>( max_dmg == 0 || degrade_increments == 0 ) {</div>
<div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;        <span class="keywordflow">return</span> 0; <span class="comment">// count by charges</span></div>
<div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;    }</div>
<div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> facNow_ = dmgNow_ == 0 ? -1 : ( dmgNow_ - 1 ) * 5 / max_dmg;</div>
<div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> facPrev = dmgPrev == 0 ? -1 : ( dmgPrev - 1 ) * 5 / max_dmg;</div>
<div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160; </div>
<div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( facNow_ - facPrev, 0 ) * max_dmg / degrade_increments;</div>
<div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;}</div>
<div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160; </div>
<div class="line"><a name="l08927"></a><span class="lineno"><a class="line" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483"> 8927</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">item::mod_damage</a>( <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;{</div>
<div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1340a78c6350ff7b28b820d57af5c35d">flag_UNBREAKABLE</a> ) ) {</div>
<div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;    }</div>
<div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> * qty / <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a>, <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0; <span class="comment">// return destroy = true if no charges</span></div>
<div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dmg_before = <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a>;</div>
<div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> destroy = ( <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> + qty ) &gt; <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>();</div>
<div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;        <a class="code" href="classitem.html#afebc00bf525bada288b71deebbc84d84">set_damage</a>( <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> + qty );</div>
<div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160; </div>
<div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;        <span class="keywordflow">if</span>( qty &gt; 0 &amp;&amp; !destroy ) { <span class="comment">// apply automatic degradation</span></div>
<div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;            <a class="code" href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">set_degradation</a>( <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> + <a class="code" href="item_8cpp.html#af731207dc00e5afe7ac5c5f4e22ed652">get_degrade_amount</a>( *<span class="keyword">this</span>, <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a>, dmg_before ) );</div>
<div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;        }</div>
<div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;        <span class="keywordflow">return</span> destroy;</div>
<div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;    }</div>
<div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;}</div>
<div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160; </div>
<div class="line"><a name="l08947"></a><span class="lineno"><a class="line" href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7"> 8947</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">item::inc_damage</a>()</div>
<div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;{</div>
<div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">mod_damage</a>( <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a> );</div>
<div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;}</div>
<div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160; </div>
<div class="line"><a name="l08952"></a><span class="lineno"><a class="line" href="classitem.html#a50c31a32b49c4418a24ff4b14552a7ff"> 8952</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a50c31a32b49c4418a24ff4b14552a7ff">item::repairable_levels</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> levels = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5b7d715170e5bd7304bde8831dbe39bb">damage_level</a>( <a class="code" href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">damage_</a> ) - <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5b7d715170e5bd7304bde8831dbe39bb">damage_level</a>( <a class="code" href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">degradation_</a> );</div>
<div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160; </div>
<div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;    <span class="keywordflow">return</span> levels &gt; 0</div>
<div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;           ? levels                    <span class="comment">// full integer levels of damage</span></div>
<div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;           : <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; <a class="code" href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">degradation</a>(); <span class="comment">// partial level of damage can still be repaired</span></div>
<div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;}</div>
<div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160; </div>
<div class="line"><a name="l08961"></a><span class="lineno"><a class="line" href="classitem.html#acfa81800391a5263b5d258cc5be1f346"> 8961</a></span>&#160;<a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506">item::armor_status</a> <a class="code" href="classitem.html#acfa81800391a5263b5d258cc5be1f346">item::damage_armor_durability</a>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )</div>
<div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;{</div>
<div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1340a78c6350ff7b28b820d57af5c35d">flag_UNBREAKABLE</a> ) ) {</div>
<div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;    }</div>
<div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160; </div>
<div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;    <span class="comment">// We want armor&#39;s own resistance to this type, not the resistance it grants</span></div>
<div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> armors_own_resist = <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a>( du.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a>, <span class="keyword">true</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;    <span class="keywordflow">if</span>( armors_own_resist &gt; 1000.0f ) {</div>
<div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;        <span class="comment">// This is some weird type that doesn&#39;t damage armors</span></div>
<div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;    }</div>
<div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;    <span class="comment">// Fragile items take damage if the block more than 15% of their armor value</span></div>
<div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac24eb8217d45a36465714b8ce88f8172">flag_FRAGILE</a> ) &amp;&amp; du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> / armors_own_resist &gt; 0.15f ) {</div>
<div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">mod_damage</a>( <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a> ) ? <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a5d7e41d3ac0abca5974598807df874ea">armor_status::DESTROYED</a> : <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a3cf53b7601ee463412beea23294bd347">armor_status::DAMAGED</a>;</div>
<div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;    }</div>
<div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160; </div>
<div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;    <span class="comment">// Scale chance of article taking damage based on the number of parts it covers.</span></div>
<div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;    <span class="comment">// This represents large articles being able to take more punishment</span></div>
<div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;    <span class="comment">// before becoming ineffective or being destroyed.</span></div>
<div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_parts_covered = <a class="code" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>().<a class="code" href="classbody__part__set.html#ae9e500f0dabe12b2d32ebfc6ba804f81">count</a>();</div>
<div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( num_parts_covered ) ) {</div>
<div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;    }</div>
<div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160; </div>
<div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;    <span class="comment">// Don&#39;t damage armor as much when bypassed by armor piercing</span></div>
<div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;    <span class="comment">// Most armor piercing damage comes from bypassing armor, not forcing through</span></div>
<div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> post_mitigated_dmg = du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a>;</div>
<div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;    <span class="comment">// more gradual damage chance calc</span></div>
<div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> damaged_chance = 0.11 * ( post_mitigated_dmg / ( armors_own_resist + 2 ) ) + 0.1;</div>
<div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;    <span class="keywordflow">if</span>( post_mitigated_dmg &gt; armors_own_resist ) {</div>
<div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;        <span class="comment">// handle overflow, if you take a lot of damage your armor should be damaged</span></div>
<div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;        <span class="keywordflow">if</span>( damaged_chance &gt;= 1 ) {</div>
<div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a3cf53b7601ee463412beea23294bd347">armor_status::DAMAGED</a>;</div>
<div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;        }</div>
<div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1 / ( 1 - damaged_chance ) ) ) {</div>
<div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;        }</div>
<div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;        <span class="comment">// Sturdy items and power armors never take chip damage.</span></div>
<div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;        <span class="comment">// Other armors have 0.5% of getting damaged from hits below their armor value.</span></div>
<div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac0e939866663d087e37274163b7536b3">flag_STURDY</a> ) || <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() || !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 ) ) {</div>
<div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;        }</div>
<div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;    }</div>
<div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160; </div>
<div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">mod_damage</a>( <a class="code" href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a> ) ? <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a5d7e41d3ac0abca5974598807df874ea">armor_status::DESTROYED</a> : <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a3cf53b7601ee463412beea23294bd347">armor_status::DAMAGED</a>;</div>
<div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;}</div>
<div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160; </div>
<div class="line"><a name="l09010"></a><span class="lineno"><a class="line" href="classitem.html#a566bdeada4c0f59174879f1ffaaa4d22"> 9010</a></span>&#160;<a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506">item::armor_status</a> <a class="code" href="classitem.html#a566bdeada4c0f59174879f1ffaaa4d22">item::damage_armor_transforms</a>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du )<span class="keyword"> const</span></div>
<div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;    <span class="comment">// We want armor&#39;s own resistance to this type, not the resistance it grants</span></div>
<div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> armors_own_resist = <a class="code" href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">resist</a>( du.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160; </div>
<div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;    <span class="comment">// to avoid dumb chip damage plates shouldn&#39;t ever transform if they take less than</span></div>
<div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;    <span class="comment">// 20% of their protection in damage</span></div>
<div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;    <span class="keywordflow">if</span>( du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> / armors_own_resist &lt; 0.2f ) {</div>
<div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;    }</div>
<div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160; </div>
<div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;    <span class="comment">// plates are rated to survive 3 shots at the caliber they protect</span></div>
<div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;    <span class="comment">// linearly scale off the scale value to find the chance it breaks</span></div>
<div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;    <span class="keywordtype">float</span> break_chance = 33.3f * ( du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> / armors_own_resist );</div>
<div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160; </div>
<div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;    <span class="keywordtype">float</span> roll_to_break = <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0, 100.0 );</div>
<div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160; </div>
<div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;    <span class="keywordflow">if</span>( roll_to_break &lt; break_chance ) {</div>
<div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;        <span class="comment">//the plate is broken</span></div>
<div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a0fdd493bed5a4a53ad5ccaa889f4e19a">armor_status::TRANSFORMED</a>;</div>
<div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;    }</div>
<div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">armor_status::UNDAMAGED</a>;</div>
<div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;}</div>
<div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160; </div>
<div class="line"><a name="l09034"></a><span class="lineno"><a class="line" href="classitem.html#aefa6100c19c67ff6a2d54698a47796ba"> 9034</a></span>&#160;std::string <a class="code" href="classitem.html#aefa6100c19c67ff6a2d54698a47796ba">item::damage_indicator</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1options.html#a0e8da257866d83c9fc4b15612f69a8eb">cata::options::damage_indicators</a>[<a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>()];</div>
<div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;}</div>
<div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160; </div>
<div class="line"><a name="l09039"></a><span class="lineno"><a class="line" href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb"> 9039</a></span>&#160;std::string <a class="code" href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb">item::durability_indicator</a>( <span class="keywordtype">bool</span> include_intact )<span class="keyword"> const</span></div>
<div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;    <span class="keyword">const</span> std::string item_health_option = get_option&lt;std::string&gt;( <span class="stringliteral">&quot;ITEM_HEALTH&quot;</span> );</div>
<div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_bars_only = item_health_option == <span class="stringliteral">&quot;bars&quot;</span>;</div>
<div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_description_only = item_health_option == <span class="stringliteral">&quot;descriptions&quot;</span>;</div>
<div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_both = item_health_option == <span class="stringliteral">&quot;both&quot;</span>;</div>
<div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_bars = show_both || show_bars_only;</div>
<div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> show_description = show_both || show_description_only;</div>
<div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;    std::string <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a>;</div>
<div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;    std::string description;</div>
<div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;    <span class="keywordflow">if</span>( show_bars ) {</div>
<div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;        <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a> = <a class="code" href="classitem.html#aefa6100c19c67ff6a2d54698a47796ba">damage_indicator</a>() + <a class="code" href="classitem.html#ad56b5a2556cb36570017c62c30515f18">degradation_symbol</a>() + <span class="stringliteral">&quot;\u00A0&quot;</span>;</div>
<div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;    }</div>
<div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt; 0 ) {</div>
<div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;        <span class="keywordflow">if</span>( show_description ) {</div>
<div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;                description = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;accurized &quot;</span> );</div>
<div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;                description = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;reinforced &quot;</span> );</div>
<div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;            }</div>
<div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;        }</div>
<div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;        <span class="keywordflow">if</span>( show_bars_only ) {</div>
<div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a>;</div>
<div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;        }</div>
<div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;        <span class="keywordflow">if</span>( show_description_only ) {</div>
<div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;            <span class="keywordflow">return</span> description;</div>
<div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;        }</div>
<div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a> + description;</div>
<div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;    }</div>
<div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a> ) ) {</div>
<div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;            <span class="keywordflow">switch</span>( <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() ) {</div>
<div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;bruised &quot;</span> );</div>
<div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;damaged &quot;</span> );</div>
<div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;mangled &quot;</span> );</div>
<div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;damage adjective&quot;</span>, <span class="stringliteral">&quot;pulped &quot;</span> );</div>
<div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;            }</div>
<div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;        }</div>
<div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;    }</div>
<div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;    <span class="keywordflow">if</span>( show_bars_only ) {</div>
<div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a>;</div>
<div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;    }</div>
<div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;    description = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s &quot;</span>, <a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">get_base_material</a>().dmg_adj( <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() ) );</div>
<div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;    <span class="keywordflow">if</span>( description == <span class="stringliteral">&quot; &quot;</span> ) {</div>
<div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;        <span class="keywordflow">if</span>( include_intact ) {</div>
<div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;            description = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;fully intact &quot;</span> );</div>
<div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;            description = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;        }</div>
<div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;    }</div>
<div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;    <span class="keywordflow">if</span>( show_description_only ) {</div>
<div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;        <span class="keywordflow">return</span> description;</div>
<div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;    }</div>
<div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a> + description;</div>
<div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;}</div>
<div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160; </div>
<div class="line"><a name="l09099"></a><span class="lineno"><a class="line" href="classitem.html#afd036343012f6275683b8168d84c1be3"> 9099</a></span>&#160;<span class="keyword">const</span> std::set&lt;itype_id&gt; &amp;<a class="code" href="classitem.html#afd036343012f6275683b8168d84c1be3">item::repaired_with</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;    <span class="keyword">static</span> std::set&lt;itype_id&gt; no_repair;</div>
<div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;    <span class="keyword">static</span> std::set&lt;itype_id&gt; tools;</div>
<div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;    tools.clear();</div>
<div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160; </div>
<div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;    std::copy_if( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">repair</a>.begin(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">repair</a>.end(), std::inserter( tools, tools.begin() ),</div>
<div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; i ) {</div>
<div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;        return !item_is_blacklisted( i );</div>
<div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;    } );</div>
<div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160; </div>
<div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a> ) ? no_repair : tools;</div>
<div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;}</div>
<div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160; </div>
<div class="line"><a name="l09113"></a><span class="lineno"><a class="line" href="classitem.html#a03b6819525a3cc66828b7db4c60f9cf6"> 9113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a03b6819525a3cc66828b7db4c60f9cf6">item::mitigate_damage</a>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du, <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keywordtype">int</span> roll )<span class="keyword"> const</span></div>
<div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;    <span class="keyword">const</span> <a class="code" href="structresistances.html">resistances</a> res = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, roll, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> mitigation = res.<a class="code" href="structresistances.html#ab2707e673b2def1188ac7397012c1afb">get_effective_resist</a>( du );</div>
<div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;    <span class="comment">// get_effective_resist subtracts the flat penetration value before multiplying the remaining armor.</span></div>
<div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;    <span class="comment">// therefore, res_pen is reduced by the full value of the item&#39;s armor value even though mitigation might be smaller (such as an attack with a 0.5 armor multiplier)</span></div>
<div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;    du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> -= res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( du.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a> );</div>
<div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;    du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> );</div>
<div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;    du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> -= mitigation;</div>
<div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;    du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> );</div>
<div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;}</div>
<div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160; </div>
<div class="line"><a name="l09125"></a><span class="lineno"><a class="line" href="classitem.html#a1ee4ce6c15cacb6eb696e3463db07506"> 9125</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a03b6819525a3cc66828b7db4c60f9cf6">item::mitigate_damage</a>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du, <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keywordtype">int</span> roll )<span class="keyword"> const</span></div>
<div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;    <span class="keyword">const</span> <a class="code" href="structresistances.html">resistances</a> res = <a class="code" href="structresistances.html">resistances</a>( *<span class="keyword">this</span>, <span class="keyword">false</span>, roll, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> mitigation = res.<a class="code" href="structresistances.html#ab2707e673b2def1188ac7397012c1afb">get_effective_resist</a>( du );</div>
<div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;    <span class="comment">// get_effective_resist subtracts the flat penetration value before multiplying the remaining armor.</span></div>
<div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;    <span class="comment">// therefore, res_pen is reduced by the full value of the item&#39;s armor value even though mitigation might be smaller (such as an attack with a 0.5 armor multiplier)</span></div>
<div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;    du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> -= res.<a class="code" href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">type_resist</a>( du.<a class="code" href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">type</a> );</div>
<div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;    du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, du.<a class="code" href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">res_pen</a> );</div>
<div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;    du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> -= mitigation;</div>
<div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;    du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, du.<a class="code" href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">amount</a> );</div>
<div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;}</div>
<div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160; </div>
<div class="line"><a name="l09137"></a><span class="lineno"><a class="line" href="classitem.html#af373f646c1ee172941490dc7cc04bbcd"> 9137</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">item::is_two_handed</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a787101f38315d6a40498ff0e558fdcd5">flag_ALWAYS_TWOHAND</a> ) ) {</div>
<div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;<span class="comment">    ///\EFFECT_STR determines which weapons can be wielded with one hand</span></div>
<div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;<span class="comment"></span>    <span class="keywordflow">return</span> ( ( <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / 113_gram ) &gt; guy.<a class="code" href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">get_arm_str</a>() * 4 );</div>
<div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;}</div>
<div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160; </div>
<div class="line"><a name="l09146"></a><span class="lineno"><a class="line" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b"> 9146</a></span>&#160;<span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a576cee4080644fddb7db250a669b3ac1">mat</a>;</div>
<div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;    }</div>
<div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>;</div>
<div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;}</div>
<div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160; </div>
<div class="line"><a name="l09154"></a><span class="lineno"><a class="line" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf"> 9154</a></span>&#160;std::vector&lt;const part_material *&gt; <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">item::armor_made_of</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;    std::vector&lt;const part_material *&gt; matlist;</div>
<div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *<a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> == <span class="keyword">nullptr</span> || <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;data.empty() || !<a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;        <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;    }</div>
<div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;d : <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;data ) {</div>
<div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;        <span class="keywordflow">if</span>( !d.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.has_value() ) {</div>
<div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;        }</div>
<div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bodypart_str_id</a> &amp;bpid : d.<a class="code" href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">covers</a>.value() ) {</div>
<div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> != bpid ) {</div>
<div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;            }</div>
<div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;            matlist.reserve( matlist.size() + d.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a>.size() );</div>
<div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;m : d.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;                matlist.emplace_back( &amp;m );</div>
<div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;            }</div>
<div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;            <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;        }</div>
<div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;    }</div>
<div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;    <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;}</div>
<div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160; </div>
<div class="line"><a name="l09179"></a><span class="lineno"><a class="line" href="classitem.html#a19480733630bf8c59c6f19fbef009329"> 9179</a></span>&#160;std::vector&lt;const part_material *&gt; <a class="code" href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">item::armor_made_of</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;    std::vector&lt;const part_material *&gt; matlist;</div>
<div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *<a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> == <span class="keyword">nullptr</span> || <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;data.empty() || !<a class="code" href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">covers</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;        <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;    }</div>
<div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;d : <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>-&gt;sub_data ) {</div>
<div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;        <span class="keywordflow">if</span>( d.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a>.empty() ) {</div>
<div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;        }</div>
<div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">sub_bodypart_str_id</a> &amp;bpid : d.<a class="code" href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">sub_coverage</a> ) {</div>
<div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> != bpid ) {</div>
<div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;            }</div>
<div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structpart__material.html">part_material</a> &amp;m : d.<a class="code" href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">materials</a> ) {</div>
<div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;                matlist.emplace_back( &amp;m );</div>
<div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;            }</div>
<div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;            <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;        }</div>
<div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;    }</div>
<div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;    <span class="keywordflow">return</span> matlist;</div>
<div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;}</div>
<div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160; </div>
<div class="line"><a name="l09203"></a><span class="lineno"><a class="line" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4"> 9203</a></span>&#160;std::vector&lt;const material_type *&gt; <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">item::made_of_types</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;    std::vector&lt;const material_type *&gt; material_types_composed_of;</div>
<div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mat_id : <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>() ) {</div>
<div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;            material_types_composed_of.push_back( &amp;mat_id.first.obj() );</div>
<div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;        }</div>
<div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mat_id : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a> ) {</div>
<div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;            material_types_composed_of.push_back( &amp;mat_id.first.obj() );</div>
<div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;        }</div>
<div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;    }</div>
<div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;    <span class="keywordflow">return</span> material_types_composed_of;</div>
<div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;}</div>
<div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160; </div>
<div class="line"><a name="l09218"></a><span class="lineno"><a class="line" href="classitem.html#a9e2c24734b538e61e186fb6777b62c25"> 9218</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9e2c24734b538e61e186fb6777b62c25">item::made_of_any</a>( <span class="keyword">const</span> std::set&lt;material_id&gt; &amp;mat_idents )<span class="keyword"> const</span></div>
<div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;    <span class="keywordflow">if</span>( mats.empty() ) {</div>
<div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;    }</div>
<div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160; </div>
<div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;    <span class="keywordflow">return</span> std::any_of( mats.begin(),</div>
<div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;    mats.end(), [&amp;mat_idents]( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; &amp;e ) {</div>
<div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;        return mat_idents.count( e.first );</div>
<div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;    } );</div>
<div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;}</div>
<div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160; </div>
<div class="line"><a name="l09231"></a><span class="lineno"><a class="line" href="classitem.html#a663b9d5d6a66664552e5551e11812ed9"> 9231</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a663b9d5d6a66664552e5551e11812ed9">item::only_made_of</a>( <span class="keyword">const</span> std::set&lt;material_id&gt; &amp;mat_idents )<span class="keyword"> const</span></div>
<div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;    <span class="keywordflow">if</span>( mats.empty() ) {</div>
<div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;    }</div>
<div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160; </div>
<div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;    <span class="keywordflow">return</span> std::all_of( mats.begin(),</div>
<div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;    mats.end(), [&amp;mat_idents]( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; &amp;e ) {</div>
<div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;        return mat_idents.count( e.first );</div>
<div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;    } );</div>
<div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;}</div>
<div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160; </div>
<div class="line"><a name="l09244"></a><span class="lineno"><a class="line" href="classitem.html#a2cfef2c2f6a0171dc779beb787c98a83"> 9244</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp;mat_ident )<span class="keyword"> const</span></div>
<div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;<a class="code" href="namespacematerials.html">materials</a> = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;    <span class="keyword">auto</span> mat = <a class="code" href="namespacematerials.html">materials</a>.find( mat_ident );</div>
<div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;    <span class="keywordflow">if</span>( mat == <a class="code" href="namespacematerials.html">materials</a>.end() ) {</div>
<div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;    }</div>
<div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;    <span class="keywordflow">return</span> mat-&gt;second;</div>
<div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;}</div>
<div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160; </div>
<div class="line"><a name="l09254"></a><span class="lineno"><a class="line" href="classitem.html#ae34a4e6720079fcb1ec1814f046422e8"> 9254</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae34a4e6720079fcb1ec1814f046422e8">item::can_repair_with</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">material_id</a> &amp;mat_ident )<span class="keyword"> const</span></div>
<div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;    <span class="keyword">auto</span> mat = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.find( mat_ident );</div>
<div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;    <span class="keywordflow">return</span> mat != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">repairs_with</a>.end();</div>
<div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;}</div>
<div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160; </div>
<div class="line"><a name="l09260"></a><span class="lineno"><a class="line" href="classitem.html#a62f0e67b3a5404dccf78da0f15fb18f9"> 9260</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5">phase_id</a> phase )<span class="keyword"> const</span></div>
<div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;    }</div>
<div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> == phase;</div>
<div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;}</div>
<div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160; </div>
<div class="line"><a name="l09268"></a><span class="lineno"><a class="line" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d"> 9268</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5">phase_id</a> phase )<span class="keyword"> const</span></div>
<div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;    }</div>
<div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a> == phase;</div>
<div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;}</div>
<div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160; </div>
<div class="line"><a name="l09276"></a><span class="lineno"><a class="line" href="classitem.html#a2cce9a58e90e7bcc596240004ac54288"> 9276</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2cce9a58e90e7bcc596240004ac54288">item::conductive</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;    }</div>
<div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160; </div>
<div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae4e605cf7ef27103856049f726bcfdc8">flag_CONDUCTIVE</a> ) ) {</div>
<div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;    }</div>
<div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160; </div>
<div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5baa40ca4d295b45511b5b6775bed635">flag_NONCONDUCTIVE</a> ) ) {</div>
<div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;    }</div>
<div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160; </div>
<div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;    <span class="comment">// If any material has electricity resistance equal to or lower than flesh (1) we are conductive.</span></div>
<div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;    <span class="keyword">const</span> std::vector&lt;const material_type *&gt; &amp;mats = <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>();</div>
<div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;    <span class="keywordflow">return</span> std::any_of( mats.begin(), mats.end(), []( <span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> * mt ) {</div>
<div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;        return mt-&gt;is_conductive();</div>
<div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;    } );</div>
<div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;}</div>
<div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160; </div>
<div class="line"><a name="l09297"></a><span class="lineno"><a class="line" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8"> 9297</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>;</div>
<div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;}</div>
<div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160; </div>
<div class="line"><a name="l09302"></a><span class="lineno"><a class="line" href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1"> 9302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1">item::select_itype_variant</a>()</div>
<div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;{</div>
<div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;    <a class="code" href="structweighted__int__list.html">weighted_int_list&lt;std::string&gt;</a> variants;</div>
<div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype__variant__data.html">itype_variant_data</a> &amp;iv : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a> ) {</div>
<div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;        variants.<a class="code" href="structweighted__list.html#ad960be5e22f6aaa4eb01af592a9476f5">add</a>( iv.<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a>, iv.<a class="code" href="structitype__variant__data.html#a0adec56c131c1703dd92c99b2160e937">weight</a> );</div>
<div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;    }</div>
<div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160; </div>
<div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;    <span class="keyword">const</span> std::string *selected = variants.<a class="code" href="structweighted__list.html#aa2eb002d2ec795a0aab91178a93d05ba">pick</a>();</div>
<div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;    <span class="keywordflow">if</span>( !selected ) {</div>
<div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;        <span class="comment">// No variants exist</span></div>
<div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;    }</div>
<div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160; </div>
<div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;    <a class="code" href="classitem.html#a2307462a36b9809493966946645c2bc4">set_itype_variant</a>( *selected );</div>
<div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;}</div>
<div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160; </div>
<div class="line"><a name="l09318"></a><span class="lineno"><a class="line" href="classitem.html#a666dbdd93db53d49e8cd9d5b7503df79"> 9318</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a666dbdd93db53d49e8cd9d5b7503df79">item::can_have_itype_variant</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a>.empty();</div>
<div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;}</div>
<div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160; </div>
<div class="line"><a name="l09323"></a><span class="lineno"><a class="line" href="classitem.html#af914ae79aeca6aaa3ac77e3f6adf18cd"> 9323</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af914ae79aeca6aaa3ac77e3f6adf18cd">item::possible_itype_variant</a>( <span class="keyword">const</span> std::string &amp;test )<span class="keyword"> const</span></div>
<div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a666dbdd93db53d49e8cd9d5b7503df79">can_have_itype_variant</a>() ) {</div>
<div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;    }</div>
<div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160; </div>
<div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> variant_looking_for = [&amp;test]( <span class="keyword">const</span> <a class="code" href="structitype__variant__data.html">itype_variant_data</a> &amp; variant ) {</div>
<div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;        <span class="keywordflow">return</span> variant.id == test;</div>
<div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;    };</div>
<div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160; </div>
<div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;    <span class="keywordflow">return</span> std::find_if( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a>.begin(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a>.end(),</div>
<div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;                         variant_looking_for ) != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a>.end();</div>
<div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;}</div>
<div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160; </div>
<div class="line"><a name="l09337"></a><span class="lineno"><a class="line" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29"> 9337</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">item::has_itype_variant</a>( <span class="keywordtype">bool</span> check_option )<span class="keyword"> const</span></div>
<div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !check_option ) {</div>
<div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;    }</div>
<div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160; </div>
<div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a18f4ca3e43dc84bc3ae9ef11127e28a3">variant_kind</a> ) {</div>
<div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">itype_variant_kind::gun</a>:</div>
<div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;            <span class="keywordflow">return</span> get_option&lt;bool&gt;( <span class="stringliteral">&quot;SHOW_GUN_VARIANTS&quot;</span> );</div>
<div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a05b2815ccf6592b0f62fe89851e114fa">itype_variant_kind::drug</a>:</div>
<div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;            <span class="keywordflow">return</span> get_option&lt;bool&gt;( <span class="stringliteral">&quot;SHOW_DRUG_VARIANTS&quot;</span> );</div>
<div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;    }</div>
<div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;}</div>
<div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160; </div>
<div class="line"><a name="l09356"></a><span class="lineno"><a class="line" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505"> 9356</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structitype__variant__data.html">itype_variant_data</a> &amp;<a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">item::itype_variant</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a>;</div>
<div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;}</div>
<div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160; </div>
<div class="line"><a name="l09361"></a><span class="lineno"><a class="line" href="classitem.html#a2307462a36b9809493966946645c2bc4"> 9361</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a2307462a36b9809493966946645c2bc4">item::set_itype_variant</a>( <span class="keyword">const</span> std::string &amp;variant )</div>
<div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;{</div>
<div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;    <span class="keywordflow">if</span>( variant.empty() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a>.empty() ) {</div>
<div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;    }</div>
<div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160; </div>
<div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;    <span class="keywordflow">if</span>( variant == <span class="stringliteral">&quot;&lt;any&gt;&quot;</span> ) {</div>
<div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;        <a class="code" href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1">select_itype_variant</a>();</div>
<div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;    }</div>
<div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160; </div>
<div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitype__variant__data.html">itype_variant_data</a> &amp;option : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">variants</a> ) {</div>
<div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;        <span class="keywordflow">if</span>( option.<a class="code" href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">id</a> == variant ) {</div>
<div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;            <a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a> = &amp;option;</div>
<div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;            <span class="keywordflow">if</span>( option.<a class="code" href="structitype__variant__data.html#a9e47680d674b4163416bb4770b4a232b">expand_snippets</a> ) {</div>
<div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;                <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;description&quot;</span>, <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">expand</a>( <a class="code" href="classitem.html#aeaa5462841292fc890f32e4a67712faa">variant_description</a>() ) );</div>
<div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;            }</div>
<div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;        }</div>
<div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;    }</div>
<div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160; </div>
<div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item &#39;%s&#39; has no variant &#39;%s&#39;!&quot;</span>, <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str(), variant );</div>
<div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;}</div>
<div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160; </div>
<div class="line"><a name="l09385"></a><span class="lineno"><a class="line" href="classitem.html#aeaa5462841292fc890f32e4a67712faa"> 9385</a></span>&#160;std::string <a class="code" href="classitem.html#aeaa5462841292fc890f32e4a67712faa">item::variant_description</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() ) {</div>
<div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;    }</div>
<div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160; </div>
<div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;    <span class="comment">// append the description instead of fully overwriting it</span></div>
<div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().append ) {</div>
<div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;variant description&quot;</span>, <span class="stringliteral">&quot;%s  %s&quot;</span> ), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>(),</div>
<div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;                              <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().alt_description.translated() );</div>
<div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#ab6067bec7dc69b9f38259634008bfcb2">alt_description</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;    }</div>
<div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;}</div>
<div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160; </div>
<div class="line"><a name="l09400"></a><span class="lineno"><a class="line" href="classitem.html#a3101211dc3db3a8aa95675ab86d3ba36"> 9400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a3101211dc3db3a8aa95675ab86d3ba36">item::clear_itype_variant</a>()</div>
<div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;{</div>
<div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;    <a class="code" href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">_itype_variant</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;}</div>
<div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160; </div>
<div class="line"><a name="l09405"></a><span class="lineno"><a class="line" href="classitem.html#ac690c252311f4c021cb82c9487d35242"> 9405</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac690c252311f4c021cb82c9487d35242">item::is_firearm</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a> );</div>
<div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;}</div>
<div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160; </div>
<div class="line"><a name="l09410"></a><span class="lineno"><a class="line" href="classitem.html#aad3353f629e527eb4b9f6c2f666f9e36"> 9410</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aad3353f629e527eb4b9f6c2f666f9e36">item::get_reload_time</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;    }</div>
<div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;    <span class="keywordtype">int</span> reload_time = 0;</div>
<div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;        reload_time = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;reload_time;</div>
<div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;        reload_time = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;reload_time;</div>
<div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;        reload_time = <a class="code" href="game__constants_8h.html#aa5931cb2f162c829bae20f0df39ae014">INVENTORY_HANDLING_PENALTY</a>;</div>
<div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;    }</div>
<div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;        reload_time = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( reload_time * ( 100 + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;reload_modifier ) / 100 );</div>
<div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;    }</div>
<div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160; </div>
<div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;    <span class="keywordflow">return</span> reload_time;</div>
<div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;}</div>
<div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160; </div>
<div class="line"><a name="l09430"></a><span class="lineno"><a class="line" href="classitem.html#ab180dbb50ec9d55570a1b1de1a2ce126"> 9430</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab180dbb50ec9d55570a1b1de1a2ce126">item::is_silent</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3694c5d9138956736af2444bd7b3972e">gun_noise</a>().<a class="code" href="structitem_1_1sound__data.html#aa2fb844ce506ca62f0c5d1d549f54826">volume</a> &lt; 5;</div>
<div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;}</div>
<div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160; </div>
<div class="line"><a name="l09435"></a><span class="lineno"><a class="line" href="classitem.html#a9b06bb61116b722a90aa372a4561337a"> 9435</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">item::is_gunmod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a37edee7dafc5711621f26844cab78cf6">gunmod</a>;</div>
<div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;}</div>
<div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160; </div>
<div class="line"><a name="l09440"></a><span class="lineno"><a class="line" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf"> 9440</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">item::is_bionic</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>;</div>
<div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;}</div>
<div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160; </div>
<div class="line"><a name="l09445"></a><span class="lineno"><a class="line" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc"> 9445</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">item::is_magazine</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> || <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;}</div>
<div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160; </div>
<div class="line"><a name="l09450"></a><span class="lineno"><a class="line" href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f"> 9450</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f">item::is_battery</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() &amp;&amp; <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> );</div>
<div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;}</div>
<div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160; </div>
<div class="line"><a name="l09455"></a><span class="lineno"><a class="line" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4"> 9455</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">item::is_vehicle_battery</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9bf7494805acc141b007ddade6a6313c">battery</a>;</div>
<div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;}</div>
<div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160; </div>
<div class="line"><a name="l09460"></a><span class="lineno"><a class="line" href="classitem.html#a44a8bb6387c8f43fa1040ded39d5b776"> 9460</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a44a8bb6387c8f43fa1040ded39d5b776">item::is_ammo_belt</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a80adbb857748c7a6d3ab6c83a9ad8413">flag_MAG_BELT</a> );</div>
<div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;}</div>
<div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160; </div>
<div class="line"><a name="l09465"></a><span class="lineno"><a class="line" href="classitem.html#a6de81eeb1c4666a84e1d774582b945ae"> 9465</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a6de81eeb1c4666a84e1d774582b945ae">item::is_holster</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;holster&quot;</span> );</div>
<div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;}</div>
<div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160; </div>
<div class="line"><a name="l09470"></a><span class="lineno"><a class="line" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152"> 9470</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">item::is_ammo</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>;</div>
<div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;}</div>
<div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160; </div>
<div class="line"><a name="l09475"></a><span class="lineno"><a class="line" href="classitem.html#ac070089c03e5dc687bae39670edd5401"> 9475</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">item::is_comestible</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>();</div>
<div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;}</div>
<div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160; </div>
<div class="line"><a name="l09480"></a><span class="lineno"><a class="line" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75"> 9480</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;    }</div>
<div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;    <span class="keyword">const</span> std::string &amp;comest_type = <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype;</div>
<div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;    <span class="keywordflow">return</span> comest_type == <span class="stringliteral">&quot;FOOD&quot;</span> || comest_type == <span class="stringliteral">&quot;DRINK&quot;</span>;</div>
<div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;}</div>
<div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160; </div>
<div class="line"><a name="l09489"></a><span class="lineno"><a class="line" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347"> 9489</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">item::is_medication</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;    }</div>
<div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;comesttype == <span class="stringliteral">&quot;MED&quot;</span>;</div>
<div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;}</div>
<div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160; </div>
<div class="line"><a name="l09497"></a><span class="lineno"><a class="line" href="classitem.html#a009de9d7138e4186f03640d282ebd621"> 9497</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a009de9d7138e4186f03640d282ebd621">item::is_medical_tool</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;heal&quot;</span> ) != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;}</div>
<div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160; </div>
<div class="line"><a name="l09502"></a><span class="lineno"><a class="line" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23"> 9502</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">item::is_brewable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">brewable</a>;</div>
<div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;}</div>
<div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160; </div>
<div class="line"><a name="l09507"></a><span class="lineno"><a class="line" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4"> 9507</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">item::is_compostable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">compostable</a>;</div>
<div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;}</div>
<div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160; </div>
<div class="line"><a name="l09512"></a><span class="lineno"><a class="line" href="classitem.html#a6921d1c458f1e840933b765ca9c7e583"> 9512</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a6921d1c458f1e840933b765ca9c7e583">item::is_food_container</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;    <span class="keywordflow">return</span> ( !<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; <a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; food ) {</div>
<div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;        <span class="keywordflow">return</span> food.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>();</div>
<div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;    } ) ) ||</div>
<div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;    ( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() &amp;&amp; !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;disassembly &amp;&amp;</div>
<div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;      <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making-&gt;create_results().front().is_food_container() );</div>
<div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;}</div>
<div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160; </div>
<div class="line"><a name="l09521"></a><span class="lineno"><a class="line" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f"> 9521</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">item::has_temperature</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() || <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>();</div>
<div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;}</div>
<div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160; </div>
<div class="line"><a name="l09526"></a><span class="lineno"><a class="line" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd"> 9526</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">item::is_corpse</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a> );</div>
<div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;}</div>
<div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160; </div>
<div class="line"><a name="l09531"></a><span class="lineno"><a class="line" href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae"> 9531</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> *<a class="code" href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">item::get_mtype</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>;</div>
<div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;}</div>
<div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160; </div>
<div class="line"><a name="l09536"></a><span class="lineno"><a class="line" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1"> 9536</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">item::get_specific_heat_liquid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;specific_heat_liquid;</div>
<div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;    }</div>
<div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>()[0]-&gt;specific_heat_liquid();</div>
<div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;}</div>
<div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160; </div>
<div class="line"><a name="l09544"></a><span class="lineno"><a class="line" href="classitem.html#a48f495097039db579f63fef551736843"> 9544</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">item::get_specific_heat_solid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;specific_heat_solid;</div>
<div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;    }</div>
<div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>()[0]-&gt;specific_heat_solid();</div>
<div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;}</div>
<div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160; </div>
<div class="line"><a name="l09552"></a><span class="lineno"><a class="line" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238"> 9552</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">item::get_latent_heat</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;latent_heat;</div>
<div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;    }</div>
<div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>()[0]-&gt;latent_heat();</div>
<div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;}</div>
<div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160; </div>
<div class="line"><a name="l09560"></a><span class="lineno"><a class="line" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f"> 9560</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::temperature</a> <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">item::get_freeze_point</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;freeze_point );</div>
<div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;    }</div>
<div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>()[0]-&gt;freeze_point() );</div>
<div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;}</div>
<div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160; </div>
<div class="line"><a name="l09568"></a><span class="lineno"><a class="line" href="classitem.html#abc7a9644453a2b167e19a4e988d12d22"> 9568</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#abc7a9644453a2b167e19a4e988d12d22">item::set_mtype</a>( <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> *<span class="keyword">const</span> m )</div>
<div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;{</div>
<div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;    <span class="comment">// This is potentially dangerous, e.g. for corpse items, which *must* have a valid mtype pointer.</span></div>
<div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;    <span class="keywordflow">if</span>( m == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;setting item::corpse of %s to NULL&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;    }</div>
<div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;    <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> = m;</div>
<div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;}</div>
<div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160; </div>
<div class="line"><a name="l09578"></a><span class="lineno"><a class="line" href="classitem.html#a187a2679361c6546be613657dbad3b3f"> 9578</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a187a2679361c6546be613657dbad3b3f">item::is_ammo_container</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8a6a3cd39a0f44b9cac5197ed38f184f">has_any_with</a>(</div>
<div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>();</div>
<div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;    }, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;}</div>
<div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160; </div>
<div class="line"><a name="l09586"></a><span class="lineno"><a class="line" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328"> 9586</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">item::is_melee</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__type.html">damage_type</a> &amp;dt : <a class="code" href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a>() ) {</div>
<div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>( dt.id ) ) {</div>
<div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;        }</div>
<div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;    }</div>
<div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;}</div>
<div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160; </div>
<div class="line"><a name="l09596"></a><span class="lineno"><a class="line" href="classitem.html#afdeb60e09043e124c9c6061f0bffe085"> 9596</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">item::is_melee</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">damage_type_id</a> &amp;dt )<span class="keyword"> const</span></div>
<div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">damage_melee</a>( dt ) &gt; <a class="code" href="game__constants_8h.html#a271801f57dbbc5e91afd1fbbe0615a03">MELEE_STAT</a>;</div>
<div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;}</div>
<div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160; </div>
<div class="line"><a name="l09601"></a><span class="lineno"><a class="line" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98"> 9601</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *<a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">item::find_armor_data</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a> ) {</div>
<div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;        <span class="keywordflow">return</span> &amp;*<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">armor</a>;</div>
<div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;    }</div>
<div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;    <span class="comment">// Currently the only way to make a non-armor item into armor is to install a gun mod.</span></div>
<div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;    <span class="comment">// The gunmods are stored in the items contents, as are the contents of a container, and the</span></div>
<div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;    <span class="comment">// tools in a tool belt (a container actually), or the ammo in a quiver (container again).</span></div>
<div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;armor ) {</div>
<div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;            <span class="keywordflow">return</span> &amp;*<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;armor;</div>
<div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;        }</div>
<div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;    }</div>
<div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;}</div>
<div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160; </div>
<div class="line"><a name="l09617"></a><span class="lineno"><a class="line" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb"> 9617</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">item::is_pet_armor</a>( <span class="keywordtype">bool</span> on_pet )<span class="keyword"> const</span></div>
<div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;    <span class="keywordtype">bool</span> is_worn = on_pet &amp;&amp; !<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;pet_armor&quot;</span>, <span class="stringliteral">&quot;&quot;</span> ).empty();</div>
<div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#af99f81babbf43195fabadad217d12fca">flag_IS_PET_ARMOR</a> ) &amp;&amp; ( is_worn || !on_pet );</div>
<div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;}</div>
<div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160; </div>
<div class="line"><a name="l09623"></a><span class="lineno"><a class="line" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32"> 9623</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>() != <span class="keyword">nullptr</span> || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a53001758768062a7756a6d5b5cd91789">flag_IS_ARMOR</a> );</div>
<div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;}</div>
<div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160; </div>
<div class="line"><a name="l09628"></a><span class="lineno"><a class="line" href="classitem.html#a980b9e48afd103973a201fc487d0af8b"> 9628</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">item::is_book</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>;</div>
<div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;}</div>
<div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160; </div>
<div class="line"><a name="l09633"></a><span class="lineno"><a class="line" href="classitem.html#a062899abd6f9949ceb1c04fa394afbdc"> 9633</a></span>&#160;std::string <a class="code" href="classitem.html#a062899abd6f9949ceb1c04fa394afbdc">item::get_book_skill</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;skill-&gt;ident() != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">skill_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;skill-&gt;name();</div>
<div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;        }</div>
<div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;    }</div>
<div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;}</div>
<div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160; </div>
<div class="line"><a name="l09643"></a><span class="lineno"><a class="line" href="classitem.html#aaaf3784eda060adabe524a54cc873e68"> 9643</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aaaf3784eda060adabe524a54cc873e68">item::is_map</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>().<a class="code" href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">get_id</a>() == <a class="code" href="item_8cpp.html#af0fac6da14e7370e2af006f09efbd8c7">item_category_maps</a>;</div>
<div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;}</div>
<div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160; </div>
<div class="line"><a name="l09648"></a><span class="lineno"><a class="line" href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5"> 9648</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">item::seal</a>()</div>
<div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;{</div>
<div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a900f0ca8b2a7d8f0738202c519313d0d">is_container_full</a>() ) {</div>
<div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3bada3d2b818265a4df511e02648a0c0">seal_all_pockets</a>();</div>
<div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;    }</div>
<div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;}</div>
<div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160; </div>
<div class="line"><a name="l09657"></a><span class="lineno"><a class="line" href="classitem.html#a23fca649e0d12cfcd94139e6fe39b9f1"> 9657</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a23fca649e0d12cfcd94139e6fe39b9f1">item::all_pockets_sealed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a23bef6c6f457f22d3b4afcba902a318d">all_pockets_sealed</a>();</div>
<div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;}</div>
<div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160; </div>
<div class="line"><a name="l09662"></a><span class="lineno"><a class="line" href="classitem.html#ace63931f931b85f18d5fc953a7b3fedf"> 9662</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ace63931f931b85f18d5fc953a7b3fedf">item::any_pockets_sealed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#acdea3514b4c80b9495fe9dc060754696">any_pockets_sealed</a>();</div>
<div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;}</div>
<div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160; </div>
<div class="line"><a name="l09667"></a><span class="lineno"><a class="line" href="classitem.html#a723753bab4cc789e3ec186846c9916a3"> 9667</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;}</div>
<div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160; </div>
<div class="line"><a name="l09672"></a><span class="lineno"><a class="line" href="classitem.html#a98a1de7b06c68d9552e32d44ba0e6831"> 9672</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a98a1de7b06c68d9552e32d44ba0e6831">item::is_container_with_restriction</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;    }</div>
<div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a23c2c5a6669126fa11d4d9e7d8c9df3d">is_restricted_container</a>();</div>
<div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;}</div>
<div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160; </div>
<div class="line"><a name="l09680"></a><span class="lineno"><a class="line" href="classitem.html#a2ac472fc50bf04e624137133781c9376"> 9680</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2ac472fc50bf04e624137133781c9376">item::is_single_container_with_restriction</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a6652166731398890b78565f5a75d18fd">is_single_restricted_container</a>();</div>
<div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;}</div>
<div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160; </div>
<div class="line"><a name="l09685"></a><span class="lineno"><a class="line" href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a"> 9685</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">item::has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( pk_type );</div>
<div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;}</div>
<div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160; </div>
<div class="line"><a name="l09690"></a><span class="lineno"><a class="line" href="classitem.html#a6902798d07c0cf20fb5e601c8e192acc"> 9690</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a6902798d07c0cf20fb5e601c8e192acc">item::has_any_with</a>( <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;filter,</div>
<div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;                         <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8a6a3cd39a0f44b9cac5197ed38f184f">has_any_with</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, pk_type );</div>
<div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;}</div>
<div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160; </div>
<div class="line"><a name="l09696"></a><span class="lineno"><a class="line" href="classitem.html#a75713034c5248d9f6305822f2e976222"> 9696</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a75713034c5248d9f6305822f2e976222">item::all_pockets_rigid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5e697479764ea7187088b3bd191fe967">all_pockets_rigid</a>();</div>
<div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;}</div>
<div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160; </div>
<div class="line"><a name="l09701"></a><span class="lineno"><a class="line" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364"> 9701</a></span>&#160;std::vector&lt;const item_pocket *&gt; <a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">item::get_all_contained_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;}</div>
<div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160; </div>
<div class="line"><a name="l09706"></a><span class="lineno"><a class="line" href="classitem.html#a6d88ea1d778b85293164b079136cd7e2"> 9706</a></span>&#160;std::vector&lt;item_pocket *&gt; <a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">item::get_all_contained_pockets</a>()</div>
<div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;{</div>
<div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>();</div>
<div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160;}</div>
<div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160; </div>
<div class="line"><a name="l09711"></a><span class="lineno"><a class="line" href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7"> 9711</a></span>&#160;std::vector&lt;const item_pocket *&gt; <a class="code" href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7">item::get_all_standard_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a66b8daaa8fa204e7738a601a50a402b6">get_all_standard_pockets</a>();</div>
<div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;}</div>
<div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160; </div>
<div class="line"><a name="l09716"></a><span class="lineno"><a class="line" href="classitem.html#a65c9fd272a60fbe7b493e1c1e29c661b"> 9716</a></span>&#160;std::vector&lt;item_pocket *&gt; <a class="code" href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7">item::get_all_standard_pockets</a>()</div>
<div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;{</div>
<div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a66b8daaa8fa204e7738a601a50a402b6">get_all_standard_pockets</a>();</div>
<div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;}</div>
<div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160; </div>
<div class="line"><a name="l09721"></a><span class="lineno"><a class="line" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305"> 9721</a></span>&#160;std::vector&lt;item_pocket *&gt; <a class="code" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">item::get_all_ablative_pockets</a>()</div>
<div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;{</div>
<div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">get_all_ablative_pockets</a>();</div>
<div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;}</div>
<div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160; </div>
<div class="line"><a name="l09726"></a><span class="lineno"><a class="line" href="classitem.html#a47264bec2f50909dc5b23f9bead615bf"> 9726</a></span>&#160;std::vector&lt;const item_pocket *&gt; <a class="code" href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">item::get_all_ablative_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">get_all_ablative_pockets</a>();</div>
<div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;}</div>
<div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160; </div>
<div class="line"><a name="l09731"></a><span class="lineno"><a class="line" href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1"> 9731</a></span>&#160;<a class="code" href="classitem__pocket.html">item_pocket</a> *<a class="code" href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1">item::contained_where</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;contained )</div>
<div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;{</div>
<div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aed5311c34647eca7b7784640916a70aa">contained_where</a>( contained );</div>
<div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;}</div>
<div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160; </div>
<div class="line"><a name="l09736"></a><span class="lineno"><a class="line" href="classitem.html#a15cd22643e1abd4911b1d7977b1a9374"> 9736</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *<a class="code" href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1">item::contained_where</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;contained )<span class="keyword"> const</span></div>
<div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code" href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1">contained_where</a>( contained );</div>
<div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;}</div>
<div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160; </div>
<div class="line"><a name="l09741"></a><span class="lineno"><a class="line" href="classitem.html#a22ad63b72a459c8f95893a853348cb06"> 9741</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a22ad63b72a459c8f95893a853348cb06">item::is_watertight_container</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7931da51131300026f822d4791eb25aa">can_contain_liquid</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;}</div>
<div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160; </div>
<div class="line"><a name="l09746"></a><span class="lineno"><a class="line" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac"> 9746</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">item::is_bucket_nonempty</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() &amp;&amp; <a class="code" href="classitem.html#a397ded92d52f1c19cc4e8e2edb13839d">will_spill</a>();</div>
<div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;}</div>
<div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160; </div>
<div class="line"><a name="l09751"></a><span class="lineno"><a class="line" href="classitem.html#a9fcc7813b424bb53b94be1988be66d54"> 9751</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9fcc7813b424bb53b94be1988be66d54">item::is_engine</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">engine</a>;</div>
<div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;}</div>
<div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160; </div>
<div class="line"><a name="l09756"></a><span class="lineno"><a class="line" href="classitem.html#a3cb164c5569aa41cfda914b6f7a74cb2"> 9756</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3cb164c5569aa41cfda914b6f7a74cb2">item::is_wheel</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>;</div>
<div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;}</div>
<div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160; </div>
<div class="line"><a name="l09761"></a><span class="lineno"><a class="line" href="classitem.html#ad8d4ac9512f65051e505e3359b5a6f2c"> 9761</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ad8d4ac9512f65051e505e3359b5a6f2c">item::is_fuel</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;    <span class="comment">// A fuel is made of only one material</span></div>
<div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">materials</a>.size() != 1 ) {</div>
<div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;    }</div>
<div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;    <span class="comment">// and this material has to produce energy</span></div>
<div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">get_base_material</a>().get_fuel_data().<a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> &lt;= 0_J ) {</div>
<div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;    }</div>
<div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;    <span class="comment">// and it needs to be have consumable charges</span></div>
<div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>();</div>
<div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;}</div>
<div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160; </div>
<div class="line"><a name="l09775"></a><span class="lineno"><a class="line" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c"> 9775</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">item::is_toolmod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>;</div>
<div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;}</div>
<div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160; </div>
<div class="line"><a name="l09780"></a><span class="lineno"><a class="line" href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6"> 9780</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">item::is_irremovable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#acb8b508d58dee8c00950d284b017e520">flag_IRREMOVABLE</a> );</div>
<div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160;}</div>
<div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160; </div>
<div class="line"><a name="l09785"></a><span class="lineno"><a class="line" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49"> 9785</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">item::is_broken</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a72f4398fcd3abb5ecc58107488f26c5e">flag_ITEM_BROKEN</a> ) || <a class="code" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">has_fault_flag</a>( std::string( <span class="stringliteral">&quot;ITEM_BROKEN&quot;</span> ) );</div>
<div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;}</div>
<div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160; </div>
<div class="line"><a name="l09790"></a><span class="lineno"><a class="line" href="classitem.html#a3358e085e55edd073f0dbb4e3dfa5abc"> 9790</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3358e085e55edd073f0dbb4e3dfa5abc">item::is_broken_on_active</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a72f4398fcd3abb5ecc58107488f26c5e">flag_ITEM_BROKEN</a> ) ||</div>
<div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;           <a class="code" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">has_fault_flag</a>( std::string( <span class="stringliteral">&quot;ITEM_BROKEN&quot;</span> ) ) ||</div>
<div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;           ( <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ad0b1ce806d6f23c25a67db4e5043f6f0">flag_WATER_BREAK_ACTIVE</a> ) );</div>
<div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;}</div>
<div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160; </div>
<div class="line"><a name="l09797"></a><span class="lineno"><a class="line" href="classitem.html#ada39e6de0077216777a56e6d237b7e0b"> 9797</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ada39e6de0077216777a56e6d237b7e0b">item::wind_resist</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;    std::vector&lt;const material_type *&gt; <a class="code" href="namespacematerials.html">materials</a> = <a class="code" href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">made_of_types</a>();</div>
<div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacematerials.html">materials</a>.empty() ) {</div>
<div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Called item::wind_resist on an item (%s) made of nothing!&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;        <span class="keywordflow">return</span> 99;</div>
<div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;    }</div>
<div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160; </div>
<div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;    <span class="keywordtype">int</span> best = -1;</div>
<div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> *mat : <a class="code" href="namespacematerials.html">materials</a> ) {</div>
<div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;        std::optional&lt;int&gt; resistance = mat-&gt;wind_resist();</div>
<div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;        <span class="keywordflow">if</span>( resistance &amp;&amp; *resistance &gt; best ) {</div>
<div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;            best = *resistance;</div>
<div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160;        }</div>
<div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;    }</div>
<div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160; </div>
<div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;    <span class="comment">// Default to 99% effective</span></div>
<div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;    <span class="keywordflow">if</span>( best == -1 ) {</div>
<div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;        <span class="keywordflow">return</span> 99;</div>
<div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;    }</div>
<div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160; </div>
<div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;    <span class="keywordflow">return</span> best;</div>
<div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;}</div>
<div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160; </div>
<div class="line"><a name="l09821"></a><span class="lineno"><a class="line" href="classitem.html#adaaa3ece39eb40637371659dad8550e3"> 9821</a></span>&#160;std::set&lt;fault_id&gt; <a class="code" href="classitem.html#adaaa3ece39eb40637371659dad8550e3">item::faults_potential</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;    std::set&lt;fault_id&gt; res;</div>
<div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;    res.insert( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a71835820e6594955948ef1e8bc7bed68">faults</a>.begin(), <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a71835820e6594955948ef1e8bc7bed68">faults</a>.end() );</div>
<div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;}</div>
<div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160; </div>
<div class="line"><a name="l09828"></a><span class="lineno"><a class="line" href="classitem.html#a1b9abb87d3a9cb6dfc4499a9066ecc44"> 9828</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a1b9abb87d3a9cb6dfc4499a9066ecc44">item::wheel_area</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3cb164c5569aa41cfda914b6f7a74cb2">is_wheel</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>-&gt;diameter * <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5c286a821362f883c93b7d984ecae163">wheel</a>-&gt;width : 0;</div>
<div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;}</div>
<div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160; </div>
<div class="line"><a name="l09833"></a><span class="lineno"><a class="line" href="classitem.html#ab602e7cf79da08819d5aff518890d405"> 9833</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#ab602e7cf79da08819d5aff518890d405">item::fuel_energy</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;    <span class="comment">// The odd units and division are to avoid integer rounding errors.</span></div>
<div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">get_base_material</a>().<a class="code" href="classmaterial__type.html#a7bf0d6f32fe448f15bd917601703d15c">get_fuel_data</a>().<a class="code" href="structfuel__data.html#a92de85cdbb52f759f19f99879c4172c9">energy</a> * <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a>( <a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>() ) / 1000;</div>
<div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;}</div>
<div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160; </div>
<div class="line"><a name="l09839"></a><span class="lineno"><a class="line" href="classitem.html#a31cd84620cdba14d6614aaba1c805849"> 9839</a></span>&#160;std::string <a class="code" href="classitem.html#a31cd84620cdba14d6614aaba1c805849">item::fuel_pump_terrain</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">get_base_material</a>().<a class="code" href="classmaterial__type.html#a7bf0d6f32fe448f15bd917601703d15c">get_fuel_data</a>().<a class="code" href="structfuel__data.html#ab0a9319845eb7114cc61d0a41875aecc">pump_terrain</a>;</div>
<div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;}</div>
<div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160; </div>
<div class="line"><a name="l09844"></a><span class="lineno"><a class="line" href="classitem.html#a7f9c2151a7bdfc2ec194af265f61c200"> 9844</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a39e79f886f257aaaa199a7c2351993b7">item::has_explosion_data</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">get_base_material</a>().<a class="code" href="classmaterial__type.html#a7bf0d6f32fe448f15bd917601703d15c">get_fuel_data</a>().<a class="code" href="structfuel__data.html#ad37b7320ad276e5524622d17865977f7">explosion_data</a>.<a class="code" href="structfuel__explosion__data.html#a06fd400d83f640dee58c7bb8f967609a">is_empty</a>();</div>
<div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160;}</div>
<div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160; </div>
<div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160;<span class="keyword">struct </span><a class="code" href="structfuel__explosion__data.html">fuel_explosion_data</a> <a class="code" href="classitem.html">item</a>::get_explosion_data() const {</div>
<div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;    <span class="keywordflow">return</span> get_base_material().get_fuel_data().explosion_data;</div>
<div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;}</div>
<div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160; </div>
<div class="line"><a name="l09853"></a><span class="lineno"><a class="line" href="classitem.html#a5996f63ca1797fc01482678b51a87680"> 9853</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>();</div>
<div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;}</div>
<div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160; </div>
<div class="line"><a name="l09858"></a><span class="lineno"><a class="line" href="classitem.html#a900f0ca8b2a7d8f0738202c519313d0d"> 9858</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a900f0ca8b2a7d8f0738202c519313d0d">item::is_container_full</a>( <span class="keywordtype">bool</span> allow_bucket )<span class="keyword"> const</span></div>
<div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d821ea0e73727a926b5996fe62d0e95">full</a>( allow_bucket );</div>
<div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;}</div>
<div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160; </div>
<div class="line"><a name="l09863"></a><span class="lineno"><a class="line" href="classitem.html#a76baae3501d92f1fca07b9d8f52bc6f1"> 9863</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a76baae3501d92f1fca07b9d8f52bc6f1">item::is_magazine_full</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac5f3fb88fd44f0789b7a6123e13180f9">is_magazine_full</a>();</div>
<div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;}</div>
<div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160; </div>
<div class="line"><a name="l09868"></a><span class="lineno"><a class="line" href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a"> 9868</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">item::can_unload_liquid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab0fa10b3db4d9eb9429524f8e0d0f0cd">flag_NO_UNLOAD</a> ) ) {</div>
<div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;    }</div>
<div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160; </div>
<div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5b9cf070df911b7e71e3e19ace55776d">can_unload_liquid</a>();</div>
<div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;}</div>
<div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160; </div>
<div class="line"><a name="l09877"></a><span class="lineno"><a class="line" href="classitem.html#a53211e74dc72eaa2a4042f07b78d9bdb"> 9877</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a53211e74dc72eaa2a4042f07b78d9bdb">item::contains_no_solids</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a78efa3031a5895eb9c151e93e7f23294">contains_no_solids</a>();</div>
<div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;}</div>
<div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160; </div>
<div class="line"><a name="l09882"></a><span class="lineno"><a class="line" href="classitem.html#aa92d94eef572e6a887312fef2c74c271"> 9882</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa92d94eef572e6a887312fef2c74c271">item::allows_speedloader</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;speedloader_id )<span class="keyword"> const</span></div>
<div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a49beb5d79d9b0b57ac9299eb67b4f843">allows_speedloader</a>( speedloader_id );</div>
<div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;}</div>
<div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160; </div>
<div class="line"><a name="l09887"></a><span class="lineno"><a class="line" href="classitem.html#af021f8399f7a270c4fecbe717b92828e"> 9887</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af021f8399f7a270c4fecbe717b92828e">item::can_reload_with</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ammo, <span class="keywordtype">bool</span> now )<span class="keyword"> const</span></div>
<div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1d6da470e2d0c764e84877215a30f42c">flag_NO_RELOAD</a> ) &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a> ) ) {</div>
<div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// turrets ignore NO_RELOAD flag</span></div>
<div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;    }</div>
<div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160; </div>
<div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;    <span class="keywordflow">if</span>( now &amp;&amp; ammo.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() &amp;&amp; !ammo.<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;            <span class="comment">// Dirty hack because &quot;ammo&quot; on tools is actually completely separate thing from &quot;ammo&quot; on guns and &quot;ammo_types()&quot; works only for guns</span></div>
<div class="line"><a name="l09896"></a><span class="lineno"> 9896</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id.count( ammo.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>().<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() ) ) {</div>
<div class="line"><a name="l09897"></a><span class="lineno"> 9897</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09898"></a><span class="lineno"> 9898</span>&#160;            }</div>
<div class="line"><a name="l09899"></a><span class="lineno"> 9899</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l09900"></a><span class="lineno"> 9900</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( ammo.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>().<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() ) ) {</div>
<div class="line"><a name="l09901"></a><span class="lineno"> 9901</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09902"></a><span class="lineno"> 9902</span>&#160;            }</div>
<div class="line"><a name="l09903"></a><span class="lineno"> 9903</span>&#160;        }</div>
<div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;    }</div>
<div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160; </div>
<div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;    <span class="comment">// Check if the item is in general compatible with any reloadable pocket.</span></div>
<div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aab0f2eac2c13ceb272c0ca01251e793d">can_reload_with</a>( ammo, now );</div>
<div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;}</div>
<div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160; </div>
<div class="line"><a name="l09910"></a><span class="lineno"><a class="line" href="classitem.html#a0ba159e96a423dda4e44f4c2025affcb"> 9910</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0ba159e96a423dda4e44f4c2025affcb">item::is_salvageable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09912"></a><span class="lineno"> 9912</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160;    }</div>
<div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;    <span class="comment">// None of the materials are salvageable or they turn into the original item</span></div>
<div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160;    <span class="keywordflow">if</span>( std::none_of( mats.begin(), mats.end(), [<span class="keyword">this</span>]( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; &amp;m ) {</div>
<div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;    return m.first-&gt;salvaged_into().has_value() &amp;&amp; m.first-&gt;salvaged_into().value() != type-&gt;get_id();</div>
<div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;    } ) ) {</div>
<div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;    }</div>
<div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa88912d2b51e49a4122192f1270aa074">flag_NO_SALVAGE</a> );</div>
<div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;}</div>
<div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160; </div>
<div class="line"><a name="l09925"></a><span class="lineno"><a class="line" href="classitem.html#a2aafd5194a8aaef6f2655ab7d5c90589"> 9925</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2aafd5194a8aaef6f2655ab7d5c90589">item::is_disassemblable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> &amp;&amp; ( <a class="code" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) || <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a> );</div>
<div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;}</div>
<div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160; </div>
<div class="line"><a name="l09930"></a><span class="lineno"><a class="line" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a"> 9930</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">item::is_craft</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;}</div>
<div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160; </div>
<div class="line"><a name="l09935"></a><span class="lineno"><a class="line" href="classitem.html#af76842f6e7f6824589be0e31e0053409"> 9935</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af76842f6e7f6824589be0e31e0053409">item::is_funnel_container</a>( <a class="code" href="classunits_1_1quantity.html">units::volume</a> &amp;bigger_than )<span class="keyword"> const</span></div>
<div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae9daf89e99f089da259528d1ed85e75d">get_total_capacity</a>() &lt;= bigger_than ) {</div>
<div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// skip contents check, performance</span></div>
<div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160;    }</div>
<div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#add707f76410aaafee46ba91cba9b1aa3">is_funnel_container</a>( bigger_than );</div>
<div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;}</div>
<div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160; </div>
<div class="line"><a name="l09943"></a><span class="lineno"><a class="line" href="classitem.html#aa25047563db389e8372f4f40ef7ac965"> 9943</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa25047563db389e8372f4f40ef7ac965">item::is_emissive</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#a16250874faa8912324fbc4a305fe0e1b">luminance</a> &gt; 0 || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a64d8b1399996d38b2ed54e1543dcef50">light_emission</a> &gt; 0;</div>
<div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;}</div>
<div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160; </div>
<div class="line"><a name="l09948"></a><span class="lineno"><a class="line" href="classitem.html#a0ac79d3de61e0dd6347c9e3747de704b"> 9948</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a0ac79d3de61e0dd6347c9e3747de704b">item::is_deployable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;deploy_furn&quot;</span> ) || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;deploy_appliance&quot;</span> );</div>
<div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;}</div>
<div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160; </div>
<div class="line"><a name="l09953"></a><span class="lineno"><a class="line" href="classitem.html#a59a03649a0636c70e776054db688564a"> 9953</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">item::is_tool</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>;</div>
<div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160;}</div>
<div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160; </div>
<div class="line"><a name="l09958"></a><span class="lineno"><a class="line" href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1"> 9958</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">item::is_transformable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.find( <span class="stringliteral">&quot;transform&quot;</span> ) != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">use_methods</a>.end();</div>
<div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;}</div>
<div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160; </div>
<div class="line"><a name="l09963"></a><span class="lineno"><a class="line" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c"> 9963</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">item::is_relic</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>;</div>
<div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;}</div>
<div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160; </div>
<div class="line"><a name="l09968"></a><span class="lineno"><a class="line" href="classitem.html#a06cf15fba046181d217790bd95b77f20"> 9968</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a06cf15fba046181d217790bd95b77f20">item::is_same_relic</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;    <span class="keywordflow">return</span> ( !<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() ) ||</div>
<div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160;           ( <a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; *<a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a> == *rhs.<a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a> );</div>
<div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;}</div>
<div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160; </div>
<div class="line"><a name="l09974"></a><span class="lineno"><a class="line" href="classitem.html#acd759b167a7c80974842fac5eca8fcbf"> 9974</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#acd759b167a7c80974842fac5eca8fcbf">item::is_same_temperature</a>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> &amp;rhs )<span class="keyword"> const</span></div>
<div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;    <span class="keywordflow">return</span> ( !<a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() &amp;&amp; !rhs.<a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) ||</div>
<div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;           ( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() &amp;&amp; rhs.<a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() &amp;&amp;</div>
<div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;             <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> ) &amp;&amp;</div>
<div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;             <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> ) &amp;&amp;</div>
<div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;             <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) &amp;&amp;</div>
<div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;             <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a> ) == rhs.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a> ) );</div>
<div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;}</div>
<div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160; </div>
<div class="line"><a name="l09984"></a><span class="lineno"><a class="line" href="classitem.html#a363197f949b110a42110ca99b9d36f73"> 9984</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a363197f949b110a42110ca99b9d36f73">item::has_relic_recharge</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;has_recharge();</div>
<div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;}</div>
<div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160; </div>
<div class="line"><a name="l09989"></a><span class="lineno"><a class="line" href="classitem.html#acf89390a6191405cc59bc902cb3f1609"> 9989</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#acf89390a6191405cc59bc902cb3f1609">item::has_relic_activation</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() &amp;&amp; <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;has_activation();</div>
<div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;}</div>
<div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160; </div>
<div class="line"><a name="l09994"></a><span class="lineno"><a class="line" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29"> 9994</a></span>&#160;std::vector&lt;enchant_cache&gt; <a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">item::get_proc_enchantments</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() ) {</div>
<div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;enchant_cache&gt; {};</div>
<div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;    }</div>
<div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;get_proc_enchantments();</div>
<div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;}</div>
<div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160; </div>
<div class="line"><a name="l10002"></a><span class="lineno"><a class="line" href="classitem.html#a9e2ba6ad083ca4261daa0890d831d823">10002</a></span>&#160;std::vector&lt;enchantment&gt; <a class="code" href="classitem.html#a9e2ba6ad083ca4261daa0890d831d823">item::get_defined_enchantments</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() || !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;enchantment&gt; {};</div>
<div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;    }</div>
<div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160; </div>
<div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>-&gt;get_defined_enchantments();</div>
<div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;}</div>
<div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160; </div>
<div class="line"><a name="l10011"></a><span class="lineno"><a class="line" href="classitem.html#a8a6290c91fa94f5fb208c7b3188627b8">10011</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#a8a6290c91fa94f5fb208c7b3188627b8">item::calculate_by_enchantment</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;owner, <span class="keywordtype">double</span> modify,</div>
<div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;                                       <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a> value, <span class="keywordtype">bool</span> round_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;    <span class="keywordtype">double</span> add_value = 0.0;</div>
<div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;    <span class="keywordtype">double</span> mult_value = 1.0;</div>
<div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;ench : <a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">get_proc_enchantments</a>() ) {</div>
<div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;        <span class="keywordflow">if</span>( ench.is_active( <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>, *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;            add_value += ench.get_value_add( value );</div>
<div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;            mult_value += ench.get_value_multiply( value );</div>
<div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;        }</div>
<div class="line"><a name="l10021"></a><span class="lineno">10021</span>&#160;    }</div>
<div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchantment.html">enchantment</a> &amp;ench : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>-&gt;get_defined_enchantments() ) {</div>
<div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160;            <span class="keywordflow">if</span>( ench.is_active( <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a>, *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;                add_value += ench.get_value_add( value, <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a> );</div>
<div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160;                mult_value += ench.get_value_multiply( value, <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a> );</div>
<div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;            }</div>
<div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;        }</div>
<div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;    }</div>
<div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;    modify += add_value;</div>
<div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;    modify *= mult_value;</div>
<div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;    <span class="keywordflow">if</span>( round_value ) {</div>
<div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;        modify = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( modify );</div>
<div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;    }</div>
<div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;    <span class="keywordflow">return</span> modify;</div>
<div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;}</div>
<div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160; </div>
<div class="line"><a name="l10038"></a><span class="lineno"><a class="line" href="classitem.html#a778f402036fcb41dbaf8aeef08304254">10038</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classitem.html#a778f402036fcb41dbaf8aeef08304254">item::calculate_by_enchantment_wield</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;owner, <span class="keywordtype">double</span> modify,</div>
<div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;        <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a> value,</div>
<div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;        <span class="keywordtype">bool</span> round_value )<span class="keyword"> const</span></div>
<div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;    <span class="keywordtype">double</span> add_value = 0.0;</div>
<div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;    <span class="keywordtype">double</span> mult_value = 1.0;</div>
<div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;ench : <a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">get_proc_enchantments</a>() ) {</div>
<div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;        <span class="keywordflow">if</span>( ench.active_wield() ) {</div>
<div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;            add_value += ench.get_value_add( value );</div>
<div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;            mult_value += ench.get_value_multiply( value );</div>
<div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;        }</div>
<div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;    }</div>
<div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchantment.html">enchantment</a> &amp;ench : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>-&gt;get_defined_enchantments() ) {</div>
<div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;            <span class="keywordflow">if</span>( ench.active_wield() ) {</div>
<div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;                add_value += ench.get_value_add( value, <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a> );</div>
<div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;                mult_value += ench.get_value_multiply( value, <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a> );</div>
<div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;            }</div>
<div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;        }</div>
<div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;    }</div>
<div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;    modify += add_value;</div>
<div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;    modify *= mult_value;</div>
<div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;    <span class="keywordflow">if</span>( round_value ) {</div>
<div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160;        modify = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( modify );</div>
<div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;    }</div>
<div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;    <span class="keywordflow">return</span> modify;</div>
<div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160;}</div>
<div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160; </div>
<div class="line"><a name="l10066"></a><span class="lineno"><a class="line" href="classitem.html#a31ee884ec4c0f5d17bacaaafa3825990">10066</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="classitem.html#a31ee884ec4c0f5d17bacaaafa3825990">item::max_containable_length</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a61608c76ece51d2c4b96d8013cb4b491">max_containable_length</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160;}</div>
<div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160; </div>
<div class="line"><a name="l10071"></a><span class="lineno"><a class="line" href="classitem.html#a6d051a790e435f12bd56a5a370f43492">10071</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::length</a> <a class="code" href="classitem.html#a6d051a790e435f12bd56a5a370f43492">item::min_containable_length</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a085c494a7f198aa2f7606e0aeeb00186">min_containable_length</a>();</div>
<div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;}</div>
<div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160; </div>
<div class="line"><a name="l10076"></a><span class="lineno"><a class="line" href="classitem.html#a00d8129e422155118bb01ec20a8f919d">10076</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a00d8129e422155118bb01ec20a8f919d">item::max_containable_volume</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a31dec0f1d9ccf93c7f8da6cc0e8e438c">max_containable_volume</a>();</div>
<div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;}</div>
<div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160; </div>
<div class="line"><a name="l10081"></a><span class="lineno"><a class="line" href="classitem.html#a98094333487904d8d911fbc8f14c6569">10081</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a98094333487904d8d911fbc8f14c6569">item::is_compatible</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span> == &amp;it ) {</div>
<div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;        <span class="comment">// does the set of all sets contain itself?</span></div>
<div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;    }</div>
<div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;    <span class="comment">// disallow putting portable holes into bags of holding</span></div>
<div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">bigger_on_the_inside</a>( <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) &amp;&amp;</div>
<div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;        it.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">bigger_on_the_inside</a>( it.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) ) {</div>
<div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;    }</div>
<div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160; </div>
<div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a84d70fb3f980b057ab38d9bae5aea4c9">is_compatible</a>( it );</div>
<div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160;}</div>
<div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160; </div>
<div class="line"><a name="l10096"></a><span class="lineno"><a class="line" href="classitem.html#a3974b4c42192b80b20bea8d0c093dbf0">10096</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a3974b4c42192b80b20bea8d0c093dbf0">item::can_contain_directly</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( it, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code" href="classitem__location.html">item_location</a>(), 10000000_ml, <span class="keyword">false</span> );</div>
<div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;}</div>
<div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160; </div>
<div class="line"><a name="l10101"></a><span class="lineno"><a class="line" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">10101</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">item::can_contain</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <span class="keyword">const</span> <span class="keywordtype">bool</span> nested, <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_rigidity,</div>
<div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_pkt_settings, <span class="keyword">const</span> <span class="keywordtype">bool</span> is_pick_up_inv,</div>
<div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;parent_it,</div>
<div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;                                 <a class="code" href="classunits_1_1quantity.html">units::volume</a> remaining_parent_volume, <span class="keyword">const</span> <span class="keywordtype">bool</span> allow_nested )<span class="keyword"> const</span></div>
<div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160;    <span class="keywordtype">int</span> copies = 1;</div>
<div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( it, copies, nested, ignore_rigidity,</div>
<div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;                        ignore_pkt_settings, is_pick_up_inv, parent_it,</div>
<div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;                        remaining_parent_volume, allow_nested );</div>
<div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160;}</div>
<div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160; </div>
<div class="line"><a name="l10112"></a><span class="lineno"><a class="line" href="classitem.html#a01e731a18a9f3a6316fa65fe8fb15dc8">10112</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">item::can_contain</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <span class="keywordtype">int</span> &amp;copies_remaining, <span class="keyword">const</span> <span class="keywordtype">bool</span> nested,</div>
<div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_rigidity, <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_pkt_settings,</div>
<div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> is_pick_up_inv, <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;parent_it,</div>
<div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;                                 <a class="code" href="classunits_1_1quantity.html">units::volume</a> remaining_parent_volume,</div>
<div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> allow_nested )<span class="keyword"> const</span></div>
<div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;    <span class="keywordflow">if</span>( copies_remaining &lt;= 0 ) {</div>
<div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>();</div>
<div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;    }</div>
<div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span> == &amp;it || ( parent_it.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() != <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888dafedb2d84cafe20862cb4399751a8a7e3">item_location::type::invalid</a> &amp;&amp;</div>
<div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;                         <span class="keyword">this</span> == parent_it.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() ) ) {</div>
<div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;        <span class="comment">// does the set of all sets contain itself?</span></div>
<div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;        <span class="comment">// or does this already contain it?</span></div>
<div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <span class="stringliteral">&quot;can&#39;t put a container into itself&quot;</span> );</div>
<div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;    }</div>
<div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;    <span class="keywordflow">if</span>( nested &amp;&amp; !this-&gt;<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;    }</div>
<div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;    <span class="comment">// disallow putting portable holes into bags of holding</span></div>
<div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">bigger_on_the_inside</a>( <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) &amp;&amp;</div>
<div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;        it.<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">bigger_on_the_inside</a>( it.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ) ) {</div>
<div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;    }</div>
<div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160; </div>
<div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;    <span class="keywordflow">if</span>( allow_nested ) {</div>
<div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pkt : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">get_all_contained_pockets</a>() ) {</div>
<div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;            <span class="keywordflow">if</span>( pkt-&gt;empty() ) {</div>
<div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;            }</div>
<div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160; </div>
<div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;            <span class="comment">// early exit for max length no nested item is gonna fix this</span></div>
<div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;            <span class="keywordflow">if</span>( pkt-&gt;max_containable_length() &lt; it.<a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>() ) {</div>
<div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;            }</div>
<div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160; </div>
<div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;            <span class="comment">// If the current pocket has restrictions or blacklists the item or is a holster,</span></div>
<div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;            <span class="comment">// try the nested pocket regardless of whether it&#39;s soft or rigid.</span></div>
<div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_nested_rigidity =</div>
<div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;                !pkt-&gt;settings.accepts_item( it ) ||</div>
<div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;                !pkt-&gt;get_pocket_data()-&gt;get_flag_restrictions().empty() || pkt-&gt;is_holster();</div>
<div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *internal_it : pkt-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>() ) {</div>
<div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;                <span class="keywordflow">if</span>( parent_it.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() != <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888dafedb2d84cafe20862cb4399751a8a7e3">item_location::type::invalid</a> &amp;&amp; internal_it == parent_it.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() ) {</div>
<div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;                }</div>
<div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;                <span class="keywordflow">if</span>( !internal_it-&gt;is_container() ) {</div>
<div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;                }</div>
<div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;                <span class="keyword">auto</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = internal_it-&gt;can_contain( it, copies_remaining, <span class="keyword">true</span>, ignore_nested_rigidity,</div>
<div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;                                                     ignore_pkt_settings, is_pick_up_inv, parent_it,</div>
<div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;                                                     pkt-&gt;remaining_volume() );</div>
<div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;                <span class="keywordflow">if</span>( copies_remaining &lt;= 0 ) {</div>
<div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;                }</div>
<div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;            }</div>
<div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;        }</div>
<div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;    }</div>
<div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160; </div>
<div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;    <span class="keywordflow">return</span> nested &amp;&amp; !ignore_rigidity ?</div>
<div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;           <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3dd421a3f55c6af7f4e5c37e91969193">can_contain_rigid</a>( it, copies_remaining, ignore_pkt_settings, is_pick_up_inv ) :</div>
<div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;           <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aea8672c3d4e50c1bbaa4096f04037720">can_contain</a>( it, copies_remaining, ignore_pkt_settings, is_pick_up_inv,</div>
<div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;                                 remaining_parent_volume );</div>
<div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160;}</div>
<div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160; </div>
<div class="line"><a name="l10175"></a><span class="lineno"><a class="line" href="classitem.html#ac446ad761f83fda2d3c5fb2b7d7366f6">10175</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">item::can_contain</a>( <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp;tp )<span class="keyword"> const</span></div>
<div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( &amp;tp ) );</div>
<div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;}</div>
<div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160; </div>
<div class="line"><a name="l10180"></a><span class="lineno"><a class="line" href="classitem.html#ae403069b5762475b37df693ad99f567f">10180</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#ae403069b5762475b37df693ad99f567f">item::can_contain_partial</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;    <a class="code" href="classitem.html">item</a> i_copy = it;</div>
<div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;    <span class="keywordflow">if</span>( i_copy.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;        i_copy.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;    }</div>
<div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( i_copy );</div>
<div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;}</div>
<div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160; </div>
<div class="line"><a name="l10189"></a><span class="lineno"><a class="line" href="classitem.html#a6109bbb00c791c6172780b1efe13bf61">10189</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#a6109bbb00c791c6172780b1efe13bf61">item::can_contain_partial_directly</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )<span class="keyword"> const</span></div>
<div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;    <a class="code" href="classitem.html">item</a> i_copy = it;</div>
<div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;    <span class="keywordflow">if</span>( i_copy.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;        i_copy.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;    }</div>
<div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( i_copy, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code" href="classitem__location.html">item_location</a>(), 10000000_ml, <span class="keyword">false</span> );</div>
<div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;}</div>
<div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160; </div>
<div class="line"><a name="l10198"></a><span class="lineno"><a class="line" href="classitem.html#a20204ebe26dfb0b3524bafc9b79d0e97">10198</a></span>&#160;std::pair&lt;item_location, item_pocket *&gt; <a class="code" href="classitem.html#a20204ebe26dfb0b3524bafc9b79d0e97">item::best_pocket</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <a class="code" href="classitem__location.html">item_location</a> &amp;this_loc,</div>
<div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *avoid, <span class="keyword">const</span> <span class="keywordtype">bool</span> allow_sealed, <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_settings,</div>
<div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> nested, <span class="keywordtype">bool</span> ignore_rigidity )</div>
<div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;{</div>
<div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#af16e85e18d47e21f2fe2f895af21ca07">best_pocket</a>( it, this_loc, avoid, allow_sealed, ignore_settings,</div>
<div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;                                 nested, ignore_rigidity );</div>
<div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;}</div>
<div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160; </div>
<div class="line"><a name="l10206"></a><span class="lineno"><a class="line" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">10206</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a>( <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> )</div>
<div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;{</div>
<div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() || <a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;    }</div>
<div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160; </div>
<div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.is_npc() ) {</div>
<div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">spill_contents</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.pos() );</div>
<div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;    }</div>
<div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160; </div>
<div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a4cc534d85d175801dbae59ce49d115be">handle_liquid_or_spill</a>( <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>, <span class="comment">/*avoid=*/</span><span class="keyword">this</span> );</div>
<div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;    <a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160; </div>
<div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>();</div>
<div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;}</div>
<div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160; </div>
<div class="line"><a name="l10222"></a><span class="lineno"><a class="line" href="classitem.html#adf426955067e7321f7edfe6e2ddfc4f1">10222</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160;{</div>
<div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() || <a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a name="l10225"></a><span class="lineno">10225</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;    }</div>
<div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a279305b87c2b0f995ba8fc59c88fbaa8">spill_contents</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160;}</div>
<div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160; </div>
<div class="line"><a name="l10230"></a><span class="lineno"><a class="line" href="classitem.html#ab583f4735374c8cd0dcaff6417fee1cd">10230</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab583f4735374c8cd0dcaff6417fee1cd">item::spill_open_pockets</a>( <a class="code" href="classCharacter.html">Character</a> &amp;guy, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *avoid )</div>
<div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;{</div>
<div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa653ffb4ed5b3cdc599400948daefe86">spill_open_pockets</a>( guy, avoid );</div>
<div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;}</div>
<div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160; </div>
<div class="line"><a name="l10235"></a><span class="lineno"><a class="line" href="classitem.html#ab9096a37a5f340f3ac5b6b564ec668cf">10235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ab9096a37a5f340f3ac5b6b564ec668cf">item::overflow</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;loc )</div>
<div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;{</div>
<div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a40ad81056d79a62f6183ebf77074da17">overflow</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, loc );</div>
<div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;}</div>
<div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160; </div>
<div class="line"><a name="l10240"></a><span class="lineno"><a class="line" href="classitem.html#abb908918023b42cdf9137d154a76a25c">10240</a></span>&#160;<a class="code" href="classbook__proficiency__bonuses.html">book_proficiency_bonuses</a> <a class="code" href="classitem.html#abb908918023b42cdf9137d154a76a25c">item::get_book_proficiency_bonuses</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;    <a class="code" href="classbook__proficiency__bonuses.html">book_proficiency_bonuses</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160; </div>
<div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">is_ebook_storage</a>() ) {</div>
<div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *book : <a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">ebooks</a>() ) {</div>
<div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += book-&gt;get_book_proficiency_bonuses();</div>
<div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;        }</div>
<div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;    }</div>
<div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160; </div>
<div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> ) {</div>
<div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;    }</div>
<div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structbook__proficiency__bonus.html">book_proficiency_bonus</a> &amp;bonus : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;proficiencies ) {</div>
<div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( bonus );</div>
<div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;    }</div>
<div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;}</div>
<div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160; </div>
<div class="line"><a name="l10259"></a><span class="lineno"><a class="line" href="classitem.html#af607ad36c67593022397b437a3a5b5b4">10259</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af607ad36c67593022397b437a3a5b5b4">item::get_chapters</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> ) {</div>
<div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;    }</div>
<div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;chapters;</div>
<div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;}</div>
<div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160; </div>
<div class="line"><a name="l10267"></a><span class="lineno"><a class="line" href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">10267</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">item::get_remaining_chapters</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;u )<span class="keyword"> const</span></div>
<div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;    <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="structvar.html">var</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;remaining-chapters-%d&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.getID().get_value() );</div>
<div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <a class="code" href="structvar.html">var</a>, <a class="code" href="classitem.html#af607ad36c67593022397b437a3a5b5b4">get_chapters</a>() );</div>
<div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;}</div>
<div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160; </div>
<div class="line"><a name="l10274"></a><span class="lineno"><a class="line" href="classitem.html#ab01829202610bd64d462189e825462b2">10274</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ab01829202610bd64d462189e825462b2">item::mark_chapter_as_read</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;u )</div>
<div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;{</div>
<div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;    <span class="comment">// NOLINTNEXTLINE(cata-translate-string-literal)</span></div>
<div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="structvar.html">var</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;remaining-chapters-%d&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.getID().get_value() );</div>
<div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;chapters == 0 ) {</div>
<div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;        <span class="comment">// books without chapters will always have remaining chapters == 0, so we don&#39;t need to store them</span></div>
<div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;        <a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <a class="code" href="structvar.html">var</a> );</div>
<div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;    }</div>
<div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> remain = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">get_remaining_chapters</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> ) - 1 );</div>
<div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;    <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <a class="code" href="structvar.html">var</a>, remain );</div>
<div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;}</div>
<div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160; </div>
<div class="line"><a name="l10287"></a><span class="lineno"><a class="line" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">10287</a></span>&#160;std::set&lt;recipe_id&gt; <a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">item::get_saved_recipes</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3358e085e55edd073f0dbb4e3dfa5abc">is_broken_on_active</a>() ) {</div>
<div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;    }</div>
<div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;    std::set&lt;recipe_id&gt; result;</div>
<div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;rid_str : <a class="code" href="cata__utility_8cpp.html#a382c43734c8a029c36f3d3707195a303">string_split</a>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_RECIPES&quot;</span> ), <span class="charliteral">&#39;,&#39;</span> ) ) {</div>
<div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> rid( rid_str );</div>
<div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;        <span class="keywordflow">if</span>( rid.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;        }</div>
<div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;        <span class="keywordflow">if</span>( !rid.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;            <a class="code" href="debug_8cpp.html#a240782b16593c6bd607c64787c62da0e">DebugLog</a>( <a class="code" href="debug_8h.html#ab658e6d84759440dbf3c890446075395acdde8abdfca282d5529a48366dcfe8fd">D_WARNING</a>, <a class="code" href="debug_8h.html#afa45cf12d72d4226196a7d03c54ad7d3a1d75ac3d58695ea88f599caa6a352098">D_GAME</a> ) &lt;&lt; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() &lt;&lt;</div>
<div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;                                          <span class="stringliteral">&quot; contained invalid recipe id &#39;&quot;</span> &lt;&lt; rid.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;        }</div>
<div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;        result.emplace( rid );</div>
<div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;    }</div>
<div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;}</div>
<div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160; </div>
<div class="line"><a name="l10308"></a><span class="lineno"><a class="line" href="classitem.html#af849bd11bb6afad312bb858a2f21021b">10308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#af849bd11bb6afad312bb858a2f21021b">item::set_saved_recipes</a>( <span class="keyword">const</span> std::set&lt;recipe_id&gt; &amp;recipes )</div>
<div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;{</div>
<div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;    <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;EIPC_RECIPES&quot;</span>, <a class="code" href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a>( recipes, <span class="stringliteral">&quot;,&quot;</span> ) );</div>
<div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;}</div>
<div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160; </div>
<div class="line"><a name="l10313"></a><span class="lineno"><a class="line" href="classitem.html#aa4da95aa8718d73d04b241604c061098">10313</a></span>&#160;std::vector&lt;std::pair&lt;const recipe *, int&gt;&gt; <a class="code" href="classitem.html#aa4da95aa8718d73d04b241604c061098">item::get_available_recipes</a>(</div>
<div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;            <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;u )<span class="keyword"> const</span></div>
<div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160;    std::vector&lt;std::pair&lt;const recipe *, int&gt;&gt; recipe_entries;</div>
<div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.has_identified( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) ) {</div>
<div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;            <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;        }</div>
<div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160; </div>
<div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a> &amp;elem : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;recipes ) {</div>
<div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.get_knowledge_level( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>-&gt;<a class="code" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) &gt;= elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a281ac0918950f3547a56cb9e218ffe9e">skill_level</a> ) {</div>
<div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;                recipe_entries.emplace_back( elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">recipe</a>, elem.<a class="code" href="structislot__book_1_1recipe__with__description__t.html#a281ac0918950f3547a56cb9e218ffe9e">skill_level</a> );</div>
<div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;            }</div>
<div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;        }</div>
<div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;rid : <a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>() ) {</div>
<div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160;            <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *r = &amp;rid.obj();</div>
<div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.get_knowledge_level( r-&gt;<a class="code" href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">skill_used</a> ) &gt;= r-&gt;<a class="code" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> ) {</div>
<div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;                recipe_entries.emplace_back( r, r-&gt;<a class="code" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> );</div>
<div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160;            }</div>
<div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;        }</div>
<div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160;    }</div>
<div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;    <span class="keywordflow">return</span> recipe_entries;</div>
<div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;}</div>
<div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160; </div>
<div class="line"><a name="l10338"></a><span class="lineno"><a class="line" href="classitem.html#a18c14a07677f8ac9c197aefc2ee75bbb">10338</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> &amp;<a class="code" href="classitem.html#a18c14a07677f8ac9c197aefc2ee75bbb">item::get_random_material</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;    std::vector&lt;material_id&gt; matlist;</div>
<div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;    matlist.reserve( mats.size() );</div>
<div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> mat : mats ) {</div>
<div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;        matlist.emplace_back( mat.first );</div>
<div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;    }</div>
<div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( matlist, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">material_id::NULL_ID</a>() );</div>
<div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;}</div>
<div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160; </div>
<div class="line"><a name="l10349"></a><span class="lineno"><a class="line" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">10349</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> &amp;<a class="code" href="classitem.html#a773105801673bb74d69b3ca2dac471d6">item::get_base_material</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;    <span class="keyword">const</span> <a class="code" href="classmaterial__type.html">material_type</a> *m = &amp;<a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">material_id::NULL_ID</a>().<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;    <span class="keywordtype">int</span> portion = 0;</div>
<div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; mat : mats ) {</div>
<div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;        <span class="keywordflow">if</span>( mat.second &gt; portion ) {</div>
<div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;            portion = mat.second;</div>
<div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160;            m = &amp;mat.first.obj();</div>
<div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;        }</div>
<div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;    }</div>
<div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;    <span class="comment">// Material portions all equal / not specified. Select first material.</span></div>
<div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;    <span class="keywordflow">if</span>( portion == 1 ) {</div>
<div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a576cee4080644fddb7db250a669b3ac1">mat</a>.begin()-&gt;first.obj();</div>
<div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;        }</div>
<div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad08f77aa643e069f397747aeec45eb94">default_mat</a>;</div>
<div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;    }</div>
<div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;    <span class="keywordflow">return</span> *m;</div>
<div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;}</div>
<div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160; </div>
<div class="line"><a name="l10370"></a><span class="lineno"><a class="line" href="classitem.html#a9691e517a7bc100b0734bf6e89feb708">10370</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9691e517a7bc100b0734bf6e89feb708">item::operator&lt;</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;other )<span class="keyword"> const</span></div>
<div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem__category.html">item_category</a> &amp;cat_a = <a class="code" href="classitem.html#a7c9257f060bf53de49af433651eb9194">get_category_of_contents</a>();</div>
<div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem__category.html">item_category</a> &amp;cat_b = <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.get_category_of_contents();</div>
<div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;    <span class="keywordflow">if</span>( cat_a != cat_b ) {</div>
<div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;        <span class="keywordflow">return</span> cat_a &lt; cat_b;</div>
<div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160; </div>
<div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;        <span class="keywordflow">if</span>( this-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == other.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) {</div>
<div class="line"><a name="l10379"></a><span class="lineno">10379</span>&#160;            <span class="keywordflow">if</span>( this-&gt;<a class="code" href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">is_money</a>() ) {</div>
<div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;                <span class="keywordflow">return</span> this-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; other.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160;            }</div>
<div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;            <span class="keywordflow">return</span> this-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt; other.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160;            std::string n1 = this-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 );</div>
<div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;            std::string n2 = <a class="code" href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.type-&gt;nname( 1 );</div>
<div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="localized__comparator_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a>( n1, n2 );</div>
<div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;        }</div>
<div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160;    }</div>
<div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;}</div>
<div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160; </div>
<div class="line"><a name="l10391"></a><span class="lineno"><a class="line" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">10391</a></span>&#160;<a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">item::gun_skill</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10392"></a><span class="lineno">10392</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">skill_id::NULL_ID</a>();</div>
<div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;    }</div>
<div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;skill_used;</div>
<div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160;}</div>
<div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160; </div>
<div class="line"><a name="l10399"></a><span class="lineno"><a class="line" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">10399</a></span>&#160;<a class="code" href="classgun__type__type.html">gun_type_type</a> <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">item::gun_type</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160;    <span class="keyword">static</span> <a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="bonuses_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a>( <span class="stringliteral">&quot;archery&quot;</span> );</div>
<div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160; </div>
<div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classgun__type__type.html">gun_type_type</a>( std::string() );</div>
<div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160;    }</div>
<div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160;    <span class="comment">// TODO: move to JSON and remove extraction of this from &quot;GUN&quot; (via skill id)</span></div>
<div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;    <span class="comment">//and from &quot;GUNMOD&quot; (via &quot;mod_targets&quot;) in lang/extract_json_strings.py</span></div>
<div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>() == <a class="code" href="bonuses_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a> ) {</div>
<div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="item_8cpp.html#a609c386685fa395233e3f1765e57a38b">ammo_bolt</a> ) || <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a204277b3b0298457495ded9833c01151">itype_bullet_crossbow</a> ) {</div>
<div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classgun__type__type.html">gun_type_type</a>( <a class="code" href="translations_8h.html#a9e39a96618079002323c6e554271d3e2">translate_marker_context</a>( <span class="stringliteral">&quot;gun_type_type&quot;</span>, <span class="stringliteral">&quot;crossbow&quot;</span> ) );</div>
<div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classgun__type__type.html">gun_type_type</a>( <a class="code" href="translations_8h.html#a9e39a96618079002323c6e554271d3e2">translate_marker_context</a>( <span class="stringliteral">&quot;gun_type_type&quot;</span>, <span class="stringliteral">&quot;bow&quot;</span> ) );</div>
<div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160;        }</div>
<div class="line"><a name="l10414"></a><span class="lineno">10414</span>&#160;    }</div>
<div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classgun__type__type.html">gun_type_type</a>( <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>().str() );</div>
<div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;}</div>
<div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160; </div>
<div class="line"><a name="l10418"></a><span class="lineno"><a class="line" href="classitem.html#a634166a0674bcf69eb3874c7e7789344">10418</a></span>&#160;<a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="classitem.html#a634166a0674bcf69eb3874c7e7789344">item::melee_skill</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10419"></a><span class="lineno">10419</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10420"></a><span class="lineno">10420</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>() ) {</div>
<div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">skill_id::NULL_ID</a>();</div>
<div class="line"><a name="l10422"></a><span class="lineno">10422</span>&#160;    }</div>
<div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160; </div>
<div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;    <span class="keywordtype">int</span> hi = 0;</div>
<div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160;    <a class="code" href="classstring__id.html">skill_id</a> res = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">skill_id::NULL_ID</a>();</div>
<div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160; </div>
<div class="line"><a name="l10427"></a><span class="lineno">10427</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structdamage__type.html">damage_type</a> &amp;dt : <a class="code" href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a>() ) {</div>
<div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> val = <a class="code" href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">damage_melee</a>( dt.id );</div>
<div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160;        <span class="keywordflow">if</span>( val &gt; hi &amp;&amp; !dt.skill.is_null() ) {</div>
<div class="line"><a name="l10430"></a><span class="lineno">10430</span>&#160;            hi = val;</div>
<div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160;            res = dt.skill;</div>
<div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;        }</div>
<div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160;    }</div>
<div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160; </div>
<div class="line"><a name="l10435"></a><span class="lineno">10435</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;}</div>
<div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160; </div>
<div class="line"><a name="l10438"></a><span class="lineno"><a class="line" href="classitem.html#a4800c32ea052d36233db889257cc7867">10438</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a4800c32ea052d36233db889257cc7867">item::min_cycle_recoil</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;    }</div>
<div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;    <span class="keywordtype">int</span> to_cycle = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;min_cycle_recoil;</div>
<div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160;    <span class="comment">// This should only be used for one mod or it&#39;ll mess things up</span></div>
<div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;    <span class="comment">// TODO: maybe generalize this so you can have mods for hot loads or whatever</span></div>
<div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;        <span class="comment">// this value defaults to -1</span></div>
<div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overwrite_min_cycle_recoil &gt; 0 ) {</div>
<div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160;            to_cycle = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overwrite_min_cycle_recoil;</div>
<div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;        }</div>
<div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160;    }</div>
<div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;    <span class="keywordflow">return</span> to_cycle;</div>
<div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160;}</div>
<div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160; </div>
<div class="line"><a name="l10455"></a><span class="lineno"><a class="line" href="classitem.html#adfd6f9946d4895a6ef2190e07c2486a3">10455</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#adfd6f9946d4895a6ef2190e07c2486a3">item::gun_dispersion</a>( <span class="keywordtype">bool</span> with_ammo, <span class="keywordtype">bool</span> with_scaling )<span class="keyword"> const</span></div>
<div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160;    }</div>
<div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;    <span class="keywordtype">int</span> dispersion_sum = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;dispersion;</div>
<div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160;        dispersion_sum += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;dispersion;</div>
<div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;    }</div>
<div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;    <span class="keywordtype">int</span> dispPerDamage = get_option&lt; int &gt;( <span class="stringliteral">&quot;DISPERSION_PER_GUN_DAMAGE&quot;</span> );</div>
<div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160;    dispersion_sum += <a class="code" href="classitem.html#adb2689178dd21563b3536a3ed0e83336">damage_level</a>() * dispPerDamage;</div>
<div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;    dispersion_sum = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( dispersion_sum, 0 );</div>
<div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160;    <span class="keywordflow">if</span>( with_ammo &amp;&amp; <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ) {</div>
<div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;        dispersion_sum += <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;dispersion_considering_length( <a class="code" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">barrel_length</a>() );</div>
<div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;    }</div>
<div class="line"><a name="l10470"></a><span class="lineno">10470</span>&#160;    <span class="keywordflow">if</span>( !with_scaling ) {</div>
<div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160;        <span class="keywordflow">return</span> dispersion_sum;</div>
<div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160;    }</div>
<div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160; </div>
<div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160;    <span class="comment">// Dividing dispersion by 15 temporarily as a gross adjustment,</span></div>
<div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;    <span class="comment">// will bake that adjustment into individual gun definitions in the future.</span></div>
<div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;    <span class="comment">// Absolute minimum gun dispersion is 1.</span></div>
<div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;    <span class="keywordtype">double</span> divider = get_option&lt; float &gt;( <span class="stringliteral">&quot;GUN_DISPERSION_DIVIDER&quot;</span> );</div>
<div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;    dispersion_sum = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( dispersion_sum / divider ) ), 1 );</div>
<div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160; </div>
<div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160;    <span class="keywordflow">return</span> dispersion_sum;</div>
<div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;}</div>
<div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160; </div>
<div class="line"><a name="l10483"></a><span class="lineno"><a class="line" href="classitem.html#afb76ea7bd94d06815e5ab68b520b2a19">10483</a></span>&#160;std::pair&lt;int, int&gt; <a class="code" href="classitem.html#afb76ea7bd94d06815e5ab68b520b2a19">item::sight_dispersion</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;character )<span class="keyword"> const</span></div>
<div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;        <span class="keywordflow">return</span> std::make_pair( 0, 0 );</div>
<div class="line"><a name="l10487"></a><span class="lineno">10487</span>&#160;    }</div>
<div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;    <span class="keywordtype">int</span> act_disp = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3bd057608cf14b681c32b1cef61d7b3d">flag_DISABLE_SIGHTS</a> ) ? 300 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;sight_dispersion;</div>
<div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;    <span class="keywordtype">int</span> eff_disp = character.<a class="code" href="classCharacter.html#a83a17c46b5333661f44e797c26914189">effective_dispersion</a>( act_disp );</div>
<div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160; </div>
<div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;        <span class="keyword">const</span> <a class="code" href="structislot__gunmod.html">islot_gunmod</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = *e-&gt;type-&gt;gunmod;</div>
<div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160;        <span class="keywordtype">int</span> e_act_disp = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.sight_dispersion;</div>
<div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.sight_dispersion &lt; 0 || <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.field_of_view &lt;= 0 ) {</div>
<div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;        }</div>
<div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;        <span class="keywordtype">int</span> e_eff_disp = character.<a class="code" href="classCharacter.html#a83a17c46b5333661f44e797c26914189">effective_dispersion</a>( e_act_disp, e-&gt;has_flag( <a class="code" href="flag_8cpp.html#a5c4fceabb32d87b58efd54bf351e8249">flag_ZOOM</a> ) );</div>
<div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;        <span class="keywordflow">if</span>( eff_disp &gt; e_eff_disp ) {</div>
<div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;            eff_disp = e_eff_disp;</div>
<div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;            act_disp = e_act_disp;</div>
<div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160; </div>
<div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;        }</div>
<div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160;    }</div>
<div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;    <span class="keywordflow">return</span> std::make_pair( act_disp, eff_disp );</div>
<div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160;}</div>
<div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160; </div>
<div class="line"><a name="l10507"></a><span class="lineno"><a class="line" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">10507</a></span>&#160;<a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">item::gun_damage</a>( <span class="keywordtype">bool</span> with_ammo, <span class="keywordtype">bool</span> shot )<span class="keyword"> const</span></div>
<div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdamage__instance.html">damage_instance</a>();</div>
<div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;    }</div>
<div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160; </div>
<div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::length</a> bl = <a class="code" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">barrel_length</a>();</div>
<div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160;    <a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;damage.di_considering_length( bl );</div>
<div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160; </div>
<div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;damage.di_considering_length( bl ) );</div>
<div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;    }</div>
<div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160; </div>
<div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;    <span class="keywordflow">if</span>( with_ammo &amp;&amp; <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ) {</div>
<div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160;        <span class="keywordflow">if</span>( shot ) {</div>
<div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;ammo-&gt;shot_damage.di_considering_length( bl ) );</div>
<div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;ammo-&gt;damage.di_considering_length( bl ) );</div>
<div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160;        }</div>
<div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;    }</div>
<div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160; </div>
<div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;        <span class="comment">// TODO: This isn&#39;t a good solution for multi-damage guns/ammos</span></div>
<div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du : <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ) {</div>
<div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160;            <span class="keywordflow">if</span>( du.amount &lt;= 1.0 ) {</div>
<div class="line"><a name="l10532"></a><span class="lineno">10532</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160;            }</div>
<div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;            du.amount = std::max&lt;float&gt;( 1.0f, <a class="code" href="classitem.html#a146815219eb98e0016eb0b006b0d4812">damage_adjusted_gun_damage</a>( du.amount ) );</div>
<div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;        }</div>
<div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;    }</div>
<div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160; </div>
<div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;}</div>
<div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160; </div>
<div class="line"><a name="l10541"></a><span class="lineno"><a class="line" href="classitem.html#a57816b5484f243b4f0138faf7a2b065c">10541</a></span>&#160;<a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">item::gun_damage</a>( <a class="code" href="classstring__id.html">itype_id</a> ammo )<span class="keyword"> const</span></div>
<div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdamage__instance.html">damage_instance</a>();</div>
<div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;    }</div>
<div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160; </div>
<div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::length</a> bl = <a class="code" href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">barrel_length</a>();</div>
<div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;    <a class="code" href="structdamage__instance.html">damage_instance</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;damage.di_considering_length( bl );</div>
<div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160; </div>
<div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;damage.di_considering_length( bl ) );</div>
<div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;    }</div>
<div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160; </div>
<div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.add( ammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;damage.di_considering_length( bl ) );</div>
<div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160; </div>
<div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt; 0 ) {</div>
<div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;        <span class="comment">// TODO: This isn&#39;t a good solution for multi-damage guns/ammos</span></div>
<div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structdamage__unit.html">damage_unit</a> &amp;du : <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ) {</div>
<div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160;            <span class="keywordflow">if</span>( du.amount &lt;= 1.0 ) {</div>
<div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;            }</div>
<div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;            du.amount = std::max&lt;float&gt;( 1.0f, <a class="code" href="classitem.html#a146815219eb98e0016eb0b006b0d4812">damage_adjusted_gun_damage</a>( du.amount ) );</div>
<div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;        }</div>
<div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;    }</div>
<div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160; </div>
<div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;}</div>
<div class="line"><a name="l10568"></a><span class="lineno"><a class="line" href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">10568</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">item::gun_base_weight</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::mass</a> base_weight = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">weight</a>;</div>
<div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;mod-&gt;ammo_modifier.empty() ) {</div>
<div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;            base_weight += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;integral_weight;</div>
<div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;        }</div>
<div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;    }</div>
<div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;    <span class="keywordflow">return</span> base_weight;</div>
<div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160; </div>
<div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160;}</div>
<div class="line"><a name="l10579"></a><span class="lineno"><a class="line" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">10579</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">item::gun_recoil</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p, <span class="keywordtype">bool</span> bipod, <span class="keywordtype">bool</span> ideal_strength )<span class="keyword"> const</span></div>
<div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || ( <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() &amp;&amp; !<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) ) {</div>
<div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;    }</div>
<div class="line"><a name="l10584"></a><span class="lineno">10584</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l10585"></a><span class="lineno">10585</span>&#160;<span class="comment">    ///\ARM_STR improves the handling of heavier weapons</span></div>
<div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;<span class="comment"></span>    <span class="comment">// we consider only base weight to avoid exploits</span></div>
<div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;    <span class="comment">// now we need to add weight of receiver</span></div>
<div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160;    <span class="keywordtype">double</span> wt = ideal_strength ? <a class="code" href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">gun_base_weight</a>() / 333.0_gram : <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">gun_base_weight</a>(),</div>
<div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;                p.<a class="code" href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">get_arm_str</a>() * 333_gram ) / 333.0_gram;</div>
<div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160; </div>
<div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;    <span class="keywordtype">double</span> handling = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;handling;</div>
<div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;        <span class="keywordflow">if</span>( bipod || !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#afd2f01270d78e47d439c7c4a44c5d1a6">flag_BIPOD</a> ) ) {</div>
<div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;            handling += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;handling;</div>
<div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;        }</div>
<div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;    }</div>
<div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160; </div>
<div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160;    <span class="comment">// rescale from JSON units which are intentionally specified as integral values</span></div>
<div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;    handling /= 10;</div>
<div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160; </div>
<div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;    <span class="comment">// algorithm is biased so heavier weapons benefit more from improved handling</span></div>
<div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;    handling = std::pow( wt, 0.8 ) * std::pow( handling, 1.2 );</div>
<div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160; </div>
<div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;    <span class="keywordtype">int</span> qty = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;recoil;</div>
<div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ) {</div>
<div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;        qty += <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;recoil;</div>
<div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;    }</div>
<div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160; </div>
<div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;    <span class="comment">// handling could be either a bonus or penalty dependent upon installed mods</span></div>
<div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;    <span class="keywordflow">if</span>( handling &gt; 1.0 ) {</div>
<div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;        <span class="keywordflow">return</span> qty / handling;</div>
<div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;        <span class="keywordflow">return</span> qty * ( 1.0 + <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( handling ) );</div>
<div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160;    }</div>
<div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;}</div>
<div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160; </div>
<div class="line"><a name="l10617"></a><span class="lineno"><a class="line" href="classitem.html#a5c06a880dbc40c5861201cbaae477996">10617</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a5c06a880dbc40c5861201cbaae477996">item::gun_shot_spread_multiplier</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;    }</div>
<div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 1.0f;</div>
<div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;shot_spread_multiplier_modifier;</div>
<div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;    }</div>
<div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, 0.0f );</div>
<div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;}</div>
<div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160; </div>
<div class="line"><a name="l10629"></a><span class="lineno"><a class="line" href="classitem.html#a3ddc87ae8a8c4afc09f1cb1b4a7d6d10">10629</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">item::gun_range</a>( <span class="keywordtype">bool</span> with_ammo )<span class="keyword"> const</span></div>
<div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160;    }</div>
<div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;range;</div>
<div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;    <span class="keywordtype">float</span> range_multiplier = 1.0;</div>
<div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;range;</div>
<div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;        range_multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;range_multiplier;</div>
<div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;    }</div>
<div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;    <span class="keywordflow">if</span>( with_ammo &amp;&amp; <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ) {</div>
<div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;range;</div>
<div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;        range_multiplier *= <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;range_multiplier;</div>
<div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;    }</div>
<div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> *= range_multiplier;</div>
<div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> ), <a class="code" href="game__constants_8h.html#a9a0de4360143c33059120b35030853cf">RANGE_HARD_CAP</a> );</div>
<div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160;}</div>
<div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160; </div>
<div class="line"><a name="l10648"></a><span class="lineno"><a class="line" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">10648</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">item::gun_range</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *p )<span class="keyword"> const</span></div>
<div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">gun_range</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;    <span class="keywordflow">if</span>( p == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;    }</div>
<div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#afca93d0bd4fe00f5c087d4040cbf98ae">meets_requirements</a>( *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;    }</div>
<div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160; </div>
<div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160;    <span class="comment">// Reduce bow range until player has twice minimum required strength</span></div>
<div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1002f0b9b5b8f824ef9543ca6069271d">flag_STR_DRAW</a> ) ) {</div>
<div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, ( p-&gt;<a class="code" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() - <a class="code" href="classitem.html#a2899a37f781e1efea9465a98277141c7">get_min_str</a>() ) * 0.5 );</div>
<div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160;    }</div>
<div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160; </div>
<div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = p-&gt;<a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a01036ddcc971d02f6c32c3da31a119f2">enchant_vals::mod::RANGE</a>, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160; </div>
<div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;}</div>
<div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160; </div>
<div class="line"><a name="l10668"></a><span class="lineno"><a class="line" href="classitem.html#a31950d1e38829eb4c5794ffbe4e7d604">10668</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a31950d1e38829eb4c5794ffbe4e7d604">item::shots_remaining</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier )<span class="keyword"> const</span></div>
<div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 1000; <span class="comment">// Arbitrary large number for things that do not require ammo.</span></div>
<div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() ) {</div>
<div class="line"><a name="l10672"></a><span class="lineno">10672</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( carrier, <span class="keyword">true</span> ) / <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;    }</div>
<div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>() &gt; 0_kJ ) {</div>
<div class="line"><a name="l10675"></a><span class="lineno">10675</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">energy_remaining</a>( carrier ) / <a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>() ), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160;    }</div>
<div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160;}</div>
<div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160; </div>
<div class="line"><a name="l10680"></a><span class="lineno"><a class="line" href="classitem.html#a3d5c5afe47153a131d6e3195c82481a6">10680</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a>( <span class="keyword">const</span> std::set&lt;ammotype&gt; &amp;ammo, <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier,</div>
<div class="line"><a name="l10681"></a><span class="lineno">10681</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">bool</span> include_linked )<span class="keyword"> const</span></div>
<div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0;</div>
<div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160; </div>
<div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;    <span class="comment">// Magazine in the item</span></div>
<div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;    <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += mag-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l10689"></a><span class="lineno">10689</span>&#160;    }</div>
<div class="line"><a name="l10690"></a><span class="lineno">10690</span>&#160; </div>
<div class="line"><a name="l10691"></a><span class="lineno">10691</span>&#160;    <span class="comment">// Cable connections</span></div>
<div class="line"><a name="l10692"></a><span class="lineno">10692</span>&#160;    <span class="keywordflow">if</span>( include_linked &amp;&amp; <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>() &gt;= 0 &amp;&amp; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency &gt;= <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ) {</div>
<div class="line"><a name="l10693"></a><span class="lineno">10693</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh ) {</div>
<div class="line"><a name="l10694"></a><span class="lineno">10694</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>-&gt;<a class="code" href="classvehicle.html#a74a0e5a1d331e2d47d0147f7924a7a20">connected_battery_power_level</a>().first;</div>
<div class="line"><a name="l10695"></a><span class="lineno">10695</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10696"></a><span class="lineno">10696</span>&#160;            <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos );</div>
<div class="line"><a name="l10697"></a><span class="lineno">10697</span>&#160;            <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l10698"></a><span class="lineno">10698</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += vp-&gt;vehicle().connected_battery_power_level().first;</div>
<div class="line"><a name="l10699"></a><span class="lineno">10699</span>&#160;            }</div>
<div class="line"><a name="l10700"></a><span class="lineno">10700</span>&#160;        }</div>
<div class="line"><a name="l10701"></a><span class="lineno">10701</span>&#160;    }</div>
<div class="line"><a name="l10702"></a><span class="lineno">10702</span>&#160; </div>
<div class="line"><a name="l10703"></a><span class="lineno">10703</span>&#160;    <span class="comment">// Non ammo using item that uses charges</span></div>
<div class="line"><a name="l10704"></a><span class="lineno">10704</span>&#160;    <span class="keywordflow">if</span>( ammo.empty() ) {</div>
<div class="line"><a name="l10705"></a><span class="lineno">10705</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l10706"></a><span class="lineno">10706</span>&#160;    }</div>
<div class="line"><a name="l10707"></a><span class="lineno">10707</span>&#160; </div>
<div class="line"><a name="l10708"></a><span class="lineno">10708</span>&#160;    <span class="comment">// Magazines and integral magazines on their own</span></div>
<div class="line"><a name="l10709"></a><span class="lineno">10709</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l10710"></a><span class="lineno">10710</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l10711"></a><span class="lineno">10711</span>&#160;            <span class="keywordflow">if</span>( e-&gt;is_ammo() ) {</div>
<div class="line"><a name="l10712"></a><span class="lineno">10712</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += e-&gt;charges;</div>
<div class="line"><a name="l10713"></a><span class="lineno">10713</span>&#160;            }</div>
<div class="line"><a name="l10714"></a><span class="lineno">10714</span>&#160;        }</div>
<div class="line"><a name="l10715"></a><span class="lineno">10715</span>&#160;    }</div>
<div class="line"><a name="l10716"></a><span class="lineno">10716</span>&#160; </div>
<div class="line"><a name="l10717"></a><span class="lineno">10717</span>&#160;    <span class="comment">// Handle non-magazines with ammo_restriction in a CONTAINER type pocket (like quivers)</span></div>
<div class="line"><a name="l10718"></a><span class="lineno">10718</span>&#160;    <span class="keywordflow">if</span>( !( mag || <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() || ammo.empty() ) ) {</div>
<div class="line"><a name="l10719"></a><span class="lineno">10719</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l10720"></a><span class="lineno">10720</span>&#160;            <span class="keywordflow">if</span>( e-&gt;is_ammo() &amp;&amp; ammo.find( e-&gt;ammo_type() ) != ammo.end() ) {</div>
<div class="line"><a name="l10721"></a><span class="lineno">10721</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += e-&gt;charges;</div>
<div class="line"><a name="l10722"></a><span class="lineno">10722</span>&#160;            }</div>
<div class="line"><a name="l10723"></a><span class="lineno">10723</span>&#160;        }</div>
<div class="line"><a name="l10724"></a><span class="lineno">10724</span>&#160;    }</div>
<div class="line"><a name="l10725"></a><span class="lineno">10725</span>&#160; </div>
<div class="line"><a name="l10726"></a><span class="lineno">10726</span>&#160;    <span class="comment">// UPS/bionic power can replace ammo requirement.</span></div>
<div class="line"><a name="l10727"></a><span class="lineno">10727</span>&#160;    <span class="comment">// Only for tools. Guns should always use energy_drain for electricity use.</span></div>
<div class="line"><a name="l10728"></a><span class="lineno">10728</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> ) {</div>
<div class="line"><a name="l10729"></a><span class="lineno">10729</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l10730"></a><span class="lineno">10730</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( carrier-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() );</div>
<div class="line"><a name="l10731"></a><span class="lineno">10731</span>&#160;        }</div>
<div class="line"><a name="l10732"></a><span class="lineno">10732</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l10733"></a><span class="lineno">10733</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( carrier-&gt;<a class="code" href="classCharacter.html#a581c2e6646bc18796f26d3c18e38120a">available_ups</a>() );</div>
<div class="line"><a name="l10734"></a><span class="lineno">10734</span>&#160;        }</div>
<div class="line"><a name="l10735"></a><span class="lineno">10735</span>&#160;    }</div>
<div class="line"><a name="l10736"></a><span class="lineno">10736</span>&#160; </div>
<div class="line"><a name="l10737"></a><span class="lineno">10737</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10738"></a><span class="lineno">10738</span>&#160;}</div>
<div class="line"><a name="l10739"></a><span class="lineno"><a class="line" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">10739</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <span class="keywordtype">bool</span> include_linked )<span class="keyword"> const</span></div>
<div class="line"><a name="l10740"></a><span class="lineno">10740</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10741"></a><span class="lineno">10741</span>&#160;    std::set&lt;ammotype&gt; ammo = <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>();</div>
<div class="line"><a name="l10742"></a><span class="lineno">10742</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( ammo, carrier, include_linked );</div>
<div class="line"><a name="l10743"></a><span class="lineno">10743</span>&#160;}</div>
<div class="line"><a name="l10744"></a><span class="lineno">10744</span>&#160; </div>
<div class="line"><a name="l10745"></a><span class="lineno"><a class="line" href="classitem.html#a1d90c65bde098d13200d7c747df42a2e">10745</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> include_linked )<span class="keyword"> const</span></div>
<div class="line"><a name="l10746"></a><span class="lineno">10746</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10747"></a><span class="lineno">10747</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( <span class="keyword">nullptr</span>, include_linked );</div>
<div class="line"><a name="l10748"></a><span class="lineno">10748</span>&#160;}</div>
<div class="line"><a name="l10749"></a><span class="lineno">10749</span>&#160; </div>
<div class="line"><a name="l10750"></a><span class="lineno"><a class="line" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">10750</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">item::energy_remaining</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier )<span class="keyword"> const</span></div>
<div class="line"><a name="l10751"></a><span class="lineno">10751</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10752"></a><span class="lineno">10752</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0_kJ;</div>
<div class="line"><a name="l10753"></a><span class="lineno">10753</span>&#160; </div>
<div class="line"><a name="l10754"></a><span class="lineno">10754</span>&#160;    <span class="comment">// Future energy based batteries</span></div>
<div class="line"><a name="l10755"></a><span class="lineno">10755</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">is_vehicle_battery</a>() ) {</div>
<div class="line"><a name="l10756"></a><span class="lineno">10756</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a>;</div>
<div class="line"><a name="l10757"></a><span class="lineno">10757</span>&#160;    }</div>
<div class="line"><a name="l10758"></a><span class="lineno">10758</span>&#160; </div>
<div class="line"><a name="l10759"></a><span class="lineno">10759</span>&#160;    <span class="comment">// Magazine in the item</span></div>
<div class="line"><a name="l10760"></a><span class="lineno">10760</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l10761"></a><span class="lineno">10761</span>&#160;    <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l10762"></a><span class="lineno">10762</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += mag-&gt;<a class="code" href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">energy_remaining</a>( carrier );</div>
<div class="line"><a name="l10763"></a><span class="lineno">10763</span>&#160;    }</div>
<div class="line"><a name="l10764"></a><span class="lineno">10764</span>&#160; </div>
<div class="line"><a name="l10765"></a><span class="lineno">10765</span>&#160;    <span class="comment">// Power from bionic</span></div>
<div class="line"><a name="l10766"></a><span class="lineno">10766</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l10767"></a><span class="lineno">10767</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += carrier-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>();</div>
<div class="line"><a name="l10768"></a><span class="lineno">10768</span>&#160;    }</div>
<div class="line"><a name="l10769"></a><span class="lineno">10769</span>&#160; </div>
<div class="line"><a name="l10770"></a><span class="lineno">10770</span>&#160;    <span class="comment">// Extra power from UPS</span></div>
<div class="line"><a name="l10771"></a><span class="lineno">10771</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l10772"></a><span class="lineno">10772</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += carrier-&gt;<a class="code" href="classCharacter.html#a581c2e6646bc18796f26d3c18e38120a">available_ups</a>();</div>
<div class="line"><a name="l10773"></a><span class="lineno">10773</span>&#160;    }</div>
<div class="line"><a name="l10774"></a><span class="lineno">10774</span>&#160; </div>
<div class="line"><a name="l10775"></a><span class="lineno">10775</span>&#160;    <span class="comment">// Battery(ammo) contained within</span></div>
<div class="line"><a name="l10776"></a><span class="lineno">10776</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l10777"></a><span class="lineno">10777</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l10778"></a><span class="lineno">10778</span>&#160;            <span class="keywordflow">if</span>( e-&gt;typeId() == <a class="code" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) {</div>
<div class="line"><a name="l10779"></a><span class="lineno">10779</span>&#160;                <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( e-&gt;charges ) );</div>
<div class="line"><a name="l10780"></a><span class="lineno">10780</span>&#160;            }</div>
<div class="line"><a name="l10781"></a><span class="lineno">10781</span>&#160;        }</div>
<div class="line"><a name="l10782"></a><span class="lineno">10782</span>&#160;    }</div>
<div class="line"><a name="l10783"></a><span class="lineno">10783</span>&#160; </div>
<div class="line"><a name="l10784"></a><span class="lineno">10784</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l10785"></a><span class="lineno">10785</span>&#160;}</div>
<div class="line"><a name="l10786"></a><span class="lineno">10786</span>&#160; </div>
<div class="line"><a name="l10787"></a><span class="lineno"><a class="line" href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">10787</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">item::remaining_ammo_capacity</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10788"></a><span class="lineno">10788</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10789"></a><span class="lineno">10789</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l10790"></a><span class="lineno">10790</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10791"></a><span class="lineno">10791</span>&#160;    }</div>
<div class="line"><a name="l10792"></a><span class="lineno">10792</span>&#160; </div>
<div class="line"><a name="l10793"></a><span class="lineno">10793</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> = <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l10794"></a><span class="lineno">10794</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l10795"></a><span class="lineno">10795</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>() )-&gt;ammo-&gt;type ) - <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l10796"></a><span class="lineno">10796</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10797"></a><span class="lineno">10797</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a>-&gt;ammo-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) - <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l10798"></a><span class="lineno">10798</span>&#160;    }</div>
<div class="line"><a name="l10799"></a><span class="lineno">10799</span>&#160;}</div>
<div class="line"><a name="l10800"></a><span class="lineno">10800</span>&#160; </div>
<div class="line"><a name="l10801"></a><span class="lineno"><a class="line" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">10801</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;ammo, <span class="keywordtype">bool</span> include_linked )<span class="keyword"> const</span></div>
<div class="line"><a name="l10802"></a><span class="lineno">10802</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10803"></a><span class="lineno">10803</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l10804"></a><span class="lineno">10804</span>&#160;    <span class="keywordflow">if</span>( include_linked &amp;&amp; <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l10805"></a><span class="lineno">10805</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a> ? <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>-&gt;<a class="code" href="classvehicle.html#a74a0e5a1d331e2d47d0147f7924a7a20">connected_battery_power_level</a>().second : 0;</div>
<div class="line"><a name="l10806"></a><span class="lineno">10806</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l10807"></a><span class="lineno">10807</span>&#160;        <span class="keywordflow">return</span> mag-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( ammo );</div>
<div class="line"><a name="l10808"></a><span class="lineno">10808</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l10809"></a><span class="lineno">10809</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().get_max_power_level() );</div>
<div class="line"><a name="l10810"></a><span class="lineno">10810</span>&#160;    }</div>
<div class="line"><a name="l10811"></a><span class="lineno">10811</span>&#160; </div>
<div class="line"><a name="l10812"></a><span class="lineno">10812</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l10813"></a><span class="lineno">10813</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#acf4be8b27d98d585a113deb277479881">ammo_capacity</a>( ammo );</div>
<div class="line"><a name="l10814"></a><span class="lineno">10814</span>&#160;    }</div>
<div class="line"><a name="l10815"></a><span class="lineno">10815</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l10816"></a><span class="lineno">10816</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;capacity;</div>
<div class="line"><a name="l10817"></a><span class="lineno">10817</span>&#160;    }</div>
<div class="line"><a name="l10818"></a><span class="lineno">10818</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10819"></a><span class="lineno">10819</span>&#160;}</div>
<div class="line"><a name="l10820"></a><span class="lineno">10820</span>&#160; </div>
<div class="line"><a name="l10821"></a><span class="lineno"><a class="line" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">10821</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10822"></a><span class="lineno">10822</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10823"></a><span class="lineno">10823</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l10824"></a><span class="lineno">10824</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo.empty() ) {</div>
<div class="line"><a name="l10825"></a><span class="lineno">10825</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10826"></a><span class="lineno">10826</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10827"></a><span class="lineno">10827</span>&#160;            <span class="keywordtype">int</span> modifier = 0;</div>
<div class="line"><a name="l10828"></a><span class="lineno">10828</span>&#160;            <span class="keywordtype">float</span> multiplier = 1.0f;</div>
<div class="line"><a name="l10829"></a><span class="lineno">10829</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l10830"></a><span class="lineno">10830</span>&#160;                modifier += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;ammo_to_fire_modifier;</div>
<div class="line"><a name="l10831"></a><span class="lineno">10831</span>&#160;                multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;ammo_to_fire_multiplier;</div>
<div class="line"><a name="l10832"></a><span class="lineno">10832</span>&#160;            }</div>
<div class="line"><a name="l10833"></a><span class="lineno">10833</span>&#160;            <span class="keywordflow">return</span> ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo_to_fire * multiplier ) + modifier;</div>
<div class="line"><a name="l10834"></a><span class="lineno">10834</span>&#160;        }</div>
<div class="line"><a name="l10835"></a><span class="lineno">10835</span>&#160;    }</div>
<div class="line"><a name="l10836"></a><span class="lineno">10836</span>&#160; </div>
<div class="line"><a name="l10837"></a><span class="lineno">10837</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>();</div>
<div class="line"><a name="l10838"></a><span class="lineno">10838</span>&#160;}</div>
<div class="line"><a name="l10839"></a><span class="lineno">10839</span>&#160; </div>
<div class="line"><a name="l10840"></a><span class="lineno"><a class="line" href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">10840</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">item::first_ammo</a>()</div>
<div class="line"><a name="l10841"></a><span class="lineno">10841</span>&#160;{</div>
<div class="line"><a name="l10842"></a><span class="lineno">10842</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>();</div>
<div class="line"><a name="l10843"></a><span class="lineno">10843</span>&#160;}</div>
<div class="line"><a name="l10844"></a><span class="lineno">10844</span>&#160; </div>
<div class="line"><a name="l10845"></a><span class="lineno"><a class="line" href="classitem.html#a3cd2559a4ea79e8e9a7df0848a40a00a">10845</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">item::first_ammo</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10846"></a><span class="lineno">10846</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10847"></a><span class="lineno">10847</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>();</div>
<div class="line"><a name="l10848"></a><span class="lineno">10848</span>&#160;}</div>
<div class="line"><a name="l10849"></a><span class="lineno">10849</span>&#160; </div>
<div class="line"><a name="l10850"></a><span class="lineno"><a class="line" href="classitem.html#a9be916871dac0d5b147c339efe4de194">10850</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9be916871dac0d5b147c339efe4de194">item::handle_liquid_or_spill</a>( <a class="code" href="classCharacter.html">Character</a> &amp;guy, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *avoid )</div>
<div class="line"><a name="l10851"></a><span class="lineno">10851</span>&#160;{</div>
<div class="line"><a name="l10852"></a><span class="lineno">10852</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a4cc534d85d175801dbae59ce49d115be">handle_liquid_or_spill</a>( guy, avoid );</div>
<div class="line"><a name="l10853"></a><span class="lineno">10853</span>&#160;}</div>
<div class="line"><a name="l10854"></a><span class="lineno">10854</span>&#160; </div>
<div class="line"><a name="l10855"></a><span class="lineno"><a class="line" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">10855</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keywordtype">int</span> qty )<span class="keyword"> const</span></div>
<div class="line"><a name="l10856"></a><span class="lineno">10856</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10857"></a><span class="lineno">10857</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l10858"></a><span class="lineno">10858</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( carrier, <span class="keyword">true</span> ) &gt;= qty;</div>
<div class="line"><a name="l10859"></a><span class="lineno">10859</span>&#160;    }</div>
<div class="line"><a name="l10860"></a><span class="lineno">10860</span>&#160; </div>
<div class="line"><a name="l10861"></a><span class="lineno">10861</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l10862"></a><span class="lineno">10862</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10863"></a><span class="lineno">10863</span>&#160;    }</div>
<div class="line"><a name="l10864"></a><span class="lineno">10864</span>&#160; </div>
<div class="line"><a name="l10865"></a><span class="lineno">10865</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a31950d1e38829eb4c5794ffbe4e7d604">shots_remaining</a>( carrier ) &gt;= qty;</div>
<div class="line"><a name="l10866"></a><span class="lineno">10866</span>&#160;}</div>
<div class="line"><a name="l10867"></a><span class="lineno">10867</span>&#160; </div>
<div class="line"><a name="l10868"></a><span class="lineno"><a class="line" href="classitem.html#a91b5621ac5f112098a93f83bf9919a72">10868</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> std::string &amp;method, <span class="keywordtype">int</span> qty )<span class="keyword"> const</span></div>
<div class="line"><a name="l10869"></a><span class="lineno">10869</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10870"></a><span class="lineno">10870</span>&#160;    <span class="keyword">auto</span> iter = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.find( method );</div>
<div class="line"><a name="l10871"></a><span class="lineno">10871</span>&#160;    <span class="keywordflow">if</span>( iter != <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ac08f9344750006c6cb10d104b6611977">ammo_scale</a>.end() ) {</div>
<div class="line"><a name="l10872"></a><span class="lineno">10872</span>&#160;        qty *= iter-&gt;second;</div>
<div class="line"><a name="l10873"></a><span class="lineno">10873</span>&#160;    }</div>
<div class="line"><a name="l10874"></a><span class="lineno">10874</span>&#160; </div>
<div class="line"><a name="l10875"></a><span class="lineno">10875</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( carrier, qty );</div>
<div class="line"><a name="l10876"></a><span class="lineno">10876</span>&#160;}</div>
<div class="line"><a name="l10877"></a><span class="lineno">10877</span>&#160; </div>
<div class="line"><a name="l10878"></a><span class="lineno"><a class="line" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">10878</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a>( <span class="keywordtype">int</span> qty, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l10879"></a><span class="lineno">10879</span>&#160;{</div>
<div class="line"><a name="l10880"></a><span class="lineno">10880</span>&#160;    <span class="keywordflow">if</span>( qty &lt; 0 ) {</div>
<div class="line"><a name="l10881"></a><span class="lineno">10881</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Cannot consume negative quantity of ammo for %s&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l10882"></a><span class="lineno">10882</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l10883"></a><span class="lineno">10883</span>&#160;    }</div>
<div class="line"><a name="l10884"></a><span class="lineno">10884</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> wanted_qty = qty;</div>
<div class="line"><a name="l10885"></a><span class="lineno">10885</span>&#160; </div>
<div class="line"><a name="l10886"></a><span class="lineno">10886</span>&#160;    <span class="comment">// Consume power from appliances/vehicles connected with cables</span></div>
<div class="line"><a name="l10887"></a><span class="lineno">10887</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l10888"></a><span class="lineno">10888</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh &amp;&amp; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency &gt;= <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ) {</div>
<div class="line"><a name="l10889"></a><span class="lineno">10889</span>&#160;            qty = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>-&gt;<a class="code" href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">discharge_battery</a>( qty, <span class="keyword">true</span> );</div>
<div class="line"><a name="l10890"></a><span class="lineno">10890</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l10891"></a><span class="lineno">10891</span>&#160;            <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos );</div>
<div class="line"><a name="l10892"></a><span class="lineno">10892</span>&#160;            <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l10893"></a><span class="lineno">10893</span>&#160;                qty = vp-&gt;vehicle().discharge_battery( qty, <span class="keyword">true</span> );</div>
<div class="line"><a name="l10894"></a><span class="lineno">10894</span>&#160;            }</div>
<div class="line"><a name="l10895"></a><span class="lineno">10895</span>&#160;        }</div>
<div class="line"><a name="l10896"></a><span class="lineno">10896</span>&#160;    }</div>
<div class="line"><a name="l10897"></a><span class="lineno">10897</span>&#160; </div>
<div class="line"><a name="l10898"></a><span class="lineno">10898</span>&#160;    <span class="comment">// Consume charges loaded in the item or its magazines</span></div>
<div class="line"><a name="l10899"></a><span class="lineno">10899</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() || <a class="code" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">uses_magazine</a>() ) {</div>
<div class="line"><a name="l10900"></a><span class="lineno">10900</span>&#160;        qty -= <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac8076cdbfa6169f6367a9c1d52d8e9b9">ammo_consume</a>( qty, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l10901"></a><span class="lineno">10901</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) == 0 &amp;&amp; carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l10902"></a><span class="lineno">10902</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">invalidate_weight_carried_cache</a>();</div>
<div class="line"><a name="l10903"></a><span class="lineno">10903</span>&#160;        }</div>
<div class="line"><a name="l10904"></a><span class="lineno">10904</span>&#160;    }</div>
<div class="line"><a name="l10905"></a><span class="lineno">10905</span>&#160; </div>
<div class="line"><a name="l10906"></a><span class="lineno">10906</span>&#160;    <span class="comment">// Dirty fix: activating a container of meds leads here, and used to use up all of the charges.</span></div>
<div class="line"><a name="l10907"></a><span class="lineno">10907</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">is_medication</a>() &amp;&amp; <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 1 ) {</div>
<div class="line"><a name="l10908"></a><span class="lineno">10908</span>&#160;        <span class="keywordtype">int</span> charg_used = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, qty );</div>
<div class="line"><a name="l10909"></a><span class="lineno">10909</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= charg_used;</div>
<div class="line"><a name="l10910"></a><span class="lineno">10910</span>&#160;        qty -= charg_used;</div>
<div class="line"><a name="l10911"></a><span class="lineno">10911</span>&#160;    }</div>
<div class="line"><a name="l10912"></a><span class="lineno">10912</span>&#160; </div>
<div class="line"><a name="l10913"></a><span class="lineno">10913</span>&#160;    <span class="comment">// Some weird internal non-item charges (used by grenades)</span></div>
<div class="line"><a name="l10914"></a><span class="lineno">10914</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;ammo_id.empty() ) {</div>
<div class="line"><a name="l10915"></a><span class="lineno">10915</span>&#160;        <span class="keywordtype">int</span> charg_used = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, qty );</div>
<div class="line"><a name="l10916"></a><span class="lineno">10916</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= charg_used;</div>
<div class="line"><a name="l10917"></a><span class="lineno">10917</span>&#160;        qty -= charg_used;</div>
<div class="line"><a name="l10918"></a><span class="lineno">10918</span>&#160;    }</div>
<div class="line"><a name="l10919"></a><span class="lineno">10919</span>&#160; </div>
<div class="line"><a name="l10920"></a><span class="lineno">10920</span>&#160;    <span class="comment">// Modded tools can consume UPS/bionic energy instead of ammo.</span></div>
<div class="line"><a name="l10921"></a><span class="lineno">10921</span>&#160;    <span class="comment">// Guns handle energy in energy_consume()</span></div>
<div class="line"><a name="l10922"></a><span class="lineno">10922</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp;</div>
<div class="line"><a name="l10923"></a><span class="lineno">10923</span>&#160;        ( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) ) {</div>
<div class="line"><a name="l10924"></a><span class="lineno">10924</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::energy</a> wanted_energy = <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( qty ) );</div>
<div class="line"><a name="l10925"></a><span class="lineno">10925</span>&#160; </div>
<div class="line"><a name="l10926"></a><span class="lineno">10926</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l10927"></a><span class="lineno">10927</span>&#160;            wanted_energy -= carrier-&gt;<a class="code" href="classCharacter.html#a32d3883998c51586c2617ee82bb9ffac">consume_ups</a>( wanted_energy );</div>
<div class="line"><a name="l10928"></a><span class="lineno">10928</span>&#160;        }</div>
<div class="line"><a name="l10929"></a><span class="lineno">10929</span>&#160; </div>
<div class="line"><a name="l10930"></a><span class="lineno">10930</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l10931"></a><span class="lineno">10931</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::energy</a> bio_used = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( carrier-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>(), wanted_energy );</div>
<div class="line"><a name="l10932"></a><span class="lineno">10932</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -bio_used );</div>
<div class="line"><a name="l10933"></a><span class="lineno">10933</span>&#160;            wanted_energy -= bio_used;</div>
<div class="line"><a name="l10934"></a><span class="lineno">10934</span>&#160;        }</div>
<div class="line"><a name="l10935"></a><span class="lineno">10935</span>&#160; </div>
<div class="line"><a name="l10936"></a><span class="lineno">10936</span>&#160;        <span class="comment">// It is possible for this to cause rounding error due to different precision of energy</span></div>
<div class="line"><a name="l10937"></a><span class="lineno">10937</span>&#160;        <span class="comment">// But that can happen only if there was not enough ammo and you shouldn&#39;t be able to use without sufficient ammo</span></div>
<div class="line"><a name="l10938"></a><span class="lineno">10938</span>&#160;        qty = <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( wanted_energy );</div>
<div class="line"><a name="l10939"></a><span class="lineno">10939</span>&#160;    }</div>
<div class="line"><a name="l10940"></a><span class="lineno">10940</span>&#160;    <span class="keywordflow">return</span> wanted_qty - qty;</div>
<div class="line"><a name="l10941"></a><span class="lineno">10941</span>&#160;}</div>
<div class="line"><a name="l10942"></a><span class="lineno">10942</span>&#160; </div>
<div class="line"><a name="l10943"></a><span class="lineno"><a class="line" href="classitem.html#a8204afe3e18e6b7e85c47ab2d1329dc2">10943</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#a8204afe3e18e6b7e85c47ab2d1329dc2">item::energy_consume</a>( <a class="code" href="classunits_1_1quantity.html">units::energy</a> qty, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classCharacter.html">Character</a> *carrier,</div>
<div class="line"><a name="l10944"></a><span class="lineno">10944</span>&#160;                                    <span class="keywordtype">float</span> fuel_efficiency )</div>
<div class="line"><a name="l10945"></a><span class="lineno">10945</span>&#160;{</div>
<div class="line"><a name="l10946"></a><span class="lineno">10946</span>&#160;    <span class="keywordflow">if</span>( qty &lt; 0_kJ ) {</div>
<div class="line"><a name="l10947"></a><span class="lineno">10947</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Cannot consume negative quantity of energy for %s&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l10948"></a><span class="lineno">10948</span>&#160;        <span class="keywordflow">return</span> 0_kJ;</div>
<div class="line"><a name="l10949"></a><span class="lineno">10949</span>&#160;    }</div>
<div class="line"><a name="l10950"></a><span class="lineno">10950</span>&#160; </div>
<div class="line"><a name="l10951"></a><span class="lineno">10951</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::energy</a> wanted_energy = qty;</div>
<div class="line"><a name="l10952"></a><span class="lineno">10952</span>&#160; </div>
<div class="line"><a name="l10953"></a><span class="lineno">10953</span>&#160;    <span class="comment">// Consume battery(ammo) and other fuel (if allowed)</span></div>
<div class="line"><a name="l10954"></a><span class="lineno">10954</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f">is_battery</a>() || fuel_efficiency &gt;= 0 ) {</div>
<div class="line"><a name="l10955"></a><span class="lineno">10955</span>&#160;        <span class="keywordtype">int</span> consumed_kj = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac8076cdbfa6169f6367a9c1d52d8e9b9">ammo_consume</a>( <a class="code" href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a>( qty ), <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, fuel_efficiency );</div>
<div class="line"><a name="l10956"></a><span class="lineno">10956</span>&#160;        qty -= <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( consumed_kj ) );</div>
<div class="line"><a name="l10957"></a><span class="lineno">10957</span>&#160;        <span class="comment">// fix negative quantity</span></div>
<div class="line"><a name="l10958"></a><span class="lineno">10958</span>&#160;        <span class="keywordflow">if</span>( qty &lt; 0_J ) {</div>
<div class="line"><a name="l10959"></a><span class="lineno">10959</span>&#160;            qty = 0_J;</div>
<div class="line"><a name="l10960"></a><span class="lineno">10960</span>&#160;        }</div>
<div class="line"><a name="l10961"></a><span class="lineno">10961</span>&#160;    }</div>
<div class="line"><a name="l10962"></a><span class="lineno">10962</span>&#160; </div>
<div class="line"><a name="l10963"></a><span class="lineno">10963</span>&#160;    <span class="comment">// Consume energy from contained magazine</span></div>
<div class="line"><a name="l10964"></a><span class="lineno">10964</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l10965"></a><span class="lineno">10965</span>&#160;        qty -= <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#a8204afe3e18e6b7e85c47ab2d1329dc2">energy_consume</a>( qty, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, carrier );</div>
<div class="line"><a name="l10966"></a><span class="lineno">10966</span>&#160;    }</div>
<div class="line"><a name="l10967"></a><span class="lineno">10967</span>&#160; </div>
<div class="line"><a name="l10968"></a><span class="lineno">10968</span>&#160;    <span class="comment">// Consume UPS energy from various sources</span></div>
<div class="line"><a name="l10969"></a><span class="lineno">10969</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l10970"></a><span class="lineno">10970</span>&#160;        qty -= carrier-&gt;<a class="code" href="classCharacter.html#a32d3883998c51586c2617ee82bb9ffac">consume_ups</a>( qty );</div>
<div class="line"><a name="l10971"></a><span class="lineno">10971</span>&#160;    }</div>
<div class="line"><a name="l10972"></a><span class="lineno">10972</span>&#160; </div>
<div class="line"><a name="l10973"></a><span class="lineno">10973</span>&#160;    <span class="comment">// Consume bio energy</span></div>
<div class="line"><a name="l10974"></a><span class="lineno">10974</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l10975"></a><span class="lineno">10975</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::energy</a> bio_used = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( carrier-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>(), qty );</div>
<div class="line"><a name="l10976"></a><span class="lineno">10976</span>&#160;        carrier-&gt;<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -bio_used );</div>
<div class="line"><a name="l10977"></a><span class="lineno">10977</span>&#160;        qty -= bio_used;</div>
<div class="line"><a name="l10978"></a><span class="lineno">10978</span>&#160;    }</div>
<div class="line"><a name="l10979"></a><span class="lineno">10979</span>&#160; </div>
<div class="line"><a name="l10980"></a><span class="lineno">10980</span>&#160;    <span class="comment">// If consumption is not integer kJ we need to consume one extra battery charge to &quot;round up&quot;.</span></div>
<div class="line"><a name="l10981"></a><span class="lineno">10981</span>&#160;    <span class="comment">// Should happen only if battery powered and energy per shot is not integer kJ.</span></div>
<div class="line"><a name="l10982"></a><span class="lineno">10982</span>&#160;    <span class="keywordflow">if</span>( qty &gt; 0_kJ &amp;&amp; <a class="code" href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f">is_battery</a>() ) {</div>
<div class="line"><a name="l10983"></a><span class="lineno">10983</span>&#160;        <span class="keywordtype">int</span> consumed_kj = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac8076cdbfa6169f6367a9c1d52d8e9b9">ammo_consume</a>( 1, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l10984"></a><span class="lineno">10984</span>&#160;        qty -= <a class="code" href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a>( <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>( consumed_kj ) );</div>
<div class="line"><a name="l10985"></a><span class="lineno">10985</span>&#160;    }</div>
<div class="line"><a name="l10986"></a><span class="lineno">10986</span>&#160; </div>
<div class="line"><a name="l10987"></a><span class="lineno">10987</span>&#160;    <span class="keywordflow">return</span> wanted_energy - qty;</div>
<div class="line"><a name="l10988"></a><span class="lineno">10988</span>&#160;}</div>
<div class="line"><a name="l10989"></a><span class="lineno">10989</span>&#160; </div>
<div class="line"><a name="l10990"></a><span class="lineno"><a class="line" href="classitem.html#ac04309e9c82a908bc1612e21f316676a">10990</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ac04309e9c82a908bc1612e21f316676a">item::activation_consume</a>( <span class="keywordtype">int</span> qty, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l10991"></a><span class="lineno">10991</span>&#160;{</div>
<div class="line"><a name="l10992"></a><span class="lineno">10992</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( qty * <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, carrier );</div>
<div class="line"><a name="l10993"></a><span class="lineno">10993</span>&#160;}</div>
<div class="line"><a name="l10994"></a><span class="lineno">10994</span>&#160; </div>
<div class="line"><a name="l10995"></a><span class="lineno"><a class="line" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">10995</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">item::ammo_data</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l10996"></a><span class="lineno">10996</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l10997"></a><span class="lineno">10997</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l10998"></a><span class="lineno">10998</span>&#160;    <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l10999"></a><span class="lineno">10999</span>&#160;        <span class="keywordflow">return</span> mag-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l11000"></a><span class="lineno">11000</span>&#160;    }</div>
<div class="line"><a name="l11001"></a><span class="lineno">11001</span>&#160; </div>
<div class="line"><a name="l11002"></a><span class="lineno">11002</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l11003"></a><span class="lineno">11003</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>;</div>
<div class="line"><a name="l11004"></a><span class="lineno">11004</span>&#160;    }</div>
<div class="line"><a name="l11005"></a><span class="lineno">11005</span>&#160; </div>
<div class="line"><a name="l11006"></a><span class="lineno">11006</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l11007"></a><span class="lineno">11007</span>&#160;        <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() ? <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>().<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11008"></a><span class="lineno">11008</span>&#160;    }</div>
<div class="line"><a name="l11009"></a><span class="lineno">11009</span>&#160; </div>
<div class="line"><a name="l11010"></a><span class="lineno">11010</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() : <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>();</div>
<div class="line"><a name="l11011"></a><span class="lineno">11011</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> ) {</div>
<div class="line"><a name="l11012"></a><span class="lineno">11012</span>&#160;        <span class="keywordflow">if</span>( !e-&gt;type-&gt;mod-&gt;ammo_modifier.empty() &amp;&amp; !e-&gt;ammo_current().is_null() &amp;&amp;</div>
<div class="line"><a name="l11013"></a><span class="lineno">11013</span>&#160;            <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;has_template( e-&gt;ammo_current() ) ) {</div>
<div class="line"><a name="l11014"></a><span class="lineno">11014</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( e-&gt;ammo_current() );</div>
<div class="line"><a name="l11015"></a><span class="lineno">11015</span>&#160;        }</div>
<div class="line"><a name="l11016"></a><span class="lineno">11016</span>&#160;    }</div>
<div class="line"><a name="l11017"></a><span class="lineno">11017</span>&#160; </div>
<div class="line"><a name="l11018"></a><span class="lineno">11018</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11019"></a><span class="lineno">11019</span>&#160;}</div>
<div class="line"><a name="l11020"></a><span class="lineno">11020</span>&#160; </div>
<div class="line"><a name="l11021"></a><span class="lineno"><a class="line" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">11021</a></span>&#160;<a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11022"></a><span class="lineno">11022</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11023"></a><span class="lineno">11023</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *ammo = <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l11024"></a><span class="lineno">11024</span>&#160;    <span class="keywordflow">if</span>( ammo ) {</div>
<div class="line"><a name="l11025"></a><span class="lineno">11025</span>&#160;        <span class="keywordflow">return</span> ammo-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>();</div>
<div class="line"><a name="l11026"></a><span class="lineno">11026</span>&#160;    }</div>
<div class="line"><a name="l11027"></a><span class="lineno">11027</span>&#160; </div>
<div class="line"><a name="l11028"></a><span class="lineno">11028</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>();</div>
<div class="line"><a name="l11029"></a><span class="lineno">11029</span>&#160;}</div>
<div class="line"><a name="l11030"></a><span class="lineno">11030</span>&#160; </div>
<div class="line"><a name="l11031"></a><span class="lineno"><a class="line" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">11031</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">item::loaded_ammo</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11032"></a><span class="lineno">11032</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11033"></a><span class="lineno">11033</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l11034"></a><span class="lineno">11034</span>&#160;    <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l11035"></a><span class="lineno">11035</span>&#160;        <span class="keywordflow">return</span> mag-&gt;<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a>();</div>
<div class="line"><a name="l11036"></a><span class="lineno">11036</span>&#160;    }</div>
<div class="line"><a name="l11037"></a><span class="lineno">11037</span>&#160; </div>
<div class="line"><a name="l11038"></a><span class="lineno">11038</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l11039"></a><span class="lineno">11039</span>&#160;        <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() ? <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>() : <a class="code" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a>();</div>
<div class="line"><a name="l11040"></a><span class="lineno">11040</span>&#160;    }</div>
<div class="line"><a name="l11041"></a><span class="lineno">11041</span>&#160; </div>
<div class="line"><a name="l11042"></a><span class="lineno">11042</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() : <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>();</div>
<div class="line"><a name="l11043"></a><span class="lineno">11043</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> ) {</div>
<div class="line"><a name="l11044"></a><span class="lineno">11044</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;mod_ammo = e-&gt;<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a>();</div>
<div class="line"><a name="l11045"></a><span class="lineno">11045</span>&#160;        <span class="keywordflow">if</span>( !mod_ammo.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l11046"></a><span class="lineno">11046</span>&#160;            <span class="keywordflow">return</span> mod_ammo;</div>
<div class="line"><a name="l11047"></a><span class="lineno">11047</span>&#160;        }</div>
<div class="line"><a name="l11048"></a><span class="lineno">11048</span>&#160;    }</div>
<div class="line"><a name="l11049"></a><span class="lineno">11049</span>&#160; </div>
<div class="line"><a name="l11050"></a><span class="lineno">11050</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() != 0 ) {</div>
<div class="line"><a name="l11051"></a><span class="lineno">11051</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">first_ammo</a>();</div>
<div class="line"><a name="l11052"></a><span class="lineno">11052</span>&#160;    }</div>
<div class="line"><a name="l11053"></a><span class="lineno">11053</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a>();</div>
<div class="line"><a name="l11054"></a><span class="lineno">11054</span>&#160;}</div>
<div class="line"><a name="l11055"></a><span class="lineno">11055</span>&#160; </div>
<div class="line"><a name="l11056"></a><span class="lineno"><a class="line" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">11056</a></span>&#160;std::set&lt;ammotype&gt; <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">item::ammo_types</a>( <span class="keywordtype">bool</span> conversion )<span class="keyword"> const</span></div>
<div class="line"><a name="l11057"></a><span class="lineno">11057</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11058"></a><span class="lineno">11058</span>&#160;    <span class="keywordflow">if</span>( conversion ) {</div>
<div class="line"><a name="l11059"></a><span class="lineno">11059</span>&#160;        <span class="keyword">const</span> std::vector&lt;const item *&gt; &amp;<a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ? <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() : <a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>();</div>
<div class="line"><a name="l11060"></a><span class="lineno">11060</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> ) {</div>
<div class="line"><a name="l11061"></a><span class="lineno">11061</span>&#160;            <span class="keywordflow">if</span>( !e-&gt;type-&gt;mod-&gt;ammo_modifier.empty() ) {</div>
<div class="line"><a name="l11062"></a><span class="lineno">11062</span>&#160;                <span class="keywordflow">return</span> e-&gt;type-&gt;mod-&gt;ammo_modifier;</div>
<div class="line"><a name="l11063"></a><span class="lineno">11063</span>&#160;            }</div>
<div class="line"><a name="l11064"></a><span class="lineno">11064</span>&#160;        }</div>
<div class="line"><a name="l11065"></a><span class="lineno">11065</span>&#160;    }</div>
<div class="line"><a name="l11066"></a><span class="lineno">11066</span>&#160; </div>
<div class="line"><a name="l11067"></a><span class="lineno">11067</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l11068"></a><span class="lineno">11068</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo;</div>
<div class="line"><a name="l11069"></a><span class="lineno">11069</span>&#160;    }</div>
<div class="line"><a name="l11070"></a><span class="lineno">11070</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a2c9f01be53890d3c02c761d04084af8a">ammo_types</a>();</div>
<div class="line"><a name="l11071"></a><span class="lineno">11071</span>&#160;}</div>
<div class="line"><a name="l11072"></a><span class="lineno">11072</span>&#160; </div>
<div class="line"><a name="l11073"></a><span class="lineno"><a class="line" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">11073</a></span>&#160;<a class="code" href="classstring__id.html">ammotype</a> <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">item::ammo_type</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11074"></a><span class="lineno">11074</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11075"></a><span class="lineno">11075</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l11076"></a><span class="lineno">11076</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type;</div>
<div class="line"><a name="l11077"></a><span class="lineno">11077</span>&#160;    }</div>
<div class="line"><a name="l11078"></a><span class="lineno">11078</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">ammotype::NULL_ID</a>();</div>
<div class="line"><a name="l11079"></a><span class="lineno">11079</span>&#160;}</div>
<div class="line"><a name="l11080"></a><span class="lineno">11080</span>&#160; </div>
<div class="line"><a name="l11081"></a><span class="lineno"><a class="line" href="classitem.html#ab07d96e30c441a84435972df842f4c77">11081</a></span>&#160;<a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">item::ammo_default</a>( <span class="keywordtype">bool</span> conversion )<span class="keyword"> const</span></div>
<div class="line"><a name="l11082"></a><span class="lineno">11082</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11083"></a><span class="lineno">11083</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>( conversion ).<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l11084"></a><span class="lineno">11084</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> res = <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( *<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>( conversion ).begin() )-&gt;<a class="code" href="classammunition__type.html#a236169a55b7679baaa96e491c36e57d9">default_ammotype</a>();</div>
<div class="line"><a name="l11085"></a><span class="lineno">11085</span>&#160;        <span class="keywordflow">if</span>( !res.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l11086"></a><span class="lineno">11086</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11087"></a><span class="lineno">11087</span>&#160;        }</div>
<div class="line"><a name="l11088"></a><span class="lineno">11088</span>&#160;    }</div>
<div class="line"><a name="l11089"></a><span class="lineno">11089</span>&#160; </div>
<div class="line"><a name="l11090"></a><span class="lineno">11090</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>();</div>
<div class="line"><a name="l11091"></a><span class="lineno">11091</span>&#160;}</div>
<div class="line"><a name="l11092"></a><span class="lineno">11092</span>&#160; </div>
<div class="line"><a name="l11093"></a><span class="lineno"><a class="line" href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">11093</a></span>&#160;std::string <a class="code" href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">item::print_ammo</a>( <a class="code" href="classstring__id.html">ammotype</a> at, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *gun )<span class="keyword"> const</span></div>
<div class="line"><a name="l11094"></a><span class="lineno">11094</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11095"></a><span class="lineno">11095</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l11096"></a><span class="lineno">11096</span>&#160;    <span class="keywordflow">if</span>( mag ) {</div>
<div class="line"><a name="l11097"></a><span class="lineno">11097</span>&#160;        <span class="keywordflow">return</span> mag-&gt;<a class="code" href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">print_ammo</a>( at, <span class="keyword">this</span> );</div>
<div class="line"><a name="l11098"></a><span class="lineno">11098</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l11099"></a><span class="lineno">11099</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;energy&quot;</span> );</div>
<div class="line"><a name="l11100"></a><span class="lineno">11100</span>&#160;    }</div>
<div class="line"><a name="l11101"></a><span class="lineno">11101</span>&#160; </div>
<div class="line"><a name="l11102"></a><span class="lineno">11102</span>&#160;    <span class="comment">// for magazines if we have a gun in mind display damage as well</span></div>
<div class="line"><a name="l11103"></a><span class="lineno">11103</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a> ) {</div>
<div class="line"><a name="l11104"></a><span class="lineno">11104</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a> ) {</div>
<div class="line"><a name="l11105"></a><span class="lineno">11105</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;cached_ammos[at],</div>
<div class="line"><a name="l11106"></a><span class="lineno">11106</span>&#160;            [<a class="code" href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">gun</a>]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l11107"></a><span class="lineno">11107</span>&#160;                return string_format( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;(%d)&quot;</span>, id-&gt;nname( 1 ),</div>
<div class="line"><a name="l11108"></a><span class="lineno">11108</span>&#160;                                      static_cast&lt;int&gt;( gun-&gt;gun_damage( id ).total_damage() ) );</div>
<div class="line"><a name="l11109"></a><span class="lineno">11109</span>&#160;            } );</div>
<div class="line"><a name="l11110"></a><span class="lineno">11110</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11111"></a><span class="lineno">11111</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;cached_ammos[at],</div>
<div class="line"><a name="l11112"></a><span class="lineno">11112</span>&#160;            []( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l11113"></a><span class="lineno">11113</span>&#160;                return string_format( <span class="stringliteral">&quot;&lt;info&gt;%s&lt;/info&gt;&quot;</span>, id-&gt;nname( 1 ) );</div>
<div class="line"><a name="l11114"></a><span class="lineno">11114</span>&#160;            } );</div>
<div class="line"><a name="l11115"></a><span class="lineno">11115</span>&#160;        }</div>
<div class="line"><a name="l11116"></a><span class="lineno">11116</span>&#160;    }</div>
<div class="line"><a name="l11117"></a><span class="lineno">11117</span>&#160; </div>
<div class="line"><a name="l11118"></a><span class="lineno">11118</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l11119"></a><span class="lineno">11119</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;cached_ammos[at],</div>
<div class="line"><a name="l11120"></a><span class="lineno">11120</span>&#160;        [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <span class="keywordtype">id</span> ) {</div>
<div class="line"><a name="l11121"></a><span class="lineno">11121</span>&#160;            return string_format( <span class="stringliteral">&quot;&lt;info&gt;%s(%d)&lt;/info&gt;&quot;</span>, id-&gt;nname( 1 ),</div>
<div class="line"><a name="l11122"></a><span class="lineno">11122</span>&#160;                                  static_cast&lt;int&gt;( gun_damage( id ).total_damage() ) );</div>
<div class="line"><a name="l11123"></a><span class="lineno">11123</span>&#160;        } );</div>
<div class="line"><a name="l11124"></a><span class="lineno">11124</span>&#160;    }</div>
<div class="line"><a name="l11125"></a><span class="lineno">11125</span>&#160; </div>
<div class="line"><a name="l11126"></a><span class="lineno">11126</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11127"></a><span class="lineno">11127</span>&#160;}</div>
<div class="line"><a name="l11128"></a><span class="lineno">11128</span>&#160; </div>
<div class="line"><a name="l11129"></a><span class="lineno"><a class="line" href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">11129</a></span>&#160;<a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">item::common_ammo_default</a>( <span class="keywordtype">bool</span> conversion )<span class="keyword"> const</span></div>
<div class="line"><a name="l11130"></a><span class="lineno">11130</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11131"></a><span class="lineno">11131</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>( conversion ) ) {</div>
<div class="line"><a name="l11132"></a><span class="lineno">11132</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l11133"></a><span class="lineno">11133</span>&#160;        <span class="keywordflow">if</span>( mag &amp;&amp; mag-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type.count( at ) ) {</div>
<div class="line"><a name="l11134"></a><span class="lineno">11134</span>&#160;            <a class="code" href="classstring__id.html">itype_id</a> res = at-&gt;default_ammotype();</div>
<div class="line"><a name="l11135"></a><span class="lineno">11135</span>&#160;            <span class="keywordflow">if</span>( !res.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l11136"></a><span class="lineno">11136</span>&#160;                <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11137"></a><span class="lineno">11137</span>&#160;            }</div>
<div class="line"><a name="l11138"></a><span class="lineno">11138</span>&#160;        }</div>
<div class="line"><a name="l11139"></a><span class="lineno">11139</span>&#160;    }</div>
<div class="line"><a name="l11140"></a><span class="lineno">11140</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>();</div>
<div class="line"><a name="l11141"></a><span class="lineno">11141</span>&#160;}</div>
<div class="line"><a name="l11142"></a><span class="lineno">11142</span>&#160; </div>
<div class="line"><a name="l11143"></a><span class="lineno"><a class="line" href="classitem.html#a768c08639c1047f61b9aab2b894e9bcd">11143</a></span>&#160;std::set&lt;std::string&gt; <a class="code" href="classitem.html#a768c08639c1047f61b9aab2b894e9bcd">item::ammo_effects</a>( <span class="keywordtype">bool</span> with_ammo )<span class="keyword"> const</span></div>
<div class="line"><a name="l11144"></a><span class="lineno">11144</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11145"></a><span class="lineno">11145</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l11146"></a><span class="lineno">11146</span>&#160;        <span class="keywordflow">return</span> std::set&lt;std::string&gt;();</div>
<div class="line"><a name="l11147"></a><span class="lineno">11147</span>&#160;    }</div>
<div class="line"><a name="l11148"></a><span class="lineno">11148</span>&#160; </div>
<div class="line"><a name="l11149"></a><span class="lineno">11149</span>&#160;    std::set&lt;std::string&gt; res = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;ammo_effects;</div>
<div class="line"><a name="l11150"></a><span class="lineno">11150</span>&#160;    <span class="keywordflow">if</span>( with_ammo &amp;&amp; <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>() ) {</div>
<div class="line"><a name="l11151"></a><span class="lineno">11151</span>&#160;        res.insert( <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;ammo-&gt;ammo_effects.begin(), <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;ammo-&gt;ammo_effects.end() );</div>
<div class="line"><a name="l11152"></a><span class="lineno">11152</span>&#160;    }</div>
<div class="line"><a name="l11153"></a><span class="lineno">11153</span>&#160; </div>
<div class="line"><a name="l11154"></a><span class="lineno">11154</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l11155"></a><span class="lineno">11155</span>&#160;        res.insert( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;ammo_effects.begin(), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;ammo_effects.end() );</div>
<div class="line"><a name="l11156"></a><span class="lineno">11156</span>&#160;    }</div>
<div class="line"><a name="l11157"></a><span class="lineno">11157</span>&#160; </div>
<div class="line"><a name="l11158"></a><span class="lineno">11158</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11159"></a><span class="lineno">11159</span>&#160;}</div>
<div class="line"><a name="l11160"></a><span class="lineno">11160</span>&#160; </div>
<div class="line"><a name="l11161"></a><span class="lineno"><a class="line" href="classitem.html#af4d40038358173598156ed2d200e176f">11161</a></span>&#160;std::string <a class="code" href="classitem.html#af4d40038358173598156ed2d200e176f">item::ammo_sort_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11162"></a><span class="lineno">11162</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11163"></a><span class="lineno">11163</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() || <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l11164"></a><span class="lineno">11164</span>&#160;        <span class="keyword">const</span> std::set&lt;ammotype&gt; &amp;types = <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>();</div>
<div class="line"><a name="l11165"></a><span class="lineno">11165</span>&#160;        <span class="keywordflow">if</span>( !types.empty() ) {</div>
<div class="line"><a name="l11166"></a><span class="lineno">11166</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a>( *types.begin() )-&gt;<a class="code" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">name</a>();</div>
<div class="line"><a name="l11167"></a><span class="lineno">11167</span>&#160;        }</div>
<div class="line"><a name="l11168"></a><span class="lineno">11168</span>&#160;    }</div>
<div class="line"><a name="l11169"></a><span class="lineno">11169</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l11170"></a><span class="lineno">11170</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>()-&gt;<a class="code" href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">name</a>();</div>
<div class="line"><a name="l11171"></a><span class="lineno">11171</span>&#160;    }</div>
<div class="line"><a name="l11172"></a><span class="lineno">11172</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11173"></a><span class="lineno">11173</span>&#160;}</div>
<div class="line"><a name="l11174"></a><span class="lineno">11174</span>&#160; </div>
<div class="line"><a name="l11175"></a><span class="lineno"><a class="line" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">11175</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">item::magazine_integral</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11176"></a><span class="lineno">11176</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11177"></a><span class="lineno">11177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l11178"></a><span class="lineno">11178</span>&#160;}</div>
<div class="line"><a name="l11179"></a><span class="lineno">11179</span>&#160; </div>
<div class="line"><a name="l11180"></a><span class="lineno"><a class="line" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">11180</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">item::uses_magazine</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11181"></a><span class="lineno">11181</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11182"></a><span class="lineno">11182</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l11183"></a><span class="lineno">11183</span>&#160;}</div>
<div class="line"><a name="l11184"></a><span class="lineno">11184</span>&#160; </div>
<div class="line"><a name="l11185"></a><span class="lineno"><a class="line" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">11185</a></span>&#160;<a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="classitem.html#a159a8d7dbb5135f556838aec5e223287">item::magazine_default</a>( <span class="keywordtype">bool</span> conversion )<span class="keyword"> const</span></div>
<div class="line"><a name="l11186"></a><span class="lineno">11186</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11187"></a><span class="lineno">11187</span>&#160;    <span class="comment">// consider modded ammo types</span></div>
<div class="line"><a name="l11188"></a><span class="lineno">11188</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> ammo;</div>
<div class="line"><a name="l11189"></a><span class="lineno">11189</span>&#160;    <span class="keywordflow">if</span>( conversion &amp;&amp; ( ammo = <a class="code" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>(), !ammo.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) ) {</div>
<div class="line"><a name="l11190"></a><span class="lineno">11190</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;mag : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a2f72ab74158416c2074c549a324597df">magazine_compatible</a>() ) {</div>
<div class="line"><a name="l11191"></a><span class="lineno">11191</span>&#160;            <span class="keyword">auto</span> mag_types = mag-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;type;</div>
<div class="line"><a name="l11192"></a><span class="lineno">11192</span>&#160;            <span class="keywordflow">if</span>( mag_types.find( ammo-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type ) != mag_types.end() ) {</div>
<div class="line"><a name="l11193"></a><span class="lineno">11193</span>&#160;                <span class="keywordflow">return</span> mag;</div>
<div class="line"><a name="l11194"></a><span class="lineno">11194</span>&#160;            }</div>
<div class="line"><a name="l11195"></a><span class="lineno">11195</span>&#160;        }</div>
<div class="line"><a name="l11196"></a><span class="lineno">11196</span>&#160;    }</div>
<div class="line"><a name="l11197"></a><span class="lineno">11197</span>&#160; </div>
<div class="line"><a name="l11198"></a><span class="lineno">11198</span>&#160;    <span class="comment">// otherwise return the default</span></div>
<div class="line"><a name="l11199"></a><span class="lineno">11199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a081cdaadd00dd08cb2885b9ff3dd1738">magazine_default</a>();</div>
<div class="line"><a name="l11200"></a><span class="lineno">11200</span>&#160;}</div>
<div class="line"><a name="l11201"></a><span class="lineno">11201</span>&#160; </div>
<div class="line"><a name="l11202"></a><span class="lineno"><a class="line" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">11202</a></span>&#160;std::set&lt;itype_id&gt; <a class="code" href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">item::magazine_compatible</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11203"></a><span class="lineno">11203</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11204"></a><span class="lineno">11204</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a2f72ab74158416c2074c549a324597df">magazine_compatible</a>();</div>
<div class="line"><a name="l11205"></a><span class="lineno">11205</span>&#160;}</div>
<div class="line"><a name="l11206"></a><span class="lineno">11206</span>&#160; </div>
<div class="line"><a name="l11207"></a><span class="lineno"><a class="line" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">11207</a></span>&#160;<a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a>()</div>
<div class="line"><a name="l11208"></a><span class="lineno">11208</span>&#160;{</div>
<div class="line"><a name="l11209"></a><span class="lineno">11209</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a1b7fc08e5b70c986dae79bb5f819d688">magazine_current</a>();</div>
<div class="line"><a name="l11210"></a><span class="lineno">11210</span>&#160;}</div>
<div class="line"><a name="l11211"></a><span class="lineno">11211</span>&#160; </div>
<div class="line"><a name="l11212"></a><span class="lineno"><a class="line" href="classitem.html#af5422fcf744eebd709c22f19cfc12ab8">11212</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11213"></a><span class="lineno">11213</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11214"></a><span class="lineno">11214</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l11215"></a><span class="lineno">11215</span>&#160;}</div>
<div class="line"><a name="l11216"></a><span class="lineno">11216</span>&#160; </div>
<div class="line"><a name="l11217"></a><span class="lineno"><a class="line" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">11217</a></span>&#160;std::vector&lt;item *&gt; <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">item::gunmods</a>()</div>
<div class="line"><a name="l11218"></a><span class="lineno">11218</span>&#160;{</div>
<div class="line"><a name="l11219"></a><span class="lineno">11219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7c338da0319dc85f464a822a5f5651c4">gunmods</a>();</div>
<div class="line"><a name="l11220"></a><span class="lineno">11220</span>&#160;}</div>
<div class="line"><a name="l11221"></a><span class="lineno">11221</span>&#160; </div>
<div class="line"><a name="l11222"></a><span class="lineno"><a class="line" href="classitem.html#ab2a88b8e62334185654d0a7a683a7ae8">11222</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">item::gunmods</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11223"></a><span class="lineno">11223</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11224"></a><span class="lineno">11224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7c338da0319dc85f464a822a5f5651c4">gunmods</a>();</div>
<div class="line"><a name="l11225"></a><span class="lineno">11225</span>&#160;}</div>
<div class="line"><a name="l11226"></a><span class="lineno">11226</span>&#160; </div>
<div class="line"><a name="l11227"></a><span class="lineno"><a class="line" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">11227</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">item::mods</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11228"></a><span class="lineno">11228</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11229"></a><span class="lineno">11229</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a59536fcea7580503b51d8899552fa31c">mods</a>();</div>
<div class="line"><a name="l11230"></a><span class="lineno">11230</span>&#160;}</div>
<div class="line"><a name="l11231"></a><span class="lineno">11231</span>&#160; </div>
<div class="line"><a name="l11232"></a><span class="lineno"><a class="line" href="classitem.html#a9212d253f21baa539e5aa28dc6e7fe44">11232</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a9212d253f21baa539e5aa28dc6e7fe44">item::softwares</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11233"></a><span class="lineno">11233</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11234"></a><span class="lineno">11234</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3e71adb06d1ff2730137c8f1357a4c60">softwares</a>();</div>
<div class="line"><a name="l11235"></a><span class="lineno">11235</span>&#160;}</div>
<div class="line"><a name="l11236"></a><span class="lineno">11236</span>&#160; </div>
<div class="line"><a name="l11237"></a><span class="lineno"><a class="line" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">11237</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">item::ebooks</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11238"></a><span class="lineno">11238</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11239"></a><span class="lineno">11239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ab6a38a50393cb41a1b5196bd587ca6a5">ebooks</a>();</div>
<div class="line"><a name="l11240"></a><span class="lineno">11240</span>&#160;}</div>
<div class="line"><a name="l11241"></a><span class="lineno">11241</span>&#160; </div>
<div class="line"><a name="l11242"></a><span class="lineno"><a class="line" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">11242</a></span>&#160;std::vector&lt;const item *&gt; <a class="code" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">item::cables</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11243"></a><span class="lineno">11243</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11244"></a><span class="lineno">11244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a8a41a60a66bf45db486f507bfb77b26e">cables</a>();</div>
<div class="line"><a name="l11245"></a><span class="lineno">11245</span>&#160;}</div>
<div class="line"><a name="l11246"></a><span class="lineno">11246</span>&#160; </div>
<div class="line"><a name="l11247"></a><span class="lineno"><a class="line" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">11247</a></span>&#160;<a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">item::gunmod_find</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l11248"></a><span class="lineno">11248</span>&#160;{</div>
<div class="line"><a name="l11249"></a><span class="lineno">11249</span>&#160;    std::vector&lt;item *&gt; <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>();</div>
<div class="line"><a name="l11250"></a><span class="lineno">11250</span>&#160;    <span class="keyword">auto</span> it = std::find_if( <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.begin(), <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.end(), [&amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>]( <a class="code" href="classitem.html">item</a> * e ) {</div>
<div class="line"><a name="l11251"></a><span class="lineno">11251</span>&#160;        return e-&gt;typeId() == mod;</div>
<div class="line"><a name="l11252"></a><span class="lineno">11252</span>&#160;    } );</div>
<div class="line"><a name="l11253"></a><span class="lineno">11253</span>&#160;    <span class="keywordflow">return</span> it != <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.end() ? *it : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11254"></a><span class="lineno">11254</span>&#160;}</div>
<div class="line"><a name="l11255"></a><span class="lineno">11255</span>&#160; </div>
<div class="line"><a name="l11256"></a><span class="lineno"><a class="line" href="classitem.html#a08d1d73decd26ea36f942c53cf7c037b">11256</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">item::gunmod_find</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l11257"></a><span class="lineno">11257</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11258"></a><span class="lineno">11258</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l11259"></a><span class="lineno">11259</span>&#160;}</div>
<div class="line"><a name="l11260"></a><span class="lineno">11260</span>&#160; </div>
<div class="line"><a name="l11261"></a><span class="lineno"><a class="line" href="classitem.html#ac11fd08d9b41ad301b7135906df8c33e">11261</a></span>&#160;<a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#ac11fd08d9b41ad301b7135906df8c33e">item::gunmod_find_by_flag</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> &amp;flag )</div>
<div class="line"><a name="l11262"></a><span class="lineno">11262</span>&#160;{</div>
<div class="line"><a name="l11263"></a><span class="lineno">11263</span>&#160;    std::vector&lt;item *&gt; <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a> = <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>();</div>
<div class="line"><a name="l11264"></a><span class="lineno">11264</span>&#160;    <span class="keyword">auto</span> it = std::find_if( <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.begin(), <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.end(), [&amp;flag]( <a class="code" href="classitem.html">item</a> * e ) {</div>
<div class="line"><a name="l11265"></a><span class="lineno">11265</span>&#160;        return e-&gt;has_flag( flag );</div>
<div class="line"><a name="l11266"></a><span class="lineno">11266</span>&#160;    } );</div>
<div class="line"><a name="l11267"></a><span class="lineno">11267</span>&#160;    <span class="keywordflow">return</span> it != <a class="code" href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">mods</a>.end() ? *it : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11268"></a><span class="lineno">11268</span>&#160;}</div>
<div class="line"><a name="l11269"></a><span class="lineno">11269</span>&#160; </div>
<div class="line"><a name="l11270"></a><span class="lineno"><a class="line" href="classitem.html#af92f1cedcba23fcf2aab8b821554a89b">11270</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#af92f1cedcba23fcf2aab8b821554a89b">item::is_gunmod_compatible</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l11271"></a><span class="lineno">11271</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11272"></a><span class="lineno">11272</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.is_gunmod() ) {</div>
<div class="line"><a name="l11273"></a><span class="lineno">11273</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried checking compatibility of non-gunmod&quot;</span> );</div>
<div class="line"><a name="l11274"></a><span class="lineno">11274</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l11275"></a><span class="lineno">11275</span>&#160;    }</div>
<div class="line"><a name="l11276"></a><span class="lineno">11276</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classgun__type__type.html">gun_type_type</a> pistol_gun_type( <a class="code" href="translations_8h.html#a9e39a96618079002323c6e554271d3e2">translate_marker_context</a>( <span class="stringliteral">&quot;gun_type_type&quot;</span>, <span class="stringliteral">&quot;pistol&quot;</span> ) );</div>
<div class="line"><a name="l11277"></a><span class="lineno">11277</span>&#160; </div>
<div class="line"><a name="l11278"></a><span class="lineno">11278</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l11279"></a><span class="lineno">11279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;isn&#39;t a weapon&quot;</span> ) );</div>
<div class="line"><a name="l11280"></a><span class="lineno">11280</span>&#160; </div>
<div class="line"><a name="l11281"></a><span class="lineno">11281</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l11282"></a><span class="lineno">11282</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;is a gunmod and cannot be modded&quot;</span> ) );</div>
<div class="line"><a name="l11283"></a><span class="lineno">11283</span>&#160; </div>
<div class="line"><a name="l11284"></a><span class="lineno">11284</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.typeId() ) ) {</div>
<div class="line"><a name="l11285"></a><span class="lineno">11285</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;already has a %s&quot;</span> ), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.tname( 1 ) );</div>
<div class="line"><a name="l11286"></a><span class="lineno">11286</span>&#160; </div>
<div class="line"><a name="l11287"></a><span class="lineno">11287</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a727917284cddff4dbf0113d1329fec51">get_mod_locations</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location ) ) {</div>
<div class="line"><a name="l11288"></a><span class="lineno">11288</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;doesn&#39;t have a slot for this mod&quot;</span> ) );</div>
<div class="line"><a name="l11289"></a><span class="lineno">11289</span>&#160; </div>
<div class="line"><a name="l11290"></a><span class="lineno">11290</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ad345f0faefeda773220f01b75acb9f28">get_free_mod_locations</a>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location ) &lt;= 0 ) {</div>
<div class="line"><a name="l11291"></a><span class="lineno">11291</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;doesn&#39;t have enough room for another %s mod&quot;</span> ),</div>
<div class="line"><a name="l11292"></a><span class="lineno">11292</span>&#160;                                            <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() );</div>
<div class="line"><a name="l11293"></a><span class="lineno">11293</span>&#160; </div>
<div class="line"><a name="l11294"></a><span class="lineno">11294</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;usable.count( <a class="code" href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">gun_type</a>() ) &amp;&amp;</div>
<div class="line"><a name="l11295"></a><span class="lineno">11295</span>&#160;               !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;usable.count( <a class="code" href="classgun__type__type.html">gun_type_type</a>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str() ) ) ) {</div>
<div class="line"><a name="l11296"></a><span class="lineno">11296</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;cannot have a %s&quot;</span> ), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.tname() );</div>
<div class="line"><a name="l11297"></a><span class="lineno">11297</span>&#160; </div>
<div class="line"><a name="l11298"></a><span class="lineno">11298</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a15d4c6dd0bd83d4205a6f043cd65fbb4">itype_hand_crossbow</a> &amp;&amp;</div>
<div class="line"><a name="l11299"></a><span class="lineno">11299</span>&#160;               !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;usable.count( pistol_gun_type ) ) {</div>
<div class="line"><a name="l11300"></a><span class="lineno">11300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;isn&#39;t big enough to use that mod&quot;</span> ) );</div>
<div class="line"><a name="l11301"></a><span class="lineno">11301</span>&#160; </div>
<div class="line"><a name="l11302"></a><span class="lineno">11302</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.str() == <span class="stringliteral">&quot;underbarrel&quot;</span> &amp;&amp;</div>
<div class="line"><a name="l11303"></a><span class="lineno">11303</span>&#160;               !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.has_flag( <a class="code" href="flag_8cpp.html#ab84b6994b5f9c90dc9f9fc46cb664acc">flag_PUMP_RAIL_COMPATIBLE</a> ) &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9f68b56ceb405a195162c8e5e3c66151">flag_PUMP_ACTION</a> ) ) {</div>
<div class="line"><a name="l11304"></a><span class="lineno">11304</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;can only accept small mods on that slot&quot;</span> ) );</div>
<div class="line"><a name="l11305"></a><span class="lineno">11305</span>&#160; </div>
<div class="line"><a name="l11306"></a><span class="lineno">11306</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.typeId() == <a class="code" href="item_8cpp.html#a7630095c203f119c01b0a65a02437d76">itype_waterproof_gunmod</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a91b719509dce6a71673f9183835e8939">flag_WATERPROOF_GUN</a> ) ) {</div>
<div class="line"><a name="l11307"></a><span class="lineno">11307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;is already waterproof&quot;</span> ) );</div>
<div class="line"><a name="l11308"></a><span class="lineno">11308</span>&#160; </div>
<div class="line"><a name="l11309"></a><span class="lineno">11309</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.typeId() == <a class="code" href="item_8cpp.html#aa3482398423564904395b3f85ca0e730">itype_tuned_mechanism</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5685feafd05d6c3a374460c0b50ad725">flag_NEVER_JAMS</a> ) ) {</div>
<div class="line"><a name="l11310"></a><span class="lineno">11310</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;is already eminently reliable&quot;</span> ) );</div>
<div class="line"><a name="l11311"></a><span class="lineno">11311</span>&#160; </div>
<div class="line"><a name="l11312"></a><span class="lineno">11312</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.typeId() == <a class="code" href="item_8cpp.html#a0ccb4d60ab6785e534c7eaa8ad7d07c6">itype_brass_catcher</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7dffac54d4c781ade6642ecb6365d4db">flag_RELOAD_EJECT</a> ) ) {</div>
<div class="line"><a name="l11313"></a><span class="lineno">11313</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;cannot have a brass catcher&quot;</span> ) );</div>
<div class="line"><a name="l11314"></a><span class="lineno">11314</span>&#160; </div>
<div class="line"><a name="l11315"></a><span class="lineno">11315</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() == <span class="stringliteral">&quot;magazine&quot;</span> ||</div>
<div class="line"><a name="l11316"></a><span class="lineno">11316</span>&#160;                 <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() == <span class="stringliteral">&quot;mechanism&quot;</span> ||</div>
<div class="line"><a name="l11317"></a><span class="lineno">11317</span>&#160;                 <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() == <span class="stringliteral">&quot;loading port&quot;</span> ||</div>
<div class="line"><a name="l11318"></a><span class="lineno">11318</span>&#160;                 <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() == <span class="stringliteral">&quot;bore&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l11319"></a><span class="lineno">11319</span>&#160;               ( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &gt; 0 || <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) ) {</div>
<div class="line"><a name="l11320"></a><span class="lineno">11320</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;must be unloaded before installing this mod&quot;</span> ) );</div>
<div class="line"><a name="l11321"></a><span class="lineno">11321</span>&#160; </div>
<div class="line"><a name="l11322"></a><span class="lineno">11322</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( <a class="code" href="item_8cpp.html#ac71caa61fb71b31b4ad12dfcc0d9dfef">itype_stock_none</a> ) &amp;&amp;</div>
<div class="line"><a name="l11323"></a><span class="lineno">11323</span>&#160;               <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;location.name() == <span class="stringliteral">&quot;stock accessory&quot;</span> ) {</div>
<div class="line"><a name="l11324"></a><span class="lineno">11324</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;doesn&#39;t have a stock to attach this mod&quot;</span> ) );</div>
<div class="line"><a name="l11325"></a><span class="lineno">11325</span>&#160; </div>
<div class="line"><a name="l11326"></a><span class="lineno">11326</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.typeId() == <a class="code" href="item_8cpp.html#ace91bfda35938e1a3053b644a6104cff">itype_arredondo_chute</a> ) {</div>
<div class="line"><a name="l11327"></a><span class="lineno">11327</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;chute needs modification before attaching&quot;</span> ) );</div>
<div class="line"><a name="l11328"></a><span class="lineno">11328</span>&#160; </div>
<div class="line"><a name="l11329"></a><span class="lineno">11329</span>&#160;        <span class="comment">// Acceptable_ammo check is kinda weird now, if it is passed, checks after it will be ignored.</span></div>
<div class="line"><a name="l11330"></a><span class="lineno">11330</span>&#160;        <span class="comment">// Moved it here as a workaround.</span></div>
<div class="line"><a name="l11331"></a><span class="lineno">11331</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;mod-&gt;acceptable_ammo.empty() ) {</div>
<div class="line"><a name="l11332"></a><span class="lineno">11332</span>&#160;        <span class="keywordtype">bool</span> compat_ammo = <span class="keyword">false</span>;</div>
<div class="line"><a name="l11333"></a><span class="lineno">11333</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;at : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;mod-&gt;acceptable_ammo ) {</div>
<div class="line"><a name="l11334"></a><span class="lineno">11334</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>( <span class="keyword">false</span> ).<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( at ) ) {</div>
<div class="line"><a name="l11335"></a><span class="lineno">11335</span>&#160;                compat_ammo = <span class="keyword">true</span>;</div>
<div class="line"><a name="l11336"></a><span class="lineno">11336</span>&#160;            }</div>
<div class="line"><a name="l11337"></a><span class="lineno">11337</span>&#160;        }</div>
<div class="line"><a name="l11338"></a><span class="lineno">11338</span>&#160;        <span class="keywordflow">if</span>( !compat_ammo ) {</div>
<div class="line"><a name="l11339"></a><span class="lineno">11339</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>(</div>
<div class="line"><a name="l11340"></a><span class="lineno">11340</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s cannot be used on item with no compatible ammo types&quot;</span> ), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.tname( 1 ) );</div>
<div class="line"><a name="l11341"></a><span class="lineno">11341</span>&#160;        }</div>
<div class="line"><a name="l11342"></a><span class="lineno">11342</span>&#160;    }</div>
<div class="line"><a name="l11343"></a><span class="lineno">11343</span>&#160; </div>
<div class="line"><a name="l11344"></a><span class="lineno">11344</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classgunmod__location.html">gunmod_location</a> &amp;slot : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;blacklist_slot ) {</div>
<div class="line"><a name="l11345"></a><span class="lineno">11345</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a727917284cddff4dbf0113d1329fec51">get_mod_locations</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( slot ) ) {</div>
<div class="line"><a name="l11346"></a><span class="lineno">11346</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;cannot be installed on a weapon with \&quot;%s\&quot;&quot;</span> ),</div>
<div class="line"><a name="l11347"></a><span class="lineno">11347</span>&#160;                                                slot.<a class="code" href="classgunmod__location.html#a13e673ad3b5f14c709d680fff1c63272">name</a>() );</div>
<div class="line"><a name="l11348"></a><span class="lineno">11348</span>&#160;        }</div>
<div class="line"><a name="l11349"></a><span class="lineno">11349</span>&#160;    }</div>
<div class="line"><a name="l11350"></a><span class="lineno">11350</span>&#160; </div>
<div class="line"><a name="l11351"></a><span class="lineno">11351</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;testmod : <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>.type-&gt;gunmod-&gt;blacklist_mod ) {</div>
<div class="line"><a name="l11352"></a><span class="lineno">11352</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">gunmod_find</a>( testmod ) ) {</div>
<div class="line"><a name="l11353"></a><span class="lineno">11353</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;cannot be installed on a weapon with a \&quot;%s\&quot;&quot;</span> ),</div>
<div class="line"><a name="l11354"></a><span class="lineno">11354</span>&#160;                                                ( testmod-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) ) );</div>
<div class="line"><a name="l11355"></a><span class="lineno">11355</span>&#160;        }</div>
<div class="line"><a name="l11356"></a><span class="lineno">11356</span>&#160;    }</div>
<div class="line"><a name="l11357"></a><span class="lineno">11357</span>&#160; </div>
<div class="line"><a name="l11358"></a><span class="lineno">11358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>();</div>
<div class="line"><a name="l11359"></a><span class="lineno">11359</span>&#160;}</div>
<div class="line"><a name="l11360"></a><span class="lineno">11360</span>&#160; </div>
<div class="line"><a name="l11361"></a><span class="lineno"><a class="line" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">11361</a></span>&#160;std::map&lt;gun_mode_id, gun_mode&gt; <a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">item::gun_all_modes</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11362"></a><span class="lineno">11362</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11363"></a><span class="lineno">11363</span>&#160;    std::map&lt;gun_mode_id, gun_mode&gt; res;</div>
<div class="line"><a name="l11364"></a><span class="lineno">11364</span>&#160; </div>
<div class="line"><a name="l11365"></a><span class="lineno">11365</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l11366"></a><span class="lineno">11366</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11367"></a><span class="lineno">11367</span>&#160;    }</div>
<div class="line"><a name="l11368"></a><span class="lineno">11368</span>&#160; </div>
<div class="line"><a name="l11369"></a><span class="lineno">11369</span>&#160;    std::vector&lt;const item *&gt; opts = <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>();</div>
<div class="line"><a name="l11370"></a><span class="lineno">11370</span>&#160;    opts.push_back( <span class="keyword">this</span> );</div>
<div class="line"><a name="l11371"></a><span class="lineno">11371</span>&#160; </div>
<div class="line"><a name="l11372"></a><span class="lineno">11372</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *e : opts ) {</div>
<div class="line"><a name="l11373"></a><span class="lineno">11373</span>&#160; </div>
<div class="line"><a name="l11374"></a><span class="lineno">11374</span>&#160;        <span class="comment">// handle base item plus any auxiliary gunmods</span></div>
<div class="line"><a name="l11375"></a><span class="lineno">11375</span>&#160;        <span class="keywordflow">if</span>( e-&gt;is_gun() ) {</div>
<div class="line"><a name="l11376"></a><span class="lineno">11376</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_modifier_data&gt; &amp;m : e-&gt;type-&gt;gun-&gt;modes ) {</div>
<div class="line"><a name="l11377"></a><span class="lineno">11377</span>&#160;                <span class="comment">// prefix attached gunmods, e.g. M203_DEFAULT to avoid index key collisions</span></div>
<div class="line"><a name="l11378"></a><span class="lineno">11378</span>&#160;                std::string <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a> = e-&gt;is_gunmod() ? ( std::string( e-&gt;typeId() ) += <span class="stringliteral">&quot;_&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11379"></a><span class="lineno">11379</span>&#160;                std::transform( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a>.begin(), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a>.end(), <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a>.begin(),</div>
<div class="line"><a name="l11380"></a><span class="lineno">11380</span>&#160;                                <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span>( * )( <span class="keywordtype">int</span> )<span class="keyword">&gt;</span>( toupper ) );</div>
<div class="line"><a name="l11381"></a><span class="lineno">11381</span>&#160; </div>
<div class="line"><a name="l11382"></a><span class="lineno">11382</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> qty = m.second.qty();</div>
<div class="line"><a name="l11383"></a><span class="lineno">11383</span>&#160; </div>
<div class="line"><a name="l11384"></a><span class="lineno">11384</span>&#160;                res.emplace( <a class="code" href="type__id_8h.html#a8174d98bb32e389bd2e1ab691167f7b9">gun_mode_id</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">prefix</a> + m.first.str() ), <a class="code" href="classgun__mode.html">gun_mode</a>( m.second.name(),</div>
<div class="line"><a name="l11385"></a><span class="lineno">11385</span>&#160;                             <span class="keyword">const_cast&lt;</span><a class="code" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( e ),</div>
<div class="line"><a name="l11386"></a><span class="lineno">11386</span>&#160;                             qty, m.second.flags() ) );</div>
<div class="line"><a name="l11387"></a><span class="lineno">11387</span>&#160;            }</div>
<div class="line"><a name="l11388"></a><span class="lineno">11388</span>&#160; </div>
<div class="line"><a name="l11389"></a><span class="lineno">11389</span>&#160;            <span class="comment">// non-auxiliary gunmods may provide additional modes for the base item</span></div>
<div class="line"><a name="l11390"></a><span class="lineno">11390</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( e-&gt;is_gunmod() ) {</div>
<div class="line"><a name="l11391"></a><span class="lineno">11391</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_modifier_data&gt; &amp;m : e-&gt;type-&gt;gunmod-&gt;mode_modifier ) {</div>
<div class="line"><a name="l11392"></a><span class="lineno">11392</span>&#160;                <span class="comment">//checks for melee gunmod, points to gunmod</span></div>
<div class="line"><a name="l11393"></a><span class="lineno">11393</span>&#160;                <span class="keywordflow">if</span>( m.first == <a class="code" href="item_8cpp.html#a0e987240fca9e226501b6c99ad0dd4a4">gun_mode_REACH</a> ) {</div>
<div class="line"><a name="l11394"></a><span class="lineno">11394</span>&#160;                    res.emplace( m.first, <a class="code" href="classgun__mode.html">gun_mode</a> { m.second.name(), const_cast&lt;item *&gt;( e ),</div>
<div class="line"><a name="l11395"></a><span class="lineno">11395</span>&#160;                                                     m.second.qty(), m.second.flags() } );</div>
<div class="line"><a name="l11396"></a><span class="lineno">11396</span>&#160;                    <span class="comment">//otherwise points to the parent gun, not the gunmod</span></div>
<div class="line"><a name="l11397"></a><span class="lineno">11397</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11398"></a><span class="lineno">11398</span>&#160;                    res.emplace( m.first, <a class="code" href="classgun__mode.html">gun_mode</a> { m.second.name(), const_cast&lt;item *&gt;( this ),</div>
<div class="line"><a name="l11399"></a><span class="lineno">11399</span>&#160;                                                     m.second.qty(), m.second.flags() } );</div>
<div class="line"><a name="l11400"></a><span class="lineno">11400</span>&#160;                }</div>
<div class="line"><a name="l11401"></a><span class="lineno">11401</span>&#160;            }</div>
<div class="line"><a name="l11402"></a><span class="lineno">11402</span>&#160;        }</div>
<div class="line"><a name="l11403"></a><span class="lineno">11403</span>&#160;    }</div>
<div class="line"><a name="l11404"></a><span class="lineno">11404</span>&#160; </div>
<div class="line"><a name="l11405"></a><span class="lineno">11405</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11406"></a><span class="lineno">11406</span>&#160;}</div>
<div class="line"><a name="l11407"></a><span class="lineno">11407</span>&#160; </div>
<div class="line"><a name="l11408"></a><span class="lineno"><a class="line" href="classitem.html#af128df748a75405ab738424bff725de5">11408</a></span>&#160;<a class="code" href="classgun__mode.html">gun_mode</a> <a class="code" href="classitem.html#af128df748a75405ab738424bff725de5">item::gun_get_mode</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">gun_mode_id</a> &amp;mode )<span class="keyword"> const</span></div>
<div class="line"><a name="l11409"></a><span class="lineno">11409</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11410"></a><span class="lineno">11410</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l11411"></a><span class="lineno">11411</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;e : <a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>() ) {</div>
<div class="line"><a name="l11412"></a><span class="lineno">11412</span>&#160;            <span class="keywordflow">if</span>( e.first == mode ) {</div>
<div class="line"><a name="l11413"></a><span class="lineno">11413</span>&#160;                <span class="keywordflow">return</span> e.second;</div>
<div class="line"><a name="l11414"></a><span class="lineno">11414</span>&#160;            }</div>
<div class="line"><a name="l11415"></a><span class="lineno">11415</span>&#160;        }</div>
<div class="line"><a name="l11416"></a><span class="lineno">11416</span>&#160;    }</div>
<div class="line"><a name="l11417"></a><span class="lineno">11417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classgun__mode.html">gun_mode</a>();</div>
<div class="line"><a name="l11418"></a><span class="lineno">11418</span>&#160;}</div>
<div class="line"><a name="l11419"></a><span class="lineno">11419</span>&#160; </div>
<div class="line"><a name="l11420"></a><span class="lineno"><a class="line" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">11420</a></span>&#160;<a class="code" href="classgun__mode.html">gun_mode</a> <a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">item::gun_current_mode</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11421"></a><span class="lineno">11421</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11422"></a><span class="lineno">11422</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#af128df748a75405ab738424bff725de5">gun_get_mode</a>( <a class="code" href="classitem.html#a3b83c2e0d1313b542801169382be1605">gun_get_mode_id</a>() );</div>
<div class="line"><a name="l11423"></a><span class="lineno">11423</span>&#160;}</div>
<div class="line"><a name="l11424"></a><span class="lineno">11424</span>&#160; </div>
<div class="line"><a name="l11425"></a><span class="lineno"><a class="line" href="classitem.html#a3b83c2e0d1313b542801169382be1605">11425</a></span>&#160;<a class="code" href="classstring__id.html">gun_mode_id</a> <a class="code" href="classitem.html#a3b83c2e0d1313b542801169382be1605">item::gun_get_mode_id</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11426"></a><span class="lineno">11426</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11427"></a><span class="lineno">11427</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l11428"></a><span class="lineno">11428</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#a8174d98bb32e389bd2e1ab691167f7b9">gun_mode_id</a>();</div>
<div class="line"><a name="l11429"></a><span class="lineno">11429</span>&#160;    }</div>
<div class="line"><a name="l11430"></a><span class="lineno">11430</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#a8174d98bb32e389bd2e1ab691167f7b9">gun_mode_id</a>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <a class="code" href="item_8cpp.html#adc11d823a2cedb6fcbcd76d3b6ce6828">GUN_MODE_VAR_NAME</a>, <span class="stringliteral">&quot;DEFAULT&quot;</span> ) );</div>
<div class="line"><a name="l11431"></a><span class="lineno">11431</span>&#160;}</div>
<div class="line"><a name="l11432"></a><span class="lineno">11432</span>&#160; </div>
<div class="line"><a name="l11433"></a><span class="lineno"><a class="line" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">11433</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">item::gun_set_mode</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">gun_mode_id</a> &amp;mode )</div>
<div class="line"><a name="l11434"></a><span class="lineno">11434</span>&#160;{</div>
<div class="line"><a name="l11435"></a><span class="lineno">11435</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() || !<a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( mode ) ) {</div>
<div class="line"><a name="l11436"></a><span class="lineno">11436</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11437"></a><span class="lineno">11437</span>&#160;    }</div>
<div class="line"><a name="l11438"></a><span class="lineno">11438</span>&#160;    <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <a class="code" href="item_8cpp.html#adc11d823a2cedb6fcbcd76d3b6ce6828">GUN_MODE_VAR_NAME</a>, mode.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l11439"></a><span class="lineno">11439</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11440"></a><span class="lineno">11440</span>&#160;}</div>
<div class="line"><a name="l11441"></a><span class="lineno">11441</span>&#160; </div>
<div class="line"><a name="l11442"></a><span class="lineno"><a class="line" href="classitem.html#a74a90ea94f124f8d857058c2704a7fc7">11442</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a74a90ea94f124f8d857058c2704a7fc7">item::gun_cycle_mode</a>()</div>
<div class="line"><a name="l11443"></a><span class="lineno">11443</span>&#160;{</div>
<div class="line"><a name="l11444"></a><span class="lineno">11444</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() || <a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l11445"></a><span class="lineno">11445</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l11446"></a><span class="lineno">11446</span>&#160;    }</div>
<div class="line"><a name="l11447"></a><span class="lineno">11447</span>&#160; </div>
<div class="line"><a name="l11448"></a><span class="lineno">11448</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">gun_mode_id</a> cur = <a class="code" href="classitem.html#a3b83c2e0d1313b542801169382be1605">gun_get_mode_id</a>();</div>
<div class="line"><a name="l11449"></a><span class="lineno">11449</span>&#160;    <span class="keyword">const</span> std::map&lt;gun_mode_id, gun_mode&gt; modes = <a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>();</div>
<div class="line"><a name="l11450"></a><span class="lineno">11450</span>&#160; </div>
<div class="line"><a name="l11451"></a><span class="lineno">11451</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = modes.begin(); iter != modes.end(); ++iter ) {</div>
<div class="line"><a name="l11452"></a><span class="lineno">11452</span>&#160;        <span class="keywordflow">if</span>( iter-&gt;first == cur ) {</div>
<div class="line"><a name="l11453"></a><span class="lineno">11453</span>&#160;            <span class="keywordflow">if</span>( std::next( iter ) == modes.end() ) {</div>
<div class="line"><a name="l11454"></a><span class="lineno">11454</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11455"></a><span class="lineno">11455</span>&#160;            }</div>
<div class="line"><a name="l11456"></a><span class="lineno">11456</span>&#160;            <a class="code" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">gun_set_mode</a>( std::next( iter )-&gt;first );</div>
<div class="line"><a name="l11457"></a><span class="lineno">11457</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l11458"></a><span class="lineno">11458</span>&#160;        }</div>
<div class="line"><a name="l11459"></a><span class="lineno">11459</span>&#160;    }</div>
<div class="line"><a name="l11460"></a><span class="lineno">11460</span>&#160;    <a class="code" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">gun_set_mode</a>( modes.begin()-&gt;first );</div>
<div class="line"><a name="l11461"></a><span class="lineno">11461</span>&#160;}</div>
<div class="line"><a name="l11462"></a><span class="lineno">11462</span>&#160; </div>
<div class="line"><a name="l11463"></a><span class="lineno"><a class="line" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">11463</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">item::get_use</a>( <span class="keyword">const</span> std::string &amp;use_name )<span class="keyword"> const</span></div>
<div class="line"><a name="l11464"></a><span class="lineno">11464</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11465"></a><span class="lineno">11465</span>&#160;    <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *fun = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11466"></a><span class="lineno">11466</span>&#160;    <a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>(</div>
<div class="line"><a name="l11467"></a><span class="lineno">11467</span>&#160;    [&amp;fun, &amp;use_name]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * it, <span class="keyword">auto</span> ) {</div>
<div class="line"><a name="l11468"></a><span class="lineno">11468</span>&#160;        <span class="keywordflow">if</span>( it == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11469"></a><span class="lineno">11469</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabeab85df04e922fe1dd3c1f0692faeaacef">VisitResponse::SKIP</a>;</div>
<div class="line"><a name="l11470"></a><span class="lineno">11470</span>&#160;        }</div>
<div class="line"><a name="l11471"></a><span class="lineno">11471</span>&#160;        fun = it-&gt;<a class="code" href="classitem.html#a33012849b7bf7ea24b61a1dbf6b90ad1">get_use_internal</a>( use_name );</div>
<div class="line"><a name="l11472"></a><span class="lineno">11472</span>&#160;        <span class="keywordflow">if</span>( fun != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11473"></a><span class="lineno">11473</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38">VisitResponse::ABORT</a>;</div>
<div class="line"><a name="l11474"></a><span class="lineno">11474</span>&#160;        }</div>
<div class="line"><a name="l11475"></a><span class="lineno">11475</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l11476"></a><span class="lineno">11476</span>&#160;    } );</div>
<div class="line"><a name="l11477"></a><span class="lineno">11477</span>&#160; </div>
<div class="line"><a name="l11478"></a><span class="lineno">11478</span>&#160;    <span class="keywordflow">return</span> fun;</div>
<div class="line"><a name="l11479"></a><span class="lineno">11479</span>&#160;}</div>
<div class="line"><a name="l11480"></a><span class="lineno">11480</span>&#160; </div>
<div class="line"><a name="l11481"></a><span class="lineno"><a class="line" href="classitem.html#a33012849b7bf7ea24b61a1dbf6b90ad1">11481</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *<a class="code" href="classitem.html#a33012849b7bf7ea24b61a1dbf6b90ad1">item::get_use_internal</a>( <span class="keyword">const</span> std::string &amp;use_name )<span class="keyword"> const</span></div>
<div class="line"><a name="l11482"></a><span class="lineno">11482</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11483"></a><span class="lineno">11483</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11484"></a><span class="lineno">11484</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( use_name );</div>
<div class="line"><a name="l11485"></a><span class="lineno">11485</span>&#160;    }</div>
<div class="line"><a name="l11486"></a><span class="lineno">11486</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11487"></a><span class="lineno">11487</span>&#160;}</div>
<div class="line"><a name="l11488"></a><span class="lineno">11488</span>&#160; </div>
<div class="line"><a name="l11489"></a><span class="lineno">11489</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Item&gt;</div>
<div class="line"><a name="l11490"></a><span class="lineno"><a class="line" href="classitem.html#a58c159edc49714bb9695b543ec0612b5">11490</a></span>&#160;Item *<a class="code" href="classitem.html#a58c159edc49714bb9695b543ec0612b5">item::get_usable_item_helper</a>( Item &amp;<span class="keyword">self</span>, <span class="keyword">const</span> std::string &amp;use_name )</div>
<div class="line"><a name="l11491"></a><span class="lineno">11491</span>&#160;{</div>
<div class="line"><a name="l11492"></a><span class="lineno">11492</span>&#160;    Item *<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l11493"></a><span class="lineno">11493</span>&#160;    <span class="keyword">self</span>.visit_items(</div>
<div class="line"><a name="l11494"></a><span class="lineno">11494</span>&#160;    [&amp;<a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, &amp;use_name]( <a class="code" href="classitem.html">item</a> * it, <span class="keyword">auto</span> ) {</div>
<div class="line"><a name="l11495"></a><span class="lineno">11495</span>&#160;        <span class="keywordflow">if</span>( it == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11496"></a><span class="lineno">11496</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabeab85df04e922fe1dd3c1f0692faeaacef">VisitResponse::SKIP</a>;</div>
<div class="line"><a name="l11497"></a><span class="lineno">11497</span>&#160;        }</div>
<div class="line"><a name="l11498"></a><span class="lineno">11498</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a33012849b7bf7ea24b61a1dbf6b90ad1">get_use_internal</a>( use_name ) ) {</div>
<div class="line"><a name="l11499"></a><span class="lineno">11499</span>&#160;            ret = it;</div>
<div class="line"><a name="l11500"></a><span class="lineno">11500</span>&#160;            return VisitResponse::ABORT;</div>
<div class="line"><a name="l11501"></a><span class="lineno">11501</span>&#160;        }</div>
<div class="line"><a name="l11502"></a><span class="lineno">11502</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l11503"></a><span class="lineno">11503</span>&#160;    } );</div>
<div class="line"><a name="l11504"></a><span class="lineno">11504</span>&#160; </div>
<div class="line"><a name="l11505"></a><span class="lineno">11505</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l11506"></a><span class="lineno">11506</span>&#160;}</div>
<div class="line"><a name="l11507"></a><span class="lineno">11507</span>&#160; </div>
<div class="line"><a name="l11508"></a><span class="lineno"><a class="line" href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">11508</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">item::get_usable_item</a>( <span class="keyword">const</span> std::string &amp;use_name )<span class="keyword"> const</span></div>
<div class="line"><a name="l11509"></a><span class="lineno">11509</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11510"></a><span class="lineno">11510</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a58c159edc49714bb9695b543ec0612b5">get_usable_item_helper</a>( *<span class="keyword">this</span>, use_name );</div>
<div class="line"><a name="l11511"></a><span class="lineno">11511</span>&#160;}</div>
<div class="line"><a name="l11512"></a><span class="lineno">11512</span>&#160; </div>
<div class="line"><a name="l11513"></a><span class="lineno"><a class="line" href="classitem.html#a230c9ca0754cc8999c7d0136c93a5441">11513</a></span>&#160;<a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">item::get_usable_item</a>( <span class="keyword">const</span> std::string &amp;use_name )</div>
<div class="line"><a name="l11514"></a><span class="lineno">11514</span>&#160;{</div>
<div class="line"><a name="l11515"></a><span class="lineno">11515</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a58c159edc49714bb9695b543ec0612b5">get_usable_item_helper</a>( *<span class="keyword">this</span>, use_name );</div>
<div class="line"><a name="l11516"></a><span class="lineno">11516</span>&#160;}</div>
<div class="line"><a name="l11517"></a><span class="lineno">11517</span>&#160; </div>
<div class="line"><a name="l11518"></a><span class="lineno">11518</span>&#160;<a class="code" href="classitem_1_1reload__option.html#a075045eb345075b8cf3c44bb327a8d74">item::reload_option::reload_option</a>( <span class="keyword">const</span> reload_option &amp; ) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l11519"></a><span class="lineno">11519</span>&#160; </div>
<div class="line"><a name="l11520"></a><span class="lineno">11520</span>&#160;<a class="code" href="classitem_1_1reload__option.html">item::reload_option</a> &amp;<a class="code" href="classitem_1_1reload__option.html#a102ec0b737abdb53099f16e836d3fe27">item::reload_option::operator=</a>( <span class="keyword">const</span> reload_option &amp; ) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l11521"></a><span class="lineno">11521</span>&#160; </div>
<div class="line"><a name="l11522"></a><span class="lineno"><a class="line" href="classitem_1_1reload__option.html#a844a1fca925378e4f7d4ef93b67bb82d">11522</a></span>&#160;<a class="code" href="classitem_1_1reload__option.html#a075045eb345075b8cf3c44bb327a8d74">item::reload_option::reload_option</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> *who, <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;target,</div>
<div class="line"><a name="l11523"></a><span class="lineno">11523</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;ammo ) :</div>
<div class="line"><a name="l11524"></a><span class="lineno">11524</span>&#160;    who( who ), target( target ), ammo( ammo )</div>
<div class="line"><a name="l11525"></a><span class="lineno">11525</span>&#160;{</div>
<div class="line"><a name="l11526"></a><span class="lineno">11526</span>&#160;    <span class="keywordflow">if</span>( this-&gt;target-&gt;<a class="code" href="classitem.html#a44a8bb6387c8f43fa1040ded39d5b776">is_ammo_belt</a>() &amp;&amp; this-&gt;target-&gt;type-&gt;magazine-&gt;linkage ) {</div>
<div class="line"><a name="l11527"></a><span class="lineno">11527</span>&#160;        <a class="code" href="classitem_1_1reload__option.html#abe3eedb7c460ff13cb1eeb782ae0f876">max_qty</a> = this-&gt;who-&gt;<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( * this-&gt;target-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;linkage );</div>
<div class="line"><a name="l11528"></a><span class="lineno">11528</span>&#160;    }</div>
<div class="line"><a name="l11529"></a><span class="lineno">11529</span>&#160;    <a class="code" href="classitem_1_1reload__option.html#af99909229b18cb529592856884124187">qty</a>( <a class="code" href="classitem_1_1reload__option.html#abe3eedb7c460ff13cb1eeb782ae0f876">max_qty</a> );</div>
<div class="line"><a name="l11530"></a><span class="lineno">11530</span>&#160;}</div>
<div class="line"><a name="l11531"></a><span class="lineno">11531</span>&#160; </div>
<div class="line"><a name="l11532"></a><span class="lineno"><a class="line" href="classitem_1_1reload__option.html#ab7102268fec39b1a9104321e4f2c98f5">11532</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem_1_1reload__option.html#ab7102268fec39b1a9104321e4f2c98f5">item::reload_option::moves</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11533"></a><span class="lineno">11533</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11534"></a><span class="lineno">11534</span>&#160;    <span class="keywordtype">int</span> mv = ammo.obtain_cost( *who, qty() ) + who-&gt;item_reload_cost( *target, *ammo, qty() );</div>
<div class="line"><a name="l11535"></a><span class="lineno">11535</span>&#160;    <span class="keywordflow">if</span>( target.has_parent() ) {</div>
<div class="line"><a name="l11536"></a><span class="lineno">11536</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> parent = target.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>();</div>
<div class="line"><a name="l11537"></a><span class="lineno">11537</span>&#160;        <span class="keywordflow">if</span>( parent-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !target-&gt;is_gunmod() ) {</div>
<div class="line"><a name="l11538"></a><span class="lineno">11538</span>&#160;            mv += parent-&gt;<a class="code" href="classitem.html#aad3353f629e527eb4b9f6c2f666f9e36">get_reload_time</a>() * 1.5;</div>
<div class="line"><a name="l11539"></a><span class="lineno">11539</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( parent-&gt;<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l11540"></a><span class="lineno">11540</span>&#160;            mv += 100;</div>
<div class="line"><a name="l11541"></a><span class="lineno">11541</span>&#160;        }</div>
<div class="line"><a name="l11542"></a><span class="lineno">11542</span>&#160;    }</div>
<div class="line"><a name="l11543"></a><span class="lineno">11543</span>&#160;    <span class="keywordflow">return</span> mv;</div>
<div class="line"><a name="l11544"></a><span class="lineno">11544</span>&#160;}</div>
<div class="line"><a name="l11545"></a><span class="lineno">11545</span>&#160; </div>
<div class="line"><a name="l11546"></a><span class="lineno"><a class="line" href="classitem_1_1reload__option.html#ac5f59d2ca554c8428cc2d1345efecaef">11546</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem_1_1reload__option.html#af99909229b18cb529592856884124187">item::reload_option::qty</a>( <span class="keywordtype">int</span> val )</div>
<div class="line"><a name="l11547"></a><span class="lineno">11547</span>&#160;{</div>
<div class="line"><a name="l11548"></a><span class="lineno">11548</span>&#160;    <span class="keywordtype">bool</span> ammo_in_container = ammo-&gt;is_ammo_container();</div>
<div class="line"><a name="l11549"></a><span class="lineno">11549</span>&#160;    <span class="keywordtype">bool</span> ammo_in_liquid_container = ammo-&gt;is_watertight_container();</div>
<div class="line"><a name="l11550"></a><span class="lineno">11550</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;ammo_obj = ( ammo_in_container || ammo_in_liquid_container ) ?</div>
<div class="line"><a name="l11551"></a><span class="lineno">11551</span>&#160;                     <span class="comment">// this is probably not the right way to do this. there is no guarantee whatsoever that ammo_obj will be an ammo</span></div>
<div class="line"><a name="l11552"></a><span class="lineno">11552</span>&#160;                     *ammo-&gt;<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ).front() : *ammo;</div>
<div class="line"><a name="l11553"></a><span class="lineno">11553</span>&#160; </div>
<div class="line"><a name="l11554"></a><span class="lineno">11554</span>&#160;    <span class="keywordflow">if</span>( ( ammo_in_container &amp;&amp; !ammo_obj.<a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) ||</div>
<div class="line"><a name="l11555"></a><span class="lineno">11555</span>&#160;        ( ammo_in_liquid_container &amp;&amp; !ammo_obj.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) ) {</div>
<div class="line"><a name="l11556"></a><span class="lineno">11556</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid reload option: %s&quot;</span>, ammo_obj.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l11557"></a><span class="lineno">11557</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l11558"></a><span class="lineno">11558</span>&#160;    }</div>
<div class="line"><a name="l11559"></a><span class="lineno">11559</span>&#160; </div>
<div class="line"><a name="l11560"></a><span class="lineno">11560</span>&#160;    <span class="comment">// Checking ammo capacity implicitly limits guns with removable magazines to capacity 0.</span></div>
<div class="line"><a name="l11561"></a><span class="lineno">11561</span>&#160;    <span class="comment">// This gets rounded up to 1 later.</span></div>
<div class="line"><a name="l11562"></a><span class="lineno">11562</span>&#160;    <span class="keywordtype">int</span> remaining_capacity = target-&gt;is_watertight_container() ?</div>
<div class="line"><a name="l11563"></a><span class="lineno">11563</span>&#160;                             target-&gt;get_remaining_capacity_for_liquid( ammo_obj, <span class="keyword">true</span> ) :</div>
<div class="line"><a name="l11564"></a><span class="lineno">11564</span>&#160;                             target-&gt;remaining_ammo_capacity();</div>
<div class="line"><a name="l11565"></a><span class="lineno">11565</span>&#160;    <span class="keywordflow">if</span>( target-&gt;has_flag( <a class="code" href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a> ) &amp;&amp;</div>
<div class="line"><a name="l11566"></a><span class="lineno">11566</span>&#160;        !( ammo-&gt;has_flag( <a class="code" href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a> ) || ammo-&gt;has_flag( <a class="code" href="flag_8cpp.html#ac8832d07bcc08aa7dc7a1cefea521b12">flag_SPEEDLOADER_CLIP</a> ) ) ) {</div>
<div class="line"><a name="l11567"></a><span class="lineno">11567</span>&#160;        remaining_capacity = 1;</div>
<div class="line"><a name="l11568"></a><span class="lineno">11568</span>&#160;    }</div>
<div class="line"><a name="l11569"></a><span class="lineno">11569</span>&#160;    <span class="keywordflow">if</span>( ammo_obj.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> ) {</div>
<div class="line"><a name="l11570"></a><span class="lineno">11570</span>&#160;        <span class="keywordflow">if</span>( ammo_obj.<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() == <a class="code" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a> ) {</div>
<div class="line"><a name="l11571"></a><span class="lineno">11571</span>&#160;            remaining_capacity = remaining_capacity / <a class="code" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> +</div>
<div class="line"><a name="l11572"></a><span class="lineno">11572</span>&#160;                                 ( remaining_capacity % <a class="code" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> != 0 );</div>
<div class="line"><a name="l11573"></a><span class="lineno">11573</span>&#160;        }</div>
<div class="line"><a name="l11574"></a><span class="lineno">11574</span>&#160;    }</div>
<div class="line"><a name="l11575"></a><span class="lineno">11575</span>&#160; </div>
<div class="line"><a name="l11576"></a><span class="lineno">11576</span>&#160;    <span class="keywordtype">bool</span> ammo_by_charges = ammo_obj.<a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() || ammo_in_liquid_container;</div>
<div class="line"><a name="l11577"></a><span class="lineno">11577</span>&#160;    <span class="keywordtype">int</span> available_ammo;</div>
<div class="line"><a name="l11578"></a><span class="lineno">11578</span>&#160;    <span class="keywordflow">if</span>( ammo-&gt;has_flag( <a class="code" href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a> ) || ammo-&gt;has_flag( <a class="code" href="flag_8cpp.html#ac8832d07bcc08aa7dc7a1cefea521b12">flag_SPEEDLOADER_CLIP</a> ) ) {</div>
<div class="line"><a name="l11579"></a><span class="lineno">11579</span>&#160;        available_ammo = ammo_obj.<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l11580"></a><span class="lineno">11580</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11581"></a><span class="lineno">11581</span>&#160;        available_ammo = ammo_by_charges ? ammo_obj.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : ammo_obj.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l11582"></a><span class="lineno">11582</span>&#160;    }</div>
<div class="line"><a name="l11583"></a><span class="lineno">11583</span>&#160;    <span class="comment">// constrain by available ammo, target capacity and other external factors (max_qty)</span></div>
<div class="line"><a name="l11584"></a><span class="lineno">11584</span>&#160;    <span class="comment">// @ref max_qty is currently set when reloading ammo belts and limits to available linkages</span></div>
<div class="line"><a name="l11585"></a><span class="lineno">11585</span>&#160;    qty_ = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( { val, available_ammo, remaining_capacity, max_qty } );</div>
<div class="line"><a name="l11586"></a><span class="lineno">11586</span>&#160; </div>
<div class="line"><a name="l11587"></a><span class="lineno">11587</span>&#160;    <span class="comment">// always expect to reload at least one charge</span></div>
<div class="line"><a name="l11588"></a><span class="lineno">11588</span>&#160;    qty_ = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( qty_, 1 );</div>
<div class="line"><a name="l11589"></a><span class="lineno">11589</span>&#160; </div>
<div class="line"><a name="l11590"></a><span class="lineno">11590</span>&#160;}</div>
<div class="line"><a name="l11591"></a><span class="lineno">11591</span>&#160; </div>
<div class="line"><a name="l11592"></a><span class="lineno"><a class="line" href="classitem.html#af80e153fc97fb09df58a5be7302ae898">11592</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#af80e153fc97fb09df58a5be7302ae898">item::casings_count</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11593"></a><span class="lineno">11593</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11594"></a><span class="lineno">11594</span>&#160;    <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><a name="l11595"></a><span class="lineno">11595</span>&#160; </div>
<div class="line"><a name="l11596"></a><span class="lineno">11596</span>&#160;    <span class="keyword">const_cast&lt;</span><a class="code" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( this )-&gt;<a class="code" href="classitem.html#a9f29e8940a146016690f2776939a2980">casings_handle</a>( [&amp;res]( <a class="code" href="classitem.html">item</a> &amp; ) {</div>
<div class="line"><a name="l11597"></a><span class="lineno">11597</span>&#160;        ++res;</div>
<div class="line"><a name="l11598"></a><span class="lineno">11598</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11599"></a><span class="lineno">11599</span>&#160;    } );</div>
<div class="line"><a name="l11600"></a><span class="lineno">11600</span>&#160; </div>
<div class="line"><a name="l11601"></a><span class="lineno">11601</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l11602"></a><span class="lineno">11602</span>&#160;}</div>
<div class="line"><a name="l11603"></a><span class="lineno">11603</span>&#160; </div>
<div class="line"><a name="l11604"></a><span class="lineno"><a class="line" href="classitem.html#a9f29e8940a146016690f2776939a2980">11604</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9f29e8940a146016690f2776939a2980">item::casings_handle</a>( <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;<a class="code" href="structfunc.html">func</a> )</div>
<div class="line"><a name="l11605"></a><span class="lineno">11605</span>&#160;{</div>
<div class="line"><a name="l11606"></a><span class="lineno">11606</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; !<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l11607"></a><span class="lineno">11607</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l11608"></a><span class="lineno">11608</span>&#160;    }</div>
<div class="line"><a name="l11609"></a><span class="lineno">11609</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aaf36bbee755b0f90c43eecefdd36fc39">casings_handle</a>( <a class="code" href="structfunc.html">func</a> );</div>
<div class="line"><a name="l11610"></a><span class="lineno">11610</span>&#160;}</div>
<div class="line"><a name="l11611"></a><span class="lineno">11611</span>&#160; </div>
<div class="line"><a name="l11612"></a><span class="lineno"><a class="line" href="classitem.html#a9b7de1507e4000d58e9d813354073188">11612</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9b7de1507e4000d58e9d813354073188">item::reload</a>( <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>, <a class="code" href="classitem__location.html">item_location</a> ammo, <span class="keywordtype">int</span> qty )</div>
<div class="line"><a name="l11613"></a><span class="lineno">11613</span>&#160;{</div>
<div class="line"><a name="l11614"></a><span class="lineno">11614</span>&#160;    <span class="keywordflow">if</span>( qty &lt;= 0 ) {</div>
<div class="line"><a name="l11615"></a><span class="lineno">11615</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to reload zero or less charges&quot;</span> );</div>
<div class="line"><a name="l11616"></a><span class="lineno">11616</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11617"></a><span class="lineno">11617</span>&#160;    }</div>
<div class="line"><a name="l11618"></a><span class="lineno">11618</span>&#160; </div>
<div class="line"><a name="l11619"></a><span class="lineno">11619</span>&#160;    <span class="keywordflow">if</span>( !ammo ) {</div>
<div class="line"><a name="l11620"></a><span class="lineno">11620</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to reload using non-existent ammo&quot;</span> );</div>
<div class="line"><a name="l11621"></a><span class="lineno">11621</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11622"></a><span class="lineno">11622</span>&#160;    }</div>
<div class="line"><a name="l11623"></a><span class="lineno">11623</span>&#160; </div>
<div class="line"><a name="l11624"></a><span class="lineno">11624</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#af021f8399f7a270c4fecbe717b92828e">can_reload_with</a>( *ammo.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>(), <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l11625"></a><span class="lineno">11625</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11626"></a><span class="lineno">11626</span>&#160;    }</div>
<div class="line"><a name="l11627"></a><span class="lineno">11627</span>&#160; </div>
<div class="line"><a name="l11628"></a><span class="lineno">11628</span>&#160;    <span class="keywordtype">bool</span> ammo_from_map = !ammo.<a class="code" href="classitem__location.html#a337696f1679154f092c1e941dc10ba12">held_by</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> );</div>
<div class="line"><a name="l11629"></a><span class="lineno">11629</span>&#160;    <span class="keywordflow">if</span>( ammo-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a> ) || ammo-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac8832d07bcc08aa7dc7a1cefea521b12">flag_SPEEDLOADER_CLIP</a> ) ) {</div>
<div class="line"><a name="l11630"></a><span class="lineno">11630</span>&#160;        <span class="comment">// if the thing passed in is a speed loader, we want the ammo</span></div>
<div class="line"><a name="l11631"></a><span class="lineno">11631</span>&#160;        ammo = <a class="code" href="classitem__location.html">item_location</a>( ammo, &amp;ammo-&gt;<a class="code" href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">first_ammo</a>() );</div>
<div class="line"><a name="l11632"></a><span class="lineno">11632</span>&#160;    }</div>
<div class="line"><a name="l11633"></a><span class="lineno">11633</span>&#160; </div>
<div class="line"><a name="l11634"></a><span class="lineno">11634</span>&#160;    <span class="comment">// limit quantity of ammo loaded to remaining capacity</span></div>
<div class="line"><a name="l11635"></a><span class="lineno">11635</span>&#160;    <span class="keywordtype">int</span> limit = 0;</div>
<div class="line"><a name="l11636"></a><span class="lineno">11636</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a22ad63b72a459c8f95893a853348cb06">is_watertight_container</a>() &amp;&amp; ammo-&gt;<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l11637"></a><span class="lineno">11637</span>&#160;        limit = <a class="code" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">get_remaining_capacity_for_liquid</a>( *ammo );</div>
<div class="line"><a name="l11638"></a><span class="lineno">11638</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ammo-&gt;<a class="code" href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">is_ammo</a>() ) {</div>
<div class="line"><a name="l11639"></a><span class="lineno">11639</span>&#160;        limit = <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( ammo-&gt;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() ) - <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l11640"></a><span class="lineno">11640</span>&#160;    }</div>
<div class="line"><a name="l11641"></a><span class="lineno">11641</span>&#160; </div>
<div class="line"><a name="l11642"></a><span class="lineno">11642</span>&#160;    <span class="keywordflow">if</span>( ammo-&gt;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() == <a class="code" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a> ) {</div>
<div class="line"><a name="l11643"></a><span class="lineno">11643</span>&#160;        limit = limit / <a class="code" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> + ( limit % <a class="code" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a> != 0 );</div>
<div class="line"><a name="l11644"></a><span class="lineno">11644</span>&#160;    }</div>
<div class="line"><a name="l11645"></a><span class="lineno">11645</span>&#160; </div>
<div class="line"><a name="l11646"></a><span class="lineno">11646</span>&#160;    qty = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty, limit );</div>
<div class="line"><a name="l11647"></a><span class="lineno">11647</span>&#160; </div>
<div class="line"><a name="l11648"></a><span class="lineno">11648</span>&#160;    <a class="code" href="classitem.html#a9f29e8940a146016690f2776939a2980">casings_handle</a>( [&amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>]( <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l11649"></a><span class="lineno">11649</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.i_add_or_drop( e );</div>
<div class="line"><a name="l11650"></a><span class="lineno">11650</span>&#160;    } );</div>
<div class="line"><a name="l11651"></a><span class="lineno">11651</span>&#160; </div>
<div class="line"><a name="l11652"></a><span class="lineno">11652</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() ) {</div>
<div class="line"><a name="l11653"></a><span class="lineno">11653</span>&#160;        qty = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty, ammo-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a name="l11654"></a><span class="lineno">11654</span>&#160; </div>
<div class="line"><a name="l11655"></a><span class="lineno">11655</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a44a8bb6387c8f43fa1040ded39d5b776">is_ammo_belt</a>() &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;linkage ) {</div>
<div class="line"><a name="l11656"></a><span class="lineno">11656</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.use_charges_if_avail( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">magazine</a>-&gt;linkage, qty ) ) {</div>
<div class="line"><a name="l11657"></a><span class="lineno">11657</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;insufficient linkages available when reloading ammo belt&quot;</span> );</div>
<div class="line"><a name="l11658"></a><span class="lineno">11658</span>&#160;            }</div>
<div class="line"><a name="l11659"></a><span class="lineno">11659</span>&#160;        }</div>
<div class="line"><a name="l11660"></a><span class="lineno">11660</span>&#160; </div>
<div class="line"><a name="l11661"></a><span class="lineno">11661</span>&#160;        <a class="code" href="classitem.html">item</a> item_copy( *ammo );</div>
<div class="line"><a name="l11662"></a><span class="lineno">11662</span>&#160;        ammo-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= qty;</div>
<div class="line"><a name="l11663"></a><span class="lineno">11663</span>&#160; </div>
<div class="line"><a name="l11664"></a><span class="lineno">11664</span>&#160;        <span class="keywordflow">if</span>( ammo-&gt;<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>() == <a class="code" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a> ) {</div>
<div class="line"><a name="l11665"></a><span class="lineno">11665</span>&#160;            <span class="comment">// any excess is wasted rather than overfilling the item</span></div>
<div class="line"><a name="l11666"></a><span class="lineno">11666</span>&#160;            item_copy.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( qty * <a class="code" href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a>, <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a> ) );</div>
<div class="line"><a name="l11667"></a><span class="lineno">11667</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11668"></a><span class="lineno">11668</span>&#160;            item_copy.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = qty;</div>
<div class="line"><a name="l11669"></a><span class="lineno">11669</span>&#160;        }</div>
<div class="line"><a name="l11670"></a><span class="lineno">11670</span>&#160; </div>
<div class="line"><a name="l11671"></a><span class="lineno">11671</span>&#160;        <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( item_copy, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> );</div>
<div class="line"><a name="l11672"></a><span class="lineno">11672</span>&#160; </div>
<div class="line"><a name="l11673"></a><span class="lineno">11673</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a22ad63b72a459c8f95893a853348cb06">is_watertight_container</a>() &amp;&amp; ammo-&gt;<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l11674"></a><span class="lineno">11674</span>&#160;        <a class="code" href="classitem.html">item</a> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>( *ammo );</div>
<div class="line"><a name="l11675"></a><span class="lineno">11675</span>&#160;        <a class="code" href="classitem.html#abfc3474737590a81c25c5c5d7154aaa2">fill_with</a>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>, qty );</div>
<div class="line"><a name="l11676"></a><span class="lineno">11676</span>&#160;        <span class="keywordflow">if</span>( ammo.<a class="code" href="classitem__location.html#afbeb9ca7c1b58ec0564c0ffa437e415a">has_parent</a>() ) {</div>
<div class="line"><a name="l11677"></a><span class="lineno">11677</span>&#160;            ammo.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>()-&gt;<a class="code" href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1">contained_where</a>( *ammo.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>() )-&gt;<a class="code" href="classitem__pocket.html#afc5c39b878142d094c7d61ddb802920a">on_contents_changed</a>();</div>
<div class="line"><a name="l11678"></a><span class="lineno">11678</span>&#160;        }</div>
<div class="line"><a name="l11679"></a><span class="lineno">11679</span>&#160;        ammo-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= qty;</div>
<div class="line"><a name="l11680"></a><span class="lineno">11680</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11681"></a><span class="lineno">11681</span>&#160;        <a class="code" href="classitem.html">item</a> magazine_removed;</div>
<div class="line"><a name="l11682"></a><span class="lineno">11682</span>&#160;        <span class="keywordtype">bool</span> allow_wield = <span class="keyword">false</span>;</div>
<div class="line"><a name="l11683"></a><span class="lineno">11683</span>&#160;        <span class="comment">// if we already have a magazine loaded prompt to eject it</span></div>
<div class="line"><a name="l11684"></a><span class="lineno">11684</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l11685"></a><span class="lineno">11685</span>&#160;            <span class="comment">// we don&#39;t want to replace wielded `ammo` with ejected magazine</span></div>
<div class="line"><a name="l11686"></a><span class="lineno">11686</span>&#160;            <span class="comment">// as it will invalidate `ammo`. Also keep wielding the item being reloaded.</span></div>
<div class="line"><a name="l11687"></a><span class="lineno">11687</span>&#160;            allow_wield = ( !<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.is_wielding( *ammo ) &amp;&amp; !<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.is_wielding( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l11688"></a><span class="lineno">11688</span>&#160;            <span class="comment">// Defer placing the magazine into inventory until new magazine is installed.</span></div>
<div class="line"><a name="l11689"></a><span class="lineno">11689</span>&#160;            magazine_removed = *<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l11690"></a><span class="lineno">11690</span>&#160;            <a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() );</div>
<div class="line"><a name="l11691"></a><span class="lineno">11691</span>&#160;        }</div>
<div class="line"><a name="l11692"></a><span class="lineno">11692</span>&#160; </div>
<div class="line"><a name="l11693"></a><span class="lineno">11693</span>&#160;        <a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( *ammo, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> );</div>
<div class="line"><a name="l11694"></a><span class="lineno">11694</span>&#160;        ammo.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l11695"></a><span class="lineno">11695</span>&#160;        <span class="keywordflow">if</span>( ammo_from_map ) {</div>
<div class="line"><a name="l11696"></a><span class="lineno">11696</span>&#160;            <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.invalidate_weight_carried_cache();</div>
<div class="line"><a name="l11697"></a><span class="lineno">11697</span>&#160;        }</div>
<div class="line"><a name="l11698"></a><span class="lineno">11698</span>&#160;        <span class="keywordflow">if</span>( magazine_removed.<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> != <a class="code" href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">nullitem</a>() ) {</div>
<div class="line"><a name="l11699"></a><span class="lineno">11699</span>&#160;            <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.i_add( magazine_removed, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, allow_wield );</div>
<div class="line"><a name="l11700"></a><span class="lineno">11700</span>&#160;        }</div>
<div class="line"><a name="l11701"></a><span class="lineno">11701</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11702"></a><span class="lineno">11702</span>&#160;    }</div>
<div class="line"><a name="l11703"></a><span class="lineno">11703</span>&#160; </div>
<div class="line"><a name="l11704"></a><span class="lineno">11704</span>&#160;    <span class="keywordflow">if</span>( ammo-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a name="l11705"></a><span class="lineno">11705</span>&#160;        ammo.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l11706"></a><span class="lineno">11706</span>&#160;    }</div>
<div class="line"><a name="l11707"></a><span class="lineno">11707</span>&#160;    <span class="keywordflow">if</span>( ammo_from_map ) {</div>
<div class="line"><a name="l11708"></a><span class="lineno">11708</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.invalidate_weight_carried_cache();</div>
<div class="line"><a name="l11709"></a><span class="lineno">11709</span>&#160;    }</div>
<div class="line"><a name="l11710"></a><span class="lineno">11710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11711"></a><span class="lineno">11711</span>&#160;}</div>
<div class="line"><a name="l11712"></a><span class="lineno">11712</span>&#160; </div>
<div class="line"><a name="l11713"></a><span class="lineno"><a class="line" href="classitem.html#a63b6654a99f9b300a313a6921d134bf2">11713</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a63b6654a99f9b300a313a6921d134bf2">item::simulate_burn</a>( <a class="code" href="structfire__data.html">fire_data</a> &amp;frd )<span class="keyword"> const</span></div>
<div class="line"><a name="l11714"></a><span class="lineno">11714</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11715"></a><span class="lineno">11715</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l11716"></a><span class="lineno">11716</span>&#160;    <span class="keywordtype">float</span> smoke_added = 0.0f;</div>
<div class="line"><a name="l11717"></a><span class="lineno">11717</span>&#160;    <span class="keywordtype">float</span> time_added = 0.0f;</div>
<div class="line"><a name="l11718"></a><span class="lineno">11718</span>&#160;    <span class="keywordtype">float</span> burn_added = 0.0f;</div>
<div class="line"><a name="l11719"></a><span class="lineno">11719</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> vol = <a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>();</div>
<div class="line"><a name="l11720"></a><span class="lineno">11720</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> effective_intensity = frd.<a class="code" href="structfire__data.html#a9c5c2a6dc6f4efe05e65885660bb3893">contained</a> ? 3 : frd.<a class="code" href="structfire__data.html#a534803a1b5139df57bfad4bd186de812">fire_intensity</a>;</div>
<div class="line"><a name="l11721"></a><span class="lineno">11721</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;m : mats ) {</div>
<div class="line"><a name="l11722"></a><span class="lineno">11722</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmat__burn__data.html">mat_burn_data</a> &amp;bd = m.first-&gt;burn_data( effective_intensity );</div>
<div class="line"><a name="l11723"></a><span class="lineno">11723</span>&#160;        <span class="keywordflow">if</span>( bd.<a class="code" href="structmat__burn__data.html#a304f96d38e70395b7625d2c80f56de1c">immune</a> ) {</div>
<div class="line"><a name="l11724"></a><span class="lineno">11724</span>&#160;            <span class="comment">// Made to protect from fire</span></div>
<div class="line"><a name="l11725"></a><span class="lineno">11725</span>&#160;            <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l11726"></a><span class="lineno">11726</span>&#160;        }</div>
<div class="line"><a name="l11727"></a><span class="lineno">11727</span>&#160; </div>
<div class="line"><a name="l11728"></a><span class="lineno">11728</span>&#160;        <span class="comment">// If fire is contained, burn rate is independent of volume</span></div>
<div class="line"><a name="l11729"></a><span class="lineno">11729</span>&#160;        <span class="keywordflow">if</span>( frd.<a class="code" href="structfire__data.html#a9c5c2a6dc6f4efe05e65885660bb3893">contained</a> || bd.<a class="code" href="structmat__burn__data.html#a7d46d977a131b61638e03a07421f51db">volume_per_turn</a> == 0_ml ) {</div>
<div class="line"><a name="l11730"></a><span class="lineno">11730</span>&#160;            time_added += bd.<a class="code" href="structmat__burn__data.html#ae107a447a65043c0c2fc12822c9115de">fuel</a> * m.second;</div>
<div class="line"><a name="l11731"></a><span class="lineno">11731</span>&#160;            smoke_added += bd.<a class="code" href="structmat__burn__data.html#a83f739c4ded3561758edc02f41146d66">smoke</a> * m.second;</div>
<div class="line"><a name="l11732"></a><span class="lineno">11732</span>&#160;            burn_added += bd.<a class="code" href="structmat__burn__data.html#af4c94b496313de97c30c86d1dae2a02b">burn</a> * m.second;</div>
<div class="line"><a name="l11733"></a><span class="lineno">11733</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11734"></a><span class="lineno">11734</span>&#160;            <span class="keywordtype">double</span> volume_burn_rate = <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">to_liter</a>( bd.<a class="code" href="structmat__burn__data.html#a7d46d977a131b61638e03a07421f51db">volume_per_turn</a> ) / <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">to_liter</a>( vol );</div>
<div class="line"><a name="l11735"></a><span class="lineno">11735</span>&#160;            time_added += bd.<a class="code" href="structmat__burn__data.html#ae107a447a65043c0c2fc12822c9115de">fuel</a> * volume_burn_rate * m.second;</div>
<div class="line"><a name="l11736"></a><span class="lineno">11736</span>&#160;            smoke_added += bd.<a class="code" href="structmat__burn__data.html#a83f739c4ded3561758edc02f41146d66">smoke</a> * volume_burn_rate * m.second;</div>
<div class="line"><a name="l11737"></a><span class="lineno">11737</span>&#160;            burn_added += bd.<a class="code" href="structmat__burn__data.html#af4c94b496313de97c30c86d1dae2a02b">burn</a> * volume_burn_rate * m.second;</div>
<div class="line"><a name="l11738"></a><span class="lineno">11738</span>&#160;        }</div>
<div class="line"><a name="l11739"></a><span class="lineno">11739</span>&#160;    }</div>
<div class="line"><a name="l11740"></a><span class="lineno">11740</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mat_total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l11741"></a><span class="lineno">11741</span>&#160; </div>
<div class="line"><a name="l11742"></a><span class="lineno">11742</span>&#160;    <span class="comment">// Liquids that don&#39;t burn well smother fire well instead</span></div>
<div class="line"><a name="l11743"></a><span class="lineno">11743</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; time_added &lt; 200 ) {</div>
<div class="line"><a name="l11744"></a><span class="lineno">11744</span>&#160;        time_added -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 400.0 * <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">to_liter</a>( vol ), 1200.0 * <a class="code" href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">to_liter</a>( vol ) );</div>
<div class="line"><a name="l11745"></a><span class="lineno">11745</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mats.size() &gt; 1 ) {</div>
<div class="line"><a name="l11746"></a><span class="lineno">11746</span>&#160;        <span class="comment">// Average the materials</span></div>
<div class="line"><a name="l11747"></a><span class="lineno">11747</span>&#160;        time_added /= mat_total;</div>
<div class="line"><a name="l11748"></a><span class="lineno">11748</span>&#160;        smoke_added /= mat_total;</div>
<div class="line"><a name="l11749"></a><span class="lineno">11749</span>&#160;        burn_added /= mat_total;</div>
<div class="line"><a name="l11750"></a><span class="lineno">11750</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( mats.empty() ) {</div>
<div class="line"><a name="l11751"></a><span class="lineno">11751</span>&#160;        <span class="comment">// Non-liquid items with no specified materials will burn at moderate speed</span></div>
<div class="line"><a name="l11752"></a><span class="lineno">11752</span>&#160;        burn_added = 1;</div>
<div class="line"><a name="l11753"></a><span class="lineno">11753</span>&#160;    }</div>
<div class="line"><a name="l11754"></a><span class="lineno">11754</span>&#160; </div>
<div class="line"><a name="l11755"></a><span class="lineno">11755</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l11756"></a><span class="lineno">11756</span>&#160;        <span class="keywordtype">int</span> stack_burnt = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> / 2, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> );</div>
<div class="line"><a name="l11757"></a><span class="lineno">11757</span>&#160;        time_added *= stack_burnt;</div>
<div class="line"><a name="l11758"></a><span class="lineno">11758</span>&#160;        smoke_added *= stack_burnt;</div>
<div class="line"><a name="l11759"></a><span class="lineno">11759</span>&#160;        burn_added *= stack_burnt;</div>
<div class="line"><a name="l11760"></a><span class="lineno">11760</span>&#160;    }</div>
<div class="line"><a name="l11761"></a><span class="lineno">11761</span>&#160; </div>
<div class="line"><a name="l11762"></a><span class="lineno">11762</span>&#160;    frd.<a class="code" href="structfire__data.html#a766c1e9448a11a83188b5e97e3276004">fuel_produced</a> += time_added;</div>
<div class="line"><a name="l11763"></a><span class="lineno">11763</span>&#160;    frd.<a class="code" href="structfire__data.html#a87eeeef62c5793c2fcdf27de8efd85d8">smoke_produced</a> += smoke_added;</div>
<div class="line"><a name="l11764"></a><span class="lineno">11764</span>&#160;    <span class="keywordflow">return</span> burn_added;</div>
<div class="line"><a name="l11765"></a><span class="lineno">11765</span>&#160;}</div>
<div class="line"><a name="l11766"></a><span class="lineno">11766</span>&#160; </div>
<div class="line"><a name="l11767"></a><span class="lineno"><a class="line" href="classitem.html#ab3a0a8aac3fe6347f06e4606b30e36d7">11767</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab3a0a8aac3fe6347f06e4606b30e36d7">item::burn</a>( <a class="code" href="structfire__data.html">fire_data</a> &amp;frd )</div>
<div class="line"><a name="l11768"></a><span class="lineno">11768</span>&#160;{</div>
<div class="line"><a name="l11769"></a><span class="lineno">11769</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1340a78c6350ff7b28b820d57af5c35d">flag_UNBREAKABLE</a> ) ) {</div>
<div class="line"><a name="l11770"></a><span class="lineno">11770</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11771"></a><span class="lineno">11771</span>&#160;    }</div>
<div class="line"><a name="l11772"></a><span class="lineno">11772</span>&#160;    <span class="keywordtype">float</span> burn_added = <a class="code" href="classitem.html#a63b6654a99f9b300a313a6921d134bf2">simulate_burn</a>( frd );</div>
<div class="line"><a name="l11773"></a><span class="lineno">11773</span>&#160; </div>
<div class="line"><a name="l11774"></a><span class="lineno">11774</span>&#160;    <span class="keywordflow">if</span>( burn_added &lt;= 0 ) {</div>
<div class="line"><a name="l11775"></a><span class="lineno">11775</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11776"></a><span class="lineno">11776</span>&#160;    }</div>
<div class="line"><a name="l11777"></a><span class="lineno">11777</span>&#160; </div>
<div class="line"><a name="l11778"></a><span class="lineno">11778</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l11779"></a><span class="lineno">11779</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> == 0_ml ) {</div>
<div class="line"><a name="l11780"></a><span class="lineno">11780</span>&#160;            <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l11781"></a><span class="lineno">11781</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11782"></a><span class="lineno">11782</span>&#160;            <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( burn_added * <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> * <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">stack_size</a> /</div>
<div class="line"><a name="l11783"></a><span class="lineno">11783</span>&#160;                                       ( 3.0 * <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#abd3ca12912367ae92d488864e09ea921">volume</a> ) );</div>
<div class="line"><a name="l11784"></a><span class="lineno">11784</span>&#160;        }</div>
<div class="line"><a name="l11785"></a><span class="lineno">11785</span>&#160; </div>
<div class="line"><a name="l11786"></a><span class="lineno">11786</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt;= 0;</div>
<div class="line"><a name="l11787"></a><span class="lineno">11787</span>&#160;    }</div>
<div class="line"><a name="l11788"></a><span class="lineno">11788</span>&#160; </div>
<div class="line"><a name="l11789"></a><span class="lineno">11789</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() ) {</div>
<div class="line"><a name="l11790"></a><span class="lineno">11790</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> *mt = <a class="code" href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">get_mtype</a>();</div>
<div class="line"><a name="l11791"></a><span class="lineno">11791</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> &amp;&amp; mt != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> + burn_added &gt; mt-&gt;<a class="code" href="structmtype.html#af242ac55ae2896b040f91b3581e5fcbb">hp</a> &amp;&amp;</div>
<div class="line"><a name="l11792"></a><span class="lineno">11792</span>&#160;            !mt-&gt;<a class="code" href="structmtype.html#a09b3dab7e8a40d991242870bf1bf160e">burn_into</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() &amp;&amp; mt-&gt;<a class="code" href="structmtype.html#a09b3dab7e8a40d991242870bf1bf160e">burn_into</a>.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l11793"></a><span class="lineno">11793</span>&#160;            <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> = &amp;<a class="code" href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">get_mtype</a>()-&gt;<a class="code" href="structmtype.html#a09b3dab7e8a40d991242870bf1bf160e">burn_into</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l11794"></a><span class="lineno">11794</span>&#160;            <span class="comment">// Delay rezing</span></div>
<div class="line"><a name="l11795"></a><span class="lineno">11795</span>&#160;            <a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l11796"></a><span class="lineno">11796</span>&#160;            <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> = 0;</div>
<div class="line"><a name="l11797"></a><span class="lineno">11797</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11798"></a><span class="lineno">11798</span>&#160;        }</div>
<div class="line"><a name="l11799"></a><span class="lineno">11799</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() ) {</div>
<div class="line"><a name="l11800"></a><span class="lineno">11800</span>&#160;        <a class="code" href="classitem.html#a62fef893b74d8691c331aca77d163584">heat_up</a>();</div>
<div class="line"><a name="l11801"></a><span class="lineno">11801</span>&#160;    }</div>
<div class="line"><a name="l11802"></a><span class="lineno">11802</span>&#160; </div>
<div class="line"><a name="l11803"></a><span class="lineno">11803</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#afdcf1334606a182ac8ef3e6801730ecb">heat_up</a>();</div>
<div class="line"><a name="l11804"></a><span class="lineno">11804</span>&#160; </div>
<div class="line"><a name="l11805"></a><span class="lineno">11805</span>&#160;    <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> += <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( burn_added );</div>
<div class="line"><a name="l11806"></a><span class="lineno">11806</span>&#160; </div>
<div class="line"><a name="l11807"></a><span class="lineno">11807</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> vol = <a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>() / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>;</div>
<div class="line"><a name="l11808"></a><span class="lineno">11808</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> &gt;= vol * 3;</div>
<div class="line"><a name="l11809"></a><span class="lineno">11809</span>&#160;}</div>
<div class="line"><a name="l11810"></a><span class="lineno">11810</span>&#160; </div>
<div class="line"><a name="l11811"></a><span class="lineno"><a class="line" href="classitem.html#a464c09886d48850b162592b9aa985853">11811</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a464c09886d48850b162592b9aa985853">item::flammable</a>( <span class="keywordtype">int</span> threshold )<span class="keyword"> const</span></div>
<div class="line"><a name="l11812"></a><span class="lineno">11812</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11813"></a><span class="lineno">11813</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l11814"></a><span class="lineno">11814</span>&#160;    <span class="keywordflow">if</span>( mats.empty() ) {</div>
<div class="line"><a name="l11815"></a><span class="lineno">11815</span>&#160;        <span class="comment">// Don&#39;t know how to burn down something made of nothing.</span></div>
<div class="line"><a name="l11816"></a><span class="lineno">11816</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11817"></a><span class="lineno">11817</span>&#160;    }</div>
<div class="line"><a name="l11818"></a><span class="lineno">11818</span>&#160; </div>
<div class="line"><a name="l11819"></a><span class="lineno">11819</span>&#160;    <span class="keywordtype">int</span> flammability = 0;</div>
<div class="line"><a name="l11820"></a><span class="lineno">11820</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> volume_per_turn = 0_ml;</div>
<div class="line"><a name="l11821"></a><span class="lineno">11821</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; m : mats ) {</div>
<div class="line"><a name="l11822"></a><span class="lineno">11822</span>&#160;        <span class="keyword">const</span> <a class="code" href="structmat__burn__data.html">mat_burn_data</a> &amp;bd = m.first-&gt;burn_data( 1 );</div>
<div class="line"><a name="l11823"></a><span class="lineno">11823</span>&#160;        <span class="keywordflow">if</span>( bd.<a class="code" href="structmat__burn__data.html#a304f96d38e70395b7625d2c80f56de1c">immune</a> ) {</div>
<div class="line"><a name="l11824"></a><span class="lineno">11824</span>&#160;            <span class="comment">// Made to protect from fire</span></div>
<div class="line"><a name="l11825"></a><span class="lineno">11825</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11826"></a><span class="lineno">11826</span>&#160;        }</div>
<div class="line"><a name="l11827"></a><span class="lineno">11827</span>&#160; </div>
<div class="line"><a name="l11828"></a><span class="lineno">11828</span>&#160;        flammability += bd.<a class="code" href="structmat__burn__data.html#ae107a447a65043c0c2fc12822c9115de">fuel</a> * m.second;</div>
<div class="line"><a name="l11829"></a><span class="lineno">11829</span>&#160;        volume_per_turn += bd.<a class="code" href="structmat__burn__data.html#a7d46d977a131b61638e03a07421f51db">volume_per_turn</a> * m.second;</div>
<div class="line"><a name="l11830"></a><span class="lineno">11830</span>&#160;    }</div>
<div class="line"><a name="l11831"></a><span class="lineno">11831</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> total = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a> == 0 ? 1 : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">mat_portion_total</a>;</div>
<div class="line"><a name="l11832"></a><span class="lineno">11832</span>&#160;    flammability /= total;</div>
<div class="line"><a name="l11833"></a><span class="lineno">11833</span>&#160;    volume_per_turn /= total;</div>
<div class="line"><a name="l11834"></a><span class="lineno">11834</span>&#160; </div>
<div class="line"><a name="l11835"></a><span class="lineno">11835</span>&#160;    <span class="keywordflow">if</span>( threshold == 0 || flammability &lt;= 0 ) {</div>
<div class="line"><a name="l11836"></a><span class="lineno">11836</span>&#160;        <span class="keywordflow">return</span> flammability &gt; 0;</div>
<div class="line"><a name="l11837"></a><span class="lineno">11837</span>&#160;    }</div>
<div class="line"><a name="l11838"></a><span class="lineno">11838</span>&#160; </div>
<div class="line"><a name="l11839"></a><span class="lineno">11839</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> vol = <a class="code" href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">base_volume</a>();</div>
<div class="line"><a name="l11840"></a><span class="lineno">11840</span>&#160;    <span class="keywordflow">if</span>( volume_per_turn &gt; 0_ml &amp;&amp; volume_per_turn &lt; vol ) {</div>
<div class="line"><a name="l11841"></a><span class="lineno">11841</span>&#160;        flammability = flammability * volume_per_turn / vol;</div>
<div class="line"><a name="l11842"></a><span class="lineno">11842</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11843"></a><span class="lineno">11843</span>&#160;        <span class="comment">// If it burns well, it provides a bonus here</span></div>
<div class="line"><a name="l11844"></a><span class="lineno">11844</span>&#160;        flammability = flammability * vol / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>;</div>
<div class="line"><a name="l11845"></a><span class="lineno">11845</span>&#160;    }</div>
<div class="line"><a name="l11846"></a><span class="lineno">11846</span>&#160; </div>
<div class="line"><a name="l11847"></a><span class="lineno">11847</span>&#160;    <span class="keywordflow">return</span> flammability &gt; threshold;</div>
<div class="line"><a name="l11848"></a><span class="lineno">11848</span>&#160;}</div>
<div class="line"><a name="l11849"></a><span class="lineno">11849</span>&#160; </div>
<div class="line"><a name="l11850"></a><span class="lineno"><a class="line" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">11850</a></span>&#160;<a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11851"></a><span class="lineno">11851</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11852"></a><span class="lineno">11852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() : <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">itype_id::NULL_ID</a>();</div>
<div class="line"><a name="l11853"></a><span class="lineno">11853</span>&#160;}</div>
<div class="line"><a name="l11854"></a><span class="lineno">11854</span>&#160; </div>
<div class="line"><a name="l11855"></a><span class="lineno"><a class="line" href="classitem.html#a3c32a5f35a17296686ff631167312fa6">11855</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3c32a5f35a17296686ff631167312fa6">item::getlight</a>( <span class="keywordtype">float</span> &amp;luminance, <a class="code" href="classunits_1_1quantity.html">units::angle</a> &amp;width, <a class="code" href="classunits_1_1quantity.html">units::angle</a> &amp;<a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l11856"></a><span class="lineno">11856</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11857"></a><span class="lineno">11857</span>&#160;    luminance = 0;</div>
<div class="line"><a name="l11858"></a><span class="lineno">11858</span>&#160;    width = 0_degrees;</div>
<div class="line"><a name="l11859"></a><span class="lineno">11859</span>&#160;    <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = 0_degrees;</div>
<div class="line"><a name="l11860"></a><span class="lineno">11860</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#a16250874faa8912324fbc4a305fe0e1b">luminance</a> &gt; 0 ) {</div>
<div class="line"><a name="l11861"></a><span class="lineno">11861</span>&#160;        luminance = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#a16250874faa8912324fbc4a305fe0e1b">luminance</a> );</div>
<div class="line"><a name="l11862"></a><span class="lineno">11862</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#ad2702f7a90a78ab3263fa52ffb803385">width</a> &gt; 0 ) {  <span class="comment">// width &gt; 0 is a light arc</span></div>
<div class="line"><a name="l11863"></a><span class="lineno">11863</span>&#160;            width = <a class="code" href="namespaceunits.html#a2fa3e5208be6bf02ff8d1a8c4eca1de9">units::from_degrees</a>( <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#ad2702f7a90a78ab3263fa52ffb803385">width</a> );</div>
<div class="line"><a name="l11864"></a><span class="lineno">11864</span>&#160;            <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code" href="namespaceunits.html#a2fa3e5208be6bf02ff8d1a8c4eca1de9">units::from_degrees</a>( <a class="code" href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">light</a>.<a class="code" href="structlight__emission.html#ab0ec1df6fca595be85ddc4ce6d64c274">direction</a> );</div>
<div class="line"><a name="l11865"></a><span class="lineno">11865</span>&#160;        }</div>
<div class="line"><a name="l11866"></a><span class="lineno">11866</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11867"></a><span class="lineno">11867</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11868"></a><span class="lineno">11868</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> lumint = <a class="code" href="classitem.html#ae70dfaf9ac8fb72e1656e8ff3d730e91">getlight_emit</a>();</div>
<div class="line"><a name="l11869"></a><span class="lineno">11869</span>&#160;        <span class="keywordflow">if</span>( lumint &gt; 0 ) {</div>
<div class="line"><a name="l11870"></a><span class="lineno">11870</span>&#160;            luminance = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( lumint );</div>
<div class="line"><a name="l11871"></a><span class="lineno">11871</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11872"></a><span class="lineno">11872</span>&#160;        }</div>
<div class="line"><a name="l11873"></a><span class="lineno">11873</span>&#160;    }</div>
<div class="line"><a name="l11874"></a><span class="lineno">11874</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l11875"></a><span class="lineno">11875</span>&#160;}</div>
<div class="line"><a name="l11876"></a><span class="lineno">11876</span>&#160; </div>
<div class="line"><a name="l11877"></a><span class="lineno"><a class="line" href="classitem.html#ae70dfaf9ac8fb72e1656e8ff3d730e91">11877</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ae70dfaf9ac8fb72e1656e8ff3d730e91">item::getlight_emit</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11878"></a><span class="lineno">11878</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11879"></a><span class="lineno">11879</span>&#160;    <span class="keywordtype">float</span> lumint = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a64d8b1399996d38b2ed54e1543dcef50">light_emission</a>;</div>
<div class="line"><a name="l11880"></a><span class="lineno">11880</span>&#160; </div>
<div class="line"><a name="l11881"></a><span class="lineno">11881</span>&#160;    <span class="keywordflow">if</span>( lumint == 0 ) {</div>
<div class="line"><a name="l11882"></a><span class="lineno">11882</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l11883"></a><span class="lineno">11883</span>&#160;    }</div>
<div class="line"><a name="l11884"></a><span class="lineno">11884</span>&#160; </div>
<div class="line"><a name="l11885"></a><span class="lineno">11885</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() == 0 || ( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) &amp;&amp; <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) == 0 ) ||</div>
<div class="line"><a name="l11886"></a><span class="lineno">11886</span>&#160;        <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l11887"></a><span class="lineno">11887</span>&#160;        <span class="keywordflow">return</span> lumint;</div>
<div class="line"><a name="l11888"></a><span class="lineno">11888</span>&#160;    }</div>
<div class="line"><a name="l11889"></a><span class="lineno">11889</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( <span class="keyword">true</span> ) == 0 ) {</div>
<div class="line"><a name="l11890"></a><span class="lineno">11890</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l11891"></a><span class="lineno">11891</span>&#160;    }</div>
<div class="line"><a name="l11892"></a><span class="lineno">11892</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a54d33006e58867ebfd2e641e2dcf8ad4">flag_CHARGEDIM</a> ) &amp;&amp; <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l11893"></a><span class="lineno">11893</span>&#160;        <span class="comment">// Falloff starts at 1/5 total charge and scales linearly from there to 0.</span></div>
<div class="line"><a name="l11894"></a><span class="lineno">11894</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp;<a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> = <a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>()-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type;</div>
<div class="line"><a name="l11895"></a><span class="lineno">11895</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> ) &amp;&amp;</div>
<div class="line"><a name="l11896"></a><span class="lineno">11896</span>&#160;            <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( <span class="keyword">true</span> ) &lt; ( <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> ) / 5 ) ) {</div>
<div class="line"><a name="l11897"></a><span class="lineno">11897</span>&#160;            lumint *= <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( <span class="keyword">true</span> ) * 5.0 / <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classitem.html#a81e681d4290360b38c2460ac54a614e5">loaded_ammo</a> );</div>
<div class="line"><a name="l11898"></a><span class="lineno">11898</span>&#160;        }</div>
<div class="line"><a name="l11899"></a><span class="lineno">11899</span>&#160;    }</div>
<div class="line"><a name="l11900"></a><span class="lineno">11900</span>&#160;    <span class="keywordflow">return</span> lumint;</div>
<div class="line"><a name="l11901"></a><span class="lineno">11901</span>&#160;}</div>
<div class="line"><a name="l11902"></a><span class="lineno">11902</span>&#160; </div>
<div class="line"><a name="l11903"></a><span class="lineno"><a class="line" href="classitem.html#ae9daf89e99f089da259528d1ed85e75d">11903</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#ae9daf89e99f089da259528d1ed85e75d">item::get_total_capacity</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11904"></a><span class="lineno">11904</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11905"></a><span class="lineno">11905</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#af25eaa87f276080b843971c60c8cade4">total_container_capacity</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11906"></a><span class="lineno">11906</span>&#160;}</div>
<div class="line"><a name="l11907"></a><span class="lineno">11907</span>&#160; </div>
<div class="line"><a name="l11908"></a><span class="lineno"><a class="line" href="classitem.html#a9b880f082ed473b329b45e78f21b7700">11908</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#a9b880f082ed473b329b45e78f21b7700">item::get_total_weight_capacity</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11909"></a><span class="lineno">11909</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11910"></a><span class="lineno">11910</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#af63aa1e6fb4e64cf18b9b5b26e9187fe">total_container_weight_capacity</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11911"></a><span class="lineno">11911</span>&#160;}</div>
<div class="line"><a name="l11912"></a><span class="lineno">11912</span>&#160; </div>
<div class="line"><a name="l11913"></a><span class="lineno"><a class="line" href="classitem.html#a6c31302e61d7addd210b9de5846b5257">11913</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a6c31302e61d7addd210b9de5846b5257">item::get_remaining_capacity</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11914"></a><span class="lineno">11914</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11915"></a><span class="lineno">11915</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a9a416aebdde07e8b17dcda06f90e8c4a">remaining_container_capacity</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11916"></a><span class="lineno">11916</span>&#160;}</div>
<div class="line"><a name="l11917"></a><span class="lineno"><a class="line" href="classitem.html#afb86dcc6f69f9dcdc7abacd0eb377af8">11917</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#afb86dcc6f69f9dcdc7abacd0eb377af8">item::get_remaining_weight_capacity</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11918"></a><span class="lineno">11918</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11919"></a><span class="lineno">11919</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a1983bb5c27381d69acb6eeefa30a6538">remaining_container_capacity_weight</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11920"></a><span class="lineno">11920</span>&#160;}</div>
<div class="line"><a name="l11921"></a><span class="lineno">11921</span>&#160; </div>
<div class="line"><a name="l11922"></a><span class="lineno"><a class="line" href="classitem.html#a3395fa0eddfd54f6b0acca093df8f274">11922</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a3395fa0eddfd54f6b0acca093df8f274">item::get_total_contained_volume</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11923"></a><span class="lineno">11923</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11924"></a><span class="lineno">11924</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a92e8a2ace749c3795c0db2d4053c23c7">total_contained_volume</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11925"></a><span class="lineno">11925</span>&#160;}</div>
<div class="line"><a name="l11926"></a><span class="lineno"><a class="line" href="classitem.html#a553d53f0a1b730f9810e70981cb77fa8">11926</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#a553d53f0a1b730f9810e70981cb77fa8">item::get_total_contained_weight</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> unrestricted_pockets_only )<span class="keyword"> const</span></div>
<div class="line"><a name="l11927"></a><span class="lineno">11927</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11928"></a><span class="lineno">11928</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad8ca15178957602e8e18d0b4bb05ece8">total_contained_weight</a>( unrestricted_pockets_only );</div>
<div class="line"><a name="l11929"></a><span class="lineno">11929</span>&#160;}</div>
<div class="line"><a name="l11930"></a><span class="lineno">11930</span>&#160; </div>
<div class="line"><a name="l11931"></a><span class="lineno"><a class="line" href="classitem.html#a2d8956760c8bf319f672f9209a11b48e">11931</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a2d8956760c8bf319f672f9209a11b48e">item::get_used_holsters</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11932"></a><span class="lineno">11932</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11933"></a><span class="lineno">11933</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a9660993d9dbde873705f69036a73e55e">get_used_holsters</a>();</div>
<div class="line"><a name="l11934"></a><span class="lineno">11934</span>&#160;}</div>
<div class="line"><a name="l11935"></a><span class="lineno"><a class="line" href="classitem.html#adcdeb47ea7d6d69bf557e9195896e5f5">11935</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#adcdeb47ea7d6d69bf557e9195896e5f5">item::get_total_holsters</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11936"></a><span class="lineno">11936</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11937"></a><span class="lineno">11937</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a792455a9c49e5e31c6eb3843b15db105">get_total_holsters</a>();</div>
<div class="line"><a name="l11938"></a><span class="lineno">11938</span>&#160;}</div>
<div class="line"><a name="l11939"></a><span class="lineno"><a class="line" href="classitem.html#a20abafa24663a945b6bdae0d24d7da81">11939</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a20abafa24663a945b6bdae0d24d7da81">item::get_total_holster_volume</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11940"></a><span class="lineno">11940</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11941"></a><span class="lineno">11941</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a4fd00ac3f7d13dd4b7c9d5d11a3a84c5">get_total_holster_volume</a>();</div>
<div class="line"><a name="l11942"></a><span class="lineno">11942</span>&#160;}</div>
<div class="line"><a name="l11943"></a><span class="lineno"><a class="line" href="classitem.html#a0cfbb4ba5d7a17340d86c95032d4a1a9">11943</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a0cfbb4ba5d7a17340d86c95032d4a1a9">item::get_used_holster_volume</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11944"></a><span class="lineno">11944</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11945"></a><span class="lineno">11945</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a11b20b0ada08b6f6228bb2d900f663f9">get_used_holster_volume</a>();</div>
<div class="line"><a name="l11946"></a><span class="lineno">11946</span>&#160;}</div>
<div class="line"><a name="l11947"></a><span class="lineno"><a class="line" href="classitem.html#afa6ee7f1015b3ce52ef0169adc76c3b0">11947</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#afa6ee7f1015b3ce52ef0169adc76c3b0">item::get_total_holster_weight</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11948"></a><span class="lineno">11948</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11949"></a><span class="lineno">11949</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a52f67eca15318716eee4d89da359b295">get_total_holster_weight</a>();</div>
<div class="line"><a name="l11950"></a><span class="lineno">11950</span>&#160;}</div>
<div class="line"><a name="l11951"></a><span class="lineno"><a class="line" href="classitem.html#a65507c5b84bb9d124f2f3a1922ac966e">11951</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::mass</a> <a class="code" href="classitem.html#a65507c5b84bb9d124f2f3a1922ac966e">item::get_used_holster_weight</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l11952"></a><span class="lineno">11952</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11953"></a><span class="lineno">11953</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ae39c5fc95b9777755cfd02797badbb5b">get_used_holster_weight</a>();</div>
<div class="line"><a name="l11954"></a><span class="lineno">11954</span>&#160;}</div>
<div class="line"><a name="l11955"></a><span class="lineno">11955</span>&#160; </div>
<div class="line"><a name="l11956"></a><span class="lineno"><a class="line" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">11956</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">item::get_remaining_capacity_for_liquid</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;liquid, <span class="keywordtype">bool</span> allow_bucket,</div>
<div class="line"><a name="l11957"></a><span class="lineno">11957</span>&#160;        std::string *err )<span class="keyword"> const</span></div>
<div class="line"><a name="l11958"></a><span class="lineno">11958</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11959"></a><span class="lineno">11959</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282">error</a> = [ &amp;err ]( <span class="keyword">const</span> std::string &amp; <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> ) {</div>
<div class="line"><a name="l11960"></a><span class="lineno">11960</span>&#160;        <span class="keywordflow">if</span>( err != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11961"></a><span class="lineno">11961</span>&#160;            *err = <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>;</div>
<div class="line"><a name="l11962"></a><span class="lineno">11962</span>&#160;        }</div>
<div class="line"><a name="l11963"></a><span class="lineno">11963</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l11964"></a><span class="lineno">11964</span>&#160;    };</div>
<div class="line"><a name="l11965"></a><span class="lineno">11965</span>&#160; </div>
<div class="line"><a name="l11966"></a><span class="lineno">11966</span>&#160;    <span class="keywordtype">int</span> remaining_capacity = 0;</div>
<div class="line"><a name="l11967"></a><span class="lineno">11967</span>&#160; </div>
<div class="line"><a name="l11968"></a><span class="lineno">11968</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae403069b5762475b37df693ad99f567f">can_contain_partial</a>( liquid ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l11969"></a><span class="lineno">11969</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7931da51131300026f822d4791eb25aa">can_contain_liquid</a>( allow_bucket ) ) {</div>
<div class="line"><a name="l11970"></a><span class="lineno">11970</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282">error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s must be on the ground or held to hold contents!&quot;</span> ),</div>
<div class="line"><a name="l11971"></a><span class="lineno">11971</span>&#160;                                         <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l11972"></a><span class="lineno">11972</span>&#160;        }</div>
<div class="line"><a name="l11973"></a><span class="lineno">11973</span>&#160;        remaining_capacity = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a6558ba8bbd267861b086ab7e3ff8c81b">remaining_capacity_for_liquid</a>( liquid );</div>
<div class="line"><a name="l11974"></a><span class="lineno">11974</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l11975"></a><span class="lineno">11975</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282">error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %1$s won&#39;t hold %2$s.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l11976"></a><span class="lineno">11976</span>&#160;                                     liquid.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l11977"></a><span class="lineno">11977</span>&#160;    }</div>
<div class="line"><a name="l11978"></a><span class="lineno">11978</span>&#160; </div>
<div class="line"><a name="l11979"></a><span class="lineno">11979</span>&#160;    <span class="keywordflow">if</span>( remaining_capacity &lt;= 0 ) {</div>
<div class="line"><a name="l11980"></a><span class="lineno">11980</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282">error</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %1$s can&#39;t hold any more %2$s.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l11981"></a><span class="lineno">11981</span>&#160;                                     liquid.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l11982"></a><span class="lineno">11982</span>&#160;    }</div>
<div class="line"><a name="l11983"></a><span class="lineno">11983</span>&#160; </div>
<div class="line"><a name="l11984"></a><span class="lineno">11984</span>&#160;    <span class="keywordflow">return</span> remaining_capacity;</div>
<div class="line"><a name="l11985"></a><span class="lineno">11985</span>&#160;}</div>
<div class="line"><a name="l11986"></a><span class="lineno">11986</span>&#160; </div>
<div class="line"><a name="l11987"></a><span class="lineno"><a class="line" href="classitem.html#a88eaf24479cff098fccfefd7a1a090cb">11987</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">item::get_remaining_capacity_for_liquid</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;liquid, <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p,</div>
<div class="line"><a name="l11988"></a><span class="lineno">11988</span>&#160;        std::string *err )<span class="keyword"> const</span></div>
<div class="line"><a name="l11989"></a><span class="lineno">11989</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l11990"></a><span class="lineno">11990</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> allow_bucket = ( p.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() &amp;&amp; <span class="keyword">this</span> == &amp;*p.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() ) ||</div>
<div class="line"><a name="l11991"></a><span class="lineno">11991</span>&#160;                              !p.<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l11992"></a><span class="lineno">11992</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">get_remaining_capacity_for_liquid</a>( liquid, allow_bucket, err );</div>
<div class="line"><a name="l11993"></a><span class="lineno">11993</span>&#160; </div>
<div class="line"><a name="l11994"></a><span class="lineno">11994</span>&#160;    <span class="keywordflow">if</span>( res &gt; 0 ) {</div>
<div class="line"><a name="l11995"></a><span class="lineno">11995</span>&#160;        res = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a6558ba8bbd267861b086ab7e3ff8c81b">remaining_capacity_for_liquid</a>( liquid ), res );</div>
<div class="line"><a name="l11996"></a><span class="lineno">11996</span>&#160; </div>
<div class="line"><a name="l11997"></a><span class="lineno">11997</span>&#160;        <span class="keywordflow">if</span>( res == 0 &amp;&amp; err != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l11998"></a><span class="lineno">11998</span>&#160;            *err = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s doesn&#39;t have room to expand.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l11999"></a><span class="lineno">11999</span>&#160;        }</div>
<div class="line"><a name="l12000"></a><span class="lineno">12000</span>&#160;    }</div>
<div class="line"><a name="l12001"></a><span class="lineno">12001</span>&#160; </div>
<div class="line"><a name="l12002"></a><span class="lineno">12002</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l12003"></a><span class="lineno">12003</span>&#160;}</div>
<div class="line"><a name="l12004"></a><span class="lineno">12004</span>&#160; </div>
<div class="line"><a name="l12005"></a><span class="lineno"><a class="line" href="classitem.html#a616aedf5cb1225f658078d1ffa48e8f6">12005</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a616aedf5cb1225f658078d1ffa48e8f6">item::total_contained_volume</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12006"></a><span class="lineno">12006</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12007"></a><span class="lineno">12007</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a92e8a2ace749c3795c0db2d4053c23c7">total_contained_volume</a>();</div>
<div class="line"><a name="l12008"></a><span class="lineno">12008</span>&#160;}</div>
<div class="line"><a name="l12009"></a><span class="lineno">12009</span>&#160; </div>
<div class="line"><a name="l12010"></a><span class="lineno"><a class="line" href="classitem.html#adc87bb1fb833c2beced16a2800c8215a">12010</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#adc87bb1fb833c2beced16a2800c8215a">item::use_amount</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;it, <span class="keywordtype">int</span> &amp;quantity, std::list&lt;item&gt; &amp;used,</div>
<div class="line"><a name="l12011"></a><span class="lineno">12011</span>&#160;                       <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> )</div>
<div class="line"><a name="l12012"></a><span class="lineno">12012</span>&#160;{</div>
<div class="line"><a name="l12013"></a><span class="lineno">12013</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l12014"></a><span class="lineno">12014</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12015"></a><span class="lineno">12015</span>&#160;    }</div>
<div class="line"><a name="l12016"></a><span class="lineno">12016</span>&#160;    <span class="comment">// Remember quantity so that we can unseal self</span></div>
<div class="line"><a name="l12017"></a><span class="lineno">12017</span>&#160;    <span class="keywordtype">int</span> old_quantity = quantity;</div>
<div class="line"><a name="l12018"></a><span class="lineno">12018</span>&#160;    std::vector&lt;item *&gt; removed_items;</div>
<div class="line"><a name="l12019"></a><span class="lineno">12019</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *contained : <a class="code" href="classitem.html#af15a86b2fb28e635721b31b735906800">all_items_ptr</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l12020"></a><span class="lineno">12020</span>&#160;        <span class="keywordflow">if</span>( contained-&gt;use_amount_internal( it, quantity, used, <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> ) ) {</div>
<div class="line"><a name="l12021"></a><span class="lineno">12021</span>&#160;            removed_items.push_back( contained );</div>
<div class="line"><a name="l12022"></a><span class="lineno">12022</span>&#160;        }</div>
<div class="line"><a name="l12023"></a><span class="lineno">12023</span>&#160;    }</div>
<div class="line"><a name="l12024"></a><span class="lineno">12024</span>&#160; </div>
<div class="line"><a name="l12025"></a><span class="lineno">12025</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *removed : removed_items ) {</div>
<div class="line"><a name="l12026"></a><span class="lineno">12026</span>&#160;        <span class="comment">// Handle cases where items are removed but the pocket isn&#39;t emptied</span></div>
<div class="line"><a name="l12027"></a><span class="lineno">12027</span>&#160;        <a class="code" href="classitem.html">item</a> *parent = this-&gt;<a class="code" href="classvisitable.html#a31e8c573cb6e4870cc005915efc103b3">find_parent</a>( *removed );</div>
<div class="line"><a name="l12028"></a><span class="lineno">12028</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : parent-&gt;<a class="code" href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7">get_all_standard_pockets</a>() ) {</div>
<div class="line"><a name="l12029"></a><span class="lineno">12029</span>&#160;            <span class="keywordflow">if</span>( pocket-&gt;has_item( *removed ) ) {</div>
<div class="line"><a name="l12030"></a><span class="lineno">12030</span>&#160;                pocket-&gt;unseal();</div>
<div class="line"><a name="l12031"></a><span class="lineno">12031</span>&#160;            }</div>
<div class="line"><a name="l12032"></a><span class="lineno">12032</span>&#160;        }</div>
<div class="line"><a name="l12033"></a><span class="lineno">12033</span>&#160;        this-&gt;<a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *removed );</div>
<div class="line"><a name="l12034"></a><span class="lineno">12034</span>&#160;    }</div>
<div class="line"><a name="l12035"></a><span class="lineno">12035</span>&#160; </div>
<div class="line"><a name="l12036"></a><span class="lineno">12036</span>&#160;    <span class="keywordflow">if</span>( quantity != old_quantity ) {</div>
<div class="line"><a name="l12037"></a><span class="lineno">12037</span>&#160;        <a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l12038"></a><span class="lineno">12038</span>&#160;    }</div>
<div class="line"><a name="l12039"></a><span class="lineno">12039</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a50e4b0dafdccaf9006cb1b4c36f70c8a">use_amount_internal</a>( it, quantity, used, <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> );</div>
<div class="line"><a name="l12040"></a><span class="lineno">12040</span>&#160;}</div>
<div class="line"><a name="l12041"></a><span class="lineno">12041</span>&#160; </div>
<div class="line"><a name="l12042"></a><span class="lineno">12042</span>&#160;<span class="comment">// NOLINTNEXTLINE(readability-make-member-function-const)</span></div>
<div class="line"><a name="l12043"></a><span class="lineno"><a class="line" href="classitem.html#a50e4b0dafdccaf9006cb1b4c36f70c8a">12043</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a50e4b0dafdccaf9006cb1b4c36f70c8a">item::use_amount_internal</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;it, <span class="keywordtype">int</span> &amp;quantity, std::list&lt;item&gt; &amp;used,</div>
<div class="line"><a name="l12044"></a><span class="lineno">12044</span>&#160;                                <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> )</div>
<div class="line"><a name="l12045"></a><span class="lineno">12045</span>&#160;{</div>
<div class="line"><a name="l12046"></a><span class="lineno">12046</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l12047"></a><span class="lineno">12047</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12048"></a><span class="lineno">12048</span>&#160;    }</div>
<div class="line"><a name="l12049"></a><span class="lineno">12049</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == it &amp;&amp; quantity &gt; 0 &amp;&amp; <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>( *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l12050"></a><span class="lineno">12050</span>&#160;        used.push_back( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l12051"></a><span class="lineno">12051</span>&#160;        quantity--;</div>
<div class="line"><a name="l12052"></a><span class="lineno">12052</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12053"></a><span class="lineno">12053</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12054"></a><span class="lineno">12054</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12055"></a><span class="lineno">12055</span>&#160;    }</div>
<div class="line"><a name="l12056"></a><span class="lineno">12056</span>&#160;}</div>
<div class="line"><a name="l12057"></a><span class="lineno">12057</span>&#160; </div>
<div class="line"><a name="l12058"></a><span class="lineno"><a class="line" href="classitem.html#a24de774e21920f2b60718a02be995a8b">12058</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a24de774e21920f2b60718a02be995a8b">item::allow_crafting_component</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12059"></a><span class="lineno">12059</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12060"></a><span class="lineno">12060</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">is_toolmod</a>() &amp;&amp; <a class="code" href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">is_irremovable</a>() ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a> ) ) {</div>
<div class="line"><a name="l12061"></a><span class="lineno">12061</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12062"></a><span class="lineno">12062</span>&#160;    }</div>
<div class="line"><a name="l12063"></a><span class="lineno">12063</span>&#160; </div>
<div class="line"><a name="l12064"></a><span class="lineno">12064</span>&#160;    <span class="comment">// vehicle batteries are implemented as magazines of charge</span></div>
<div class="line"><a name="l12065"></a><span class="lineno">12065</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() &amp;&amp; <a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>( <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) ) {</div>
<div class="line"><a name="l12066"></a><span class="lineno">12066</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12067"></a><span class="lineno">12067</span>&#160;    }</div>
<div class="line"><a name="l12068"></a><span class="lineno">12068</span>&#160; </div>
<div class="line"><a name="l12069"></a><span class="lineno">12069</span>&#160;    <span class="comment">// fixes #18886 - turret installation may require items with irremovable mods</span></div>
<div class="line"><a name="l12070"></a><span class="lineno">12070</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l12071"></a><span class="lineno">12071</span>&#160;        <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12072"></a><span class="lineno">12072</span>&#160;        <a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * it, <a class="code" href="classitem.html">item</a> * ) {</div>
<div class="line"><a name="l12073"></a><span class="lineno">12073</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">this</span> == it ) {</div>
<div class="line"><a name="l12074"></a><span class="lineno">12074</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l12075"></a><span class="lineno">12075</span>&#160;            }</div>
<div class="line"><a name="l12076"></a><span class="lineno">12076</span>&#160;            <span class="keywordflow">if</span>( !( it-&gt;<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() || ( it-&gt;<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() &amp;&amp; it-&gt;<a class="code" href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">is_irremovable</a>() ) ) ) {</div>
<div class="line"><a name="l12077"></a><span class="lineno">12077</span>&#160;                valid = false;</div>
<div class="line"><a name="l12078"></a><span class="lineno">12078</span>&#160;                return VisitResponse::ABORT;</div>
<div class="line"><a name="l12079"></a><span class="lineno">12079</span>&#160;            }</div>
<div class="line"><a name="l12080"></a><span class="lineno">12080</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l12081"></a><span class="lineno">12081</span>&#160;        } );</div>
<div class="line"><a name="l12082"></a><span class="lineno">12082</span>&#160;        <span class="keywordflow">return</span> valid;</div>
<div class="line"><a name="l12083"></a><span class="lineno">12083</span>&#160;    }</div>
<div class="line"><a name="l12084"></a><span class="lineno">12084</span>&#160; </div>
<div class="line"><a name="l12085"></a><span class="lineno">12085</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12086"></a><span class="lineno">12086</span>&#160;}</div>
<div class="line"><a name="l12087"></a><span class="lineno">12087</span>&#160; </div>
<div class="line"><a name="l12088"></a><span class="lineno"><a class="line" href="classitem.html#a3e61d7a533464d792856622eecd480a3">12088</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a3e61d7a533464d792856622eecd480a3">item::set_item_specific_energy</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::specific_energy</a> &amp;new_specific_energy )</div>
<div class="line"><a name="l12089"></a><span class="lineno">12089</span>&#160;{</div>
<div class="line"><a name="l12090"></a><span class="lineno">12090</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> float_new_specific_energy = <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( new_specific_energy );</div>
<div class="line"><a name="l12091"></a><span class="lineno">12091</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_liquid = <a class="code" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">get_specific_heat_liquid</a>(); <span class="comment">// J/g K</span></div>
<div class="line"><a name="l12092"></a><span class="lineno">12092</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_solid = <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">get_specific_heat_solid</a>(); <span class="comment">// J/g K</span></div>
<div class="line"><a name="l12093"></a><span class="lineno">12093</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> latent_heat = <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">get_latent_heat</a>(); <span class="comment">// J/g</span></div>
<div class="line"><a name="l12094"></a><span class="lineno">12094</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> freezing_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>() );</div>
<div class="line"><a name="l12095"></a><span class="lineno">12095</span>&#160;    <span class="comment">// Energy that the item would have if it was completely solid at freezing temperature</span></div>
<div class="line"><a name="l12096"></a><span class="lineno">12096</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_frozen_specific_energy = specific_heat_solid * freezing_temperature; <span class="comment">// J/g</span></div>
<div class="line"><a name="l12097"></a><span class="lineno">12097</span>&#160;    <span class="comment">// Energy that the item would have if it was completely liquid at freezing temperature</span></div>
<div class="line"><a name="l12098"></a><span class="lineno">12098</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_liquid_specific_energy = completely_frozen_specific_energy + latent_heat;</div>
<div class="line"><a name="l12099"></a><span class="lineno">12099</span>&#160;    <span class="keywordtype">float</span> new_item_temperature = 0.0f; <span class="comment">// K</span></div>
<div class="line"><a name="l12100"></a><span class="lineno">12100</span>&#160;    <span class="keywordtype">float</span> freeze_percentage = 1.0f;</div>
<div class="line"><a name="l12101"></a><span class="lineno">12101</span>&#160; </div>
<div class="line"><a name="l12102"></a><span class="lineno">12102</span>&#160;    <span class="keywordflow">if</span>( float_new_specific_energy &gt; completely_liquid_specific_energy ) {</div>
<div class="line"><a name="l12103"></a><span class="lineno">12103</span>&#160;        <span class="comment">// Item is liquid</span></div>
<div class="line"><a name="l12104"></a><span class="lineno">12104</span>&#160;        new_item_temperature = freezing_temperature + ( float_new_specific_energy -</div>
<div class="line"><a name="l12105"></a><span class="lineno">12105</span>&#160;                               completely_liquid_specific_energy ) /</div>
<div class="line"><a name="l12106"></a><span class="lineno">12106</span>&#160;                               specific_heat_liquid;</div>
<div class="line"><a name="l12107"></a><span class="lineno">12107</span>&#160;        freeze_percentage = 0.0f;</div>
<div class="line"><a name="l12108"></a><span class="lineno">12108</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( float_new_specific_energy &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12109"></a><span class="lineno">12109</span>&#160;        <span class="comment">// Item is solid</span></div>
<div class="line"><a name="l12110"></a><span class="lineno">12110</span>&#160;        new_item_temperature = float_new_specific_energy / specific_heat_solid;</div>
<div class="line"><a name="l12111"></a><span class="lineno">12111</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12112"></a><span class="lineno">12112</span>&#160;        <span class="comment">// Item is partially solid</span></div>
<div class="line"><a name="l12113"></a><span class="lineno">12113</span>&#160;        new_item_temperature = freezing_temperature;</div>
<div class="line"><a name="l12114"></a><span class="lineno">12114</span>&#160;        freeze_percentage = ( completely_liquid_specific_energy - float_new_specific_energy ) /</div>
<div class="line"><a name="l12115"></a><span class="lineno">12115</span>&#160;                            ( completely_liquid_specific_energy - completely_frozen_specific_energy );</div>
<div class="line"><a name="l12116"></a><span class="lineno">12116</span>&#160;    }</div>
<div class="line"><a name="l12117"></a><span class="lineno">12117</span>&#160; </div>
<div class="line"><a name="l12118"></a><span class="lineno">12118</span>&#160;    <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> = <a class="code" href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a>( new_item_temperature );</div>
<div class="line"><a name="l12119"></a><span class="lineno">12119</span>&#160;    <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> = new_specific_energy;</div>
<div class="line"><a name="l12120"></a><span class="lineno">12120</span>&#160;    <a class="code" href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">set_temp_flags</a>( <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a>, freeze_percentage );</div>
<div class="line"><a name="l12121"></a><span class="lineno">12121</span>&#160;    <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">reset_temp_check</a>();</div>
<div class="line"><a name="l12122"></a><span class="lineno">12122</span>&#160;}</div>
<div class="line"><a name="l12123"></a><span class="lineno">12123</span>&#160; </div>
<div class="line"><a name="l12124"></a><span class="lineno"><a class="line" href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">12124</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::specific_energy</a> <a class="code" href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">item::get_specific_energy_from_temperature</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a></div>
<div class="line"><a name="l12125"></a><span class="lineno">12125</span>&#160;        &amp;new_temperature )<span class="keyword"> const</span></div>
<div class="line"><a name="l12126"></a><span class="lineno">12126</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12127"></a><span class="lineno">12127</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_liquid = <a class="code" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">get_specific_heat_liquid</a>(); <span class="comment">// J/g K</span></div>
<div class="line"><a name="l12128"></a><span class="lineno">12128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_solid = <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">get_specific_heat_solid</a>(); <span class="comment">// J/g K</span></div>
<div class="line"><a name="l12129"></a><span class="lineno">12129</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> latent_heat = <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">get_latent_heat</a>(); <span class="comment">// J/g</span></div>
<div class="line"><a name="l12130"></a><span class="lineno">12130</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> freezing_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>() );</div>
<div class="line"><a name="l12131"></a><span class="lineno">12131</span>&#160;    <span class="comment">// Energy that the item would have if it was completely solid at freezing temperature</span></div>
<div class="line"><a name="l12132"></a><span class="lineno">12132</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_frozen_energy = specific_heat_solid * freezing_temperature;</div>
<div class="line"><a name="l12133"></a><span class="lineno">12133</span>&#160;    <span class="comment">// Energy that the item would have if it was completely liquid at freezing temperature</span></div>
<div class="line"><a name="l12134"></a><span class="lineno">12134</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_liquid_energy = completely_frozen_energy + latent_heat;</div>
<div class="line"><a name="l12135"></a><span class="lineno">12135</span>&#160;    <span class="keywordtype">float</span> new_specific_energy;</div>
<div class="line"><a name="l12136"></a><span class="lineno">12136</span>&#160; </div>
<div class="line"><a name="l12137"></a><span class="lineno">12137</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( new_temperature ) &lt;= freezing_temperature ) {</div>
<div class="line"><a name="l12138"></a><span class="lineno">12138</span>&#160;        new_specific_energy = specific_heat_solid * <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( new_temperature );</div>
<div class="line"><a name="l12139"></a><span class="lineno">12139</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12140"></a><span class="lineno">12140</span>&#160;        new_specific_energy = completely_liquid_energy + specific_heat_liquid *</div>
<div class="line"><a name="l12141"></a><span class="lineno">12141</span>&#160;                              ( <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( new_temperature ) - freezing_temperature );</div>
<div class="line"><a name="l12142"></a><span class="lineno">12142</span>&#160;    }</div>
<div class="line"><a name="l12143"></a><span class="lineno">12143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy );</div>
<div class="line"><a name="l12144"></a><span class="lineno">12144</span>&#160;}</div>
<div class="line"><a name="l12145"></a><span class="lineno">12145</span>&#160; </div>
<div class="line"><a name="l12146"></a><span class="lineno"><a class="line" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">12146</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">item::set_item_temperature</a>( <a class="code" href="classunits_1_1quantity.html">units::temperature</a> new_temperature )</div>
<div class="line"><a name="l12147"></a><span class="lineno">12147</span>&#160;{</div>
<div class="line"><a name="l12148"></a><span class="lineno">12148</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> freezing_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>() );</div>
<div class="line"><a name="l12149"></a><span class="lineno">12149</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_solid = <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">get_specific_heat_solid</a>(); <span class="comment">// J/g K</span></div>
<div class="line"><a name="l12150"></a><span class="lineno">12150</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> latent_heat = <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">get_latent_heat</a>(); <span class="comment">// J/g</span></div>
<div class="line"><a name="l12151"></a><span class="lineno">12151</span>&#160; </div>
<div class="line"><a name="l12152"></a><span class="lineno">12152</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::specific_energy</a> new_specific_energy = <a class="code" href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">get_specific_energy_from_temperature</a>(</div>
<div class="line"><a name="l12153"></a><span class="lineno">12153</span>&#160;                new_temperature );</div>
<div class="line"><a name="l12154"></a><span class="lineno">12154</span>&#160;    <span class="keywordtype">float</span> freeze_percentage = 0.0f;</div>
<div class="line"><a name="l12155"></a><span class="lineno">12155</span>&#160; </div>
<div class="line"><a name="l12156"></a><span class="lineno">12156</span>&#160;    <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> = new_temperature;</div>
<div class="line"><a name="l12157"></a><span class="lineno">12157</span>&#160;    <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> = new_specific_energy ;</div>
<div class="line"><a name="l12158"></a><span class="lineno">12158</span>&#160; </div>
<div class="line"><a name="l12159"></a><span class="lineno">12159</span>&#160;    <span class="comment">// Energy that the item would have if it was completely solid at freezing temperature</span></div>
<div class="line"><a name="l12160"></a><span class="lineno">12160</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_frozen_specific_energy = specific_heat_solid * freezing_temperature;</div>
<div class="line"><a name="l12161"></a><span class="lineno">12161</span>&#160;    <span class="comment">// Energy that the item would have if it was completely liquid at freezing temperature</span></div>
<div class="line"><a name="l12162"></a><span class="lineno">12162</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> completely_liquid_specific_energy = completely_frozen_specific_energy + latent_heat;</div>
<div class="line"><a name="l12163"></a><span class="lineno">12163</span>&#160; </div>
<div class="line"><a name="l12164"></a><span class="lineno">12164</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( new_specific_energy ) &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12165"></a><span class="lineno">12165</span>&#160;        <span class="comment">// Item is solid</span></div>
<div class="line"><a name="l12166"></a><span class="lineno">12166</span>&#160;        freeze_percentage = 1;</div>
<div class="line"><a name="l12167"></a><span class="lineno">12167</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12168"></a><span class="lineno">12168</span>&#160;        <span class="comment">// Item is partially solid</span></div>
<div class="line"><a name="l12169"></a><span class="lineno">12169</span>&#160;        freeze_percentage = ( completely_liquid_specific_energy - <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>(</div>
<div class="line"><a name="l12170"></a><span class="lineno">12170</span>&#160;                                  new_specific_energy ) ) /</div>
<div class="line"><a name="l12171"></a><span class="lineno">12171</span>&#160;                            ( completely_liquid_specific_energy - completely_frozen_specific_energy );</div>
<div class="line"><a name="l12172"></a><span class="lineno">12172</span>&#160;    }</div>
<div class="line"><a name="l12173"></a><span class="lineno">12173</span>&#160;    <a class="code" href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">set_temp_flags</a>( new_temperature, freeze_percentage );</div>
<div class="line"><a name="l12174"></a><span class="lineno">12174</span>&#160;    <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">reset_temp_check</a>();</div>
<div class="line"><a name="l12175"></a><span class="lineno">12175</span>&#160;}</div>
<div class="line"><a name="l12176"></a><span class="lineno">12176</span>&#160; </div>
<div class="line"><a name="l12177"></a><span class="lineno"><a class="line" href="classitem.html#abfc3474737590a81c25c5c5d7154aaa2">12177</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#abfc3474737590a81c25c5c5d7154aaa2">item::fill_with</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;contained, <span class="keyword">const</span> <span class="keywordtype">int</span> amount,</div>
<div class="line"><a name="l12178"></a><span class="lineno">12178</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">bool</span> unseal_pockets,</div>
<div class="line"><a name="l12179"></a><span class="lineno">12179</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">bool</span> allow_sealed,</div>
<div class="line"><a name="l12180"></a><span class="lineno">12180</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_settings,</div>
<div class="line"><a name="l12181"></a><span class="lineno">12181</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">bool</span> into_bottom,</div>
<div class="line"><a name="l12182"></a><span class="lineno">12182</span>&#160;                     <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l12183"></a><span class="lineno">12183</span>&#160;{</div>
<div class="line"><a name="l12184"></a><span class="lineno">12184</span>&#160;    <span class="keywordflow">if</span>( amount &lt;= 0 ) {</div>
<div class="line"><a name="l12185"></a><span class="lineno">12185</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l12186"></a><span class="lineno">12186</span>&#160;    }</div>
<div class="line"><a name="l12187"></a><span class="lineno">12187</span>&#160; </div>
<div class="line"><a name="l12188"></a><span class="lineno">12188</span>&#160;    <a class="code" href="classitem.html">item</a> contained_item( contained );</div>
<div class="line"><a name="l12189"></a><span class="lineno">12189</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> = contained.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>();</div>
<div class="line"><a name="l12190"></a><span class="lineno">12190</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> ) {</div>
<div class="line"><a name="l12191"></a><span class="lineno">12191</span>&#160;        contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l12192"></a><span class="lineno">12192</span>&#160;    }</div>
<div class="line"><a name="l12193"></a><span class="lineno">12193</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc;</div>
<div class="line"><a name="l12194"></a><span class="lineno">12194</span>&#160;    <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l12195"></a><span class="lineno">12195</span>&#160; </div>
<div class="line"><a name="l12196"></a><span class="lineno">12196</span>&#160;    <span class="keywordtype">int</span> num_contained = 0;</div>
<div class="line"><a name="l12197"></a><span class="lineno">12197</span>&#160;    <span class="keywordflow">while</span>( amount &gt; num_contained ) {</div>
<div class="line"><a name="l12198"></a><span class="lineno">12198</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> || pocket == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l12199"></a><span class="lineno">12199</span>&#160;            !pocket-&gt;<a class="code" href="classitem__pocket.html#acc31bcefa81a31b6fc4880c3a3813753">can_contain</a>( contained_item ).success() ) {</div>
<div class="line"><a name="l12200"></a><span class="lineno">12200</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> ) {</div>
<div class="line"><a name="l12201"></a><span class="lineno">12201</span>&#160;                contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l12202"></a><span class="lineno">12202</span>&#160;            }</div>
<div class="line"><a name="l12203"></a><span class="lineno">12203</span>&#160;            pocket = <a class="code" href="classitem.html#a20204ebe26dfb0b3524bafc9b79d0e97">best_pocket</a>( contained_item, loc, <span class="comment">/*avoid=*/</span><span class="keyword">nullptr</span>, allow_sealed,</div>
<div class="line"><a name="l12204"></a><span class="lineno">12204</span>&#160;                                  ignore_settings ).second;</div>
<div class="line"><a name="l12205"></a><span class="lineno">12205</span>&#160;        }</div>
<div class="line"><a name="l12206"></a><span class="lineno">12206</span>&#160;        <span class="keywordflow">if</span>( pocket == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l12207"></a><span class="lineno">12207</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12208"></a><span class="lineno">12208</span>&#160;        }</div>
<div class="line"><a name="l12209"></a><span class="lineno">12209</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> ) {</div>
<div class="line"><a name="l12210"></a><span class="lineno">12210</span>&#160;            <a class="code" href="classstring__id.html">ammotype</a> ammo = contained.<a class="code" href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">ammo_type</a>();</div>
<div class="line"><a name="l12211"></a><span class="lineno">12211</span>&#160;            <span class="keywordflow">if</span>( pocket-&gt;<a class="code" href="classitem__pocket.html#a00a9e3117842e2d34dd8b87319f821c1">ammo_capacity</a>( ammo ) ) {</div>
<div class="line"><a name="l12212"></a><span class="lineno">12212</span>&#160;                contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( amount - num_contained,</div>
<div class="line"><a name="l12213"></a><span class="lineno">12213</span>&#160;                                                   pocket-&gt;<a class="code" href="classitem__pocket.html#aa97da32e55e4b9d3b7a20088ed3709ae">remaining_ammo_capacity</a>( ammo ) );</div>
<div class="line"><a name="l12214"></a><span class="lineno">12214</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12215"></a><span class="lineno">12215</span>&#160;                contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( { amount - num_contained,</div>
<div class="line"><a name="l12216"></a><span class="lineno">12216</span>&#160;                                                     pocket-&gt;<a class="code" href="classitem__pocket.html#a938e31d31ebf783015c5963f90993502">charges_per_remaining_volume</a>( contained_item ),</div>
<div class="line"><a name="l12217"></a><span class="lineno">12217</span>&#160;                                                     pocket-&gt;<a class="code" href="classitem__pocket.html#a6251a0649be2713655049d926729ae4f">charges_per_remaining_weight</a>( contained_item )</div>
<div class="line"><a name="l12218"></a><span class="lineno">12218</span>&#160;                                                   } );</div>
<div class="line"><a name="l12219"></a><span class="lineno">12219</span>&#160;            }</div>
<div class="line"><a name="l12220"></a><span class="lineno">12220</span>&#160; </div>
<div class="line"><a name="l12221"></a><span class="lineno">12221</span>&#160;            <span class="keywordflow">if</span>( contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a name="l12222"></a><span class="lineno">12222</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12223"></a><span class="lineno">12223</span>&#160;            }</div>
<div class="line"><a name="l12224"></a><span class="lineno">12224</span>&#160;        }</div>
<div class="line"><a name="l12225"></a><span class="lineno">12225</span>&#160; </div>
<div class="line"><a name="l12226"></a><span class="lineno">12226</span>&#160;        <a class="code" href="classret__val.html">ret_val&lt;item *&gt;</a> result = pocket-&gt;<a class="code" href="classitem__pocket.html#a8345d9f4f7869de2a301de5a653be09c">insert_item</a>( contained_item, into_bottom );</div>
<div class="line"><a name="l12227"></a><span class="lineno">12227</span>&#160;        <span class="keywordflow">if</span>( !result.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l12228"></a><span class="lineno">12228</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> ) {</div>
<div class="line"><a name="l12229"></a><span class="lineno">12229</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;charges per remaining pocket volume does not fit in that very volume: %s&quot;</span>,</div>
<div class="line"><a name="l12230"></a><span class="lineno">12230</span>&#160;                          result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l12231"></a><span class="lineno">12231</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12232"></a><span class="lineno">12232</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;best pocket for item cannot actually contain the item: %s&quot;</span>, result.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l12233"></a><span class="lineno">12233</span>&#160;            }</div>
<div class="line"><a name="l12234"></a><span class="lineno">12234</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12235"></a><span class="lineno">12235</span>&#160;        }</div>
<div class="line"><a name="l12236"></a><span class="lineno">12236</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a> ) {</div>
<div class="line"><a name="l12237"></a><span class="lineno">12237</span>&#160;            num_contained += contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l12238"></a><span class="lineno">12238</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12239"></a><span class="lineno">12239</span>&#160;            num_contained++;</div>
<div class="line"><a name="l12240"></a><span class="lineno">12240</span>&#160;        }</div>
<div class="line"><a name="l12241"></a><span class="lineno">12241</span>&#160;        <span class="keywordflow">if</span>( unseal_pockets ) {</div>
<div class="line"><a name="l12242"></a><span class="lineno">12242</span>&#160;            pocket-&gt;<a class="code" href="classitem__pocket.html#a7c8df26cc3695a78e969810e569a54d7">unseal</a>();</div>
<div class="line"><a name="l12243"></a><span class="lineno">12243</span>&#160;        }</div>
<div class="line"><a name="l12244"></a><span class="lineno">12244</span>&#160;        <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l12245"></a><span class="lineno">12245</span>&#160;            result.<a class="code" href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">value</a>()-&gt;on_pickup( *carrier );</div>
<div class="line"><a name="l12246"></a><span class="lineno">12246</span>&#160;        }</div>
<div class="line"><a name="l12247"></a><span class="lineno">12247</span>&#160;    }</div>
<div class="line"><a name="l12248"></a><span class="lineno">12248</span>&#160;    <span class="keywordflow">if</span>( num_contained == 0 ) {</div>
<div class="line"><a name="l12249"></a><span class="lineno">12249</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to put an item (%s, amount %d) in a container (%s) that cannot contain it&quot;</span>,</div>
<div class="line"><a name="l12250"></a><span class="lineno">12250</span>&#160;                  contained_item.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>(), contained_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().str() );</div>
<div class="line"><a name="l12251"></a><span class="lineno">12251</span>&#160;    }</div>
<div class="line"><a name="l12252"></a><span class="lineno">12252</span>&#160;    <a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l12253"></a><span class="lineno">12253</span>&#160;    <span class="keywordflow">return</span> num_contained;</div>
<div class="line"><a name="l12254"></a><span class="lineno">12254</span>&#160;}</div>
<div class="line"><a name="l12255"></a><span class="lineno">12255</span>&#160; </div>
<div class="line"><a name="l12256"></a><span class="lineno"><a class="line" href="classitem.html#a721746ee594b379edfa634a4b2089265">12256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a721746ee594b379edfa634a4b2089265">item::set_countdown</a>( <span class="keywordtype">int</span> num_turns )</div>
<div class="line"><a name="l12257"></a><span class="lineno">12257</span>&#160;{</div>
<div class="line"><a name="l12258"></a><span class="lineno">12258</span>&#160;    <span class="keywordflow">if</span>( num_turns &lt; 0 ) {</div>
<div class="line"><a name="l12259"></a><span class="lineno">12259</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set a negative countdown value %d.&quot;</span>, num_turns );</div>
<div class="line"><a name="l12260"></a><span class="lineno">12260</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12261"></a><span class="lineno">12261</span>&#160;    }</div>
<div class="line"><a name="l12262"></a><span class="lineno">12262</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">ammo_types</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l12263"></a><span class="lineno">12263</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to set countdown on an item with ammo.&quot;</span> );</div>
<div class="line"><a name="l12264"></a><span class="lineno">12264</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12265"></a><span class="lineno">12265</span>&#160;    }</div>
<div class="line"><a name="l12266"></a><span class="lineno">12266</span>&#160;    <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = num_turns;</div>
<div class="line"><a name="l12267"></a><span class="lineno">12267</span>&#160;}</div>
<div class="line"><a name="l12268"></a><span class="lineno">12268</span>&#160; </div>
<div class="line"><a name="l12269"></a><span class="lineno"><a class="line" href="classitem.html#ab175656b58311be0f2cc036bf21b0c69">12269</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab175656b58311be0f2cc036bf21b0c69">item::use_charges</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;what, <span class="keywordtype">int</span> &amp;qty, std::list&lt;item&gt; &amp;used,</div>
<div class="line"><a name="l12270"></a><span class="lineno">12270</span>&#160;                        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>,</div>
<div class="line"><a name="l12271"></a><span class="lineno">12271</span>&#160;                        <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keywordtype">bool</span> in_tools )</div>
<div class="line"><a name="l12272"></a><span class="lineno">12272</span>&#160;{</div>
<div class="line"><a name="l12273"></a><span class="lineno">12273</span>&#160;    std::vector&lt;item *&gt; del;</div>
<div class="line"><a name="l12274"></a><span class="lineno">12274</span>&#160; </div>
<div class="line"><a name="l12275"></a><span class="lineno">12275</span>&#160;    <a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>(</div>
<div class="line"><a name="l12276"></a><span class="lineno">12276</span>&#160;    [&amp;what, &amp;qty, &amp;used, &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, &amp;del, &amp;<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, &amp;carrier, &amp;in_tools]( <a class="code" href="classitem.html">item</a> * e, <a class="code" href="classitem.html">item</a> * parent ) {</div>
<div class="line"><a name="l12277"></a><span class="lineno">12277</span>&#160;        <span class="keywordflow">if</span>( qty == 0 ) {</div>
<div class="line"><a name="l12278"></a><span class="lineno">12278</span>&#160;            <span class="comment">// found sufficient charges</span></div>
<div class="line"><a name="l12279"></a><span class="lineno">12279</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38">VisitResponse::ABORT</a>;</div>
<div class="line"><a name="l12280"></a><span class="lineno">12280</span>&#160;        }</div>
<div class="line"><a name="l12281"></a><span class="lineno">12281</span>&#160; </div>
<div class="line"><a name="l12282"></a><span class="lineno">12282</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>( *e ) ) {</div>
<div class="line"><a name="l12283"></a><span class="lineno">12283</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l12284"></a><span class="lineno">12284</span>&#160;        }</div>
<div class="line"><a name="l12285"></a><span class="lineno">12285</span>&#160; </div>
<div class="line"><a name="l12286"></a><span class="lineno">12286</span>&#160;        <span class="keywordflow">if</span>( e-&gt;<a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l12287"></a><span class="lineno">12287</span>&#160;            if( e-&gt;typeId() == what || ( in_tools &amp;&amp; e-&gt;ammo_current() == what ) ) {</div>
<div class="line"><a name="l12288"></a><span class="lineno">12288</span>&#160;                int n;</div>
<div class="line"><a name="l12289"></a><span class="lineno">12289</span>&#160;                if( carrier ) {</div>
<div class="line"><a name="l12290"></a><span class="lineno">12290</span>&#160;                    n = e-&gt;ammo_consume( qty, pos, carrier );</div>
<div class="line"><a name="l12291"></a><span class="lineno">12291</span>&#160;                } else {</div>
<div class="line"><a name="l12292"></a><span class="lineno">12292</span>&#160;                    n = e-&gt;ammo_consume( qty, pos, nullptr );</div>
<div class="line"><a name="l12293"></a><span class="lineno">12293</span>&#160;                }</div>
<div class="line"><a name="l12294"></a><span class="lineno">12294</span>&#160; </div>
<div class="line"><a name="l12295"></a><span class="lineno">12295</span>&#160;                if( n &gt; 0 ) {</div>
<div class="line"><a name="l12296"></a><span class="lineno">12296</span>&#160;                    item temp( *e );</div>
<div class="line"><a name="l12297"></a><span class="lineno">12297</span>&#160;                    used.push_back( temp );</div>
<div class="line"><a name="l12298"></a><span class="lineno">12298</span>&#160;                    qty -= n;</div>
<div class="line"><a name="l12299"></a><span class="lineno">12299</span>&#160;                    return VisitResponse::SKIP;</div>
<div class="line"><a name="l12300"></a><span class="lineno">12300</span>&#160;                }</div>
<div class="line"><a name="l12301"></a><span class="lineno">12301</span>&#160;            }</div>
<div class="line"><a name="l12302"></a><span class="lineno">12302</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l12303"></a><span class="lineno">12303</span>&#160; </div>
<div class="line"><a name="l12304"></a><span class="lineno">12304</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( e-&gt;<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l12305"></a><span class="lineno">12305</span>&#160;            if( e-&gt;typeId() == what ) {</div>
<div class="line"><a name="l12306"></a><span class="lineno">12306</span>&#160;                <span class="comment">// if can supply excess charges split required off leaving remainder in-situ</span></div>
<div class="line"><a name="l12307"></a><span class="lineno">12307</span>&#160;                item obj = e-&gt;split( qty );</div>
<div class="line"><a name="l12308"></a><span class="lineno">12308</span>&#160;                if( parent ) {</div>
<div class="line"><a name="l12309"></a><span class="lineno">12309</span>&#160;                    parent-&gt;contained_where( *e )-&gt;on_contents_changed();</div>
<div class="line"><a name="l12310"></a><span class="lineno">12310</span>&#160;                    parent-&gt;on_contents_changed();</div>
<div class="line"><a name="l12311"></a><span class="lineno">12311</span>&#160;                }</div>
<div class="line"><a name="l12312"></a><span class="lineno">12312</span>&#160;                if( !obj.is_null() ) {</div>
<div class="line"><a name="l12313"></a><span class="lineno">12313</span>&#160;                    used.push_back( obj );</div>
<div class="line"><a name="l12314"></a><span class="lineno">12314</span>&#160;                    qty = 0;</div>
<div class="line"><a name="l12315"></a><span class="lineno">12315</span>&#160;                    return VisitResponse::ABORT;</div>
<div class="line"><a name="l12316"></a><span class="lineno">12316</span>&#160;                }</div>
<div class="line"><a name="l12317"></a><span class="lineno">12317</span>&#160; </div>
<div class="line"><a name="l12318"></a><span class="lineno">12318</span>&#160;                qty -= e-&gt;charges;</div>
<div class="line"><a name="l12319"></a><span class="lineno">12319</span>&#160;                used.push_back( *e );</div>
<div class="line"><a name="l12320"></a><span class="lineno">12320</span>&#160;                del.push_back( e );</div>
<div class="line"><a name="l12321"></a><span class="lineno">12321</span>&#160;            }</div>
<div class="line"><a name="l12322"></a><span class="lineno">12322</span>&#160;            <span class="comment">// items counted by charges are not themselves expected to be containers</span></div>
<div class="line"><a name="l12323"></a><span class="lineno">12323</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabeab85df04e922fe1dd3c1f0692faeaacef">VisitResponse::SKIP</a>;</div>
<div class="line"><a name="l12324"></a><span class="lineno">12324</span>&#160;        }</div>
<div class="line"><a name="l12325"></a><span class="lineno">12325</span>&#160; </div>
<div class="line"><a name="l12326"></a><span class="lineno">12326</span>&#160;        <span class="comment">// recurse through any nested containers</span></div>
<div class="line"><a name="l12327"></a><span class="lineno">12327</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l12328"></a><span class="lineno">12328</span>&#160;    } );</div>
<div class="line"><a name="l12329"></a><span class="lineno">12329</span>&#160; </div>
<div class="line"><a name="l12330"></a><span class="lineno">12330</span>&#160;    <span class="keywordtype">bool</span> destroy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12331"></a><span class="lineno">12331</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *e : del ) {</div>
<div class="line"><a name="l12332"></a><span class="lineno">12332</span>&#160;        <span class="keywordflow">if</span>( e == <span class="keyword">this</span> ) {</div>
<div class="line"><a name="l12333"></a><span class="lineno">12333</span>&#160;            destroy = <span class="keyword">true</span>; <span class="comment">// cannot remove ourselves...</span></div>
<div class="line"><a name="l12334"></a><span class="lineno">12334</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12335"></a><span class="lineno">12335</span>&#160;            <a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *e );</div>
<div class="line"><a name="l12336"></a><span class="lineno">12336</span>&#160;        }</div>
<div class="line"><a name="l12337"></a><span class="lineno">12337</span>&#160;    }</div>
<div class="line"><a name="l12338"></a><span class="lineno">12338</span>&#160; </div>
<div class="line"><a name="l12339"></a><span class="lineno">12339</span>&#160;    <span class="keywordflow">return</span> destroy;</div>
<div class="line"><a name="l12340"></a><span class="lineno">12340</span>&#160;}</div>
<div class="line"><a name="l12341"></a><span class="lineno">12341</span>&#160; </div>
<div class="line"><a name="l12342"></a><span class="lineno"><a class="line" href="classitem.html#a9e4a83dab7a888fbbe93db9cbfaa563c">12342</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9e4a83dab7a888fbbe93db9cbfaa563c">item::set_snippet</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">snippet_id</a> &amp;<span class="keywordtype">id</span> )</div>
<div class="line"><a name="l12343"></a><span class="lineno">12343</span>&#160;{</div>
<div class="line"><a name="l12344"></a><span class="lineno">12344</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l12345"></a><span class="lineno">12345</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12346"></a><span class="lineno">12346</span>&#160;    }</div>
<div class="line"><a name="l12347"></a><span class="lineno">12347</span>&#160;    <span class="keywordflow">if</span>( !<span class="keywordtype">id</span>.is_valid() ) {</div>
<div class="line"><a name="l12348"></a><span class="lineno">12348</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;there&#39;s no snippet with id %s&quot;</span>, <span class="keywordtype">id</span>.str() );</div>
<div class="line"><a name="l12349"></a><span class="lineno">12349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12350"></a><span class="lineno">12350</span>&#160;    }</div>
<div class="line"><a name="l12351"></a><span class="lineno">12351</span>&#160;    <a class="code" href="classitem.html#aa475db2839de54a872f47b7c238e214a">snip_id</a> = <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l12352"></a><span class="lineno">12352</span>&#160;}</div>
<div class="line"><a name="l12353"></a><span class="lineno">12353</span>&#160; </div>
<div class="line"><a name="l12354"></a><span class="lineno"><a class="line" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">12354</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem__category.html">item_category</a> &amp;<a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">item::get_category_shallow</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12355"></a><span class="lineno">12355</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12356"></a><span class="lineno">12356</span>&#160;    <span class="keyword">static</span> <a class="code" href="classitem__category.html">item_category</a> null_category;</div>
<div class="line"><a name="l12357"></a><span class="lineno">12357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a>.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>() : null_category;</div>
<div class="line"><a name="l12358"></a><span class="lineno">12358</span>&#160;}</div>
<div class="line"><a name="l12359"></a><span class="lineno">12359</span>&#160; </div>
<div class="line"><a name="l12360"></a><span class="lineno"><a class="line" href="classitem.html#a7c9257f060bf53de49af433651eb9194">12360</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem__category.html">item_category</a> &amp;<a class="code" href="classitem.html#a7c9257f060bf53de49af433651eb9194">item::get_category_of_contents</a>( <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> maxdepth )<span class="keyword"> const</span></div>
<div class="line"><a name="l12361"></a><span class="lineno">12361</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12362"></a><span class="lineno">12362</span>&#160;    <span class="keywordflow">if</span>( depth &lt; maxdepth &amp;&amp; type-&gt;category_force == <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a> ) {</div>
<div class="line"><a name="l12363"></a><span class="lineno">12363</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a87b25bdb6c42347eb5875093899d51fa">cached_category</a>.<a class="code" href="structitem_1_1cat__cache.html#a189c7664f1ed87715864524e12847aaa">timestamp</a> == <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) {</div>
<div class="line"><a name="l12364"></a><span class="lineno">12364</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a87b25bdb6c42347eb5875093899d51fa">cached_category</a>.<a class="code" href="structitem_1_1cat__cache.html#a3fcf96ebc53614d9521a1f78c2536196">id</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l12365"></a><span class="lineno">12365</span>&#160;        }</div>
<div class="line"><a name="l12366"></a><span class="lineno">12366</span>&#160;        ++depth;</div>
<div class="line"><a name="l12367"></a><span class="lineno">12367</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structitem_1_1aggregate__t.html">item::aggregate_t</a> <span class="keyword">const</span> aggi = <a class="code" href="classitem.html#a95c467c19e7fbcb31345109e6d7d9723">aggregated_contents</a>( depth, maxdepth ); aggi ) {</div>
<div class="line"><a name="l12368"></a><span class="lineno">12368</span>&#160;            <a class="code" href="classitem__category.html">item_category</a> <span class="keyword">const</span> &amp;cat = aggi.header-&gt;get_category_of_contents( depth, maxdepth );</div>
<div class="line"><a name="l12369"></a><span class="lineno">12369</span>&#160;            <a class="code" href="classitem.html#a87b25bdb6c42347eb5875093899d51fa">cached_category</a> = { cat.<a class="code" href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">get_id</a>(), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> };</div>
<div class="line"><a name="l12370"></a><span class="lineno">12370</span>&#160;            <span class="keywordflow">return</span> cat;</div>
<div class="line"><a name="l12371"></a><span class="lineno">12371</span>&#160;        }</div>
<div class="line"><a name="l12372"></a><span class="lineno">12372</span>&#160;    }</div>
<div class="line"><a name="l12373"></a><span class="lineno">12373</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">get_category_shallow</a>();</div>
<div class="line"><a name="l12374"></a><span class="lineno">12374</span>&#160;}</div>
<div class="line"><a name="l12375"></a><span class="lineno">12375</span>&#160; </div>
<div class="line"><a name="l12376"></a><span class="lineno"><a class="line" href="structiteminfo.html#a80cae00f37b9dff657c8d7280aeac4e9">12376</a></span>&#160;<a class="code" href="structiteminfo.html#a80cae00f37b9dff657c8d7280aeac4e9">iteminfo::iteminfo</a>( <span class="keyword">const</span> std::string &amp;Type, <span class="keyword">const</span> std::string &amp;Name, <span class="keyword">const</span> std::string &amp;Fmt,</div>
<div class="line"><a name="l12377"></a><span class="lineno">12377</span>&#160;                    <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16">flags</a> Flags, <span class="keywordtype">double</span> Value, <span class="keywordtype">double</span> UnitVal )</div>
<div class="line"><a name="l12378"></a><span class="lineno">12378</span>&#160;{</div>
<div class="line"><a name="l12379"></a><span class="lineno">12379</span>&#160;    sType = Type;</div>
<div class="line"><a name="l12380"></a><span class="lineno">12380</span>&#160;    sName = <a class="code" href="output_8cpp.html#a813ac4bd0ac2745dfe41d13adf98996f">replace_colors</a>( Name );</div>
<div class="line"><a name="l12381"></a><span class="lineno">12381</span>&#160;    sFmt = <a class="code" href="output_8cpp.html#a813ac4bd0ac2745dfe41d13adf98996f">replace_colors</a>( Fmt );</div>
<div class="line"><a name="l12382"></a><span class="lineno">12382</span>&#160;    is_int = !( Flags &amp; is_decimal || Flags &amp; is_three_decimal );</div>
<div class="line"><a name="l12383"></a><span class="lineno">12383</span>&#160;    three_decimal = ( Flags &amp; is_three_decimal );</div>
<div class="line"><a name="l12384"></a><span class="lineno">12384</span>&#160;    dValue = Value;</div>
<div class="line"><a name="l12385"></a><span class="lineno">12385</span>&#160;    dUnitAdjustedVal = UnitVal &lt; std::numeric_limits&lt;float&gt;::epsilon() &amp;&amp;</div>
<div class="line"><a name="l12386"></a><span class="lineno">12386</span>&#160;                       UnitVal &gt; -std::numeric_limits&lt;float&gt;::epsilon() ? Value : UnitVal;</div>
<div class="line"><a name="l12387"></a><span class="lineno">12387</span>&#160;    bShowPlus = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>( Flags &amp; show_plus );</div>
<div class="line"><a name="l12388"></a><span class="lineno">12388</span>&#160;    std::stringstream <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>;</div>
<div class="line"><a name="l12389"></a><span class="lineno">12389</span>&#160;    <span class="keywordflow">if</span>( bShowPlus ) {</div>
<div class="line"><a name="l12390"></a><span class="lineno">12390</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> &lt;&lt; std::showpos;</div>
<div class="line"><a name="l12391"></a><span class="lineno">12391</span>&#160;    }</div>
<div class="line"><a name="l12392"></a><span class="lineno">12392</span>&#160;    <span class="keywordflow">if</span>( is_int ) {</div>
<div class="line"><a name="l12393"></a><span class="lineno">12393</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> &lt;&lt; std::setprecision( 0 );</div>
<div class="line"><a name="l12394"></a><span class="lineno">12394</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( three_decimal ) {</div>
<div class="line"><a name="l12395"></a><span class="lineno">12395</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> &lt;&lt; std::setprecision( 3 );</div>
<div class="line"><a name="l12396"></a><span class="lineno">12396</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12397"></a><span class="lineno">12397</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> &lt;&lt; std::setprecision( 2 );</div>
<div class="line"><a name="l12398"></a><span class="lineno">12398</span>&#160;    }</div>
<div class="line"><a name="l12399"></a><span class="lineno">12399</span>&#160;    <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> &lt;&lt; std::fixed &lt;&lt; Value;</div>
<div class="line"><a name="l12400"></a><span class="lineno">12400</span>&#160;    sValue = <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>.str();</div>
<div class="line"><a name="l12401"></a><span class="lineno">12401</span>&#160;    bNewLine = !( Flags &amp; no_newline );</div>
<div class="line"><a name="l12402"></a><span class="lineno">12402</span>&#160;    bLowerIsBetter = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>( Flags &amp; lower_is_better );</div>
<div class="line"><a name="l12403"></a><span class="lineno">12403</span>&#160;    bDrawName = !( Flags &amp; no_name );</div>
<div class="line"><a name="l12404"></a><span class="lineno">12404</span>&#160;}</div>
<div class="line"><a name="l12405"></a><span class="lineno">12405</span>&#160; </div>
<div class="line"><a name="l12406"></a><span class="lineno"><a class="line" href="structiteminfo.html#ac8239d61e88b5e7a214ba16a9d69e59f">12406</a></span>&#160;<a class="code" href="structiteminfo.html#a80cae00f37b9dff657c8d7280aeac4e9">iteminfo::iteminfo</a>( <span class="keyword">const</span> std::string &amp;Type, <span class="keyword">const</span> std::string &amp;Name, <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16">flags</a> Flags )</div>
<div class="line"><a name="l12407"></a><span class="lineno">12407</span>&#160;    : <a class="code" href="structiteminfo.html">iteminfo</a>( Type, Name, <span class="stringliteral">&quot;&quot;</span>, Flags )</div>
<div class="line"><a name="l12408"></a><span class="lineno">12408</span>&#160;{</div>
<div class="line"><a name="l12409"></a><span class="lineno">12409</span>&#160;}</div>
<div class="line"><a name="l12410"></a><span class="lineno">12410</span>&#160; </div>
<div class="line"><a name="l12411"></a><span class="lineno"><a class="line" href="structiteminfo.html#ada8f563b71e372b31b366c6c857b9e40">12411</a></span>&#160;<a class="code" href="structiteminfo.html#a80cae00f37b9dff657c8d7280aeac4e9">iteminfo::iteminfo</a>( <span class="keyword">const</span> std::string &amp;Type, <span class="keyword">const</span> std::string &amp;Name, <span class="keywordtype">double</span> Value,</div>
<div class="line"><a name="l12412"></a><span class="lineno">12412</span>&#160;                    <span class="keywordtype">double</span> UnitVal )</div>
<div class="line"><a name="l12413"></a><span class="lineno">12413</span>&#160;    : <a class="code" href="structiteminfo.html">iteminfo</a>( Type, Name, <span class="stringliteral">&quot;&quot;</span>, no_flags, Value, UnitVal )</div>
<div class="line"><a name="l12414"></a><span class="lineno">12414</span>&#160;{</div>
<div class="line"><a name="l12415"></a><span class="lineno">12415</span>&#160;}</div>
<div class="line"><a name="l12416"></a><span class="lineno">12416</span>&#160; </div>
<div class="line"><a name="l12417"></a><span class="lineno"><a class="line" href="item_8cpp.html#a617cda6dfe4d90ab4f9fac6cb1651c3b">12417</a></span>&#160;<a class="code" href="structiteminfo.html">iteminfo</a> <a class="code" href="item_8cpp.html#a617cda6dfe4d90ab4f9fac6cb1651c3b">vol_to_info</a>( <span class="keyword">const</span> std::string &amp;type, <span class="keyword">const</span> std::string &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>,</div>
<div class="line"><a name="l12418"></a><span class="lineno">12418</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> &amp;vol, <span class="keywordtype">int</span> decimal_places, <span class="keywordtype">bool</span> lower_is_better )</div>
<div class="line"><a name="l12419"></a><span class="lineno">12419</span>&#160;{</div>
<div class="line"><a name="l12420"></a><span class="lineno">12420</span>&#160;    <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16">iteminfo::flags</a> f = <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>;</div>
<div class="line"><a name="l12421"></a><span class="lineno">12421</span>&#160;    <span class="keywordflow">if</span>( lower_is_better ) {</div>
<div class="line"><a name="l12422"></a><span class="lineno">12422</span>&#160;        f |= <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>;</div>
<div class="line"><a name="l12423"></a><span class="lineno">12423</span>&#160;    }</div>
<div class="line"><a name="l12424"></a><span class="lineno">12424</span>&#160;    <span class="keywordtype">int</span> converted_volume_scale = 0;</div>
<div class="line"><a name="l12425"></a><span class="lineno">12425</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> converted_volume =</div>
<div class="line"><a name="l12426"></a><span class="lineno">12426</span>&#160;        <a class="code" href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a>( <a class="code" href="units__utility_8cpp.html#afa125a0ee11c6790f0be6d3b3707d28a">convert_volume</a>( vol.<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>(), &amp;converted_volume_scale ), decimal_places );</div>
<div class="line"><a name="l12427"></a><span class="lineno">12427</span>&#160;    <span class="keywordflow">if</span>( converted_volume_scale != 0 ) {</div>
<div class="line"><a name="l12428"></a><span class="lineno">12428</span>&#160;        f |= <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>;</div>
<div class="line"><a name="l12429"></a><span class="lineno">12429</span>&#160;    }</div>
<div class="line"><a name="l12430"></a><span class="lineno">12430</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structiteminfo.html">iteminfo</a>( type, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;num&gt; %s&quot;</span>, <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() ), f,</div>
<div class="line"><a name="l12431"></a><span class="lineno">12431</span>&#160;                     converted_volume );</div>
<div class="line"><a name="l12432"></a><span class="lineno">12432</span>&#160;}</div>
<div class="line"><a name="l12433"></a><span class="lineno">12433</span>&#160; </div>
<div class="line"><a name="l12434"></a><span class="lineno"><a class="line" href="item_8cpp.html#a0296b65c9fcfa2ef2a33679368a6f4fc">12434</a></span>&#160;<a class="code" href="structiteminfo.html">iteminfo</a> <a class="code" href="item_8cpp.html#a0296b65c9fcfa2ef2a33679368a6f4fc">weight_to_info</a>( <span class="keyword">const</span> std::string &amp;type, <span class="keyword">const</span> std::string &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>,</div>
<div class="line"><a name="l12435"></a><span class="lineno">12435</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::mass</a> &amp;weight, <span class="keywordtype">int</span> <span class="comment">/* decimal_places */</span>, <span class="keywordtype">bool</span> lower_is_better )</div>
<div class="line"><a name="l12436"></a><span class="lineno">12436</span>&#160;{</div>
<div class="line"><a name="l12437"></a><span class="lineno">12437</span>&#160;    <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16">iteminfo::flags</a> f = <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a>;</div>
<div class="line"><a name="l12438"></a><span class="lineno">12438</span>&#160;    <span class="keywordflow">if</span>( lower_is_better ) {</div>
<div class="line"><a name="l12439"></a><span class="lineno">12439</span>&#160;        f |= <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a>;</div>
<div class="line"><a name="l12440"></a><span class="lineno">12440</span>&#160;    }</div>
<div class="line"><a name="l12441"></a><span class="lineno">12441</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> converted_weight = <a class="code" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( weight );</div>
<div class="line"><a name="l12442"></a><span class="lineno">12442</span>&#160;    f |= <a class="code" href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a>;</div>
<div class="line"><a name="l12443"></a><span class="lineno">12443</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structiteminfo.html">iteminfo</a>( type, <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;num&gt; %s&quot;</span>, <a class="code" href="units__utility_8cpp.html#adb77a71aaad9051e5936082915961b2f">weight_units</a>() ), f,</div>
<div class="line"><a name="l12444"></a><span class="lineno">12444</span>&#160;                     converted_weight );</div>
<div class="line"><a name="l12445"></a><span class="lineno">12445</span>&#160;}</div>
<div class="line"><a name="l12446"></a><span class="lineno">12446</span>&#160; </div>
<div class="line"><a name="l12447"></a><span class="lineno"><a class="line" href="classitem.html#aa764d6c0cfef8050a689291050706f22">12447</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa764d6c0cfef8050a689291050706f22">item::will_explode_in_fire</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12448"></a><span class="lineno">12448</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12449"></a><span class="lineno">12449</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad3feb1bdd1db2f0b88ef6b74c25ef869">explode_in_fire</a> ) {</div>
<div class="line"><a name="l12450"></a><span class="lineno">12450</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12451"></a><span class="lineno">12451</span>&#160;    }</div>
<div class="line"><a name="l12452"></a><span class="lineno">12452</span>&#160; </div>
<div class="line"><a name="l12453"></a><span class="lineno">12453</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> &amp;&amp; ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;special_cookoff || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;cookoff ) ) {</div>
<div class="line"><a name="l12454"></a><span class="lineno">12454</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12455"></a><span class="lineno">12455</span>&#160;    }</div>
<div class="line"><a name="l12456"></a><span class="lineno">12456</span>&#160; </div>
<div class="line"><a name="l12457"></a><span class="lineno">12457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12458"></a><span class="lineno">12458</span>&#160;}</div>
<div class="line"><a name="l12459"></a><span class="lineno">12459</span>&#160; </div>
<div class="line"><a name="l12460"></a><span class="lineno"><a class="line" href="classitem.html#ae79cfef3dd3698b98478cfc08ba20a01">12460</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae79cfef3dd3698b98478cfc08ba20a01">item::detonate</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p, std::vector&lt;item&gt; &amp;drops )</div>
<div class="line"><a name="l12461"></a><span class="lineno">12461</span>&#160;{</div>
<div class="line"><a name="l12462"></a><span class="lineno">12462</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> *source = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#aee4e2c047e2c683905cade66f04112b8">get_faction</a>()-&gt;<a class="code" href="classfaction__template.html#a649fcecca332d594911fed59607d4ee7">id</a> == <a class="code" href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">owner</a></div>
<div class="line"><a name="l12463"></a><span class="lineno">12463</span>&#160;                             ? &amp;<a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>()</div>
<div class="line"><a name="l12464"></a><span class="lineno">12464</span>&#160;                             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l12465"></a><span class="lineno">12465</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a15ce9f3914d2afb7992e4683a0996791">explosion</a>.<a class="code" href="structexplosion__data.html#a7611386ec7f61ad71a625f0b6750483c">power</a> &gt;= 0 ) {</div>
<div class="line"><a name="l12466"></a><span class="lineno">12466</span>&#160;        <a class="code" href="namespaceexplosion__handler.html#af4ae8e07a9627dbfe22b2d07ea577587">explosion_handler::explosion</a>( source, p, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a15ce9f3914d2afb7992e4683a0996791">explosion</a> );</div>
<div class="line"><a name="l12467"></a><span class="lineno">12467</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12468"></a><span class="lineno">12468</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> &amp;&amp; ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;special_cookoff || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;cookoff ) ) {</div>
<div class="line"><a name="l12469"></a><span class="lineno">12469</span>&#160;        <span class="keywordtype">int</span> charges_remaining = <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l12470"></a><span class="lineno">12470</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> rounds_exploded = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, charges_remaining / 2 );</div>
<div class="line"><a name="l12471"></a><span class="lineno">12471</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;special_cookoff ) {</div>
<div class="line"><a name="l12472"></a><span class="lineno">12472</span>&#160;            <span class="comment">// If it has a special effect just trigger it.</span></div>
<div class="line"><a name="l12473"></a><span class="lineno">12473</span>&#160;            <a class="code" href="projectile_8cpp.html#a94546cfedf6b069ea55ca1d4c587bb93">apply_ammo_effects</a>( <span class="keyword">nullptr</span>, p, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;ammo_effects );</div>
<div class="line"><a name="l12474"></a><span class="lineno">12474</span>&#160;        }</div>
<div class="line"><a name="l12475"></a><span class="lineno">12475</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;cookoff ) {</div>
<div class="line"><a name="l12476"></a><span class="lineno">12476</span>&#160;            <span class="comment">// If ammo type can burn, then create an explosion proportional to quantity.</span></div>
<div class="line"><a name="l12477"></a><span class="lineno">12477</span>&#160;            <span class="keywordtype">float</span> <a class="code" href="namespaceunits.html#aafd2a8bd44b71ecc20b880db8071ad53">power</a> = 3.0f * std::pow( rounds_exploded / 25.0f, 0.25f );</div>
<div class="line"><a name="l12478"></a><span class="lineno">12478</span>&#160;            <a class="code" href="namespaceexplosion__handler.html#af4ae8e07a9627dbfe22b2d07ea577587">explosion_handler::explosion</a>( <span class="keyword">nullptr</span>, p, <a class="code" href="namespaceunits.html#aafd2a8bd44b71ecc20b880db8071ad53">power</a>, 0.0f, <span class="keyword">false</span>, 0 );</div>
<div class="line"><a name="l12479"></a><span class="lineno">12479</span>&#160;        }</div>
<div class="line"><a name="l12480"></a><span class="lineno">12480</span>&#160;        charges_remaining -= rounds_exploded;</div>
<div class="line"><a name="l12481"></a><span class="lineno">12481</span>&#160;        <span class="keywordflow">if</span>( charges_remaining &gt; 0 ) {</div>
<div class="line"><a name="l12482"></a><span class="lineno">12482</span>&#160;            <a class="code" href="classitem.html">item</a> temp_item = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l12483"></a><span class="lineno">12483</span>&#160;            temp_item.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = charges_remaining;</div>
<div class="line"><a name="l12484"></a><span class="lineno">12484</span>&#160;            drops.push_back( temp_item );</div>
<div class="line"><a name="l12485"></a><span class="lineno">12485</span>&#160;        }</div>
<div class="line"><a name="l12486"></a><span class="lineno">12486</span>&#160; </div>
<div class="line"><a name="l12487"></a><span class="lineno">12487</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12488"></a><span class="lineno">12488</span>&#160;    }</div>
<div class="line"><a name="l12489"></a><span class="lineno">12489</span>&#160; </div>
<div class="line"><a name="l12490"></a><span class="lineno">12490</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12491"></a><span class="lineno">12491</span>&#160;}</div>
<div class="line"><a name="l12492"></a><span class="lineno"><a class="line" href="classitem.html#ae1f6a127dcee627cc2758d8d30575733">12492</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae1f6a127dcee627cc2758d8d30575733">item::has_rotten_away</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12493"></a><span class="lineno">12493</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12494"></a><span class="lineno">12494</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; !<a class="code" href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83">can_revive</a>() ) {</div>
<div class="line"><a name="l12495"></a><span class="lineno">12495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">get_rot</a>() &gt; 10_days;</div>
<div class="line"><a name="l12496"></a><span class="lineno">12496</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12497"></a><span class="lineno">12497</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">get_relative_rot</a>() &gt; 2.0;</div>
<div class="line"><a name="l12498"></a><span class="lineno">12498</span>&#160;    }</div>
<div class="line"><a name="l12499"></a><span class="lineno">12499</span>&#160;}</div>
<div class="line"><a name="l12500"></a><span class="lineno">12500</span>&#160; </div>
<div class="line"><a name="l12501"></a><span class="lineno"><a class="line" href="item_8cpp.html#abf665d19c2a38e87fa6fdae700c9e670">12501</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#abf665d19c2a38e87fa6fdae700c9e670">item_ptr_compare_by_charges</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">right</a> )</div>
<div class="line"><a name="l12502"></a><span class="lineno">12502</span>&#160;{</div>
<div class="line"><a name="l12503"></a><span class="lineno">12503</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>-&gt;empty() ) {</div>
<div class="line"><a name="l12504"></a><span class="lineno">12504</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12505"></a><span class="lineno">12505</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">right</a>-&gt;empty() ) {</div>
<div class="line"><a name="l12506"></a><span class="lineno">12506</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12507"></a><span class="lineno">12507</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12508"></a><span class="lineno">12508</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">right</a>-&gt;only_item().charges &lt; <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>-&gt;only_item().charges;</div>
<div class="line"><a name="l12509"></a><span class="lineno">12509</span>&#160;    }</div>
<div class="line"><a name="l12510"></a><span class="lineno">12510</span>&#160;}</div>
<div class="line"><a name="l12511"></a><span class="lineno">12511</span>&#160; </div>
<div class="line"><a name="l12512"></a><span class="lineno"><a class="line" href="item_8cpp.html#acc75a57299d74f6ca49181508f75fc20">12512</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#acc75a57299d74f6ca49181508f75fc20">item_compare_by_charges</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">right</a> )</div>
<div class="line"><a name="l12513"></a><span class="lineno">12513</span>&#160;{</div>
<div class="line"><a name="l12514"></a><span class="lineno">12514</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="item_8cpp.html#abf665d19c2a38e87fa6fdae700c9e670">item_ptr_compare_by_charges</a>( &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">left</a>, &amp;<a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">right</a> );</div>
<div class="line"><a name="l12515"></a><span class="lineno">12515</span>&#160;}</div>
<div class="line"><a name="l12516"></a><span class="lineno">12516</span>&#160; </div>
<div class="line"><a name="l12517"></a><span class="lineno"><a class="line" href="item_8cpp.html#aaed94383d6a3117b0c4a53c77ee3d42e">12517</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="item_8cpp.html#aaed94383d6a3117b0c4a53c77ee3d42e">USED_BY_IDS</a>( <span class="stringliteral">&quot;USED_BY_IDS&quot;</span> );</div>
<div class="line"><a name="l12518"></a><span class="lineno"><a class="line" href="classitem.html#acaaafe73d15db693a2ef330ac787321d">12518</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#acaaafe73d15db693a2ef330ac787321d">item::already_used_by_player</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p )<span class="keyword"> const</span></div>
<div class="line"><a name="l12519"></a><span class="lineno">12519</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12520"></a><span class="lineno">12520</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <a class="code" href="item_8cpp.html#aaed94383d6a3117b0c4a53c77ee3d42e">USED_BY_IDS</a> );</div>
<div class="line"><a name="l12521"></a><span class="lineno">12521</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l12522"></a><span class="lineno">12522</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12523"></a><span class="lineno">12523</span>&#160;    }</div>
<div class="line"><a name="l12524"></a><span class="lineno">12524</span>&#160;    <span class="comment">// USED_BY_IDS always starts *and* ends with a &#39;;&#39;, the search string</span></div>
<div class="line"><a name="l12525"></a><span class="lineno">12525</span>&#160;    <span class="comment">// &#39;;&lt;id&gt;;&#39; matches at most one part of USED_BY_IDS, and only when exactly that</span></div>
<div class="line"><a name="l12526"></a><span class="lineno">12526</span>&#160;    <span class="comment">// id has been added.</span></div>
<div class="line"><a name="l12527"></a><span class="lineno">12527</span>&#160;    <span class="keyword">const</span> std::string needle = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;;%d;&quot;</span>, p.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>().<a class="code" href="classcharacter__id.html#a57a3bebd5dc5168d0b278cfccdbdcd18">get_value</a>() );</div>
<div class="line"><a name="l12528"></a><span class="lineno">12528</span>&#160;    <span class="keywordflow">return</span> it-&gt;second.find( needle ) != std::string::npos;</div>
<div class="line"><a name="l12529"></a><span class="lineno">12529</span>&#160;}</div>
<div class="line"><a name="l12530"></a><span class="lineno">12530</span>&#160; </div>
<div class="line"><a name="l12531"></a><span class="lineno"><a class="line" href="classitem.html#a0b1a036a5945cab1da08a089cf664980">12531</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a0b1a036a5945cab1da08a089cf664980">item::mark_as_used_by_player</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p )</div>
<div class="line"><a name="l12532"></a><span class="lineno">12532</span>&#160;{</div>
<div class="line"><a name="l12533"></a><span class="lineno">12533</span>&#160;    std::string &amp;used_by_ids = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>[ <a class="code" href="item_8cpp.html#aaed94383d6a3117b0c4a53c77ee3d42e">USED_BY_IDS</a> ];</div>
<div class="line"><a name="l12534"></a><span class="lineno">12534</span>&#160;    <span class="keywordflow">if</span>( used_by_ids.empty() ) {</div>
<div class="line"><a name="l12535"></a><span class="lineno">12535</span>&#160;        <span class="comment">// *always* start with a &#39;;&#39;</span></div>
<div class="line"><a name="l12536"></a><span class="lineno">12536</span>&#160;        used_by_ids = <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line"><a name="l12537"></a><span class="lineno">12537</span>&#160;    }</div>
<div class="line"><a name="l12538"></a><span class="lineno">12538</span>&#160;    <span class="comment">// and always end with a &#39;;&#39;</span></div>
<div class="line"><a name="l12539"></a><span class="lineno">12539</span>&#160;    used_by_ids += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%d;&quot;</span>, p.<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>().<a class="code" href="classcharacter__id.html#a57a3bebd5dc5168d0b278cfccdbdcd18">get_value</a>() );</div>
<div class="line"><a name="l12540"></a><span class="lineno">12540</span>&#160;}</div>
<div class="line"><a name="l12541"></a><span class="lineno">12541</span>&#160; </div>
<div class="line"><a name="l12542"></a><span class="lineno"><a class="line" href="classitem.html#a76165a9e0121b48e5df59d0fcabc1728">12542</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a76165a9e0121b48e5df59d0fcabc1728">item::can_holster</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>, <span class="keywordtype">bool</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l12543"></a><span class="lineno">12543</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12544"></a><span class="lineno">12544</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;holster&quot;</span> ) ) {</div>
<div class="line"><a name="l12545"></a><span class="lineno">12545</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// item is not a holster</span></div>
<div class="line"><a name="l12546"></a><span class="lineno">12546</span>&#160;    }</div>
<div class="line"><a name="l12547"></a><span class="lineno">12547</span>&#160; </div>
<div class="line"><a name="l12548"></a><span class="lineno">12548</span>&#160;    <span class="keyword">const</span> <a class="code" href="classholster__actor.html">holster_actor</a> *ptr = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classholster__actor.html">holster_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l12549"></a><span class="lineno">12549</span>&#160;                               ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;holster&quot;</span> )-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l12550"></a><span class="lineno">12550</span>&#160;    <span class="keywordflow">return</span> ptr-&gt;<a class="code" href="classholster__actor.html#abc39e63b332c5628db93c4cb139db39a">can_holster</a>( *<span class="keyword">this</span>, obj );</div>
<div class="line"><a name="l12551"></a><span class="lineno">12551</span>&#160;}</div>
<div class="line"><a name="l12552"></a><span class="lineno">12552</span>&#160; </div>
<div class="line"><a name="l12553"></a><span class="lineno"><a class="line" href="classitem.html#a397ded92d52f1c19cc4e8e2edb13839d">12553</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a397ded92d52f1c19cc4e8e2edb13839d">item::will_spill</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12554"></a><span class="lineno">12554</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12555"></a><span class="lineno">12555</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a4a7c0172d5b8aafdf54be2b21f9e3607">will_spill</a>();</div>
<div class="line"><a name="l12556"></a><span class="lineno">12556</span>&#160;}</div>
<div class="line"><a name="l12557"></a><span class="lineno">12557</span>&#160; </div>
<div class="line"><a name="l12558"></a><span class="lineno"><a class="line" href="classitem.html#aa01faa951aa26aa368725a6fa065ccb5">12558</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa01faa951aa26aa368725a6fa065ccb5">item::will_spill_if_unsealed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12559"></a><span class="lineno">12559</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12560"></a><span class="lineno">12560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5298b0915e1937325e856d49aaf52475">will_spill_if_unsealed</a>();</div>
<div class="line"><a name="l12561"></a><span class="lineno">12561</span>&#160;}</div>
<div class="line"><a name="l12562"></a><span class="lineno">12562</span>&#160; </div>
<div class="line"><a name="l12563"></a><span class="lineno"><a class="line" href="classitem.html#adce9200620918ac031843f985f6cbfb7">12563</a></span>&#160;std::string <a class="code" href="classitem.html#adce9200620918ac031843f985f6cbfb7">item::components_to_string</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12564"></a><span class="lineno">12564</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12565"></a><span class="lineno">12565</span>&#160;    <span class="keyword">using</span> t_count_map = std::map&lt;std::string, int&gt;;</div>
<div class="line"><a name="l12566"></a><span class="lineno">12566</span>&#160;    t_count_map counts;</div>
<div class="line"><a name="l12567"></a><span class="lineno">12567</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l12568"></a><span class="lineno">12568</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : tvp.second ) {</div>
<div class="line"><a name="l12569"></a><span class="lineno">12569</span>&#160;            <span class="keywordflow">if</span>( !it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7e1e05972c269d40d228d92bbea6f9b7">flag_BYPRODUCT</a> ) ) {</div>
<div class="line"><a name="l12570"></a><span class="lineno">12570</span>&#160;                <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = it.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>();</div>
<div class="line"><a name="l12571"></a><span class="lineno">12571</span>&#160;                counts[<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>]++;</div>
<div class="line"><a name="l12572"></a><span class="lineno">12572</span>&#160;            }</div>
<div class="line"><a name="l12573"></a><span class="lineno">12573</span>&#160;        }</div>
<div class="line"><a name="l12574"></a><span class="lineno">12574</span>&#160;    }</div>
<div class="line"><a name="l12575"></a><span class="lineno">12575</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( counts,</div>
<div class="line"><a name="l12576"></a><span class="lineno">12576</span>&#160;    []( <span class="keyword">const</span> std::pair&lt;std::string, int&gt; &amp;entry ) {</div>
<div class="line"><a name="l12577"></a><span class="lineno">12577</span>&#160;        <span class="keywordflow">return</span> entry.second != 1</div>
<div class="line"><a name="l12578"></a><span class="lineno">12578</span>&#160;               ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;components count&quot;</span>, <span class="stringliteral">&quot;%d x %s&quot;</span> ), entry.second, entry.first )</div>
<div class="line"><a name="l12579"></a><span class="lineno">12579</span>&#160;               : entry.first;</div>
<div class="line"><a name="l12580"></a><span class="lineno">12580</span>&#160;    }, <a class="code" href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a> );</div>
<div class="line"><a name="l12581"></a><span class="lineno">12581</span>&#160;}</div>
<div class="line"><a name="l12582"></a><span class="lineno">12582</span>&#160; </div>
<div class="line"><a name="l12583"></a><span class="lineno"><a class="line" href="classitem.html#a0863a9784ae90c120d91478521163f16">12583</a></span>&#160;uint64_t <a class="code" href="classitem.html#a0863a9784ae90c120d91478521163f16">item::make_component_hash</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12584"></a><span class="lineno">12584</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12585"></a><span class="lineno">12585</span>&#160;    std::string concatenated_ids;</div>
<div class="line"><a name="l12586"></a><span class="lineno">12586</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l12587"></a><span class="lineno">12587</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; tvp.second.size(); ++i ) {</div>
<div class="line"><a name="l12588"></a><span class="lineno">12588</span>&#160;            concatenated_ids += tvp.first.str();</div>
<div class="line"><a name="l12589"></a><span class="lineno">12589</span>&#160;        }</div>
<div class="line"><a name="l12590"></a><span class="lineno">12590</span>&#160;    }</div>
<div class="line"><a name="l12591"></a><span class="lineno">12591</span>&#160; </div>
<div class="line"><a name="l12592"></a><span class="lineno">12592</span>&#160;    std::hash&lt;std::string&gt; hasher;</div>
<div class="line"><a name="l12593"></a><span class="lineno">12593</span>&#160;    <span class="keywordflow">return</span> hasher( concatenated_ids );</div>
<div class="line"><a name="l12594"></a><span class="lineno">12594</span>&#160;}</div>
<div class="line"><a name="l12595"></a><span class="lineno">12595</span>&#160; </div>
<div class="line"><a name="l12596"></a><span class="lineno"><a class="line" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">12596</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">item::needs_processing</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12597"></a><span class="lineno">12597</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12598"></a><span class="lineno">12598</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a64e90b4f86aa185a44a6e5f43e954686">processing_speed</a>() != <a class="code" href="classitem.html#a74455429897a8496f1ba87140669c9f5">NO_PROCESSING</a>;</div>
<div class="line"><a name="l12599"></a><span class="lineno">12599</span>&#160;}</div>
<div class="line"><a name="l12600"></a><span class="lineno">12600</span>&#160; </div>
<div class="line"><a name="l12601"></a><span class="lineno"><a class="line" href="classitem.html#a64e90b4f86aa185a44a6e5f43e954686">12601</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a64e90b4f86aa185a44a6e5f43e954686">item::processing_speed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12602"></a><span class="lineno">12602</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12603"></a><span class="lineno">12603</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() || <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l12604"></a><span class="lineno">12604</span>&#160;        <span class="keywordflow">return</span> to_turns&lt;int&gt;( 10_minutes );</div>
<div class="line"><a name="l12605"></a><span class="lineno">12605</span>&#160;    }</div>
<div class="line"><a name="l12606"></a><span class="lineno">12606</span>&#160; </div>
<div class="line"><a name="l12607"></a><span class="lineno">12607</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> || <a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> || <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> || <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ||</div>
<div class="line"><a name="l12608"></a><span class="lineno">12608</span>&#160;        <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a> ) || <a class="code" href="classitem.html#a363197f949b110a42110ca99b9d36f73">has_relic_recharge</a>() ||</div>
<div class="line"><a name="l12609"></a><span class="lineno">12609</span>&#160;        <a class="code" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">has_fault_flag</a>( <a class="code" href="item_8cpp.html#ae1a1f893ca0a1908ca7906a1b86e4865">flag_BLACKPOWDER_FOULING_DAMAGE</a> ) || <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gun_heat&quot;</span>, 0 ) &gt; 0 ) {</div>
<div class="line"><a name="l12610"></a><span class="lineno">12610</span>&#160;        <span class="comment">// Unless otherwise indicated, update every turn.</span></div>
<div class="line"><a name="l12611"></a><span class="lineno">12611</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l12612"></a><span class="lineno">12612</span>&#160;    }</div>
<div class="line"><a name="l12613"></a><span class="lineno">12613</span>&#160; </div>
<div class="line"><a name="l12614"></a><span class="lineno">12614</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a74455429897a8496f1ba87140669c9f5">item::NO_PROCESSING</a>;</div>
<div class="line"><a name="l12615"></a><span class="lineno">12615</span>&#160;}</div>
<div class="line"><a name="l12616"></a><span class="lineno">12616</span>&#160; </div>
<div class="line"><a name="l12617"></a><span class="lineno"><a class="line" href="classitem.html#afd7799c0d554e1d9d1efd79896f1141a">12617</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#afd7799c0d554e1d9d1efd79896f1141a">item::apply_freezerburn</a>()</div>
<div class="line"><a name="l12618"></a><span class="lineno">12618</span>&#160;{</div>
<div class="line"><a name="l12619"></a><span class="lineno">12619</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a601e941cb8aaf8e22fbbe2600a467892">flag_FREEZERBURN</a> ) ) {</div>
<div class="line"><a name="l12620"></a><span class="lineno">12620</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12621"></a><span class="lineno">12621</span>&#160;    }</div>
<div class="line"><a name="l12622"></a><span class="lineno">12622</span>&#160;    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a> );</div>
<div class="line"><a name="l12623"></a><span class="lineno">12623</span>&#160;}</div>
<div class="line"><a name="l12624"></a><span class="lineno">12624</span>&#160; </div>
<div class="line"><a name="l12625"></a><span class="lineno"><a class="line" href="classitem.html#a4b5324bb0d76a4fd22944e9fc978bbc8">12625</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a4b5324bb0d76a4fd22944e9fc978bbc8">item::process_temperature_rot</a>( <span class="keywordtype">float</span> insulation, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classmap.html">map</a> &amp;here,</div>
<div class="line"><a name="l12626"></a><span class="lineno">12626</span>&#160;                                    <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5d">temperature_flag</a> flag, <span class="keywordtype">float</span> spoil_modifier )</div>
<div class="line"><a name="l12627"></a><span class="lineno">12627</span>&#160;{</div>
<div class="line"><a name="l12628"></a><span class="lineno">12628</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> now = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l12629"></a><span class="lineno">12629</span>&#160; </div>
<div class="line"><a name="l12630"></a><span class="lineno">12630</span>&#160;    <span class="comment">// if player debug menu&#39;d the time backward it breaks stuff, just reset the</span></div>
<div class="line"><a name="l12631"></a><span class="lineno">12631</span>&#160;    <span class="comment">// last_temp_check in this case</span></div>
<div class="line"><a name="l12632"></a><span class="lineno">12632</span>&#160;    <span class="keywordflow">if</span>( now - <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> &lt; 0_turns ) {</div>
<div class="line"><a name="l12633"></a><span class="lineno">12633</span>&#160;        <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">reset_temp_check</a>();</div>
<div class="line"><a name="l12634"></a><span class="lineno">12634</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12635"></a><span class="lineno">12635</span>&#160;    }</div>
<div class="line"><a name="l12636"></a><span class="lineno">12636</span>&#160; </div>
<div class="line"><a name="l12637"></a><span class="lineno">12637</span>&#160;    <span class="comment">// process temperature and rot at most once every 100_turns (10 min)</span></div>
<div class="line"><a name="l12638"></a><span class="lineno">12638</span>&#160;    <span class="comment">// note we&#39;re also gated by item::processing_speed</span></div>
<div class="line"><a name="l12639"></a><span class="lineno">12639</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> smallest_interval = 10_minutes;</div>
<div class="line"><a name="l12640"></a><span class="lineno">12640</span>&#160;    <span class="keywordflow">if</span>( now - <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> &lt; smallest_interval &amp;&amp; <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l12641"></a><span class="lineno">12641</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12642"></a><span class="lineno">12642</span>&#160;    }</div>
<div class="line"><a name="l12643"></a><span class="lineno">12643</span>&#160; </div>
<div class="line"><a name="l12644"></a><span class="lineno">12644</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::temperature</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().<a class="code" href="group__Weather.html#ga92e3dd986a664a399dffe62d2ebe2139">get_temperature</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l12645"></a><span class="lineno">12645</span>&#160; </div>
<div class="line"><a name="l12646"></a><span class="lineno">12646</span>&#160;    <span class="keywordflow">switch</span>( flag ) {</div>
<div class="line"><a name="l12647"></a><span class="lineno">12647</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da1e23852820b9154316c7c06e2b7ba051">temperature_flag::NORMAL</a>:</div>
<div class="line"><a name="l12648"></a><span class="lineno">12648</span>&#160;            <span class="comment">// Just use the temperature normally</span></div>
<div class="line"><a name="l12649"></a><span class="lineno">12649</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12650"></a><span class="lineno">12650</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5dae8dfdc3882e77c31b5bb19ec1fc4c4c2">temperature_flag::FRIDGE</a>:</div>
<div class="line"><a name="l12651"></a><span class="lineno">12651</span>&#160;            <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, <a class="code" href="namespacetemperatures.html#a6ac4b0413305dd75769d62227081d8b1">temperatures::fridge</a> );</div>
<div class="line"><a name="l12652"></a><span class="lineno">12652</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12653"></a><span class="lineno">12653</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da2023320d0009a528328d03b5796797be">temperature_flag::FREEZER</a>:</div>
<div class="line"><a name="l12654"></a><span class="lineno">12654</span>&#160;            <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, <a class="code" href="namespacetemperatures.html#ab5323589e14984e5c09cafa3b62def7d">temperatures::freezer</a> );</div>
<div class="line"><a name="l12655"></a><span class="lineno">12655</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12656"></a><span class="lineno">12656</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5daa2ad87051c1d483b2f8bfc768cd0dba8">temperature_flag::HEATER</a>:</div>
<div class="line"><a name="l12657"></a><span class="lineno">12657</span>&#160;            <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, <a class="code" href="namespacetemperatures.html#a9f523a38a9f55c0f553288964f823f38">temperatures::normal</a> );</div>
<div class="line"><a name="l12658"></a><span class="lineno">12658</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12659"></a><span class="lineno">12659</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da13f7e176e6012ee67a62acd2dbd6d39b">temperature_flag::ROOT_CELLAR</a>:</div>
<div class="line"><a name="l12660"></a><span class="lineno">12660</span>&#160;            <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="game__constants_8h.html#a1f4708eff2561553fb330e402b0f58dc">AVERAGE_ANNUAL_TEMPERATURE</a>;</div>
<div class="line"><a name="l12661"></a><span class="lineno">12661</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12662"></a><span class="lineno">12662</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l12663"></a><span class="lineno">12663</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Temperature flag enum not valid.  Using current temperature.&quot;</span> );</div>
<div class="line"><a name="l12664"></a><span class="lineno">12664</span>&#160;    }</div>
<div class="line"><a name="l12665"></a><span class="lineno">12665</span>&#160; </div>
<div class="line"><a name="l12666"></a><span class="lineno">12666</span>&#160;    <span class="keywordtype">bool</span> carried = carrier != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l12667"></a><span class="lineno">12667</span>&#160;    <span class="comment">// body heat increases inventory temperature by 5 F (2.77 K) and insulation by 50%</span></div>
<div class="line"><a name="l12668"></a><span class="lineno">12668</span>&#160;    <span class="keywordflow">if</span>( carried ) {</div>
<div class="line"><a name="l12669"></a><span class="lineno">12669</span>&#160;        insulation *= 1.5;</div>
<div class="line"><a name="l12670"></a><span class="lineno">12670</span>&#160;        <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> += <a class="code" href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a>( 5 );</div>
<div class="line"><a name="l12671"></a><span class="lineno">12671</span>&#160;    }</div>
<div class="line"><a name="l12672"></a><span class="lineno">12672</span>&#160; </div>
<div class="line"><a name="l12673"></a><span class="lineno">12673</span>&#160;    <a class="code" href="classtime__point.html">time_point</a> time = <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a>;</div>
<div class="line"><a name="l12674"></a><span class="lineno">12674</span>&#160;    <a class="code" href="structitem__internal_1_1scoped__goes__bad__cache.html">item_internal::scoped_goes_bad_cache</a> _cache( <span class="keyword">this</span> );</div>
<div class="line"><a name="l12675"></a><span class="lineno">12675</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> process_rot = <a class="code" href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">goes_bad</a>() &amp;&amp; spoil_modifier != 0;</div>
<div class="line"><a name="l12676"></a><span class="lineno">12676</span>&#160; </div>
<div class="line"><a name="l12677"></a><span class="lineno">12677</span>&#160;    <span class="keywordflow">if</span>( now - time &gt; 1_hours ) {</div>
<div class="line"><a name="l12678"></a><span class="lineno">12678</span>&#160;        <span class="comment">// This code is for items that were left out of reality bubble for long time</span></div>
<div class="line"><a name="l12679"></a><span class="lineno">12679</span>&#160; </div>
<div class="line"><a name="l12680"></a><span class="lineno">12680</span>&#160;        <span class="keyword">const</span> <a class="code" href="classweather__generator.html">weather_generator</a> &amp;wgen = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().<a class="code" href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">get_cur_weather_gen</a>();</div>
<div class="line"><a name="l12681"></a><span class="lineno">12681</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classitem.html#a0689df7448f053e727cf64ba733b98ef">seed</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed();</div>
<div class="line"><a name="l12682"></a><span class="lineno">12682</span>&#160; </div>
<div class="line"><a name="l12683"></a><span class="lineno">12683</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> temp_mod;</div>
<div class="line"><a name="l12684"></a><span class="lineno">12684</span>&#160;        <span class="comment">// Toilets and vending machines will try to get the heat radiation and convection during mapgen and segfault.</span></div>
<div class="line"><a name="l12685"></a><span class="lineno">12685</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;new_game ) {</div>
<div class="line"><a name="l12686"></a><span class="lineno">12686</span>&#160;            temp_mod = <a class="code" href="game_8cpp.html#abe70ab885639c40fb92f3adf812ebaf6">get_heat_radiation</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l12687"></a><span class="lineno">12687</span>&#160;            temp_mod += <a class="code" href="game_8cpp.html#adb30c3833accc6babc195d1307374ef4">get_convection_temperature</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l12688"></a><span class="lineno">12688</span>&#160;            temp_mod += here.<a class="code" href="classmap.html#a5b15ab6080f4853c1baddbd607b38b33">get_temperature_mod</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l12689"></a><span class="lineno">12689</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12690"></a><span class="lineno">12690</span>&#160;            temp_mod = <a class="code" href="namespaceunits.html#a345181745bb0299d6f6f8f96d4f4acdc">units::from_kelvin_delta</a>( 0 );</div>
<div class="line"><a name="l12691"></a><span class="lineno">12691</span>&#160;        }</div>
<div class="line"><a name="l12692"></a><span class="lineno">12692</span>&#160; </div>
<div class="line"><a name="l12693"></a><span class="lineno">12693</span>&#160;        <span class="keywordflow">if</span>( carried ) {</div>
<div class="line"><a name="l12694"></a><span class="lineno">12694</span>&#160;            temp_mod += <a class="code" href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a>( 5 ); <span class="comment">// body heat increases inventory temperature</span></div>
<div class="line"><a name="l12695"></a><span class="lineno">12695</span>&#160;        }</div>
<div class="line"><a name="l12696"></a><span class="lineno">12696</span>&#160; </div>
<div class="line"><a name="l12697"></a><span class="lineno">12697</span>&#160;        <span class="comment">// Process the past of this item in 1h chunks until there is less than 1h left.</span></div>
<div class="line"><a name="l12698"></a><span class="lineno">12698</span>&#160;        <a class="code" href="classtime__duration.html">time_duration</a> time_delta = 1_hours;</div>
<div class="line"><a name="l12699"></a><span class="lineno">12699</span>&#160; </div>
<div class="line"><a name="l12700"></a><span class="lineno">12700</span>&#160;        <span class="keywordflow">while</span>( now - time &gt; 1_hours ) {</div>
<div class="line"><a name="l12701"></a><span class="lineno">12701</span>&#160;            time += time_delta;</div>
<div class="line"><a name="l12702"></a><span class="lineno">12702</span>&#160; </div>
<div class="line"><a name="l12703"></a><span class="lineno">12703</span>&#160;            <span class="comment">// Get the environment temperature</span></div>
<div class="line"><a name="l12704"></a><span class="lineno">12704</span>&#160;            <span class="comment">// Use weather if above ground, use map temp if below</span></div>
<div class="line"><a name="l12705"></a><span class="lineno">12705</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::temperature</a> env_temperature;</div>
<div class="line"><a name="l12706"></a><span class="lineno">12706</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.z &gt;= 0 &amp;&amp; flag != <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da13f7e176e6012ee67a62acd2dbd6d39b">temperature_flag::ROOT_CELLAR</a> ) {</div>
<div class="line"><a name="l12707"></a><span class="lineno">12707</span>&#160;                env_temperature = wgen.<a class="code" href="classweather__generator.html#a2a0b3598f7da7869d1ebf80b1e69e49a">get_weather_temperature</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, time, <a class="code" href="classitem.html#a0689df7448f053e727cf64ba733b98ef">seed</a> );</div>
<div class="line"><a name="l12708"></a><span class="lineno">12708</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12709"></a><span class="lineno">12709</span>&#160;                env_temperature = <a class="code" href="game__constants_8h.html#a1f4708eff2561553fb330e402b0f58dc">AVERAGE_ANNUAL_TEMPERATURE</a>;</div>
<div class="line"><a name="l12710"></a><span class="lineno">12710</span>&#160;            }</div>
<div class="line"><a name="l12711"></a><span class="lineno">12711</span>&#160;            env_temperature += temp_mod;</div>
<div class="line"><a name="l12712"></a><span class="lineno">12712</span>&#160; </div>
<div class="line"><a name="l12713"></a><span class="lineno">12713</span>&#160;            <span class="keywordflow">switch</span>( flag ) {</div>
<div class="line"><a name="l12714"></a><span class="lineno">12714</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da1e23852820b9154316c7c06e2b7ba051">temperature_flag::NORMAL</a>:</div>
<div class="line"><a name="l12715"></a><span class="lineno">12715</span>&#160;                    <span class="comment">// Just use the temperature normally</span></div>
<div class="line"><a name="l12716"></a><span class="lineno">12716</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12717"></a><span class="lineno">12717</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5dae8dfdc3882e77c31b5bb19ec1fc4c4c2">temperature_flag::FRIDGE</a>:</div>
<div class="line"><a name="l12718"></a><span class="lineno">12718</span>&#160;                    env_temperature = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( env_temperature, <a class="code" href="namespacetemperatures.html#a6ac4b0413305dd75769d62227081d8b1">temperatures::fridge</a> );</div>
<div class="line"><a name="l12719"></a><span class="lineno">12719</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12720"></a><span class="lineno">12720</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da2023320d0009a528328d03b5796797be">temperature_flag::FREEZER</a>:</div>
<div class="line"><a name="l12721"></a><span class="lineno">12721</span>&#160;                    env_temperature = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( env_temperature, <a class="code" href="namespacetemperatures.html#ab5323589e14984e5c09cafa3b62def7d">temperatures::freezer</a> );</div>
<div class="line"><a name="l12722"></a><span class="lineno">12722</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12723"></a><span class="lineno">12723</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5daa2ad87051c1d483b2f8bfc768cd0dba8">temperature_flag::HEATER</a>:</div>
<div class="line"><a name="l12724"></a><span class="lineno">12724</span>&#160;                    env_temperature = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( env_temperature, <a class="code" href="namespacetemperatures.html#a9f523a38a9f55c0f553288964f823f38">temperatures::normal</a> );</div>
<div class="line"><a name="l12725"></a><span class="lineno">12725</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12726"></a><span class="lineno">12726</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da13f7e176e6012ee67a62acd2dbd6d39b">temperature_flag::ROOT_CELLAR</a>:</div>
<div class="line"><a name="l12727"></a><span class="lineno">12727</span>&#160;                    env_temperature = <a class="code" href="game__constants_8h.html#a1f4708eff2561553fb330e402b0f58dc">AVERAGE_ANNUAL_TEMPERATURE</a>;</div>
<div class="line"><a name="l12728"></a><span class="lineno">12728</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12729"></a><span class="lineno">12729</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l12730"></a><span class="lineno">12730</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Temperature flag enum not valid.  Using normal temperature.&quot;</span> );</div>
<div class="line"><a name="l12731"></a><span class="lineno">12731</span>&#160;            }</div>
<div class="line"><a name="l12732"></a><span class="lineno">12732</span>&#160; </div>
<div class="line"><a name="l12733"></a><span class="lineno">12733</span>&#160;            <span class="comment">// Calculate item temperature from environment temperature</span></div>
<div class="line"><a name="l12734"></a><span class="lineno">12734</span>&#160;            <span class="comment">// If the time was more than 2 d ago we do not care about item temperature.</span></div>
<div class="line"><a name="l12735"></a><span class="lineno">12735</span>&#160;            <span class="keywordflow">if</span>( now - time &lt; 2_days ) {</div>
<div class="line"><a name="l12736"></a><span class="lineno">12736</span>&#160;                <a class="code" href="classitem.html#a6a67383d6c79247cf93f734f5ac3c265">calc_temp</a>( env_temperature, insulation, time_delta );</div>
<div class="line"><a name="l12737"></a><span class="lineno">12737</span>&#160;            }</div>
<div class="line"><a name="l12738"></a><span class="lineno">12738</span>&#160;            <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = time;</div>
<div class="line"><a name="l12739"></a><span class="lineno">12739</span>&#160; </div>
<div class="line"><a name="l12740"></a><span class="lineno">12740</span>&#160;            <span class="comment">// Calculate item rot</span></div>
<div class="line"><a name="l12741"></a><span class="lineno">12741</span>&#160;            <span class="keywordflow">if</span>( process_rot ) {</div>
<div class="line"><a name="l12742"></a><span class="lineno">12742</span>&#160;                <a class="code" href="classitem.html#a9912c47e06d70bd1ca003a8f588f4a02">calc_rot</a>( env_temperature, spoil_modifier, time_delta );</div>
<div class="line"><a name="l12743"></a><span class="lineno">12743</span>&#160; </div>
<div class="line"><a name="l12744"></a><span class="lineno">12744</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae1f6a127dcee627cc2758d8d30575733">has_rotten_away</a>() &amp;&amp; carrier == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l12745"></a><span class="lineno">12745</span>&#160;                    <span class="comment">// No need to track item that will be gone</span></div>
<div class="line"><a name="l12746"></a><span class="lineno">12746</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12747"></a><span class="lineno">12747</span>&#160;                }</div>
<div class="line"><a name="l12748"></a><span class="lineno">12748</span>&#160;            }</div>
<div class="line"><a name="l12749"></a><span class="lineno">12749</span>&#160;        }</div>
<div class="line"><a name="l12750"></a><span class="lineno">12750</span>&#160;    }</div>
<div class="line"><a name="l12751"></a><span class="lineno">12751</span>&#160; </div>
<div class="line"><a name="l12752"></a><span class="lineno">12752</span>&#160;    <span class="comment">// Remaining &lt;1 h from above</span></div>
<div class="line"><a name="l12753"></a><span class="lineno">12753</span>&#160;    <span class="comment">// and items that are held near the player</span></div>
<div class="line"><a name="l12754"></a><span class="lineno">12754</span>&#160;    <span class="keywordflow">if</span>( now - time &gt; smallest_interval ) {</div>
<div class="line"><a name="l12755"></a><span class="lineno">12755</span>&#160;        <a class="code" href="classitem.html#a6a67383d6c79247cf93f734f5ac3c265">calc_temp</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, insulation, now - time );</div>
<div class="line"><a name="l12756"></a><span class="lineno">12756</span>&#160;        <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = now;</div>
<div class="line"><a name="l12757"></a><span class="lineno">12757</span>&#160;        <span class="keywordflow">if</span>( process_rot ) {</div>
<div class="line"><a name="l12758"></a><span class="lineno">12758</span>&#160;            <a class="code" href="classitem.html#a9912c47e06d70bd1ca003a8f588f4a02">calc_rot</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a>, spoil_modifier, now - time );</div>
<div class="line"><a name="l12759"></a><span class="lineno">12759</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae1f6a127dcee627cc2758d8d30575733">has_rotten_away</a>() &amp;&amp; carrier == <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l12760"></a><span class="lineno">12760</span>&#160;        }</div>
<div class="line"><a name="l12761"></a><span class="lineno">12761</span>&#160;    }</div>
<div class="line"><a name="l12762"></a><span class="lineno">12762</span>&#160; </div>
<div class="line"><a name="l12763"></a><span class="lineno">12763</span>&#160;    <span class="comment">// Just now created items will get here.</span></div>
<div class="line"><a name="l12764"></a><span class="lineno">12764</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) &lt; 0 ) {</div>
<div class="line"><a name="l12765"></a><span class="lineno">12765</span>&#160;        <a class="code" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">set_item_temperature</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l12766"></a><span class="lineno">12766</span>&#160;    }</div>
<div class="line"><a name="l12767"></a><span class="lineno">12767</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12768"></a><span class="lineno">12768</span>&#160;}</div>
<div class="line"><a name="l12769"></a><span class="lineno">12769</span>&#160; </div>
<div class="line"><a name="l12770"></a><span class="lineno"><a class="line" href="classitem.html#a6a67383d6c79247cf93f734f5ac3c265">12770</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a6a67383d6c79247cf93f734f5ac3c265">item::calc_temp</a>( <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> &amp;temp, <span class="keyword">const</span> <span class="keywordtype">float</span> insulation,</div>
<div class="line"><a name="l12771"></a><span class="lineno">12771</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp;time_delta )</div>
<div class="line"><a name="l12772"></a><span class="lineno">12772</span>&#160;{</div>
<div class="line"><a name="l12773"></a><span class="lineno">12773</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> env_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> ); <span class="comment">// K</span></div>
<div class="line"><a name="l12774"></a><span class="lineno">12774</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> old_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> ); <span class="comment">// K</span></div>
<div class="line"><a name="l12775"></a><span class="lineno">12775</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> temperature_difference = env_temperature - old_temperature;</div>
<div class="line"><a name="l12776"></a><span class="lineno">12776</span>&#160; </div>
<div class="line"><a name="l12777"></a><span class="lineno">12777</span>&#160;    <span class="comment">// If no or only small temperature difference then no need to do math.</span></div>
<div class="line"><a name="l12778"></a><span class="lineno">12778</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( temperature_difference ) &lt; 0.4 ) {</div>
<div class="line"><a name="l12779"></a><span class="lineno">12779</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12780"></a><span class="lineno">12780</span>&#160;    }</div>
<div class="line"><a name="l12781"></a><span class="lineno">12781</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> = <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">to_gram</a>( <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() ); <span class="comment">// g</span></div>
<div class="line"><a name="l12782"></a><span class="lineno">12782</span>&#160; </div>
<div class="line"><a name="l12783"></a><span class="lineno">12783</span>&#160;    <span class="comment">// If item has negative energy set to environment temperature (it not been processed ever)</span></div>
<div class="line"><a name="l12784"></a><span class="lineno">12784</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) &lt; 0 ) {</div>
<div class="line"><a name="l12785"></a><span class="lineno">12785</span>&#160;        <a class="code" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">set_item_temperature</a>( <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l12786"></a><span class="lineno">12786</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12787"></a><span class="lineno">12787</span>&#160;    }</div>
<div class="line"><a name="l12788"></a><span class="lineno">12788</span>&#160; </div>
<div class="line"><a name="l12789"></a><span class="lineno">12789</span>&#160;    <span class="comment">// specific_energy = item thermal energy (J/g). Stored in the item</span></div>
<div class="line"><a name="l12790"></a><span class="lineno">12790</span>&#160;    <span class="comment">// temperature = item temperature (K). Stored in the item</span></div>
<div class="line"><a name="l12791"></a><span class="lineno">12791</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> conductivity_term = 0.0076 * std::pow( <a class="code" href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">to_milliliter</a>( <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() ),</div>
<div class="line"><a name="l12792"></a><span class="lineno">12792</span>&#160;                                    2.0 / 3.0 ) / insulation;</div>
<div class="line"><a name="l12793"></a><span class="lineno">12793</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_liquid = <a class="code" href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">get_specific_heat_liquid</a>();</div>
<div class="line"><a name="l12794"></a><span class="lineno">12794</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> specific_heat_solid = <a class="code" href="classitem.html#a48f495097039db579f63fef551736843">get_specific_heat_solid</a>();</div>
<div class="line"><a name="l12795"></a><span class="lineno">12795</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> latent_heat = <a class="code" href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">get_latent_heat</a>();</div>
<div class="line"><a name="l12796"></a><span class="lineno">12796</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> freezing_temperature = <a class="code" href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a>( <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>() );</div>
<div class="line"><a name="l12797"></a><span class="lineno">12797</span>&#160;    <span class="comment">// Energy that the item would have if it was completely solid at freezing temperature</span></div>
<div class="line"><a name="l12798"></a><span class="lineno">12798</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::specific_energy</a> completely_frozen_specific_energy = <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>(</div>
<div class="line"><a name="l12799"></a><span class="lineno">12799</span>&#160;                specific_heat_solid * freezing_temperature );</div>
<div class="line"><a name="l12800"></a><span class="lineno">12800</span>&#160;    <span class="comment">// Energy that the item would have if it was completely liquid at freezing temperature</span></div>
<div class="line"><a name="l12801"></a><span class="lineno">12801</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::specific_energy</a> completely_liquid_specific_energy = completely_frozen_specific_energy +</div>
<div class="line"><a name="l12802"></a><span class="lineno">12802</span>&#160;            <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( latent_heat );</div>
<div class="line"><a name="l12803"></a><span class="lineno">12803</span>&#160; </div>
<div class="line"><a name="l12804"></a><span class="lineno">12804</span>&#160;    <span class="keywordtype">float</span> new_specific_energy;</div>
<div class="line"><a name="l12805"></a><span class="lineno">12805</span>&#160;    <span class="keywordtype">float</span> new_item_temperature;</div>
<div class="line"><a name="l12806"></a><span class="lineno">12806</span>&#160;    <span class="keywordtype">float</span> freeze_percentage = 0.0f;</div>
<div class="line"><a name="l12807"></a><span class="lineno">12807</span>&#160;    <span class="keywordtype">int</span> extra_time;</div>
<div class="line"><a name="l12808"></a><span class="lineno">12808</span>&#160; </div>
<div class="line"><a name="l12809"></a><span class="lineno">12809</span>&#160;    <span class="comment">// Temperature calculations based on Newton&#39;s law of cooling.</span></div>
<div class="line"><a name="l12810"></a><span class="lineno">12810</span>&#160;    <span class="comment">// Calculations are done assuming that the item stays in its phase.</span></div>
<div class="line"><a name="l12811"></a><span class="lineno">12811</span>&#160;    <span class="comment">// This assumption can cause over heating when transitioning from melting to liquid.</span></div>
<div class="line"><a name="l12812"></a><span class="lineno">12812</span>&#160;    <span class="comment">// In other transitions the item may cool/heat too little but that won&#39;t be a problem.</span></div>
<div class="line"><a name="l12813"></a><span class="lineno">12813</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12814"></a><span class="lineno">12814</span>&#160;        <span class="comment">// Was solid.</span></div>
<div class="line"><a name="l12815"></a><span class="lineno">12815</span>&#160;        new_item_temperature = ( - temperature_difference</div>
<div class="line"><a name="l12816"></a><span class="lineno">12816</span>&#160;                                 * std::exp( - to_turns&lt;int&gt;( time_delta ) * conductivity_term / ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> * specific_heat_solid ) )</div>
<div class="line"><a name="l12817"></a><span class="lineno">12817</span>&#160;                                 + env_temperature );</div>
<div class="line"><a name="l12818"></a><span class="lineno">12818</span>&#160;        new_specific_energy = new_item_temperature * specific_heat_solid;</div>
<div class="line"><a name="l12819"></a><span class="lineno">12819</span>&#160;        <span class="keywordflow">if</span>( new_item_temperature &gt; freezing_temperature + 0.5 ) {</div>
<div class="line"><a name="l12820"></a><span class="lineno">12820</span>&#160;            <span class="comment">// Started melting before temp was calculated.</span></div>
<div class="line"><a name="l12821"></a><span class="lineno">12821</span>&#160;            <span class="comment">// 0.5 is here because we don&#39;t care if it heats up a bit too high</span></div>
<div class="line"><a name="l12822"></a><span class="lineno">12822</span>&#160;            <span class="comment">// Calculate how long the item was solid</span></div>
<div class="line"><a name="l12823"></a><span class="lineno">12823</span>&#160;            <span class="comment">// and apply rest of the time as melting</span></div>
<div class="line"><a name="l12824"></a><span class="lineno">12824</span>&#160;            extra_time = to_turns&lt;int&gt;( time_delta )</div>
<div class="line"><a name="l12825"></a><span class="lineno">12825</span>&#160;                         - <a class="code" href="math__parser__func_8h.html#a6a96e281ee5bf1967d26afebe837ad48">std::log</a>( - temperature_difference / ( freezing_temperature - env_temperature ) )</div>
<div class="line"><a name="l12826"></a><span class="lineno">12826</span>&#160;                         * ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> * specific_heat_solid / conductivity_term );</div>
<div class="line"><a name="l12827"></a><span class="lineno">12827</span>&#160;            new_specific_energy = <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_frozen_specific_energy )</div>
<div class="line"><a name="l12828"></a><span class="lineno">12828</span>&#160;                                  + conductivity_term</div>
<div class="line"><a name="l12829"></a><span class="lineno">12829</span>&#160;                                  * ( env_temperature - freezing_temperature ) * extra_time / <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a>;</div>
<div class="line"><a name="l12830"></a><span class="lineno">12830</span>&#160;            new_item_temperature = freezing_temperature;</div>
<div class="line"><a name="l12831"></a><span class="lineno">12831</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &gt; completely_liquid_specific_energy ) {</div>
<div class="line"><a name="l12832"></a><span class="lineno">12832</span>&#160;                <span class="comment">// The item then also finished melting.</span></div>
<div class="line"><a name="l12833"></a><span class="lineno">12833</span>&#160;                <span class="comment">// This may happen rarely with very small items</span></div>
<div class="line"><a name="l12834"></a><span class="lineno">12834</span>&#160;                <span class="comment">// Just set the item to environment temperature</span></div>
<div class="line"><a name="l12835"></a><span class="lineno">12835</span>&#160;                <a class="code" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">set_item_temperature</a>( <a class="code" href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a>( env_temperature ) );</div>
<div class="line"><a name="l12836"></a><span class="lineno">12836</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12837"></a><span class="lineno">12837</span>&#160;            }</div>
<div class="line"><a name="l12838"></a><span class="lineno">12838</span>&#160;        }</div>
<div class="line"><a name="l12839"></a><span class="lineno">12839</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> &gt; completely_liquid_specific_energy ) {</div>
<div class="line"><a name="l12840"></a><span class="lineno">12840</span>&#160;        <span class="comment">// Was liquid.</span></div>
<div class="line"><a name="l12841"></a><span class="lineno">12841</span>&#160;        new_item_temperature = ( - temperature_difference</div>
<div class="line"><a name="l12842"></a><span class="lineno">12842</span>&#160;                                 * std::exp( - to_turns&lt;int&gt;( time_delta ) * conductivity_term / ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> *</div>
<div class="line"><a name="l12843"></a><span class="lineno">12843</span>&#160;                                             specific_heat_liquid ) )</div>
<div class="line"><a name="l12844"></a><span class="lineno">12844</span>&#160;                                 + env_temperature );</div>
<div class="line"><a name="l12845"></a><span class="lineno">12845</span>&#160;        new_specific_energy = ( new_item_temperature - freezing_temperature ) * specific_heat_liquid +</div>
<div class="line"><a name="l12846"></a><span class="lineno">12846</span>&#160;                              <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy );</div>
<div class="line"><a name="l12847"></a><span class="lineno">12847</span>&#160;        <span class="keywordflow">if</span>( new_item_temperature &lt; freezing_temperature - 0.5 ) {</div>
<div class="line"><a name="l12848"></a><span class="lineno">12848</span>&#160;            <span class="comment">// Started freezing before temp was calculated.</span></div>
<div class="line"><a name="l12849"></a><span class="lineno">12849</span>&#160;            <span class="comment">// 0.5 is here because we don&#39;t care if it cools down a bit too low</span></div>
<div class="line"><a name="l12850"></a><span class="lineno">12850</span>&#160;            <span class="comment">// Calculate how long the item was liquid</span></div>
<div class="line"><a name="l12851"></a><span class="lineno">12851</span>&#160;            <span class="comment">// and apply rest of the time as freezing</span></div>
<div class="line"><a name="l12852"></a><span class="lineno">12852</span>&#160;            extra_time = to_turns&lt;int&gt;( time_delta )</div>
<div class="line"><a name="l12853"></a><span class="lineno">12853</span>&#160;                         - <a class="code" href="math__parser__func_8h.html#a6a96e281ee5bf1967d26afebe837ad48">std::log</a>( - temperature_difference / ( freezing_temperature - env_temperature ) )</div>
<div class="line"><a name="l12854"></a><span class="lineno">12854</span>&#160;                         * ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> * specific_heat_liquid / conductivity_term );</div>
<div class="line"><a name="l12855"></a><span class="lineno">12855</span>&#160;            new_specific_energy = <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy )</div>
<div class="line"><a name="l12856"></a><span class="lineno">12856</span>&#160;                                  + conductivity_term</div>
<div class="line"><a name="l12857"></a><span class="lineno">12857</span>&#160;                                  * ( env_temperature - freezing_temperature ) * extra_time / <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a>;</div>
<div class="line"><a name="l12858"></a><span class="lineno">12858</span>&#160;            new_item_temperature = freezing_temperature;</div>
<div class="line"><a name="l12859"></a><span class="lineno">12859</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12860"></a><span class="lineno">12860</span>&#160;                <span class="comment">// The item then also finished freezing.</span></div>
<div class="line"><a name="l12861"></a><span class="lineno">12861</span>&#160;                <span class="comment">// This may happen rarely with very small items</span></div>
<div class="line"><a name="l12862"></a><span class="lineno">12862</span>&#160;                <span class="comment">// Just set the item to environment temperature</span></div>
<div class="line"><a name="l12863"></a><span class="lineno">12863</span>&#160;                <a class="code" href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">set_item_temperature</a>( <a class="code" href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a>( env_temperature ) );</div>
<div class="line"><a name="l12864"></a><span class="lineno">12864</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l12865"></a><span class="lineno">12865</span>&#160;            }</div>
<div class="line"><a name="l12866"></a><span class="lineno">12866</span>&#160;        }</div>
<div class="line"><a name="l12867"></a><span class="lineno">12867</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12868"></a><span class="lineno">12868</span>&#160;        <span class="comment">// Was melting or freezing</span></div>
<div class="line"><a name="l12869"></a><span class="lineno">12869</span>&#160;        new_specific_energy = <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) + conductivity_term *</div>
<div class="line"><a name="l12870"></a><span class="lineno">12870</span>&#160;                              temperature_difference * to_turns&lt;int&gt;( time_delta ) / <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a>;</div>
<div class="line"><a name="l12871"></a><span class="lineno">12871</span>&#160;        new_item_temperature = freezing_temperature;</div>
<div class="line"><a name="l12872"></a><span class="lineno">12872</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &gt; completely_liquid_specific_energy ) {</div>
<div class="line"><a name="l12873"></a><span class="lineno">12873</span>&#160;            <span class="comment">// Item melted before temp was calculated</span></div>
<div class="line"><a name="l12874"></a><span class="lineno">12874</span>&#160;            <span class="comment">// Calculate how long the item was melting</span></div>
<div class="line"><a name="l12875"></a><span class="lineno">12875</span>&#160;            <span class="comment">// and apply rest of the time as liquid</span></div>
<div class="line"><a name="l12876"></a><span class="lineno">12876</span>&#160;            extra_time = to_turns&lt;int&gt;( time_delta ) - ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> / ( conductivity_term * temperature_difference ) )</div>
<div class="line"><a name="l12877"></a><span class="lineno">12877</span>&#160;                         *</div>
<div class="line"><a name="l12878"></a><span class="lineno">12878</span>&#160;                         <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy - <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> );</div>
<div class="line"><a name="l12879"></a><span class="lineno">12879</span>&#160;            new_item_temperature = ( ( freezing_temperature - env_temperature )</div>
<div class="line"><a name="l12880"></a><span class="lineno">12880</span>&#160;                                     * std::exp( - extra_time * conductivity_term / ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> *</div>
<div class="line"><a name="l12881"></a><span class="lineno">12881</span>&#160;                                                 specific_heat_liquid ) )</div>
<div class="line"><a name="l12882"></a><span class="lineno">12882</span>&#160;                                     + env_temperature );</div>
<div class="line"><a name="l12883"></a><span class="lineno">12883</span>&#160;            new_specific_energy = ( new_item_temperature - freezing_temperature ) * specific_heat_liquid +</div>
<div class="line"><a name="l12884"></a><span class="lineno">12884</span>&#160;                                  <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy );</div>
<div class="line"><a name="l12885"></a><span class="lineno">12885</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12886"></a><span class="lineno">12886</span>&#160;            <span class="comment">// Item froze before temp was calculated</span></div>
<div class="line"><a name="l12887"></a><span class="lineno">12887</span>&#160;            <span class="comment">// Calculate how long the item was freezing</span></div>
<div class="line"><a name="l12888"></a><span class="lineno">12888</span>&#160;            <span class="comment">// and apply rest of the time as solid</span></div>
<div class="line"><a name="l12889"></a><span class="lineno">12889</span>&#160;            extra_time = to_turns&lt;int&gt;( time_delta ) - ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> / ( conductivity_term * temperature_difference ) )</div>
<div class="line"><a name="l12890"></a><span class="lineno">12890</span>&#160;                         *</div>
<div class="line"><a name="l12891"></a><span class="lineno">12891</span>&#160;                         <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_frozen_specific_energy - <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> );</div>
<div class="line"><a name="l12892"></a><span class="lineno">12892</span>&#160;            new_item_temperature = ( ( freezing_temperature - env_temperature )</div>
<div class="line"><a name="l12893"></a><span class="lineno">12893</span>&#160;                                     * std::exp( - extra_time * conductivity_term / ( <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> *</div>
<div class="line"><a name="l12894"></a><span class="lineno">12894</span>&#160;                                                 specific_heat_solid ) )</div>
<div class="line"><a name="l12895"></a><span class="lineno">12895</span>&#160;                                     + env_temperature );</div>
<div class="line"><a name="l12896"></a><span class="lineno">12896</span>&#160;            new_specific_energy = new_item_temperature * specific_heat_solid;</div>
<div class="line"><a name="l12897"></a><span class="lineno">12897</span>&#160;        }</div>
<div class="line"><a name="l12898"></a><span class="lineno">12898</span>&#160;    }</div>
<div class="line"><a name="l12899"></a><span class="lineno">12899</span>&#160;    <span class="comment">// Check freeze status now based on energies.</span></div>
<div class="line"><a name="l12900"></a><span class="lineno">12900</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &gt; completely_liquid_specific_energy ) {</div>
<div class="line"><a name="l12901"></a><span class="lineno">12901</span>&#160;        freeze_percentage = 0;</div>
<div class="line"><a name="l12902"></a><span class="lineno">12902</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy ) &lt; completely_frozen_specific_energy ) {</div>
<div class="line"><a name="l12903"></a><span class="lineno">12903</span>&#160;        <span class="comment">// Item is solid</span></div>
<div class="line"><a name="l12904"></a><span class="lineno">12904</span>&#160;        freeze_percentage = 1;</div>
<div class="line"><a name="l12905"></a><span class="lineno">12905</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l12906"></a><span class="lineno">12906</span>&#160;        <span class="comment">// Item is partially solid</span></div>
<div class="line"><a name="l12907"></a><span class="lineno">12907</span>&#160;        freeze_percentage = ( <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy ) -</div>
<div class="line"><a name="l12908"></a><span class="lineno">12908</span>&#160;                              new_specific_energy ) /</div>
<div class="line"><a name="l12909"></a><span class="lineno">12909</span>&#160;                            <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( completely_liquid_specific_energy - completely_frozen_specific_energy );</div>
<div class="line"><a name="l12910"></a><span class="lineno">12910</span>&#160;    }</div>
<div class="line"><a name="l12911"></a><span class="lineno">12911</span>&#160; </div>
<div class="line"><a name="l12912"></a><span class="lineno">12912</span>&#160;    <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> = <a class="code" href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a>( new_item_temperature );</div>
<div class="line"><a name="l12913"></a><span class="lineno">12913</span>&#160;    <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> = <a class="code" href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a>( new_specific_energy );</div>
<div class="line"><a name="l12914"></a><span class="lineno">12914</span>&#160;    <a class="code" href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">set_temp_flags</a>( <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a>, freeze_percentage );</div>
<div class="line"><a name="l12915"></a><span class="lineno">12915</span>&#160;}</div>
<div class="line"><a name="l12916"></a><span class="lineno">12916</span>&#160; </div>
<div class="line"><a name="l12917"></a><span class="lineno"><a class="line" href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">12917</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">item::set_temp_flags</a>( <a class="code" href="classunits_1_1quantity.html">units::temperature</a> new_temperature, <span class="keywordtype">float</span> freeze_percentage )</div>
<div class="line"><a name="l12918"></a><span class="lineno">12918</span>&#160;{</div>
<div class="line"><a name="l12919"></a><span class="lineno">12919</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::temperature</a> freezing_temperature = <a class="code" href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">get_freeze_point</a>();</div>
<div class="line"><a name="l12920"></a><span class="lineno">12920</span>&#160;    <span class="comment">// Apply temperature tags tags</span></div>
<div class="line"><a name="l12921"></a><span class="lineno">12921</span>&#160;    <span class="comment">// Hot = over temperatures::hot</span></div>
<div class="line"><a name="l12922"></a><span class="lineno">12922</span>&#160;    <span class="comment">// Warm = over temperatures::warm</span></div>
<div class="line"><a name="l12923"></a><span class="lineno">12923</span>&#160;    <span class="comment">// Cold = below temperatures::cold</span></div>
<div class="line"><a name="l12924"></a><span class="lineno">12924</span>&#160;    <span class="comment">// Frozen = Over 50% frozen</span></div>
<div class="line"><a name="l12925"></a><span class="lineno">12925</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) ) {</div>
<div class="line"><a name="l12926"></a><span class="lineno">12926</span>&#160;        <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> );</div>
<div class="line"><a name="l12927"></a><span class="lineno">12927</span>&#160;        <span class="keywordflow">if</span>( freeze_percentage &lt; 0.5 ) {</div>
<div class="line"><a name="l12928"></a><span class="lineno">12928</span>&#160;            <span class="comment">// Item melts and becomes mushy</span></div>
<div class="line"><a name="l12929"></a><span class="lineno">12929</span>&#160;            <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a>;</div>
<div class="line"><a name="l12930"></a><span class="lineno">12930</span>&#160;            <a class="code" href="classitem.html#afd7799c0d554e1d9d1efd79896f1141a">apply_freezerburn</a>();</div>
<div class="line"><a name="l12931"></a><span class="lineno">12931</span>&#160;            <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a50220e81539eb4a6d7a2571ae4ebbeec">flag_SHREDDED</a> );</div>
<div class="line"><a name="l12932"></a><span class="lineno">12932</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l12933"></a><span class="lineno">12933</span>&#160;                <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a61c1220c2f02301b1f4e854b0dd6a670">flag_FROM_FROZEN_LIQUID</a> );</div>
<div class="line"><a name="l12934"></a><span class="lineno">12934</span>&#160;            }</div>
<div class="line"><a name="l12935"></a><span class="lineno">12935</span>&#160;        }</div>
<div class="line"><a name="l12936"></a><span class="lineno">12936</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> ) ) {</div>
<div class="line"><a name="l12937"></a><span class="lineno">12937</span>&#160;        <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> );</div>
<div class="line"><a name="l12938"></a><span class="lineno">12938</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> ) ) {</div>
<div class="line"><a name="l12939"></a><span class="lineno">12939</span>&#160;        <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> );</div>
<div class="line"><a name="l12940"></a><span class="lineno">12940</span>&#160;    }</div>
<div class="line"><a name="l12941"></a><span class="lineno">12941</span>&#160;    <span class="keywordflow">if</span>( new_temperature &gt; <a class="code" href="namespacetemperatures.html#a3fa7c6789383b6c28db8a7b51764ca16">temperatures::hot</a> ) {</div>
<div class="line"><a name="l12942"></a><span class="lineno">12942</span>&#160;        <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> );</div>
<div class="line"><a name="l12943"></a><span class="lineno">12943</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( freeze_percentage &gt; 0.5 ) {</div>
<div class="line"><a name="l12944"></a><span class="lineno">12944</span>&#160;        <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> );</div>
<div class="line"><a name="l12945"></a><span class="lineno">12945</span>&#160;        <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a>;</div>
<div class="line"><a name="l12946"></a><span class="lineno">12946</span>&#160;        <span class="comment">// If below freezing temp AND the food may have parasites AND food does not have &quot;NO_PARASITES&quot; tag then add the &quot;NO_PARASITES&quot; tag.</span></div>
<div class="line"><a name="l12947"></a><span class="lineno">12947</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; new_temperature &lt; freezing_temperature &amp;&amp; <a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;parasites &gt; 0 ) {</div>
<div class="line"><a name="l12948"></a><span class="lineno">12948</span>&#160;            <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a> );</div>
<div class="line"><a name="l12949"></a><span class="lineno">12949</span>&#160;        }</div>
<div class="line"><a name="l12950"></a><span class="lineno">12950</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_temperature &lt; <a class="code" href="namespacetemperatures.html#a6a0e3903fa0a749ee4c45d95eb6016d2">temperatures::cold</a> ) {</div>
<div class="line"><a name="l12951"></a><span class="lineno">12951</span>&#160;        <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> );</div>
<div class="line"><a name="l12952"></a><span class="lineno">12952</span>&#160;    }</div>
<div class="line"><a name="l12953"></a><span class="lineno">12953</span>&#160; </div>
<div class="line"><a name="l12954"></a><span class="lineno">12954</span>&#160;    <span class="comment">// Convert water into clean water if it starts boiling</span></div>
<div class="line"><a name="l12955"></a><span class="lineno">12955</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> &amp;&amp; new_temperature &gt; <a class="code" href="namespacetemperatures.html#af00d7a49cf88a77d0ec81f562fea9856">temperatures::boiling</a> ) {</div>
<div class="line"><a name="l12956"></a><span class="lineno">12956</span>&#160;        <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a> ).<a class="code" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> = 0;</div>
<div class="line"><a name="l12957"></a><span class="lineno">12957</span>&#160;    }</div>
<div class="line"><a name="l12958"></a><span class="lineno">12958</span>&#160;}</div>
<div class="line"><a name="l12959"></a><span class="lineno">12959</span>&#160; </div>
<div class="line"><a name="l12960"></a><span class="lineno"><a class="line" href="classitem.html#a0ea923d4cc56e08aef374d499f17345e">12960</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a0ea923d4cc56e08aef374d499f17345e">item::get_item_thermal_energy</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l12961"></a><span class="lineno">12961</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l12962"></a><span class="lineno">12962</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a> = <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">to_gram</a>( <a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() ); <span class="comment">// g</span></div>
<div class="line"><a name="l12963"></a><span class="lineno">12963</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a>( <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> ) * <a class="code" href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">mass</a>;</div>
<div class="line"><a name="l12964"></a><span class="lineno">12964</span>&#160;}</div>
<div class="line"><a name="l12965"></a><span class="lineno">12965</span>&#160; </div>
<div class="line"><a name="l12966"></a><span class="lineno"><a class="line" href="classitem.html#a62fef893b74d8691c331aca77d163584">12966</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a62fef893b74d8691c331aca77d163584">item::heat_up</a>()</div>
<div class="line"><a name="l12967"></a><span class="lineno">12967</span>&#160;{</div>
<div class="line"><a name="l12968"></a><span class="lineno">12968</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> );</div>
<div class="line"><a name="l12969"></a><span class="lineno">12969</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> );</div>
<div class="line"><a name="l12970"></a><span class="lineno">12970</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a50220e81539eb4a6d7a2571ae4ebbeec">flag_SHREDDED</a> );</div>
<div class="line"><a name="l12971"></a><span class="lineno">12971</span>&#160;    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> );</div>
<div class="line"><a name="l12972"></a><span class="lineno">12972</span>&#160;    <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a>;</div>
<div class="line"><a name="l12973"></a><span class="lineno">12973</span>&#160;    <span class="comment">// Set item temperature to 60 C (333.15 K, 122 F)</span></div>
<div class="line"><a name="l12974"></a><span class="lineno">12974</span>&#160;    <span class="comment">// Also set the energy to match</span></div>
<div class="line"><a name="l12975"></a><span class="lineno">12975</span>&#160;    <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> = <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( 60 );</div>
<div class="line"><a name="l12976"></a><span class="lineno">12976</span>&#160;    <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> = <a class="code" href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">get_specific_energy_from_temperature</a>( <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( 60 ) );</div>
<div class="line"><a name="l12977"></a><span class="lineno">12977</span>&#160; </div>
<div class="line"><a name="l12978"></a><span class="lineno">12978</span>&#160;    <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">reset_temp_check</a>();</div>
<div class="line"><a name="l12979"></a><span class="lineno">12979</span>&#160;}</div>
<div class="line"><a name="l12980"></a><span class="lineno">12980</span>&#160; </div>
<div class="line"><a name="l12981"></a><span class="lineno"><a class="line" href="classitem.html#a2ad99faa90026d50e9572d04f7b0d95c">12981</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a2ad99faa90026d50e9572d04f7b0d95c">item::cold_up</a>()</div>
<div class="line"><a name="l12982"></a><span class="lineno">12982</span>&#160;{</div>
<div class="line"><a name="l12983"></a><span class="lineno">12983</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> );</div>
<div class="line"><a name="l12984"></a><span class="lineno">12984</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> );</div>
<div class="line"><a name="l12985"></a><span class="lineno">12985</span>&#160;    <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a50220e81539eb4a6d7a2571ae4ebbeec">flag_SHREDDED</a> );</div>
<div class="line"><a name="l12986"></a><span class="lineno">12986</span>&#160;    <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a> );</div>
<div class="line"><a name="l12987"></a><span class="lineno">12987</span>&#160;    <a class="code" href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">current_phase</a> = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">phase</a>;</div>
<div class="line"><a name="l12988"></a><span class="lineno">12988</span>&#160;    <span class="comment">// Set item temperature to 3 C (276.15 K, 37.4 F)</span></div>
<div class="line"><a name="l12989"></a><span class="lineno">12989</span>&#160;    <span class="comment">// Also set the energy to match</span></div>
<div class="line"><a name="l12990"></a><span class="lineno">12990</span>&#160;    <a class="code" href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">temperature</a> = <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( 3 );</div>
<div class="line"><a name="l12991"></a><span class="lineno">12991</span>&#160;    <a class="code" href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">specific_energy</a> = <a class="code" href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">get_specific_energy_from_temperature</a>( <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( 3 ) );</div>
<div class="line"><a name="l12992"></a><span class="lineno">12992</span>&#160; </div>
<div class="line"><a name="l12993"></a><span class="lineno">12993</span>&#160;    <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">reset_temp_check</a>();</div>
<div class="line"><a name="l12994"></a><span class="lineno">12994</span>&#160;}</div>
<div class="line"><a name="l12995"></a><span class="lineno">12995</span>&#160; </div>
<div class="line"><a name="l12996"></a><span class="lineno"><a class="line" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">12996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae6a1ca40954db829643f80f8f204f612">item::reset_temp_check</a>()</div>
<div class="line"><a name="l12997"></a><span class="lineno">12997</span>&#160;{</div>
<div class="line"><a name="l12998"></a><span class="lineno">12998</span>&#160;    <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l12999"></a><span class="lineno">12999</span>&#160;}</div>
<div class="line"><a name="l13000"></a><span class="lineno">13000</span>&#160; </div>
<div class="line"><a name="l13001"></a><span class="lineno"><a class="line" href="classitem.html#aabbf0dcc1b21ab8934074ab718d4a15f">13001</a></span>&#160;std::vector&lt;trait_id&gt; <a class="code" href="classitem.html#aabbf0dcc1b21ab8934074ab718d4a15f">item::mutations_from_wearing</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy, <span class="keywordtype">bool</span> removing )<span class="keyword"> const</span></div>
<div class="line"><a name="l13002"></a><span class="lineno">13002</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13003"></a><span class="lineno">13003</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() ) {</div>
<div class="line"><a name="l13004"></a><span class="lineno">13004</span>&#160;        <span class="keywordflow">return</span> std::vector&lt;trait_id&gt; {};</div>
<div class="line"><a name="l13005"></a><span class="lineno">13005</span>&#160;    }</div>
<div class="line"><a name="l13006"></a><span class="lineno">13006</span>&#160;    std::vector&lt;trait_id&gt; muts;</div>
<div class="line"><a name="l13007"></a><span class="lineno">13007</span>&#160; </div>
<div class="line"><a name="l13008"></a><span class="lineno">13008</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;ench : <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;get_proc_enchantments() ) {</div>
<div class="line"><a name="l13009"></a><span class="lineno">13009</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;mut : ench.get_mutations() ) {</div>
<div class="line"><a name="l13010"></a><span class="lineno">13010</span>&#160;            <span class="comment">// this may not be perfectly accurate due to conditions</span></div>
<div class="line"><a name="l13011"></a><span class="lineno">13011</span>&#160;            muts.push_back( mut );</div>
<div class="line"><a name="l13012"></a><span class="lineno">13012</span>&#160;        }</div>
<div class="line"><a name="l13013"></a><span class="lineno">13013</span>&#160;    }</div>
<div class="line"><a name="l13014"></a><span class="lineno">13014</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a> ) {</div>
<div class="line"><a name="l13015"></a><span class="lineno">13015</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classenchantment.html">enchantment</a> &amp;ench : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">relic_data</a>-&gt;get_defined_enchantments() ) {</div>
<div class="line"><a name="l13016"></a><span class="lineno">13016</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;mut : ench.get_mutations() ) {</div>
<div class="line"><a name="l13017"></a><span class="lineno">13017</span>&#160;                <span class="comment">// this may not be perfectly accurate due to conditions</span></div>
<div class="line"><a name="l13018"></a><span class="lineno">13018</span>&#160;                muts.push_back( mut );</div>
<div class="line"><a name="l13019"></a><span class="lineno">13019</span>&#160;            }</div>
<div class="line"><a name="l13020"></a><span class="lineno">13020</span>&#160;        }</div>
<div class="line"><a name="l13021"></a><span class="lineno">13021</span>&#160;    }</div>
<div class="line"><a name="l13022"></a><span class="lineno">13022</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;char_mut : guy.<a class="code" href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">get_mutations</a>( <span class="keyword">true</span>, removing ) ) {</div>
<div class="line"><a name="l13023"></a><span class="lineno">13023</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = muts.begin(); iter != muts.end(); ) {</div>
<div class="line"><a name="l13024"></a><span class="lineno">13024</span>&#160;            <span class="keywordflow">if</span>( char_mut == *iter ) {</div>
<div class="line"><a name="l13025"></a><span class="lineno">13025</span>&#160;                iter = muts.erase( iter );</div>
<div class="line"><a name="l13026"></a><span class="lineno">13026</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13027"></a><span class="lineno">13027</span>&#160;                ++iter;</div>
<div class="line"><a name="l13028"></a><span class="lineno">13028</span>&#160;            }</div>
<div class="line"><a name="l13029"></a><span class="lineno">13029</span>&#160;        }</div>
<div class="line"><a name="l13030"></a><span class="lineno">13030</span>&#160;    }</div>
<div class="line"><a name="l13031"></a><span class="lineno">13031</span>&#160; </div>
<div class="line"><a name="l13032"></a><span class="lineno">13032</span>&#160;    <span class="keywordflow">return</span> muts;</div>
<div class="line"><a name="l13033"></a><span class="lineno">13033</span>&#160;}</div>
<div class="line"><a name="l13034"></a><span class="lineno">13034</span>&#160; </div>
<div class="line"><a name="l13035"></a><span class="lineno"><a class="line" href="classitem.html#a5b7264e94fd2cf5c44784e76627d32fe">13035</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a5b7264e94fd2cf5c44784e76627d32fe">item::overwrite_relic</a>( <span class="keyword">const</span> <a class="code" href="classrelic.html">relic</a> &amp;nrelic )</div>
<div class="line"><a name="l13036"></a><span class="lineno">13036</span>&#160;{</div>
<div class="line"><a name="l13037"></a><span class="lineno">13037</span>&#160;    this-&gt;<a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a> = cata::make_value&lt;relic&gt;( nrelic );</div>
<div class="line"><a name="l13038"></a><span class="lineno">13038</span>&#160;}</div>
<div class="line"><a name="l13039"></a><span class="lineno">13039</span>&#160; </div>
<div class="line"><a name="l13040"></a><span class="lineno"><a class="line" href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">13040</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">item::use_relic</a>( <a class="code" href="classCharacter.html">Character</a> &amp;guy, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13041"></a><span class="lineno">13041</span>&#160;{</div>
<div class="line"><a name="l13042"></a><span class="lineno">13042</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;activate( guy, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13043"></a><span class="lineno">13043</span>&#160;}</div>
<div class="line"><a name="l13044"></a><span class="lineno">13044</span>&#160; </div>
<div class="line"><a name="l13045"></a><span class="lineno"><a class="line" href="classitem.html#a3a1018ec6a2d3b2242c9df121d67f408">13045</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a3a1018ec6a2d3b2242c9df121d67f408">item::process_relic</a>( <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13046"></a><span class="lineno">13046</span>&#160;{</div>
<div class="line"><a name="l13047"></a><span class="lineno">13047</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">is_relic</a>() ) {</div>
<div class="line"><a name="l13048"></a><span class="lineno">13048</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l13049"></a><span class="lineno">13049</span>&#160;    }</div>
<div class="line"><a name="l13050"></a><span class="lineno">13050</span>&#160; </div>
<div class="line"><a name="l13051"></a><span class="lineno">13051</span>&#160;    <a class="code" href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">relic_data</a>-&gt;try_recharge( *<span class="keyword">this</span>, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13052"></a><span class="lineno">13052</span>&#160;}</div>
<div class="line"><a name="l13053"></a><span class="lineno">13053</span>&#160; </div>
<div class="line"><a name="l13054"></a><span class="lineno"><a class="line" href="classitem.html#a3b02fb95d6f0e4736ae26608987e533d">13054</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3b02fb95d6f0e4736ae26608987e533d">item::process_corpse</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13055"></a><span class="lineno">13055</span>&#160;{</div>
<div class="line"><a name="l13056"></a><span class="lineno">13056</span>&#160;    <span class="comment">// some corpses rez over time</span></div>
<div class="line"><a name="l13057"></a><span class="lineno">13057</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> == <span class="keyword">nullptr</span> || <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &gt;= <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() ) {</div>
<div class="line"><a name="l13058"></a><span class="lineno">13058</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13059"></a><span class="lineno">13059</span>&#160;    }</div>
<div class="line"><a name="l13060"></a><span class="lineno">13060</span>&#160; </div>
<div class="line"><a name="l13061"></a><span class="lineno">13061</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#afded2a41cb5fee46d27f7bc5b0fa3189">mon_flag_DORMANT</a> ) ) {</div>
<div class="line"><a name="l13062"></a><span class="lineno">13062</span>&#160;        <span class="comment">//if dormant, ensure trap still exists.</span></div>
<div class="line"><a name="l13063"></a><span class="lineno">13063</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtrap.html">trap</a> *trap_here = &amp;here.<a class="code" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13064"></a><span class="lineno">13064</span>&#160;        <span class="keywordflow">if</span>( trap_here-&gt;<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ) {</div>
<div class="line"><a name="l13065"></a><span class="lineno">13065</span>&#160;            <span class="comment">// if there isn&#39;t a trap, we need to add one again.</span></div>
<div class="line"><a name="l13066"></a><span class="lineno">13066</span>&#160;            here.<a class="code" href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">trap_set</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ae8e678349f93f19da25028da1f3e8a17">trap_id</a>( <span class="stringliteral">&quot;tr_dormant_corpse&quot;</span> ) );</div>
<div class="line"><a name="l13067"></a><span class="lineno">13067</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trap_here-&gt;<a class="code" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> != <a class="code" href="classint__id.html">trap_id</a>( <span class="stringliteral">&quot;tr_dormant_corpse&quot;</span> ) ) {</div>
<div class="line"><a name="l13068"></a><span class="lineno">13068</span>&#160;            <span class="comment">// if there is a trap, but it isn&#39;t the right one, we need to revive the zombie manually.</span></div>
<div class="line"><a name="l13069"></a><span class="lineno">13069</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;revive_corpse( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, *<span class="keyword">this</span>, 3 );</div>
<div class="line"><a name="l13070"></a><span class="lineno">13070</span>&#160;        }</div>
<div class="line"><a name="l13071"></a><span class="lineno">13071</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13072"></a><span class="lineno">13072</span>&#160;    }</div>
<div class="line"><a name="l13073"></a><span class="lineno">13073</span>&#160; </div>
<div class="line"><a name="l13074"></a><span class="lineno">13074</span>&#160;    <span class="comment">// handle human corpses rising as zombies</span></div>
<div class="line"><a name="l13075"></a><span class="lineno">13075</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a> == <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">mtype_id::NULL_ID</a>() &amp;&amp; !<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;zombie_form&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l13076"></a><span class="lineno">13076</span>&#160;        !<a class="code" href="item_8cpp.html#a48c584d65e77094efa0a53c595771d31">mon_human</a>-&gt;<a class="code" href="structmtype.html#a2e7e15bb4c03b2e0a3e487f13d25e9bf">zombify_into</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l13077"></a><span class="lineno">13077</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;zombie_form&quot;</span>, <a class="code" href="item_8cpp.html#a48c584d65e77094efa0a53c595771d31">mon_human</a>-&gt;<a class="code" href="structmtype.html#a2e7e15bb4c03b2e0a3e487f13d25e9bf">zombify_into</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l13078"></a><span class="lineno">13078</span>&#160;    }</div>
<div class="line"><a name="l13079"></a><span class="lineno">13079</span>&#160; </div>
<div class="line"><a name="l13080"></a><span class="lineno">13080</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a8b80049f3898463f6008b0840f1a8a58">ready_to_revive</a>( here, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l13081"></a><span class="lineno">13081</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13082"></a><span class="lineno">13082</span>&#160;    }</div>
<div class="line"><a name="l13083"></a><span class="lineno">13083</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a> ) &gt; <a class="code" href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">burnt</a> &amp;&amp; <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;revive_corpse( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, *<span class="keyword">this</span> ) ) {</div>
<div class="line"><a name="l13084"></a><span class="lineno">13084</span>&#160;        <span class="keywordflow">if</span>( carrier == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13085"></a><span class="lineno">13085</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="item_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a> ) ) {</div>
<div class="line"><a name="l13086"></a><span class="lineno">13086</span>&#160;                <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A nearby robot has repaired itself and stands up!&quot;</span> ) );</div>
<div class="line"><a name="l13087"></a><span class="lineno">13087</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13088"></a><span class="lineno">13088</span>&#160;                <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A nearby corpse rises and moves towards you!&quot;</span> ) );</div>
<div class="line"><a name="l13089"></a><span class="lineno">13089</span>&#160;            }</div>
<div class="line"><a name="l13090"></a><span class="lineno">13090</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13091"></a><span class="lineno">13091</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="item_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a> ) ) {</div>
<div class="line"><a name="l13092"></a><span class="lineno">13092</span>&#160;                carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l13093"></a><span class="lineno">13093</span>&#160;                                            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oh dear god, a robot you&#39;re carrying has started moving!&quot;</span> ) );</div>
<div class="line"><a name="l13094"></a><span class="lineno">13094</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13095"></a><span class="lineno">13095</span>&#160;                carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l13096"></a><span class="lineno">13096</span>&#160;                                            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oh dear god, a corpse you&#39;re carrying has started moving!&quot;</span> ) );</div>
<div class="line"><a name="l13097"></a><span class="lineno">13097</span>&#160;            }</div>
<div class="line"><a name="l13098"></a><span class="lineno">13098</span>&#160;        }</div>
<div class="line"><a name="l13099"></a><span class="lineno">13099</span>&#160;        <span class="comment">// Destroy this corpse item</span></div>
<div class="line"><a name="l13100"></a><span class="lineno">13100</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13101"></a><span class="lineno">13101</span>&#160;    }</div>
<div class="line"><a name="l13102"></a><span class="lineno">13102</span>&#160; </div>
<div class="line"><a name="l13103"></a><span class="lineno">13103</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13104"></a><span class="lineno">13104</span>&#160;}</div>
<div class="line"><a name="l13105"></a><span class="lineno">13105</span>&#160; </div>
<div class="line"><a name="l13106"></a><span class="lineno"><a class="line" href="classitem.html#a471e1b31ebc2a1ef705c421f8f529705">13106</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a471e1b31ebc2a1ef705c421f8f529705">item::process_fake_mill</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> * <span class="comment">/*carrier*/</span>, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13107"></a><span class="lineno">13107</span>&#160;{</div>
<div class="line"><a name="l13108"></a><span class="lineno">13108</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) != <a class="code" href="item_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> &amp;&amp;</div>
<div class="line"><a name="l13109"></a><span class="lineno">13109</span>&#160;        here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) != <a class="code" href="item_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l13110"></a><span class="lineno">13110</span>&#160;        <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = 0;</div>
<div class="line"><a name="l13111"></a><span class="lineno">13111</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//destroy fake mill</span></div>
<div class="line"><a name="l13112"></a><span class="lineno">13112</span>&#160;    }</div>
<div class="line"><a name="l13113"></a><span class="lineno">13113</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() &gt;= 6_hours || <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> == 0 ) {</div>
<div class="line"><a name="l13114"></a><span class="lineno">13114</span>&#160;        <a class="code" href="namespaceiexamine.html#abb9c8b4667ab26a946076aa255d46d75">iexamine::mill_finalize</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ); <span class="comment">//activate effects when timers goes to zero</span></div>
<div class="line"><a name="l13115"></a><span class="lineno">13115</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//destroy fake mill item</span></div>
<div class="line"><a name="l13116"></a><span class="lineno">13116</span>&#160;    }</div>
<div class="line"><a name="l13117"></a><span class="lineno">13117</span>&#160; </div>
<div class="line"><a name="l13118"></a><span class="lineno">13118</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13119"></a><span class="lineno">13119</span>&#160;}</div>
<div class="line"><a name="l13120"></a><span class="lineno">13120</span>&#160; </div>
<div class="line"><a name="l13121"></a><span class="lineno"><a class="line" href="classitem.html#a40feb41edc16a688462ef807328cf90d">13121</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a40feb41edc16a688462ef807328cf90d">item::process_fake_smoke</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> * <span class="comment">/*carrier*/</span>, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13122"></a><span class="lineno">13122</span>&#160;{</div>
<div class="line"><a name="l13123"></a><span class="lineno">13123</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) != <a class="code" href="item_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a> &amp;&amp;</div>
<div class="line"><a name="l13124"></a><span class="lineno">13124</span>&#160;        here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) != <a class="code" href="item_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a> ) {</div>
<div class="line"><a name="l13125"></a><span class="lineno">13125</span>&#160;        <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = 0;</div>
<div class="line"><a name="l13126"></a><span class="lineno">13126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//destroy fake smoke</span></div>
<div class="line"><a name="l13127"></a><span class="lineno">13127</span>&#160;    }</div>
<div class="line"><a name="l13128"></a><span class="lineno">13128</span>&#160; </div>
<div class="line"><a name="l13129"></a><span class="lineno">13129</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() &gt;= 6_hours || <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> == 0 ) {</div>
<div class="line"><a name="l13130"></a><span class="lineno">13130</span>&#160;        <a class="code" href="namespaceiexamine.html#a060b59dbae83b1188922a4b701894532">iexamine::on_smoke_out</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() ); <span class="comment">//activate effects when timers goes to zero</span></div>
<div class="line"><a name="l13131"></a><span class="lineno">13131</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//destroy fake smoke when it &#39;burns out&#39;</span></div>
<div class="line"><a name="l13132"></a><span class="lineno">13132</span>&#160;    }</div>
<div class="line"><a name="l13133"></a><span class="lineno">13133</span>&#160; </div>
<div class="line"><a name="l13134"></a><span class="lineno">13134</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13135"></a><span class="lineno">13135</span>&#160;}</div>
<div class="line"><a name="l13136"></a><span class="lineno">13136</span>&#160; </div>
<div class="line"><a name="l13137"></a><span class="lineno"><a class="line" href="classitem.html#af90bc7e529fd4f0a23b84ff77b5c9c8e">13137</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af90bc7e529fd4f0a23b84ff77b5c9c8e">item::process_litcig</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13138"></a><span class="lineno">13138</span>&#160;{</div>
<div class="line"><a name="l13139"></a><span class="lineno">13139</span>&#160;    <span class="comment">// cig dies out</span></div>
<div class="line"><a name="l13140"></a><span class="lineno">13140</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> == 0 ) {</div>
<div class="line"><a name="l13141"></a><span class="lineno">13141</span>&#160;        <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13142"></a><span class="lineno">13142</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You finish your %s.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13143"></a><span class="lineno">13143</span>&#160;        }</div>
<div class="line"><a name="l13144"></a><span class="lineno">13144</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#aea8dde0d69cd34d32b4388bc5deab0af">itype_cig_lit</a> ) {</div>
<div class="line"><a name="l13145"></a><span class="lineno">13145</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a231490a5aa819b4014f1ed02ca49728d">itype_cig_butt</a>, carrier );</div>
<div class="line"><a name="l13146"></a><span class="lineno">13146</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a9d98553b0009d1e6f15c077178c09149">itype_cigar_lit</a> ) {</div>
<div class="line"><a name="l13147"></a><span class="lineno">13147</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a0aab3ef75ee5235f416a510b0876cad3">itype_cigar_butt</a>, carrier );</div>
<div class="line"><a name="l13148"></a><span class="lineno">13148</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// joint</span></div>
<div class="line"><a name="l13149"></a><span class="lineno">13149</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a1482bd2efd92c10f5f8ec958ff39d27b">itype_joint_roach</a>, carrier );</div>
<div class="line"><a name="l13150"></a><span class="lineno">13150</span>&#160;            <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13151"></a><span class="lineno">13151</span>&#160;                carrier-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="item_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a>, 1_minutes ); <span class="comment">// one last puff</span></div>
<div class="line"><a name="l13152"></a><span class="lineno">13152</span>&#160;                here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> + <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ) ), <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561">field_type_id</a>( <span class="stringliteral">&quot;fd_weedsmoke&quot;</span> ), 2 );</div>
<div class="line"><a name="l13153"></a><span class="lineno">13153</span>&#160;                <a class="code" href="effect_8cpp.html#a26d5bc5ed07e16a92731edf2cc9db42d">weed_msg</a>( *carrier );</div>
<div class="line"><a name="l13154"></a><span class="lineno">13154</span>&#160;            }</div>
<div class="line"><a name="l13155"></a><span class="lineno">13155</span>&#160;        }</div>
<div class="line"><a name="l13156"></a><span class="lineno">13156</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13157"></a><span class="lineno">13157</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13158"></a><span class="lineno">13158</span>&#160;    }</div>
<div class="line"><a name="l13159"></a><span class="lineno">13159</span>&#160; </div>
<div class="line"><a name="l13160"></a><span class="lineno">13160</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a name="l13161"></a><span class="lineno">13161</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13162"></a><span class="lineno">13162</span>&#160;    }</div>
<div class="line"><a name="l13163"></a><span class="lineno">13163</span>&#160;    <a class="code" href="classitem.html#af53663fa61792f964d7e1f4e9b11e450">process_extinguish</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13164"></a><span class="lineno">13164</span>&#160;    <span class="comment">// process_extinguish might have extinguished the item already</span></div>
<div class="line"><a name="l13165"></a><span class="lineno">13165</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l13166"></a><span class="lineno">13166</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13167"></a><span class="lineno">13167</span>&#160;    }</div>
<div class="line"><a name="l13168"></a><span class="lineno">13168</span>&#160;    <span class="comment">// if carried by someone:</span></div>
<div class="line"><a name="l13169"></a><span class="lineno">13169</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13170"></a><span class="lineno">13170</span>&#160;        <a class="code" href="classtime__duration.html">time_duration</a> duration = 15_seconds;</div>
<div class="line"><a name="l13171"></a><span class="lineno">13171</span>&#160;        <span class="keywordflow">if</span>( carrier-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="item_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a> ) ) {</div>
<div class="line"><a name="l13172"></a><span class="lineno">13172</span>&#160;            duration = 7_seconds;</div>
<div class="line"><a name="l13173"></a><span class="lineno">13173</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( carrier-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="item_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a> ) ) {</div>
<div class="line"><a name="l13174"></a><span class="lineno">13174</span>&#160;            duration = 30_seconds;</div>
<div class="line"><a name="l13175"></a><span class="lineno">13175</span>&#160;        }</div>
<div class="line"><a name="l13176"></a><span class="lineno">13176</span>&#160;        carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take a puff of your %s.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13177"></a><span class="lineno">13177</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a130f7a6381a7705c555c545a851aa763">flag_TOBACCO</a> ) ) {</div>
<div class="line"><a name="l13178"></a><span class="lineno">13178</span>&#160;            carrier-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="item_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>, duration );</div>
<div class="line"><a name="l13179"></a><span class="lineno">13179</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13180"></a><span class="lineno">13180</span>&#160;            carrier-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="item_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a>, duration / 2 );</div>
<div class="line"><a name="l13181"></a><span class="lineno">13181</span>&#160;        }</div>
<div class="line"><a name="l13182"></a><span class="lineno">13182</span>&#160;        carrier-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.15 );</div>
<div class="line"><a name="l13183"></a><span class="lineno">13183</span>&#160; </div>
<div class="line"><a name="l13184"></a><span class="lineno">13184</span>&#160;        <span class="keywordflow">if</span>( ( carrier-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="item_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a> ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) ||</div>
<div class="line"><a name="l13185"></a><span class="lineno">13185</span>&#160;            ( carrier-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="item_8cpp.html#a13183aed1904f5a0f40cc7fd7981593e">trait_JITTERY</a> ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 ) ) ) {</div>
<div class="line"><a name="l13186"></a><span class="lineno">13186</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your shaking hand causes you to drop your %s.&quot;</span> ),</div>
<div class="line"><a name="l13187"></a><span class="lineno">13187</span>&#160;                                        <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13188"></a><span class="lineno">13188</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> + <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ) ), *<span class="keyword">this</span> );</div>
<div class="line"><a name="l13189"></a><span class="lineno">13189</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// removes the item that has just been added to the map</span></div>
<div class="line"><a name="l13190"></a><span class="lineno">13190</span>&#160;        }</div>
<div class="line"><a name="l13191"></a><span class="lineno">13191</span>&#160; </div>
<div class="line"><a name="l13192"></a><span class="lineno">13192</span>&#160;        <span class="keywordflow">if</span>( carrier-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="item_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a> ) ) {</div>
<div class="line"><a name="l13193"></a><span class="lineno">13193</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fall asleep and drop your %s.&quot;</span> ),</div>
<div class="line"><a name="l13194"></a><span class="lineno">13194</span>&#160;                                        <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13195"></a><span class="lineno">13195</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> + <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -1, 1 ) ), *<span class="keyword">this</span> );</div>
<div class="line"><a name="l13196"></a><span class="lineno">13196</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// removes the item that has just been added to the map</span></div>
<div class="line"><a name="l13197"></a><span class="lineno">13197</span>&#160;        }</div>
<div class="line"><a name="l13198"></a><span class="lineno">13198</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13199"></a><span class="lineno">13199</span>&#160;        <span class="comment">// If not carried by someone, but laying on the ground:</span></div>
<div class="line"><a name="l13200"></a><span class="lineno">13200</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> % 5 == 0 ) {</div>
<div class="line"><a name="l13201"></a><span class="lineno">13201</span>&#160;            <span class="comment">// lit cigarette can start fires</span></div>
<div class="line"><a name="l13202"></a><span class="lineno">13202</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#ab1a08686c7d7b52636e0362ac4a0847f">flammable_items_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ||</div>
<div class="line"><a name="l13203"></a><span class="lineno">13203</span>&#160;                here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a534031ea48a1f37568849d13926a4969">ter_furn_flag::TFLAG_FLAMMABLE</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ||</div>
<div class="line"><a name="l13204"></a><span class="lineno">13204</span>&#160;                here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad28950af654519872f21cb4f5f9abbe2">ter_furn_flag::TFLAG_FLAMMABLE_ASH</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l13205"></a><span class="lineno">13205</span>&#160;                here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, 1 );</div>
<div class="line"><a name="l13206"></a><span class="lineno">13206</span>&#160;            }</div>
<div class="line"><a name="l13207"></a><span class="lineno">13207</span>&#160;        }</div>
<div class="line"><a name="l13208"></a><span class="lineno">13208</span>&#160;    }</div>
<div class="line"><a name="l13209"></a><span class="lineno">13209</span>&#160; </div>
<div class="line"><a name="l13210"></a><span class="lineno">13210</span>&#160;    <span class="comment">// Item remains</span></div>
<div class="line"><a name="l13211"></a><span class="lineno">13211</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13212"></a><span class="lineno">13212</span>&#160;}</div>
<div class="line"><a name="l13213"></a><span class="lineno">13213</span>&#160; </div>
<div class="line"><a name="l13214"></a><span class="lineno"><a class="line" href="classitem.html#af53663fa61792f964d7e1f4e9b11e450">13214</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af53663fa61792f964d7e1f4e9b11e450">item::process_extinguish</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13215"></a><span class="lineno">13215</span>&#160;{</div>
<div class="line"><a name="l13216"></a><span class="lineno">13216</span>&#160;    <span class="comment">// checks for water</span></div>
<div class="line"><a name="l13217"></a><span class="lineno">13217</span>&#160;    <span class="keywordtype">bool</span> extinguish = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13218"></a><span class="lineno">13218</span>&#160;    <span class="keywordtype">bool</span> in_inv = carrier != <span class="keyword">nullptr</span> &amp;&amp; carrier-&gt;<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l13219"></a><span class="lineno">13219</span>&#160;    <span class="keywordtype">bool</span> submerged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13220"></a><span class="lineno">13220</span>&#160;    <span class="keywordtype">bool</span> precipitation = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13221"></a><span class="lineno">13221</span>&#160;    <span class="keywordtype">bool</span> windtoostrong = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13222"></a><span class="lineno">13222</span>&#160;    <span class="keywordtype">bool</span> in_veh = carrier != <span class="keyword">nullptr</span> &amp;&amp; carrier-&gt;<a class="code" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a>;</div>
<div class="line"><a name="l13223"></a><span class="lineno">13223</span>&#160;    <a class="code" href="structw__point.html">w_point</a> weatherPoint = *<a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().<a class="code" href="classweather__manager.html#a65e0974692317dee8098564d9952ec88">weather_precise</a>;</div>
<div class="line"><a name="l13224"></a><span class="lineno">13224</span>&#160;    <span class="keywordtype">int</span> windpower = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().<a class="code" href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">windspeed</a>;</div>
<div class="line"><a name="l13225"></a><span class="lineno">13225</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id-&gt;precip ) {</div>
<div class="line"><a name="l13226"></a><span class="lineno">13226</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a>:</div>
<div class="line"><a name="l13227"></a><span class="lineno">13227</span>&#160;            precipitation = <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 );</div>
<div class="line"><a name="l13228"></a><span class="lineno">13228</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13229"></a><span class="lineno">13229</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a>:</div>
<div class="line"><a name="l13230"></a><span class="lineno">13230</span>&#160;            precipitation = <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 );</div>
<div class="line"><a name="l13231"></a><span class="lineno">13231</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13232"></a><span class="lineno">13232</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a>:</div>
<div class="line"><a name="l13233"></a><span class="lineno">13233</span>&#160;            precipitation = <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 );</div>
<div class="line"><a name="l13234"></a><span class="lineno">13234</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13235"></a><span class="lineno">13235</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l13236"></a><span class="lineno">13236</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13237"></a><span class="lineno">13237</span>&#160;    }</div>
<div class="line"><a name="l13238"></a><span class="lineno">13238</span>&#160;    <span class="keywordflow">if</span>( in_inv &amp;&amp; !in_veh &amp;&amp; here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l13239"></a><span class="lineno">13239</span>&#160;        extinguish = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13240"></a><span class="lineno">13240</span>&#160;        submerged = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13241"></a><span class="lineno">13241</span>&#160;    }</div>
<div class="line"><a name="l13242"></a><span class="lineno">13242</span>&#160;    <span class="keywordflow">if</span>( ( !in_inv &amp;&amp; here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7518f40a34b4cbfbc922c4888af267cc">ter_furn_flag::TFLAG_LIQUID</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) &amp;&amp; !here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) ||</div>
<div class="line"><a name="l13243"></a><span class="lineno">13243</span>&#160;        ( precipitation &amp;&amp; !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) ) {</div>
<div class="line"><a name="l13244"></a><span class="lineno">13244</span>&#160;        extinguish = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13245"></a><span class="lineno">13245</span>&#160;    }</div>
<div class="line"><a name="l13246"></a><span class="lineno">13246</span>&#160;    <span class="keywordflow">if</span>( in_inv &amp;&amp; windpower &gt; 5 &amp;&amp; !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) &amp;&amp;</div>
<div class="line"><a name="l13247"></a><span class="lineno">13247</span>&#160;        this-&gt;has_flag( <a class="code" href="flag_8cpp.html#a6ad3ff7f192f86d4b2b41331115e7e8c">flag_WIND_EXTINGUISH</a> ) ) {</div>
<div class="line"><a name="l13248"></a><span class="lineno">13248</span>&#160;        windtoostrong = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13249"></a><span class="lineno">13249</span>&#160;        extinguish = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13250"></a><span class="lineno">13250</span>&#160;    }</div>
<div class="line"><a name="l13251"></a><span class="lineno">13251</span>&#160;    <span class="keywordflow">if</span>( !extinguish ||</div>
<div class="line"><a name="l13252"></a><span class="lineno">13252</span>&#160;        ( in_inv &amp;&amp; precipitation &amp;&amp; carrier-&gt;<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>() &amp;&amp;</div>
<div class="line"><a name="l13253"></a><span class="lineno">13253</span>&#160;          carrier-&gt;<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>()-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6caf1bb724374595ea55666b7aa9dc29">flag_RAIN_PROTECT</a> ) ) ) {</div>
<div class="line"><a name="l13254"></a><span class="lineno">13254</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//nothing happens</span></div>
<div class="line"><a name="l13255"></a><span class="lineno">13255</span>&#160;    }</div>
<div class="line"><a name="l13256"></a><span class="lineno">13256</span>&#160;    <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13257"></a><span class="lineno">13257</span>&#160;        <span class="keywordflow">if</span>( submerged ) {</div>
<div class="line"><a name="l13258"></a><span class="lineno">13258</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is quenched by water.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13259"></a><span class="lineno">13259</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( precipitation ) {</div>
<div class="line"><a name="l13260"></a><span class="lineno">13260</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is quenched by precipitation.&quot;</span> ),</div>
<div class="line"><a name="l13261"></a><span class="lineno">13261</span>&#160;                                        <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13262"></a><span class="lineno">13262</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windtoostrong ) {</div>
<div class="line"><a name="l13263"></a><span class="lineno">13263</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is blown out by the wind.&quot;</span> ),</div>
<div class="line"><a name="l13264"></a><span class="lineno">13264</span>&#160;                                        <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13265"></a><span class="lineno">13265</span>&#160;        }</div>
<div class="line"><a name="l13266"></a><span class="lineno">13266</span>&#160;    }</div>
<div class="line"><a name="l13267"></a><span class="lineno">13267</span>&#160; </div>
<div class="line"><a name="l13268"></a><span class="lineno">13268</span>&#160;    <span class="comment">// cig dies out</span></div>
<div class="line"><a name="l13269"></a><span class="lineno">13269</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a> ) ) {</div>
<div class="line"><a name="l13270"></a><span class="lineno">13270</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#aea8dde0d69cd34d32b4388bc5deab0af">itype_cig_lit</a> ) {</div>
<div class="line"><a name="l13271"></a><span class="lineno">13271</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a231490a5aa819b4014f1ed02ca49728d">itype_cig_butt</a>, carrier );</div>
<div class="line"><a name="l13272"></a><span class="lineno">13272</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a9d98553b0009d1e6f15c077178c09149">itype_cigar_lit</a> ) {</div>
<div class="line"><a name="l13273"></a><span class="lineno">13273</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a0aab3ef75ee5235f416a510b0876cad3">itype_cigar_butt</a>, carrier );</div>
<div class="line"><a name="l13274"></a><span class="lineno">13274</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// joint</span></div>
<div class="line"><a name="l13275"></a><span class="lineno">13275</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="item_8cpp.html#a1482bd2efd92c10f5f8ec958ff39d27b">itype_joint_roach</a>, carrier );</div>
<div class="line"><a name="l13276"></a><span class="lineno">13276</span>&#160;        }</div>
<div class="line"><a name="l13277"></a><span class="lineno">13277</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// transform (lit) items</span></div>
<div class="line"><a name="l13278"></a><span class="lineno">13278</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ) {</div>
<div class="line"><a name="l13279"></a><span class="lineno">13279</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a>, carrier );</div>
<div class="line"><a name="l13280"></a><span class="lineno">13280</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13281"></a><span class="lineno">13281</span>&#160;            <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a76600c0d6a88c8d983838f0df2276212">invoke</a>( carrier, *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="stringliteral">&quot;transform&quot;</span> );</div>
<div class="line"><a name="l13282"></a><span class="lineno">13282</span>&#160;        }</div>
<div class="line"><a name="l13283"></a><span class="lineno">13283</span>&#160; </div>
<div class="line"><a name="l13284"></a><span class="lineno">13284</span>&#160;    }</div>
<div class="line"><a name="l13285"></a><span class="lineno">13285</span>&#160;    <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13286"></a><span class="lineno">13286</span>&#160;    <span class="comment">// Item remains</span></div>
<div class="line"><a name="l13287"></a><span class="lineno">13287</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13288"></a><span class="lineno">13288</span>&#160;}</div>
<div class="line"><a name="l13289"></a><span class="lineno">13289</span>&#160; </div>
<div class="line"><a name="l13290"></a><span class="lineno"><a class="line" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">13290</a></span>&#160;<a class="code" href="structitem_1_1link__data.html">item::link_data</a> &amp;<a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">item::link</a>()</div>
<div class="line"><a name="l13291"></a><span class="lineno">13291</span>&#160;{</div>
<div class="line"><a name="l13292"></a><span class="lineno">13292</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a> ) {</div>
<div class="line"><a name="l13293"></a><span class="lineno">13293</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>;</div>
<div class="line"><a name="l13294"></a><span class="lineno">13294</span>&#160;    }</div>
<div class="line"><a name="l13295"></a><span class="lineno">13295</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">can_link_up</a>() ) {</div>
<div class="line"><a name="l13296"></a><span class="lineno">13296</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s is creating link_data even though it doesn&#39;t have a link_up action!  can_link_up() should be checked before using link().&quot;</span>,</div>
<div class="line"><a name="l13297"></a><span class="lineno">13297</span>&#160;                  <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13298"></a><span class="lineno">13298</span>&#160;    }</div>
<div class="line"><a name="l13299"></a><span class="lineno">13299</span>&#160;    <span class="keywordflow">return</span> *( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a> = cata::make_value&lt;item::link_data&gt;() );</div>
<div class="line"><a name="l13300"></a><span class="lineno">13300</span>&#160;}</div>
<div class="line"><a name="l13301"></a><span class="lineno">13301</span>&#160; </div>
<div class="line"><a name="l13302"></a><span class="lineno"><a class="line" href="classitem.html#a75286d2ee44190aab0497a0304025cd0">13302</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structitem_1_1link__data.html">item::link_data</a> &amp;<a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">item::link</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13303"></a><span class="lineno">13303</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13304"></a><span class="lineno">13304</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a> ) {</div>
<div class="line"><a name="l13305"></a><span class="lineno">13305</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>;</div>
<div class="line"><a name="l13306"></a><span class="lineno">13306</span>&#160;    }</div>
<div class="line"><a name="l13307"></a><span class="lineno">13307</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">can_link_up</a>() ) {</div>
<div class="line"><a name="l13308"></a><span class="lineno">13308</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s is creating link_data even though it doesn&#39;t have a link_up action!  can_link_up() should be checked before using link().&quot;</span>,</div>
<div class="line"><a name="l13309"></a><span class="lineno">13309</span>&#160;                  <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13310"></a><span class="lineno">13310</span>&#160;    }</div>
<div class="line"><a name="l13311"></a><span class="lineno">13311</span>&#160;    <span class="keywordflow">return</span> *( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a> = cata::make_value&lt;item::link_data&gt;() );</div>
<div class="line"><a name="l13312"></a><span class="lineno">13312</span>&#160;}</div>
<div class="line"><a name="l13313"></a><span class="lineno">13313</span>&#160; </div>
<div class="line"><a name="l13314"></a><span class="lineno"><a class="line" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">13314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">item::has_link_data</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13315"></a><span class="lineno">13315</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13316"></a><span class="lineno">13316</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>;</div>
<div class="line"><a name="l13317"></a><span class="lineno">13317</span>&#160;}</div>
<div class="line"><a name="l13318"></a><span class="lineno">13318</span>&#160; </div>
<div class="line"><a name="l13319"></a><span class="lineno"><a class="line" href="classitem.html#ab21800e6d065dc9649a86d586e879912">13319</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">item::can_link_up</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13320"></a><span class="lineno">13320</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13321"></a><span class="lineno">13321</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afc46b586361661f16219f0a465b71c1d">can_use</a>( <span class="stringliteral">&quot;link_up&quot;</span> );</div>
<div class="line"><a name="l13322"></a><span class="lineno">13322</span>&#160;}</div>
<div class="line"><a name="l13323"></a><span class="lineno">13323</span>&#160; </div>
<div class="line"><a name="l13324"></a><span class="lineno"><a class="line" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">13324</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">item::link_has_state</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> state )<span class="keyword"> const</span></div>
<div class="line"><a name="l13325"></a><span class="lineno">13325</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13326"></a><span class="lineno">13326</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ? state == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> :</div>
<div class="line"><a name="l13327"></a><span class="lineno">13327</span>&#160;           <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;source == state || <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;target == state;</div>
<div class="line"><a name="l13328"></a><span class="lineno">13328</span>&#160;}</div>
<div class="line"><a name="l13329"></a><span class="lineno">13329</span>&#160; </div>
<div class="line"><a name="l13330"></a><span class="lineno"><a class="line" href="classitem.html#aa247d3fb0f92d9d0a719e6060ba26df0">13330</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#aa247d3fb0f92d9d0a719e6060ba26df0">item::link_has_states</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> source, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> target )<span class="keyword"> const</span></div>
<div class="line"><a name="l13331"></a><span class="lineno">13331</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13332"></a><span class="lineno">13332</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ? source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> &amp;&amp; target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> :</div>
<div class="line"><a name="l13333"></a><span class="lineno">13333</span>&#160;           ( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;source == source || <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a> ) &amp;&amp;</div>
<div class="line"><a name="l13334"></a><span class="lineno">13334</span>&#160;           ( <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;target == target || <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a> );</div>
<div class="line"><a name="l13335"></a><span class="lineno">13335</span>&#160;}</div>
<div class="line"><a name="l13336"></a><span class="lineno">13336</span>&#160; </div>
<div class="line"><a name="l13337"></a><span class="lineno"><a class="line" href="classitem.html#a3b1a3f1d6bb7ff3962b3be40b6b73989">13337</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3b1a3f1d6bb7ff3962b3be40b6b73989">item::has_no_links</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13338"></a><span class="lineno">13338</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13339"></a><span class="lineno">13339</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ? true :</div>
<div class="line"><a name="l13340"></a><span class="lineno">13340</span>&#160;           <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> &amp;&amp; <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>-&gt;target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a>;</div>
<div class="line"><a name="l13341"></a><span class="lineno">13341</span>&#160;}</div>
<div class="line"><a name="l13342"></a><span class="lineno">13342</span>&#160; </div>
<div class="line"><a name="l13343"></a><span class="lineno"><a class="line" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">13343</a></span>&#160;std::string <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">item::link_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13344"></a><span class="lineno">13344</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13345"></a><span class="lineno">13345</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a99021b3b0d6f54bbcd73ed3ff33a1bb7">flag_CABLE_SPOOL</a> ) ? <a class="code" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">label</a>( 1 ) : <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; %s&#39;s cable&quot;</span>, <a class="code" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">label</a>( 1 ) );</div>
<div class="line"><a name="l13346"></a><span class="lineno">13346</span>&#160;}</div>
<div class="line"><a name="l13347"></a><span class="lineno">13347</span>&#160; </div>
<div class="line"><a name="l13348"></a><span class="lineno"><a class="line" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">13348</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">item::link_to</a>( <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> &amp;linked_vp, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> link_type )</div>
<div class="line"><a name="l13349"></a><span class="lineno">13349</span>&#160;{</div>
<div class="line"><a name="l13350"></a><span class="lineno">13350</span>&#160;    <span class="keywordflow">return</span> linked_vp ? <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">link_to</a>( linked_vp-&gt;vehicle(), linked_vp-&gt;mount(), link_type ) :</div>
<div class="line"><a name="l13351"></a><span class="lineno">13351</span>&#160;           <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l13352"></a><span class="lineno">13352</span>&#160;}</div>
<div class="line"><a name="l13353"></a><span class="lineno">13353</span>&#160; </div>
<div class="line"><a name="l13354"></a><span class="lineno"><a class="line" href="classitem.html#a75301ab9d8fb46b5e542ec940d33ce71">13354</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">item::link_to</a>( <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> &amp;first_linked_vp,</div>
<div class="line"><a name="l13355"></a><span class="lineno">13355</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> &amp;second_linked_vp, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> link_type )</div>
<div class="line"><a name="l13356"></a><span class="lineno">13356</span>&#160;{</div>
<div class="line"><a name="l13357"></a><span class="lineno">13357</span>&#160;    <span class="keywordflow">if</span>( !first_linked_vp || !second_linked_vp ) {</div>
<div class="line"><a name="l13358"></a><span class="lineno">13358</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l13359"></a><span class="lineno">13359</span>&#160;    }</div>
<div class="line"><a name="l13360"></a><span class="lineno">13360</span>&#160;    <span class="comment">// Link up the second vehicle first so, if it&#39;s a tow cable, the first vehicle will tow the second.</span></div>
<div class="line"><a name="l13361"></a><span class="lineno">13361</span>&#160;    <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> result = <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">link_to</a>( second_linked_vp-&gt;vehicle(), second_linked_vp-&gt;mount(), link_type );</div>
<div class="line"><a name="l13362"></a><span class="lineno">13362</span>&#160;    <span class="keywordflow">if</span>( !result.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l13363"></a><span class="lineno">13363</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l13364"></a><span class="lineno">13364</span>&#160;    }</div>
<div class="line"><a name="l13365"></a><span class="lineno">13365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">link_to</a>( first_linked_vp-&gt;vehicle(), first_linked_vp-&gt;mount(), link_type );</div>
<div class="line"><a name="l13366"></a><span class="lineno">13366</span>&#160;}</div>
<div class="line"><a name="l13367"></a><span class="lineno">13367</span>&#160; </div>
<div class="line"><a name="l13368"></a><span class="lineno"><a class="line" href="classitem.html#abf4b338c2ef1765582cc4795925202ae">13368</a></span>&#160;<a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> <a class="code" href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">item::link_to</a>( <a class="code" href="classvehicle.html">vehicle</a> &amp;veh, <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;mount, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> link_type )</div>
<div class="line"><a name="l13369"></a><span class="lineno">13369</span>&#160;{</div>
<div class="line"><a name="l13370"></a><span class="lineno">13370</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">can_link_up</a>() ) {</div>
<div class="line"><a name="l13371"></a><span class="lineno">13371</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t have a cable!&quot;</span> ), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l13372"></a><span class="lineno">13372</span>&#160;    }</div>
<div class="line"><a name="l13373"></a><span class="lineno">13373</span>&#160; </div>
<div class="line"><a name="l13374"></a><span class="lineno">13374</span>&#160;    <span class="comment">// First, check if the desired link is actually possible.</span></div>
<div class="line"><a name="l13375"></a><span class="lineno">13375</span>&#160; </div>
<div class="line"><a name="l13376"></a><span class="lineno">13376</span>&#160;    <span class="keywordflow">if</span>( link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) {</div>
<div class="line"><a name="l13377"></a><span class="lineno">13377</span>&#160;        <span class="keywordflow">if</span>( veh.<a class="code" href="classvehicle.html#a35d54e8a51e9571f03c0e192c70af09f">has_tow_attached</a>() || veh.<a class="code" href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">is_towed</a>() || veh.<a class="code" href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">is_towing</a>() ) {</div>
<div class="line"><a name="l13378"></a><span class="lineno">13378</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That vehicle already has a tow-line attached.&quot;</span> ) );</div>
<div class="line"><a name="l13379"></a><span class="lineno">13379</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !veh.<a class="code" href="classvehicle.html#adb993252c4c4131ced3d47e37ac0f811">is_external_part</a>( veh.<a class="code" href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">mount_to_tripoint</a>( mount ) ) ) {</div>
<div class="line"><a name="l13380"></a><span class="lineno">13380</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t attach a tow-line to an internal part.&quot;</span> ) );</div>
<div class="line"><a name="l13381"></a><span class="lineno">13381</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13382"></a><span class="lineno">13382</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> part_at = veh.<a class="code" href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">part_at</a>( veh.<a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( mount ) );</div>
<div class="line"><a name="l13383"></a><span class="lineno">13383</span>&#160;            <span class="keywordflow">if</span>( part_at != -1 &amp;&amp; !veh.<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( part_at ).<a class="code" href="structvehicle__part.html#adab316825e5cdb2118b221cfa798be6f">carried_stack</a>.empty() ) {</div>
<div class="line"><a name="l13384"></a><span class="lineno">13384</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t attach a tow-line to a racked part.&quot;</span> ) );</div>
<div class="line"><a name="l13385"></a><span class="lineno">13385</span>&#160;            }</div>
<div class="line"><a name="l13386"></a><span class="lineno">13386</span>&#160;        }</div>
<div class="line"><a name="l13387"></a><span class="lineno">13387</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13388"></a><span class="lineno">13388</span>&#160;        <span class="keyword">const</span> <a class="code" href="classlink__up__actor.html">link_up_actor</a> *it_actor = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classlink__up__actor.html">link_up_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l13389"></a><span class="lineno">13389</span>&#160;                                        ( <a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;link_up&quot;</span> )-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l13390"></a><span class="lineno">13390</span>&#160;        <span class="keywordtype">bool</span> can_link_port = ( link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> ||</div>
<div class="line"><a name="l13391"></a><span class="lineno">13391</span>&#160;                               link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a> ) &amp;&amp;</div>
<div class="line"><a name="l13392"></a><span class="lineno">13392</span>&#160;                             it_actor-&gt;<a class="code" href="classlink__up__actor.html#a925f6588347b47e58a0ae8f6999bb859">targets</a>.find( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> ) != it_actor-&gt;<a class="code" href="classlink__up__actor.html#a925f6588347b47e58a0ae8f6999bb859">targets</a>.end() &amp;&amp;</div>
<div class="line"><a name="l13393"></a><span class="lineno">13393</span>&#160;                             veh.<a class="code" href="classvehicle.html#a11938f323ced48690dafb98e8f569e67">avail_linkable_part</a>( mount, <span class="keyword">true</span> ) != -1;</div>
<div class="line"><a name="l13394"></a><span class="lineno">13394</span>&#160; </div>
<div class="line"><a name="l13395"></a><span class="lineno">13395</span>&#160;        <span class="keywordtype">bool</span> can_link_battery = ( link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a> ||</div>
<div class="line"><a name="l13396"></a><span class="lineno">13396</span>&#160;                                  link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a> ) &amp;&amp;</div>
<div class="line"><a name="l13397"></a><span class="lineno">13397</span>&#160;                                it_actor-&gt;<a class="code" href="classlink__up__actor.html#a925f6588347b47e58a0ae8f6999bb859">targets</a>.find( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a> ) != it_actor-&gt;<a class="code" href="classlink__up__actor.html#a925f6588347b47e58a0ae8f6999bb859">targets</a>.end() &amp;&amp;</div>
<div class="line"><a name="l13398"></a><span class="lineno">13398</span>&#160;                                veh.<a class="code" href="classvehicle.html#a11938f323ced48690dafb98e8f569e67">avail_linkable_part</a>( mount, <span class="keyword">false</span> ) != -1;</div>
<div class="line"><a name="l13399"></a><span class="lineno">13399</span>&#160; </div>
<div class="line"><a name="l13400"></a><span class="lineno">13400</span>&#160;        <span class="keywordflow">if</span>( !can_link_port &amp;&amp; !can_link_battery ) {</div>
<div class="line"><a name="l13401"></a><span class="lineno">13401</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s can&#39;t connect to that.&quot;</span> ), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l13402"></a><span class="lineno">13402</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a> ) {</div>
<div class="line"><a name="l13403"></a><span class="lineno">13403</span>&#160;            link_type = can_link_port ? <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> : <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a>;</div>
<div class="line"><a name="l13404"></a><span class="lineno">13404</span>&#160;        }</div>
<div class="line"><a name="l13405"></a><span class="lineno">13405</span>&#160;    }</div>
<div class="line"><a name="l13406"></a><span class="lineno">13406</span>&#160; </div>
<div class="line"><a name="l13407"></a><span class="lineno">13407</span>&#160;    <span class="keywordtype">bool</span> bio_link = <a class="code" href="classitem.html#aa247d3fb0f92d9d0a719e6060ba26df0">link_has_states</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a>, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea5e6b8267ce64e71d233da7d26939f5a5">link_state::bio_cable</a> );</div>
<div class="line"><a name="l13408"></a><span class="lineno">13408</span>&#160;    <span class="keywordflow">if</span>( bio_link || <a class="code" href="classitem.html#a3b1a3f1d6bb7ff3962b3be40b6b73989">has_no_links</a>() ) {</div>
<div class="line"><a name="l13409"></a><span class="lineno">13409</span>&#160; </div>
<div class="line"><a name="l13410"></a><span class="lineno">13410</span>&#160;        <span class="comment">// No link exists, so start a new link to a vehicle/appliance.</span></div>
<div class="line"><a name="l13411"></a><span class="lineno">13411</span>&#160; </div>
<div class="line"><a name="l13412"></a><span class="lineno">13412</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a64ca11e0b5756edb11e6be50431b8f92">source</a> = bio_link ? <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea5e6b8267ce64e71d233da7d26939f5a5">link_state::bio_cable</a> : <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a>;</div>
<div class="line"><a name="l13413"></a><span class="lineno">13413</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#ae92040eb11b46bfdd1d15ada243ef941">target</a> = link_type;</div>
<div class="line"><a name="l13414"></a><span class="lineno">13414</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a> = veh.<a class="code" href="classvehicle.html#ab18738d85258e3c9ac86197570f01eda">get_safe_reference</a>();</div>
<div class="line"><a name="l13415"></a><span class="lineno">13415</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4b52a313745c43b1a4dc798a997879c1">t_abs_pos</a> = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh-&gt;global_pos3() );</div>
<div class="line"><a name="l13416"></a><span class="lineno">13416</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#abe0aec759190715da01469d9f7a9e061">t_mount</a> = mount;</div>
<div class="line"><a name="l13417"></a><span class="lineno">13417</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a7b65c56e3c39b6e6964f1083514da84c">s_bub_pos</a> = <a class="code" href="point_8h.html#afa8693bb804568b71fece8ab73d959bf">tripoint_min</a>; <span class="comment">// Forces the item to check the length during process_link.</span></div>
<div class="line"><a name="l13418"></a><span class="lineno">13418</span>&#160; </div>
<div class="line"><a name="l13419"></a><span class="lineno">13419</span>&#160;        <a class="code" href="classitem.html#ae7552957ca969eb688de73e6d944069b">update_link_traits</a>();</div>
<div class="line"><a name="l13420"></a><span class="lineno">13420</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>();</div>
<div class="line"><a name="l13421"></a><span class="lineno">13421</span>&#160;    }</div>
<div class="line"><a name="l13422"></a><span class="lineno">13422</span>&#160; </div>
<div class="line"><a name="l13423"></a><span class="lineno">13423</span>&#160;    <span class="comment">// There&#39;s already a link, so connect the previous vehicle/appliance to the new one.</span></div>
<div class="line"><a name="l13424"></a><span class="lineno">13424</span>&#160; </div>
<div class="line"><a name="l13425"></a><span class="lineno">13425</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">link_has_state</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> ) ) {</div>
<div class="line"><a name="l13426"></a><span class="lineno">13426</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Failed to connect the %s, both ends are already connected!&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13427"></a><span class="lineno">13427</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l13428"></a><span class="lineno">13428</span>&#160;    }</div>
<div class="line"><a name="l13429"></a><span class="lineno">13429</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh ) {</div>
<div class="line"><a name="l13430"></a><span class="lineno">13430</span>&#160;        <a class="code" href="classvehicle.html">vehicle</a> *found_veh = <a class="code" href="classvehicle.html#a546f6795113ae5bb41b64adc23fb3e3c">vehicle::find_vehicle</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos );</div>
<div class="line"><a name="l13431"></a><span class="lineno">13431</span>&#160;        <span class="keywordflow">if</span>( found_veh ) {</div>
<div class="line"><a name="l13432"></a><span class="lineno">13432</span>&#160;            <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a> = found_veh-&gt;<a class="code" href="classvehicle.html#ab18738d85258e3c9ac86197570f01eda">get_safe_reference</a>();</div>
<div class="line"><a name="l13433"></a><span class="lineno">13433</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13434"></a><span class="lineno">13434</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Failed to connect the %s, it lost its vehicle pointer!&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13435"></a><span class="lineno">13435</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l13436"></a><span class="lineno">13436</span>&#160;        }</div>
<div class="line"><a name="l13437"></a><span class="lineno">13437</span>&#160;    }</div>
<div class="line"><a name="l13438"></a><span class="lineno">13438</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *prev_veh = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>.<a class="code" href="classsafe__reference.html#abcb6bf6d2b4f72a7c8f6459877c10d0c">get</a>();</div>
<div class="line"><a name="l13439"></a><span class="lineno">13439</span>&#160;    <span class="keywordflow">if</span>( prev_veh == &amp;veh ) {</div>
<div class="line"><a name="l13440"></a><span class="lineno">13440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot connect the %s to itself.&quot;</span> ), prev_veh-&gt;<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l13441"></a><span class="lineno">13441</span>&#160;    }</div>
<div class="line"><a name="l13442"></a><span class="lineno">13442</span>&#160; </div>
<div class="line"><a name="l13443"></a><span class="lineno">13443</span>&#160;    <span class="comment">// Prepare target tripoints for the cable parts that&#39;ll be added to the selected/previous vehicles</span></div>
<div class="line"><a name="l13444"></a><span class="lineno">13444</span>&#160;    <span class="keyword">const</span> std::pair&lt;tripoint, tripoint&gt; prev_part_target = std::make_pair(</div>
<div class="line"><a name="l13445"></a><span class="lineno">13445</span>&#160;                ( veh.<a class="code" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>() + veh.<a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( mount ) ).raw(),</div>
<div class="line"><a name="l13446"></a><span class="lineno">13446</span>&#160;                veh.<a class="code" href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">global_square_location</a>().<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() );</div>
<div class="line"><a name="l13447"></a><span class="lineno">13447</span>&#160;    <span class="keyword">const</span> std::pair&lt;tripoint, tripoint&gt; sel_part_target = std::make_pair(</div>
<div class="line"><a name="l13448"></a><span class="lineno">13448</span>&#160;                ( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos + prev_veh-&gt;<a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) ).raw(),</div>
<div class="line"><a name="l13449"></a><span class="lineno">13449</span>&#160;                <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos.raw() );</div>
<div class="line"><a name="l13450"></a><span class="lineno">13450</span>&#160; </div>
<div class="line"><a name="l13451"></a><span class="lineno">13451</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__reference.html">vpart_reference</a> &amp;vpr : prev_veh-&gt;<a class="code" href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">get_any_parts</a>( <a class="code" href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8">VPFLAG_POWER_TRANSFER</a> ) ) {</div>
<div class="line"><a name="l13452"></a><span class="lineno">13452</span>&#160;        <span class="keywordflow">if</span>( vpr.part().target.first == prev_part_target.first &amp;&amp;</div>
<div class="line"><a name="l13453"></a><span class="lineno">13453</span>&#160;            vpr.part().target.second == prev_part_target.second ) {</div>
<div class="line"><a name="l13454"></a><span class="lineno">13454</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s and %2$s are already connected.&quot;</span> ),</div>
<div class="line"><a name="l13455"></a><span class="lineno">13455</span>&#160;                                                veh.<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a>, prev_veh-&gt;<a class="code" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> );</div>
<div class="line"><a name="l13456"></a><span class="lineno">13456</span>&#160;        }</div>
<div class="line"><a name="l13457"></a><span class="lineno">13457</span>&#160;    }</div>
<div class="line"><a name="l13458"></a><span class="lineno">13458</span>&#160; </div>
<div class="line"><a name="l13459"></a><span class="lineno">13459</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( prev_part_target.first, sel_part_target.first ) &gt; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().max_length ) {</div>
<div class="line"><a name="l13460"></a><span class="lineno">13460</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s can&#39;t stretch that far!&quot;</span> ), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l13461"></a><span class="lineno">13461</span>&#160;    }</div>
<div class="line"><a name="l13462"></a><span class="lineno">13462</span>&#160; </div>
<div class="line"><a name="l13463"></a><span class="lineno">13463</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> item_id = <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l13464"></a><span class="lineno">13464</span>&#160;    <a class="code" href="classstring__id.html">vpart_id</a> vpid = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">vpart_id::NULL_ID</a>();</div>
<div class="line"><a name="l13465"></a><span class="lineno">13465</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classvpart__info.html">vpart_info</a> &amp;e : <a class="code" href="namespacevehicles_1_1parts.html#a1760b563889a67b60d887f2cd6331846">vehicles::parts::get_all</a>() ) {</div>
<div class="line"><a name="l13466"></a><span class="lineno">13466</span>&#160;        <span class="keywordflow">if</span>( e.base_item == item_id ) {</div>
<div class="line"><a name="l13467"></a><span class="lineno">13467</span>&#160;            vpid = e.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>;</div>
<div class="line"><a name="l13468"></a><span class="lineno">13468</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13469"></a><span class="lineno">13469</span>&#160;        }</div>
<div class="line"><a name="l13470"></a><span class="lineno">13470</span>&#160;    }</div>
<div class="line"><a name="l13471"></a><span class="lineno">13471</span>&#160; </div>
<div class="line"><a name="l13472"></a><span class="lineno">13472</span>&#160;    <span class="keywordflow">if</span>( vpid.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l13473"></a><span class="lineno">13473</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;item %s is not base item of any vehicle part!&quot;</span>, item_id.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l13474"></a><span class="lineno">13474</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>();</div>
<div class="line"><a name="l13475"></a><span class="lineno">13475</span>&#160;    }</div>
<div class="line"><a name="l13476"></a><span class="lineno">13476</span>&#160; </div>
<div class="line"><a name="l13477"></a><span class="lineno">13477</span>&#160;    <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> prev_mount = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#abe0aec759190715da01469d9f7a9e061">t_mount</a>;</div>
<div class="line"><a name="l13478"></a><span class="lineno">13478</span>&#160; </div>
<div class="line"><a name="l13479"></a><span class="lineno">13479</span>&#160;    <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_mount1 = prev_veh-&gt;<a class="code" href="classvehicle.html#a1369f357d2165aae36bb485ca703029a">can_mount</a>( prev_mount, *vpid );</div>
<div class="line"><a name="l13480"></a><span class="lineno">13480</span>&#160;    <span class="keywordflow">if</span>( !can_mount1.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l13481"></a><span class="lineno">13481</span>&#160;        <span class="comment">//~ %1$s - cable name, %2$s - the reason why it failed</span></div>
<div class="line"><a name="l13482"></a><span class="lineno">13482</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t attach the %1$s: %2$s&quot;</span> ),</div>
<div class="line"><a name="l13483"></a><span class="lineno">13483</span>&#160;                                            <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(), can_mount1.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l13484"></a><span class="lineno">13484</span>&#160;    }</div>
<div class="line"><a name="l13485"></a><span class="lineno">13485</span>&#160;    <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_mount2 = veh.<a class="code" href="classvehicle.html#a1369f357d2165aae36bb485ca703029a">can_mount</a>( mount, *vpid );</div>
<div class="line"><a name="l13486"></a><span class="lineno">13486</span>&#160;    <span class="keywordflow">if</span>( !can_mount2.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l13487"></a><span class="lineno">13487</span>&#160;        <span class="comment">//~ %1$s - cable name, %2$s - the reason why it failed</span></div>
<div class="line"><a name="l13488"></a><span class="lineno">13488</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t attach the %1$s: %2$s&quot;</span> ),</div>
<div class="line"><a name="l13489"></a><span class="lineno">13489</span>&#160;                                            <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(), can_mount2.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l13490"></a><span class="lineno">13490</span>&#160;    }</div>
<div class="line"><a name="l13491"></a><span class="lineno">13491</span>&#160; </div>
<div class="line"><a name="l13492"></a><span class="lineno">13492</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> prev_veh_part( vpid, <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l13493"></a><span class="lineno">13493</span>&#160;    prev_veh_part.<a class="code" href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">target</a>.first = prev_part_target.first;</div>
<div class="line"><a name="l13494"></a><span class="lineno">13494</span>&#160;    prev_veh_part.<a class="code" href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">target</a>.second = prev_part_target.second;</div>
<div class="line"><a name="l13495"></a><span class="lineno">13495</span>&#160;    prev_veh-&gt;<a class="code" href="classvehicle.html#a030263e1db60c034caa9e6f24199cd33">install_part</a>( prev_mount, std::move( prev_veh_part ) );</div>
<div class="line"><a name="l13496"></a><span class="lineno">13496</span>&#160;    prev_veh-&gt;<a class="code" href="classvehicle.html#ac2d28a00ecef8f1077752dfca73c15eb">precalc_mounts</a>( 1, prev_veh-&gt;<a class="code" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[1], prev_veh-&gt;<a class="code" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1] );</div>
<div class="line"><a name="l13497"></a><span class="lineno">13497</span>&#160; </div>
<div class="line"><a name="l13498"></a><span class="lineno">13498</span>&#160;    <a class="code" href="structvehicle__part.html">vehicle_part</a> sel_veh_part( vpid, <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( *<span class="keyword">this</span> ) );</div>
<div class="line"><a name="l13499"></a><span class="lineno">13499</span>&#160;    sel_veh_part.<a class="code" href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">target</a>.first = sel_part_target.first;</div>
<div class="line"><a name="l13500"></a><span class="lineno">13500</span>&#160;    sel_veh_part.<a class="code" href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">target</a>.second = sel_part_target.second;</div>
<div class="line"><a name="l13501"></a><span class="lineno">13501</span>&#160;    veh.<a class="code" href="classvehicle.html#a030263e1db60c034caa9e6f24199cd33">install_part</a>( mount, std::move( sel_veh_part ) );</div>
<div class="line"><a name="l13502"></a><span class="lineno">13502</span>&#160;    veh.<a class="code" href="classvehicle.html#ac2d28a00ecef8f1077752dfca73c15eb">precalc_mounts</a>( 1, veh.<a class="code" href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">pivot_rotation</a>[1], veh.<a class="code" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[1] );</div>
<div class="line"><a name="l13503"></a><span class="lineno">13503</span>&#160; </div>
<div class="line"><a name="l13504"></a><span class="lineno">13504</span>&#160;    <span class="keywordflow">if</span>( link_type == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) {</div>
<div class="line"><a name="l13505"></a><span class="lineno">13505</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) {</div>
<div class="line"><a name="l13506"></a><span class="lineno">13506</span>&#160;            veh.<a class="code" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code" href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">set_towing</a>( prev_veh, &amp;veh ); <span class="comment">// Previous vehicle is towing.</span></div>
<div class="line"><a name="l13507"></a><span class="lineno">13507</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13508"></a><span class="lineno">13508</span>&#160;            veh.<a class="code" href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">tow_data</a>.<a class="code" href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">set_towing</a>( &amp;veh, prev_veh ); <span class="comment">// Previous vehicle is being towed.</span></div>
<div class="line"><a name="l13509"></a><span class="lineno">13509</span>&#160;        }</div>
<div class="line"><a name="l13510"></a><span class="lineno">13510</span>&#160;    }</div>
<div class="line"><a name="l13511"></a><span class="lineno">13511</span>&#160; </div>
<div class="line"><a name="l13512"></a><span class="lineno">13512</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() != <a class="code" href="item_8cpp.html#abbe226ec1f3022a926b5846833cb4ee7">itype_power_cord</a> ) {</div>
<div class="line"><a name="l13513"></a><span class="lineno">13513</span>&#160;        <span class="comment">// Remove linked_flag from attached parts - the just-added cable vehicle parts do the same thing.</span></div>
<div class="line"><a name="l13514"></a><span class="lineno">13514</span>&#160;        <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>();</div>
<div class="line"><a name="l13515"></a><span class="lineno">13515</span>&#160;    }</div>
<div class="line"><a name="l13516"></a><span class="lineno">13516</span>&#160;    <span class="comment">//~ %1$s - first vehicle name, %2$s - second vehicle name - %3$s - cable name,</span></div>
<div class="line"><a name="l13517"></a><span class="lineno">13517</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You connect the %1$s and %2$s with the %3$s.&quot;</span> ),</div>
<div class="line"><a name="l13518"></a><span class="lineno">13518</span>&#160;                                        prev_veh-&gt;<a class="code" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>(), veh.<a class="code" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>(), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l13519"></a><span class="lineno">13519</span>&#160;}</div>
<div class="line"><a name="l13520"></a><span class="lineno">13520</span>&#160; </div>
<div class="line"><a name="l13521"></a><span class="lineno"><a class="line" href="classitem.html#ae7552957ca969eb688de73e6d944069b">13521</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ae7552957ca969eb688de73e6d944069b">item::update_link_traits</a>()</div>
<div class="line"><a name="l13522"></a><span class="lineno">13522</span>&#160;{</div>
<div class="line"><a name="l13523"></a><span class="lineno">13523</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">can_link_up</a>() ) {</div>
<div class="line"><a name="l13524"></a><span class="lineno">13524</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l13525"></a><span class="lineno">13525</span>&#160;    }</div>
<div class="line"><a name="l13526"></a><span class="lineno">13526</span>&#160; </div>
<div class="line"><a name="l13527"></a><span class="lineno">13527</span>&#160;    <span class="keyword">const</span> <a class="code" href="classlink__up__actor.html">link_up_actor</a> *it_actor = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classlink__up__actor.html">link_up_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l13528"></a><span class="lineno">13528</span>&#160;                                    ( <a class="code" href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">get_use</a>( <span class="stringliteral">&quot;link_up&quot;</span> )-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l13529"></a><span class="lineno">13529</span>&#160;    <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a6440a003fe95092a55b12c0cdb3abf4f">max_length</a> = it_actor-&gt;<a class="code" href="classlink__up__actor.html#a59b4574295f38f8d345ace78301cb70f">cable_length</a> == -1 ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>() : it_actor-&gt;<a class="code" href="classlink__up__actor.html#a59b4574295f38f8d345ace78301cb70f">cable_length</a>;</div>
<div class="line"><a name="l13530"></a><span class="lineno">13530</span>&#160;    <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4aaec2ceb22823e8734f3e57ca8019bb">efficiency</a> = it_actor-&gt;<a class="code" href="classlink__up__actor.html#a23990adc9982e4fd425095025fe1975f">efficiency</a> &lt; <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ? 0.0f : it_actor-&gt;<a class="code" href="classlink__up__actor.html#a23990adc9982e4fd425095025fe1975f">efficiency</a>;</div>
<div class="line"><a name="l13531"></a><span class="lineno">13531</span>&#160;    <span class="comment">// Reset s_bub_pos to force the item to check the length during process_link.</span></div>
<div class="line"><a name="l13532"></a><span class="lineno">13532</span>&#160;    <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a7b65c56e3c39b6e6964f1083514da84c">s_bub_pos</a> = <a class="code" href="point_8h.html#afa8693bb804568b71fece8ab73d959bf">tripoint_min</a>;</div>
<div class="line"><a name="l13533"></a><span class="lineno">13533</span>&#160;    <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3daea00ece982171518df83a68cf3728">last_processed</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l13534"></a><span class="lineno">13534</span>&#160; </div>
<div class="line"><a name="l13535"></a><span class="lineno">13535</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *cable : <a class="code" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">cables</a>() ) {</div>
<div class="line"><a name="l13536"></a><span class="lineno">13536</span>&#160;        <span class="keywordflow">if</span>( !cable-&gt;can_link_up() ) {</div>
<div class="line"><a name="l13537"></a><span class="lineno">13537</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l13538"></a><span class="lineno">13538</span>&#160;        }</div>
<div class="line"><a name="l13539"></a><span class="lineno">13539</span>&#160;        <span class="keyword">const</span> <a class="code" href="classlink__up__actor.html">link_up_actor</a> *actor = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classlink__up__actor.html">link_up_actor</a> *<span class="keyword">&gt;</span></div>
<div class="line"><a name="l13540"></a><span class="lineno">13540</span>&#160;                                     ( cable-&gt;get_use( <span class="stringliteral">&quot;link_up&quot;</span> )-&gt;get_actor_ptr() );</div>
<div class="line"><a name="l13541"></a><span class="lineno">13541</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a6440a003fe95092a55b12c0cdb3abf4f">max_length</a> += actor-&gt;<a class="code" href="classlink__up__actor.html#a59b4574295f38f8d345ace78301cb70f">cable_length</a> == -1 ? cable-&gt;type-&gt;maximum_charges() :</div>
<div class="line"><a name="l13542"></a><span class="lineno">13542</span>&#160;                             actor-&gt;<a class="code" href="classlink__up__actor.html#a59b4574295f38f8d345ace78301cb70f">cable_length</a>;</div>
<div class="line"><a name="l13543"></a><span class="lineno">13543</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4aaec2ceb22823e8734f3e57ca8019bb">efficiency</a> = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4aaec2ceb22823e8734f3e57ca8019bb">efficiency</a> &lt; <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ? 0.0f :</div>
<div class="line"><a name="l13544"></a><span class="lineno">13544</span>&#160;                            <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4aaec2ceb22823e8734f3e57ca8019bb">efficiency</a> * actor-&gt;<a class="code" href="classlink__up__actor.html#a23990adc9982e4fd425095025fe1975f">efficiency</a>;</div>
<div class="line"><a name="l13545"></a><span class="lineno">13545</span>&#160;    }</div>
<div class="line"><a name="l13546"></a><span class="lineno">13546</span>&#160; </div>
<div class="line"><a name="l13547"></a><span class="lineno">13547</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency &gt;= <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ) {</div>
<div class="line"><a name="l13548"></a><span class="lineno">13548</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a208a39ac375933fd4b33168ce26196c7">charge_rate</a> = it_actor-&gt;<a class="code" href="classlink__up__actor.html#af526f1c1b24926cd919b65c95771a7ff">charge_rate</a>.<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>();</div>
<div class="line"><a name="l13549"></a><span class="lineno">13549</span>&#160;        <span class="comment">// Convert charge_rate to how long it takes to charge 1 kW, the unit batteries use.</span></div>
<div class="line"><a name="l13550"></a><span class="lineno">13550</span>&#160;        <span class="comment">// 0 means batteries won&#39;t be charged, but it can still provide power to devices unless efficiency is also 0.</span></div>
<div class="line"><a name="l13551"></a><span class="lineno">13551</span>&#160;        <span class="keywordflow">if</span>( it_actor-&gt;<a class="code" href="classlink__up__actor.html#af526f1c1b24926cd919b65c95771a7ff">charge_rate</a> != 0_W ) {</div>
<div class="line"><a name="l13552"></a><span class="lineno">13552</span>&#160;            <span class="keywordtype">double</span> charge_rate = <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( 1000000.0 / <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a>( it_actor-&gt;<a class="code" href="classlink__up__actor.html#af526f1c1b24926cd919b65c95771a7ff">charge_rate</a>.<a class="code" href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">value</a>() ) + 0.5 );</div>
<div class="line"><a name="l13553"></a><span class="lineno">13553</span>&#160;            <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3bad2f65381eed201fc526a0514a3ab7">charge_interval</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( charge_rate ) );</div>
<div class="line"><a name="l13554"></a><span class="lineno">13554</span>&#160;        }</div>
<div class="line"><a name="l13555"></a><span class="lineno">13555</span>&#160;    }</div>
<div class="line"><a name="l13556"></a><span class="lineno">13556</span>&#160;}</div>
<div class="line"><a name="l13557"></a><span class="lineno">13557</span>&#160; </div>
<div class="line"><a name="l13558"></a><span class="lineno"><a class="line" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">13558</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">item::link_length</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13559"></a><span class="lineno">13559</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13560"></a><span class="lineno">13560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3b1a3f1d6bb7ff3962b3be40b6b73989">has_no_links</a>() ? -2 :</div>
<div class="line"><a name="l13561"></a><span class="lineno">13561</span>&#160;           <a class="code" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">link_has_state</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea3a1722cb2f20e74ed2fff582d1c58424">link_state::needs_reeling</a> ) ? -1 : <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#ab89087b34dcc4fe0bca8d02217ab153a">length</a>;</div>
<div class="line"><a name="l13562"></a><span class="lineno">13562</span>&#160;}</div>
<div class="line"><a name="l13563"></a><span class="lineno">13563</span>&#160; </div>
<div class="line"><a name="l13564"></a><span class="lineno"><a class="line" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">13564</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">item::max_link_length</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13565"></a><span class="lineno">13565</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13566"></a><span class="lineno">13566</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ? -2 :</div>
<div class="line"><a name="l13567"></a><span class="lineno">13567</span>&#160;           <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a6440a003fe95092a55b12c0cdb3abf4f">max_length</a> != -1 ? <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a6440a003fe95092a55b12c0cdb3abf4f">max_length</a> : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>();</div>
<div class="line"><a name="l13568"></a><span class="lineno">13568</span>&#160;}</div>
<div class="line"><a name="l13569"></a><span class="lineno">13569</span>&#160; </div>
<div class="line"><a name="l13570"></a><span class="lineno"><a class="line" href="classitem.html#a6a5e2c34a4158677b2c1d062ebf01a5f">13570</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a6a5e2c34a4158677b2c1d062ebf01a5f">item::link_sort_key</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l13571"></a><span class="lineno">13571</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l13572"></a><span class="lineno">13572</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> = <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>();</div>
<div class="line"><a name="l13573"></a><span class="lineno">13573</span>&#160;    <span class="keywordtype">int</span> key = <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> &gt;= 0 ? -1000000000 : <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> == -1 ? 0 : 1000000000;</div>
<div class="line"><a name="l13574"></a><span class="lineno">13574</span>&#160;    key += <a class="code" href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">max_link_length</a>() * 100000;</div>
<div class="line"><a name="l13575"></a><span class="lineno">13575</span>&#160;    <span class="keywordflow">return</span> key - <a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>;</div>
<div class="line"><a name="l13576"></a><span class="lineno">13576</span>&#160;}</div>
<div class="line"><a name="l13577"></a><span class="lineno">13577</span>&#160; </div>
<div class="line"><a name="l13578"></a><span class="lineno"><a class="line" href="classitem.html#a9cfea3be1f920a3ae56a1dd1e426f7c7">13578</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9cfea3be1f920a3ae56a1dd1e426f7c7">item::process_link</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13579"></a><span class="lineno">13579</span>&#160;{</div>
<div class="line"><a name="l13580"></a><span class="lineno">13580</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a5bb6926420993d655913e4d7779a3c30">link_length</a>() &lt; 0 ) {</div>
<div class="line"><a name="l13581"></a><span class="lineno">13581</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13582"></a><span class="lineno">13582</span>&#160;    }</div>
<div class="line"><a name="l13583"></a><span class="lineno">13583</span>&#160; </div>
<div class="line"><a name="l13584"></a><span class="lineno">13584</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_cable_item = <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a99021b3b0d6f54bbcd73ed3ff33a1bb7">flag_CABLE_SPOOL</a> );</div>
<div class="line"><a name="l13585"></a><span class="lineno">13585</span>&#160; </div>
<div class="line"><a name="l13586"></a><span class="lineno">13586</span>&#160;    <span class="comment">// Handle links to items in the inventory.</span></div>
<div class="line"><a name="l13587"></a><span class="lineno">13587</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ead96949e74b3f41ce25890bb1115bf5c6">link_state::solarpack</a> ) {</div>
<div class="line"><a name="l13588"></a><span class="lineno">13588</span>&#160;        <span class="keywordflow">if</span>( carrier == <span class="keyword">nullptr</span> || !carrier-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a> ) ) {</div>
<div class="line"><a name="l13589"></a><span class="lineno">13589</span>&#160;            <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s has come loose from the solar pack.&quot;</span> ),</div>
<div class="line"><a name="l13590"></a><span class="lineno">13590</span>&#160;                                    <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13591"></a><span class="lineno">13591</span>&#160;            <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier );</div>
<div class="line"><a name="l13592"></a><span class="lineno">13592</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13593"></a><span class="lineno">13593</span>&#160;        }</div>
<div class="line"><a name="l13594"></a><span class="lineno">13594</span>&#160;    }</div>
<div class="line"><a name="l13595"></a><span class="lineno">13595</span>&#160;    <span class="keyword">const</span> <a class="code" href="game_8h.html#ae92a399600a4c7e5972eb3e98e3cc718">item_filter</a> used_ups = [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a name="l13596"></a><span class="lineno">13596</span>&#160;        <span class="keywordflow">return</span> itm.get_var( <span class="stringliteral">&quot;cable&quot;</span> ) == <span class="stringliteral">&quot;plugged_in&quot;</span>;</div>
<div class="line"><a name="l13597"></a><span class="lineno">13597</span>&#160;    };</div>
<div class="line"><a name="l13598"></a><span class="lineno">13598</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a64ca11e0b5756edb11e6be50431b8f92">source</a> == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea7b0746dabfaed032913530c495453f0f">link_state::ups</a> ) {</div>
<div class="line"><a name="l13599"></a><span class="lineno">13599</span>&#160;        <span class="keywordflow">if</span>( carrier == <span class="keyword">nullptr</span> || !carrier-&gt;<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <a class="code" href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a>, used_ups ) ) {</div>
<div class="line"><a name="l13600"></a><span class="lineno">13600</span>&#160;            <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s has come loose from the UPS.&quot;</span> ), <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13601"></a><span class="lineno">13601</span>&#160;            <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier );</div>
<div class="line"><a name="l13602"></a><span class="lineno">13602</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13603"></a><span class="lineno">13603</span>&#160;        }</div>
<div class="line"><a name="l13604"></a><span class="lineno">13604</span>&#160;    }</div>
<div class="line"><a name="l13605"></a><span class="lineno">13605</span>&#160;    <span class="comment">// Certain cable states should skip processing and also become inactive if dropped.</span></div>
<div class="line"><a name="l13606"></a><span class="lineno">13606</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a> &amp;&amp; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().source != <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) ||</div>
<div class="line"><a name="l13607"></a><span class="lineno">13607</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea5e6b8267ce64e71d233da7d26939f5a5">link_state::bio_cable</a> ) {</div>
<div class="line"><a name="l13608"></a><span class="lineno">13608</span>&#160;        <span class="keywordflow">if</span>( carrier == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13609"></a><span class="lineno">13609</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, <span class="keyword">nullptr</span>, -1, <span class="keyword">true</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13610"></a><span class="lineno">13610</span>&#160;        }</div>
<div class="line"><a name="l13611"></a><span class="lineno">13611</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13612"></a><span class="lineno">13612</span>&#160;    }</div>
<div class="line"><a name="l13613"></a><span class="lineno">13613</span>&#160; </div>
<div class="line"><a name="l13614"></a><span class="lineno">13614</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> last_t_abs_pos_is_oob = !here.<a class="code" href="classmap.html#a46608709f68358365d0734b1063fed73">inbounds</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos );</div>
<div class="line"><a name="l13615"></a><span class="lineno">13615</span>&#160; </div>
<div class="line"><a name="l13616"></a><span class="lineno">13616</span>&#160;    <span class="comment">// Lambda function for checking if a cable has been stretched too long, resetting it if so.</span></div>
<div class="line"><a name="l13617"></a><span class="lineno">13617</span>&#160;    <span class="comment">// @return True if the cable is disconnected.</span></div>
<div class="line"><a name="l13618"></a><span class="lineno">13618</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> check_length = [<span class="keyword">this</span>, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, last_t_abs_pos_is_oob, is_cable_item]() {</div>
<div class="line"><a name="l13619"></a><span class="lineno">13619</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a name="l13620"></a><span class="lineno">13620</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb">debugmode::DF_IUSE</a>, <span class="stringliteral">&quot;%s linked to %s%s, length %d/%d&quot;</span>, <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(),</div>
<div class="line"><a name="l13621"></a><span class="lineno">13621</span>&#160;                           <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos.to_string_writable(), last_t_abs_pos_is_oob ? <span class="stringliteral">&quot; (OoB)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l13622"></a><span class="lineno">13622</span>&#160;                           <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a>, <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().max_length );</div>
<div class="line"><a name="l13623"></a><span class="lineno">13623</span>&#160;        }</div>
<div class="line"><a name="l13624"></a><span class="lineno">13624</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> &gt; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().max_length ) {</div>
<div class="line"><a name="l13625"></a><span class="lineno">13625</span>&#160;            std::string cable_name = is_cable_item ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;over-extended %s&quot;</span>, <a class="code" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">label</a>( 1 ) ) :</div>
<div class="line"><a name="l13626"></a><span class="lineno">13626</span>&#160;                                     <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s&#39;s over-extended cable&quot;</span>, <a class="code" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">label</a>( 1 ) );</div>
<div class="line"><a name="l13627"></a><span class="lineno">13627</span>&#160;            <span class="keywordflow">if</span>( carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13628"></a><span class="lineno">13628</span>&#160;                carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s breaks loose!&quot;</span> ), cable_name );</div>
<div class="line"><a name="l13629"></a><span class="lineno">13629</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13630"></a><span class="lineno">13630</span>&#160;                <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s breaks loose!&quot;</span> ), cable_name );</div>
<div class="line"><a name="l13631"></a><span class="lineno">13631</span>&#160;            }</div>
<div class="line"><a name="l13632"></a><span class="lineno">13632</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13633"></a><span class="lineno">13633</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> + <a class="code" href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a> &gt;= <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().max_length + 1 &amp;&amp; carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13634"></a><span class="lineno">13634</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is stretched to its limit!&quot;</span> ), <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13635"></a><span class="lineno">13635</span>&#160;        }</div>
<div class="line"><a name="l13636"></a><span class="lineno">13636</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13637"></a><span class="lineno">13637</span>&#160;    };</div>
<div class="line"><a name="l13638"></a><span class="lineno">13638</span>&#160; </div>
<div class="line"><a name="l13639"></a><span class="lineno">13639</span>&#160;    <span class="comment">// Check if the item has moved positions this turn.</span></div>
<div class="line"><a name="l13640"></a><span class="lineno">13640</span>&#160;    <span class="keywordtype">bool</span> length_check_needed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13641"></a><span class="lineno">13641</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().s_bub_pos != <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) {</div>
<div class="line"><a name="l13642"></a><span class="lineno">13642</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a7b65c56e3c39b6e6964f1083514da84c">s_bub_pos</a> = <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>;</div>
<div class="line"><a name="l13643"></a><span class="lineno">13643</span>&#160;        length_check_needed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13644"></a><span class="lineno">13644</span>&#160;    }</div>
<div class="line"><a name="l13645"></a><span class="lineno">13645</span>&#160; </div>
<div class="line"><a name="l13646"></a><span class="lineno">13646</span>&#160;    <span class="comment">// Re-establish vehicle pointer if it got lost or if this item just got loaded.</span></div>
<div class="line"><a name="l13647"></a><span class="lineno">13647</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh ) {</div>
<div class="line"><a name="l13648"></a><span class="lineno">13648</span>&#160;        <a class="code" href="classvehicle.html">vehicle</a> *found_veh = <a class="code" href="classvehicle.html#a546f6795113ae5bb41b64adc23fb3e3c">vehicle::find_vehicle</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos );</div>
<div class="line"><a name="l13649"></a><span class="lineno">13649</span>&#160;        <span class="keywordflow">if</span>( !found_veh ) {</div>
<div class="line"><a name="l13650"></a><span class="lineno">13650</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier, -2, <span class="keyword">true</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13651"></a><span class="lineno">13651</span>&#160;        }</div>
<div class="line"><a name="l13652"></a><span class="lineno">13652</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a name="l13653"></a><span class="lineno">13653</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb">debugmode::DF_IUSE</a>, <span class="stringliteral">&quot;Re-established link of %s to %s.&quot;</span>, <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>(),</div>
<div class="line"><a name="l13654"></a><span class="lineno">13654</span>&#160;                           found_veh-&gt;<a class="code" href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">disp_name</a>() );</div>
<div class="line"><a name="l13655"></a><span class="lineno">13655</span>&#160;        }</div>
<div class="line"><a name="l13656"></a><span class="lineno">13656</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a> = found_veh-&gt;<a class="code" href="classvehicle.html#ab18738d85258e3c9ac86197570f01eda">get_safe_reference</a>();</div>
<div class="line"><a name="l13657"></a><span class="lineno">13657</span>&#160;    }</div>
<div class="line"><a name="l13658"></a><span class="lineno">13658</span>&#160; </div>
<div class="line"><a name="l13659"></a><span class="lineno">13659</span>&#160;    <span class="comment">// Regular pointers are faster, so make one now that we know the reference is valid.</span></div>
<div class="line"><a name="l13660"></a><span class="lineno">13660</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *t_veh = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>.<a class="code" href="classsafe__reference.html#abcb6bf6d2b4f72a7c8f6459877c10d0c">get</a>();</div>
<div class="line"><a name="l13661"></a><span class="lineno">13661</span>&#160; </div>
<div class="line"><a name="l13662"></a><span class="lineno">13662</span>&#160;    <span class="comment">// We should skip processing if the last saved target point is out of bounds, since vehicles give innacurate absolute coordinates when out of bounds.</span></div>
<div class="line"><a name="l13663"></a><span class="lineno">13663</span>&#160;    <span class="comment">// However, if the linked vehicle is moving fast enough, we should always do processing to avoid erroneously skipping linked items riding inside of it.</span></div>
<div class="line"><a name="l13664"></a><span class="lineno">13664</span>&#160;    <span class="keywordflow">if</span>( last_t_abs_pos_is_oob &amp;&amp; t_veh-&gt;<a class="code" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> &lt; <a class="code" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> * 400 ) {</div>
<div class="line"><a name="l13665"></a><span class="lineno">13665</span>&#160;        <span class="keywordflow">if</span>( !length_check_needed ) {</div>
<div class="line"><a name="l13666"></a><span class="lineno">13666</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13667"></a><span class="lineno">13667</span>&#160;        }</div>
<div class="line"><a name="l13668"></a><span class="lineno">13668</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#ab89087b34dcc4fe0bca8d02217ab153a">length</a> = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( here.<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ), <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos.raw() ) +</div>
<div class="line"><a name="l13669"></a><span class="lineno">13669</span>&#160;                        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#abe0aec759190715da01469d9f7a9e061">t_mount</a>.<a class="code" href="structpoint.html#afb447f6b720e999dcd3789b54ef2cca3">abs</a>().<a class="code" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> + <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#abe0aec759190715da01469d9f7a9e061">t_mount</a>.<a class="code" href="structpoint.html#afb447f6b720e999dcd3789b54ef2cca3">abs</a>().<a class="code" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a name="l13670"></a><span class="lineno">13670</span>&#160;        <span class="keywordflow">if</span>( check_length() ) {</div>
<div class="line"><a name="l13671"></a><span class="lineno">13671</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier );</div>
<div class="line"><a name="l13672"></a><span class="lineno">13672</span>&#160;        }</div>
<div class="line"><a name="l13673"></a><span class="lineno">13673</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13674"></a><span class="lineno">13674</span>&#160;    }</div>
<div class="line"><a name="l13675"></a><span class="lineno">13675</span>&#160; </div>
<div class="line"><a name="l13676"></a><span class="lineno">13676</span>&#160;    <span class="comment">// Find the vp_part index the cable is linked to.</span></div>
<div class="line"><a name="l13677"></a><span class="lineno">13677</span>&#160;    <span class="keywordtype">int</span> link_vp_index = -1;</div>
<div class="line"><a name="l13678"></a><span class="lineno">13678</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> ) {</div>
<div class="line"><a name="l13679"></a><span class="lineno">13679</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : t_veh-&gt;<a class="code" href="classvehicle.html#aab09d540376993e631367199ba1e6460">cable_ports</a> ) {</div>
<div class="line"><a name="l13680"></a><span class="lineno">13680</span>&#160;            <span class="keywordflow">if</span>( t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx ).<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) {</div>
<div class="line"><a name="l13681"></a><span class="lineno">13681</span>&#160;                link_vp_index = idx;</div>
<div class="line"><a name="l13682"></a><span class="lineno">13682</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13683"></a><span class="lineno">13683</span>&#160;            }</div>
<div class="line"><a name="l13684"></a><span class="lineno">13684</span>&#160;        }</div>
<div class="line"><a name="l13685"></a><span class="lineno">13685</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a> ) {</div>
<div class="line"><a name="l13686"></a><span class="lineno">13686</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : t_veh-&gt;<a class="code" href="classvehicle.html#ab24f511ea12640fe5f76e9609499ddd3">batteries</a> ) {</div>
<div class="line"><a name="l13687"></a><span class="lineno">13687</span>&#160;            <span class="keywordflow">if</span>( t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx ).<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) {</div>
<div class="line"><a name="l13688"></a><span class="lineno">13688</span>&#160;                link_vp_index = idx;</div>
<div class="line"><a name="l13689"></a><span class="lineno">13689</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13690"></a><span class="lineno">13690</span>&#160;            }</div>
<div class="line"><a name="l13691"></a><span class="lineno">13691</span>&#160;        }</div>
<div class="line"><a name="l13692"></a><span class="lineno">13692</span>&#160;        <span class="keywordflow">if</span>( link_vp_index == -1 ) {</div>
<div class="line"><a name="l13693"></a><span class="lineno">13693</span>&#160;            <span class="comment">// Check cable_ports, since that includes appliances</span></div>
<div class="line"><a name="l13694"></a><span class="lineno">13694</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : t_veh-&gt;<a class="code" href="classvehicle.html#aab09d540376993e631367199ba1e6460">cable_ports</a> ) {</div>
<div class="line"><a name="l13695"></a><span class="lineno">13695</span>&#160;                <span class="keywordflow">if</span>( t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx ).<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) {</div>
<div class="line"><a name="l13696"></a><span class="lineno">13696</span>&#160;                    link_vp_index = idx;</div>
<div class="line"><a name="l13697"></a><span class="lineno">13697</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13698"></a><span class="lineno">13698</span>&#160;                }</div>
<div class="line"><a name="l13699"></a><span class="lineno">13699</span>&#160;            }</div>
<div class="line"><a name="l13700"></a><span class="lineno">13700</span>&#160;        }</div>
<div class="line"><a name="l13701"></a><span class="lineno">13701</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> || <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) {</div>
<div class="line"><a name="l13702"></a><span class="lineno">13702</span>&#160;        link_vp_index = t_veh-&gt;<a class="code" href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">part_at</a>( t_veh-&gt;<a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) );</div>
<div class="line"><a name="l13703"></a><span class="lineno">13703</span>&#160;    }</div>
<div class="line"><a name="l13704"></a><span class="lineno">13704</span>&#160;    <span class="keywordflow">if</span>( link_vp_index == -1 ) {</div>
<div class="line"><a name="l13705"></a><span class="lineno">13705</span>&#160;        <span class="comment">// The part with cable ports was lost, so disconnect the cable.</span></div>
<div class="line"><a name="l13706"></a><span class="lineno">13706</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier, -2, <span class="keyword">true</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13707"></a><span class="lineno">13707</span>&#160;    }</div>
<div class="line"><a name="l13708"></a><span class="lineno">13708</span>&#160; </div>
<div class="line"><a name="l13709"></a><span class="lineno">13709</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().last_processed &lt;= t_veh-&gt;part( link_vp_index ).last_disconnected ) {</div>
<div class="line"><a name="l13710"></a><span class="lineno">13710</span>&#160;        <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You detached the %s.&quot;</span> ), <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() ) );</div>
<div class="line"><a name="l13711"></a><span class="lineno">13711</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier, -2 );</div>
<div class="line"><a name="l13712"></a><span class="lineno">13712</span>&#160;    }</div>
<div class="line"><a name="l13713"></a><span class="lineno">13713</span>&#160;    t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( link_vp_index ).<a class="code" href="structvehicle__part.html#a80245eb0489bb37a9f3ed666a5589182">set_flag</a>( <a class="code" href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40">vp_flag::linked_flag</a> );</div>
<div class="line"><a name="l13714"></a><span class="lineno">13714</span>&#160; </div>
<div class="line"><a name="l13715"></a><span class="lineno">13715</span>&#160;    <span class="keywordtype">int</span> turns_elapsed = to_turns&lt;int&gt;( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().last_processed );</div>
<div class="line"><a name="l13716"></a><span class="lineno">13716</span>&#160;    <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3daea00ece982171518df83a68cf3728">last_processed</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l13717"></a><span class="lineno">13717</span>&#160; </div>
<div class="line"><a name="l13718"></a><span class="lineno">13718</span>&#160;    <span class="comment">// Set the new absolute position to the vehicle&#39;s origin.</span></div>
<div class="line"><a name="l13719"></a><span class="lineno">13719</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> t_veh_bub_pos = t_veh-&gt;<a class="code" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>();</div>
<div class="line"><a name="l13720"></a><span class="lineno">13720</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> new_t_abs_pos = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( t_veh_bub_pos );</div>
<div class="line"><a name="l13721"></a><span class="lineno">13721</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_abs_pos != new_t_abs_pos ) {</div>
<div class="line"><a name="l13722"></a><span class="lineno">13722</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a4b52a313745c43b1a4dc798a997879c1">t_abs_pos</a> = new_t_abs_pos;</div>
<div class="line"><a name="l13723"></a><span class="lineno">13723</span>&#160;        length_check_needed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13724"></a><span class="lineno">13724</span>&#160;    }</div>
<div class="line"><a name="l13725"></a><span class="lineno">13725</span>&#160; </div>
<div class="line"><a name="l13726"></a><span class="lineno">13726</span>&#160;    <span class="comment">// If either of the link&#39;s connected sides moved, check the cable&#39;s length.</span></div>
<div class="line"><a name="l13727"></a><span class="lineno">13727</span>&#160;    <span class="keywordflow">if</span>( length_check_needed ) {</div>
<div class="line"><a name="l13728"></a><span class="lineno">13728</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#ab89087b34dcc4fe0bca8d02217ab153a">length</a> = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, t_veh_bub_pos + t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( link_vp_index ).<a class="code" href="structvehicle__part.html#a59d594dfb3854c67c2a04065c947cc3c">precalc</a>[0] );</div>
<div class="line"><a name="l13729"></a><span class="lineno">13729</span>&#160;        <span class="keywordflow">if</span>( check_length() ) {</div>
<div class="line"><a name="l13730"></a><span class="lineno">13730</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">reset_link</a>( <span class="keyword">true</span>, carrier, link_vp_index );</div>
<div class="line"><a name="l13731"></a><span class="lineno">13731</span>&#160;        }</div>
<div class="line"><a name="l13732"></a><span class="lineno">13732</span>&#160;    }</div>
<div class="line"><a name="l13733"></a><span class="lineno">13733</span>&#160; </div>
<div class="line"><a name="l13734"></a><span class="lineno">13734</span>&#160;    <span class="comment">// Extra behaviors for the cabled item.</span></div>
<div class="line"><a name="l13735"></a><span class="lineno">13735</span>&#160;    <span class="keywordflow">if</span>( !is_cable_item ) {</div>
<div class="line"><a name="l13736"></a><span class="lineno">13736</span>&#160;        <span class="keywordtype">int</span> power_draw = 0;</div>
<div class="line"><a name="l13737"></a><span class="lineno">13737</span>&#160; </div>
<div class="line"><a name="l13738"></a><span class="lineno">13738</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency &lt; <a class="code" href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a> ) {</div>
<div class="line"><a name="l13739"></a><span class="lineno">13739</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13740"></a><span class="lineno">13740</span>&#160;        }</div>
<div class="line"><a name="l13741"></a><span class="lineno">13741</span>&#160;        <span class="comment">// Recharge or charge linked batteries</span></div>
<div class="line"><a name="l13742"></a><span class="lineno">13742</span>&#160;        power_draw -= <a class="code" href="classitem.html#abbb3fb955cb5c911767c45325027bd63">charge_linked_batteries</a>( *t_veh, turns_elapsed );</div>
<div class="line"><a name="l13743"></a><span class="lineno">13743</span>&#160; </div>
<div class="line"><a name="l13744"></a><span class="lineno">13744</span>&#160;        <span class="comment">// Tool power draw display</span></div>
<div class="line"><a name="l13745"></a><span class="lineno">13745</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw &gt; 0_W ) {</div>
<div class="line"><a name="l13746"></a><span class="lineno">13746</span>&#160;            power_draw -= <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw.value();</div>
<div class="line"><a name="l13747"></a><span class="lineno">13747</span>&#160;        }</div>
<div class="line"><a name="l13748"></a><span class="lineno">13748</span>&#160; </div>
<div class="line"><a name="l13749"></a><span class="lineno">13749</span>&#160;        <span class="comment">// Send total power draw to the vehicle so it can be displayed.</span></div>
<div class="line"><a name="l13750"></a><span class="lineno">13750</span>&#160;        <span class="keywordflow">if</span>( power_draw != 0 ) {</div>
<div class="line"><a name="l13751"></a><span class="lineno">13751</span>&#160;            t_veh-&gt;<a class="code" href="classvehicle.html#a4af264b2849a0ee9252809d0579c9e86">linked_item_epower_this_turn</a> += <a class="code" href="namespaceunits.html#a432535e58069e90c49e3e5c285bef861">units::from_milliwatt</a>( power_draw );</div>
<div class="line"><a name="l13752"></a><span class="lineno">13752</span>&#160;        }</div>
<div class="line"><a name="l13753"></a><span class="lineno">13753</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a> ) ) {</div>
<div class="line"><a name="l13754"></a><span class="lineno">13754</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s shouldn&#39;t exist outside of an item or vehicle part.&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13755"></a><span class="lineno">13755</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13756"></a><span class="lineno">13756</span>&#160;    }</div>
<div class="line"><a name="l13757"></a><span class="lineno">13757</span>&#160; </div>
<div class="line"><a name="l13758"></a><span class="lineno">13758</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13759"></a><span class="lineno">13759</span>&#160;}</div>
<div class="line"><a name="l13760"></a><span class="lineno">13760</span>&#160; </div>
<div class="line"><a name="l13761"></a><span class="lineno"><a class="line" href="classitem.html#abbb3fb955cb5c911767c45325027bd63">13761</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#abbb3fb955cb5c911767c45325027bd63">item::charge_linked_batteries</a>( <a class="code" href="classvehicle.html">vehicle</a> &amp;linked_veh, <span class="keywordtype">int</span> turns_elapsed )</div>
<div class="line"><a name="l13762"></a><span class="lineno">13762</span>&#160;{</div>
<div class="line"><a name="l13763"></a><span class="lineno">13763</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() || <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().charge_rate == 0 || <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().charge_interval &lt; 1 ) {</div>
<div class="line"><a name="l13764"></a><span class="lineno">13764</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l13765"></a><span class="lineno">13765</span>&#160;    }</div>
<div class="line"><a name="l13766"></a><span class="lineno">13766</span>&#160; </div>
<div class="line"><a name="l13767"></a><span class="lineno">13767</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f">is_battery</a>() ) {</div>
<div class="line"><a name="l13768"></a><span class="lineno">13768</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *parent_mag = <a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l13769"></a><span class="lineno">13769</span>&#160;        <span class="keywordflow">if</span>( !parent_mag || !parent_mag-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a> ) ) {</div>
<div class="line"><a name="l13770"></a><span class="lineno">13770</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l13771"></a><span class="lineno">13771</span>&#160;        }</div>
<div class="line"><a name="l13772"></a><span class="lineno">13772</span>&#160;    }</div>
<div class="line"><a name="l13773"></a><span class="lineno">13773</span>&#160; </div>
<div class="line"><a name="l13774"></a><span class="lineno">13774</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> power_in = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a208a39ac375933fd4b33168ce26196c7">charge_rate</a> &gt; 0;</div>
<div class="line"><a name="l13775"></a><span class="lineno">13775</span>&#160;    <span class="keywordflow">if</span>( power_in ? <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &gt;= <a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) :</div>
<div class="line"><a name="l13776"></a><span class="lineno">13776</span>&#160;        <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &lt;= 0 ) {</div>
<div class="line"><a name="l13777"></a><span class="lineno">13777</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l13778"></a><span class="lineno">13778</span>&#160;    }</div>
<div class="line"><a name="l13779"></a><span class="lineno">13779</span>&#160; </div>
<div class="line"><a name="l13780"></a><span class="lineno">13780</span>&#160;    <span class="comment">// Normally efficiency is the chance to get a charge every charge_interval, but if we&#39;re catching up from</span></div>
<div class="line"><a name="l13781"></a><span class="lineno">13781</span>&#160;    <span class="comment">// time spent ouside the reality bubble it should be applied as a percentage of the total instead.</span></div>
<div class="line"><a name="l13782"></a><span class="lineno">13782</span>&#160;    <span class="keywordtype">bool</span> short_time_passed = turns_elapsed &lt;= <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3bad2f65381eed201fc526a0514a3ab7">charge_interval</a>;</div>
<div class="line"><a name="l13783"></a><span class="lineno">13783</span>&#160; </div>
<div class="line"><a name="l13784"></a><span class="lineno">13784</span>&#160;    <span class="keywordflow">if</span>( turns_elapsed &lt; 1 || ( short_time_passed &amp;&amp;</div>
<div class="line"><a name="l13785"></a><span class="lineno">13785</span>&#160;                               !<a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().charge_interval ) ) ) ) {</div>
<div class="line"><a name="l13786"></a><span class="lineno">13786</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a208a39ac375933fd4b33168ce26196c7">charge_rate</a>;</div>
<div class="line"><a name="l13787"></a><span class="lineno">13787</span>&#160;    }</div>
<div class="line"><a name="l13788"></a><span class="lineno">13788</span>&#160; </div>
<div class="line"><a name="l13789"></a><span class="lineno">13789</span>&#160;    <span class="comment">// If a long time passed, multiply the total by the efficiency rather than cancelling a charge.</span></div>
<div class="line"><a name="l13790"></a><span class="lineno">13790</span>&#160;    <span class="keywordtype">int</span> transfer_total = short_time_passed ? 1 :</div>
<div class="line"><a name="l13791"></a><span class="lineno">13791</span>&#160;                         ( turns_elapsed * 1.0f / <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3bad2f65381eed201fc526a0514a3ab7">charge_interval</a> ) * <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a3bad2f65381eed201fc526a0514a3ab7">charge_interval</a>;</div>
<div class="line"><a name="l13792"></a><span class="lineno">13792</span>&#160; </div>
<div class="line"><a name="l13793"></a><span class="lineno">13793</span>&#160;    <span class="keywordflow">if</span>( power_in ) {</div>
<div class="line"><a name="l13794"></a><span class="lineno">13794</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> battery_deficit = linked_veh.<a class="code" href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">discharge_battery</a>( transfer_total, <span class="keyword">true</span> );</div>
<div class="line"><a name="l13795"></a><span class="lineno">13795</span>&#160;        <span class="comment">// Around 85% efficient by default; a few of the discharges don&#39;t actually recharge</span></div>
<div class="line"><a name="l13796"></a><span class="lineno">13796</span>&#160;        <span class="keywordflow">if</span>( battery_deficit == 0 &amp;&amp; ( !short_time_passed || <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0, 1.0 ) &lt;= <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency ) ) {</div>
<div class="line"><a name="l13797"></a><span class="lineno">13797</span>&#160;            <a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( <a class="code" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() + transfer_total );</div>
<div class="line"><a name="l13798"></a><span class="lineno">13798</span>&#160;        }</div>
<div class="line"><a name="l13799"></a><span class="lineno">13799</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13800"></a><span class="lineno">13800</span>&#160;        <span class="comment">// Around 85% efficient by default; a few of the discharges don&#39;t actually charge</span></div>
<div class="line"><a name="l13801"></a><span class="lineno">13801</span>&#160;        <span class="keywordflow">if</span>( !short_time_passed || <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.0, 1.0 ) &lt;= <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().efficiency ) {</div>
<div class="line"><a name="l13802"></a><span class="lineno">13802</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> battery_surplus = linked_veh.<a class="code" href="classvehicle.html#af930d73448f446b3dc5fde3af07f90f9">charge_battery</a>( transfer_total, <span class="keyword">true</span> );</div>
<div class="line"><a name="l13803"></a><span class="lineno">13803</span>&#160;            <span class="keywordflow">if</span>( battery_surplus == 0 ) {</div>
<div class="line"><a name="l13804"></a><span class="lineno">13804</span>&#160;                <a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( <a class="code" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() - transfer_total );</div>
<div class="line"><a name="l13805"></a><span class="lineno">13805</span>&#160;            }</div>
<div class="line"><a name="l13806"></a><span class="lineno">13806</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13807"></a><span class="lineno">13807</span>&#160;            <span class="keyword">const</span> std::pair&lt;int, int&gt; linked_levels = linked_veh.<a class="code" href="classvehicle.html#a74a0e5a1d331e2d47d0147f7924a7a20">connected_battery_power_level</a>();</div>
<div class="line"><a name="l13808"></a><span class="lineno">13808</span>&#160;            <span class="keywordflow">if</span>( linked_levels.first &lt; linked_levels.second ) {</div>
<div class="line"><a name="l13809"></a><span class="lineno">13809</span>&#160;                <a class="code" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( <a class="code" href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() - transfer_total );</div>
<div class="line"><a name="l13810"></a><span class="lineno">13810</span>&#160;            }</div>
<div class="line"><a name="l13811"></a><span class="lineno">13811</span>&#160;        }</div>
<div class="line"><a name="l13812"></a><span class="lineno">13812</span>&#160;    }</div>
<div class="line"><a name="l13813"></a><span class="lineno">13813</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a208a39ac375933fd4b33168ce26196c7">charge_rate</a>;</div>
<div class="line"><a name="l13814"></a><span class="lineno">13814</span>&#160;}</div>
<div class="line"><a name="l13815"></a><span class="lineno">13815</span>&#160; </div>
<div class="line"><a name="l13816"></a><span class="lineno"><a class="line" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">13816</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2c2267bae25e5295d117dee7be60d286">item::reset_link</a>( <span class="keywordtype">bool</span> unspool_if_too_long, <a class="code" href="classCharacter.html">Character</a> *p, <span class="keywordtype">int</span> vpart_index,</div>
<div class="line"><a name="l13817"></a><span class="lineno">13817</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">bool</span> loose_message, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> cable_position )</div>
<div class="line"><a name="l13818"></a><span class="lineno">13818</span>&#160;{</div>
<div class="line"><a name="l13819"></a><span class="lineno">13819</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l13820"></a><span class="lineno">13820</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a> );</div>
<div class="line"><a name="l13821"></a><span class="lineno">13821</span>&#160;    }</div>
<div class="line"><a name="l13822"></a><span class="lineno">13822</span>&#160;    <span class="keywordflow">if</span>( unspool_if_too_long &amp;&amp; <a class="code" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">link_has_state</a>( <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea3a1722cb2f20e74ed2fff582d1c58424">link_state::needs_reeling</a> ) ) {</div>
<div class="line"><a name="l13823"></a><span class="lineno">13823</span>&#160;        <span class="comment">// Cables that need reeling should be reset with a reel_cable_activity_actor instead.</span></div>
<div class="line"><a name="l13824"></a><span class="lineno">13824</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13825"></a><span class="lineno">13825</span>&#160;    }</div>
<div class="line"><a name="l13826"></a><span class="lineno">13826</span>&#160; </div>
<div class="line"><a name="l13827"></a><span class="lineno">13827</span>&#160;    <span class="keywordflow">if</span>( vpart_index != -2 &amp;&amp; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_veh ) {</div>
<div class="line"><a name="l13828"></a><span class="lineno">13828</span>&#160;        <span class="keywordflow">if</span>( vpart_index == -1 ) {</div>
<div class="line"><a name="l13829"></a><span class="lineno">13829</span>&#160;            <a class="code" href="classvehicle.html">vehicle</a> *t_veh = <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>.<a class="code" href="classsafe__reference.html#abcb6bf6d2b4f72a7c8f6459877c10d0c">get</a>();</div>
<div class="line"><a name="l13830"></a><span class="lineno">13830</span>&#160;            <span class="comment">// Find the vp_part index the cable is linked to.</span></div>
<div class="line"><a name="l13831"></a><span class="lineno">13831</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a> ) {</div>
<div class="line"><a name="l13832"></a><span class="lineno">13832</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : t_veh-&gt;<a class="code" href="classvehicle.html#aab09d540376993e631367199ba1e6460">cable_ports</a> ) {</div>
<div class="line"><a name="l13833"></a><span class="lineno">13833</span>&#160;                    <span class="keywordflow">if</span>( t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx ).<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) {</div>
<div class="line"><a name="l13834"></a><span class="lineno">13834</span>&#160;                        vpart_index = idx;</div>
<div class="line"><a name="l13835"></a><span class="lineno">13835</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13836"></a><span class="lineno">13836</span>&#160;                    }</div>
<div class="line"><a name="l13837"></a><span class="lineno">13837</span>&#160;                }</div>
<div class="line"><a name="l13838"></a><span class="lineno">13838</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a> ) {</div>
<div class="line"><a name="l13839"></a><span class="lineno">13839</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idx : t_veh-&gt;<a class="code" href="classvehicle.html#ab24f511ea12640fe5f76e9609499ddd3">batteries</a> ) {</div>
<div class="line"><a name="l13840"></a><span class="lineno">13840</span>&#160;                    <span class="keywordflow">if</span>( t_veh-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( idx ).<a class="code" href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">mount</a> == <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) {</div>
<div class="line"><a name="l13841"></a><span class="lineno">13841</span>&#160;                        vpart_index = idx;</div>
<div class="line"><a name="l13842"></a><span class="lineno">13842</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13843"></a><span class="lineno">13843</span>&#160;                    }</div>
<div class="line"><a name="l13844"></a><span class="lineno">13844</span>&#160;                }</div>
<div class="line"><a name="l13845"></a><span class="lineno">13845</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().target == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> || <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().source == <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a> ) {</div>
<div class="line"><a name="l13846"></a><span class="lineno">13846</span>&#160;                vpart_index = t_veh-&gt;<a class="code" href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">part_at</a>( t_veh-&gt;<a class="code" href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">coord_translate</a>( <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().t_mount ) );</div>
<div class="line"><a name="l13847"></a><span class="lineno">13847</span>&#160;            }</div>
<div class="line"><a name="l13848"></a><span class="lineno">13848</span>&#160;        }</div>
<div class="line"><a name="l13849"></a><span class="lineno">13849</span>&#160;        <span class="keywordflow">if</span>( vpart_index != -1 ) {</div>
<div class="line"><a name="l13850"></a><span class="lineno">13850</span>&#160;            <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">t_veh</a>-&gt;<a class="code" href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">part</a>( vpart_index ).<a class="code" href="structvehicle__part.html#a6aac739840c1a6745ff549cbb1ab34b0">remove_flag</a>( <a class="code" href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40">vp_flag::linked_flag</a> );</div>
<div class="line"><a name="l13851"></a><span class="lineno">13851</span>&#160;        }</div>
<div class="line"><a name="l13852"></a><span class="lineno">13852</span>&#160;    }</div>
<div class="line"><a name="l13853"></a><span class="lineno">13853</span>&#160; </div>
<div class="line"><a name="l13854"></a><span class="lineno">13854</span>&#160;    <span class="keywordflow">if</span>( loose_message ) {</div>
<div class="line"><a name="l13855"></a><span class="lineno">13855</span>&#160;        <span class="keywordflow">if</span>( p != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13856"></a><span class="lineno">13856</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s has come loose.&quot;</span> ), <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13857"></a><span class="lineno">13857</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13858"></a><span class="lineno">13858</span>&#160;            <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( cable_position, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s has come loose.&quot;</span> ), <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13859"></a><span class="lineno">13859</span>&#160;        }</div>
<div class="line"><a name="l13860"></a><span class="lineno">13860</span>&#160;    }</div>
<div class="line"><a name="l13861"></a><span class="lineno">13861</span>&#160; </div>
<div class="line"><a name="l13862"></a><span class="lineno">13862</span>&#160;    <span class="keywordflow">if</span>( unspool_if_too_long &amp;&amp; <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">length</a> &gt; <a class="code" href="classitem.html#a03c95532604c7af8deb64205d69c088a">LINK_RESPOOL_THRESHOLD</a> ) {</div>
<div class="line"><a name="l13863"></a><span class="lineno">13863</span>&#160;        <span class="comment">// Cables that are too long need to be manually rewound before reuse.</span></div>
<div class="line"><a name="l13864"></a><span class="lineno">13864</span>&#160;        <a class="code" href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">link</a>().<a class="code" href="structitem_1_1link__data.html#a64ca11e0b5756edb11e6be50431b8f92">source</a> = <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea3a1722cb2f20e74ed2fff582d1c58424">link_state::needs_reeling</a>;</div>
<div class="line"><a name="l13865"></a><span class="lineno">13865</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13866"></a><span class="lineno">13866</span>&#160;    }</div>
<div class="line"><a name="l13867"></a><span class="lineno">13867</span>&#160; </div>
<div class="line"><a name="l13868"></a><span class="lineno">13868</span>&#160;    <span class="keywordflow">if</span>( loose_message &amp;&amp; p ) {</div>
<div class="line"><a name="l13869"></a><span class="lineno">13869</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You reel in the %s and wind it up.&quot;</span> ), <a class="code" href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">link_name</a>() );</div>
<div class="line"><a name="l13870"></a><span class="lineno">13870</span>&#160;    }</div>
<div class="line"><a name="l13871"></a><span class="lineno">13871</span>&#160; </div>
<div class="line"><a name="l13872"></a><span class="lineno">13872</span>&#160;    <a class="code" href="classitem.html#a7e23a1672b70221013c608311339cb09">link_</a>.reset();</div>
<div class="line"><a name="l13873"></a><span class="lineno">13873</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">cables</a>().<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l13874"></a><span class="lineno">13874</span>&#160;        <span class="comment">// If there are extensions, keep link active to maintain max_length.</span></div>
<div class="line"><a name="l13875"></a><span class="lineno">13875</span>&#160;        <a class="code" href="classitem.html#ae7552957ca969eb688de73e6d944069b">update_link_traits</a>();</div>
<div class="line"><a name="l13876"></a><span class="lineno">13876</span>&#160;    }</div>
<div class="line"><a name="l13877"></a><span class="lineno">13877</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a> );</div>
<div class="line"><a name="l13878"></a><span class="lineno">13878</span>&#160;}</div>
<div class="line"><a name="l13879"></a><span class="lineno">13879</span>&#160; </div>
<div class="line"><a name="l13880"></a><span class="lineno"><a class="line" href="classitem.html#a3b02534bd7fdd79279e05df97f6ea595">13880</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3b02534bd7fdd79279e05df97f6ea595">item::process_linked_item</a>( <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; <span class="comment">/*pos*/</span>,</div>
<div class="line"><a name="l13881"></a><span class="lineno">13881</span>&#160;                                <span class="keyword">const</span> <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a> required_state )</div>
<div class="line"><a name="l13882"></a><span class="lineno">13882</span>&#160;{</div>
<div class="line"><a name="l13883"></a><span class="lineno">13883</span>&#160;    <span class="keywordflow">if</span>( carrier == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l13884"></a><span class="lineno">13884</span>&#160;        <a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;cable&quot;</span> );</div>
<div class="line"><a name="l13885"></a><span class="lineno">13885</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13886"></a><span class="lineno">13886</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13887"></a><span class="lineno">13887</span>&#160;    }</div>
<div class="line"><a name="l13888"></a><span class="lineno">13888</span>&#160;    <span class="keywordtype">bool</span> has_connected_cable = carrier-&gt;<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <span class="stringliteral">&quot;can_link_up&quot;</span>, &amp;<a class="code" href="classitem.html#ab21800e6d065dc9649a86d586e879912">item::can_link_up</a>,</div>
<div class="line"><a name="l13889"></a><span class="lineno">13889</span>&#160;    [&amp;required_state]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l13890"></a><span class="lineno">13890</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">link_has_state</a>( required_state );</div>
<div class="line"><a name="l13891"></a><span class="lineno">13891</span>&#160;    } );</div>
<div class="line"><a name="l13892"></a><span class="lineno">13892</span>&#160;    <span class="keywordflow">if</span>( !has_connected_cable ) {</div>
<div class="line"><a name="l13893"></a><span class="lineno">13893</span>&#160;        <a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;cable&quot;</span> );</div>
<div class="line"><a name="l13894"></a><span class="lineno">13894</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13895"></a><span class="lineno">13895</span>&#160;    }</div>
<div class="line"><a name="l13896"></a><span class="lineno">13896</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13897"></a><span class="lineno">13897</span>&#160;}</div>
<div class="line"><a name="l13898"></a><span class="lineno">13898</span>&#160; </div>
<div class="line"><a name="l13899"></a><span class="lineno"><a class="line" href="classitem.html#adfda21d467ccf51697ef53023d31e3cf">13899</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#adfda21d467ccf51697ef53023d31e3cf">item::process_wet</a>( <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; <span class="comment">/*pos*/</span> )</div>
<div class="line"><a name="l13900"></a><span class="lineno">13900</span>&#160;{</div>
<div class="line"><a name="l13901"></a><span class="lineno">13901</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> == 0 ) {</div>
<div class="line"><a name="l13902"></a><span class="lineno">13902</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ) {</div>
<div class="line"><a name="l13903"></a><span class="lineno">13903</span>&#160;            <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a>, carrier );</div>
<div class="line"><a name="l13904"></a><span class="lineno">13904</span>&#160;        }</div>
<div class="line"><a name="l13905"></a><span class="lineno">13905</span>&#160;        <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a> );</div>
<div class="line"><a name="l13906"></a><span class="lineno">13906</span>&#160;        <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13907"></a><span class="lineno">13907</span>&#160;    }</div>
<div class="line"><a name="l13908"></a><span class="lineno">13908</span>&#160;    <span class="comment">// Always return true so our caller will bail out instead of processing us as a tool.</span></div>
<div class="line"><a name="l13909"></a><span class="lineno">13909</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13910"></a><span class="lineno">13910</span>&#160;}</div>
<div class="line"><a name="l13911"></a><span class="lineno">13911</span>&#160; </div>
<div class="line"><a name="l13912"></a><span class="lineno"><a class="line" href="classitem.html#a18f9f745718512cd69e207986548404f">13912</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a18f9f745718512cd69e207986548404f">item::process_tool</a>( <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l13913"></a><span class="lineno">13913</span>&#160;{</div>
<div class="line"><a name="l13914"></a><span class="lineno">13914</span>&#160;    <span class="comment">// FIXME: remove this once power armors don&#39;t need to be TOOL_ARMOR anymore</span></div>
<div class="line"><a name="l13915"></a><span class="lineno">13915</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a82e0833373b0141aec30768dfc349bbe">is_power_armor</a>() &amp;&amp; carrier &amp;&amp; carrier-&gt;<a class="code" href="classCharacter.html#a56f2f3861fc81b93acd2d45a5a92de41">can_interface_armor</a>() &amp;&amp; carrier-&gt;<a class="code" href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">has_power</a>() ) {</div>
<div class="line"><a name="l13916"></a><span class="lineno">13916</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13917"></a><span class="lineno">13917</span>&#160;    }</div>
<div class="line"><a name="l13918"></a><span class="lineno">13918</span>&#160; </div>
<div class="line"><a name="l13919"></a><span class="lineno">13919</span>&#160;    <span class="comment">// if insufficient available charges shutdown the tool</span></div>
<div class="line"><a name="l13920"></a><span class="lineno">13920</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;turns_per_charge &gt; 0 || <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw &gt; 0_W ) &amp;&amp;</div>
<div class="line"><a name="l13921"></a><span class="lineno">13921</span>&#160;        <a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( carrier, <span class="keyword">true</span> ) == 0 ) {</div>
<div class="line"><a name="l13922"></a><span class="lineno">13922</span>&#160;        <span class="keywordflow">if</span>( carrier &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l13923"></a><span class="lineno">13923</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need an UPS to run the %s!&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13924"></a><span class="lineno">13924</span>&#160;        }</div>
<div class="line"><a name="l13925"></a><span class="lineno">13925</span>&#160;        <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l13926"></a><span class="lineno">13926</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s ran out of energy!&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13927"></a><span class="lineno">13927</span>&#160;        }</div>
<div class="line"><a name="l13928"></a><span class="lineno">13928</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a>.has_value() ) {</div>
<div class="line"><a name="l13929"></a><span class="lineno">13929</span>&#160;            <a class="code" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">deactivate</a>( carrier );</div>
<div class="line"><a name="l13930"></a><span class="lineno">13930</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13931"></a><span class="lineno">13931</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13932"></a><span class="lineno">13932</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13933"></a><span class="lineno">13933</span>&#160;        }</div>
<div class="line"><a name="l13934"></a><span class="lineno">13934</span>&#160;    }</div>
<div class="line"><a name="l13935"></a><span class="lineno">13935</span>&#160; </div>
<div class="line"><a name="l13936"></a><span class="lineno">13936</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> = 0;</div>
<div class="line"><a name="l13937"></a><span class="lineno">13937</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;turns_per_charge &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l13938"></a><span class="lineno">13938</span>&#160;        to_turn&lt;int&gt;( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) % <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;turns_per_charge == 0 ) {</div>
<div class="line"><a name="l13939"></a><span class="lineno">13939</span>&#160;        <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), 1 );</div>
<div class="line"><a name="l13940"></a><span class="lineno">13940</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw &gt; 0_W ) {</div>
<div class="line"><a name="l13941"></a><span class="lineno">13941</span>&#160;        <span class="comment">// kJ (battery unit) per second</span></div>
<div class="line"><a name="l13942"></a><span class="lineno">13942</span>&#160;        <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> = <a class="code" href="namespaceunits.html#a087bd10745d16c81bbce09c6cc3f177e">units::to_kilowatt</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw );</div>
<div class="line"><a name="l13943"></a><span class="lineno">13943</span>&#160;        <span class="comment">// energy_bat remainder results in chance at additional charge/discharge</span></div>
<div class="line"><a name="l13944"></a><span class="lineno">13944</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> kw_in_mw = <a class="code" href="namespaceunits.html#acd2222df073481c31e22fc477a686c62">units::to_milliwatt</a>( 1_kW );</div>
<div class="line"><a name="l13945"></a><span class="lineno">13945</span>&#160;        <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> += <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( <a class="code" href="namespaceunits.html#acd2222df073481c31e22fc477a686c62">units::to_milliwatt</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw ) % kw_in_mw, kw_in_mw ) ? 1 : 0;</div>
<div class="line"><a name="l13946"></a><span class="lineno">13946</span>&#160;    }</div>
<div class="line"><a name="l13947"></a><span class="lineno">13947</span>&#160; </div>
<div class="line"><a name="l13948"></a><span class="lineno">13948</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a> &gt; 0 ) {</div>
<div class="line"><a name="l13949"></a><span class="lineno">13949</span>&#160;        <a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( <a class="code" href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">energy</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, carrier );</div>
<div class="line"><a name="l13950"></a><span class="lineno">13950</span>&#160;    }</div>
<div class="line"><a name="l13951"></a><span class="lineno">13951</span>&#160; </div>
<div class="line"><a name="l13952"></a><span class="lineno">13952</span>&#160;    <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#adf6e9885e97f8b5b4ebbb58f43885e02">tick</a>( carrier, *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l13953"></a><span class="lineno">13953</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13954"></a><span class="lineno">13954</span>&#160;}</div>
<div class="line"><a name="l13955"></a><span class="lineno">13955</span>&#160; </div>
<div class="line"><a name="l13956"></a><span class="lineno"><a class="line" href="classitem.html#abe2b7ef93e786d8c531815e4a8f92656">13956</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#abe2b7ef93e786d8c531815e4a8f92656">item::process_blackpowder_fouling</a>( <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l13957"></a><span class="lineno">13957</span>&#160;{</div>
<div class="line"><a name="l13958"></a><span class="lineno">13958</span>&#160;    <span class="comment">// rust is deterministic. 12 hours for first rust, then 24 (36 total), then 36 (72 total) and finally 48 (120 hours to go to XX)</span></div>
<div class="line"><a name="l13959"></a><span class="lineno">13959</span>&#160;    <span class="comment">// this speeds up by the amount the gun is dirty, 2-6x as fast depending on dirt level.</span></div>
<div class="line"><a name="l13960"></a><span class="lineno">13960</span>&#160;    <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;rust_timer&quot;</span>, <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;rust_timer&quot;</span>, 0 ) + 1 + <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;dirt&quot;</span>, 0 ) / 2000 );</div>
<div class="line"><a name="l13961"></a><span class="lineno">13961</span>&#160;    <span class="keywordtype">double</span> time_mult = 1.0 + ( 4.0 * <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() ) ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l13962"></a><span class="lineno">13962</span>&#160;                       ( <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() );</div>
<div class="line"><a name="l13963"></a><span class="lineno">13963</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">damage</a>() &lt; <a class="code" href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">max_damage</a>() &amp;&amp; <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;rust_timer&quot;</span>, 0 ) &gt; 43200.0 * time_mult ) {</div>
<div class="line"><a name="l13964"></a><span class="lineno">13964</span>&#160;        <a class="code" href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">inc_damage</a>();</div>
<div class="line"><a name="l13965"></a><span class="lineno">13965</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;rust_timer&quot;</span>, 0 );</div>
<div class="line"><a name="l13966"></a><span class="lineno">13966</span>&#160;        <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l13967"></a><span class="lineno">13967</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s rusts due to corrosive powder fouling.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13968"></a><span class="lineno">13968</span>&#160;        }</div>
<div class="line"><a name="l13969"></a><span class="lineno">13969</span>&#160;    }</div>
<div class="line"><a name="l13970"></a><span class="lineno">13970</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13971"></a><span class="lineno">13971</span>&#160;}</div>
<div class="line"><a name="l13972"></a><span class="lineno">13972</span>&#160; </div>
<div class="line"><a name="l13973"></a><span class="lineno"><a class="line" href="classitem.html#a2b487f7360ef904c8097cbdf56684f34">13973</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2b487f7360ef904c8097cbdf56684f34">item::process_gun_cooling</a>( <a class="code" href="classCharacter.html">Character</a> *carrier )</div>
<div class="line"><a name="l13974"></a><span class="lineno">13974</span>&#160;{</div>
<div class="line"><a name="l13975"></a><span class="lineno">13975</span>&#160;    <span class="keywordtype">double</span> heat = <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gun_heat&quot;</span>, 0 );</div>
<div class="line"><a name="l13976"></a><span class="lineno">13976</span>&#160;    <span class="keywordtype">double</span> overheat_modifier = 0;</div>
<div class="line"><a name="l13977"></a><span class="lineno">13977</span>&#160;    <span class="keywordtype">float</span> overheat_multiplier = 1.0f;</div>
<div class="line"><a name="l13978"></a><span class="lineno">13978</span>&#160;    <span class="keywordtype">double</span> cooling_modifier = 0;</div>
<div class="line"><a name="l13979"></a><span class="lineno">13979</span>&#160;    <span class="keywordtype">float</span> cooling_multiplier = 1.0f;</div>
<div class="line"><a name="l13980"></a><span class="lineno">13980</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l13981"></a><span class="lineno">13981</span>&#160;        overheat_modifier += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overheat_threshold_modifier;</div>
<div class="line"><a name="l13982"></a><span class="lineno">13982</span>&#160;        overheat_multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;overheat_threshold_multiplier;</div>
<div class="line"><a name="l13983"></a><span class="lineno">13983</span>&#160;        cooling_modifier += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;cooling_value_modifier;</div>
<div class="line"><a name="l13984"></a><span class="lineno">13984</span>&#160;        cooling_multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;cooling_value_multiplier;</div>
<div class="line"><a name="l13985"></a><span class="lineno">13985</span>&#160;    }</div>
<div class="line"><a name="l13986"></a><span class="lineno">13986</span>&#160;    <span class="keywordtype">double</span> threshold = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;overheat_threshold * overheat_multiplier ) +</div>
<div class="line"><a name="l13987"></a><span class="lineno">13987</span>&#160;                                 overheat_modifier, 5.0 );</div>
<div class="line"><a name="l13988"></a><span class="lineno">13988</span>&#160;    heat -= <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;cooling_value * cooling_multiplier ) + cooling_modifier, 0.5 );</div>
<div class="line"><a name="l13989"></a><span class="lineno">13989</span>&#160;    <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;gun_heat&quot;</span>, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, heat ) );</div>
<div class="line"><a name="l13990"></a><span class="lineno">13990</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.count( <a class="code" href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">fault_overheat_safety</a> ) &amp;&amp; heat &lt; threshold * 0.2 ) {</div>
<div class="line"><a name="l13991"></a><span class="lineno">13991</span>&#160;        <a class="code" href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">faults</a>.erase( <a class="code" href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">fault_overheat_safety</a> );</div>
<div class="line"><a name="l13992"></a><span class="lineno">13992</span>&#160;        <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l13993"></a><span class="lineno">13993</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s beeps as its cooling cycle concludes.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l13994"></a><span class="lineno">13994</span>&#160;        }</div>
<div class="line"><a name="l13995"></a><span class="lineno">13995</span>&#160;    }</div>
<div class="line"><a name="l13996"></a><span class="lineno">13996</span>&#160;    <span class="keywordflow">if</span>( carrier ) {</div>
<div class="line"><a name="l13997"></a><span class="lineno">13997</span>&#160;        <span class="keywordflow">if</span>( heat &gt; threshold ) {</div>
<div class="line"><a name="l13998"></a><span class="lineno">13998</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l13999"></a><span class="lineno">13999</span>&#160;                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can feel the struggling systems of your %s beneath the blare of the overheat alarm.&quot;</span> ),</div>
<div class="line"><a name="l14000"></a><span class="lineno">14000</span>&#160;                                        <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14001"></a><span class="lineno">14001</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( heat &gt; threshold * 0.8 ) {</div>
<div class="line"><a name="l14002"></a><span class="lineno">14002</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s frantically sounds an overheat alarm.&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14003"></a><span class="lineno">14003</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( heat &gt; threshold * 0.6 ) {</div>
<div class="line"><a name="l14004"></a><span class="lineno">14004</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s sounds a heat warning chime!&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14005"></a><span class="lineno">14005</span>&#160;        }</div>
<div class="line"><a name="l14006"></a><span class="lineno">14006</span>&#160;    }</div>
<div class="line"><a name="l14007"></a><span class="lineno">14007</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14008"></a><span class="lineno">14008</span>&#160;}</div>
<div class="line"><a name="l14009"></a><span class="lineno">14009</span>&#160; </div>
<div class="line"><a name="l14010"></a><span class="lineno"><a class="line" href="classitem.html#afcdf10dcfc610891ac9aef2b5157abc4">14010</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#afcdf10dcfc610891ac9aef2b5157abc4">item::process</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keywordtype">float</span> insulation,</div>
<div class="line"><a name="l14011"></a><span class="lineno">14011</span>&#160;                    <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5d">temperature_flag</a> flag, <span class="keywordtype">float</span> spoil_multiplier_parent, <span class="keywordtype">bool</span> recursive )</div>
<div class="line"><a name="l14012"></a><span class="lineno">14012</span>&#160;{</div>
<div class="line"><a name="l14013"></a><span class="lineno">14013</span>&#160;    <a class="code" href="classitem.html#a3a1018ec6a2d3b2242c9df121d67f408">process_relic</a>( carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14014"></a><span class="lineno">14014</span>&#160;    <span class="keywordflow">if</span>( recursive ) {</div>
<div class="line"><a name="l14015"></a><span class="lineno">14015</span>&#160;        <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a6ea82a5299d53817d1e352b30acf3fca">process</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a1f98e4086129c4db4a4903e7a6bdac72">insulation_factor</a> * insulation, flag,</div>
<div class="line"><a name="l14016"></a><span class="lineno">14016</span>&#160;                          spoil_multiplier_parent );</div>
<div class="line"><a name="l14017"></a><span class="lineno">14017</span>&#160;    }</div>
<div class="line"><a name="l14018"></a><span class="lineno">14018</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6f7e133c24405fba732477668ca19da3">process_internal</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, insulation, flag, spoil_multiplier_parent );</div>
<div class="line"><a name="l14019"></a><span class="lineno">14019</span>&#160;}</div>
<div class="line"><a name="l14020"></a><span class="lineno">14020</span>&#160; </div>
<div class="line"><a name="l14021"></a><span class="lineno"><a class="line" href="classitem.html#af9135f611a5e339f43eee1124ae2b752">14021</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#af9135f611a5e339f43eee1124ae2b752">item::leak</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classitem__pocket.html">item_pocket</a> *pocke )</div>
<div class="line"><a name="l14022"></a><span class="lineno">14022</span>&#160;{</div>
<div class="line"><a name="l14023"></a><span class="lineno">14023</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a name="l14024"></a><span class="lineno">14024</span>&#160;        <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ae10849084bbb8445d7882fa9163def6f">leak</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, pocke );</div>
<div class="line"><a name="l14025"></a><span class="lineno">14025</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14026"></a><span class="lineno">14026</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( this-&gt;<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !this-&gt;<a class="code" href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">is_frozen_liquid</a>() ) {</div>
<div class="line"><a name="l14027"></a><span class="lineno">14027</span>&#160;        <span class="keywordflow">if</span>( pocke ) {</div>
<div class="line"><a name="l14028"></a><span class="lineno">14028</span>&#160;            <span class="keywordflow">if</span>( pocke-&gt;<a class="code" href="classitem__pocket.html#a10fbcc4c4000bcfa5539059a03b6a0ca">watertight</a>() ) {</div>
<div class="line"><a name="l14029"></a><span class="lineno">14029</span>&#160;                <a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a61c1220c2f02301b1f4e854b0dd6a670">flag_FROM_FROZEN_LIQUID</a> );</div>
<div class="line"><a name="l14030"></a><span class="lineno">14030</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14031"></a><span class="lineno">14031</span>&#160;            }</div>
<div class="line"><a name="l14032"></a><span class="lineno">14032</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14033"></a><span class="lineno">14033</span>&#160;        }</div>
<div class="line"><a name="l14034"></a><span class="lineno">14034</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14035"></a><span class="lineno">14035</span>&#160;    }</div>
<div class="line"><a name="l14036"></a><span class="lineno">14036</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14037"></a><span class="lineno">14037</span>&#160;}</div>
<div class="line"><a name="l14038"></a><span class="lineno">14038</span>&#160; </div>
<div class="line"><a name="l14039"></a><span class="lineno"><a class="line" href="classitem.html#af93f65bed06f958b223829e82e9ea4ce">14039</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#af93f65bed06f958b223829e82e9ea4ce">item::set_last_temp_check</a>( <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;pt )</div>
<div class="line"><a name="l14040"></a><span class="lineno">14040</span>&#160;{</div>
<div class="line"><a name="l14041"></a><span class="lineno">14041</span>&#160;    <a class="code" href="classitem.html#ae3e8157a5be5998c70229adecfea520e">last_temp_check</a> = pt;</div>
<div class="line"><a name="l14042"></a><span class="lineno">14042</span>&#160;}</div>
<div class="line"><a name="l14043"></a><span class="lineno">14043</span>&#160; </div>
<div class="line"><a name="l14044"></a><span class="lineno"><a class="line" href="classitem.html#a6f7e133c24405fba732477668ca19da3">14044</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a6f7e133c24405fba732477668ca19da3">item::process_internal</a>( <a class="code" href="classmap.html">map</a> &amp;here, <a class="code" href="classCharacter.html">Character</a> *carrier, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>,</div>
<div class="line"><a name="l14045"></a><span class="lineno">14045</span>&#160;                             <span class="keywordtype">float</span> insulation, <span class="keyword">const</span> <a class="code" href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5d">temperature_flag</a> flag, <span class="keywordtype">float</span> spoil_modifier )</div>
<div class="line"><a name="l14046"></a><span class="lineno">14046</span>&#160;{</div>
<div class="line"><a name="l14047"></a><span class="lineno">14047</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a675cd52ea4fa28803363b698896db8ca">ethereal</a> ) {</div>
<div class="line"><a name="l14048"></a><span class="lineno">14048</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;ethereal&quot;</span> ) ) {</div>
<div class="line"><a name="l14049"></a><span class="lineno">14049</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14050"></a><span class="lineno">14050</span>&#160;        }</div>
<div class="line"><a name="l14051"></a><span class="lineno">14051</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;ethereal&quot;</span>, std::stoi( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;ethereal&quot;</span> ) ) - 1 );</div>
<div class="line"><a name="l14052"></a><span class="lineno">14052</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> processed = std::stoi( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;ethereal&quot;</span> ) ) &lt;= 0;</div>
<div class="line"><a name="l14053"></a><span class="lineno">14053</span>&#160;        <span class="keywordflow">if</span>( processed &amp;&amp; carrier != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l14054"></a><span class="lineno">14054</span>&#160;            carrier-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s disappears!&quot;</span> ), <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14055"></a><span class="lineno">14055</span>&#160;        }</div>
<div class="line"><a name="l14056"></a><span class="lineno">14056</span>&#160;        <span class="keywordflow">return</span> processed;</div>
<div class="line"><a name="l14057"></a><span class="lineno">14057</span>&#160;    }</div>
<div class="line"><a name="l14058"></a><span class="lineno">14058</span>&#160; </div>
<div class="line"><a name="l14059"></a><span class="lineno">14059</span>&#160;    <span class="comment">// How this works: it checks what kind of processing has to be done</span></div>
<div class="line"><a name="l14060"></a><span class="lineno">14060</span>&#160;    <span class="comment">// (e.g. for food, for drying towels, lit cigars), and if that matches,</span></div>
<div class="line"><a name="l14061"></a><span class="lineno">14061</span>&#160;    <span class="comment">// call the processing function. If that function returns true, the item</span></div>
<div class="line"><a name="l14062"></a><span class="lineno">14062</span>&#160;    <span class="comment">// has been destroyed by the processing, so no further processing has to be</span></div>
<div class="line"><a name="l14063"></a><span class="lineno">14063</span>&#160;    <span class="comment">// done.</span></div>
<div class="line"><a name="l14064"></a><span class="lineno">14064</span>&#160;    <span class="comment">// Otherwise processing continues. This allows items that are processed as</span></div>
<div class="line"><a name="l14065"></a><span class="lineno">14065</span>&#160;    <span class="comment">// food and as litcig and as ...</span></div>
<div class="line"><a name="l14066"></a><span class="lineno">14066</span>&#160; </div>
<div class="line"><a name="l14067"></a><span class="lineno">14067</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &gt; 0 ) {</div>
<div class="line"><a name="l14068"></a><span class="lineno">14068</span>&#160;        <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> -= 1;</div>
<div class="line"><a name="l14069"></a><span class="lineno">14069</span>&#160;    }</div>
<div class="line"><a name="l14070"></a><span class="lineno">14070</span>&#160; </div>
<div class="line"><a name="l14071"></a><span class="lineno">14071</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">has_link_data</a>() ) {</div>
<div class="line"><a name="l14072"></a><span class="lineno">14072</span>&#160;        <a class="code" href="classitem.html#a9cfea3be1f920a3ae56a1dd1e426f7c7">process_link</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14073"></a><span class="lineno">14073</span>&#160;    }</div>
<div class="line"><a name="l14074"></a><span class="lineno">14074</span>&#160; </div>
<div class="line"><a name="l14075"></a><span class="lineno">14075</span>&#160;    <span class="comment">// Remaining stuff is only done for active items.</span></div>
<div class="line"><a name="l14076"></a><span class="lineno">14076</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l14077"></a><span class="lineno">14077</span>&#160; </div>
<div class="line"><a name="l14078"></a><span class="lineno">14078</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">wetness</a> &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aac4dd48e6bf871e1d3d952771499ec13">flag_WATER_BREAK</a> ) ) {</div>
<div class="line"><a name="l14079"></a><span class="lineno">14079</span>&#160;            <a class="code" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">deactivate</a>();</div>
<div class="line"><a name="l14080"></a><span class="lineno">14080</span>&#160;            <a class="code" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">set_fault</a>( <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code" href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a>( std::string( <span class="stringliteral">&quot;wet&quot;</span> ) ) ) );</div>
<div class="line"><a name="l14081"></a><span class="lineno">14081</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afc6a264fae40049bceeea9bd1e1b6fb7">flag_ELECTRONIC</a> ) ) {</div>
<div class="line"><a name="l14082"></a><span class="lineno">14082</span>&#160;                <a class="code" href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">set_fault</a>( <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( <a class="code" href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a>( std::string( <span class="stringliteral">&quot;shorted&quot;</span> ) ) ) );</div>
<div class="line"><a name="l14083"></a><span class="lineno">14083</span>&#160;            }</div>
<div class="line"><a name="l14084"></a><span class="lineno">14084</span>&#160;        }</div>
<div class="line"><a name="l14085"></a><span class="lineno">14085</span>&#160; </div>
<div class="line"><a name="l14086"></a><span class="lineno">14086</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> &gt; 0 ) {</div>
<div class="line"><a name="l14087"></a><span class="lineno">14087</span>&#160;            <a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a>--;</div>
<div class="line"><a name="l14088"></a><span class="lineno">14088</span>&#160;        }</div>
<div class="line"><a name="l14089"></a><span class="lineno">14089</span>&#160; </div>
<div class="line"><a name="l14090"></a><span class="lineno">14090</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> &gt;= <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> ) {</div>
<div class="line"><a name="l14091"></a><span class="lineno">14091</span>&#160;            <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14092"></a><span class="lineno">14092</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">countdown_action</a> ) {</div>
<div class="line"><a name="l14093"></a><span class="lineno">14093</span>&#160;                <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">countdown_action</a>.<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( carrier, *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14094"></a><span class="lineno">14094</span>&#160;            }</div>
<div class="line"><a name="l14095"></a><span class="lineno">14095</span>&#160;            <a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#adb38241f6561412667ab9be5fd29fdce">calendar::turn_max</a>;</div>
<div class="line"><a name="l14096"></a><span class="lineno">14096</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ) {</div>
<div class="line"><a name="l14097"></a><span class="lineno">14097</span>&#160;                <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a>, carrier );</div>
<div class="line"><a name="l14098"></a><span class="lineno">14098</span>&#160; </div>
<div class="line"><a name="l14099"></a><span class="lineno">14099</span>&#160;                <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <a class="code" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">needs_processing</a>();</div>
<div class="line"><a name="l14100"></a><span class="lineno">14100</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14101"></a><span class="lineno">14101</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14102"></a><span class="lineno">14102</span>&#160;            }</div>
<div class="line"><a name="l14103"></a><span class="lineno">14103</span>&#160;        }</div>
<div class="line"><a name="l14104"></a><span class="lineno">14104</span>&#160; </div>
<div class="line"><a name="l14105"></a><span class="lineno">14105</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">emit_id</a> &amp;e : <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ac93d9775de15087ba59da8d48e89cb6f">emits</a> ) {</div>
<div class="line"><a name="l14106"></a><span class="lineno">14106</span>&#160;            here.<a class="code" href="classmap.html#a150f1b826e0e2722ccf76dbdac136ffd">emit_field</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, e );</div>
<div class="line"><a name="l14107"></a><span class="lineno">14107</span>&#160;        }</div>
<div class="line"><a name="l14108"></a><span class="lineno">14108</span>&#160; </div>
<div class="line"><a name="l14109"></a><span class="lineno">14109</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> ) {</div>
<div class="line"><a name="l14110"></a><span class="lineno">14110</span>&#160;            <span class="comment">// `mark` becomes true if any of the flags that require processing are present</span></div>
<div class="line"><a name="l14111"></a><span class="lineno">14111</span>&#160;            <span class="keywordtype">bool</span> mark = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14112"></a><span class="lineno">14112</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> mark_flag = [&amp;mark]() {</div>
<div class="line"><a name="l14113"></a><span class="lineno">14113</span>&#160;                mark = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14114"></a><span class="lineno">14114</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14115"></a><span class="lineno">14115</span>&#160;            };</div>
<div class="line"><a name="l14116"></a><span class="lineno">14116</span>&#160; </div>
<div class="line"><a name="l14117"></a><span class="lineno">14117</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab929c3f9e2363fbe8eff00ba7cbc7203">flag_FAKE_SMOKE</a> ) &amp;&amp; mark_flag() &amp;&amp; <a class="code" href="classitem.html#a40feb41edc16a688462ef807328cf90d">process_fake_smoke</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14118"></a><span class="lineno">14118</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14119"></a><span class="lineno">14119</span>&#160;            }</div>
<div class="line"><a name="l14120"></a><span class="lineno">14120</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6d39c77be08ccc6d143a1ea5da581656">flag_FAKE_MILL</a> ) &amp;&amp; mark_flag() &amp;&amp; <a class="code" href="classitem.html#a471e1b31ebc2a1ef705c421f8f529705">process_fake_mill</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14121"></a><span class="lineno">14121</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14122"></a><span class="lineno">14122</span>&#160;            }</div>
<div class="line"><a name="l14123"></a><span class="lineno">14123</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">is_corpse</a>() &amp;&amp; mark_flag() &amp;&amp; <a class="code" href="classitem.html#a3b02fb95d6f0e4736ae26608987e533d">process_corpse</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14124"></a><span class="lineno">14124</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14125"></a><span class="lineno">14125</span>&#160;            }</div>
<div class="line"><a name="l14126"></a><span class="lineno">14126</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a> ) &amp;&amp; mark_flag() &amp;&amp; <a class="code" href="classitem.html#adfda21d467ccf51697ef53023d31e3cf">process_wet</a>( carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14127"></a><span class="lineno">14127</span>&#160;                <span class="comment">// Drying items are never destroyed, but we want to exit so they don&#39;t get processed as tools.</span></div>
<div class="line"><a name="l14128"></a><span class="lineno">14128</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14129"></a><span class="lineno">14129</span>&#160;            }</div>
<div class="line"><a name="l14130"></a><span class="lineno">14130</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a> ) &amp;&amp; mark_flag() &amp;&amp; <a class="code" href="classitem.html#af90bc7e529fd4f0a23b84ff77b5c9c8e">process_litcig</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14131"></a><span class="lineno">14131</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14132"></a><span class="lineno">14132</span>&#160;            }</div>
<div class="line"><a name="l14133"></a><span class="lineno">14133</span>&#160;            <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a893579a59613d945262c9cf9d9e8890c">flag_WATER_EXTINGUISH</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6ad3ff7f192f86d4b2b41331115e7e8c">flag_WIND_EXTINGUISH</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l14134"></a><span class="lineno">14134</span>&#160;                mark_flag() &amp;&amp; <a class="code" href="classitem.html#af53663fa61792f964d7e1f4e9b11e450">process_extinguish</a>( here, carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l14135"></a><span class="lineno">14135</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14136"></a><span class="lineno">14136</span>&#160;            }</div>
<div class="line"><a name="l14137"></a><span class="lineno">14137</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a99021b3b0d6f54bbcd73ed3ff33a1bb7">flag_CABLE_SPOOL</a> ) &amp;&amp; mark_flag() ) {</div>
<div class="line"><a name="l14138"></a><span class="lineno">14138</span>&#160;                <span class="comment">// DO NOT process this as a tool! It really isn&#39;t!</span></div>
<div class="line"><a name="l14139"></a><span class="lineno">14139</span>&#160;                <span class="comment">// Cables have been reworked and shouldn&#39;t be active items anymore.</span></div>
<div class="line"><a name="l14140"></a><span class="lineno">14140</span>&#160;                <a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14141"></a><span class="lineno">14141</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14142"></a><span class="lineno">14142</span>&#160;            }</div>
<div class="line"><a name="l14143"></a><span class="lineno">14143</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a> ) &amp;&amp; mark_flag() ) {</div>
<div class="line"><a name="l14144"></a><span class="lineno">14144</span>&#160;                <span class="comment">// DO NOT process this as a tool! It really isn&#39;t!</span></div>
<div class="line"><a name="l14145"></a><span class="lineno">14145</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3b02534bd7fdd79279e05df97f6ea595">process_linked_item</a>( carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea7b0746dabfaed032913530c495453f0f">link_state::ups</a> );</div>
<div class="line"><a name="l14146"></a><span class="lineno">14146</span>&#160;            }</div>
<div class="line"><a name="l14147"></a><span class="lineno">14147</span>&#160;            <span class="keywordflow">if</span>( ( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a05caeb5cb599136cfae695a27f316db7">flag_SOLARPACK</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a> ) ) &amp;&amp; mark_flag() ) {</div>
<div class="line"><a name="l14148"></a><span class="lineno">14148</span>&#160;                <span class="comment">// DO NOT process this as a tool! It really isn&#39;t!</span></div>
<div class="line"><a name="l14149"></a><span class="lineno">14149</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3b02534bd7fdd79279e05df97f6ea595">process_linked_item</a>( carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ead96949e74b3f41ce25890bb1115bf5c6">link_state::solarpack</a> );</div>
<div class="line"><a name="l14150"></a><span class="lineno">14150</span>&#160;            }</div>
<div class="line"><a name="l14151"></a><span class="lineno">14151</span>&#160; </div>
<div class="line"><a name="l14152"></a><span class="lineno">14152</span>&#160;            <span class="keywordflow">if</span>( !mark ) {</div>
<div class="line"><a name="l14153"></a><span class="lineno">14153</span>&#160;                <span class="comment">// no flag checks above were successful and no additional processing logic</span></div>
<div class="line"><a name="l14154"></a><span class="lineno">14154</span>&#160;                <span class="comment">// that could&#39;ve changed flags was executed</span></div>
<div class="line"><a name="l14155"></a><span class="lineno">14155</span>&#160;                <a class="code" href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">requires_tags_processing</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14156"></a><span class="lineno">14156</span>&#160;            }</div>
<div class="line"><a name="l14157"></a><span class="lineno">14157</span>&#160;        }</div>
<div class="line"><a name="l14158"></a><span class="lineno">14158</span>&#160; </div>
<div class="line"><a name="l14159"></a><span class="lineno">14159</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a59a03649a0636c70e776054db688564a">is_tool</a>() ) {</div>
<div class="line"><a name="l14160"></a><span class="lineno">14160</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a18f9f745718512cd69e207986548404f">process_tool</a>( carrier, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14161"></a><span class="lineno">14161</span>&#160;        }</div>
<div class="line"><a name="l14162"></a><span class="lineno">14162</span>&#160;        <span class="comment">// All foods that go bad have temperature</span></div>
<div class="line"><a name="l14163"></a><span class="lineno">14163</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">has_temperature</a>() &amp;&amp;</div>
<div class="line"><a name="l14164"></a><span class="lineno">14164</span>&#160;            <a class="code" href="classitem.html#a4b5324bb0d76a4fd22944e9fc978bbc8">process_temperature_rot</a>( insulation, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, here, carrier, flag, spoil_modifier ) ) {</div>
<div class="line"><a name="l14165"></a><span class="lineno">14165</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l14166"></a><span class="lineno">14166</span>&#160;                here.<a class="code" href="classmap.html#a5690822d7d509cd4dc51ff92064353fe">rotten_item_spawn</a>( *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14167"></a><span class="lineno">14167</span>&#160;            }</div>
<div class="line"><a name="l14168"></a><span class="lineno">14168</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14169"></a><span class="lineno">14169</span>&#160;        }</div>
<div class="line"><a name="l14170"></a><span class="lineno">14170</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14171"></a><span class="lineno">14171</span>&#160;        <span class="comment">// guns are never active so we only need to tick this on inactive items. For performance reasons.</span></div>
<div class="line"><a name="l14172"></a><span class="lineno">14172</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">has_fault_flag</a>( <a class="code" href="item_8cpp.html#ae1a1f893ca0a1908ca7906a1b86e4865">flag_BLACKPOWDER_FOULING_DAMAGE</a> ) ) {</div>
<div class="line"><a name="l14173"></a><span class="lineno">14173</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#abe2b7ef93e786d8c531815e4a8f92656">process_blackpowder_fouling</a>( carrier );</div>
<div class="line"><a name="l14174"></a><span class="lineno">14174</span>&#160;        }</div>
<div class="line"><a name="l14175"></a><span class="lineno">14175</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gun_heat&quot;</span>, 0 ) &gt; 0 ) {</div>
<div class="line"><a name="l14176"></a><span class="lineno">14176</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classitem.html#a2b487f7360ef904c8097cbdf56684f34">process_gun_cooling</a>( carrier );</div>
<div class="line"><a name="l14177"></a><span class="lineno">14177</span>&#160;        }</div>
<div class="line"><a name="l14178"></a><span class="lineno">14178</span>&#160;    }</div>
<div class="line"><a name="l14179"></a><span class="lineno">14179</span>&#160; </div>
<div class="line"><a name="l14180"></a><span class="lineno">14180</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14181"></a><span class="lineno">14181</span>&#160;}</div>
<div class="line"><a name="l14182"></a><span class="lineno">14182</span>&#160; </div>
<div class="line"><a name="l14183"></a><span class="lineno"><a class="line" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">14183</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">item::mod_charges</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l14184"></a><span class="lineno">14184</span>&#160;{</div>
<div class="line"><a name="l14185"></a><span class="lineno">14185</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a310539e1dbfb640f2b23796a40c881f2">has_infinite_charges</a>() ) {</div>
<div class="line"><a name="l14186"></a><span class="lineno">14186</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l14187"></a><span class="lineno">14187</span>&#160;    }</div>
<div class="line"><a name="l14188"></a><span class="lineno">14188</span>&#160; </div>
<div class="line"><a name="l14189"></a><span class="lineno">14189</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l14190"></a><span class="lineno">14190</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to remove %s by charges, but item is not counted by charges.&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14191"></a><span class="lineno">14191</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &lt; 0 &amp;&amp; <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> + <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &lt; 0 ) {</div>
<div class="line"><a name="l14192"></a><span class="lineno">14192</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to remove charges that do not exist, removing maximum available charges instead.&quot;</span> );</div>
<div class="line"><a name="l14193"></a><span class="lineno">14193</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l14194"></a><span class="lineno">14194</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &gt; 0 &amp;&amp; <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt;= <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a> - <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) {</div>
<div class="line"><a name="l14195"></a><span class="lineno">14195</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a> - 1; <span class="comment">// Highly unlikely, but finite charges should not become infinite.</span></div>
<div class="line"><a name="l14196"></a><span class="lineno">14196</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14197"></a><span class="lineno">14197</span>&#160;        <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l14198"></a><span class="lineno">14198</span>&#160;    }</div>
<div class="line"><a name="l14199"></a><span class="lineno">14199</span>&#160;}</div>
<div class="line"><a name="l14200"></a><span class="lineno">14200</span>&#160; </div>
<div class="line"><a name="l14201"></a><span class="lineno"><a class="line" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">14201</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14202"></a><span class="lineno">14202</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14203"></a><span class="lineno">14203</span>&#160;    <span class="keywordflow">return</span> !!<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a>;</div>
<div class="line"><a name="l14204"></a><span class="lineno">14204</span>&#160;}</div>
<div class="line"><a name="l14205"></a><span class="lineno">14205</span>&#160; </div>
<div class="line"><a name="l14206"></a><span class="lineno"><a class="line" href="classitem.html#af1a726363affb2862b7c3035431b69b6">14206</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classitem.html#af1a726363affb2862b7c3035431b69b6">item::get_plant_epoch</a>( <span class="keywordtype">int</span> num_epochs )<span class="keyword"> const</span></div>
<div class="line"><a name="l14207"></a><span class="lineno">14207</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14208"></a><span class="lineno">14208</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a> ) {</div>
<div class="line"><a name="l14209"></a><span class="lineno">14209</span>&#160;        <span class="keywordflow">return</span> 0_turns;</div>
<div class="line"><a name="l14210"></a><span class="lineno">14210</span>&#160;    }</div>
<div class="line"><a name="l14211"></a><span class="lineno">14211</span>&#160;    <span class="comment">// Growing times have been based around real world season length rather than</span></div>
<div class="line"><a name="l14212"></a><span class="lineno">14212</span>&#160;    <span class="comment">// the default in-game season length to give</span></div>
<div class="line"><a name="l14213"></a><span class="lineno">14213</span>&#160;    <span class="comment">// more accuracy for longer season lengths</span></div>
<div class="line"><a name="l14214"></a><span class="lineno">14214</span>&#160;    <span class="comment">// Also note that seed-&gt;grow is the time it takes from seeding to harvest, this is</span></div>
<div class="line"><a name="l14215"></a><span class="lineno">14215</span>&#160;    <span class="comment">// divided by number of growth stages (usually 3) to get the time it takes from one plant state to the next.</span></div>
<div class="line"><a name="l14216"></a><span class="lineno">14216</span>&#160;    <span class="comment">// TODO: move this into the islot_seed</span></div>
<div class="line"><a name="l14217"></a><span class="lineno">14217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a>-&gt;grow * <a class="code" href="namespacecalendar.html#aef148fa54dcd19dba93471745bb00975">calendar::season_ratio</a>() / num_epochs;</div>
<div class="line"><a name="l14218"></a><span class="lineno">14218</span>&#160;}</div>
<div class="line"><a name="l14219"></a><span class="lineno">14219</span>&#160; </div>
<div class="line"><a name="l14220"></a><span class="lineno"><a class="line" href="classitem.html#a51f4fe9cc7d7089fce3faabf483c0bce">14220</a></span>&#160;std::string <a class="code" href="classitem.html#a51f4fe9cc7d7089fce3faabf483c0bce">item::get_plant_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14221"></a><span class="lineno">14221</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14222"></a><span class="lineno">14222</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a> ) {</div>
<div class="line"><a name="l14223"></a><span class="lineno">14223</span>&#160;        <span class="keywordflow">return</span> std::string{};</div>
<div class="line"><a name="l14224"></a><span class="lineno">14224</span>&#160;    }</div>
<div class="line"><a name="l14225"></a><span class="lineno">14225</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">seed</a>-&gt;plant_name.translated();</div>
<div class="line"><a name="l14226"></a><span class="lineno">14226</span>&#160;}</div>
<div class="line"><a name="l14227"></a><span class="lineno">14227</span>&#160; </div>
<div class="line"><a name="l14228"></a><span class="lineno"><a class="line" href="classitem.html#ad340c283789ac6bd8578a16e8343d893">14228</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ad340c283789ac6bd8578a16e8343d893">item::is_dangerous</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14229"></a><span class="lineno">14229</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14230"></a><span class="lineno">14230</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a> ) ) {</div>
<div class="line"><a name="l14231"></a><span class="lineno">14231</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14232"></a><span class="lineno">14232</span>&#160;    }</div>
<div class="line"><a name="l14233"></a><span class="lineno">14233</span>&#160; </div>
<div class="line"><a name="l14234"></a><span class="lineno">14234</span>&#160;    <span class="comment">// Note: Item should be dangerous regardless of what type of a container is it</span></div>
<div class="line"><a name="l14235"></a><span class="lineno">14235</span>&#160;    <span class="comment">// Visitable interface would skip some options</span></div>
<div class="line"><a name="l14236"></a><span class="lineno">14236</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>() ) {</div>
<div class="line"><a name="l14237"></a><span class="lineno">14237</span>&#160;        <span class="keywordflow">if</span>( it-&gt;is_dangerous() ) {</div>
<div class="line"><a name="l14238"></a><span class="lineno">14238</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14239"></a><span class="lineno">14239</span>&#160;        }</div>
<div class="line"><a name="l14240"></a><span class="lineno">14240</span>&#160;    }</div>
<div class="line"><a name="l14241"></a><span class="lineno">14241</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14242"></a><span class="lineno">14242</span>&#160;}</div>
<div class="line"><a name="l14243"></a><span class="lineno">14243</span>&#160; </div>
<div class="line"><a name="l14244"></a><span class="lineno"><a class="line" href="classitem.html#ac7fc1e9e44759c1ae2dd5ef423fc5c1b">14244</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ac7fc1e9e44759c1ae2dd5ef423fc5c1b">item::is_tainted</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14245"></a><span class="lineno">14245</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14246"></a><span class="lineno">14246</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> &amp;&amp; <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">has_flag</a>( <a class="code" href="mtype_8cpp.html#ab7333b9173e72d06bde3c9e2902e8b4f">mon_flag_POISON</a> );</div>
<div class="line"><a name="l14247"></a><span class="lineno">14247</span>&#160;}</div>
<div class="line"><a name="l14248"></a><span class="lineno">14248</span>&#160; </div>
<div class="line"><a name="l14249"></a><span class="lineno"><a class="line" href="classitem.html#a481f77e8382794e7b913571ccc109778">14249</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a481f77e8382794e7b913571ccc109778">item::is_soft</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14250"></a><span class="lineno">14250</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14251"></a><span class="lineno">14251</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) ) {</div>
<div class="line"><a name="l14252"></a><span class="lineno">14252</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14253"></a><span class="lineno">14253</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14254"></a><span class="lineno">14254</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14255"></a><span class="lineno">14255</span>&#160;    }</div>
<div class="line"><a name="l14256"></a><span class="lineno">14256</span>&#160; </div>
<div class="line"><a name="l14257"></a><span class="lineno">14257</span>&#160;    <span class="keyword">const</span> std::map&lt;material_id, int&gt; &amp;mats = <a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>();</div>
<div class="line"><a name="l14258"></a><span class="lineno">14258</span>&#160;    <span class="keywordflow">return</span> std::all_of( mats.begin(), mats.end(), []( <span class="keyword">const</span> std::pair&lt;material_id, int&gt; &amp;mid ) {</div>
<div class="line"><a name="l14259"></a><span class="lineno">14259</span>&#160;        return mid.first-&gt;soft();</div>
<div class="line"><a name="l14260"></a><span class="lineno">14260</span>&#160;    } );</div>
<div class="line"><a name="l14261"></a><span class="lineno">14261</span>&#160;}</div>
<div class="line"><a name="l14262"></a><span class="lineno">14262</span>&#160; </div>
<div class="line"><a name="l14263"></a><span class="lineno"><a class="line" href="classitem.html#ae35fc5671490285b91dab728b93ed938">14263</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">item::is_rigid</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14264"></a><span class="lineno">14264</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14265"></a><span class="lineno">14265</span>&#160;    <span class="comment">// overrides for the item overall</span></div>
<div class="line"><a name="l14266"></a><span class="lineno">14266</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) ) {</div>
<div class="line"><a name="l14267"></a><span class="lineno">14267</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14268"></a><span class="lineno">14268</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14269"></a><span class="lineno">14269</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14270"></a><span class="lineno">14270</span>&#160;    }</div>
<div class="line"><a name="l14271"></a><span class="lineno">14271</span>&#160; </div>
<div class="line"><a name="l14272"></a><span class="lineno">14272</span>&#160;    <span class="comment">// if the item has no armor data it isn&#39;t rigid</span></div>
<div class="line"><a name="l14273"></a><span class="lineno">14273</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l14274"></a><span class="lineno">14274</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l14275"></a><span class="lineno">14275</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14276"></a><span class="lineno">14276</span>&#160;    }</div>
<div class="line"><a name="l14277"></a><span class="lineno">14277</span>&#160; </div>
<div class="line"><a name="l14278"></a><span class="lineno">14278</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14279"></a><span class="lineno">14279</span>&#160; </div>
<div class="line"><a name="l14280"></a><span class="lineno">14280</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l14281"></a><span class="lineno">14281</span>&#160;        <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> |= portion.<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a>;</div>
<div class="line"><a name="l14282"></a><span class="lineno">14282</span>&#160;    }</div>
<div class="line"><a name="l14283"></a><span class="lineno">14283</span>&#160; </div>
<div class="line"><a name="l14284"></a><span class="lineno">14284</span>&#160;    <span class="comment">// check if ablative pieces are rigid too</span></div>
<div class="line"><a name="l14285"></a><span class="lineno">14285</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l14286"></a><span class="lineno">14286</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l14287"></a><span class="lineno">14287</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l14288"></a><span class="lineno">14288</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l14289"></a><span class="lineno">14289</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l14290"></a><span class="lineno">14290</span>&#160;                <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> |= ablative_armor.<a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a>();</div>
<div class="line"><a name="l14291"></a><span class="lineno">14291</span>&#160;            }</div>
<div class="line"><a name="l14292"></a><span class="lineno">14292</span>&#160;        }</div>
<div class="line"><a name="l14293"></a><span class="lineno">14293</span>&#160;    }</div>
<div class="line"><a name="l14294"></a><span class="lineno">14294</span>&#160; </div>
<div class="line"><a name="l14295"></a><span class="lineno">14295</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a>;</div>
<div class="line"><a name="l14296"></a><span class="lineno">14296</span>&#160;}</div>
<div class="line"><a name="l14297"></a><span class="lineno">14297</span>&#160; </div>
<div class="line"><a name="l14298"></a><span class="lineno"><a class="line" href="classitem.html#a291b3aa036d6f1867b079950faefbc74">14298</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a291b3aa036d6f1867b079950faefbc74">item::is_comfortable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14299"></a><span class="lineno">14299</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14300"></a><span class="lineno">14300</span>&#160;    <span class="comment">// overrides for the item overall</span></div>
<div class="line"><a name="l14301"></a><span class="lineno">14301</span>&#160;    <span class="comment">// NO_WEAR_EFFECT is there for jewelry and the like which is too small to be considered</span></div>
<div class="line"><a name="l14302"></a><span class="lineno">14302</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a78f44342fdfdab8986b77a4847c4aca0">flag_PADDED</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6a2be000a54a3066454c455b0f8545cb">flag_NO_WEAR_EFFECT</a> ) ) {</div>
<div class="line"><a name="l14303"></a><span class="lineno">14303</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14304"></a><span class="lineno">14304</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14305"></a><span class="lineno">14305</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14306"></a><span class="lineno">14306</span>&#160;    }</div>
<div class="line"><a name="l14307"></a><span class="lineno">14307</span>&#160; </div>
<div class="line"><a name="l14308"></a><span class="lineno">14308</span>&#160;    <span class="comment">// if the item has no armor data it isn&#39;t rigid</span></div>
<div class="line"><a name="l14309"></a><span class="lineno">14309</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__armor.html">islot_armor</a> *armor = <a class="code" href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">find_armor_data</a>();</div>
<div class="line"><a name="l14310"></a><span class="lineno">14310</span>&#160;    <span class="keywordflow">if</span>( armor == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l14311"></a><span class="lineno">14311</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14312"></a><span class="lineno">14312</span>&#160;    }</div>
<div class="line"><a name="l14313"></a><span class="lineno">14313</span>&#160; </div>
<div class="line"><a name="l14314"></a><span class="lineno">14314</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> &amp;portion : armor-&gt;<a class="code" href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">sub_data</a> ) {</div>
<div class="line"><a name="l14315"></a><span class="lineno">14315</span>&#160;        <span class="keywordflow">if</span>( portion.<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a> ) {</div>
<div class="line"><a name="l14316"></a><span class="lineno">14316</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14317"></a><span class="lineno">14317</span>&#160;        }</div>
<div class="line"><a name="l14318"></a><span class="lineno">14318</span>&#160;    }</div>
<div class="line"><a name="l14319"></a><span class="lineno">14319</span>&#160; </div>
<div class="line"><a name="l14320"></a><span class="lineno">14320</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14321"></a><span class="lineno">14321</span>&#160;}</div>
<div class="line"><a name="l14322"></a><span class="lineno">14322</span>&#160; </div>
<div class="line"><a name="l14323"></a><span class="lineno">14323</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l14324"></a><span class="lineno"><a class="line" href="classitem.html#a2c0093d56ff71b4dd3862ad73ea46508">14324</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2c0093d56ff71b4dd3862ad73ea46508">item::is_bp_rigid</a>( <span class="keyword">const</span> T &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l14325"></a><span class="lineno">14325</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14326"></a><span class="lineno">14326</span>&#160;    <span class="comment">// overrides for the item overall</span></div>
<div class="line"><a name="l14327"></a><span class="lineno">14327</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) ) {</div>
<div class="line"><a name="l14328"></a><span class="lineno">14328</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14329"></a><span class="lineno">14329</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14330"></a><span class="lineno">14330</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14331"></a><span class="lineno">14331</span>&#160;    }</div>
<div class="line"><a name="l14332"></a><span class="lineno">14332</span>&#160; </div>
<div class="line"><a name="l14333"></a><span class="lineno">14333</span>&#160;    <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l14334"></a><span class="lineno">14334</span>&#160; </div>
<div class="line"><a name="l14335"></a><span class="lineno">14335</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14336"></a><span class="lineno">14336</span>&#160; </div>
<div class="line"><a name="l14337"></a><span class="lineno">14337</span>&#160;    <span class="keywordflow">if</span>( portion ) {</div>
<div class="line"><a name="l14338"></a><span class="lineno">14338</span>&#160;        <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> |= portion-&gt;<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a>;</div>
<div class="line"><a name="l14339"></a><span class="lineno">14339</span>&#160;    }</div>
<div class="line"><a name="l14340"></a><span class="lineno">14340</span>&#160; </div>
<div class="line"><a name="l14341"></a><span class="lineno">14341</span>&#160;    <span class="comment">// check if ablative pieces are rigid too</span></div>
<div class="line"><a name="l14342"></a><span class="lineno">14342</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">is_ablative</a>() ) {</div>
<div class="line"><a name="l14343"></a><span class="lineno">14343</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">get_all_ablative_pockets</a>() ) {</div>
<div class="line"><a name="l14344"></a><span class="lineno">14344</span>&#160;            <span class="keywordflow">if</span>( !pocket-&gt;empty() ) {</div>
<div class="line"><a name="l14345"></a><span class="lineno">14345</span>&#160;                <span class="comment">// get the contained plate</span></div>
<div class="line"><a name="l14346"></a><span class="lineno">14346</span>&#160;                <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;ablative_armor = pocket-&gt;front();</div>
<div class="line"><a name="l14347"></a><span class="lineno">14347</span>&#160;                <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> |= ablative_armor.<a class="code" href="classitem.html#a2c0093d56ff71b4dd3862ad73ea46508">is_bp_rigid</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l14348"></a><span class="lineno">14348</span>&#160;            }</div>
<div class="line"><a name="l14349"></a><span class="lineno">14349</span>&#160;        }</div>
<div class="line"><a name="l14350"></a><span class="lineno">14350</span>&#160;    }</div>
<div class="line"><a name="l14351"></a><span class="lineno">14351</span>&#160; </div>
<div class="line"><a name="l14352"></a><span class="lineno">14352</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a>;</div>
<div class="line"><a name="l14353"></a><span class="lineno">14353</span>&#160;}</div>
<div class="line"><a name="l14354"></a><span class="lineno">14354</span>&#160; </div>
<div class="line"><a name="l14355"></a><span class="lineno">14355</span>&#160;<span class="comment">// initialize for sub_bodyparts and body parts</span></div>
<div class="line"><a name="l14356"></a><span class="lineno">14356</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_rigid&lt;sub_bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14357"></a><span class="lineno">14357</span>&#160; </div>
<div class="line"><a name="l14358"></a><span class="lineno">14358</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_rigid&lt;bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14359"></a><span class="lineno">14359</span>&#160; </div>
<div class="line"><a name="l14360"></a><span class="lineno">14360</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l14361"></a><span class="lineno"><a class="line" href="classitem.html#abfb37d06bdad7717cbea765943e28da0">14361</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#abfb37d06bdad7717cbea765943e28da0">item::is_bp_rigid_selective</a>( <span class="keyword">const</span> T &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l14362"></a><span class="lineno">14362</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14363"></a><span class="lineno">14363</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a>;</div>
<div class="line"><a name="l14364"></a><span class="lineno">14364</span>&#160; </div>
<div class="line"><a name="l14365"></a><span class="lineno">14365</span>&#160;    <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l14366"></a><span class="lineno">14366</span>&#160; </div>
<div class="line"><a name="l14367"></a><span class="lineno">14367</span>&#160;    <span class="keywordflow">if</span>( !portion ) {</div>
<div class="line"><a name="l14368"></a><span class="lineno">14368</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14369"></a><span class="lineno">14369</span>&#160;    }</div>
<div class="line"><a name="l14370"></a><span class="lineno">14370</span>&#160; </div>
<div class="line"><a name="l14371"></a><span class="lineno">14371</span>&#160;    <span class="comment">// overrides for the item overall</span></div>
<div class="line"><a name="l14372"></a><span class="lineno">14372</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) ) {</div>
<div class="line"><a name="l14373"></a><span class="lineno">14373</span>&#160;        <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14374"></a><span class="lineno">14374</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14375"></a><span class="lineno">14375</span>&#160;        <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14376"></a><span class="lineno">14376</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14377"></a><span class="lineno">14377</span>&#160;        <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> = portion-&gt;<a class="code" href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">rigid</a>;</div>
<div class="line"><a name="l14378"></a><span class="lineno">14378</span>&#160;    }</div>
<div class="line"><a name="l14379"></a><span class="lineno">14379</span>&#160; </div>
<div class="line"><a name="l14380"></a><span class="lineno">14380</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae35fc5671490285b91dab728b93ed938">is_rigid</a> &amp;&amp; portion-&gt;<a class="code" href="structarmor__portion__data.html#ac7ab081c566bef9bf9d3f8bf2e697d81">rigid_layer_only</a>;</div>
<div class="line"><a name="l14381"></a><span class="lineno">14381</span>&#160;}</div>
<div class="line"><a name="l14382"></a><span class="lineno">14382</span>&#160; </div>
<div class="line"><a name="l14383"></a><span class="lineno">14383</span>&#160;<span class="comment">// initialize for sub_bodyparts and body parts</span></div>
<div class="line"><a name="l14384"></a><span class="lineno">14384</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_rigid_selective&lt;sub_bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14385"></a><span class="lineno">14385</span>&#160; </div>
<div class="line"><a name="l14386"></a><span class="lineno">14386</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_rigid_selective&lt;bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14387"></a><span class="lineno">14387</span>&#160; </div>
<div class="line"><a name="l14388"></a><span class="lineno">14388</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l14389"></a><span class="lineno"><a class="line" href="classitem.html#a2575251693457acaf9f039fdc7990dd9">14389</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a2575251693457acaf9f039fdc7990dd9">item::is_bp_comfortable</a>( <span class="keyword">const</span> T &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> )<span class="keyword"> const</span></div>
<div class="line"><a name="l14390"></a><span class="lineno">14390</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14391"></a><span class="lineno">14391</span>&#160;    <span class="comment">// overrides for the item overall</span></div>
<div class="line"><a name="l14392"></a><span class="lineno">14392</span>&#160;    <span class="comment">// NO_WEAR_EFFECT is there for jewelry and the like which is too small to be considered</span></div>
<div class="line"><a name="l14393"></a><span class="lineno">14393</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a78f44342fdfdab8986b77a4847c4aca0">flag_PADDED</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6a2be000a54a3066454c455b0f8545cb">flag_NO_WEAR_EFFECT</a> ) ) {</div>
<div class="line"><a name="l14394"></a><span class="lineno">14394</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14395"></a><span class="lineno">14395</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a> ) ) {</div>
<div class="line"><a name="l14396"></a><span class="lineno">14396</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14397"></a><span class="lineno">14397</span>&#160;    }</div>
<div class="line"><a name="l14398"></a><span class="lineno">14398</span>&#160; </div>
<div class="line"><a name="l14399"></a><span class="lineno">14399</span>&#160;    <span class="keyword">const</span> <a class="code" href="structarmor__portion__data.html">armor_portion_data</a> *portion = <a class="code" href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">portion_for_bodypart</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l14400"></a><span class="lineno">14400</span>&#160; </div>
<div class="line"><a name="l14401"></a><span class="lineno">14401</span>&#160;    <span class="keywordflow">if</span>( !portion ) {</div>
<div class="line"><a name="l14402"></a><span class="lineno">14402</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14403"></a><span class="lineno">14403</span>&#160;    }</div>
<div class="line"><a name="l14404"></a><span class="lineno">14404</span>&#160; </div>
<div class="line"><a name="l14405"></a><span class="lineno">14405</span>&#160;    <span class="keywordflow">return</span> portion-&gt;<a class="code" href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">comfortable</a>;</div>
<div class="line"><a name="l14406"></a><span class="lineno">14406</span>&#160;}</div>
<div class="line"><a name="l14407"></a><span class="lineno">14407</span>&#160; </div>
<div class="line"><a name="l14408"></a><span class="lineno">14408</span>&#160;<span class="comment">// initialize for sub_bodyparts and body parts</span></div>
<div class="line"><a name="l14409"></a><span class="lineno">14409</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_comfortable&lt;sub_bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">sub_bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14410"></a><span class="lineno">14410</span>&#160; </div>
<div class="line"><a name="l14411"></a><span class="lineno">14411</span>&#160;<span class="keyword">template</span> <span class="keywordtype">bool</span> item::is_bp_comfortable&lt;bodypart_id&gt;( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l14412"></a><span class="lineno">14412</span>&#160; </div>
<div class="line"><a name="l14413"></a><span class="lineno"><a class="line" href="classitem.html#a84cbca948718b41241902acce542f352">14413</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a84cbca948718b41241902acce542f352">item::is_reloadable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14414"></a><span class="lineno">14414</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14415"></a><span class="lineno">14415</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a1d6da470e2d0c764e84877215a30f42c">flag_NO_RELOAD</a> ) &amp;&amp; !<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a> ) ) {</div>
<div class="line"><a name="l14416"></a><span class="lineno">14416</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// turrets ignore NO_RELOAD flag</span></div>
<div class="line"><a name="l14417"></a><span class="lineno">14417</span>&#160; </div>
<div class="line"><a name="l14418"></a><span class="lineno">14418</span>&#160;    }</div>
<div class="line"><a name="l14419"></a><span class="lineno">14419</span>&#160; </div>
<div class="line"><a name="l14420"></a><span class="lineno">14420</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5f866f8afa1d91bd8e067045bd15e24f">get_all_reloadable_pockets</a>() ) {</div>
<div class="line"><a name="l14421"></a><span class="lineno">14421</span>&#160;        <span class="keywordflow">if</span>( pocket-&gt;is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a> ) ) {</div>
<div class="line"><a name="l14422"></a><span class="lineno">14422</span>&#160;            <span class="keywordflow">if</span>( pocket-&gt;empty() || !pocket-&gt;front().is_magazine_full() ) {</div>
<div class="line"><a name="l14423"></a><span class="lineno">14423</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14424"></a><span class="lineno">14424</span>&#160;            }</div>
<div class="line"><a name="l14425"></a><span class="lineno">14425</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pocket-&gt;is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a> ) ) {</div>
<div class="line"><a name="l14426"></a><span class="lineno">14426</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">remaining_ammo_capacity</a>() &gt; 0 ) {</div>
<div class="line"><a name="l14427"></a><span class="lineno">14427</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14428"></a><span class="lineno">14428</span>&#160;            }</div>
<div class="line"><a name="l14429"></a><span class="lineno">14429</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pocket-&gt;is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l14430"></a><span class="lineno">14430</span>&#160;            <span class="comment">// Container pockets are reloadable only if they are watertight, not full and do not contain non-liquid item</span></div>
<div class="line"><a name="l14431"></a><span class="lineno">14431</span>&#160;            <span class="keywordflow">if</span>( pocket-&gt;full( <span class="keyword">false</span> ) || !pocket-&gt;watertight() ) {</div>
<div class="line"><a name="l14432"></a><span class="lineno">14432</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l14433"></a><span class="lineno">14433</span>&#160;            }</div>
<div class="line"><a name="l14434"></a><span class="lineno">14434</span>&#160;            <span class="keywordflow">if</span>( pocket-&gt;empty() || pocket-&gt;front().made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l14435"></a><span class="lineno">14435</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14436"></a><span class="lineno">14436</span>&#160;            }</div>
<div class="line"><a name="l14437"></a><span class="lineno">14437</span>&#160;        }</div>
<div class="line"><a name="l14438"></a><span class="lineno">14438</span>&#160;    }</div>
<div class="line"><a name="l14439"></a><span class="lineno">14439</span>&#160; </div>
<div class="line"><a name="l14440"></a><span class="lineno">14440</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *gunmod : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l14441"></a><span class="lineno">14441</span>&#160;        <span class="keywordflow">if</span>( gunmod-&gt;is_reloadable() ) {</div>
<div class="line"><a name="l14442"></a><span class="lineno">14442</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14443"></a><span class="lineno">14443</span>&#160;        }</div>
<div class="line"><a name="l14444"></a><span class="lineno">14444</span>&#160;    }</div>
<div class="line"><a name="l14445"></a><span class="lineno">14445</span>&#160; </div>
<div class="line"><a name="l14446"></a><span class="lineno">14446</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14447"></a><span class="lineno">14447</span>&#160;}</div>
<div class="line"><a name="l14448"></a><span class="lineno">14448</span>&#160; </div>
<div class="line"><a name="l14449"></a><span class="lineno"><a class="line" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">14449</a></span>&#160;std::string <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity, <span class="keywordtype">bool</span> use_variant, <span class="keywordtype">bool</span> use_cond_name,</div>
<div class="line"><a name="l14450"></a><span class="lineno">14450</span>&#160;                             <span class="keywordtype">bool</span> use_corpse )<span class="keyword"> const</span></div>
<div class="line"><a name="l14451"></a><span class="lineno">14451</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14452"></a><span class="lineno">14452</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> iter = <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.find( <span class="stringliteral">&quot;name&quot;</span> );</div>
<div class="line"><a name="l14453"></a><span class="lineno">14453</span>&#160;    std::string ret_name;</div>
<div class="line"><a name="l14454"></a><span class="lineno">14454</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="item_8cpp.html#a8de56f93319e34c27cd5c62dd4fa4e72">itype_blood</a> ) {</div>
<div class="line"><a name="l14455"></a><span class="lineno">14455</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> == <span class="keyword">nullptr</span> || <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l14456"></a><span class="lineno">14456</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#abe0b6bcea429e79219da2f21b41d6be9">npgettext</a>( <span class="stringliteral">&quot;item name&quot;</span>, <span class="stringliteral">&quot;human blood&quot;</span>, <span class="stringliteral">&quot;human blood&quot;</span>, quantity );</div>
<div class="line"><a name="l14457"></a><span class="lineno">14457</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14458"></a><span class="lineno">14458</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#abe0b6bcea429e79219da2f21b41d6be9">npgettext</a>( <span class="stringliteral">&quot;item name&quot;</span>, <span class="stringliteral">&quot;%s blood&quot;</span>,</div>
<div class="line"><a name="l14459"></a><span class="lineno">14459</span>&#160;                                             <span class="stringliteral">&quot;%s blood&quot;</span>,  quantity ),</div>
<div class="line"><a name="l14460"></a><span class="lineno">14460</span>&#160;                                  <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>() );</div>
<div class="line"><a name="l14461"></a><span class="lineno">14461</span>&#160;        }</div>
<div class="line"><a name="l14462"></a><span class="lineno">14462</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iter != <a class="code" href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item_vars</a>.end() ) {</div>
<div class="line"><a name="l14463"></a><span class="lineno">14463</span>&#160;        <span class="keywordflow">return</span> iter-&gt;second;</div>
<div class="line"><a name="l14464"></a><span class="lineno">14464</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( use_variant &amp;&amp; <a class="code" href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">has_itype_variant</a>() ) {</div>
<div class="line"><a name="l14465"></a><span class="lineno">14465</span>&#160;        ret_name = <a class="code" href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">itype_variant</a>().<a class="code" href="structitype__variant__data.html#af3729c5714d51d418ce498aee324a6b0">alt_name</a>.<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>( quantity );</div>
<div class="line"><a name="l14466"></a><span class="lineno">14466</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14467"></a><span class="lineno">14467</span>&#160;        ret_name = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( quantity );</div>
<div class="line"><a name="l14468"></a><span class="lineno">14468</span>&#160;    }</div>
<div class="line"><a name="l14469"></a><span class="lineno">14469</span>&#160; </div>
<div class="line"><a name="l14470"></a><span class="lineno">14470</span>&#160;    <span class="comment">// Apply conditional names, in order.</span></div>
<div class="line"><a name="l14471"></a><span class="lineno">14471</span>&#160;    std::vector&lt;conditional_name&gt; <span class="keyword">const</span> &amp;cond_names =</div>
<div class="line"><a name="l14472"></a><span class="lineno">14472</span>&#160;        use_cond_name ? <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#acaa924a27717e1a4f5fa3fb17a84383c">conditional_names</a> : std::vector&lt;conditional_name&gt; {};</div>
<div class="line"><a name="l14473"></a><span class="lineno">14473</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structconditional__name.html">conditional_name</a> &amp;cname : cond_names ) {</div>
<div class="line"><a name="l14474"></a><span class="lineno">14474</span>&#160;        <span class="comment">// Lambda for searching for a item ID among all components.</span></div>
<div class="line"><a name="l14475"></a><span class="lineno">14475</span>&#160;        std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="classitem__components.html">item_components</a> &amp; )&gt; component_id_equals =</div>
<div class="line"><a name="l14476"></a><span class="lineno">14476</span>&#160;        [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem__components.html">item_components</a> &amp; <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14477"></a><span class="lineno">14477</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14478"></a><span class="lineno">14478</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> : tvp.second ) {</div>
<div class="line"><a name="l14479"></a><span class="lineno">14479</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="structcomponent.html">component</a>.typeId().str() == cname.condition ) {</div>
<div class="line"><a name="l14480"></a><span class="lineno">14480</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14481"></a><span class="lineno">14481</span>&#160;                    }</div>
<div class="line"><a name="l14482"></a><span class="lineno">14482</span>&#160;                }</div>
<div class="line"><a name="l14483"></a><span class="lineno">14483</span>&#160;            }</div>
<div class="line"><a name="l14484"></a><span class="lineno">14484</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14485"></a><span class="lineno">14485</span>&#160;        };</div>
<div class="line"><a name="l14486"></a><span class="lineno">14486</span>&#160;        <span class="comment">// Lambda for recursively searching for a item ID substring among all components.</span></div>
<div class="line"><a name="l14487"></a><span class="lineno">14487</span>&#160;        std::function&lt;bool ( <span class="keyword">const</span> <a class="code" href="classitem__components.html">item_components</a> &amp; )&gt; component_id_contains =</div>
<div class="line"><a name="l14488"></a><span class="lineno">14488</span>&#160;        [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem__components.html">item_components</a> &amp; <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14489"></a><span class="lineno">14489</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14490"></a><span class="lineno">14490</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> : tvp.second ) {</div>
<div class="line"><a name="l14491"></a><span class="lineno">14491</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="structcomponent.html">component</a>.typeId().str().find( cname.condition ) != std::string::npos ||</div>
<div class="line"><a name="l14492"></a><span class="lineno">14492</span>&#160;                        component_id_contains( <a class="code" href="structcomponent.html">component</a>.components ) ) {</div>
<div class="line"><a name="l14493"></a><span class="lineno">14493</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14494"></a><span class="lineno">14494</span>&#160;                    }</div>
<div class="line"><a name="l14495"></a><span class="lineno">14495</span>&#160;                }</div>
<div class="line"><a name="l14496"></a><span class="lineno">14496</span>&#160;            }</div>
<div class="line"><a name="l14497"></a><span class="lineno">14497</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14498"></a><span class="lineno">14498</span>&#160;        };</div>
<div class="line"><a name="l14499"></a><span class="lineno">14499</span>&#160;        <span class="keywordflow">switch</span>( cname.type ) {</div>
<div class="line"><a name="l14500"></a><span class="lineno">14500</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a391ad3dbcf1f6d5c27590a7e511a1667">condition_type::FLAG</a>:</div>
<div class="line"><a name="l14501"></a><span class="lineno">14501</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">flag_id</a>( cname.condition ) ) ) {</div>
<div class="line"><a name="l14502"></a><span class="lineno">14502</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14503"></a><span class="lineno">14503</span>&#160;                }</div>
<div class="line"><a name="l14504"></a><span class="lineno">14504</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14505"></a><span class="lineno">14505</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a6332547a7029263c6caae02ab40dc0d3">condition_type::VITAMIN</a>:</div>
<div class="line"><a name="l14506"></a><span class="lineno">14506</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">has_vitamin</a>( <a class="code" href="type__id_8h.html#a62798cd4a1ea702e8d25b8c0f17a4834">vitamin_id</a>( cname.condition ) ) ) {</div>
<div class="line"><a name="l14507"></a><span class="lineno">14507</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14508"></a><span class="lineno">14508</span>&#160;                }</div>
<div class="line"><a name="l14509"></a><span class="lineno">14509</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14510"></a><span class="lineno">14510</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a0232b08080d33dfe8f01eb0b16c09492">condition_type::COMPONENT_ID</a>:</div>
<div class="line"><a name="l14511"></a><span class="lineno">14511</span>&#160;                <span class="keywordflow">if</span>( component_id_equals( <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) ) {</div>
<div class="line"><a name="l14512"></a><span class="lineno">14512</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14513"></a><span class="lineno">14513</span>&#160;                }</div>
<div class="line"><a name="l14514"></a><span class="lineno">14514</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14515"></a><span class="lineno">14515</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a75dc895fe06c98a85a1e2b0ade1cfb9e">condition_type::COMPONENT_ID_SUBSTRING</a>:</div>
<div class="line"><a name="l14516"></a><span class="lineno">14516</span>&#160;                <span class="keywordflow">if</span>( component_id_contains( <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) ) {</div>
<div class="line"><a name="l14517"></a><span class="lineno">14517</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14518"></a><span class="lineno">14518</span>&#160;                }</div>
<div class="line"><a name="l14519"></a><span class="lineno">14519</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14520"></a><span class="lineno">14520</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716af68346ce0bfce7ab2ca0a240f5132863">condition_type::VAR</a>:</div>
<div class="line"><a name="l14521"></a><span class="lineno">14521</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( cname.condition ) &amp;&amp; <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( cname.condition ) == cname.value ) {</div>
<div class="line"><a name="l14522"></a><span class="lineno">14522</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14523"></a><span class="lineno">14523</span>&#160;                }</div>
<div class="line"><a name="l14524"></a><span class="lineno">14524</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14525"></a><span class="lineno">14525</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a7de63b88eb96440d3f795fb451ea58b5">condition_type::SNIPPET_ID</a>:</div>
<div class="line"><a name="l14526"></a><span class="lineno">14526</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( cname.condition + <span class="stringliteral">&quot;_snippet_id&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l14527"></a><span class="lineno">14527</span>&#160;                    <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( cname.condition + <span class="stringliteral">&quot;_snippet_id&quot;</span> ) == cname.value ) {</div>
<div class="line"><a name="l14528"></a><span class="lineno">14528</span>&#160;                    ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( cname.name.translated( quantity ), ret_name );</div>
<div class="line"><a name="l14529"></a><span class="lineno">14529</span>&#160;                }</div>
<div class="line"><a name="l14530"></a><span class="lineno">14530</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14531"></a><span class="lineno">14531</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716aa76e4df6fe28cbd3f3c95e56f20637a5">condition_type::num_condition_types</a>:</div>
<div class="line"><a name="l14532"></a><span class="lineno">14532</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14533"></a><span class="lineno">14533</span>&#160;        }</div>
<div class="line"><a name="l14534"></a><span class="lineno">14534</span>&#160;    }</div>
<div class="line"><a name="l14535"></a><span class="lineno">14535</span>&#160; </div>
<div class="line"><a name="l14536"></a><span class="lineno">14536</span>&#160;    <span class="comment">// Identify who this corpse belonged to, if applicable.</span></div>
<div class="line"><a name="l14537"></a><span class="lineno">14537</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a> != <span class="keyword">nullptr</span> &amp;&amp; use_corpse &amp;&amp; <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a> ) ) {</div>
<div class="line"><a name="l14538"></a><span class="lineno">14538</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a>.empty() ) {</div>
<div class="line"><a name="l14539"></a><span class="lineno">14539</span>&#160;            <span class="comment">//~ %1$s: name of corpse with modifiers;  %2$s: species name</span></div>
<div class="line"><a name="l14540"></a><span class="lineno">14540</span>&#160;            ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;corpse ownership qualifier&quot;</span>, <span class="stringliteral">&quot;%1$s of a %2$s&quot;</span> ),</div>
<div class="line"><a name="l14541"></a><span class="lineno">14541</span>&#160;                                      ret_name, <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>() );</div>
<div class="line"><a name="l14542"></a><span class="lineno">14542</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14543"></a><span class="lineno">14543</span>&#160;            <span class="comment">//~ %1$s: name of corpse with modifiers;  %2$s: proper name;  %3$s: species name</span></div>
<div class="line"><a name="l14544"></a><span class="lineno">14544</span>&#160;            ret_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;corpse ownership qualifier&quot;</span>, <span class="stringliteral">&quot;%1$s of %2$s, %3$s&quot;</span> ),</div>
<div class="line"><a name="l14545"></a><span class="lineno">14545</span>&#160;                                      ret_name, <a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a>, <a class="code" href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">corpse</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>() );</div>
<div class="line"><a name="l14546"></a><span class="lineno">14546</span>&#160;        }</div>
<div class="line"><a name="l14547"></a><span class="lineno">14547</span>&#160;    }</div>
<div class="line"><a name="l14548"></a><span class="lineno">14548</span>&#160; </div>
<div class="line"><a name="l14549"></a><span class="lineno">14549</span>&#160;    <span class="keywordflow">return</span> ret_name;</div>
<div class="line"><a name="l14550"></a><span class="lineno">14550</span>&#160;}</div>
<div class="line"><a name="l14551"></a><span class="lineno">14551</span>&#160; </div>
<div class="line"><a name="l14552"></a><span class="lineno"><a class="line" href="classitem.html#a2e05d4e679c97f428f3a29fb23bf81c2">14552</a></span>&#160;std::string <a class="code" href="classitem.html#a2e05d4e679c97f428f3a29fb23bf81c2">item::get_corpse_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14553"></a><span class="lineno">14553</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14554"></a><span class="lineno">14554</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ae6e0d727dd759f898591df93162b8614">corpse_name</a>;</div>
<div class="line"><a name="l14555"></a><span class="lineno">14555</span>&#160;}</div>
<div class="line"><a name="l14556"></a><span class="lineno">14556</span>&#160; </div>
<div class="line"><a name="l14557"></a><span class="lineno"><a class="line" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">14557</a></span>&#160;std::string <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity )</div>
<div class="line"><a name="l14558"></a><span class="lineno">14558</span>&#160;{</div>
<div class="line"><a name="l14559"></a><span class="lineno">14559</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *t = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">find_type</a>( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l14560"></a><span class="lineno">14560</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( quantity );</div>
<div class="line"><a name="l14561"></a><span class="lineno">14561</span>&#160;}</div>
<div class="line"><a name="l14562"></a><span class="lineno">14562</span>&#160; </div>
<div class="line"><a name="l14563"></a><span class="lineno"><a class="line" href="classitem.html#aa74d69a99d1c7d56d8fb1c8351e20888">14563</a></span>&#160;std::string <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity,</div>
<div class="line"><a name="l14564"></a><span class="lineno">14564</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classenum__bitset.html">tname::segment_bitset</a> &amp;<a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a> )</div>
<div class="line"><a name="l14565"></a><span class="lineno">14565</span>&#160;{</div>
<div class="line"><a name="l14566"></a><span class="lineno">14566</span>&#160;    <a class="code" href="classitem.html">item</a> item_temp( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l14567"></a><span class="lineno">14567</span>&#160;    <span class="keywordflow">return</span> item_temp.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( quantity, <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a> );</div>
<div class="line"><a name="l14568"></a><span class="lineno">14568</span>&#160;}</div>
<div class="line"><a name="l14569"></a><span class="lineno">14569</span>&#160; </div>
<div class="line"><a name="l14570"></a><span class="lineno"><a class="line" href="classitem.html#ac239a6d2e48b4dcf6703c20bbce575c5">14570</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span> )</div>
<div class="line"><a name="l14571"></a><span class="lineno">14571</span>&#160;{</div>
<div class="line"><a name="l14572"></a><span class="lineno">14572</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *t = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">find_type</a>( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l14573"></a><span class="lineno">14573</span>&#160;    <span class="keywordflow">return</span> t-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>();</div>
<div class="line"><a name="l14574"></a><span class="lineno">14574</span>&#160;}</div>
<div class="line"><a name="l14575"></a><span class="lineno">14575</span>&#160; </div>
<div class="line"><a name="l14576"></a><span class="lineno"><a class="line" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">14576</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span> )</div>
<div class="line"><a name="l14577"></a><span class="lineno">14577</span>&#160;{</div>
<div class="line"><a name="l14578"></a><span class="lineno">14578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;has_template( <span class="keywordtype">id</span> );</div>
<div class="line"><a name="l14579"></a><span class="lineno">14579</span>&#160;}</div>
<div class="line"><a name="l14580"></a><span class="lineno">14580</span>&#160; </div>
<div class="line"><a name="l14581"></a><span class="lineno"><a class="line" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">14581</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;type )</div>
<div class="line"><a name="l14582"></a><span class="lineno">14582</span>&#160;{</div>
<div class="line"><a name="l14583"></a><span class="lineno">14583</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a>-&gt;find_template( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l14584"></a><span class="lineno">14584</span>&#160;}</div>
<div class="line"><a name="l14585"></a><span class="lineno">14585</span>&#160; </div>
<div class="line"><a name="l14586"></a><span class="lineno"><a class="line" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">14586</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">item::get_gun_energy_drain</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14587"></a><span class="lineno">14587</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14588"></a><span class="lineno">14588</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::energy</a> draincount = 0_kJ;</div>
<div class="line"><a name="l14589"></a><span class="lineno">14589</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l14590"></a><span class="lineno">14590</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::energy</a> modifier = 0_kJ;</div>
<div class="line"><a name="l14591"></a><span class="lineno">14591</span>&#160;        <span class="keywordtype">float</span> multiplier = 1.0f;</div>
<div class="line"><a name="l14592"></a><span class="lineno">14592</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l14593"></a><span class="lineno">14593</span>&#160;            modifier += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;energy_drain_modifier;</div>
<div class="line"><a name="l14594"></a><span class="lineno">14594</span>&#160;            multiplier *= <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;energy_drain_multiplier;</div>
<div class="line"><a name="l14595"></a><span class="lineno">14595</span>&#160;        }</div>
<div class="line"><a name="l14596"></a><span class="lineno">14596</span>&#160;        draincount = ( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>-&gt;energy_drain * multiplier ) + modifier;</div>
<div class="line"><a name="l14597"></a><span class="lineno">14597</span>&#160;    }</div>
<div class="line"><a name="l14598"></a><span class="lineno">14598</span>&#160;    <span class="keywordflow">return</span> draincount;</div>
<div class="line"><a name="l14599"></a><span class="lineno">14599</span>&#160;}</div>
<div class="line"><a name="l14600"></a><span class="lineno">14600</span>&#160; </div>
<div class="line"><a name="l14601"></a><span class="lineno"><a class="line" href="classitem.html#aaf71f60580cd467a838a8e706e594751">14601</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#aaf71f60580cd467a838a8e706e594751">item::get_gun_ups_drain</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14602"></a><span class="lineno">14602</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14603"></a><span class="lineno">14603</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ) {</div>
<div class="line"><a name="l14604"></a><span class="lineno">14604</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>();</div>
<div class="line"><a name="l14605"></a><span class="lineno">14605</span>&#160;    }</div>
<div class="line"><a name="l14606"></a><span class="lineno">14606</span>&#160;    <span class="keywordflow">return</span> 0_kJ;</div>
<div class="line"><a name="l14607"></a><span class="lineno">14607</span>&#160;}</div>
<div class="line"><a name="l14608"></a><span class="lineno">14608</span>&#160; </div>
<div class="line"><a name="l14609"></a><span class="lineno"><a class="line" href="classitem.html#afee29a1f4fe4a49b99063ceec550a2da">14609</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::energy</a> <a class="code" href="classitem.html#afee29a1f4fe4a49b99063ceec550a2da">item::get_gun_bionic_drain</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14610"></a><span class="lineno">14610</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14611"></a><span class="lineno">14611</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a name="l14612"></a><span class="lineno">14612</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6d3164628041c6ccdce14aedd711b640">get_gun_energy_drain</a>();</div>
<div class="line"><a name="l14613"></a><span class="lineno">14613</span>&#160;    }</div>
<div class="line"><a name="l14614"></a><span class="lineno">14614</span>&#160;    <span class="keywordflow">return</span> 0_kJ;</div>
<div class="line"><a name="l14615"></a><span class="lineno">14615</span>&#160;}</div>
<div class="line"><a name="l14616"></a><span class="lineno">14616</span>&#160; </div>
<div class="line"><a name="l14617"></a><span class="lineno"><a class="line" href="classitem.html#ad9aa2c661ddeda4247546528984a1d3d">14617</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ad9aa2c661ddeda4247546528984a1d3d">item::has_label</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14618"></a><span class="lineno">14618</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14619"></a><span class="lineno">14619</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;item_label&quot;</span> );</div>
<div class="line"><a name="l14620"></a><span class="lineno">14620</span>&#160;}</div>
<div class="line"><a name="l14621"></a><span class="lineno">14621</span>&#160; </div>
<div class="line"><a name="l14622"></a><span class="lineno"><a class="line" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">14622</a></span>&#160;std::string <a class="code" href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">item::label</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quantity, <span class="keywordtype">bool</span> use_variant,</div>
<div class="line"><a name="l14623"></a><span class="lineno">14623</span>&#160;                         <span class="keywordtype">bool</span> use_cond_name, <span class="keywordtype">bool</span> use_corpse )<span class="keyword"> const</span></div>
<div class="line"><a name="l14624"></a><span class="lineno">14624</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14625"></a><span class="lineno">14625</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ad9aa2c661ddeda4247546528984a1d3d">has_label</a>() ) {</div>
<div class="line"><a name="l14626"></a><span class="lineno">14626</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;item_label&quot;</span> );</div>
<div class="line"><a name="l14627"></a><span class="lineno">14627</span>&#160;    }</div>
<div class="line"><a name="l14628"></a><span class="lineno">14628</span>&#160; </div>
<div class="line"><a name="l14629"></a><span class="lineno">14629</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>( quantity, use_variant, use_cond_name, use_corpse );</div>
<div class="line"><a name="l14630"></a><span class="lineno">14630</span>&#160;}</div>
<div class="line"><a name="l14631"></a><span class="lineno">14631</span>&#160; </div>
<div class="line"><a name="l14632"></a><span class="lineno"><a class="line" href="classitem.html#a310539e1dbfb640f2b23796a40c881f2">14632</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a310539e1dbfb640f2b23796a40c881f2">item::has_infinite_charges</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14633"></a><span class="lineno">14633</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14634"></a><span class="lineno">14634</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == <a class="code" href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">INFINITE_CHARGES</a>;</div>
<div class="line"><a name="l14635"></a><span class="lineno">14635</span>&#160;}</div>
<div class="line"><a name="l14636"></a><span class="lineno">14636</span>&#160; </div>
<div class="line"><a name="l14637"></a><span class="lineno"><a class="line" href="classitem.html#a768ea4fe5f4b0b5054a91c4bab1a5bab">14637</a></span>&#160;<a class="code" href="classstring__id.html">skill_id</a> <a class="code" href="classitem.html#a768ea4fe5f4b0b5054a91c4bab1a5bab">item::contextualize_skill</a>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">skill_id</a> &amp;<span class="keywordtype">id</span> )<span class="keyword"> const</span></div>
<div class="line"><a name="l14638"></a><span class="lineno">14638</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14639"></a><span class="lineno">14639</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>-&gt;is_contextual_skill() ) {</div>
<div class="line"><a name="l14640"></a><span class="lineno">14640</span>&#160;        <span class="keywordflow">if</span>( <span class="keywordtype">id</span> == <a class="code" href="item_8cpp.html#a35f2f8386cafac888b1488869514370c">skill_weapon</a> ) {</div>
<div class="line"><a name="l14641"></a><span class="lineno">14641</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a name="l14642"></a><span class="lineno">14642</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">gun_skill</a>();</div>
<div class="line"><a name="l14643"></a><span class="lineno">14643</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">is_melee</a>() ) {</div>
<div class="line"><a name="l14644"></a><span class="lineno">14644</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classitem.html#a634166a0674bcf69eb3874c7e7789344">melee_skill</a>();</div>
<div class="line"><a name="l14645"></a><span class="lineno">14645</span>&#160;            }</div>
<div class="line"><a name="l14646"></a><span class="lineno">14646</span>&#160;        }</div>
<div class="line"><a name="l14647"></a><span class="lineno">14647</span>&#160;    }</div>
<div class="line"><a name="l14648"></a><span class="lineno">14648</span>&#160; </div>
<div class="line"><a name="l14649"></a><span class="lineno">14649</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>;</div>
<div class="line"><a name="l14650"></a><span class="lineno">14650</span>&#160;}</div>
<div class="line"><a name="l14651"></a><span class="lineno">14651</span>&#160; </div>
<div class="line"><a name="l14652"></a><span class="lineno"><a class="line" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">14652</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14653"></a><span class="lineno">14653</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14654"></a><span class="lineno">14654</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a> );</div>
<div class="line"><a name="l14655"></a><span class="lineno">14655</span>&#160;}</div>
<div class="line"><a name="l14656"></a><span class="lineno">14656</span>&#160; </div>
<div class="line"><a name="l14657"></a><span class="lineno"><a class="line" href="classitem.html#a953a3502d31bc8be819bd1259651943f">14657</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a953a3502d31bc8be819bd1259651943f">item::on_drop</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> )</div>
<div class="line"><a name="l14658"></a><span class="lineno">14658</span>&#160;{</div>
<div class="line"><a name="l14659"></a><span class="lineno">14659</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a953a3502d31bc8be819bd1259651943f">on_drop</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>() );</div>
<div class="line"><a name="l14660"></a><span class="lineno">14660</span>&#160;}</div>
<div class="line"><a name="l14661"></a><span class="lineno">14661</span>&#160; </div>
<div class="line"><a name="l14662"></a><span class="lineno"><a class="line" href="classitem.html#a1a81c29c8a1d2d96db60898e21a26e13">14662</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a953a3502d31bc8be819bd1259651943f">item::on_drop</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classmap.html">map</a> &amp;m )</div>
<div class="line"><a name="l14663"></a><span class="lineno">14663</span>&#160;{</div>
<div class="line"><a name="l14664"></a><span class="lineno">14664</span>&#160;    <span class="comment">// dropping liquids, even currently frozen ones, on the ground makes them</span></div>
<div class="line"><a name="l14665"></a><span class="lineno">14665</span>&#160;    <span class="comment">// dirty</span></div>
<div class="line"><a name="l14666"></a><span class="lineno">14666</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) &amp;&amp; !m.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaf7810de5bb3f477a91dc0bdec78cd5e">ter_furn_flag::TFLAG_LIQUIDCONT</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) &amp;&amp;</div>
<div class="line"><a name="l14667"></a><span class="lineno">14667</span>&#160;        !<a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> ) ) {</div>
<div class="line"><a name="l14668"></a><span class="lineno">14668</span>&#160;        <a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a> );</div>
<div class="line"><a name="l14669"></a><span class="lineno">14669</span>&#160;    }</div>
<div class="line"><a name="l14670"></a><span class="lineno">14670</span>&#160; </div>
<div class="line"><a name="l14671"></a><span class="lineno">14671</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l14672"></a><span class="lineno">14672</span>&#160; </div>
<div class="line"><a name="l14673"></a><span class="lineno">14673</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a> &amp;&amp; <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">drop_action</a>.<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( &amp;player_character, *<span class="keyword">this</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l14674"></a><span class="lineno">14674</span>&#160;}</div>
<div class="line"><a name="l14675"></a><span class="lineno">14675</span>&#160; </div>
<div class="line"><a name="l14676"></a><span class="lineno"><a class="line" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">14676</a></span>&#160;<a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">item::age</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14677"></a><span class="lineno">14677</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14678"></a><span class="lineno">14678</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - <a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>();</div>
<div class="line"><a name="l14679"></a><span class="lineno">14679</span>&#160;}</div>
<div class="line"><a name="l14680"></a><span class="lineno">14680</span>&#160; </div>
<div class="line"><a name="l14681"></a><span class="lineno"><a class="line" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">14681</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a>( <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp;age )</div>
<div class="line"><a name="l14682"></a><span class="lineno">14682</span>&#160;{</div>
<div class="line"><a name="l14683"></a><span class="lineno">14683</span>&#160;    <a class="code" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">set_birthday</a>( <a class="code" href="classtime__point.html">time_point</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) - <a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a> );</div>
<div class="line"><a name="l14684"></a><span class="lineno">14684</span>&#160;}</div>
<div class="line"><a name="l14685"></a><span class="lineno">14685</span>&#160; </div>
<div class="line"><a name="l14686"></a><span class="lineno"><a class="line" href="classitem.html#a46b9bb1181827a365eb83d935c663677">14686</a></span>&#160;<a class="code" href="classtime__point.html">time_point</a> <a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14687"></a><span class="lineno">14687</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14688"></a><span class="lineno">14688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a628659a14a3b57d0627ddd5093e94147">bday</a>;</div>
<div class="line"><a name="l14689"></a><span class="lineno">14689</span>&#160;}</div>
<div class="line"><a name="l14690"></a><span class="lineno">14690</span>&#160; </div>
<div class="line"><a name="l14691"></a><span class="lineno"><a class="line" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">14691</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">item::set_birthday</a>( <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;bday )</div>
<div class="line"><a name="l14692"></a><span class="lineno">14692</span>&#160;{</div>
<div class="line"><a name="l14693"></a><span class="lineno">14693</span>&#160;    this-&gt;bday = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a>, <a class="code" href="classitem.html#a628659a14a3b57d0627ddd5093e94147">bday</a> );</div>
<div class="line"><a name="l14694"></a><span class="lineno">14694</span>&#160;}</div>
<div class="line"><a name="l14695"></a><span class="lineno">14695</span>&#160; </div>
<div class="line"><a name="l14696"></a><span class="lineno"><a class="line" href="classitem.html#a47689c581570bdc5402297a2802428ed">14696</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a47689c581570bdc5402297a2802428ed">item::is_upgrade</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14697"></a><span class="lineno">14697</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14698"></a><span class="lineno">14698</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a> ) {</div>
<div class="line"><a name="l14699"></a><span class="lineno">14699</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14700"></a><span class="lineno">14700</span>&#160;    }</div>
<div class="line"><a name="l14701"></a><span class="lineno">14701</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;is_upgrade;</div>
<div class="line"><a name="l14702"></a><span class="lineno">14702</span>&#160;}</div>
<div class="line"><a name="l14703"></a><span class="lineno">14703</span>&#160; </div>
<div class="line"><a name="l14704"></a><span class="lineno"><a class="line" href="classitem.html#a2899a37f781e1efea9465a98277141c7">14704</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a2899a37f781e1efea9465a98277141c7">item::get_min_str</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14705"></a><span class="lineno">14705</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14706"></a><span class="lineno">14706</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;p = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l14707"></a><span class="lineno">14707</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a name="l14708"></a><span class="lineno">14708</span>&#160;        <span class="keywordtype">int</span> min_str = <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad8c03a65fe401a2c39c5f76116a46164">min_str</a>;</div>
<div class="line"><a name="l14709"></a><span class="lineno">14709</span>&#160;        min_str -= p.<a class="code" href="classCharacter.html#a44b075e18feedf619b9195d837623834">get_proficiency_bonus</a>( <span class="stringliteral">&quot;archery&quot;</span>, <a class="code" href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a5177790ad6df0ea98db41b37b602367c">proficiency_bonus_type::strength</a> );</div>
<div class="line"><a name="l14710"></a><span class="lineno">14710</span>&#160; </div>
<div class="line"><a name="l14711"></a><span class="lineno">14711</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> : <a class="code" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>() ) {</div>
<div class="line"><a name="l14712"></a><span class="lineno">14712</span>&#160;            min_str += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;type-&gt;gunmod-&gt;min_str_required_mod;</div>
<div class="line"><a name="l14713"></a><span class="lineno">14713</span>&#160;        }</div>
<div class="line"><a name="l14714"></a><span class="lineno">14714</span>&#160;        <span class="keywordflow">return</span> min_str &gt; 0 ? min_str : 0;</div>
<div class="line"><a name="l14715"></a><span class="lineno">14715</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14716"></a><span class="lineno">14716</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad8c03a65fe401a2c39c5f76116a46164">min_str</a>;</div>
<div class="line"><a name="l14717"></a><span class="lineno">14717</span>&#160;    }</div>
<div class="line"><a name="l14718"></a><span class="lineno">14718</span>&#160;}</div>
<div class="line"><a name="l14719"></a><span class="lineno">14719</span>&#160; </div>
<div class="line"><a name="l14720"></a><span class="lineno"><a class="line" href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">14720</a></span>&#160;std::vector&lt;item_comp&gt; <a class="code" href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">item::get_uncraft_components</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14721"></a><span class="lineno">14721</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14722"></a><span class="lineno">14722</span>&#160;    std::vector&lt;item_comp&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l14723"></a><span class="lineno">14723</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a>.<a class="code" href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">empty</a>() ) {</div>
<div class="line"><a name="l14724"></a><span class="lineno">14724</span>&#160;        <span class="comment">//If item wasn&#39;t crafted with specific components use default recipe</span></div>
<div class="line"><a name="l14725"></a><span class="lineno">14725</span>&#160;        std::vector&lt;std::vector&lt;item_comp&gt;&gt; <a class="code" href="classrecipe.html">recipe</a> = <a class="code" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>(</div>
<div class="line"><a name="l14726"></a><span class="lineno">14726</span>&#160;                                             <a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ).<a class="code" href="classrecipe.html#a555772480849b6e628c94dd0f56af81e">disassembly_requirements</a>().<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>();</div>
<div class="line"><a name="l14727"></a><span class="lineno">14727</span>&#160;        <span class="keywordflow">for</span>( std::vector&lt;item_comp&gt; &amp;<a class="code" href="structcomponent.html">component</a> : <a class="code" href="classrecipe.html">recipe</a> ) {</div>
<div class="line"><a name="l14728"></a><span class="lineno">14728</span>&#160;            <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.push_back( <a class="code" href="structcomponent.html">component</a>.front() );</div>
<div class="line"><a name="l14729"></a><span class="lineno">14729</span>&#160;        }</div>
<div class="line"><a name="l14730"></a><span class="lineno">14730</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14731"></a><span class="lineno">14731</span>&#160;        <span class="comment">//Make a new vector of components from the registered components</span></div>
<div class="line"><a name="l14732"></a><span class="lineno">14732</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a> &amp;tvp : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14733"></a><span class="lineno">14733</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> : tvp.second ) {</div>
<div class="line"><a name="l14734"></a><span class="lineno">14734</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="structcomponent.html">component</a>.has_flag( <a class="code" href="flag_8cpp.html#afe61856808e76510f6ae6de1da02a184">flag_UNRECOVERABLE</a> ) ) {</div>
<div class="line"><a name="l14735"></a><span class="lineno">14735</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l14736"></a><span class="lineno">14736</span>&#160;                }</div>
<div class="line"><a name="l14737"></a><span class="lineno">14737</span>&#160;                <span class="comment">// NOLINTNEXTLINE(clang-analyzer-cplusplus.NewDeleteLeaks)</span></div>
<div class="line"><a name="l14738"></a><span class="lineno">14738</span>&#160;                <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.begin(), <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.end(), [<a class="code" href="structcomponent.html">component</a>]( <a class="code" href="structitem__comp.html">item_comp</a> &amp; obj ) {</div>
<div class="line"><a name="l14739"></a><span class="lineno">14739</span>&#160;                    return obj.type == component.typeId();</div>
<div class="line"><a name="l14740"></a><span class="lineno">14740</span>&#160;                } );</div>
<div class="line"><a name="l14741"></a><span class="lineno">14741</span>&#160; </div>
<div class="line"><a name="l14742"></a><span class="lineno">14742</span>&#160;                <span class="keywordflow">if</span>( iter != <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.end() ) {</div>
<div class="line"><a name="l14743"></a><span class="lineno">14743</span>&#160;                    iter-&gt;count += <a class="code" href="structcomponent.html">component</a>.<a class="code" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a>();</div>
<div class="line"><a name="l14744"></a><span class="lineno">14744</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14745"></a><span class="lineno">14745</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( <a class="code" href="structcomponent.html">component</a>.typeId(), <a class="code" href="structcomponent.html">component</a>.<a class="code" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a>() );</div>
<div class="line"><a name="l14746"></a><span class="lineno">14746</span>&#160;                }</div>
<div class="line"><a name="l14747"></a><span class="lineno">14747</span>&#160;            }</div>
<div class="line"><a name="l14748"></a><span class="lineno">14748</span>&#160;        }</div>
<div class="line"><a name="l14749"></a><span class="lineno">14749</span>&#160;    }</div>
<div class="line"><a name="l14750"></a><span class="lineno">14750</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l14751"></a><span class="lineno">14751</span>&#160;}</div>
<div class="line"><a name="l14752"></a><span class="lineno">14752</span>&#160; </div>
<div class="line"><a name="l14753"></a><span class="lineno"><a class="line" href="classitem.html#a9a1f33d04abe5ec73a31213be8d0c44e">14753</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9a1f33d04abe5ec73a31213be8d0c44e">item::set_favorite</a>( <span class="keyword">const</span> <span class="keywordtype">bool</span> favorite )</div>
<div class="line"><a name="l14754"></a><span class="lineno">14754</span>&#160;{</div>
<div class="line"><a name="l14755"></a><span class="lineno">14755</span>&#160;    <a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> = favorite;</div>
<div class="line"><a name="l14756"></a><span class="lineno">14756</span>&#160;}</div>
<div class="line"><a name="l14757"></a><span class="lineno">14757</span>&#160; </div>
<div class="line"><a name="l14758"></a><span class="lineno"><a class="line" href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">14758</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;<a class="code" href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">item::get_making</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14759"></a><span class="lineno">14759</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14760"></a><span class="lineno">14760</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> ) {</div>
<div class="line"><a name="l14761"></a><span class="lineno">14761</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;&#39;%s&#39; is not a craft or has a null recipe&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14762"></a><span class="lineno">14762</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> dummy{};</div>
<div class="line"><a name="l14763"></a><span class="lineno">14763</span>&#160;        <span class="keywordflow">return</span> dummy;</div>
<div class="line"><a name="l14764"></a><span class="lineno">14764</span>&#160;    }</div>
<div class="line"><a name="l14765"></a><span class="lineno">14765</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making );</div>
<div class="line"><a name="l14766"></a><span class="lineno">14766</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making;</div>
<div class="line"><a name="l14767"></a><span class="lineno">14767</span>&#160;}</div>
<div class="line"><a name="l14768"></a><span class="lineno">14768</span>&#160; </div>
<div class="line"><a name="l14769"></a><span class="lineno"><a class="line" href="classitem.html#a69fe84aedebc97fec441f08f3f11abb1">14769</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a69fe84aedebc97fec441f08f3f11abb1">item::get_making_batch_size</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14770"></a><span class="lineno">14770</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14771"></a><span class="lineno">14771</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> ) {</div>
<div class="line"><a name="l14772"></a><span class="lineno">14772</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;&#39;%s&#39; is not a craft or has a null recipe&quot;</span>, <a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l14773"></a><span class="lineno">14773</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l14774"></a><span class="lineno">14774</span>&#160;    }</div>
<div class="line"><a name="l14775"></a><span class="lineno">14775</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;batch_size );</div>
<div class="line"><a name="l14776"></a><span class="lineno">14776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;batch_size;</div>
<div class="line"><a name="l14777"></a><span class="lineno">14777</span>&#160;}</div>
<div class="line"><a name="l14778"></a><span class="lineno">14778</span>&#160; </div>
<div class="line"><a name="l14779"></a><span class="lineno"><a class="line" href="classitem.html#aeb47151201f462dee6e622c061209431">14779</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aeb47151201f462dee6e622c061209431">item::set_tools_to_continue</a>( <span class="keywordtype">bool</span> value )</div>
<div class="line"><a name="l14780"></a><span class="lineno">14780</span>&#160;{</div>
<div class="line"><a name="l14781"></a><span class="lineno">14781</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> );</div>
<div class="line"><a name="l14782"></a><span class="lineno">14782</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;tools_to_continue = value;</div>
<div class="line"><a name="l14783"></a><span class="lineno">14783</span>&#160;}</div>
<div class="line"><a name="l14784"></a><span class="lineno">14784</span>&#160; </div>
<div class="line"><a name="l14785"></a><span class="lineno"><a class="line" href="classitem.html#a3e46e5d8e0848d74bfb7ab606125cbbe">14785</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3e46e5d8e0848d74bfb7ab606125cbbe">item::has_tools_to_continue</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14786"></a><span class="lineno">14786</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14787"></a><span class="lineno">14787</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> );</div>
<div class="line"><a name="l14788"></a><span class="lineno">14788</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;tools_to_continue;</div>
<div class="line"><a name="l14789"></a><span class="lineno">14789</span>&#160;}</div>
<div class="line"><a name="l14790"></a><span class="lineno">14790</span>&#160; </div>
<div class="line"><a name="l14791"></a><span class="lineno"><a class="line" href="classitem.html#aba52664635bd019bc5f853b1d184dc7e">14791</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aba52664635bd019bc5f853b1d184dc7e">item::set_cached_tool_selections</a>( <span class="keyword">const</span> std::vector&lt;<a class="code" href="structcomp__selection.html">comp_selection&lt;tool_comp&gt;</a>&gt; &amp;selections )</div>
<div class="line"><a name="l14792"></a><span class="lineno">14792</span>&#160;{</div>
<div class="line"><a name="l14793"></a><span class="lineno">14793</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> );</div>
<div class="line"><a name="l14794"></a><span class="lineno">14794</span>&#160;    <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_tool_selections = selections;</div>
<div class="line"><a name="l14795"></a><span class="lineno">14795</span>&#160;}</div>
<div class="line"><a name="l14796"></a><span class="lineno">14796</span>&#160; </div>
<div class="line"><a name="l14797"></a><span class="lineno"><a class="line" href="classitem.html#a3650e3828a796997cf5fa2f21cb2ee18">14797</a></span>&#160;<span class="keyword">const</span> std::vector&lt;comp_selection&lt;tool_comp&gt;&gt; &amp;<a class="code" href="classitem.html#a3650e3828a796997cf5fa2f21cb2ee18">item::get_cached_tool_selections</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14798"></a><span class="lineno">14798</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14799"></a><span class="lineno">14799</span>&#160;    <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a> );</div>
<div class="line"><a name="l14800"></a><span class="lineno">14800</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;cached_tool_selections;</div>
<div class="line"><a name="l14801"></a><span class="lineno">14801</span>&#160;}</div>
<div class="line"><a name="l14802"></a><span class="lineno">14802</span>&#160; </div>
<div class="line"><a name="l14803"></a><span class="lineno"><a class="line" href="classitem.html#a411163e892e27c57b802d0d015c05162">14803</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classcata_1_1value__ptr.html">cata::value_ptr&lt;islot_comestible&gt;</a> &amp;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">item::get_comestible</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14804"></a><span class="lineno">14804</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14805"></a><span class="lineno">14805</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() &amp;&amp; !<a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;disassembly ) {</div>
<div class="line"><a name="l14806"></a><span class="lineno">14806</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">find_type</a>( <a class="code" href="classitem.html#a622ee79075b1be44b58c5d752ab52241">craft_data_</a>-&gt;making-&gt;result() )-&gt;<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>;</div>
<div class="line"><a name="l14807"></a><span class="lineno">14807</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14808"></a><span class="lineno">14808</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">comestible</a>;</div>
<div class="line"><a name="l14809"></a><span class="lineno">14809</span>&#160;    }</div>
<div class="line"><a name="l14810"></a><span class="lineno">14810</span>&#160;}</div>
<div class="line"><a name="l14811"></a><span class="lineno">14811</span>&#160; </div>
<div class="line"><a name="l14812"></a><span class="lineno"><a class="line" href="classitem.html#ad1862bc5d5995e30dd224fab31d61f77">14812</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ad1862bc5d5995e30dd224fab31d61f77">item::has_clothing_mod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14813"></a><span class="lineno">14813</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14814"></a><span class="lineno">14814</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structclothing__mod.html">clothing_mod</a> &amp;cm : <a class="code" href="namespaceclothing__mods.html#a76b8b8dcfd6c0d1af778f5722bbb3bdb">clothing_mods::get_all</a>() ) {</div>
<div class="line"><a name="l14815"></a><span class="lineno">14815</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( cm.flag ) ) {</div>
<div class="line"><a name="l14816"></a><span class="lineno">14816</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14817"></a><span class="lineno">14817</span>&#160;        }</div>
<div class="line"><a name="l14818"></a><span class="lineno">14818</span>&#160;    }</div>
<div class="line"><a name="l14819"></a><span class="lineno">14819</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14820"></a><span class="lineno">14820</span>&#160;}</div>
<div class="line"><a name="l14821"></a><span class="lineno">14821</span>&#160; </div>
<div class="line"><a name="l14822"></a><span class="lineno"><a class="line" href="item_8cpp.html#a853b3e08bd37bd6d41d1b057f3770e74">14822</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::string &amp;<a class="code" href="item_8cpp.html#a853b3e08bd37bd6d41d1b057f3770e74">get_clothing_mod_val_key</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152">clothing_mod_type</a> type )</div>
<div class="line"><a name="l14823"></a><span class="lineno">14823</span>&#160;{</div>
<div class="line"><a name="l14824"></a><span class="lineno">14824</span>&#160;    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">auto</span> cache = ( []() {</div>
<div class="line"><a name="l14825"></a><span class="lineno">14825</span>&#160;        std::array&lt;std::string, <a class="code" href="namespaceclothing__mods.html#aec1b637295ff2f661b88d4c77692e176">clothing_mods::all_clothing_mod_types</a>.size()&gt; res;</div>
<div class="line"><a name="l14826"></a><span class="lineno">14826</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152">clothing_mod_type</a> &amp;type : <a class="code" href="namespaceclothing__mods.html#aec1b637295ff2f661b88d4c77692e176">clothing_mods::all_clothing_mod_types</a> ) {</div>
<div class="line"><a name="l14827"></a><span class="lineno">14827</span>&#160;            res[type] = <a class="code" href="item_8cpp.html#aab0054280289e72ae8b8d9f062e20e47">CLOTHING_MOD_VAR_PREFIX</a> + <a class="code" href="namespaceclothing__mods.html#a5bf63dd4b0368188aa71cfa230cfa989">clothing_mods::string_from_clothing_mod_type</a>(</div>
<div class="line"><a name="l14828"></a><span class="lineno">14828</span>&#160;                            <a class="code" href="namespaceclothing__mods.html#aec1b637295ff2f661b88d4c77692e176">clothing_mods::all_clothing_mod_types</a>[type]</div>
<div class="line"><a name="l14829"></a><span class="lineno">14829</span>&#160;                        );</div>
<div class="line"><a name="l14830"></a><span class="lineno">14830</span>&#160;        }</div>
<div class="line"><a name="l14831"></a><span class="lineno">14831</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l14832"></a><span class="lineno">14832</span>&#160;    } )();</div>
<div class="line"><a name="l14833"></a><span class="lineno">14833</span>&#160; </div>
<div class="line"><a name="l14834"></a><span class="lineno">14834</span>&#160;    <span class="keywordflow">return</span> cache[ type ];</div>
<div class="line"><a name="l14835"></a><span class="lineno">14835</span>&#160;}</div>
<div class="line"><a name="l14836"></a><span class="lineno">14836</span>&#160; </div>
<div class="line"><a name="l14837"></a><span class="lineno"><a class="line" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">14837</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">item::get_clothing_mod_val</a>( <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152">clothing_mod_type</a> type )<span class="keyword"> const</span></div>
<div class="line"><a name="l14838"></a><span class="lineno">14838</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14839"></a><span class="lineno">14839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <a class="code" href="item_8cpp.html#a853b3e08bd37bd6d41d1b057f3770e74">get_clothing_mod_val_key</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ), 0.0f );</div>
<div class="line"><a name="l14840"></a><span class="lineno">14840</span>&#160;}</div>
<div class="line"><a name="l14841"></a><span class="lineno">14841</span>&#160; </div>
<div class="line"><a name="l14842"></a><span class="lineno"><a class="line" href="classitem.html#adbfe451148cddb54b8b4443bf85fe670">14842</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#adbfe451148cddb54b8b4443bf85fe670">item::update_clothing_mod_val</a>()</div>
<div class="line"><a name="l14843"></a><span class="lineno">14843</span>&#160;{</div>
<div class="line"><a name="l14844"></a><span class="lineno">14844</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152">clothing_mod_type</a> &amp;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> : <a class="code" href="namespaceclothing__mods.html#aec1b637295ff2f661b88d4c77692e176">clothing_mods::all_clothing_mod_types</a> ) {</div>
<div class="line"><a name="l14845"></a><span class="lineno">14845</span>&#160;        <span class="keywordtype">float</span> tmp = 0.0f;</div>
<div class="line"><a name="l14846"></a><span class="lineno">14846</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structclothing__mod.html">clothing_mod</a> &amp;cm : <a class="code" href="namespaceclothing__mods.html#a8f2f25d2cd5b92e4ab3f62cfd98d7c6e">clothing_mods::get_all_with</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ) ) {</div>
<div class="line"><a name="l14847"></a><span class="lineno">14847</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">has_own_flag</a>( cm.flag ) ) {</div>
<div class="line"><a name="l14848"></a><span class="lineno">14848</span>&#160;                tmp += cm.get_mod_val( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>, *<span class="keyword">this</span> );</div>
<div class="line"><a name="l14849"></a><span class="lineno">14849</span>&#160;            }</div>
<div class="line"><a name="l14850"></a><span class="lineno">14850</span>&#160;        }</div>
<div class="line"><a name="l14851"></a><span class="lineno">14851</span>&#160;        <a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <a class="code" href="item_8cpp.html#a853b3e08bd37bd6d41d1b057f3770e74">get_clothing_mod_val_key</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> ), tmp );</div>
<div class="line"><a name="l14852"></a><span class="lineno">14852</span>&#160;    }</div>
<div class="line"><a name="l14853"></a><span class="lineno">14853</span>&#160;}</div>
<div class="line"><a name="l14854"></a><span class="lineno">14854</span>&#160; </div>
<div class="line"><a name="l14855"></a><span class="lineno"><a class="line" href="classitem.html#ae4b50776f23f2cfa6cee8a8141da5b7c">14855</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#ae4b50776f23f2cfa6cee8a8141da5b7c">item::check_for_free_space</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14856"></a><span class="lineno">14856</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14857"></a><span class="lineno">14857</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>;</div>
<div class="line"><a name="l14858"></a><span class="lineno">14858</span>&#160; </div>
<div class="line"><a name="l14859"></a><span class="lineno">14859</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *container : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ) {</div>
<div class="line"><a name="l14860"></a><span class="lineno">14860</span>&#160;        std::vector&lt;const item_pocket *&gt; containedPockets =</div>
<div class="line"><a name="l14861"></a><span class="lineno">14861</span>&#160;            container-&gt;contents.get_all_contained_pockets();</div>
<div class="line"><a name="l14862"></a><span class="lineno">14862</span>&#160;        <span class="keywordflow">if</span>( !containedPockets.empty() ) {</div>
<div class="line"><a name="l14863"></a><span class="lineno">14863</span>&#160;            <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a> += container-&gt;check_for_free_space();</div>
<div class="line"><a name="l14864"></a><span class="lineno">14864</span>&#160; </div>
<div class="line"><a name="l14865"></a><span class="lineno">14865</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__pocket.html">item_pocket</a> *pocket : containedPockets ) {</div>
<div class="line"><a name="l14866"></a><span class="lineno">14866</span>&#160;                <span class="keywordflow">if</span>( pocket-&gt;rigid() &amp;&amp; ( pocket-&gt;empty() || pocket-&gt;contains_phase( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l14867"></a><span class="lineno">14867</span>&#160;                    pocket-&gt;get_pocket_data()-&gt;ammo_restriction.empty() ) {</div>
<div class="line"><a name="l14868"></a><span class="lineno">14868</span>&#160;                    <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a> += pocket-&gt;remaining_volume();</div>
<div class="line"><a name="l14869"></a><span class="lineno">14869</span>&#160;                }</div>
<div class="line"><a name="l14870"></a><span class="lineno">14870</span>&#160;            }</div>
<div class="line"><a name="l14871"></a><span class="lineno">14871</span>&#160;        }</div>
<div class="line"><a name="l14872"></a><span class="lineno">14872</span>&#160;    }</div>
<div class="line"><a name="l14873"></a><span class="lineno">14873</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>;</div>
<div class="line"><a name="l14874"></a><span class="lineno">14874</span>&#160;}</div>
<div class="line"><a name="l14875"></a><span class="lineno">14875</span>&#160; </div>
<div class="line"><a name="l14876"></a><span class="lineno"><a class="line" href="classitem.html#a4157fd25455cac5772aad99e839ecc2e">14876</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#a4157fd25455cac5772aad99e839ecc2e">item::get_pocket_size</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14877"></a><span class="lineno">14877</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14878"></a><span class="lineno">14878</span>&#160;    <span class="comment">// set the amount of space that will be used on the vest based on the size of the item</span></div>
<div class="line"><a name="l14879"></a><span class="lineno">14879</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6dc199244886ed3da302fbbb227ff922">flag_PALS_SMALL</a> ) ) {</div>
<div class="line"><a name="l14880"></a><span class="lineno">14880</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l14881"></a><span class="lineno">14881</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9f2a9f68be69a11f6f6fcbedbfe05835">flag_PALS_MEDIUM</a> ) ) {</div>
<div class="line"><a name="l14882"></a><span class="lineno">14882</span>&#160;        <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l14883"></a><span class="lineno">14883</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l14884"></a><span class="lineno">14884</span>&#160;        <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l14885"></a><span class="lineno">14885</span>&#160;    }</div>
<div class="line"><a name="l14886"></a><span class="lineno">14886</span>&#160;}</div>
<div class="line"><a name="l14887"></a><span class="lineno">14887</span>&#160; </div>
<div class="line"><a name="l14888"></a><span class="lineno"><a class="line" href="classitem.html#ace59d37f7711f9fbd823b43e8fa78ea9">14888</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ace59d37f7711f9fbd823b43e8fa78ea9">item::can_attach_as_pocket</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14889"></a><span class="lineno">14889</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14890"></a><span class="lineno">14890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a6dc199244886ed3da302fbbb227ff922">flag_PALS_SMALL</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9f2a9f68be69a11f6f6fcbedbfe05835">flag_PALS_MEDIUM</a> ) || <a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae741f745ab363a02cbe98252522460f5">flag_PALS_LARGE</a> );</div>
<div class="line"><a name="l14891"></a><span class="lineno">14891</span>&#160;}</div>
<div class="line"><a name="l14892"></a><span class="lineno">14892</span>&#160; </div>
<div class="line"><a name="l14893"></a><span class="lineno"><a class="line" href="classitem.html#a8fa04ac19333613fdc072b87b3243a4b">14893</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a8fa04ac19333613fdc072b87b3243a4b">item::get_selected_stack_volume</a>( <span class="keyword">const</span> std::map&lt;const item *, int&gt; &amp;without )<span class="keyword"> const</span></div>
<div class="line"><a name="l14894"></a><span class="lineno">14894</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14895"></a><span class="lineno">14895</span>&#160;    <span class="keyword">auto</span> stack = without.find( <span class="keyword">this</span> );</div>
<div class="line"><a name="l14896"></a><span class="lineno">14896</span>&#160;    <span class="keywordflow">if</span>( stack != without.end() ) {</div>
<div class="line"><a name="l14897"></a><span class="lineno">14897</span>&#160;        <span class="keywordtype">int</span> selected = stack-&gt;second;</div>
<div class="line"><a name="l14898"></a><span class="lineno">14898</span>&#160;        <a class="code" href="classitem.html">item</a> copy = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l14899"></a><span class="lineno">14899</span>&#160;        copy.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = selected;</div>
<div class="line"><a name="l14900"></a><span class="lineno">14900</span>&#160;        <span class="keywordflow">return</span> copy.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>();</div>
<div class="line"><a name="l14901"></a><span class="lineno">14901</span>&#160;    }</div>
<div class="line"><a name="l14902"></a><span class="lineno">14902</span>&#160; </div>
<div class="line"><a name="l14903"></a><span class="lineno">14903</span>&#160;    <span class="keywordflow">return</span> 0_ml;</div>
<div class="line"><a name="l14904"></a><span class="lineno">14904</span>&#160;}</div>
<div class="line"><a name="l14905"></a><span class="lineno">14905</span>&#160; </div>
<div class="line"><a name="l14906"></a><span class="lineno"><a class="line" href="classitem.html#a3836554f6063653372840728450ee378">14906</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a3836554f6063653372840728450ee378">item::has_unrestricted_pockets</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14907"></a><span class="lineno">14907</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14908"></a><span class="lineno">14908</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5c3e36a9e90cc0564ffe4d043e09c72">has_unrestricted_pockets</a>();</div>
<div class="line"><a name="l14909"></a><span class="lineno">14909</span>&#160;}</div>
<div class="line"><a name="l14910"></a><span class="lineno">14910</span>&#160; </div>
<div class="line"><a name="l14911"></a><span class="lineno"><a class="line" href="classitem.html#a3cec13f21640930df18b160a36083796">14911</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#a3cec13f21640930df18b160a36083796">item::get_contents_volume_with_tweaks</a>( <span class="keyword">const</span> std::map&lt;const item *, int&gt; &amp;without )<span class="keyword"></span></div>
<div class="line"><a name="l14912"></a><span class="lineno">14912</span>&#160;<span class="keyword">const</span></div>
<div class="line"><a name="l14913"></a><span class="lineno">14913</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14914"></a><span class="lineno">14914</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a2bc1b5de8b4f3c76ea1e99cc77b20954">get_contents_volume_with_tweaks</a>( without );</div>
<div class="line"><a name="l14915"></a><span class="lineno">14915</span>&#160;}</div>
<div class="line"><a name="l14916"></a><span class="lineno">14916</span>&#160; </div>
<div class="line"><a name="l14917"></a><span class="lineno"><a class="line" href="classitem.html#ab0c2f8561a1e504f056e26ef5fae1135">14917</a></span>&#160;<a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="classitem.html#ab0c2f8561a1e504f056e26ef5fae1135">item::get_nested_content_volume_recursive</a>( <span class="keyword">const</span> std::map&lt;const item *, int&gt;</div>
<div class="line"><a name="l14918"></a><span class="lineno">14918</span>&#160;        &amp;without )<span class="keyword"></span></div>
<div class="line"><a name="l14919"></a><span class="lineno">14919</span>&#160;<span class="keyword">const</span></div>
<div class="line"><a name="l14920"></a><span class="lineno">14920</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14921"></a><span class="lineno">14921</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ab475da480fffb19572e7fe47380ddac5">get_nested_content_volume_recursive</a>( without );</div>
<div class="line"><a name="l14922"></a><span class="lineno">14922</span>&#160;}</div>
<div class="line"><a name="l14923"></a><span class="lineno">14923</span>&#160; </div>
<div class="line"><a name="l14924"></a><span class="lineno"><a class="line" href="classitem.html#ad569a7656fe40a87b977c9a934af6219">14924</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classitem.html#ad569a7656fe40a87b977c9a934af6219">item::get_recursive_disassemble_moves</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;guy )<span class="keyword"> const</span></div>
<div class="line"><a name="l14925"></a><span class="lineno">14925</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14926"></a><span class="lineno">14926</span>&#160;    <span class="keywordtype">int</span> moves = <a class="code" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() ).<a class="code" href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">time_to_craft_moves</a>( guy,</div>
<div class="line"><a name="l14927"></a><span class="lineno">14927</span>&#160;                <a class="code" href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a> );</div>
<div class="line"><a name="l14928"></a><span class="lineno">14928</span>&#160;    std::vector&lt;item_comp&gt; to_be_disassembled = <a class="code" href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">get_uncraft_components</a>();</div>
<div class="line"><a name="l14929"></a><span class="lineno">14929</span>&#160;    <span class="keywordflow">while</span>( !to_be_disassembled.empty() ) {</div>
<div class="line"><a name="l14930"></a><span class="lineno">14930</span>&#160;        <a class="code" href="structitem__comp.html">item_comp</a> current_comp = to_be_disassembled.back();</div>
<div class="line"><a name="l14931"></a><span class="lineno">14931</span>&#160;        to_be_disassembled.pop_back();</div>
<div class="line"><a name="l14932"></a><span class="lineno">14932</span>&#160;        <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;r = <a class="code" href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a>( current_comp.<a class="code" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() );</div>
<div class="line"><a name="l14933"></a><span class="lineno">14933</span>&#160;        <span class="keywordflow">if</span>( r.<a class="code" href="classrecipe.html#aa75469c5d2213a774931a5abf668a9dc">ident</a>() != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">recipe_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l14934"></a><span class="lineno">14934</span>&#160;            moves += r.<a class="code" href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">time_to_craft_moves</a>( guy ) * current_comp.<a class="code" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a>;</div>
<div class="line"><a name="l14935"></a><span class="lineno">14935</span>&#160;            std::vector&lt;item_comp&gt; <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> = <a class="code" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( current_comp.<a class="code" href="structcomponent.html#a9c114293306257abbc1db25073fc0492">type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() ).get_uncraft_components();</div>
<div class="line"><a name="l14936"></a><span class="lineno">14936</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="structitem__comp.html">item_comp</a> &amp;<a class="code" href="structcomponent.html">component</a> : <a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l14937"></a><span class="lineno">14937</span>&#160;                <a class="code" href="structcomponent.html">component</a>.<a class="code" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a> *= current_comp.<a class="code" href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">count</a>;</div>
<div class="line"><a name="l14938"></a><span class="lineno">14938</span>&#160;                to_be_disassembled.push_back( <a class="code" href="structcomponent.html">component</a> );</div>
<div class="line"><a name="l14939"></a><span class="lineno">14939</span>&#160;            }</div>
<div class="line"><a name="l14940"></a><span class="lineno">14940</span>&#160;        }</div>
<div class="line"><a name="l14941"></a><span class="lineno">14941</span>&#160;    }</div>
<div class="line"><a name="l14942"></a><span class="lineno">14942</span>&#160;    <span class="keywordflow">return</span> moves;</div>
<div class="line"><a name="l14943"></a><span class="lineno">14943</span>&#160;}</div>
<div class="line"><a name="l14944"></a><span class="lineno">14944</span>&#160; </div>
<div class="line"><a name="l14945"></a><span class="lineno"><a class="line" href="classitem.html#a74f491e132994002d7bb107c8c56f2f3">14945</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a74f491e132994002d7bb107c8c56f2f3">item::remove_internal</a>( <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;filter,</div>
<div class="line"><a name="l14946"></a><span class="lineno">14946</span>&#160;                            <span class="keywordtype">int</span> &amp;count, std::list&lt;item&gt; &amp;res )</div>
<div class="line"><a name="l14947"></a><span class="lineno">14947</span>&#160;{</div>
<div class="line"><a name="l14948"></a><span class="lineno">14948</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac7536530b171a0b835eca8b31fdbad49">remove_internal</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>, res );</div>
<div class="line"><a name="l14949"></a><span class="lineno">14949</span>&#160;}</div>
<div class="line"><a name="l14950"></a><span class="lineno">14950</span>&#160; </div>
<div class="line"><a name="l14951"></a><span class="lineno"><a class="line" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">14951</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14952"></a><span class="lineno">14952</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14953"></a><span class="lineno">14953</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>();</div>
<div class="line"><a name="l14954"></a><span class="lineno">14954</span>&#160;}</div>
<div class="line"><a name="l14955"></a><span class="lineno">14955</span>&#160; </div>
<div class="line"><a name="l14956"></a><span class="lineno"><a class="line" href="classitem.html#ad94b77ba800fc2ce124cbaa6807dddbe">14956</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a>()</div>
<div class="line"><a name="l14957"></a><span class="lineno">14957</span>&#160;{</div>
<div class="line"><a name="l14958"></a><span class="lineno">14958</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>();</div>
<div class="line"><a name="l14959"></a><span class="lineno">14959</span>&#160;}</div>
<div class="line"><a name="l14960"></a><span class="lineno">14960</span>&#160; </div>
<div class="line"><a name="l14961"></a><span class="lineno"><a class="line" href="classitem.html#a0cb80094f86776437f5481739d40dc3a">14961</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l14962"></a><span class="lineno">14962</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14963"></a><span class="lineno">14963</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( pk_type );</div>
<div class="line"><a name="l14964"></a><span class="lineno">14964</span>&#160;}</div>
<div class="line"><a name="l14965"></a><span class="lineno">14965</span>&#160; </div>
<div class="line"><a name="l14966"></a><span class="lineno"><a class="line" href="classitem.html#a3f703631615a0214eb9e6eff4a838cfa">14966</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type, <span class="keywordtype">bool</span> unloading )</div>
<div class="line"><a name="l14967"></a><span class="lineno">14967</span>&#160;{</div>
<div class="line"><a name="l14968"></a><span class="lineno">14968</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( pk_type, unloading );</div>
<div class="line"><a name="l14969"></a><span class="lineno">14969</span>&#160;}</div>
<div class="line"><a name="l14970"></a><span class="lineno">14970</span>&#160; </div>
<div class="line"><a name="l14971"></a><span class="lineno"><a class="line" href="classitem.html#a07a52eee8d2698d3bb89b988992d98cb">14971</a></span>&#160;<a class="code" href="classitem.html">item</a> <span class="keyword">const</span> *<a class="code" href="classitem.html#a07a52eee8d2698d3bb89b988992d98cb">item::this_or_single_content</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14972"></a><span class="lineno">14972</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14973"></a><span class="lineno">14973</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">category_force</a> == <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a> &amp;&amp; <a class="code" href="classitem.html#a9691e635ae33464eb0b2700e8bfce0ba">contents_only_one_type</a>()</div>
<div class="line"><a name="l14974"></a><span class="lineno">14974</span>&#160;           ? &amp;<a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ac610119ad38ef4567c80490e9b0e5f83">first_item</a>()</div>
<div class="line"><a name="l14975"></a><span class="lineno">14975</span>&#160;           : <span class="keyword">this</span>;</div>
<div class="line"><a name="l14976"></a><span class="lineno">14976</span>&#160;}</div>
<div class="line"><a name="l14977"></a><span class="lineno">14977</span>&#160; </div>
<div class="line"><a name="l14978"></a><span class="lineno"><a class="line" href="classitem.html#a9691e635ae33464eb0b2700e8bfce0ba">14978</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a9691e635ae33464eb0b2700e8bfce0ba">item::contents_only_one_type</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l14979"></a><span class="lineno">14979</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l14980"></a><span class="lineno">14980</span>&#160;    std::list&lt;const item *&gt; <span class="keyword">const</span> items = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( []( <a class="code" href="classitem__pocket.html">item_pocket</a> <span class="keyword">const</span> &amp; pkt ) {</div>
<div class="line"><a name="l14981"></a><span class="lineno">14981</span>&#160;        <span class="keywordflow">return</span> pkt.<a class="code" href="classitem__pocket.html#a5fc5de48e66d4c8f9fa7a9a671db731c">is_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) ||</div>
<div class="line"><a name="l14982"></a><span class="lineno">14982</span>&#160;               pkt.<a class="code" href="classitem__pocket.html#a5fc5de48e66d4c8f9fa7a9a671db731c">is_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548">pocket_type::SOFTWARE</a> );</div>
<div class="line"><a name="l14983"></a><span class="lineno">14983</span>&#160;    } );</div>
<div class="line"><a name="l14984"></a><span class="lineno">14984</span>&#160;    <span class="keywordflow">return</span> items.size() == 1 ||</div>
<div class="line"><a name="l14985"></a><span class="lineno">14985</span>&#160;           ( items.size() &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l14986"></a><span class="lineno">14986</span>&#160;    std::all_of( ++items.begin(), items.end(), [&amp;items]( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> * e ) {</div>
<div class="line"><a name="l14987"></a><span class="lineno">14987</span>&#160;        return e-&gt;stacks_with( *items.front() );</div>
<div class="line"><a name="l14988"></a><span class="lineno">14988</span>&#160;    } ) );</div>
<div class="line"><a name="l14989"></a><span class="lineno">14989</span>&#160;}</div>
<div class="line"><a name="l14990"></a><span class="lineno">14990</span>&#160; </div>
<div class="line"><a name="l14991"></a><span class="lineno">14991</span>&#160;<span class="keyword">namespace</span></div>
<div class="line"><a name="l14992"></a><span class="lineno">14992</span>&#160;{</div>
<div class="line"><a name="l14993"></a><span class="lineno">14993</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="line"><a name="l14994"></a><span class="lineno"><a class="line" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4166bdcd785ee2daa27f06ecdc80932f">14994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4166bdcd785ee2daa27f06ecdc80932f">_aggregate</a>( C &amp;container, <span class="keyword">typename</span> C::key_type <span class="keyword">const</span> &amp;key, <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> *it,</div>
<div class="line"><a name="l14995"></a><span class="lineno">14995</span>&#160;                 <a class="code" href="structitem_1_1aggregate__t.html">item::aggregate_t</a> *&amp;running_max, <a class="code" href="structitem_1_1aggregate__t.html">item::aggregate_t</a> *&amp;max_type, <span class="keywordtype">int</span> depth,</div>
<div class="line"><a name="l14996"></a><span class="lineno">14996</span>&#160;                 <span class="keywordtype">int</span> maxdepth )</div>
<div class="line"><a name="l14997"></a><span class="lineno">14997</span>&#160;{</div>
<div class="line"><a name="l14998"></a><span class="lineno">14998</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> [iter, emplaced] = container.emplace( key, it );</div>
<div class="line"><a name="l14999"></a><span class="lineno">14999</span>&#160;    <span class="keywordflow">if</span>( emplaced &amp;&amp; running_max == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l15000"></a><span class="lineno">15000</span>&#160;        running_max = &amp;iter-&gt;second;</div>
<div class="line"><a name="l15001"></a><span class="lineno">15001</span>&#160;        max_type = running_max;</div>
<div class="line"><a name="l15002"></a><span class="lineno">15002</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !emplaced ) {</div>
<div class="line"><a name="l15003"></a><span class="lineno">15003</span>&#160;        iter-&gt;second.<a class="code" href="structitem_1_1aggregate__t.html#a8db1d54c2dab4f669c95edac6cf41984">info</a>.<a class="code" href="structstacking__info.html#ad047ffeca5b2ced345af5b8397977b1d">bits</a> &amp;=</div>
<div class="line"><a name="l15004"></a><span class="lineno">15004</span>&#160;            iter-&gt;second.header-&gt;stacks_with( *it, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, depth, maxdepth ).<a class="code" href="classenum__bitset.html#addf85163dfe9c15315bf91c68361551b">bits</a>;</div>
<div class="line"><a name="l15005"></a><span class="lineno">15005</span>&#160;        ++iter-&gt;second.count;</div>
<div class="line"><a name="l15006"></a><span class="lineno">15006</span>&#160; </div>
<div class="line"><a name="l15007"></a><span class="lineno">15007</span>&#160;        <span class="keywordflow">if</span> constexpr( std::is_same_v&lt;itype_id, typename C::key_type&gt; ) {</div>
<div class="line"><a name="l15008"></a><span class="lineno">15008</span>&#160;            max_type = max_type-&gt;<a class="code" href="structitem_1_1aggregate__t.html#a08c10d241688b82489eb63922b6710cd">count</a> &lt; iter-&gt;second.count ? &amp;iter-&gt;second : max_type;</div>
<div class="line"><a name="l15009"></a><span class="lineno">15009</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l15010"></a><span class="lineno">15010</span>&#160;            iter-&gt;second.<a class="code" href="structitem_1_1aggregate__t.html#a8db1d54c2dab4f669c95edac6cf41984">info</a>.<a class="code" href="structstacking__info.html#ad047ffeca5b2ced345af5b8397977b1d">bits</a>.<a class="code" href="classenum__bitset.html#a2a1b6147804bf7032c357fa73f9e6e74">reset</a>( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79">tname::segments::TYPE</a> );</div>
<div class="line"><a name="l15011"></a><span class="lineno">15011</span>&#160;        }</div>
<div class="line"><a name="l15012"></a><span class="lineno">15012</span>&#160; </div>
<div class="line"><a name="l15013"></a><span class="lineno">15013</span>&#160;        running_max = running_max-&gt;<a class="code" href="structitem_1_1aggregate__t.html#a08c10d241688b82489eb63922b6710cd">count</a> &lt; iter-&gt;second.count ? &amp;iter-&gt;second : running_max;</div>
<div class="line"><a name="l15014"></a><span class="lineno">15014</span>&#160;    }</div>
<div class="line"><a name="l15015"></a><span class="lineno">15015</span>&#160;}</div>
<div class="line"><a name="l15016"></a><span class="lineno">15016</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l15017"></a><span class="lineno">15017</span>&#160; </div>
<div class="line"><a name="l15018"></a><span class="lineno"><a class="line" href="classitem.html#a95c467c19e7fbcb31345109e6d7d9723">15018</a></span>&#160;<a class="code" href="structitem_1_1aggregate__t.html">item::aggregate_t</a> <a class="code" href="classitem.html#a95c467c19e7fbcb31345109e6d7d9723">item::aggregated_contents</a>( <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> maxdepth )<span class="keyword"> const</span></div>
<div class="line"><a name="l15019"></a><span class="lineno">15019</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15020"></a><span class="lineno">15020</span>&#160;    constexpr <span class="keywordtype">double</span> cutoff = 0.5;</div>
<div class="line"><a name="l15021"></a><span class="lineno">15021</span>&#160; </div>
<div class="line"><a name="l15022"></a><span class="lineno">15022</span>&#160;    std::unordered_map&lt;itype_id, aggregate_t&gt; types;</div>
<div class="line"><a name="l15023"></a><span class="lineno">15023</span>&#160;    std::unordered_map&lt;item_category_id, aggregate_t&gt; cats;</div>
<div class="line"><a name="l15024"></a><span class="lineno">15024</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total{};</div>
<div class="line"><a name="l15025"></a><span class="lineno">15025</span>&#160;    <a class="code" href="structitem_1_1aggregate__t.html">aggregate_t</a> *running_max{};</div>
<div class="line"><a name="l15026"></a><span class="lineno">15026</span>&#160;    <a class="code" href="structitem_1_1aggregate__t.html">aggregate_t</a> *max_type{};</div>
<div class="line"><a name="l15027"></a><span class="lineno">15027</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> cont_and_soft = []( <a class="code" href="classitem__pocket.html">item_pocket</a> <span class="keyword">const</span> &amp; pkt ) {</div>
<div class="line"><a name="l15028"></a><span class="lineno">15028</span>&#160;        <span class="keywordflow">return</span> pkt.is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> ) || pkt.is_type( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548">pocket_type::SOFTWARE</a> );</div>
<div class="line"><a name="l15029"></a><span class="lineno">15029</span>&#160;    };</div>
<div class="line"><a name="l15030"></a><span class="lineno">15030</span>&#160; </div>
<div class="line"><a name="l15031"></a><span class="lineno">15031</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem__pocket.html">item_pocket</a> <span class="keyword">const</span> *pk : <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa63a64b9dda0208d68267945e7b76615">get_pockets</a>( cont_and_soft ) ) {</div>
<div class="line"><a name="l15032"></a><span class="lineno">15032</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> <span class="keyword">const</span> *pkit : pk-&gt;<a class="code" href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">all_items_top</a>() ) {</div>
<div class="line"><a name="l15033"></a><span class="lineno">15033</span>&#160;            total++;</div>
<div class="line"><a name="l15034"></a><span class="lineno">15034</span>&#160;            <a class="code" href="classstring__id.html">item_category_id</a> <span class="keyword">const</span> cat = pkit-&gt;get_category_of_contents( depth, maxdepth ).<a class="code" href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">get_id</a>();</div>
<div class="line"><a name="l15035"></a><span class="lineno">15035</span>&#160;            <span class="keywordtype">bool</span> <span class="keyword">const</span> type_ok = pkit-&gt;type-&gt;category_force != <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a> ||</div>
<div class="line"><a name="l15036"></a><span class="lineno">15036</span>&#160;                                 cat == <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a>;</div>
<div class="line"><a name="l15037"></a><span class="lineno">15037</span>&#160;            <span class="keywordflow">if</span>( type_ok ) {</div>
<div class="line"><a name="l15038"></a><span class="lineno">15038</span>&#160;                <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4166bdcd785ee2daa27f06ecdc80932f">_aggregate</a>( types, pkit-&gt;typeId(), pkit, running_max, max_type, depth, maxdepth );</div>
<div class="line"><a name="l15039"></a><span class="lineno">15039</span>&#160;            }</div>
<div class="line"><a name="l15040"></a><span class="lineno">15040</span>&#160;            <a class="code" href="namespaceanonymous__namespace_02item_8cpp_03.html#a4166bdcd785ee2daa27f06ecdc80932f">_aggregate</a>( cats, cat, pkit, running_max, max_type, depth, maxdepth );</div>
<div class="line"><a name="l15041"></a><span class="lineno">15041</span>&#160;        }</div>
<div class="line"><a name="l15042"></a><span class="lineno">15042</span>&#160;    }</div>
<div class="line"><a name="l15043"></a><span class="lineno">15043</span>&#160;    <span class="keywordflow">if</span>( running_max == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l15044"></a><span class="lineno">15044</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l15045"></a><span class="lineno">15045</span>&#160;    }</div>
<div class="line"><a name="l15046"></a><span class="lineno">15046</span>&#160; </div>
<div class="line"><a name="l15047"></a><span class="lineno">15047</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> cutoff_check =</div>
<div class="line"><a name="l15048"></a><span class="lineno">15048</span>&#160;        total &lt; 3 ? total - 1 : <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( total * cutoff ) );</div>
<div class="line"><a name="l15049"></a><span class="lineno">15049</span>&#160; </div>
<div class="line"><a name="l15050"></a><span class="lineno">15050</span>&#160;    <span class="comment">// alow a type to still dominate over its own category</span></div>
<div class="line"><a name="l15051"></a><span class="lineno">15051</span>&#160;    <span class="keywordflow">if</span>( max_type-&gt;count &gt; cutoff_check &amp;&amp;</div>
<div class="line"><a name="l15052"></a><span class="lineno">15052</span>&#160;        max_type-&gt;header-&gt;type-&gt;category_force != <a class="code" href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a> &amp;&amp;</div>
<div class="line"><a name="l15053"></a><span class="lineno">15053</span>&#160;        max_type-&gt;header-&gt;cached_category.<a class="code" href="classitem__category.html#a5c37c8230f0eea1de063a9bf3e884dc1">id</a> == running_max-&gt;header-&gt;cached_category.<a class="code" href="classitem__category.html#a5c37c8230f0eea1de063a9bf3e884dc1">id</a> ) {</div>
<div class="line"><a name="l15054"></a><span class="lineno">15054</span>&#160; </div>
<div class="line"><a name="l15055"></a><span class="lineno">15055</span>&#160;        max_type-&gt;info.bits.set( <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79">tname::segments::TYPE</a> );</div>
<div class="line"><a name="l15056"></a><span class="lineno">15056</span>&#160;        <span class="keywordflow">return</span> *max_type;</div>
<div class="line"><a name="l15057"></a><span class="lineno">15057</span>&#160;    }</div>
<div class="line"><a name="l15058"></a><span class="lineno">15058</span>&#160; </div>
<div class="line"><a name="l15059"></a><span class="lineno">15059</span>&#160;    <span class="keywordflow">return</span> running_max-&gt;count &gt; cutoff_check ? *running_max : <a class="code" href="structitem_1_1aggregate__t.html">aggregate_t</a>{};</div>
<div class="line"><a name="l15060"></a><span class="lineno">15060</span>&#160;}</div>
<div class="line"><a name="l15061"></a><span class="lineno">15061</span>&#160; </div>
<div class="line"><a name="l15062"></a><span class="lineno"><a class="line" href="classitem.html#af15a86b2fb28e635721b31b735906800">15062</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#af15a86b2fb28e635721b31b735906800">item::all_items_ptr</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15063"></a><span class="lineno">15063</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15064"></a><span class="lineno">15064</span>&#160;    std::list&lt;const item *&gt; all_items_internal;</div>
<div class="line"><a name="l15065"></a><span class="lineno">15065</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l15066"></a><span class="lineno">15066</span>&#160;         i &lt; static_cast&lt;int&gt;( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1af447f5c03508de4d88e340390ba7c78f">pocket_type::LAST</a> ); i++ ) {</div>
<div class="line"><a name="l15067"></a><span class="lineno">15067</span>&#160;        std::list&lt;const item *&gt; inserted{ <a class="code" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">all_items_top_recursive</a>( <span class="keyword">static_cast&lt;</span><a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a><span class="keyword">&gt;</span>( i ) ) };</div>
<div class="line"><a name="l15068"></a><span class="lineno">15068</span>&#160;        all_items_internal.insert( all_items_internal.end(), inserted.begin(), inserted.end() );</div>
<div class="line"><a name="l15069"></a><span class="lineno">15069</span>&#160;    }</div>
<div class="line"><a name="l15070"></a><span class="lineno">15070</span>&#160;    <span class="keywordflow">return</span> all_items_internal;</div>
<div class="line"><a name="l15071"></a><span class="lineno">15071</span>&#160;}</div>
<div class="line"><a name="l15072"></a><span class="lineno">15072</span>&#160; </div>
<div class="line"><a name="l15073"></a><span class="lineno"><a class="line" href="classitem.html#abc73b11e9d640da869553329aef2463e">15073</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#af15a86b2fb28e635721b31b735906800">item::all_items_ptr</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )<span class="keyword"> const</span></div>
<div class="line"><a name="l15074"></a><span class="lineno">15074</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15075"></a><span class="lineno">15075</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">all_items_top_recursive</a>( pk_type );</div>
<div class="line"><a name="l15076"></a><span class="lineno">15076</span>&#160;}</div>
<div class="line"><a name="l15077"></a><span class="lineno">15077</span>&#160; </div>
<div class="line"><a name="l15078"></a><span class="lineno"><a class="line" href="classitem.html#a25995f360243391c78363ba8211e89da">15078</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#af15a86b2fb28e635721b31b735906800">item::all_items_ptr</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )</div>
<div class="line"><a name="l15079"></a><span class="lineno">15079</span>&#160;{</div>
<div class="line"><a name="l15080"></a><span class="lineno">15080</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">all_items_top_recursive</a>( pk_type );</div>
<div class="line"><a name="l15081"></a><span class="lineno">15081</span>&#160;}</div>
<div class="line"><a name="l15082"></a><span class="lineno">15082</span>&#160; </div>
<div class="line"><a name="l15083"></a><span class="lineno"><a class="line" href="classitem.html#a8b6820127898b2e9314020e5812d003c">15083</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">item::all_items_top_recursive</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )<span class="keyword"></span></div>
<div class="line"><a name="l15084"></a><span class="lineno">15084</span>&#160;<span class="keyword">const</span></div>
<div class="line"><a name="l15085"></a><span class="lineno">15085</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15086"></a><span class="lineno">15086</span>&#160;    std::list&lt;const item *&gt; contained = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( pk_type );</div>
<div class="line"><a name="l15087"></a><span class="lineno">15087</span>&#160;    std::list&lt;const item *&gt; all_items_internal{ contained };</div>
<div class="line"><a name="l15088"></a><span class="lineno">15088</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : contained ) {</div>
<div class="line"><a name="l15089"></a><span class="lineno">15089</span>&#160;        std::list&lt;const item *&gt; recursion_items = it-&gt;all_items_top_recursive( pk_type );</div>
<div class="line"><a name="l15090"></a><span class="lineno">15090</span>&#160;        all_items_internal.insert( all_items_internal.end(), recursion_items.begin(),</div>
<div class="line"><a name="l15091"></a><span class="lineno">15091</span>&#160;                                   recursion_items.end() );</div>
<div class="line"><a name="l15092"></a><span class="lineno">15092</span>&#160;    }</div>
<div class="line"><a name="l15093"></a><span class="lineno">15093</span>&#160; </div>
<div class="line"><a name="l15094"></a><span class="lineno">15094</span>&#160;    <span class="keywordflow">return</span> all_items_internal;</div>
<div class="line"><a name="l15095"></a><span class="lineno">15095</span>&#160;}</div>
<div class="line"><a name="l15096"></a><span class="lineno">15096</span>&#160; </div>
<div class="line"><a name="l15097"></a><span class="lineno"><a class="line" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">15097</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">item::all_items_top_recursive</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a> pk_type )</div>
<div class="line"><a name="l15098"></a><span class="lineno">15098</span>&#160;{</div>
<div class="line"><a name="l15099"></a><span class="lineno">15099</span>&#160;    std::list&lt;item *&gt; contained = <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">all_items_top</a>( pk_type );</div>
<div class="line"><a name="l15100"></a><span class="lineno">15100</span>&#160;    std::list&lt;item *&gt; all_items_internal{ contained };</div>
<div class="line"><a name="l15101"></a><span class="lineno">15101</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *it : contained ) {</div>
<div class="line"><a name="l15102"></a><span class="lineno">15102</span>&#160;        std::list&lt;item *&gt; recursion_items = it-&gt;all_items_top_recursive( pk_type );</div>
<div class="line"><a name="l15103"></a><span class="lineno">15103</span>&#160;        all_items_internal.insert( all_items_internal.end(), recursion_items.begin(),</div>
<div class="line"><a name="l15104"></a><span class="lineno">15104</span>&#160;                                   recursion_items.end() );</div>
<div class="line"><a name="l15105"></a><span class="lineno">15105</span>&#160;    }</div>
<div class="line"><a name="l15106"></a><span class="lineno">15106</span>&#160; </div>
<div class="line"><a name="l15107"></a><span class="lineno">15107</span>&#160;    <span class="keywordflow">return</span> all_items_internal;</div>
<div class="line"><a name="l15108"></a><span class="lineno">15108</span>&#160;}</div>
<div class="line"><a name="l15109"></a><span class="lineno">15109</span>&#160; </div>
<div class="line"><a name="l15110"></a><span class="lineno"><a class="line" href="classitem.html#a5b16490e7f48e5ebc5c640cf3e7475e0">15110</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#a5b16490e7f48e5ebc5c640cf3e7475e0">item::all_known_contents</a>()</div>
<div class="line"><a name="l15111"></a><span class="lineno">15111</span>&#160;{</div>
<div class="line"><a name="l15112"></a><span class="lineno">15112</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad09a290f870ca1f6d557551ab2e64c12">all_known_contents</a>();</div>
<div class="line"><a name="l15113"></a><span class="lineno">15113</span>&#160;}</div>
<div class="line"><a name="l15114"></a><span class="lineno">15114</span>&#160; </div>
<div class="line"><a name="l15115"></a><span class="lineno"><a class="line" href="classitem.html#a18ec12952b5d958f6b50479380a75165">15115</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#a5b16490e7f48e5ebc5c640cf3e7475e0">item::all_known_contents</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15116"></a><span class="lineno">15116</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15117"></a><span class="lineno">15117</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad09a290f870ca1f6d557551ab2e64c12">all_known_contents</a>();</div>
<div class="line"><a name="l15118"></a><span class="lineno">15118</span>&#160;}</div>
<div class="line"><a name="l15119"></a><span class="lineno">15119</span>&#160; </div>
<div class="line"><a name="l15120"></a><span class="lineno"><a class="line" href="classitem.html#a84f479532a526df83b19a5afd7f2862b">15120</a></span>&#160;std::list&lt;item *&gt; <a class="code" href="classitem.html#a84f479532a526df83b19a5afd7f2862b">item::all_ablative_armor</a>()</div>
<div class="line"><a name="l15121"></a><span class="lineno">15121</span>&#160;{</div>
<div class="line"><a name="l15122"></a><span class="lineno">15122</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7c6b7279a7d47ff5ea9089fcb570bd86">all_ablative_armor</a>();</div>
<div class="line"><a name="l15123"></a><span class="lineno">15123</span>&#160;}</div>
<div class="line"><a name="l15124"></a><span class="lineno">15124</span>&#160; </div>
<div class="line"><a name="l15125"></a><span class="lineno"><a class="line" href="classitem.html#ac35397d94745954cce2af6ff960f4a03">15125</a></span>&#160;std::list&lt;const item *&gt; <a class="code" href="classitem.html#a84f479532a526df83b19a5afd7f2862b">item::all_ablative_armor</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15126"></a><span class="lineno">15126</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15127"></a><span class="lineno">15127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7c6b7279a7d47ff5ea9089fcb570bd86">all_ablative_armor</a>();</div>
<div class="line"><a name="l15128"></a><span class="lineno">15128</span>&#160;}</div>
<div class="line"><a name="l15129"></a><span class="lineno">15129</span>&#160; </div>
<div class="line"><a name="l15130"></a><span class="lineno"><a class="line" href="classitem.html#a1d000670a57419e2cc154245d7b27ca3">15130</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a1d000670a57419e2cc154245d7b27ca3">item::clear_items</a>()</div>
<div class="line"><a name="l15131"></a><span class="lineno">15131</span>&#160;{</div>
<div class="line"><a name="l15132"></a><span class="lineno">15132</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">clear_items</a>();</div>
<div class="line"><a name="l15133"></a><span class="lineno">15133</span>&#160;}</div>
<div class="line"><a name="l15134"></a><span class="lineno">15134</span>&#160; </div>
<div class="line"><a name="l15135"></a><span class="lineno"><a class="line" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">15135</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">item::empty</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15136"></a><span class="lineno">15136</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15137"></a><span class="lineno">15137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>();</div>
<div class="line"><a name="l15138"></a><span class="lineno">15138</span>&#160;}</div>
<div class="line"><a name="l15139"></a><span class="lineno">15139</span>&#160; </div>
<div class="line"><a name="l15140"></a><span class="lineno"><a class="line" href="classitem.html#a69b6ce2dd3062aa4b7d1dcc043d762bb">15140</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classitem.html#a69b6ce2dd3062aa4b7d1dcc043d762bb">item::empty_container</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15141"></a><span class="lineno">15141</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15142"></a><span class="lineno">15142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a7a9621218e39e4ad6149f2f0ae48132d">empty_container</a>();</div>
<div class="line"><a name="l15143"></a><span class="lineno">15143</span>&#160;}</div>
<div class="line"><a name="l15144"></a><span class="lineno">15144</span>&#160; </div>
<div class="line"><a name="l15145"></a><span class="lineno"><a class="line" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">15145</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">item::only_item</a>()</div>
<div class="line"><a name="l15146"></a><span class="lineno">15146</span>&#160;{</div>
<div class="line"><a name="l15147"></a><span class="lineno">15147</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a11c260d90db9a1a02b2c9e1623574594">only_item</a>();</div>
<div class="line"><a name="l15148"></a><span class="lineno">15148</span>&#160;}</div>
<div class="line"><a name="l15149"></a><span class="lineno">15149</span>&#160; </div>
<div class="line"><a name="l15150"></a><span class="lineno"><a class="line" href="classitem.html#aa297f3f7ec701bbe381f423d89f0ba20">15150</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">item::only_item</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15151"></a><span class="lineno">15151</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15152"></a><span class="lineno">15152</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a11c260d90db9a1a02b2c9e1623574594">only_item</a>();</div>
<div class="line"><a name="l15153"></a><span class="lineno">15153</span>&#160;}</div>
<div class="line"><a name="l15154"></a><span class="lineno">15154</span>&#160; </div>
<div class="line"><a name="l15155"></a><span class="lineno"><a class="line" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">15155</a></span>&#160;<a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">item::get_item_with</a>( <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;filter )</div>
<div class="line"><a name="l15156"></a><span class="lineno">15156</span>&#160;{</div>
<div class="line"><a name="l15157"></a><span class="lineno">15157</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a647fe86aeda2ed7f49e00257c202f3f3">get_item_with</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> );</div>
<div class="line"><a name="l15158"></a><span class="lineno">15158</span>&#160;}</div>
<div class="line"><a name="l15159"></a><span class="lineno">15159</span>&#160; </div>
<div class="line"><a name="l15160"></a><span class="lineno"><a class="line" href="classitem.html#ad52ae522059f4cba6a50ba5c7de2bde9">15160</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">item::get_item_with</a>( <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; )&gt; &amp;filter )<span class="keyword"> const</span></div>
<div class="line"><a name="l15161"></a><span class="lineno">15161</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15162"></a><span class="lineno">15162</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a647fe86aeda2ed7f49e00257c202f3f3">get_item_with</a>( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> );</div>
<div class="line"><a name="l15163"></a><span class="lineno">15163</span>&#160;}</div>
<div class="line"><a name="l15164"></a><span class="lineno">15164</span>&#160; </div>
<div class="line"><a name="l15165"></a><span class="lineno"><a class="line" href="classitem.html#abb750db4f0d09dba25b5ed37c58caf75">15165</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classitem.html#abb750db4f0d09dba25b5ed37c58caf75">item::num_item_stacks</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15166"></a><span class="lineno">15166</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15167"></a><span class="lineno">15167</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aa744f662499b0a03029ea58389cc260a">num_item_stacks</a>();</div>
<div class="line"><a name="l15168"></a><span class="lineno">15168</span>&#160;}</div>
<div class="line"><a name="l15169"></a><span class="lineno">15169</span>&#160; </div>
<div class="line"><a name="l15170"></a><span class="lineno"><a class="line" href="classitem.html#a58a1ae0c5310bb998fb9a1d0261e9858">15170</a></span>&#160;<a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a58a1ae0c5310bb998fb9a1d0261e9858">item::legacy_front</a>()</div>
<div class="line"><a name="l15171"></a><span class="lineno">15171</span>&#160;{</div>
<div class="line"><a name="l15172"></a><span class="lineno">15172</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5223f6be650dd2173f8f1ee0be87a828">legacy_front</a>();</div>
<div class="line"><a name="l15173"></a><span class="lineno">15173</span>&#160;}</div>
<div class="line"><a name="l15174"></a><span class="lineno">15174</span>&#160; </div>
<div class="line"><a name="l15175"></a><span class="lineno"><a class="line" href="classitem.html#a7d88bf969e20ffc0238f1c21abbb8ec6">15175</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="classitem.html#a58a1ae0c5310bb998fb9a1d0261e9858">item::legacy_front</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l15176"></a><span class="lineno">15176</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l15177"></a><span class="lineno">15177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a5223f6be650dd2173f8f1ee0be87a828">legacy_front</a>();</div>
<div class="line"><a name="l15178"></a><span class="lineno">15178</span>&#160;}</div>
<div class="line"><a name="l15179"></a><span class="lineno">15179</span>&#160; </div>
<div class="line"><a name="l15180"></a><span class="lineno"><a class="line" href="classitem.html#a9a8676fe361acce8c16a8fb437dafacf">15180</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#a9a8676fe361acce8c16a8fb437dafacf">item::favorite_settings_menu</a>()</div>
<div class="line"><a name="l15181"></a><span class="lineno">15181</span>&#160;{</div>
<div class="line"><a name="l15182"></a><span class="lineno">15182</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#aeb0f4010b35a2388d4e2329d751f1f25">favorite_settings_menu</a>( <span class="keyword">this</span> );</div>
<div class="line"><a name="l15183"></a><span class="lineno">15183</span>&#160;}</div>
<div class="line"><a name="l15184"></a><span class="lineno">15184</span>&#160; </div>
<div class="line"><a name="l15185"></a><span class="lineno"><a class="line" href="classitem.html#a1048e46dc91c1671b31ab6012693adfa">15185</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">item::combine</a>( <span class="keyword">const</span> <a class="code" href="classitem__contents.html">item_contents</a> &amp;read_input, <span class="keywordtype">bool</span> <a class="code" href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">convert</a> )</div>
<div class="line"><a name="l15186"></a><span class="lineno">15186</span>&#160;{</div>
<div class="line"><a name="l15187"></a><span class="lineno">15187</span>&#160;    <a class="code" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code" href="classitem__contents.html#a36dc7309f81684bed427f38137f722d2">combine</a>( read_input, <a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a> );</div>
<div class="line"><a name="l15188"></a><span class="lineno">15188</span>&#160;}</div>
<div class="line"><a name="l15189"></a><span class="lineno">15189</span>&#160; </div>
<div class="line"><a name="l15190"></a><span class="lineno"><a class="line" href="item_8cpp.html#aa9e8bdd5ec93c113b082a84c5a448041">15190</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="item_8cpp.html#aa9e8bdd5ec93c113b082a84c5a448041">is_preferred_component</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;<a class="code" href="structcomponent.html">component</a> )</div>
<div class="line"><a name="l15191"></a><span class="lineno">15191</span>&#160;{</div>
<div class="line"><a name="l15192"></a><span class="lineno">15192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structcomponent.html">component</a>.is_container_empty() &amp;&amp; !<a class="code" href="structcomponent.html">component</a>.has_flag( <a class="code" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a> ) &amp;&amp;</div>
<div class="line"><a name="l15193"></a><span class="lineno">15193</span>&#160;           !<a class="code" href="structcomponent.html">component</a>.has_flag( <a class="code" href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a> );</div>
<div class="line"><a name="l15194"></a><span class="lineno">15194</span>&#160;}</div>
<div class="line"><a name="l15195"></a><span class="lineno">15195</span>&#160; </div>
<div class="line"><a name="l15196"></a><span class="lineno">15196</span>&#160;<a class="code" href="structdisp__mod__by__barrel.html#ab741cea90441f9e6fef6894ec9a3438f">disp_mod_by_barrel::disp_mod_by_barrel</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l15197"></a><span class="lineno"><a class="line" href="structdisp__mod__by__barrel.html#a07d80054aa15021b1945bba6cdcdbabf">15197</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structdisp__mod__by__barrel.html#a07d80054aa15021b1945bba6cdcdbabf">disp_mod_by_barrel::deserialize</a>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> &amp;jo )</div>
<div class="line"><a name="l15198"></a><span class="lineno">15198</span>&#160;{</div>
<div class="line"><a name="l15199"></a><span class="lineno">15199</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;barrel_length&quot;</span>, <a class="code" href="structdisp__mod__by__barrel.html#a3b5cbdbdd8b5d90d2ec71db5d175836a">barrel_length</a> );</div>
<div class="line"><a name="l15200"></a><span class="lineno">15200</span>&#160;    <a class="code" href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">mandatory</a>( jo, <span class="keyword">false</span>, <span class="stringliteral">&quot;dispersion&quot;</span>, <a class="code" href="structdisp__mod__by__barrel.html#a396bb37ae2adaffad810c0ae88813e34">dispersion_modifier</a> );</div>
<div class="line"><a name="l15201"></a><span class="lineno">15201</span>&#160;}</div>
<div class="ttc" id="aachievement_8cpp_html_a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb"><div class="ttname"><a href="achievement_8cpp.html#a89b60f534d269451d6fdb9be657dcb09af9f90eeaf400d228facde6bc48da5cfb">requirement_visibility::always</a></div><div class="ttdeci">@ always</div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_ad519af899571e96094ca0cd2e286b38b"><div class="ttname"><a href="activity__item__handling_8cpp.html#ad519af899571e96094ca0cd2e286b38b">same_type</a></div><div class="ttdeci">static bool same_type(const std::list&lt; item &gt; &amp;items)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00186">activity_item_handling.cpp:186</a></div></div>
<div class="ttc" id="aammo_8h_html"><div class="ttname"><a href="ammo_8h.html">ammo.h</a></div></div>
<div class="ttc" id="aascii__art_8h_html"><div class="ttname"><a href="ascii__art_8h.html">ascii_art.h</a></div></div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="abionics_8cpp_html_a4d3af7661fa38a46bad775d2ee5419b5"><div class="ttname"><a href="bionics_8cpp.html#a4d3af7661fa38a46bad775d2ee5419b5">list_occupied_bps</a></div><div class="ttdeci">std::string list_occupied_bps(const bionic_id &amp;bio_id, const std::string &amp;intro, const bool each_bp_on_new_line)</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02622">bionics.cpp:2622</a></div></div>
<div class="ttc" id="abionics_8h_html"><div class="ttname"><a href="bionics_8h.html">bionics.h</a></div></div>
<div class="ttc" id="abodygraph_8cpp_html_a77f2ae96377858abec7dddb20348c69b"><div class="ttname"><a href="bodygraph_8cpp.html#a77f2ae96377858abec7dddb20348c69b">get_bodygraph_lines</a></div><div class="ttdeci">std::vector&lt; std::string &gt; get_bodygraph_lines(const Character &amp;u, const bodygraph_callback &amp;fragment_cb, const bodygraph_id &amp;id, int width, int height)</div><div class="ttdoc">Returns a prepared bodygraph ready to be rendered line-by-line.</div><div class="ttdef"><b>Definition:</b> <a href="bodygraph_8cpp_source.html#l00651">bodygraph.cpp:651</a></div></div>
<div class="ttc" id="abodygraph_8h_html"><div class="ttname"><a href="bodygraph_8h.html">bodygraph.h</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_a1e5a8dc07b262107fd65bfbe882b5458"><div class="ttname"><a href="bodypart_8cpp.html#a1e5a8dc07b262107fd65bfbe882b5458">body_part_foot_r</a></div><div class="ttdeci">const bodypart_str_id body_part_foot_r(&quot;foot_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_a67fd1441077f21f79e895830d0534b2b"><div class="ttname"><a href="bodypart_8cpp.html#a67fd1441077f21f79e895830d0534b2b">body_part_hand_r</a></div><div class="ttdeci">const bodypart_str_id body_part_hand_r(&quot;hand_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_a7e67f6bbe865282540080a39151106c6"><div class="ttname"><a href="bodypart_8cpp.html#a7e67f6bbe865282540080a39151106c6">opposite_side</a></div><div class="ttdeci">side opposite_side(side s)</div><div class="ttdoc">Returns the opposite side.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00040">bodypart.cpp:40</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_a92caf587794873fa1f3cc4bace29993c"><div class="ttname"><a href="bodypart_8cpp.html#a92caf587794873fa1f3cc4bace29993c">body_part_leg_l</a></div><div class="ttdeci">const bodypart_str_id body_part_leg_l(&quot;leg_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_a954b36de93f2258bf1d31e8f24494ad0"><div class="ttname"><a href="bodypart_8cpp.html#a954b36de93f2258bf1d31e8f24494ad0">body_part_arm_l</a></div><div class="ttdeci">const bodypart_str_id body_part_arm_l(&quot;arm_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa1af101175ef4c9194f748dd67829fa9"><div class="ttname"><a href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a></div><div class="ttdeci">const bodypart_str_id body_part_torso(&quot;torso&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa26e675361f884c329258a89ecbdf0ec"><div class="ttname"><a href="bodypart_8cpp.html#aa26e675361f884c329258a89ecbdf0ec">body_part_arm_r</a></div><div class="ttdeci">const bodypart_str_id body_part_arm_r(&quot;arm_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa372ea85b9fd9dee0197b2c16362d7a9"><div class="ttname"><a href="bodypart_8cpp.html#aa372ea85b9fd9dee0197b2c16362d7a9">body_part_leg_r</a></div><div class="ttdeci">const bodypart_str_id body_part_leg_r(&quot;leg_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aaae2b06f9b4f3346236711e0140e3bf0"><div class="ttname"><a href="bodypart_8cpp.html#aaae2b06f9b4f3346236711e0140e3bf0">body_part_name_as_heading</a></div><div class="ttdeci">std::string body_part_name_as_heading(const bodypart_id &amp;bp, int number)</div><div class="ttdoc">Returns the name of the body parts in a context where the name is used as a heading or title e....</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00805">bodypart.cpp:805</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ae00eb113c2ff69f1818aeefe0d00f876"><div class="ttname"><a href="bodypart_8cpp.html#ae00eb113c2ff69f1818aeefe0d00f876">body_part_hand_l</a></div><div class="ttdeci">const bodypart_str_id body_part_hand_l(&quot;hand_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aebd4726eec42047e34e492f029b52206"><div class="ttname"><a href="bodypart_8cpp.html#aebd4726eec42047e34e492f029b52206">body_part_foot_l</a></div><div class="ttdeci">const bodypart_str_id body_part_foot_l(&quot;foot_l&quot;)</div></div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00032">bodypart.h:32</a></div></div>
<div class="ttc" id="abonuses_8cpp_html_a2f8b66e6fc62f3d92b208655f5525bba"><div class="ttname"><a href="bonuses_8cpp.html#a2f8b66e6fc62f3d92b208655f5525bba">skill_archery</a></div><div class="ttdeci">static const skill_id skill_archery(&quot;archery&quot;)</div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00784">calendar.cpp:784</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a3cbd6a4aa555daec83ee03cc90dd7715"><div class="ttname"><a href="calendar_8cpp.html#a3cbd6a4aa555daec83ee03cc90dd7715">to_string_approx</a></div><div class="ttdeci">std::string to_string_approx(const time_duration &amp;dur, const bool verbose)</div><div class="ttdoc">Returns approximate duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00587">calendar.cpp:587</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00427">calendar.cpp:427</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a6fe65b9e39049b6d361709241a23d1b6"><div class="ttname"><a href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a></div><div class="ttdeci">static lat_long location</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00034">calendar.cpp:34</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_abf1cdb8f4662bf96c8d762e9229df8d9"><div class="ttname"><a href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d, const bool compact)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00546">calendar.cpp:546</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_adac9b8b192cda93a6b30e3fa016029dd"><div class="ttname"><a href="calendar_8cpp.html#adac9b8b192cda93a6b30e3fa016029dd">clipped_time</a></div><div class="ttdeci">std::pair&lt; int, clipped_unit &gt; clipped_time(const time_duration &amp;d)</div><div class="ttdoc">Returns a value representing the passed in duration truncated to an appropriate unit along with the u...</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00503">calendar.cpp:503</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acata__assert_8h_html"><div class="ttname"><a href="cata__assert_8h.html">cata_assert.h</a></div></div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_a382c43734c8a029c36f3d3707195a303"><div class="ttname"><a href="cata__utility_8cpp.html#a382c43734c8a029c36f3d3707195a303">string_split</a></div><div class="ttdeci">std::vector&lt; std::string &gt; string_split(const std::string_view string, char delim)</div><div class="ttdoc">Splits a string by delimiter into a vector of strings.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00703">cata_utility.cpp:703</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_a9dbcecb703a6e1111a0552177b6bf9fc"><div class="ttname"><a href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a></div><div class="ttdeci">double round_up(double val, unsigned int dp)</div><div class="ttdoc">Round a value up at a given decimal place.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00054">cata_utility.cpp:54</a></div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="acata__utility_8h_html_a00069567a0e8438fa2707a5214e53ca4"><div class="ttname"><a href="cata__utility_8h.html#a00069567a0e8438fa2707a5214e53ca4">string_starts_with</a></div><div class="ttdeci">bool string_starts_with(std::string_view s1, std::string_view s2)</div><div class="ttdoc">Returns true iff s1 starts with s2.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00450">cata_utility.h:450</a></div></div>
<div class="ttc" id="acata__utility_8h_html_a4df936321d43e41a9a8e17bf014b0b2f"><div class="ttname"><a href="cata__utility_8h.html#a4df936321d43e41a9a8e17bf014b0b2f">map_equal_ignoring_keys</a></div><div class="ttdeci">bool map_equal_ignoring_keys(const Map &amp;lhs, const Map &amp;rhs, const Set &amp;ignore_keys)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00628">cata_utility.h:628</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ac991956646ae07083eff5852c753b886"><div class="ttname"><a href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a></div><div class="ttdeci">std::string string_join(const Container &amp;iterable, const std::string &amp;joiner)</div><div class="ttdoc">Joins an iterable (class implementing begin() and end()) of elements into a single string with specif...</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00495">cata_utility.h:495</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad1e66aa881456b8be11c0af88dfc70fe"><div class="ttname"><a href="cata__utility_8h.html#ad1e66aa881456b8be11c0af88dfc70fe">equal_ignoring_elements</a></div><div class="ttdeci">bool equal_ignoring_elements(const Set &amp;set, const Set &amp;set2, const Set &amp;ignored_elements)</div><div class="ttdoc">Checks if two sets are equal, ignoring specified elements.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00577">cata_utility.h:577</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a1e3f04102267eaf5e8d0ca424fd5c561">cata_variant_type::field_type_id</a></div><div class="ttdeci">@ field_type_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">cata_variant_type::tripoint</a></div><div class="ttdeci">@ tripoint</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a6b31b6fdce9698e37e4ada0095b6e637">cata_variant_type::flag_id</a></div><div class="ttdeci">@ flag_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">cata_variant_type::point</a></div><div class="ttdeci">@ point</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ae8e678349f93f19da25028da1f3e8a17"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ae8e678349f93f19da25028da1f3e8a17">cata_variant_type::trap_id</a></div><div class="ttdeci">@ trap_id</div></div>
<div class="ttc" id="acatacharset_8h_html"><div class="ttname"><a href="catacharset_8h.html">catacharset.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa39e9f6863e3f851c818b80aeab486f3b">ROTTEN</a></div><div class="ttdeci">@ ROTTEN</div><div class="ttdoc">Rotten (or, for saprophages, not rotten enough)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00281">character.h:281</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa3b91257ff6d4562407871e69d3e78f07"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa3b91257ff6d4562407871e69d3e78f07">EDIBLE</a></div><div class="ttdeci">@ EDIBLE</div><div class="ttdoc">Edible or we pretend it is.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00267">character.h:267</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa3e87a6efcba1be007911be670c323a9a"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa3e87a6efcba1be007911be670c323a9a">INEDIBLE</a></div><div class="ttdeci">@ INEDIBLE</div><div class="ttdoc">Not food at all.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00269">character.h:269</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa5f196aa43a42eea6393a0d1575ad386c">INEDIBLE_MUTATION</a></div><div class="ttdeci">@ INEDIBLE_MUTATION</div><div class="ttdoc">Not food because character has mutated mouth/system.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00271">character.h:271</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa68f3436c82d544d7eb8d817a6a971bde">PARASITES</a></div><div class="ttdeci">@ PARASITES</div><div class="ttdoc">Comestible has parasites.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00279">character.h:279</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfa8391797ae168be6bfd5c255e3ca67acc">CANNIBALISM</a></div><div class="ttdeci">@ CANNIBALISM</div><div class="ttdoc">Penalty for eating human flesh (unless psycho/cannibal)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00277">character.h:277</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfaaf6d741038d21f12917321617be48093">NAUSEA</a></div><div class="ttdeci">@ NAUSEA</div><div class="ttdoc">Can provoke vomiting if you already feel nauseous.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00283">character.h:283</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac1b03008f91f90160ce54a1d33cb4f1f">ALLERGY_WEAK</a></div><div class="ttdeci">@ ALLERGY_WEAK</div><div class="ttdoc">Smaller allergy penalty.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00275">character.h:275</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfac762fd1e0f127197214f0ca2fcc76507">ALLERGY</a></div><div class="ttdeci">@ ALLERGY</div><div class="ttdoc">You can eat it, but it will hurt morale because of negative trait such as Hates Fruit.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00273">character.h:273</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfacbc957a7919cb2f8a5673072049ccec1">TOO_FULL</a></div><div class="ttdeci">@ TOO_FULL</div><div class="ttdoc">We can eat this, but we'll suffer from overeat.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00285">character.h:285</a></div></div>
<div class="ttc" id="acharacter_8h_html_a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215"><div class="ttname"><a href="character_8h.html#a3a436072188c9efbfad9d5a7d017aedfae8067a3d44e5b12984af3a40432b8215">NO_TOOL</a></div><div class="ttdeci">@ NO_TOOL</div><div class="ttdoc">Some weird stuff that requires a tool we don't have.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00288">character.h:287</a></div></div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="acharacter__id_8h_html"><div class="ttname"><a href="character__id_8h.html">character_id.h</a></div></div>
<div class="ttc" id="acharacter__martial__arts_8h_html"><div class="ttname"><a href="character__martial__arts_8h.html">character_martial_arts.h</a></div></div>
<div class="ttc" id="acity_8h_html"><div class="ttname"><a href="city_8h.html">city.h</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a05331bfbde3df1348a870d987597d29a"><div class="ttname"><a href="classCharacter.html#a05331bfbde3df1348a870d987597d29a">Character::get_weapon_dispersion</a></div><div class="ttdeci">dispersion_sources get_weapon_dispersion(const item &amp;obj) const</div><div class="ttdoc">Returns a weapon's modified dispersion value.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02290">ranged.cpp:2290</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bae97cba21daebf53484d06605e6529"><div class="ttname"><a href="classCharacter.html#a0bae97cba21daebf53484d06605e6529">Character::avg_encumb_of_limb_type</a></div><div class="ttdeci">int avg_encumb_of_limb_type(body_part_type::type part_type) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04030">character.cpp:4030</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1489b6f768867a6f784232eeaf9ebfd1"><div class="ttname"><a href="classCharacter.html#a1489b6f768867a6f784232eeaf9ebfd1">Character::get_greater_skill_or_knowledge_level</a></div><div class="ttdeci">float get_greater_skill_or_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03461">character.cpp:3461</a></div></div>
<div class="ttc" id="aclassCharacter_html_a15e1412dda3489886688216c4ef7da34"><div class="ttname"><a href="classCharacter.html#a15e1412dda3489886688216c4ef7da34">Character::get_consume_time</a></div><div class="ttdeci">time_duration get_consume_time(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01709">consumption.cpp:1709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a161460f47c0cb64afa7be4ee4c0eea70"><div class="ttname"><a href="classCharacter.html#a161460f47c0cb64afa7be4ee4c0eea70">Character::fun_for</a></div><div class="ttdeci">std::pair&lt; int, int &gt; fun_for(const item &amp;comest, bool ignore_already_ate=false) const</div><div class="ttdoc">Handles the enjoyability value for a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00447">consumption.cpp:447</a></div></div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02852">character.cpp:2852</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2726ac089fa49e864b486e289f53fade"><div class="ttname"><a href="classCharacter.html#a2726ac089fa49e864b486e289f53fade">Character::get_skill_level_object</a></div><div class="ttdeci">SkillLevel &amp; get_skill_level_object(const skill_id &amp;ident)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03423">character.cpp:3423</a></div></div>
<div class="ttc" id="aclassCharacter_html_a27276eed63fa4e431519d2b805735e0d"><div class="ttname"><a href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassCharacter_html_a306dfd8496f2ff25cce5ad2a9cc7f80e"><div class="ttname"><a href="classCharacter.html#a306dfd8496f2ff25cce5ad2a9cc7f80e">Character::allergy_type</a></div><div class="ttdeci">morale_type allergy_type(const item &amp;food) const</div><div class="ttdoc">Returns allergy type or MORALE_NULL if not allergic for this character.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00746">consumption.cpp:746</a></div></div>
<div class="ttc" id="aclassCharacter_html_a30822b2d5fb0dfa613aed0043f494c66"><div class="ttname"><a href="classCharacter.html#a30822b2d5fb0dfa613aed0043f494c66">Character::book_fun_for</a></div><div class="ttdeci">int book_fun_for(const item &amp;book, const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11840">character.cpp:11840</a></div></div>
<div class="ttc" id="aclassCharacter_html_a30ae2557de3be7c7e7f353fffc557c91"><div class="ttname"><a href="classCharacter.html#a30ae2557de3be7c7e7f353fffc557c91">Character::compute_effective_nutrients</a></div><div class="ttdeci">nutrients compute_effective_nutrients(const item &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00295">consumption.cpp:295</a></div></div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02724">character.h:2724</a></div></div>
<div class="ttc" id="aclassCharacter_html_a32d3883998c51586c2617ee82bb9ffac"><div class="ttname"><a href="classCharacter.html#a32d3883998c51586c2617ee82bb9ffac">Character::consume_ups</a></div><div class="ttdeci">units::energy consume_ups(units::energy qty, int radius=-1)</div><div class="ttdoc">Consume UPS charges.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09669">character.cpp:9669</a></div></div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04131">character.cpp:4131</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3801457283281bb7dcc0572d3f707e10"><div class="ttname"><a href="classCharacter.html#a3801457283281bb7dcc0572d3f707e10">Character::flag_encumbrance</a></div><div class="ttdeci">void flag_encumbrance()</div><div class="ttdoc">Flag encumbrance for updating.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02644">character.cpp:2644</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3b5ceae6740ffe700604539fa037bb62"><div class="ttname"><a href="classCharacter.html#a3b5ceae6740ffe700604539fa037bb62">Character::roll_all_damage</a></div><div class="ttdeci">void roll_all_damage(bool crit, damage_instance &amp;di, bool average, const item &amp;weap, const std::string &amp;attack_vector, const Creature *target, const bodypart_id &amp;bp) const</div><div class="ttdoc">Adds all 3 types of physical damage to instance.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00442">melee.cpp:442</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4226b37a0e4383461e0fd072586a394a"><div class="ttname"><a href="classCharacter.html#a4226b37a0e4383461e0fd072586a394a">Character::get_knowledge_level</a></div><div class="ttdeci">int get_knowledge_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03441">character.cpp:3441</a></div></div>
<div class="ttc" id="aclassCharacter_html_a44b075e18feedf619b9195d837623834"><div class="ttname"><a href="classCharacter.html#a44b075e18feedf619b9195d837623834">Character::get_proficiency_bonus</a></div><div class="ttdeci">int get_proficiency_bonus(const std::string &amp;category, proficiency_bonus_type prof_bonus) const</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00112">character_proficiency.cpp:112</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c9457eefee7feffba03cf6aa4868082"><div class="ttname"><a href="classCharacter.html#a4c9457eefee7feffba03cf6aa4868082">Character::compute_calories_per_effective_volume</a></div><div class="ttdeci">int compute_calories_per_effective_volume(const item &amp;food, const nutrients *nutrient=nullptr) const</div><div class="ttdoc">Used to to display how filling a food is.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01497">consumption.cpp:1497</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4d8d747c469431f530acb05c5f7a7f45"><div class="ttname"><a href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">Character::is_worn</a></div><div class="ttdeci">bool is_worn(const item &amp;thing) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01911">character.h:1911</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4eb1793aafe89d34ba7ab96bf9facc19"><div class="ttname"><a href="classCharacter.html#a4eb1793aafe89d34ba7ab96bf9facc19">Character::will_eat</a></div><div class="ttdeci">ret_val&lt; edible_rating &gt; will_eat(const item &amp;food, bool interactive=false) const</div><div class="ttdoc">Same as can_eat, but takes consequences into account.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00923">consumption.cpp:923</a></div></div>
<div class="ttc" id="aclassCharacter_html_a52dfbf13174b42bc92e9bea730b1e1ef"><div class="ttname"><a href="classCharacter.html#a52dfbf13174b42bc92e9bea730b1e1ef">Character::get_hit_weapon</a></div><div class="ttdeci">float get_hit_weapon(const item &amp;weap) const</div><div class="ttdoc">Gets melee accuracy component from weapon+skills.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00337">melee.cpp:337</a></div></div>
<div class="ttc" id="aclassCharacter_html_a56f2f3861fc81b93acd2d45a5a92de41"><div class="ttname"><a href="classCharacter.html#a56f2f3861fc81b93acd2d45a5a92de41">Character::can_interface_armor</a></div><div class="ttdeci">bool can_interface_armor() const</div><div class="ttdoc">Check whether player has a bionic power armor interface.</div><div class="ttdef"><b>Definition:</b> <a href="character__armor_8cpp_source.html#l00045">character_armor.cpp:45</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02648">bionics.cpp:2648</a></div></div>
<div class="ttc" id="aclassCharacter_html_a581c2e6646bc18796f26d3c18e38120a"><div class="ttname"><a href="classCharacter.html#a581c2e6646bc18796f26d3c18e38120a">Character::available_ups</a></div><div class="ttdeci">units::energy available_ups() const</div><div class="ttdoc">Available ups from all sources Sum of mech, bionic UPS and UPS.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09642">character.cpp:9642</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5903c5bd493f4300e949d8452eb04835"><div class="ttname"><a href="classCharacter.html#a5903c5bd493f4300e949d8452eb04835">Character::can_estimate_rot</a></div><div class="ttdeci">bool can_estimate_rot() const</div><div class="ttdoc">True if the character has enough skill (in cooking or survival) to estimate time to rot.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01673">consumption.cpp:1673</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04127">character.cpp:4127</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5f7078fd5aa2cb335228c0d205497ed6"><div class="ttname"><a href="classCharacter.html#a5f7078fd5aa2cb335228c0d205497ed6">Character::attack_speed</a></div><div class="ttdeci">int attack_speed(const item &amp;weap) const</div><div class="ttdoc">Returns cost (in moves) of attacking with given item (no modifiers, like stuck)</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l02735">melee.cpp:2735</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00538">character_attire.cpp:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02693">character.h:2693</a></div></div>
<div class="ttc" id="aclassCharacter_html_a650c06130969baf51c158c9645a6d769"><div class="ttname"><a href="classCharacter.html#a650c06130969baf51c158c9645a6d769">Character::bionic_installation_issues</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; bionic_installation_issues(const bionic_id &amp;bioid) const</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02692">bionics.cpp:2692</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6ab1a86cb826d5faa1244cb7a4674700"><div class="ttname"><a href="classCharacter.html#a6ab1a86cb826d5faa1244cb7a4674700">Character::get_size</a></div><div class="ttdeci">creature_size get_size() const override</div><div class="ttdoc">Get size class of character.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00824">character.cpp:824</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6d2728107f20687dd0402e6b98bde968"><div class="ttname"><a href="classCharacter.html#a6d2728107f20687dd0402e6b98bde968">Character::get_total_melee_stamina_cost</a></div><div class="ttdeci">int get_total_melee_stamina_cost(const item *weap=nullptr) const</div><div class="ttdoc">Returns total cost (in stamina) of attacking with given item, or wielded item if nullptr (modified by...</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00984">melee.cpp:984</a></div></div>
<div class="ttc" id="aclassCharacter_html_a782c695dee7ed2322f9d2585ede71358"><div class="ttname"><a href="classCharacter.html#a782c695dee7ed2322f9d2585ede71358">Character::compute_nutrient_range</a></div><div class="ttdeci">std::pair&lt; nutrients, nutrients &gt; compute_nutrient_range(const item &amp;, const recipe_id &amp;, std::map&lt; recipe_id, std::pair&lt; nutrients, nutrients &gt;&gt; &amp;rec_cache, const cata::flat_set&lt; flag_id &gt; &amp;extra_flags={}) const</div><div class="ttdoc">Get calorie &amp; vitamin contents for a comestible, taking into account character traits.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00329">consumption.cpp:329</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7950b035ea05fa28a0851b4107377265"><div class="ttname"><a href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">Character::knows_recipe</a></div><div class="ttdeci">bool knows_recipe(const recipe *rec) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00026">character_crafting.cpp:26</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7a8f9ffd035435c9f2777e007059e68d"><div class="ttname"><a href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">Character::get_aim_types</a></div><div class="ttdeci">std::vector&lt; aim_type &gt; get_aim_types(const item &amp;gun) const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02006">ranged.cpp:2006</a></div></div>
<div class="ttc" id="aclassCharacter_html_a826c5c424fe53228582a9995a5bad7d5"><div class="ttname"><a href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">Character::cache_has_item_with</a></div><div class="ttdeci">bool cache_has_item_with(const itype_id &amp;type, const std::function&lt; bool(const item &amp;)&gt; &amp;check_func=return_true&lt; item &gt;) const</div><div class="ttdoc">Returns true if the character has an item with given flag and/or that passes the given boolean item f...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09416">character.cpp:9416</a></div></div>
<div class="ttc" id="aclassCharacter_html_a83a17c46b5333661f44e797c26914189"><div class="ttname"><a href="classCharacter.html#a83a17c46b5333661f44e797c26914189">Character::effective_dispersion</a></div><div class="ttdeci">int effective_dispersion(int dispersion, bool zoom=false) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00892">character.cpp:892</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8679cb3fa7f8cd4d88c226ab4b7ab94b"><div class="ttname"><a href="classCharacter.html#a8679cb3fa7f8cd4d88c226ab4b7ab94b">Character::studied_all_recipes</a></div><div class="ttdeci">bool studied_all_recipes(const itype &amp;book) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00065">character_crafting.cpp:65</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a91c25d98b1050595bb9d1a36454d6740"><div class="ttname"><a href="classCharacter.html#a91c25d98b1050595bb9d1a36454d6740">Character::get_ammo</a></div><div class="ttdeci">std::vector&lt; const item * &gt; get_ammo(const ammotype &amp;at) const</div><div class="ttdoc">Returns the items that are ammo and have the matching ammo type.</div><div class="ttdef"><b>Definition:</b> <a href="character__guns_8cpp_source.html#l00104">character_guns.cpp:104</a></div></div>
<div class="ttc" id="aclassCharacter_html_a938cbb0dad93f07152c6e81fd270b153"><div class="ttname"><a href="classCharacter.html#a938cbb0dad93f07152c6e81fd270b153">Character::crit_chance</a></div><div class="ttdeci">double crit_chance(float roll_hit, float target_dodge, const item &amp;weap) const</div><div class="ttdoc">Returns the chance to critical given a hit roll and target's dodge roll.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l01130">melee.cpp:1130</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassCharacter_html_a94f04577f690dc8400ff13aa991cd6ed"><div class="ttname"><a href="classCharacter.html#a94f04577f690dc8400ff13aa991cd6ed">Character::gun_engagement_moves</a></div><div class="ttdeci">int gun_engagement_moves(const item &amp;gun, int target=0, int start=MAX_RECOIL, const Target_attributes &amp;attributes=Target_attributes()) const</div><div class="ttdoc">How many moves does it take to aim gun to the target accuracy.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00588">ranged.cpp:588</a></div></div>
<div class="ttc" id="aclassCharacter_html_a95d488911238c2c12517dd742b00c81f"><div class="ttname"><a href="classCharacter.html#a95d488911238c2c12517dd742b00c81f">Character::on_item_wear</a></div><div class="ttdeci">void on_item_wear(const item &amp;it)</div><div class="ttdoc">Called when an item is worn.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09940">character.cpp:9940</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9b2b7e1e9f7bf88c5f0d7ea2155642be"><div class="ttname"><a href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">Character::get_mutations</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; get_mutations(bool include_hidden=true, bool ignore_enchantment=false, const std::function&lt; bool(const mutation_branch &amp;)&gt; &amp;filter=nullptr) const</div><div class="ttdoc">Get the idents of all traits/mutations.</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l04655">newcharacter.cpp:4655</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa23ac0479291f0d7cfec1432ec4612d2"><div class="ttname"><a href="classCharacter.html#aa23ac0479291f0d7cfec1432ec4612d2">Character::vitamin_RDA</a></div><div class="ttdeci">int vitamin_RDA(const vitamin_id &amp;vitamin, int ammount) const</div><div class="ttdoc">Returns the % of your RDA that ammount of vitamin represents.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07711">character.cpp:7711</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa3ff3d07714ad0bda67eca1d98516f9c"><div class="ttname"><a href="classCharacter.html#aa3ff3d07714ad0bda67eca1d98516f9c">Character::has_identified</a></div><div class="ttdeci">virtual bool has_identified(const itype_id &amp;item_id) const =0</div><div class="ttdoc">Note that we've read a book at least once.</div></div>
<div class="ttc" id="aclassCharacter_html_aa6f6059b227a5cae968cb85a91a1c501"><div class="ttname"><a href="classCharacter.html#aa6f6059b227a5cae968cb85a91a1c501">Character::get_group_available_recipes</a></div><div class="ttdeci">recipe_subset get_group_available_recipes() const</div><div class="ttdoc">Return all available recipes for any member of this crafter's group.</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00184">character_crafting.cpp:184</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa8c5e2457ca6645b57dd269184bc4b54"><div class="ttname"><a href="classCharacter.html#aa8c5e2457ca6645b57dd269184bc4b54">Character::point_shooting_limit</a></div><div class="ttdeci">int point_shooting_limit(const item &amp;gun) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00924">character.cpp:924</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa9a4335ab1fd0d975199750b1ebf5bef"><div class="ttname"><a href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">Character::get_wielded_item</a></div><div class="ttdeci">item_location get_wielded_item() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00674">character.cpp:674</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaaec0279242f05b51af5c8b7bb416bb1"><div class="ttname"><a href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">Character::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if player has a trait, bionic, effect, bodypart, or martial arts buff with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11967">character.cpp:11967</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab8bb62a82f437cb52719b9862a967311"><div class="ttname"><a href="classCharacter.html#ab8bb62a82f437cb52719b9862a967311">Character::can_wear</a></div><div class="ttdeci">ret_val&lt; void &gt; can_wear(const item &amp;it, bool with_equip_change=false) const</div><div class="ttdoc">Check character capable of wearing an item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00109">character_attire.cpp:109</a></div></div>
<div class="ttc" id="aclassCharacter_html_abaf38cbcd608c98be0642fe0c866b8a8"><div class="ttname"><a href="classCharacter.html#abaf38cbcd608c98be0642fe0c866b8a8">Character::is_installable</a></div><div class="ttdeci">ret_val&lt; void &gt; is_installable(const item *it, bool by_autodoc) const</div><div class="ttdoc">Is this bionic elligible to be installed in the player?</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02284">bionics.cpp:2284</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac2245aed6c7279986f42ef9208e816c0"><div class="ttname"><a href="classCharacter.html#ac2245aed6c7279986f42ef9208e816c0">Character::is_limb_broken</a></div><div class="ttdeci">bool is_limb_broken(const bodypart_id &amp;limb) const</div><div class="ttdoc">Returns true if the limb is broken.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02149">character.cpp:2149</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac2e2e141aa01aad994ef237aca8ca53c"><div class="ttname"><a href="classCharacter.html#ac2e2e141aa01aad994ef237aca8ca53c">Character::on_item_takeoff</a></div><div class="ttdeci">void on_item_takeoff(const item &amp;it)</div><div class="ttdoc">Called when an item is taken off.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09953">character.cpp:9953</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca04618a096cdf167a88143d66d4aa0a"><div class="ttname"><a href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">Character::vitamin_rate</a></div><div class="ttdeci">time_duration vitamin_rate(const vitamin_id &amp;vit) const</div><div class="ttdoc">Get vitamin usage rate (minutes per unit) accounting for bionics, mutations and effects.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00565">consumption.cpp:565</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad33fda9a7f9d4c8529cff2bbaea675ae"><div class="ttname"><a href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">Character::has_power</a></div><div class="ttdeci">bool has_power() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02875">character.cpp:2875</a></div></div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02824">character.cpp:2824</a></div></div>
<div class="ttc" id="aclassCharacter_html_add4660ed70c5b5bcb4b766b3f75cb3bd"><div class="ttname"><a href="classCharacter.html#add4660ed70c5b5bcb4b766b3f75cb3bd">Character::calc_discomfort</a></div><div class="ttdeci">void calc_discomfort()</div><div class="ttdoc">Calculate any discomfort your current clothes are causing.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03859">character.cpp:3859</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassCharacter_html_addcf2c54cf8c3920f66328e2441830fb"><div class="ttname"><a href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00548">character_attire.cpp:548</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae43f0438aaa62322ab6d33b7500bc905"><div class="ttname"><a href="classCharacter.html#ae43f0438aaa62322ab6d33b7500bc905">Character::get_check_encumbrance</a></div><div class="ttdeci">bool get_check_encumbrance() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03425">character.h:3425</a></div></div>
<div class="ttc" id="aclassCharacter_html_aee4e2c047e2c683905cade66f04112b8"><div class="ttname"><a href="classCharacter.html#aee4e2c047e2c683905cade66f04112b8">Character::get_faction</a></div><div class="ttdeci">virtual faction * get_faction() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00768">character.h:768</a></div></div>
<div class="ttc" id="aclassCharacter_html_aefe5432750eb1c2c65fea628fd9878a7"><div class="ttname"><a href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">Character::get_stamina_max</a></div><div class="ttdeci">int get_stamina_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06815">character.cpp:6815</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af2ff32cce5f17bcf04be958121abe524"><div class="ttname"><a href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">Character::magic</a></div><div class="ttdeci">pimpl&lt; known_magic &gt; magic</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02485">character.h:2485</a></div></div>
<div class="ttc" id="aclassCharacter_html_af313d5e6787a710d5d8419acea7e8f7e"><div class="ttname"><a href="classCharacter.html#af313d5e6787a710d5d8419acea7e8f7e">Character::on_item_acquire</a></div><div class="ttdeci">void on_item_acquire(const item &amp;it)</div><div class="ttdoc">Called when an item is acquired (picked up, worn, or wielded)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09977">character.cpp:9977</a></div></div>
<div class="ttc" id="aclassCharacter_html_af6a33462a9476b6f490a6cea8b19d5a4"><div class="ttname"><a href="classCharacter.html#af6a33462a9476b6f490a6cea8b19d5a4">Character::find_ammo</a></div><div class="ttdeci">std::vector&lt; item_location &gt; find_ammo(const item &amp;obj, bool empty=true, int radius=1) const</div><div class="ttdoc">Searches for ammo or magazines that can be used to reload obj.</div><div class="ttdef"><b>Definition:</b> <a href="character__guns_8cpp_source.html#l00111">character_guns.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af707ac7d1e7995274f21a9f0ac740c9a"><div class="ttname"><a href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">Character::get_arm_str</a></div><div class="ttdeci">int get_arm_str() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04200">character.cpp:4200</a></div></div>
<div class="ttc" id="aclassCharacter_html_afc4d3be0006e7ac9643b568bcf531ae9"><div class="ttname"><a href="classCharacter.html#afc4d3be0006e7ac9643b568bcf531ae9">Character::meets_skill_requirements</a></div><div class="ttdeci">bool meets_skill_requirements(const std::map&lt; skill_id, int &gt; &amp;req, const item &amp;context=item()) const</div><div class="ttdoc">Checks whether the character's skills meet the required.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03525">character.cpp:3525</a></div></div>
<div class="ttc" id="aclassCharacter_html_afca93d0bd4fe00f5c087d4040cbf98ae"><div class="ttname"><a href="classCharacter.html#afca93d0bd4fe00f5c087d4040cbf98ae">Character::meets_requirements</a></div><div class="ttdeci">bool meets_requirements(const item &amp;it, const item &amp;context=item()) const</div><div class="ttdoc">Checks whether the character meets overall requirements to be able to use the item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03547">character.cpp:3547</a></div></div>
<div class="ttc" id="aclassCharacter_html_afcc7ba8e4203089cb86e515bc2b21a76"><div class="ttname"><a href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">Character::invalidate_weight_carried_cache</a></div><div class="ttdeci">void invalidate_weight_carried_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03097">character.cpp:3097</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a00892cd6e73ac9ecf7c6eb2a043158fc"><div class="ttname"><a href="classCreature.html#a00892cd6e73ac9ecf7c6eb2a043158fc">Creature::get_part_encumbrance_data</a></div><div class="ttdeci">const encumbrance_data &amp; get_part_encumbrance_data(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02302">creature.cpp:2302</a></div></div>
<div class="ttc" id="aclassCreature_html_a14ecbd8f044628463354090421a805b4"><div class="ttname"><a href="classCreature.html#a14ecbd8f044628463354090421a805b4">Creature::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdoc">Returns the location of the creature in global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03242">creature.cpp:3242</a></div></div>
<div class="ttc" id="aclassCreature_html_a17d04695b45ce48064d39ba9f4118f55"><div class="ttname"><a href="classCreature.html#a17d04695b45ce48064d39ba9f4118f55">Creature::deal_damage_handle_type</a></div><div class="ttdeci">virtual void deal_damage_handle_type(const effect_source &amp;source, const damage_unit &amp;du, bodypart_id bp, int &amp;damage, int &amp;pain)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01270">creature.cpp:1270</a></div></div>
<div class="ttc" id="aclassCreature_html_a4537397ede1aea8ecec28183252aabe3"><div class="ttname"><a href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(get_body_part_flags=get_body_part_flags::none) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02627">creature.cpp:2627</a></div></div>
<div class="ttc" id="aclassCreature_html_a5de5f5e0d08deb03b68749608eb360b2"><div class="ttname"><a href="classCreature.html#a5de5f5e0d08deb03b68749608eb360b2">Creature::as_npc</a></div><div class="ttdeci">virtual npc * as_npc()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00286">creature.h:286</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a6748055fb3a5922e1fa55c4214aff48f"><div class="ttname"><a href="classCreature.html#a6748055fb3a5922e1fa55c4214aff48f">Creature::size_melee_penalty</a></div><div class="ttdeci">int size_melee_penalty() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00700">creature.cpp:700</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassCreature_html_a90636bbf110025587c181fad389d616c"><div class="ttname"><a href="classCreature.html#a90636bbf110025587c181fad389d616c">Creature::as_monster</a></div><div class="ttdeci">virtual monster * as_monster()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00292">creature.h:292</a></div></div>
<div class="ttc" id="aclassCreature_html_a98ef8437aca8647165ccbe2ebb2e1f2c"><div class="ttname"><a href="classCreature.html#a98ef8437aca8647165ccbe2ebb2e1f2c">Creature::is_fake</a></div><div class="ttdeci">virtual bool is_fake() const</div><div class="ttdoc">Returns true for non-real Creatures used temporarily; i.e.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01518">creature.cpp:1518</a></div></div>
<div class="ttc" id="aclassCreature_html_aaa501dbe3d1e90d47da43fb9ea57b3be"><div class="ttname"><a href="classCreature.html#aaa501dbe3d1e90d47da43fb9ea57b3be">Creature::get_dodge</a></div><div class="ttdeci">virtual float get_dodge() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02148">creature.cpp:2148</a></div></div>
<div class="ttc" id="aclassItem__factory_html_a2fe4e054d71cc25acff45c3ddd3989ec"><div class="ttname"><a href="classItem__factory.html#a2fe4e054d71cc25acff45c3ddd3989ec">Item_factory::find</a></div><div class="ttdeci">static std::vector&lt; const itype * &gt; find(const std::function&lt; bool(const itype &amp;)&gt; &amp;func)</div><div class="ttdoc">Find all item templates (both static and runtime) matching UnaryPredicate function.</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l05427">item_factory.cpp:5427</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassSkillLevel_html"><div class="ttname"><a href="classSkillLevel.html">SkillLevel</a></div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00122">skill.h:123</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a1c8268a8f8b596f89ada6e7c877a64f5"><div class="ttname"><a href="classSkillLevel.html#a1c8268a8f8b596f89ada6e7c877a64f5">SkillLevel::knowledgeLevel</a></div><div class="ttdeci">int knowledgeLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00154">skill.h:154</a></div></div>
<div class="ttc" id="aclassSkillLevel_html_a4de8923aafd85db2946ed9860874d660"><div class="ttname"><a href="classSkillLevel.html#a4de8923aafd85db2946ed9860874d660">SkillLevel::can_train</a></div><div class="ttdeci">bool can_train() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8cpp_source.html#l00407">skill.cpp:407</a></div></div>
<div class="ttc" id="aclassSkill_html"><div class="ttname"><a href="classSkill.html">Skill</a></div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00032">skill.h:33</a></div></div>
<div class="ttc" id="aclassSkill_html_a11c69074ce9b251983f170510808bd85"><div class="ttname"><a href="classSkill.html#a11c69074ce9b251983f170510808bd85">Skill::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00071">skill.h:71</a></div></div>
<div class="ttc" id="aclassammunition__type_html_a236169a55b7679baaa96e491c36e57d9"><div class="ttname"><a href="classammunition__type.html#a236169a55b7679baaa96e491c36e57d9">ammunition_type::default_ammotype</a></div><div class="ttdeci">const itype_id &amp; default_ammotype() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo_8h_source.html#l00020">ammo.h:20</a></div></div>
<div class="ttc" id="aclassammunition__type_html_a3c5d67ec1974c9a43d79c0ab3e7f979a"><div class="ttname"><a href="classammunition__type.html#a3c5d67ec1974c9a43d79c0ab3e7f979a">ammunition_type::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo_8cpp_source.html#l00081">ammo.cpp:81</a></div></div>
<div class="ttc" id="aclassascii__art_html_ad15e094a0d8a2cd64309e4d943f10f39"><div class="ttname"><a href="classascii__art.html#ad15e094a0d8a2cd64309e4d943f10f39">ascii_art::picture</a></div><div class="ttdeci">std::vector&lt; std::string &gt; picture</div><div class="ttdef"><b>Definition:</b> <a href="ascii__art_8h_source.html#l00025">ascii_art.h:25</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassavatar_html_a6a1fb5db7eeb5cd2c973318ed9546f7c"><div class="ttname"><a href="classavatar.html#a6a1fb5db7eeb5cd2c973318ed9546f7c">avatar::has_identified</a></div><div class="ttdeci">bool has_identified(const itype_id &amp;item_id) const override</div><div class="ttdoc">Note that we've read a book at least once.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00738">avatar.cpp:738</a></div></div>
<div class="ttc" id="aclassavatar_html_adcd442574ee8441af971162f8d9857be"><div class="ttname"><a href="classavatar.html#adcd442574ee8441af971162f8d9857be">avatar::add_snippet</a></div><div class="ttdeci">void add_snippet(snippet_id snippet)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00850">avatar.cpp:850</a></div></div>
<div class="ttc" id="aclassbody__part__set_html"><div class="ttname"><a href="classbody__part__set.html">body_part_set</a></div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00011">body_part_set.h:12</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_a5d5d8749b28939d75c8953e08bf97e3a"><div class="ttname"><a href="classbody__part__set.html#a5d5d8749b28939d75c8953e08bf97e3a">body_part_set::intersect_set</a></div><div class="ttdeci">body_part_set intersect_set(const body_part_set &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00832">bodypart.cpp:832</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_ab53afcd91c970552cf7f8914e2d7b151"><div class="ttname"><a href="classbody__part__set.html#ab53afcd91c970552cf7f8914e2d7b151">body_part_set::set</a></div><div class="ttdeci">void set(const bodypart_str_id &amp;bp)</div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00037">body_part_set.h:37</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_ab73d8c38feeabf0f9ab423fec3ebc834"><div class="ttname"><a href="classbody__part__set.html#ab73d8c38feeabf0f9ab423fec3ebc834">body_part_set::any</a></div><div class="ttdeci">bool any() const</div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00043">body_part_set.h:43</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_ada23c12a13e46717fc6bc09b02f24169"><div class="ttname"><a href="classbody__part__set.html#ada23c12a13e46717fc6bc09b02f24169">body_part_set::unify_set</a></div><div class="ttdeci">body_part_set unify_set(const body_part_set &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00822">bodypart.cpp:822</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_ae9e500f0dabe12b2d32ebfc6ba804f81"><div class="ttname"><a href="classbody__part__set.html#ae9e500f0dabe12b2d32ebfc6ba804f81">body_part_set::count</a></div><div class="ttdeci">size_t count() const</div><div class="ttdef"><b>Definition:</b> <a href="body__part__set_8h_source.html#l00049">body_part_set.h:49</a></div></div>
<div class="ttc" id="aclassbodypart_html"><div class="ttname"><a href="classbodypart.html">bodypart</a></div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00439">bodypart.h:440</a></div></div>
<div class="ttc" id="aclassbodypart_html_aecf68b9dedd93cad6660a8d332033168"><div class="ttname"><a href="classbodypart.html#aecf68b9dedd93cad6660a8d332033168">bodypart::id</a></div><div class="ttdeci">bodypart_str_id id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00442">bodypart.h:442</a></div></div>
<div class="ttc" id="aclassbook__proficiency__bonuses_html"><div class="ttname"><a href="classbook__proficiency__bonuses.html">book_proficiency_bonuses</a></div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8h_source.html#l00211">proficiency.h:212</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html"><div class="ttname"><a href="classcata_1_1flat__set.html">cata::flat_set</a></div><div class="ttdoc">A SimpleAssociativeContainer implemented as a sorted vector.</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00029">flat_set.h:30</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html_a038c2f807983027c730259560308285c"><div class="ttname"><a href="classcata_1_1flat__set.html#a038c2f807983027c730259560308285c">cata::flat_set::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00083">flat_set.h:83</a></div></div>
<div class="ttc" id="aclasscata_1_1flat__set_html_ab427ae6af6b4cd328c0000bc197f881b"><div class="ttname"><a href="classcata_1_1flat__set.html#ab427ae6af6b4cd328c0000bc197f881b">cata::flat_set::insert</a></div><div class="ttdeci">iterator insert(iterator, const value_type &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="flat__set_8h_source.html#l00151">flat_set.h:151</a></div></div>
<div class="ttc" id="aclasscata_1_1value__ptr_html"><div class="ttname"><a href="classcata_1_1value__ptr.html">cata::value_ptr&lt; islot_comestible &gt;</a></div></div>
<div class="ttc" id="aclasscharacter__id_html_a57a3bebd5dc5168d0b278cfccdbdcd18"><div class="ttname"><a href="classcharacter__id.html#a57a3bebd5dc5168d0b278cfccdbdcd18">character_id::get_value</a></div><div class="ttdeci">int get_value() const</div><div class="ttdef"><b>Definition:</b> <a href="character__id_8h_source.html#l00021">character_id.h:21</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclassdelayed__transform__iuse_html"><div class="ttname"><a href="classdelayed__transform__iuse.html">delayed_transform_iuse</a></div><div class="ttdoc">This is a iuse_transform that uses the age of the item instead of a counter.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00282">iuse_actor.h:283</a></div></div>
<div class="ttc" id="aclassdelayed__transform__iuse_html_a083d8a58f26d025d8331f01e5c41c6ab"><div class="ttname"><a href="classdelayed__transform__iuse.html#a083d8a58f26d025d8331f01e5c41c6ab">delayed_transform_iuse::time_to_do</a></div><div class="ttdeci">int time_to_do(const item &amp;it) const</div><div class="ttdoc">How much longer (in turns) until the transformation can be done, can be negative.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l00861">iuse_actor.cpp:861</a></div></div>
<div class="ttc" id="aclassdispersion__sources_html_ac3dc7f13e78a217aeaba57740f3af17c"><div class="ttname"><a href="classdispersion__sources.html#ac3dc7f13e78a217aeaba57740f3af17c">dispersion_sources::max</a></div><div class="ttdeci">double max() const</div><div class="ttdef"><b>Definition:</b> <a href="dispersion_8cpp_source.html#l00031">dispersion.cpp:31</a></div></div>
<div class="ttc" id="aclasseffect__source_html_ab2b651053f5ad648e694e35d00b9bca1"><div class="ttname"><a href="classeffect__source.html#ab2b651053f5ad648e694e35d00b9bca1">effect_source::empty</a></div><div class="ttdeci">static effect_source empty()</div><div class="ttdef"><b>Definition:</b> <a href="effect__source_8cpp_source.html#l00069">effect_source.cpp:69</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00260">effect.h:261</a></div></div>
<div class="ttc" id="aclassenchant__cache_html"><div class="ttname"><a href="classenchant__cache.html">enchant_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00280">magic_enchantment.h:281</a></div></div>
<div class="ttc" id="aclassenchantment_html"><div class="ttname"><a href="classenchantment.html">enchantment</a></div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00181">magic_enchantment.h:182</a></div></div>
<div class="ttc" id="aclassenchantment_html_ac3f13881efe10e119c42c5a09e12bebd"><div class="ttname"><a href="classenchantment.html#ac3f13881efe10e119c42c5a09e12bebd">enchantment::has</a></div><div class="ttdeci">has</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00184">magic_enchantment.h:184</a></div></div>
<div class="ttc" id="aclassenum__bitset_html"><div class="ttname"><a href="classenum__bitset.html">enum_bitset&lt; tname::segments &gt;</a></div></div>
<div class="ttc" id="aclassenum__bitset_html_a2a1b6147804bf7032c357fa73f9e6e74"><div class="ttname"><a href="classenum__bitset.html#a2a1b6147804bf7032c357fa73f9e6e74">enum_bitset::reset</a></div><div class="ttdeci">enum_bitset &amp; reset(E e)</div><div class="ttdef"><b>Definition:</b> <a href="enum__bitset_8h_source.html#l00058">enum_bitset.h:58</a></div></div>
<div class="ttc" id="aclassenum__bitset_html_addf85163dfe9c15315bf91c68361551b"><div class="ttname"><a href="classenum__bitset.html#addf85163dfe9c15315bf91c68361551b">enum_bitset::bits</a></div><div class="ttdeci">std::bitset&lt; enum_bitset&lt; E &gt;::size()&gt; bits</div><div class="ttdef"><b>Definition:</b> <a href="enum__bitset_8h_source.html#l00105">enum_bitset.h:105</a></div></div>
<div class="ttc" id="aclassfaction__template_html_a649fcecca332d594911fed59607d4ee7"><div class="ttname"><a href="classfaction__template.html#a649fcecca332d594911fed59607d4ee7">faction_template::id</a></div><div class="ttdeci">faction_id id</div><div class="ttdef"><b>Definition:</b> <a href="faction_8h_source.html#l00112">faction.h:112</a></div></div>
<div class="ttc" id="aclassfault_html"><div class="ttname"><a href="classfault.html">fault</a></div><div class="ttdef"><b>Definition:</b> <a href="fault_8h_source.html#l00049">fault.h:50</a></div></div>
<div class="ttc" id="aclassfault_html_a8aaf546ba1a223455f440c7ba984a155"><div class="ttname"><a href="classfault.html#a8aaf546ba1a223455f440c7ba984a155">fault::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="fault_8cpp_source.html#l00090">fault.cpp:90</a></div></div>
<div class="ttc" id="aclassfault_html_a8ef24fc1db5fc3a414948d575af608a5"><div class="ttname"><a href="classfault.html#a8ef24fc1db5fc3a414948d575af608a5">fault::price_mod</a></div><div class="ttdeci">double price_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="fault_8cpp_source.html#l00080">fault.cpp:80</a></div></div>
<div class="ttc" id="aclassfault_html_ab3996d8c55a12438a10bae3e4228ecdc"><div class="ttname"><a href="classfault.html#ab3996d8c55a12438a10bae3e4228ecdc">fault::get_by_type</a></div><div class="ttdeci">static const std::list&lt; fault_id &gt; &amp; get_by_type(const std::string &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="fault_8cpp_source.html#l00147">fault.cpp:147</a></div></div>
<div class="ttc" id="aclassgun__mode_html"><div class="ttname"><a href="classgun__mode.html">gun_mode</a></div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00012">gun_mode.h:13</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a583a586a605731dbd36af20553c0e51d"><div class="ttname"><a href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">gun_mode::tname</a></div><div class="ttdeci">std::string tname() const</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00057">gun_mode.h:57</a></div></div>
<div class="ttc" id="aclassgun__mode_html_aadaa36507ace08fc621348ae1052647e"><div class="ttname"><a href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">gun_mode::target</a></div><div class="ttdeci">item * target</div><div class="ttdoc">pointer to item providing this mode - base gun or attached gunmod</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00019">gun_mode.h:19</a></div></div>
<div class="ttc" id="aclassgun__type__type_html"><div class="ttname"><a href="classgun__type__type.html">gun_type_type</a></div><div class="ttdoc">The type of gun. The second &quot;_type&quot; suffix is only to distinguish it from item::gun_type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00799">itype.h:800</a></div></div>
<div class="ttc" id="aclassgun__type__type_html_a2a3d83b1e6d5401701c23d783d3168a0"><div class="ttname"><a href="classgun__type__type.html#a2a3d83b1e6d5401701c23d783d3168a0">gun_type_type::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdoc">Translated name.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00228">itype.cpp:228</a></div></div>
<div class="ttc" id="aclassgunmod__location_html"><div class="ttname"><a href="classgunmod__location.html">gunmod_location</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00070">itype.h:71</a></div></div>
<div class="ttc" id="aclassgunmod__location_html_a13e673ad3b5f14c709d680fff1c63272"><div class="ttname"><a href="classgunmod__location.html#a13e673ad3b5f14c709d680fff1c63272">gunmod_location::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdoc">Returns the translated name.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00018">itype.cpp:18</a></div></div>
<div class="ttc" id="aclassholster__actor_html"><div class="ttname"><a href="classholster__actor.html">holster_actor</a></div><div class="ttdoc">Holster a weapon.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00733">iuse_actor.h:734</a></div></div>
<div class="ttc" id="aclassholster__actor_html_abc39e63b332c5628db93c4cb139db39a"><div class="ttname"><a href="classholster__actor.html#abc39e63b332c5628db93c4cb139db39a">holster_actor::can_holster</a></div><div class="ttdeci">bool can_holster(const item &amp;holster, const item &amp;obj) const</div><div class="ttdoc">Check if obj could be stored in the holster.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l02483">iuse_actor.cpp:2483</a></div></div>
<div class="ttc" id="aclassinscribe__actor_html"><div class="ttname"><a href="classinscribe__actor.html">inscribe_actor</a></div><div class="ttdoc">Writes on stuff (ground or items)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00523">iuse_actor.h:524</a></div></div>
<div class="ttc" id="aclassinscribe__actor_html_a7c6b1d6a65059ab89625cd314c5c50b6"><div class="ttname"><a href="classinscribe__actor.html#a7c6b1d6a65059ab89625cd314c5c50b6">inscribe_actor::gerund</a></div><div class="ttdeci">translation gerund</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00549">iuse_actor.h:549</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id</a></div><div class="ttdoc">Just like the string_id, this is a wrapper for int based identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="int__id_8h_source.html#l00021">int_id.h:22</a></div></div>
<div class="ttc" id="aclassint__id_html_a09d4f824b2540da7e682d10cdf324081"><div class="ttname"><a href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">int_id::id</a></div><div class="ttdeci">const string_id&lt; ammo_effect &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassint__id_html_a315169d32cce4267b7c8dceff4b0d1d7"><div class="ttname"><a href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">int_id::obj</a></div><div class="ttdeci">const ammo_effect &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassislot__milling_html"><div class="ttname"><a href="classislot__milling.html">islot_milling</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01156">itype.h:1157</a></div></div>
<div class="ttc" id="aclassislot__milling_html_a7c8dd425808713f7b18e5c3a0e678ac7"><div class="ttname"><a href="classislot__milling.html#a7c8dd425808713f7b18e5c3a0e678ac7">islot_milling::recipe_</a></div><div class="ttdeci">recipe_id recipe_</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01160">itype.h:1160</a></div></div>
<div class="ttc" id="aclassislot__milling_html_aa8ae9e815c2a51ce3d78ee40b95c18d7"><div class="ttname"><a href="classislot__milling.html#aa8ae9e815c2a51ce3d78ee40b95c18d7">islot_milling::into_</a></div><div class="ttdeci">itype_id into_</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01159">itype.h:1159</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html"><div class="ttname"><a href="classitem_1_1reload__option.html">item::reload_option</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00550">item.h:551</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_a075045eb345075b8cf3c44bb327a8d74"><div class="ttname"><a href="classitem_1_1reload__option.html#a075045eb345075b8cf3c44bb327a8d74">item::reload_option::reload_option</a></div><div class="ttdeci">reload_option()=default</div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_a102ec0b737abdb53099f16e836d3fe27"><div class="ttname"><a href="classitem_1_1reload__option.html#a102ec0b737abdb53099f16e836d3fe27">item::reload_option::operator=</a></div><div class="ttdeci">reload_option &amp; operator=(const reload_option &amp;)</div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_ab7102268fec39b1a9104321e4f2c98f5"><div class="ttname"><a href="classitem_1_1reload__option.html#ab7102268fec39b1a9104321e4f2c98f5">item::reload_option::moves</a></div><div class="ttdeci">int moves() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11532">item.cpp:11532</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_abe3eedb7c460ff13cb1eeb782ae0f876"><div class="ttname"><a href="classitem_1_1reload__option.html#abe3eedb7c460ff13cb1eeb782ae0f876">item::reload_option::max_qty</a></div><div class="ttdeci">int max_qty</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00576">item.h:576</a></div></div>
<div class="ttc" id="aclassitem_1_1reload__option_html_af99909229b18cb529592856884124187"><div class="ttname"><a href="classitem_1_1reload__option.html#af99909229b18cb529592856884124187">item::reload_option::qty</a></div><div class="ttdeci">int qty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00564">item.h:564</a></div></div>
<div class="ttc" id="aclassitem__category_html"><div class="ttname"><a href="classitem__category.html">item_category</a></div><div class="ttdoc">Contains metadata for one category of items.</div><div class="ttdef"><b>Definition:</b> <a href="item__category_8h_source.html#l00034">item_category.h:35</a></div></div>
<div class="ttc" id="aclassitem__category_html_a2de48450f318c5ce81abdb60d6a2f532"><div class="ttname"><a href="classitem__category.html#a2de48450f318c5ce81abdb60d6a2f532">item_category::name_header</a></div><div class="ttdeci">std::string name_header() const</div><div class="ttdef"><b>Definition:</b> <a href="item__category_8cpp_source.html#l00087">item_category.cpp:87</a></div></div>
<div class="ttc" id="aclassitem__category_html_a5c37c8230f0eea1de063a9bf3e884dc1"><div class="ttname"><a href="classitem__category.html#a5c37c8230f0eea1de063a9bf3e884dc1">item_category::id</a></div><div class="ttdeci">item_category_id id</div><div class="ttdoc">Unique ID of this category, used when loading from JSON.</div><div class="ttdef"><b>Definition:</b> <a href="item__category_8h_source.html#l00050">item_category.h:50</a></div></div>
<div class="ttc" id="aclassitem__category_html_ab2f1d31be887d993eb4a56f202fb6d39"><div class="ttname"><a href="classitem__category.html#ab2f1d31be887d993eb4a56f202fb6d39">item_category::get_id</a></div><div class="ttdeci">item_category_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="item__category_8cpp_source.html#l00097">item_category.cpp:97</a></div></div>
<div class="ttc" id="aclassitem__components_html"><div class="ttname"><a href="classitem__components.html">item_components</a></div><div class="ttdef"><b>Definition:</b> <a href="item__components_8h_source.html#l00019">item_components.h:20</a></div></div>
<div class="ttc" id="aclassitem__components_html_a8fd66d14ce513ca8fc5868a29791276b"><div class="ttname"><a href="classitem__components.html#a8fd66d14ce513ca8fc5868a29791276b">item_components::add</a></div><div class="ttdeci">void add(item &amp;new_it)</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8cpp_source.html#l00072">item_components.cpp:72</a></div></div>
<div class="ttc" id="aclassitem__components_html_ad51343baaea3f73b0653aadab34f2425"><div class="ttname"><a href="classitem__components.html#ad51343baaea3f73b0653aadab34f2425">item_components::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8cpp_source.html#l00030">item_components.cpp:30</a></div></div>
<div class="ttc" id="aclassitem__components_html_ae53abc627bb93e24e9710fdb2b2d0153"><div class="ttname"><a href="classitem__components.html#ae53abc627bb93e24e9710fdb2b2d0153">item_components::type_vector_pair</a></div><div class="ttdeci">std::pair&lt; const itype_id, std::vector&lt; item &gt; &gt; type_vector_pair</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8h_source.html#l00027">item_components.h:27</a></div></div>
<div class="ttc" id="aclassitem__contents_html"><div class="ttname"><a href="classitem__contents.html">item_contents</a></div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8h_source.html#l00037">item_contents.h:38</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a081cdaadd00dd08cb2885b9ff3dd1738"><div class="ttname"><a href="classitem__contents.html#a081cdaadd00dd08cb2885b9ff3dd1738">item_contents::magazine_default</a></div><div class="ttdeci">itype_id magazine_default() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02008">item_contents.cpp:2008</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a085c494a7f198aa2f7606e0aeeb00186"><div class="ttname"><a href="classitem__contents.html#a085c494a7f198aa2f7606e0aeeb00186">item_contents::min_containable_length</a></div><div class="ttdeci">units::length min_containable_length() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00988">item_contents.cpp:988</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a09498883cc39f742e1f1486b95f1b8c1"><div class="ttname"><a href="classitem__contents.html#a09498883cc39f742e1f1486b95f1b8c1">item_contents::clear_magazines</a></div><div class="ttdeci">void clear_magazines()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01431">item_contents.cpp:1431</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a0c7ab52c6270d1ff2a98c75e0ee5ba3b"><div class="ttname"><a href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">item_contents::clear_items</a></div><div class="ttdeci">void clear_items()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01424">item_contents.cpp:1424</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a0e06ccea0158cffe45bb1a5d1db7568b"><div class="ttname"><a href="classitem__contents.html#a0e06ccea0158cffe45bb1a5d1db7568b">item_contents::get_additional_volume</a></div><div class="ttdeci">units::volume get_additional_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02219">item_contents.cpp:2219</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a11b20b0ada08b6f6228bb2d900f663f9"><div class="ttname"><a href="classitem__contents.html#a11b20b0ada08b6f6228bb2d900f663f9">item_contents::get_used_holster_volume</a></div><div class="ttdeci">units::volume get_used_holster_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02264">item_contents.cpp:2264</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a11c260d90db9a1a02b2c9e1623574594"><div class="ttname"><a href="classitem__contents.html#a11c260d90db9a1a02b2c9e1623574594">item_contents::only_item</a></div><div class="ttdeci">item &amp; only_item()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01609">item_contents.cpp:1609</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a1598ad46f758b26462386beb9a386696"><div class="ttname"><a href="classitem__contents.html#a1598ad46f758b26462386beb9a386696">item_contents::on_pickup</a></div><div class="ttdeci">void on_pickup(Character &amp;guy, item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01204">item_contents.cpp:1204</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a1983bb5c27381d69acb6eeefa30a6538"><div class="ttname"><a href="classitem__contents.html#a1983bb5c27381d69acb6eeefa30a6538">item_contents::remaining_container_capacity_weight</a></div><div class="ttdeci">units::mass remaining_container_capacity_weight(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02394">item_contents.cpp:2394</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a1b7fc08e5b70c986dae79bb5f819d688"><div class="ttname"><a href="classitem__contents.html#a1b7fc08e5b70c986dae79bb5f819d688">item_contents::magazine_current</a></div><div class="ttdeci">item * magazine_current()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01287">item_contents.cpp:1287</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a23bef6c6f457f22d3b4afcba902a318d"><div class="ttname"><a href="classitem__contents.html#a23bef6c6f457f22d3b4afcba902a318d">item_contents::all_pockets_sealed</a></div><div class="ttdeci">bool all_pockets_sealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01479">item_contents.cpp:1479</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a23c2c5a6669126fa11d4d9e7d8c9df3d"><div class="ttname"><a href="classitem__contents.html#a23c2c5a6669126fa11d4d9e7d8c9df3d">item_contents::is_restricted_container</a></div><div class="ttdeci">bool is_restricted_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01581">item_contents.cpp:1581</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a279305b87c2b0f995ba8fc59c88fbaa8"><div class="ttname"><a href="classitem__contents.html#a279305b87c2b0f995ba8fc59c88fbaa8">item_contents::spill_contents</a></div><div class="ttdeci">bool spill_contents(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01213">item_contents.cpp:1213</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a2bc1b5de8b4f3c76ea1e99cc77b20954"><div class="ttname"><a href="classitem__contents.html#a2bc1b5de8b4f3c76ea1e99cc77b20954">item_contents::get_contents_volume_with_tweaks</a></div><div class="ttdeci">units::volume get_contents_volume_with_tweaks(const std::map&lt; const item *, int &gt; &amp;without) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02428">item_contents.cpp:2428</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a2c9f01be53890d3c02c761d04084af8a"><div class="ttname"><a href="classitem__contents.html#a2c9f01be53890d3c02c761d04084af8a">item_contents::ammo_types</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo_types() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01311">item_contents.cpp:1311</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a2f72ab74158416c2074c549a324597df"><div class="ttname"><a href="classitem__contents.html#a2f72ab74158416c2074c549a324597df">item_contents::magazine_compatible</a></div><div class="ttdeci">std::set&lt; itype_id &gt; magazine_compatible() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01992">item_contents.cpp:1992</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a31dec0f1d9ccf93c7f8da6cc0e8e438c"><div class="ttname"><a href="classitem__contents.html#a31dec0f1d9ccf93c7f8da6cc0e8e438c">item_contents::max_containable_volume</a></div><div class="ttdeci">units::volume max_containable_volume(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01015">item_contents.cpp:1015</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a322fdf83c9cc0b7c625c922104996b0b"><div class="ttname"><a href="classitem__contents.html#a322fdf83c9cc0b7c625c922104996b0b">item_contents::bigger_on_the_inside</a></div><div class="ttdeci">bool bigger_on_the_inside(const units::volume &amp;container_volume) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00641">item_contents.cpp:641</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a35e08b506568fb5b4d480422e2e030d2"><div class="ttname"><a href="classitem__contents.html#a35e08b506568fb5b4d480422e2e030d2">item_contents::magazine_flag_restrictions</a></div><div class="ttdeci">std::set&lt; flag_id &gt; magazine_flag_restrictions() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01004">item_contents.cpp:1004</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a36dc7309f81684bed427f38137f722d2"><div class="ttname"><a href="classitem__contents.html#a36dc7309f81684bed427f38137f722d2">item_contents::combine</a></div><div class="ttdeci">void combine(const item_contents &amp;read_input, bool convert=false, bool into_bottom=false, bool restack_charges=true, bool ignore_contents=false)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00677">item_contents.cpp:677</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a37b6d4a1afa64aac1e775869c6c87e6d"><div class="ttname"><a href="classitem__contents.html#a37b6d4a1afa64aac1e775869c6c87e6d">item_contents::item_weight_modifier</a></div><div class="ttdeci">units::mass item_weight_modifier() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02578">item_contents.cpp:2578</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3bada3d2b818265a4df511e02648a0c0"><div class="ttname"><a href="classitem__contents.html#a3bada3d2b818265a4df511e02648a0c0">item_contents::seal_all_pockets</a></div><div class="ttdeci">bool seal_all_pockets()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01470">item_contents.cpp:1470</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3c6147ff3d0e1cbc59acd75d4cc66e4c"><div class="ttname"><a href="classitem__contents.html#a3c6147ff3d0e1cbc59acd75d4cc66e4c">item_contents::first_ammo</a></div><div class="ttdeci">item &amp; first_ammo()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01322">item_contents.cpp:1322</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3d0ce1b26434123e939a54714180b09b"><div class="ttname"><a href="classitem__contents.html#a3d0ce1b26434123e939a54714180b09b">item_contents::all_items_top</a></div><div class="ttdeci">std::list&lt; item * &gt; all_items_top(const std::function&lt; bool(item_pocket &amp;)&gt; &amp;filter)</div><div class="ttdoc">returns a list of pointers to all top-level items from pockets that match the predicate</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01677">item_contents.cpp:1677</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3d821ea0e73727a926b5996fe62d0e95"><div class="ttname"><a href="classitem__contents.html#a3d821ea0e73727a926b5996fe62d0e95">item_contents::full</a></div><div class="ttdeci">bool full(bool allow_bucket) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00619">item_contents.cpp:619</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3dd421a3f55c6af7f4e5c37e91969193"><div class="ttname"><a href="classitem__contents.html#a3dd421a3f55c6af7f4e5c37e91969193">item_contents::can_contain_rigid</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain_rigid(const item &amp;it, bool ignore_pkt_settings=true, bool is_pick_up_inv=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01057">item_contents.cpp:1057</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a3e71adb06d1ff2730137c8f1357a4c60"><div class="ttname"><a href="classitem__contents.html#a3e71adb06d1ff2730137c8f1357a4c60">item_contents::softwares</a></div><div class="ttdeci">std::vector&lt; const item * &gt; softwares() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01856">item_contents.cpp:1856</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a40ad81056d79a62f6183ebf77074da17"><div class="ttname"><a href="classitem__contents.html#a40ad81056d79a62f6183ebf77074da17">item_contents::overflow</a></div><div class="ttdeci">void overflow(const tripoint &amp;pos, const item_location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01224">item_contents.cpp:1224</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a49beb5d79d9b0b57ac9299eb67b4f843"><div class="ttname"><a href="classitem__contents.html#a49beb5d79d9b0b57ac9299eb67b4f843">item_contents::allows_speedloader</a></div><div class="ttdeci">bool allows_speedloader(const itype_id &amp;speedloader_id) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01833">item_contents.cpp:1833</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a4a7c0172d5b8aafdf54be2b21f9e3607"><div class="ttname"><a href="classitem__contents.html#a4a7c0172d5b8aafdf54be2b21f9e3607">item_contents::will_spill</a></div><div class="ttdeci">bool will_spill() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01374">item_contents.cpp:1374</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a4cc534d85d175801dbae59ce49d115be"><div class="ttname"><a href="classitem__contents.html#a4cc534d85d175801dbae59ce49d115be">item_contents::handle_liquid_or_spill</a></div><div class="ttdeci">void handle_liquid_or_spill(Character &amp;guy, const item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01408">item_contents.cpp:1408</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a4e484f8fa34ce47faa26c543c9a284f9"><div class="ttname"><a href="classitem__contents.html#a4e484f8fa34ce47faa26c543c9a284f9">item_contents::obtain_cost</a></div><div class="ttdeci">int obtain_cost(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00835">item_contents.cpp:835</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a4fd00ac3f7d13dd4b7c9d5d11a3a84c5"><div class="ttname"><a href="classitem__contents.html#a4fd00ac3f7d13dd4b7c9d5d11a3a84c5">item_contents::get_total_holster_volume</a></div><div class="ttdeci">units::volume get_total_holster_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02275">item_contents.cpp:2275</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5223f6be650dd2173f8f1ee0be87a828"><div class="ttname"><a href="classitem__contents.html#a5223f6be650dd2173f8f1ee0be87a828">item_contents::legacy_front</a></div><div class="ttdeci">item &amp; legacy_front()</div><div class="ttdoc">This function is to aid migration to using nested containers.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01791">item_contents.cpp:1791</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5298b0915e1937325e856d49aaf52475"><div class="ttname"><a href="classitem__contents.html#a5298b0915e1937325e856d49aaf52475">item_contents::will_spill_if_unsealed</a></div><div class="ttdeci">bool will_spill_if_unsealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01384">item_contents.cpp:1384</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a52f67eca15318716eee4d89da359b295"><div class="ttname"><a href="classitem__contents.html#a52f67eca15318716eee4d89da359b295">item_contents::get_total_holster_weight</a></div><div class="ttdeci">units::mass get_total_holster_weight() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02297">item_contents.cpp:2297</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a56bfd4ca89a4f9b723787eb847431840"><div class="ttname"><a href="classitem__contents.html#a56bfd4ca89a4f9b723787eb847431840">item_contents::has_additional_pockets</a></div><div class="ttdeci">bool has_additional_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02194">item_contents.cpp:2194</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a59536fcea7580503b51d8899552fa31c"><div class="ttname"><a href="classitem__contents.html#a59536fcea7580503b51d8899552fa31c">item_contents::mods</a></div><div class="ttdeci">std::vector&lt; const item * &gt; mods() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01843">item_contents.cpp:1843</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5b9cf070df911b7e71e3e19ace55776d"><div class="ttname"><a href="classitem__contents.html#a5b9cf070df911b7e71e3e19ace55776d">item_contents::can_unload_liquid</a></div><div class="ttdeci">bool can_unload_liquid() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01179">item_contents.cpp:1179</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5e697479764ea7187088b3bd191fe967"><div class="ttname"><a href="classitem__contents.html#a5e697479764ea7187088b3bd191fe967">item_contents::all_pockets_rigid</a></div><div class="ttdeci">bool all_pockets_rigid() const</div><div class="ttdoc">True if every pocket is rigid or we have no pockets.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02556">item_contents.cpp:2556</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5f866f8afa1d91bd8e067045bd15e24f"><div class="ttname"><a href="classitem__contents.html#a5f866f8afa1d91bd8e067045bd15e24f">item_contents::get_all_reloadable_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_reloadable_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02228">item_contents.cpp:2228</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a5f91b801e654750e6563df6f09a6c2e6"><div class="ttname"><a href="classitem__contents.html#a5f91b801e654750e6563df6f09a6c2e6">item_contents::get_additional_pocket_encumbrance</a></div><div class="ttdeci">int get_additional_pocket_encumbrance(float mod) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02200">item_contents.cpp:2200</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a61608c76ece51d2c4b96d8013cb4b491"><div class="ttname"><a href="classitem__contents.html#a61608c76ece51d2c4b96d8013cb4b491">item_contents::max_containable_length</a></div><div class="ttdeci">units::length max_containable_length(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00965">item_contents.cpp:965</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a647fe86aeda2ed7f49e00257c202f3f3"><div class="ttname"><a href="classitem__contents.html#a647fe86aeda2ed7f49e00257c202f3f3">item_contents::get_item_with</a></div><div class="ttdeci">item * get_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div></div>
<div class="ttc" id="aclassitem__contents_html_a6558ba8bbd267861b086ab7e3ff8c81b"><div class="ttname"><a href="classitem__contents.html#a6558ba8bbd267861b086ab7e3ff8c81b">item_contents::remaining_capacity_for_liquid</a></div><div class="ttdeci">int remaining_capacity_for_liquid(const item &amp;liquid) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02516">item_contents.cpp:2516</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a6652166731398890b78565f5a75d18fd"><div class="ttname"><a href="classitem__contents.html#a6652166731398890b78565f5a75d18fd">item_contents::is_single_restricted_container</a></div><div class="ttdeci">bool is_single_restricted_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01591">item_contents.cpp:1591</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a66b8daaa8fa204e7738a601a50a402b6"><div class="ttname"><a href="classitem__contents.html#a66b8daaa8fa204e7738a601a50a402b6">item_contents::get_all_standard_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_standard_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02079">item_contents.cpp:2079</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a6ea82a5299d53817d1e352b30acf3fca"><div class="ttname"><a href="classitem__contents.html#a6ea82a5299d53817d1e352b30acf3fca">item_contents::process</a></div><div class="ttdeci">void process(map &amp;here, Character *carrier, const tripoint &amp;pos, float insulation=1, temperature_flag flag=temperature_flag::NORMAL, float spoil_multiplier_parent=1.0f)</div><div class="ttdoc">Is part of the recursive call of item::process.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02497">item_contents.cpp:2497</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a6f8cbee71e30797c4efe463d71ffa9e6"><div class="ttname"><a href="classitem__contents.html#a6f8cbee71e30797c4efe463d71ffa9e6">item_contents::item_length_modifier</a></div><div class="ttdeci">units::length item_length_modifier() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02587">item_contents.cpp:2587</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a78b244617d790aa60293b82f356a491b"><div class="ttname"><a href="classitem__contents.html#a78b244617d790aa60293b82f356a491b">item_contents::item_size_modifier</a></div><div class="ttdeci">units::volume item_size_modifier() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02569">item_contents.cpp:2569</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a78efa3031a5895eb9c151e93e7f23294"><div class="ttname"><a href="classitem__contents.html#a78efa3031a5895eb9c151e93e7f23294">item_contents::contains_no_solids</a></div><div class="ttdeci">bool contains_no_solids() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01156">item_contents.cpp:1156</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a792455a9c49e5e31c6eb3843b15db105"><div class="ttname"><a href="classitem__contents.html#a792455a9c49e5e31c6eb3843b15db105">item_contents::get_total_holsters</a></div><div class="ttdeci">int get_total_holsters() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02253">item_contents.cpp:2253</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a7931da51131300026f822d4791eb25aa"><div class="ttname"><a href="classitem__contents.html#a7931da51131300026f822d4791eb25aa">item_contents::can_contain_liquid</a></div><div class="ttdeci">bool can_contain_liquid(bool held_or_ground) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01145">item_contents.cpp:1145</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a7a9621218e39e4ad6149f2f0ae48132d"><div class="ttname"><a href="classitem__contents.html#a7a9621218e39e4ad6149f2f0ae48132d">item_contents::empty_container</a></div><div class="ttdeci">bool empty_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00603">item_contents.cpp:603</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a7c338da0319dc85f464a822a5f5651c4"><div class="ttname"><a href="classitem__contents.html#a7c338da0319dc85f464a822a5f5651c4">item_contents::gunmods</a></div><div class="ttdeci">std::vector&lt; item * &gt; gunmods()</div><div class="ttdoc">gets all gunmods in the item</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01809">item_contents.cpp:1809</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a7c6b7279a7d47ff5ea9089fcb570bd86"><div class="ttname"><a href="classitem__contents.html#a7c6b7279a7d47ff5ea9089fcb570bd86">item_contents::all_ablative_armor</a></div><div class="ttdeci">std::list&lt; item * &gt; all_ablative_armor()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01777">item_contents.cpp:1777</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a7e8ec9f297087e4fdfd6426434ea1269"><div class="ttname"><a href="classitem__contents.html#a7e8ec9f297087e4fdfd6426434ea1269">item_contents::has_pocket_type</a></div><div class="ttdeci">bool has_pocket_type(pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01509">item_contents.cpp:1509</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a837d513f834dfe82e7214234c3bbeae0"><div class="ttname"><a href="classitem__contents.html#a837d513f834dfe82e7214234c3bbeae0">item_contents::get_all_contained_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_contained_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02065">item_contents.cpp:2065</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a84d70fb3f980b057ab38d9bae5aea4c9"><div class="ttname"><a href="classitem__contents.html#a84d70fb3f980b057ab38d9bae5aea4c9">item_contents::is_compatible</a></div><div class="ttdeci">ret_val&lt; void &gt; is_compatible(const item &amp;it) const</div><div class="ttdoc">returns whether any of the pockets contained is compatible with the specified item.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01040">item_contents.cpp:1040</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a8856a40c607a785ad15c0cd8b10c4931"><div class="ttname"><a href="classitem__contents.html#a8856a40c607a785ad15c0cd8b10c4931">item_contents::empty_with_no_mods</a></div><div class="ttdeci">bool empty_with_no_mods() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00578">item_contents.cpp:578</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a8a41a60a66bf45db486f507bfb77b26e"><div class="ttname"><a href="classitem__contents.html#a8a41a60a66bf45db486f507bfb77b26e">item_contents::cables</a></div><div class="ttdeci">std::vector&lt; item * &gt; cables()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01895">item_contents.cpp:1895</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a8a6a3cd39a0f44b9cac5197ed38f184f"><div class="ttname"><a href="classitem__contents.html#a8a6a3cd39a0f44b9cac5197ed38f184f">item_contents::has_any_with</a></div><div class="ttdeci">bool has_any_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter, pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01530">item_contents.cpp:1530</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a9023dcc3a2bc014e8a28c2b08ca90ef3"><div class="ttname"><a href="classitem__contents.html#a9023dcc3a2bc014e8a28c2b08ca90ef3">item_contents::insert_cost</a></div><div class="ttdeci">int insert_cost(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00846">item_contents.cpp:846</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a91c50caec5703fc518fc88d83f25b5e0"><div class="ttname"><a href="classitem__contents.html#a91c50caec5703fc518fc88d83f25b5e0">item_contents::get_additional_weight</a></div><div class="ttdeci">units::mass get_additional_weight() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02210">item_contents.cpp:2210</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a92e8a2ace749c3795c0db2d4053c23c7"><div class="ttname"><a href="classitem__contents.html#a92e8a2ace749c3795c0db2d4053c23c7">item_contents::total_contained_volume</a></div><div class="ttdeci">units::volume total_contained_volume(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02379">item_contents.cpp:2379</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a9660993d9dbde873705f69036a73e55e"><div class="ttname"><a href="classitem__contents.html#a9660993d9dbde873705f69036a73e55e">item_contents::get_used_holsters</a></div><div class="ttdeci">int get_used_holsters() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02242">item_contents.cpp:2242</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a9a416aebdde07e8b17dcda06f90e8c4a"><div class="ttname"><a href="classitem__contents.html#a9a416aebdde07e8b17dcda06f90e8c4a">item_contents::remaining_container_capacity</a></div><div class="ttdeci">units::volume remaining_container_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02360">item_contents.cpp:2360</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa1a6051fd4d4d1e6ae10a560e4081916"><div class="ttname"><a href="classitem__contents.html#aa1a6051fd4d4d1e6ae10a560e4081916">item_contents::same_contents</a></div><div class="ttdeci">bool same_contents(const item_contents &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01557">item_contents.cpp:1557</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa496e1176a8378bec444c8ea1fe373d4"><div class="ttname"><a href="classitem__contents.html#aa496e1176a8378bec444c8ea1fe373d4">item_contents::force_insert_item</a></div><div class="ttdeci">void force_insert_item(const item &amp;it, pocket_type pk_type)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00882">item_contents.cpp:882</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa63a64b9dda0208d68267945e7b76615"><div class="ttname"><a href="classitem__contents.html#aa63a64b9dda0208d68267945e7b76615">item_contents::get_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_pockets(std::function&lt; bool(item_pocket const &amp;)&gt; const &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02039">item_contents.cpp:2039</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa653ffb4ed5b3cdc599400948daefe86"><div class="ttname"><a href="classitem__contents.html#aa653ffb4ed5b3cdc599400948daefe86">item_contents::spill_open_pockets</a></div><div class="ttdeci">bool spill_open_pockets(Character &amp;guy, const item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01395">item_contents.cpp:1395</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa744f662499b0a03029ea58389cc260a"><div class="ttname"><a href="classitem__contents.html#aa744f662499b0a03029ea58389cc260a">item_contents::num_item_stacks</a></div><div class="ttdeci">size_t num_item_stacks() const</div><div class="ttdoc">returns the number of items stacks in contents each item that is not count_by_charges,...</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01189">item_contents.cpp:1189</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aab0f2eac2c13ceb272c0ca01251e793d"><div class="ttname"><a href="classitem__contents.html#aab0f2eac2c13ceb272c0ca01251e793d">item_contents::can_reload_with</a></div><div class="ttdeci">bool can_reload_with(const item &amp;ammo, bool now) const</div><div class="ttdoc">returns whether any of the pockets can be reloaded with the specified item.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01168">item_contents.cpp:1168</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aaf36bbee755b0f90c43eecefdd36fc39"><div class="ttname"><a href="classitem__contents.html#aaf36bbee755b0f90c43eecefdd36fc39">item_contents::casings_handle</a></div><div class="ttdeci">void casings_handle(const std::function&lt; bool(item &amp;)&gt; &amp;func)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01417">item_contents.cpp:1417</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aafc14797017b022d8911a5c2317e05bf"><div class="ttname"><a href="classitem__contents.html#aafc14797017b022d8911a5c2317e05bf">item_contents::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00656">item_contents.cpp:656</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ab475da480fffb19572e7fe47380ddac5"><div class="ttname"><a href="classitem__contents.html#ab475da480fffb19572e7fe47380ddac5">item_contents::get_nested_content_volume_recursive</a></div><div class="ttdeci">units::volume get_nested_content_volume_recursive(const std::map&lt; const item *, int &gt; &amp;without) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02455">item_contents.cpp:2455</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ab6a38a50393cb41a1b5196bd587ca6a5"><div class="ttname"><a href="classitem__contents.html#ab6a38a50393cb41a1b5196bd587ca6a5">item_contents::ebooks</a></div><div class="ttdeci">std::vector&lt; item * &gt; ebooks()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01869">item_contents.cpp:1869</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac5a8e63353625b0e61c0b29611af78af"><div class="ttname"><a href="classitem__contents.html#ac5a8e63353625b0e61c0b29611af78af">item_contents::info</a></div><div class="ttdeci">void info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02612">item_contents.cpp:2612</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac5f3fb88fd44f0789b7a6123e13180f9"><div class="ttname"><a href="classitem__contents.html#ac5f3fb88fd44f0789b7a6123e13180f9">item_contents::is_magazine_full</a></div><div class="ttdeci">bool is_magazine_full() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00630">item_contents.cpp:630</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac610119ad38ef4567c80490e9b0e5f83"><div class="ttname"><a href="classitem__contents.html#ac610119ad38ef4567c80490e9b0e5f83">item_contents::first_item</a></div><div class="ttdeci">item &amp; first_item()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01597">item_contents.cpp:1597</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac7536530b171a0b835eca8b31fdbad49"><div class="ttname"><a href="classitem__contents.html#ac7536530b171a0b835eca8b31fdbad49">item_contents::remove_internal</a></div><div class="ttdeci">void remove_internal(const std::function&lt; bool(item &amp;)&gt; &amp;filter, int &amp;count, std::list&lt; item &gt; &amp;res)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02487">item_contents.cpp:2487</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac79c45fbf5363f3a79a62083a72c4416"><div class="ttname"><a href="classitem__contents.html#ac79c45fbf5363f3a79a62083a72c4416">item_contents::best_quality</a></div><div class="ttdeci">int best_quality(const quality_id &amp;id) const</div><div class="ttdoc">returns the best quality of the id that's contained in the item in CONTAINER pockets</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02596">item_contents.cpp:2596</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ac8076cdbfa6169f6367a9c1d52d8e9b9"><div class="ttname"><a href="classitem__contents.html#ac8076cdbfa6169f6367a9c1d52d8e9b9">item_contents::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, float fuel_efficiency=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01241">item_contents.cpp:1241</a></div></div>
<div class="ttc" id="aclassitem__contents_html_acdea3514b4c80b9495fe9dc060754696"><div class="ttname"><a href="classitem__contents.html#acdea3514b4c80b9495fe9dc060754696">item_contents::any_pockets_sealed</a></div><div class="ttdeci">bool any_pockets_sealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01496">item_contents.cpp:1496</a></div></div>
<div class="ttc" id="aclassitem__contents_html_acf4be8b27d98d585a113deb277479881"><div class="ttname"><a href="classitem__contents.html#acf4be8b27d98d585a113deb277479881">item_contents::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01300">item_contents.cpp:1300</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad09a290f870ca1f6d557551ab2e64c12"><div class="ttname"><a href="classitem__contents.html#ad09a290f870ca1f6d557551ab2e64c12">item_contents::all_known_contents</a></div><div class="ttdeci">std::list&lt; item * &gt; all_known_contents()</div><div class="ttdoc">returns a list of pointers to all visible or remembered content items that are not mods</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01763">item_contents.cpp:1763</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad1a6e1b76f8b54ae8a4229d455a5aab8"><div class="ttname"><a href="classitem__contents.html#ad1a6e1b76f8b54ae8a4229d455a5aab8">item_contents::insert_item</a></div><div class="ttdeci">ret_val&lt; item * &gt; insert_item(const item &amp;it, pocket_type pk_type, bool ignore_contents=false, bool unseal_pockets=false)</div><div class="ttdoc">Attempts to insert an item into these item contents, stipulating that it must go into a pocket of the...</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00856">item_contents.cpp:856</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad5b1250d9699aa489bbfcf3e5689581b"><div class="ttname"><a href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">item_contents::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00586">item_contents.cpp:586</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad5c3e36a9e90cc0564ffe4d043e09c72"><div class="ttname"><a href="classitem__contents.html#ad5c3e36a9e90cc0564ffe4d043e09c72">item_contents::has_unrestricted_pockets</a></div><div class="ttdeci">bool has_unrestricted_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01519">item_contents.cpp:1519</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad676d0ea6aeb3bc7d4d4077271174d5c"><div class="ttname"><a href="classitem__contents.html#ad676d0ea6aeb3bc7d4d4077271174d5c">item_contents::get_added_pockets</a></div><div class="ttdeci">std::vector&lt; const item * &gt; get_added_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02107">item_contents.cpp:2107</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad8ca15178957602e8e18d0b4bb05ece8"><div class="ttname"><a href="classitem__contents.html#ad8ca15178957602e8e18d0b4bb05ece8">item_contents::total_contained_weight</a></div><div class="ttdeci">units::mass total_contained_weight(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02413">item_contents.cpp:2413</a></div></div>
<div class="ttc" id="aclassitem__contents_html_adce46166dc426ccc7ae7f4b50b9b91d3"><div class="ttname"><a href="classitem__contents.html#adce46166dc426ccc7ae7f4b50b9b91d3">item_contents::relative_encumbrance</a></div><div class="ttdeci">float relative_encumbrance() const</div><div class="ttdoc">If contents should contribute to encumbrance, returns a value between 0 and 1 indicating the position...</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02530">item_contents.cpp:2530</a></div></div>
<div class="ttc" id="aclassitem__contents_html_add707f76410aaafee46ba91cba9b1aa3"><div class="ttname"><a href="classitem__contents.html#add707f76410aaafee46ba91cba9b1aa3">item_contents::is_funnel_container</a></div><div class="ttdeci">bool is_funnel_container(units::volume &amp;bigger_than) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01569">item_contents.cpp:1569</a></div></div>
<div class="ttc" id="aclassitem__contents_html_adee893774008e7e39a02bd91fbce8f3a"><div class="ttname"><a href="classitem__contents.html#adee893774008e7e39a02bd91fbce8f3a">item_contents::get_all_ablative_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_ablative_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02093">item_contents.cpp:2093</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ae10849084bbb8445d7882fa9163def6f"><div class="ttname"><a href="classitem__contents.html#ae10849084bbb8445d7882fa9163def6f">item_contents::leak</a></div><div class="ttdeci">void leak(map &amp;here, Character *carrier, const tripoint &amp;pos, item_pocket *pocke=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02507">item_contents.cpp:2507</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ae39c5fc95b9777755cfd02797badbb5b"><div class="ttname"><a href="classitem__contents.html#ae39c5fc95b9777755cfd02797badbb5b">item_contents::get_used_holster_weight</a></div><div class="ttdeci">units::mass get_used_holster_weight() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02286">item_contents.cpp:2286</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ae80c1497df815a196ba8b3dee2932706"><div class="ttname"><a href="classitem__contents.html#ae80c1497df815a196ba8b3dee2932706">item_contents::update_modified_pockets</a></div><div class="ttdeci">void update_modified_pockets(const std::optional&lt; const pocket_data * &gt; &amp;mag_or_mag_well, std::vector&lt; const pocket_data * &gt; container_pockets)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01924">item_contents.cpp:1924</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aea8672c3d4e50c1bbaa4096f04037720"><div class="ttname"><a href="classitem__contents.html#aea8672c3d4e50c1bbaa4096f04037720">item_contents::can_contain</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain(const item &amp;it, bool ignore_pkt_settings=true, bool is_pick_up_inv=false, units::volume remaining_parent_volume=10000000_ml) const</div><div class="ttdoc">returns whether an item can be physically stored within these item contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01098">item_contents.cpp:1098</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aeb0f4010b35a2388d4e2329d751f1f25"><div class="ttname"><a href="classitem__contents.html#aeb0f4010b35a2388d4e2329d751f1f25">item_contents::favorite_settings_menu</a></div><div class="ttdeci">void favorite_settings_menu(item *i)</div><div class="ttdoc">Open a menu for the player to set pocket favorite settings for the pockets in this item_contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02689">item_contents.cpp:2689</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aed5311c34647eca7b7784640916a70aa"><div class="ttname"><a href="classitem__contents.html#aed5311c34647eca7b7784640916a70aa">item_contents::contained_where</a></div><div class="ttdeci">item_pocket * contained_where(const item &amp;contained)</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00955">item_contents.cpp:955</a></div></div>
<div class="ttc" id="aclassitem__contents_html_af16e85e18d47e21f2fe2f895af21ca07"><div class="ttname"><a href="classitem__contents.html#af16e85e18d47e21f2fe2f895af21ca07">item_contents::best_pocket</a></div><div class="ttdeci">std::pair&lt; item_location, item_pocket * &gt; best_pocket(const item &amp;it, item_location &amp;this_loc, const item *avoid=nullptr, bool allow_sealed=false, bool ignore_settings=false, bool nested=false, bool ignore_rigidity=false)</div><div class="ttdoc">returns an item_location and pointer to the best pocket that can contain the item @it checks all item...</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00893">item_contents.cpp:893</a></div></div>
<div class="ttc" id="aclassitem__contents_html_af25eaa87f276080b843971c60c8cade4"><div class="ttname"><a href="classitem__contents.html#af25eaa87f276080b843971c60c8cade4">item_contents::total_container_capacity</a></div><div class="ttdeci">units::volume total_container_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdoc">gets the total volume available to be used.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02308">item_contents.cpp:2308</a></div></div>
<div class="ttc" id="aclassitem__contents_html_af63aa1e6fb4e64cf18b9b5b26e9187fe"><div class="ttname"><a href="classitem__contents.html#af63aa1e6fb4e64cf18b9b5b26e9187fe">item_contents::total_container_weight_capacity</a></div><div class="ttdeci">units::mass total_container_weight_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l02018">item_contents.cpp:2018</a></div></div>
<div class="ttc" id="aclassitem__contents_html_afb8248de2a7741144640a789db3d7593"><div class="ttname"><a href="classitem__contents.html#afb8248de2a7741144640a789db3d7593">item_contents::update_open_pockets</a></div><div class="ttdeci">void update_open_pockets()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01449">item_contents.cpp:1449</a></div></div>
<div class="ttc" id="aclassitem__contents_html_afdcf1334606a182ac8ef3e6801730ecb"><div class="ttname"><a href="classitem__contents.html#afdcf1334606a182ac8ef3e6801730ecb">item_contents::heat_up</a></div><div class="ttdeci">void heat_up()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01231">item_contents.cpp:1231</a></div></div>
<div class="ttc" id="aclassitem__contents_html_afef2f5ea31859d7634bad3821fcbb922"><div class="ttname"><a href="classitem__contents.html#afef2f5ea31859d7634bad3821fcbb922">item_contents::stacks_with</a></div><div class="ttdeci">bool stacks_with(const item_contents &amp;rhs, int depth=0, int maxdepth=2) const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01544">item_contents.cpp:1544</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888dafedb2d84cafe20862cb4399751a8a7e3"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888dafedb2d84cafe20862cb4399751a8a7e3">item_location::type::invalid</a></div><div class="ttdeci">@ invalid</div></div>
<div class="ttc" id="aclassitem__location_html_a0f73e1c094e3e36d6455d46436e299a9"><div class="ttname"><a href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">item_location::where</a></div><div class="ttdeci">type where() const</div><div class="ttdoc">Returns the type of location where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01001">item_location.cpp:1001</a></div></div>
<div class="ttc" id="aclassitem__location_html_a337696f1679154f092c1e941dc10ba12"><div class="ttname"><a href="classitem__location.html#a337696f1679154f092c1e941dc10ba12">item_location::held_by</a></div><div class="ttdeci">bool held_by(Character const &amp;who) const</div><div class="ttdoc">returns true if the item is in the inventory of the given character</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01107">item_location.cpp:1107</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01041">item_location.cpp:1041</a></div></div>
<div class="ttc" id="aclassitem__location_html_ad2c318c46c6daaa28c9ed522ae6d13a4"><div class="ttname"><a href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">item_location::parent_item</a></div><div class="ttdeci">item_location parent_item() const</div><div class="ttdoc">returns the parent item, or an invalid location if it has no parent</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00860">item_location.cpp:860</a></div></div>
<div class="ttc" id="aclassitem__location_html_afbeb9ca7c1b58ec0564c0ffa437e415a"><div class="ttname"><a href="classitem__location.html#afbeb9ca7c1b58ec0564c0ffa437e415a">item_location::has_parent</a></div><div class="ttdeci">bool has_parent() const</div><div class="ttdoc">true if this item location can and does have a parent</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00876">item_location.cpp:876</a></div></div>
<div class="ttc" id="aclassitem__pocket_1_1favorite__settings_html_ab14450aeaf5bf4f0d0cc6570829e58e3"><div class="ttname"><a href="classitem__pocket_1_1favorite__settings.html#ab14450aeaf5bf4f0d0cc6570829e58e3">item_pocket::favorite_settings::is_collapsed</a></div><div class="ttdeci">bool is_collapsed() const</div><div class="ttdoc">Are pocket contents hidden?</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02668">item_pocket.cpp:2668</a></div></div>
<div class="ttc" id="aclassitem__pocket_html"><div class="ttname"><a href="classitem__pocket.html">item_pocket</a></div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00036">item_pocket.h:37</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a00a9e3117842e2d34dd8b87319f821c1"><div class="ttname"><a href="classitem__pocket.html#a00a9e3117842e2d34dd8b87319f821c1">item_pocket::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo) const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00732">item_pocket.cpp:732</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a10fbcc4c4000bcfa5539059a03b6a0ca"><div class="ttname"><a href="classitem__pocket.html#a10fbcc4c4000bcfa5539059a03b6a0ca">item_pocket::watertight</a></div><div class="ttdeci">bool watertight() const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02071">item_pocket.cpp:2071</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a5fc5de48e66d4c8f9fa7a9a671db731c"><div class="ttname"><a href="classitem__pocket.html#a5fc5de48e66d4c8f9fa7a9a671db731c">item_pocket::is_type</a></div><div class="ttdeci">bool is_type(pocket_type ptype) const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02256">item_pocket.cpp:2256</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a6251a0649be2713655049d926729ae4f"><div class="ttname"><a href="classitem__pocket.html#a6251a0649be2713655049d926729ae4f">item_pocket::charges_per_remaining_weight</a></div><div class="ttdeci">int charges_per_remaining_weight(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02349">item_pocket.cpp:2349</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a7c8df26cc3695a78e969810e569a54d7"><div class="ttname"><a href="classitem__pocket.html#a7c8df26cc3695a78e969810e569a54d7">item_pocket::unseal</a></div><div class="ttdeci">void unseal()</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00858">item_pocket.cpp:858</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a8345d9f4f7869de2a301de5a653be09c"><div class="ttname"><a href="classitem__pocket.html#a8345d9f4f7869de2a301de5a653be09c">item_pocket::insert_item</a></div><div class="ttdeci">ret_val&lt; item * &gt; insert_item(const item &amp;it, bool into_bottom=false, bool restack_charges=true, bool ignore_contents=false)</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02197">item_pocket.cpp:2197</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_a938e31d31ebf783015c5963f90993502"><div class="ttname"><a href="classitem__pocket.html#a938e31d31ebf783015c5963f90993502">item_pocket::charges_per_remaining_volume</a></div><div class="ttdeci">int charges_per_remaining_volume(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02331">item_pocket.cpp:2331</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_aa97da32e55e4b9d3b7a20088ed3709ae"><div class="ttname"><a href="classitem__pocket.html#aa97da32e55e4b9d3b7a20088ed3709ae">item_pocket::remaining_ammo_capacity</a></div><div class="ttdeci">int remaining_ammo_capacity(const ammotype &amp;ammo) const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l00742">item_pocket.cpp:742</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_ab6bc7567101ffc19abc968578f429d55"><div class="ttname"><a href="classitem__pocket.html#ab6bc7567101ffc19abc968578f429d55">item_pocket::is_standard_type</a></div><div class="ttdeci">bool is_standard_type() const</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l02081">item_pocket.cpp:2081</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_acc31bcefa81a31b6fc4880c3a3813753"><div class="ttname"><a href="classitem__pocket.html#acc31bcefa81a31b6fc4880c3a3813753">item_pocket::can_contain</a></div><div class="ttdeci">ret_val&lt; contain_code &gt; can_contain(const item &amp;it, bool ignore_contents=false) const</div><div class="ttdoc">Can the pocket contain the specified item?</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l01458">item_pocket.cpp:1458</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_afb8bb7dafdbdc114d6ac13506c352b9e"><div class="ttname"><a href="classitem__pocket.html#afb8bb7dafdbdc114d6ac13506c352b9e">item_pocket::settings</a></div><div class="ttdeci">favorite_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00387">item_pocket.h:387</a></div></div>
<div class="ttc" id="aclassitem__pocket_html_afc5c39b878142d094c7d61ddb802920a"><div class="ttname"><a href="classitem__pocket.html#afc5c39b878142d094c7d61ddb802920a">item_pocket::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8cpp_source.html#l01924">item_pocket.cpp:1924</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a009de9d7138e4186f03640d282ebd621"><div class="ttname"><a href="classitem.html#a009de9d7138e4186f03640d282ebd621">item::is_medical_tool</a></div><div class="ttdeci">bool is_medical_tool() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09497">item.cpp:9497</a></div></div>
<div class="ttc" id="aclassitem_html_a00d8129e422155118bb01ec20a8f919d"><div class="ttname"><a href="classitem.html#a00d8129e422155118bb01ec20a8f919d">item::max_containable_volume</a></div><div class="ttdeci">units::volume max_containable_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10076">item.cpp:10076</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08623">item.cpp:8623</a></div></div>
<div class="ttc" id="aclassitem_html_a018fe1a11eaa7e18cae915d683088c02"><div class="ttname"><a href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">item::put_in</a></div><div class="ttdeci">ret_val&lt; void &gt; put_in(const item &amp;payload, pocket_type pk_type, bool unseal_pockets=false, Character *carrier=nullptr)</div><div class="ttdoc">Puts the given item into this one.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01784">item.cpp:1784</a></div></div>
<div class="ttc" id="aclassitem_html_a01e04ebcbadc63b26b213c0a861b0188"><div class="ttname"><a href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">item::toolmods</a></div><div class="ttdeci">std::vector&lt; item * &gt; toolmods()</div><div class="ttdoc">Returns all toolmods currently attached to this item (always empty if item not a tool)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07765">item.cpp:7765</a></div></div>
<div class="ttc" id="aclassitem_html_a01f8af501d37d5cb4eaee8ba21270bd6"><div class="ttname"><a href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">item::is_irremovable</a></div><div class="ttdeci">bool is_irremovable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09780">item.cpp:9780</a></div></div>
<div class="ttc" id="aclassitem_html_a0265172cdecddf0ae112a4f4d87fdb77"><div class="ttname"><a href="classitem.html#a0265172cdecddf0ae112a4f4d87fdb77">item::mod_energy</a></div><div class="ttdeci">units::energy mod_energy(const units::energy &amp;qty)</div><div class="ttdoc">Add or remove energy from a battery.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00701">item.cpp:701</a></div></div>
<div class="ttc" id="aclassitem_html_a0371581f39286bc80abd789efe4ac1c8"><div class="ttname"><a href="classitem.html#a0371581f39286bc80abd789efe4ac1c8">item::print_ammo</a></div><div class="ttdeci">std::string print_ammo(ammotype at, const item *gun=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11093">item.cpp:11093</a></div></div>
<div class="ttc" id="aclassitem_html_a03b6819525a3cc66828b7db4c60f9cf6"><div class="ttname"><a href="classitem.html#a03b6819525a3cc66828b7db4c60f9cf6">item::mitigate_damage</a></div><div class="ttdeci">void mitigate_damage(damage_unit &amp;du, const bodypart_id &amp;bp=bodypart_id(), int roll=0) const</div><div class="ttdoc">Assuming that specified du hit the armor, reduce du based on the item's resistance to the damage type...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09113">item.cpp:9113</a></div></div>
<div class="ttc" id="aclassitem_html_a03c95532604c7af8deb64205d69c088a"><div class="ttname"><a href="classitem.html#a03c95532604c7af8deb64205d69c088a">item::LINK_RESPOOL_THRESHOLD</a></div><div class="ttdeci">static const int LINK_RESPOOL_THRESHOLD</div><div class="ttdoc">Disconnecting a cable beyond this length will leave it unspooled, requiring respooling to be usable a...</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01482">item.h:1482</a></div></div>
<div class="ttc" id="aclassitem_html_a04985a2b99688b687432463fb2f0a853"><div class="ttname"><a href="classitem.html#a04985a2b99688b687432463fb2f0a853">item::reach_range</a></div><div class="ttdeci">int reach_range(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07509">item.cpp:7509</a></div></div>
<div class="ttc" id="aclassitem_html_a054cbf5ac79938bbfb527bb0314043b1"><div class="ttname"><a href="classitem.html#a054cbf5ac79938bbfb527bb0314043b1">item::get_flags</a></div><div class="ttdeci">const FlagsSetType &amp; get_flags() const</div><div class="ttdoc">returns read-only set of flags of this item (not including flags from item type or gunmods)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07660">item.cpp:7660</a></div></div>
<div class="ttc" id="aclassitem_html_a05c24ca1052a7a8cb9fd314acdb49f40"><div class="ttname"><a href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">item::is_favorite</a></div><div class="ttdeci">bool is_favorite</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03213">item.h:3213</a></div></div>
<div class="ttc" id="aclassitem_html_a062899abd6f9949ceb1c04fa394afbdc"><div class="ttname"><a href="classitem.html#a062899abd6f9949ceb1c04fa394afbdc">item::get_book_skill</a></div><div class="ttdeci">std::string get_book_skill() const</div><div class="ttdoc">Returns empty string if the book teach no skill.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09633">item.cpp:9633</a></div></div>
<div class="ttc" id="aclassitem_html_a0689df7448f053e727cf64ba733b98ef"><div class="ttname"><a href="classitem.html#a0689df7448f053e727cf64ba733b98ef">item::seed</a></div><div class="ttdeci">int seed</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03155">item.h:3155</a></div></div>
<div class="ttc" id="aclassitem_html_a06cf15fba046181d217790bd95b77f20"><div class="ttname"><a href="classitem.html#a06cf15fba046181d217790bd95b77f20">item::is_same_relic</a></div><div class="ttdeci">bool is_same_relic(item const &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09968">item.cpp:9968</a></div></div>
<div class="ttc" id="aclassitem_html_a06f562ce239a39f4220143f7cd4998e9"><div class="ttname"><a href="classitem.html#a06f562ce239a39f4220143f7cd4998e9">item::set_side</a></div><div class="ttdeci">bool set_side(side s)</div><div class="ttdoc">Change the side on which the item is worn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01176">item.cpp:1176</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a07a52eee8d2698d3bb89b988992d98cb"><div class="ttname"><a href="classitem.html#a07a52eee8d2698d3bb89b988992d98cb">item::this_or_single_content</a></div><div class="ttdeci">item const  * this_or_single_content() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14971">item.cpp:14971</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aclassitem_html_a0863a9784ae90c120d91478521163f16"><div class="ttname"><a href="classitem.html#a0863a9784ae90c120d91478521163f16">item::make_component_hash</a></div><div class="ttdeci">uint64_t make_component_hash() const</div><div class="ttdoc">Creates a hash from the itype_ids of this item's components.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12583">item.cpp:12583</a></div></div>
<div class="ttc" id="aclassitem_html_a0894d963d06ccd7c7237d4b2b837956d"><div class="ttname"><a href="classitem.html#a0894d963d06ccd7c7237d4b2b837956d">item::is_worn_only_with</a></div><div class="ttdeci">bool is_worn_only_with(const item &amp;it) const</div><div class="ttdoc">Returns true whether this item can be worn only when.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01220">item.cpp:1220</a></div></div>
<div class="ttc" id="aclassitem_html_a08a65f52f9de30e8f4a76e270bfc67a1"><div class="ttname"><a href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">item::is_transformable</a></div><div class="ttdeci">bool is_transformable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09958">item.cpp:9958</a></div></div>
<div class="ttc" id="aclassitem_html_a08b2eb703a81548c3ace81c4fa22f376"><div class="ttname"><a href="classitem.html#a08b2eb703a81548c3ace81c4fa22f376">item::has_ripoff_pockets</a></div><div class="ttdeci">bool has_ripoff_pockets() const</div><div class="ttdoc">Returns if the armor has pockets with a chance to be ripped off.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01208">item.cpp:1208</a></div></div>
<div class="ttc" id="aclassitem_html_a08d13927517213cba082edf26c3ed767"><div class="ttname"><a href="classitem.html#a08d13927517213cba082edf26c3ed767">item::add_automatic_whitelist</a></div><div class="ttdeci">void add_automatic_whitelist()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01271">item.cpp:1271</a></div></div>
<div class="ttc" id="aclassitem_html_a0ac79d3de61e0dd6347c9e3747de704b"><div class="ttname"><a href="classitem.html#a0ac79d3de61e0dd6347c9e3747de704b">item::is_deployable</a></div><div class="ttdeci">bool is_deployable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09948">item.cpp:9948</a></div></div>
<div class="ttc" id="aclassitem_html_a0ad233b27797b39be495f7713e9ec6c0"><div class="ttname"><a href="classitem.html#a0ad233b27797b39be495f7713e9ec6c0">item::gunmod_info</a></div><div class="ttdeci">void gunmod_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03542">item.cpp:3542</a></div></div>
<div class="ttc" id="aclassitem_html_a0b12108a604ac9d940716bb8f1368cf5"><div class="ttname"><a href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a></div><div class="ttdeci">double get_var(const std::string &amp;name, double default_value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01839">item.cpp:1839</a></div></div>
<div class="ttc" id="aclassitem_html_a0b1a036a5945cab1da08a089cf664980"><div class="ttname"><a href="classitem.html#a0b1a036a5945cab1da08a089cf664980">item::mark_as_used_by_player</a></div><div class="ttdeci">void mark_as_used_by_player(const Character &amp;p)</div><div class="ttdoc">Marks the item as being used by this specific player, it remains unmarked for other players.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12531">item.cpp:12531</a></div></div>
<div class="ttc" id="aclassitem_html_a0b35b9066ad71987b77727af45d96059"><div class="ttname"><a href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02116">item.cpp:2116</a></div></div>
<div class="ttc" id="aclassitem_html_a0ba159e96a423dda4e44f4c2025affcb"><div class="ttname"><a href="classitem.html#a0ba159e96a423dda4e44f4c2025affcb">item::is_salvageable</a></div><div class="ttdeci">bool is_salvageable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09910">item.cpp:9910</a></div></div>
<div class="ttc" id="aclassitem_html_a0c4776d50b09c80de894e61e06742995"><div class="ttname"><a href="classitem.html#a0c4776d50b09c80de894e61e06742995">item::armor_protection_info</a></div><div class="ttdeci">void armor_protection_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug, const sub_bodypart_id &amp;sbp=sub_bodypart_id()) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03806">item.cpp:3806</a></div></div>
<div class="ttc" id="aclassitem_html_a0cfbb4ba5d7a17340d86c95032d4a1a9"><div class="ttname"><a href="classitem.html#a0cfbb4ba5d7a17340d86c95032d4a1a9">item::get_used_holster_volume</a></div><div class="ttdeci">units::volume get_used_holster_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11943">item.cpp:11943</a></div></div>
<div class="ttc" id="aclassitem_html_a0ea923d4cc56e08aef374d499f17345e"><div class="ttname"><a href="classitem.html#a0ea923d4cc56e08aef374d499f17345e">item::get_item_thermal_energy</a></div><div class="ttdeci">float get_item_thermal_energy() const</div><div class="ttdoc">Get the thermal energy of the item in Joules.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12960">item.cpp:12960</a></div></div>
<div class="ttc" id="aclassitem_html_a10898a02e2696873c90e6b9ea3aca7bc"><div class="ttname"><a href="classitem.html#a10898a02e2696873c90e6b9ea3aca7bc">item::all_items_top</a></div><div class="ttdeci">std::list&lt; const item * &gt; all_items_top() const</div><div class="ttdoc">returns a list of pointers to all top-level items that are not mods</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14951">item.cpp:14951</a></div></div>
<div class="ttc" id="aclassitem_html_a109dfb20d6dac296bab6c44db0f8ab1a"><div class="ttname"><a href="classitem.html#a109dfb20d6dac296bab6c44db0f8ab1a">item::INFINITE_CHARGES</a></div><div class="ttdeci">static const int INFINITE_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03072">item.h:3072</a></div></div>
<div class="ttc" id="aclassitem_html_a10fa3fae8c831dd4b2defeaa9b95df45"><div class="ttname"><a href="classitem.html#a10fa3fae8c831dd4b2defeaa9b95df45">item::get_remaining_chapters</a></div><div class="ttdeci">int get_remaining_chapters(const Character &amp;u) const</div><div class="ttdoc">Get the number of unread chapters.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10267">item.cpp:10267</a></div></div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclassitem_html_a130dbad844e69ded0020642fbb251c6a"><div class="ttname"><a href="classitem.html#a130dbad844e69ded0020642fbb251c6a">item::covers_overlaps</a></div><div class="ttdeci">std::optional&lt; side &gt; covers_overlaps(const item &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00985">item.cpp:985</a></div></div>
<div class="ttc" id="aclassitem_html_a13b2b008995a2f2f2daa63be578b27c8"><div class="ttname"><a href="classitem.html#a13b2b008995a2f2f2daa63be578b27c8">item::base_damage_thrown</a></div><div class="ttdeci">damage_instance base_damage_thrown() const</div><div class="ttdoc">All damage types this item deals when thrown (no skill modifiers etc.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07503">item.cpp:7503</a></div></div>
<div class="ttc" id="aclassitem_html_a14558695307ad3352ca95c16ee4f6ed3"><div class="ttname"><a href="classitem.html#a14558695307ad3352ca95c16ee4f6ed3">item::is_maybe_melee_weapon</a></div><div class="ttdeci">bool is_maybe_melee_weapon() const</div><div class="ttdoc">A heuristic on whether it's a good idea to use this as a melee weapon.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08601">item.cpp:8601</a></div></div>
<div class="ttc" id="aclassitem_html_a146815219eb98e0016eb0b006b0d4812"><div class="ttname"><a href="classitem.html#a146815219eb98e0016eb0b006b0d4812">item::damage_adjusted_gun_damage</a></div><div class="ttdeci">float damage_adjusted_gun_damage(float value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00889">item.cpp:889</a></div></div>
<div class="ttc" id="aclassitem_html_a155a45ada3eb970d006b701a50026c27"><div class="ttname"><a href="classitem.html#a155a45ada3eb970d006b701a50026c27">item::old_owner</a></div><div class="ttdeci">faction_id old_owner</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03194">item.h:3194</a></div></div>
<div class="ttc" id="aclassitem_html_a159a8d7dbb5135f556838aec5e223287"><div class="ttname"><a href="classitem.html#a159a8d7dbb5135f556838aec5e223287">item::magazine_default</a></div><div class="ttdeci">itype_id magazine_default(bool conversion=false) const</div><div class="ttdoc">Get the default magazine type (if any) for the current effective ammo type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11185">item.cpp:11185</a></div></div>
<div class="ttc" id="aclassitem_html_a15fbb2cca86592ca6fc879590fbbbb25"><div class="ttname"><a href="classitem.html#a15fbb2cca86592ca6fc879590fbbbb25">item::actions_info</a></div><div class="ttdeci">void actions_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05030">item.cpp:5030</a></div></div>
<div class="ttc" id="aclassitem_html_a16892195f36fda81d73ebc746c7e98f0"><div class="ttname"><a href="classitem.html#a16892195f36fda81d73ebc746c7e98f0">item::_environmental_resist</a></div><div class="ttdeci">float _environmental_resist(const damage_type_id &amp;dmg_type, bool to_self=false, int base_env_resist=0, bool bp_null=true, const std::vector&lt; const part_material * &gt; &amp;armor_mats={}) const</div><div class="ttdoc">Handles the special rules regarding environmental type damage such as fire and acid.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08757">item.cpp:8757</a></div></div>
<div class="ttc" id="aclassitem_html_a17006a8d70512a1a094128b805a2c8d5"><div class="ttname"><a href="classitem.html#a17006a8d70512a1a094128b805a2c8d5">item::inherited_tags_cache</a></div><div class="ttdeci">cata::heap&lt; FlagsSetType &gt; inherited_tags_cache</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03086">item.h:3086</a></div></div>
<div class="ttc" id="aclassitem_html_a1703999bf22b8d2459823a6b779d13b7"><div class="ttname"><a href="classitem.html#a1703999bf22b8d2459823a6b779d13b7">item::damage_adjusted_melee_weapon_damage</a></div><div class="ttdeci">float damage_adjusted_melee_weapon_damage(float value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00881">item.cpp:881</a></div></div>
<div class="ttc" id="aclassitem_html_a1766e34a65ed2c15ceef87050d69d96b"><div class="ttname"><a href="classitem.html#a1766e34a65ed2c15ceef87050d69d96b">item::item_tags</a></div><div class="ttdeci">cata::heap&lt; FlagsSetType &gt; item_tags</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03085">item.h:3085</a></div></div>
<div class="ttc" id="aclassitem_html_a178ada62c301bb1058bb56b1d8531a36"><div class="ttname"><a href="classitem.html#a178ada62c301bb1058bb56b1d8531a36">item::add_technique</a></div><div class="ttdeci">void add_technique(const matec_id &amp;tech)</div><div class="ttdoc">Add the given technique to the item specific techniques.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07760">item.cpp:7760</a></div></div>
<div class="ttc" id="aclassitem_html_a187a2679361c6546be613657dbad3b3f"><div class="ttname"><a href="classitem.html#a187a2679361c6546be613657dbad3b3f">item::is_ammo_container</a></div><div class="ttdeci">bool is_ammo_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09578">item.cpp:9578</a></div></div>
<div class="ttc" id="aclassitem_html_a18c14a07677f8ac9c197aefc2ee75bbb"><div class="ttname"><a href="classitem.html#a18c14a07677f8ac9c197aefc2ee75bbb">item::get_random_material</a></div><div class="ttdeci">const material_type &amp; get_random_material() const</div><div class="ttdoc">Get a material reference to a random material that this item is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10338">item.cpp:10338</a></div></div>
<div class="ttc" id="aclassitem_html_a18f9f745718512cd69e207986548404f"><div class="ttname"><a href="classitem.html#a18f9f745718512cd69e207986548404f">item::process_tool</a></div><div class="ttdeci">bool process_tool(Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13912">item.cpp:13912</a></div></div>
<div class="ttc" id="aclassitem_html_a19e6dd5afd4bada41c8d97792fd0815d"><div class="ttname"><a href="classitem.html#a19e6dd5afd4bada41c8d97792fd0815d">item::get_property_int64_t</a></div><div class="ttdeci">int64_t get_property_int64_t(const std::string &amp;prop, int64_t def=0) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07686">item.cpp:7686</a></div></div>
<div class="ttc" id="aclassitem_html_a1a62737bde2472c83494f4842f49f10c"><div class="ttname"><a href="classitem.html#a1a62737bde2472c83494f4842f49f10c">item::get_pet_armor_min_vol</a></div><div class="ttdeci">units::volume get_pet_armor_min_vol() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08492">item.cpp:8492</a></div></div>
<div class="ttc" id="aclassitem_html_a1a94ea108d695febf7f2bcf090f097fa"><div class="ttname"><a href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">item::gun_current_mode</a></div><div class="ttdeci">gun_mode gun_current_mode() const</div><div class="ttdoc">Get the current mode for this gun (or an invalid mode if item is not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11420">item.cpp:11420</a></div></div>
<div class="ttc" id="aclassitem_html_a1b5ffb8aa865f4269ce4cf7127bc2232"><div class="ttname"><a href="classitem.html#a1b5ffb8aa865f4269ce4cf7127bc2232">item::temperature</a></div><div class="ttdeci">units::temperature temperature</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03149">item.h:3149</a></div></div>
<div class="ttc" id="aclassitem_html_a1b9abb87d3a9cb6dfc4499a9066ecc44"><div class="ttname"><a href="classitem.html#a1b9abb87d3a9cb6dfc4499a9066ecc44">item::wheel_area</a></div><div class="ttdeci">int wheel_area() const</div><div class="ttdoc">Returns the total area of this wheel or 0 if it isn't one.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09828">item.cpp:9828</a></div></div>
<div class="ttc" id="aclassitem_html_a1c4782661219fccd444ab8d91ec04d58"><div class="ttname"><a href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">item::brewing_time</a></div><div class="ttdeci">time_duration brewing_time() const</div><div class="ttdoc">Time for this item to be fully fermented.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08502">item.cpp:8502</a></div></div>
<div class="ttc" id="aclassitem_html_a1ce97bab127dbbcd371f4e83bb441c38"><div class="ttname"><a href="classitem.html#a1ce97bab127dbbcd371f4e83bb441c38">item::energy_remaining</a></div><div class="ttdeci">units::energy energy_remaining(const Character *carrier=nullptr) const</div><div class="ttdoc">Energy available from battery/UPS/bionics.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10750">item.cpp:10750</a></div></div>
<div class="ttc" id="aclassitem_html_a1d000670a57419e2cc154245d7b27ca3"><div class="ttname"><a href="classitem.html#a1d000670a57419e2cc154245d7b27ca3">item::clear_items</a></div><div class="ttdeci">void clear_items()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15130">item.cpp:15130</a></div></div>
<div class="ttc" id="aclassitem_html_a1d9c8bbf0bc8223ce3bde8876e99ec8e"><div class="ttname"><a href="classitem.html#a1d9c8bbf0bc8223ce3bde8876e99ec8e">item::base_volume</a></div><div class="ttdeci">units::volume base_volume() const</div><div class="ttdoc">Simplified, faster volume check for when processing time is important and exact volume is not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07330">item.cpp:7330</a></div></div>
<div class="ttc" id="aclassitem_html_a1db937b8d866b6a424bf95e797ba4d55"><div class="ttname"><a href="classitem.html#a1db937b8d866b6a424bf95e797ba4d55">item::same_for_rle</a></div><div class="ttdeci">bool same_for_rle(const item &amp;rhs) const</div><div class="ttdoc">Whether item is the same as rhs for RLE compression purposes.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01424">item.cpp:1424</a></div></div>
<div class="ttc" id="aclassitem_html_a1e8a820e0f893c0ad3e99f172dd99616"><div class="ttname"><a href="classitem.html#a1e8a820e0f893c0ad3e99f172dd99616">item::all_items_top_recursive</a></div><div class="ttdeci">std::list&lt; item * &gt; all_items_top_recursive(pocket_type pk_type)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15097">item.cpp:15097</a></div></div>
<div class="ttc" id="aclassitem_html_a1ea7dc9d3bada7236e263edf7f1fd15f"><div class="ttname"><a href="classitem.html#a1ea7dc9d3bada7236e263edf7f1fd15f">item::encumbrance_update_</a></div><div class="ttdeci">bool encumbrance_update_</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03163">item.h:3163</a></div></div>
<div class="ttc" id="aclassitem_html_a1eabd9cf88a2b7c1cbdd8b8ec28b002d"><div class="ttname"><a href="classitem.html#a1eabd9cf88a2b7c1cbdd8b8ec28b002d">item::base_damage_melee</a></div><div class="ttdeci">damage_instance base_damage_melee() const</div><div class="ttdoc">All damage types this item deals when used in melee (no skill modifiers etc.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07489">item.cpp:7489</a></div></div>
<div class="ttc" id="aclassitem_html_a1eb36ac46ad3b85c4d2e4c80ede83ff3"><div class="ttname"><a href="classitem.html#a1eb36ac46ad3b85c4d2e4c80ede83ff3">item::suffix_tags_cache</a></div><div class="ttdeci">cata::heap&lt; FlagsSetType &gt; suffix_tags_cache</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03088">item.h:3088</a></div></div>
<div class="ttc" id="aclassitem_html_a1fb1bc14a138ea0ea0b6883d4105a322"><div class="ttname"><a href="classitem.html#a1fb1bc14a138ea0ea0b6883d4105a322">item::burnt</a></div><div class="ttdeci">int burnt</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03137">item.h:3137</a></div></div>
<div class="ttc" id="aclassitem_html_a1ff6f2a9cd0fc994e3484b66138cb049"><div class="ttname"><a href="classitem.html#a1ff6f2a9cd0fc994e3484b66138cb049">item::symbol</a></div><div class="ttdeci">const std::string &amp; symbol() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06290">item.cpp:6290</a></div></div>
<div class="ttc" id="aclassitem_html_a20204ebe26dfb0b3524bafc9b79d0e97"><div class="ttname"><a href="classitem.html#a20204ebe26dfb0b3524bafc9b79d0e97">item::best_pocket</a></div><div class="ttdeci">std::pair&lt; item_location, item_pocket * &gt; best_pocket(const item &amp;it, item_location &amp;this_loc, const item *avoid=nullptr, bool allow_sealed=false, bool ignore_settings=false, bool nested=false, bool ignore_rigidity=false)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10198">item.cpp:10198</a></div></div>
<div class="ttc" id="aclassitem_html_a2035d8cf9eb2af76e5402bfef0d5964c"><div class="ttname"><a href="classitem.html#a2035d8cf9eb2af76e5402bfef0d5964c">item::get_cover_type</a></div><div class="ttdeci">static cover_type get_cover_type(const damage_type_id &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08294">item.cpp:8294</a></div></div>
<div class="ttc" id="aclassitem_html_a20abafa24663a945b6bdae0d24d7da81"><div class="ttname"><a href="classitem.html#a20abafa24663a945b6bdae0d24d7da81">item::get_total_holster_volume</a></div><div class="ttdeci">units::volume get_total_holster_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11939">item.cpp:11939</a></div></div>
<div class="ttc" id="aclassitem_html_a216affc51dde30087c21fa5689a5c5e9"><div class="ttname"><a href="classitem.html#a216affc51dde30087c21fa5689a5c5e9">item::max_damage</a></div><div class="ttdeci">int max_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08900">item.cpp:8900</a></div></div>
<div class="ttc" id="aclassitem_html_a219a2cb372b167889ab732c9e33a70c5"><div class="ttname"><a href="classitem.html#a219a2cb372b167889ab732c9e33a70c5">item::contents_info</a></div><div class="ttdeci">void contents_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05635">item.cpp:5635</a></div></div>
<div class="ttc" id="aclassitem_html_a22ad63b72a459c8f95893a853348cb06"><div class="ttname"><a href="classitem.html#a22ad63b72a459c8f95893a853348cb06">item::is_watertight_container</a></div><div class="ttdeci">bool is_watertight_container() const</div><div class="ttdoc">Whether this is a container which can be used to store liquids.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09741">item.cpp:9741</a></div></div>
<div class="ttc" id="aclassitem_html_a22d1f85c07bab6621bbd16d301b22bbf"><div class="ttname"><a href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">item::needs_processing</a></div><div class="ttdeci">bool needs_processing() const</div><div class="ttdoc">Whether the item should be processed (by calling process).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12596">item.cpp:12596</a></div></div>
<div class="ttc" id="aclassitem_html_a2307462a36b9809493966946645c2bc4"><div class="ttname"><a href="classitem.html#a2307462a36b9809493966946645c2bc4">item::set_itype_variant</a></div><div class="ttdeci">void set_itype_variant(const std::string &amp;variant)</div><div class="ttdoc">Set the gun variant of this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09361">item.cpp:9361</a></div></div>
<div class="ttc" id="aclassitem_html_a23fca649e0d12cfcd94139e6fe39b9f1"><div class="ttname"><a href="classitem.html#a23fca649e0d12cfcd94139e6fe39b9f1">item::all_pockets_sealed</a></div><div class="ttdeci">bool all_pockets_sealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09657">item.cpp:9657</a></div></div>
<div class="ttc" id="aclassitem_html_a2432b268a65b74b73851ed9c0387ce12"><div class="ttname"><a href="classitem.html#a2432b268a65b74b73851ed9c0387ce12">item::calc_hourly_rotpoints_at_temp</a></div><div class="ttdeci">float calc_hourly_rotpoints_at_temp(const units::temperature &amp;temp) const</div><div class="ttdoc">Returns rate of rot (rot/h) at the given temperature.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07941">item.cpp:7941</a></div></div>
<div class="ttc" id="aclassitem_html_a24d69941d5b9d9934f28540d83359eb8"><div class="ttname"><a href="classitem.html#a24d69941d5b9d9934f28540d83359eb8">item::insert_cost</a></div><div class="ttdeci">int insert_cost(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01779">item.cpp:1779</a></div></div>
<div class="ttc" id="aclassitem_html_a24de774e21920f2b60718a02be995a8b"><div class="ttname"><a href="classitem.html#a24de774e21920f2b60718a02be995a8b">item::allow_crafting_component</a></div><div class="ttdeci">bool allow_crafting_component() const</div><div class="ttdoc">Permits filthy components, should only be used as a helper in creating filters.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12058">item.cpp:12058</a></div></div>
<div class="ttc" id="aclassitem_html_a2545899f5e59a05da94d6e9559ca2b49"><div class="ttname"><a href="classitem.html#a2545899f5e59a05da94d6e9559ca2b49">item::is_broken</a></div><div class="ttdeci">bool is_broken() const</div><div class="ttdoc">Returns true if the item is broken and can't be activated or used in crafting.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09785">item.cpp:9785</a></div></div>
<div class="ttc" id="aclassitem_html_a2575251693457acaf9f039fdc7990dd9"><div class="ttname"><a href="classitem.html#a2575251693457acaf9f039fdc7990dd9">item::is_bp_comfortable</a></div><div class="ttdeci">bool is_bp_comfortable(const T &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14389">item.cpp:14389</a></div></div>
<div class="ttc" id="aclassitem_html_a25e94e9b8a8008b0fc3981e31cdd57e9"><div class="ttname"><a href="classitem.html#a25e94e9b8a8008b0fc3981e31cdd57e9">item::has_quality_nonrecursive</a></div><div class="ttdeci">bool has_quality_nonrecursive(const quality_id &amp;qual, int level=1) const</div><div class="ttdoc">Returns true if this item itself is of at least quality level This version is non-recursive and does ...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07700">item.cpp:7700</a></div></div>
<div class="ttc" id="aclassitem_html_a26022bd0e72f14c5abf2fa5edf806c81"><div class="ttname"><a href="classitem.html#a26022bd0e72f14c5abf2fa5edf806c81">item::get_techniques</a></div><div class="ttdeci">std::set&lt; matec_id &gt; get_techniques() const</div><div class="ttdoc">Returns all the martial art techniques that this items supports.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07791">item.cpp:7791</a></div></div>
<div class="ttc" id="aclassitem_html_a26ffce6c038cc9d398103dcd296275bd"><div class="ttname"><a href="classitem.html#a26ffce6c038cc9d398103dcd296275bd">item::gunmod_find</a></div><div class="ttdeci">item * gunmod_find(const itype_id &amp;mod)</div><div class="ttdoc">Get first attached gunmod matching type or nullptr if no such mod or item is not a gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11247">item.cpp:11247</a></div></div>
<div class="ttc" id="aclassitem_html_a2899a37f781e1efea9465a98277141c7"><div class="ttname"><a href="classitem.html#a2899a37f781e1efea9465a98277141c7">item::get_min_str</a></div><div class="ttdeci">int get_min_str() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14704">item.cpp:14704</a></div></div>
<div class="ttc" id="aclassitem_html_a28f50b62c3ba4191f8b96b77c780a555"><div class="ttname"><a href="classitem.html#a28f50b62c3ba4191f8b96b77c780a555">item::has_noisy_pockets</a></div><div class="ttdeci">bool has_noisy_pockets() const</div><div class="ttdoc">Returns if the armor has pockets with a chance to make noise when moving.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01214">item.cpp:1214</a></div></div>
<div class="ttc" id="aclassitem_html_a28fa4969a257ea0b79acc9c60595ee7b"><div class="ttname"><a href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">item::can_contain</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain(const item &amp;it, bool nested=false, bool ignore_rigidity=false, bool ignore_pkt_settings=true, bool is_pick_up_inv=false, const item_location &amp;parent_it=item_location(), units::volume remaining_parent_volume=10000000_ml, bool allow_nested=true) const</div><div class="ttdoc">Can the pocket contain the specified item?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10101">item.cpp:10101</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09297">item.cpp:9297</a></div></div>
<div class="ttc" id="aclassitem_html_a291b3aa036d6f1867b079950faefbc74"><div class="ttname"><a href="classitem.html#a291b3aa036d6f1867b079950faefbc74">item::is_comfortable</a></div><div class="ttdeci">bool is_comfortable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14298">item.cpp:14298</a></div></div>
<div class="ttc" id="aclassitem_html_a2993eb10a5ae589e6bb1be0a74cb65c1"><div class="ttname"><a href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">item::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03212">item.h:3212</a></div></div>
<div class="ttc" id="aclassitem_html_a2aafd5194a8aaef6f2655ab7d5c90589"><div class="ttname"><a href="classitem.html#a2aafd5194a8aaef6f2655ab7d5c90589">item::is_disassemblable</a></div><div class="ttdeci">bool is_disassemblable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09925">item.cpp:9925</a></div></div>
<div class="ttc" id="aclassitem_html_a2ac472fc50bf04e624137133781c9376"><div class="ttname"><a href="classitem.html#a2ac472fc50bf04e624137133781c9376">item::is_single_container_with_restriction</a></div><div class="ttdeci">bool is_single_container_with_restriction() const</div><div class="ttdoc">Whether it is a container with only one pocket, and if it is has some restrictions.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09680">item.cpp:9680</a></div></div>
<div class="ttc" id="aclassitem_html_a2ad99faa90026d50e9572d04f7b0d95c"><div class="ttname"><a href="classitem.html#a2ad99faa90026d50e9572d04f7b0d95c">item::cold_up</a></div><div class="ttdeci">void cold_up()</div><div class="ttdoc">Set the item to COLD and resets last_temp_check.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12981">item.cpp:12981</a></div></div>
<div class="ttc" id="aclassitem_html_a2b487f7360ef904c8097cbdf56684f34"><div class="ttname"><a href="classitem.html#a2b487f7360ef904c8097cbdf56684f34">item::process_gun_cooling</a></div><div class="ttdeci">bool process_gun_cooling(Character *carrier)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13973">item.cpp:13973</a></div></div>
<div class="ttc" id="aclassitem_html_a2c0093d56ff71b4dd3862ad73ea46508"><div class="ttname"><a href="classitem.html#a2c0093d56ff71b4dd3862ad73ea46508">item::is_bp_rigid</a></div><div class="ttdeci">bool is_bp_rigid(const T &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14324">item.cpp:14324</a></div></div>
<div class="ttc" id="aclassitem_html_a2c2267bae25e5295d117dee7be60d286"><div class="ttname"><a href="classitem.html#a2c2267bae25e5295d117dee7be60d286">item::reset_link</a></div><div class="ttdeci">bool reset_link(bool unspool_if_too_long=true, Character *p=nullptr, int vpart_index=-1, bool loose_message=false, tripoint cable_position=tripoint_zero)</div><div class="ttdoc">Resets a cable item back to its initial state.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13816">item.cpp:13816</a></div></div>
<div class="ttc" id="aclassitem_html_a2cce9a58e90e7bcc596240004ac54288"><div class="ttname"><a href="classitem.html#a2cce9a58e90e7bcc596240004ac54288">item::conductive</a></div><div class="ttdeci">bool conductive() const</div><div class="ttdoc">Whether the items is conductive.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09276">item.cpp:9276</a></div></div>
<div class="ttc" id="aclassitem_html_a2d0e9cbd550e495df5f318349aed4305"><div class="ttname"><a href="classitem.html#a2d0e9cbd550e495df5f318349aed4305">item::get_all_ablative_pockets</a></div><div class="ttdeci">std::vector&lt; item_pocket * &gt; get_all_ablative_pockets()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09721">item.cpp:9721</a></div></div>
<div class="ttc" id="aclassitem_html_a2d1d6f2b5f990f45dfe79e5829012002"><div class="ttname"><a href="classitem.html#a2d1d6f2b5f990f45dfe79e5829012002">item::length</a></div><div class="ttdeci">units::length length() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07192">item.cpp:7192</a></div></div>
<div class="ttc" id="aclassitem_html_a2d50ee340d6b9591ef0525425967b8fc"><div class="ttname"><a href="classitem.html#a2d50ee340d6b9591ef0525425967b8fc">item::merge_charges</a></div><div class="ttdeci">bool merge_charges(const item &amp;rhs)</div><div class="ttdoc">Merge charges of the other item into this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01755">item.cpp:1755</a></div></div>
<div class="ttc" id="aclassitem_html_a2d8956760c8bf319f672f9209a11b48e"><div class="ttname"><a href="classitem.html#a2d8956760c8bf319f672f9209a11b48e">item::get_used_holsters</a></div><div class="ttdeci">int get_used_holsters() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11931">item.cpp:11931</a></div></div>
<div class="ttc" id="aclassitem_html_a2db7dbf79421ad17155d6b26b56bd483"><div class="ttname"><a href="classitem.html#a2db7dbf79421ad17155d6b26b56bd483">item::mod_damage</a></div><div class="ttdeci">bool mod_damage(int qty)</div><div class="ttdoc">Apply damage to const itemrained by min_damage and max_damage.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08927">item.cpp:8927</a></div></div>
<div class="ttc" id="aclassitem_html_a2e05d4e679c97f428f3a29fb23bf81c2"><div class="ttname"><a href="classitem.html#a2e05d4e679c97f428f3a29fb23bf81c2">item::get_corpse_name</a></div><div class="ttdeci">std::string get_corpse_name() const</div><div class="ttdoc">Returns name of deceased being if it had any or empty string if not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14552">item.cpp:14552</a></div></div>
<div class="ttc" id="aclassitem_html_a2e08e5c910eb01fa126e04e6f1d27e52"><div class="ttname"><a href="classitem.html#a2e08e5c910eb01fa126e04e6f1d27e52">item::degradation</a></div><div class="ttdeci">int degradation() const</div><div class="ttdoc">How much degradation has the item accumulated?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00863">item.cpp:863</a></div></div>
<div class="ttc" id="aclassitem_html_a2e1ea4d40574ffdce04aa81eb128dca9"><div class="ttname"><a href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">item::color_in_inventory</a></div><div class="ttdeci">nc_color color_in_inventory(const Character *ch=nullptr) const</div><div class="ttdoc">Returns the color of the item depending on usefulness for the player character, e....</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06298">item.cpp:6298</a></div></div>
<div class="ttc" id="aclassitem_html_a2ea9b8df7dba40fc847f51563285f5aa"><div class="ttname"><a href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a></div><div class="ttdeci">bool spill_contents(Character &amp;c)</div><div class="ttdoc">Unloads the item's contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10206">item.cpp:10206</a></div></div>
<div class="ttc" id="aclassitem_html_a2eaae84e4c8328ecc31325deeb36e6e2"><div class="ttname"><a href="classitem.html#a2eaae84e4c8328ecc31325deeb36e6e2">item::_resist</a></div><div class="ttdeci">float _resist(const damage_type_id &amp;dmg_type, bool to_self=false, int resist_value=0, bool bp_null=true, const std::vector&lt; const part_material * &gt; &amp;armor_mats={}, float avg_thickness=1.0f) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08695">item.cpp:8695</a></div></div>
<div class="ttc" id="aclassitem_html_a2eefa8e0a7fd8e2c60f3e4247a629685"><div class="ttname"><a href="classitem.html#a2eefa8e0a7fd8e2c60f3e4247a629685">item::has_fault_flag</a></div><div class="ttdeci">bool has_fault_flag(const std::string &amp;searched_flag) const</div><div class="ttdoc">Does this item part have a fault with this flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07563">item.cpp:7563</a></div></div>
<div class="ttc" id="aclassitem_html_a30120d067eb1fe9921fdf2de395b53b1"><div class="ttname"><a href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">item::set_birthday</a></div><div class="ttdeci">void set_birthday(const time_point &amp;bday)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14691">item.cpp:14691</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3101211dc3db3a8aa95675ab86d3ba36"><div class="ttname"><a href="classitem.html#a3101211dc3db3a8aa95675ab86d3ba36">item::clear_itype_variant</a></div><div class="ttdeci">void clear_itype_variant()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09400">item.cpp:9400</a></div></div>
<div class="ttc" id="aclassitem_html_a310539e1dbfb640f2b23796a40c881f2"><div class="ttname"><a href="classitem.html#a310539e1dbfb640f2b23796a40c881f2">item::has_infinite_charges</a></div><div class="ttdeci">bool has_infinite_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14632">item.cpp:14632</a></div></div>
<div class="ttc" id="aclassitem_html_a313413827f1c30dc42768b275adcd7c5"><div class="ttname"><a href="classitem.html#a313413827f1c30dc42768b275adcd7c5">item::on_wield_cost</a></div><div class="ttdeci">int on_wield_cost(const Character &amp;you) const</div><div class="ttdoc">Calculate (but do not deduct) the number of moves required to wield this weapon.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06540">item.cpp:6540</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdoc">Total weight of an item accounting for all contained/integrated items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07081">item.cpp:7081</a></div></div>
<div class="ttc" id="aclassitem_html_a31950d1e38829eb4c5794ffbe4e7d604"><div class="ttname"><a href="classitem.html#a31950d1e38829eb4c5794ffbe4e7d604">item::shots_remaining</a></div><div class="ttdeci">int shots_remaining(const Character *carrier) const</div><div class="ttdoc">Quantity of shots in the gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10668">item.cpp:10668</a></div></div>
<div class="ttc" id="aclassitem_html_a31cd84620cdba14d6614aaba1c805849"><div class="ttname"><a href="classitem.html#a31cd84620cdba14d6614aaba1c805849">item::fuel_pump_terrain</a></div><div class="ttdeci">std::string fuel_pump_terrain() const</div><div class="ttdoc">Returns the string of the id of the terrain that pumps this fuel, if any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09839">item.cpp:9839</a></div></div>
<div class="ttc" id="aclassitem_html_a31e0513086920395ba10e2b9b383c3d4"><div class="ttname"><a href="classitem.html#a31e0513086920395ba10e2b9b383c3d4">item::is_vehicle_battery</a></div><div class="ttdeci">bool is_vehicle_battery() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09455">item.cpp:9455</a></div></div>
<div class="ttc" id="aclassitem_html_a31ee884ec4c0f5d17bacaaafa3825990"><div class="ttname"><a href="classitem.html#a31ee884ec4c0f5d17bacaaafa3825990">item::max_containable_length</a></div><div class="ttdeci">units::length max_containable_length(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10066">item.cpp:10066</a></div></div>
<div class="ttc" id="aclassitem_html_a326dae8709070c316f6859ef0704bf85"><div class="ttname"><a href="classitem.html#a326dae8709070c316f6859ef0704bf85">item::get_owner</a></div><div class="ttdeci">faction_id get_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02195">item.cpp:2195</a></div></div>
<div class="ttc" id="aclassitem_html_a33012849b7bf7ea24b61a1dbf6b90ad1"><div class="ttname"><a href="classitem.html#a33012849b7bf7ea24b61a1dbf6b90ad1">item::get_use_internal</a></div><div class="ttdeci">const use_function * get_use_internal(const std::string &amp;use_name) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11481">item.cpp:11481</a></div></div>
<div class="ttc" id="aclassitem_html_a3358e085e55edd073f0dbb4e3dfa5abc"><div class="ttname"><a href="classitem.html#a3358e085e55edd073f0dbb4e3dfa5abc">item::is_broken_on_active</a></div><div class="ttdeci">bool is_broken_on_active() const</div><div class="ttdoc">Returns true if the item is broken or will be broken on activation.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09790">item.cpp:9790</a></div></div>
<div class="ttc" id="aclassitem_html_a3395fa0eddfd54f6b0acca093df8f274"><div class="ttname"><a href="classitem.html#a3395fa0eddfd54f6b0acca093df8f274">item::get_total_contained_volume</a></div><div class="ttdeci">units::volume get_total_contained_volume(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11922">item.cpp:11922</a></div></div>
<div class="ttc" id="aclassitem_html_a344fbf6e3db0d59e0c8ac75cd42ee144"><div class="ttname"><a href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a></div><div class="ttdeci">item()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00291">item.cpp:291</a></div></div>
<div class="ttc" id="aclassitem_html_a34f7ae5deade2f4a8fed4f04e81797ce"><div class="ttname"><a href="classitem.html#a34f7ae5deade2f4a8fed4f04e81797ce">item::rotten</a></div><div class="ttdeci">bool rotten() const</div><div class="ttdoc">returns true if item is now rotten after all shelf life has elapsed</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01124">item.h:1124</a></div></div>
<div class="ttc" id="aclassitem_html_a351d64ea176e3c74ce6ea132740bf5f1"><div class="ttname"><a href="classitem.html#a351d64ea176e3c74ce6ea132740bf5f1">item::armor_material_info</a></div><div class="ttdeci">void armor_material_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug, const sub_bodypart_id &amp;sbp=sub_bodypart_id()) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03959">item.cpp:3959</a></div></div>
<div class="ttc" id="aclassitem_html_a35b2a8d96dc92438f39c898bc210895f"><div class="ttname"><a href="classitem.html#a35b2a8d96dc92438f39c898bc210895f">item::is_collapsed</a></div><div class="ttdeci">bool is_collapsed() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07011">item.cpp:7011</a></div></div>
<div class="ttc" id="aclassitem_html_a3604c56b1c776e6f127524867f0c1b7c"><div class="ttname"><a href="classitem.html#a3604c56b1c776e6f127524867f0c1b7c">item::is_relic</a></div><div class="ttdeci">bool is_relic() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09963">item.cpp:9963</a></div></div>
<div class="ttc" id="aclassitem_html_a363197f949b110a42110ca99b9d36f73"><div class="ttname"><a href="classitem.html#a363197f949b110a42110ca99b9d36f73">item::has_relic_recharge</a></div><div class="ttdeci">bool has_relic_recharge() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09984">item.cpp:9984</a></div></div>
<div class="ttc" id="aclassitem_html_a364460e515672c6b19b7afeee0b9d560"><div class="ttname"><a href="classitem.html#a364460e515672c6b19b7afeee0b9d560">item::animal_armor_info</a></div><div class="ttdeci">void animal_armor_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04379">item.cpp:4379</a></div></div>
<div class="ttc" id="aclassitem_html_a3650e3828a796997cf5fa2f21cb2ee18"><div class="ttname"><a href="classitem.html#a3650e3828a796997cf5fa2f21cb2ee18">item::get_cached_tool_selections</a></div><div class="ttdeci">const std::vector&lt; comp_selection&lt; tool_comp &gt; &gt; &amp; get_cached_tool_selections() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14797">item.cpp:14797</a></div></div>
<div class="ttc" id="aclassitem_html_a3682b03a3c445a08950a9c9acfefe2a3"><div class="ttname"><a href="classitem.html#a3682b03a3c445a08950a9c9acfefe2a3">item::has_link_data</a></div><div class="ttdeci">bool has_link_data() const</div><div class="ttdoc">Returns true if the item has valid link_data. Does not mean the link actually connects to anything; u...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13314">item.cpp:13314</a></div></div>
<div class="ttc" id="aclassitem_html_a3694c5d9138956736af2444bd7b3972e"><div class="ttname"><a href="classitem.html#a3694c5d9138956736af2444bd7b3972e">item::gun_noise</a></div><div class="ttdeci">sound_data gun_noise(bool burst=false) const</div><div class="ttdoc">Returns the sound of the gun being fired.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02185">ranged.cpp:2185</a></div></div>
<div class="ttc" id="aclassitem_html_a36a7af141da0dcabe5ab34223ff4e2ff"><div class="ttname"><a href="classitem.html#a36a7af141da0dcabe5ab34223ff4e2ff">item::armor_attribute_info</a></div><div class="ttdeci">void armor_attribute_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug, const sub_bodypart_id &amp;sbp=sub_bodypart_id()) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03983">item.cpp:3983</a></div></div>
<div class="ttc" id="aclassitem_html_a371350eafdd2727f65f2371a3cdfa9f0"><div class="ttname"><a href="classitem.html#a371350eafdd2727f65f2371a3cdfa9f0">item::set_fault</a></div><div class="ttdeci">item &amp; set_fault(const fault_id &amp;fault_id)</div><div class="ttdoc">Idempotent filter setting an item specific fault.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07635">item.cpp:7635</a></div></div>
<div class="ttc" id="aclassitem_html_a381a3d667caa4c26c8961fd08f3c5a7f"><div class="ttname"><a href="classitem.html#a381a3d667caa4c26c8961fd08f3c5a7f">item::validate_ownership</a></div><div class="ttdeci">void validate_ownership() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02207">item.cpp:2207</a></div></div>
<div class="ttc" id="aclassitem_html_a3836554f6063653372840728450ee378"><div class="ttname"><a href="classitem.html#a3836554f6063653372840728450ee378">item::has_unrestricted_pockets</a></div><div class="ttdeci">bool has_unrestricted_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14906">item.cpp:14906</a></div></div>
<div class="ttc" id="aclassitem_html_a38fdc083d9ca3faf45cf9beae790ab55"><div class="ttname"><a href="classitem.html#a38fdc083d9ca3faf45cf9beae790ab55">item::get_coverage</a></div><div class="ttdeci">int get_coverage(const bodypart_id &amp;bodypart, const cover_type &amp;type=cover_type::COVER_DEFAULT) const</div><div class="ttdoc">Returns the highest coverage that any piece of data that this item has that covers the bodypart.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08334">item.cpp:8334</a></div></div>
<div class="ttc" id="aclassitem_html_a3974b4c42192b80b20bea8d0c093dbf0"><div class="ttname"><a href="classitem.html#a3974b4c42192b80b20bea8d0c093dbf0">item::can_contain_directly</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain_directly(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10096">item.cpp:10096</a></div></div>
<div class="ttc" id="aclassitem_html_a397ded92d52f1c19cc4e8e2edb13839d"><div class="ttname"><a href="classitem.html#a397ded92d52f1c19cc4e8e2edb13839d">item::will_spill</a></div><div class="ttdeci">bool will_spill() const</div><div class="ttdoc">if the item will spill if placed into a container</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12553">item.cpp:12553</a></div></div>
<div class="ttc" id="aclassitem_html_a39a8996cae29680a23de8c36e4835831"><div class="ttname"><a href="classitem.html#a39a8996cae29680a23de8c36e4835831">item::dirt_symbol</a></div><div class="ttdeci">std::string dirt_symbol() const</div><div class="ttdoc">Returns a symbol for indicating the current dirt or fouling level for a gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06734">item.cpp:6734</a></div></div>
<div class="ttc" id="aclassitem_html_a39e79f886f257aaaa199a7c2351993b7"><div class="ttname"><a href="classitem.html#a39e79f886f257aaaa199a7c2351993b7">item::has_explosion_data</a></div><div class="ttdeci">bool has_explosion_data() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09844">item.cpp:9844</a></div></div>
<div class="ttc" id="aclassitem_html_a3a1018ec6a2d3b2242c9df121d67f408"><div class="ttname"><a href="classitem.html#a3a1018ec6a2d3b2242c9df121d67f408">item::process_relic</a></div><div class="ttdeci">void process_relic(Character *carrier, const tripoint &amp;pos)</div><div class="ttdoc">Process and apply artifact effects.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13045">item.cpp:13045</a></div></div>
<div class="ttc" id="aclassitem_html_a3b02534bd7fdd79279e05df97f6ea595"><div class="ttname"><a href="classitem.html#a3b02534bd7fdd79279e05df97f6ea595">item::process_linked_item</a></div><div class="ttdeci">bool process_linked_item(Character *carrier, const tripoint &amp;pos, link_state required_state)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13880">item.cpp:13880</a></div></div>
<div class="ttc" id="aclassitem_html_a3b02fb95d6f0e4736ae26608987e533d"><div class="ttname"><a href="classitem.html#a3b02fb95d6f0e4736ae26608987e533d">item::process_corpse</a></div><div class="ttdeci">bool process_corpse(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13054">item.cpp:13054</a></div></div>
<div class="ttc" id="aclassitem_html_a3b1020ac3a6c78a50597536bde0a22b7"><div class="ttname"><a href="classitem.html#a3b1020ac3a6c78a50597536bde0a22b7">item::get_all_standard_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_standard_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09711">item.cpp:9711</a></div></div>
<div class="ttc" id="aclassitem_html_a3b1a3f1d6bb7ff3962b3be40b6b73989"><div class="ttname"><a href="classitem.html#a3b1a3f1d6bb7ff3962b3be40b6b73989">item::has_no_links</a></div><div class="ttdeci">bool has_no_links() const</div><div class="ttdoc">Returns true if the item has no active link, or if both link states are link_state::no_link.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13337">item.cpp:13337</a></div></div>
<div class="ttc" id="aclassitem_html_a3b56cbc3c21e9bf5c1c180390d2146d2"><div class="ttname"><a href="classitem.html#a3b56cbc3c21e9bf5c1c180390d2146d2">item::get_clothing_mod_val_for_damage_type</a></div><div class="ttdeci">float get_clothing_mod_val_for_damage_type(const damage_type_id &amp;dmg_type) const</div><div class="ttdoc">Helper function to retrieve any applicable resistance bonuses from item mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08633">item.cpp:8633</a></div></div>
<div class="ttc" id="aclassitem_html_a3b83c2e0d1313b542801169382be1605"><div class="ttname"><a href="classitem.html#a3b83c2e0d1313b542801169382be1605">item::gun_get_mode_id</a></div><div class="ttdeci">gun_mode_id gun_get_mode_id() const</div><div class="ttdoc">Get id of mode a gun is currently set to, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11425">item.cpp:11425</a></div></div>
<div class="ttc" id="aclassitem_html_a3b936e3dd884009f7f19cd1bc58bf1d6"><div class="ttname"><a href="classitem.html#a3b936e3dd884009f7f19cd1bc58bf1d6">item::set_temp_flags</a></div><div class="ttdeci">void set_temp_flags(units::temperature new_temperature, float freeze_percentage)</div><div class="ttdoc">Update flags associated with temperature.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12917">item.cpp:12917</a></div></div>
<div class="ttc" id="aclassitem_html_a3bc06f3d4615fc277919eaca43a95d07"><div class="ttname"><a href="classitem.html#a3bc06f3d4615fc277919eaca43a95d07">item::portion_for_bodypart</a></div><div class="ttdeci">const armor_portion_data * portion_for_bodypart(const bodypart_id &amp;bodypart) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08377">item.cpp:8377</a></div></div>
<div class="ttc" id="aclassitem_html_a3bd2871ecfac9c7ef3d0c35f098ffe24"><div class="ttname"><a href="classitem.html#a3bd2871ecfac9c7ef3d0c35f098ffe24">item::set_flag_recursive</a></div><div class="ttdeci">item &amp; set_flag_recursive(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter recursively setting an item specific flag on this item and its components.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07649">item.cpp:7649</a></div></div>
<div class="ttc" id="aclassitem_html_a3c32a5f35a17296686ff631167312fa6"><div class="ttname"><a href="classitem.html#a3c32a5f35a17296686ff631167312fa6">item::getlight</a></div><div class="ttdeci">bool getlight(float &amp;luminance, units::angle &amp;width, units::angle &amp;direction) const</div><div class="ttdoc">Directional light emission of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11855">item.cpp:11855</a></div></div>
<div class="ttc" id="aclassitem_html_a3c47a272ada88bc7d3d31a6a4b8a672c"><div class="ttname"><a href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">item::split</a></div><div class="ttdeci">item split(int qty)</div><div class="ttdoc">Splits a count-by-charges item always leaving source item with minimum of 1 charge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00920">item.cpp:920</a></div></div>
<div class="ttc" id="aclassitem_html_a3c8e850e9700f46d933b86dc4ef3aa2b"><div class="ttname"><a href="classitem.html#a3c8e850e9700f46d933b86dc4ef3aa2b">item::remove_old_owner</a></div><div class="ttdeci">void remove_old_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02806">item.h:2806</a></div></div>
<div class="ttc" id="aclassitem_html_a3cb164c5569aa41cfda914b6f7a74cb2"><div class="ttname"><a href="classitem.html#a3cb164c5569aa41cfda914b6f7a74cb2">item::is_wheel</a></div><div class="ttdeci">bool is_wheel() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09756">item.cpp:9756</a></div></div>
<div class="ttc" id="aclassitem_html_a3cdf7fd097768ee3192c40e000384d56"><div class="ttname"><a href="classitem.html#a3cdf7fd097768ee3192c40e000384d56">item::is_sided</a></div><div class="ttdeci">bool is_sided() const</div><div class="ttdoc">Returns true if item is armor and can be worn on different sides of the body.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01163">item.cpp:1163</a></div></div>
<div class="ttc" id="aclassitem_html_a3ce3a9a28569e6784c5499e3aa7f55be"><div class="ttname"><a href="classitem.html#a3ce3a9a28569e6784c5499e3aa7f55be">item::med_info</a></div><div class="ttdeci">void med_info(const item *med_item, std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02605">item.cpp:2605</a></div></div>
<div class="ttc" id="aclassitem_html_a3cec13f21640930df18b160a36083796"><div class="ttname"><a href="classitem.html#a3cec13f21640930df18b160a36083796">item::get_contents_volume_with_tweaks</a></div><div class="ttdeci">units::volume get_contents_volume_with_tweaks(const std::map&lt; const item *, int &gt; &amp;without) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14911">item.cpp:14911</a></div></div>
<div class="ttc" id="aclassitem_html_a3cfb7b101196af982e1e59280f1fe3e6"><div class="ttname"><a href="classitem.html#a3cfb7b101196af982e1e59280f1fe3e6">item::get_usable_item</a></div><div class="ttdeci">const item * get_usable_item(const std::string &amp;use_name) const</div><div class="ttdoc">Checks this item and its contents (recursively) for types that have use_function with type use_name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11508">item.cpp:11508</a></div></div>
<div class="ttc" id="aclassitem_html_a3d8542661f2e2a82e8cb3792584912f3"><div class="ttname"><a href="classitem.html#a3d8542661f2e2a82e8cb3792584912f3">item::gun_skill</a></div><div class="ttdeci">skill_id gun_skill() const</div><div class="ttdoc">The skill used to operate the gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10391">item.cpp:10391</a></div></div>
<div class="ttc" id="aclassitem_html_a3e058f8327de11a69a8e33f597be6d80"><div class="ttname"><a href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">item::deactivate</a></div><div class="ttdeci">item &amp; deactivate(const Character *ch=nullptr, bool alert=true)</div><div class="ttdoc">Filter converting this instance to the inactive type If the item is either inactive or cannot be deac...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00668">item.cpp:668</a></div></div>
<div class="ttc" id="aclassitem_html_a3e46e5d8e0848d74bfb7ab606125cbbe"><div class="ttname"><a href="classitem.html#a3e46e5d8e0848d74bfb7ab606125cbbe">item::has_tools_to_continue</a></div><div class="ttdeci">bool has_tools_to_continue() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14785">item.cpp:14785</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a3e61d7a533464d792856622eecd480a3"><div class="ttname"><a href="classitem.html#a3e61d7a533464d792856622eecd480a3">item::set_item_specific_energy</a></div><div class="ttdeci">void set_item_specific_energy(const units::specific_energy &amp;specific_energy)</div><div class="ttdoc">Sets the item to new temperature and energy based new specific energy (J/g) and resets last_temp_chec...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12088">item.cpp:12088</a></div></div>
<div class="ttc" id="aclassitem_html_a3e7fc9f4062c12d8e50e01bc7ac121d1"><div class="ttname"><a href="classitem.html#a3e7fc9f4062c12d8e50e01bc7ac121d1">item::wetness</a></div><div class="ttdeci">int wetness</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03153">item.h:3153</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a40feb41edc16a688462ef807328cf90d"><div class="ttname"><a href="classitem.html#a40feb41edc16a688462ef807328cf90d">item::process_fake_smoke</a></div><div class="ttdeci">bool process_fake_smoke(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13121">item.cpp:13121</a></div></div>
<div class="ttc" id="aclassitem_html_a411163e892e27c57b802d0d015c05162"><div class="ttname"><a href="classitem.html#a411163e892e27c57b802d0d015c05162">item::get_comestible</a></div><div class="ttdeci">const cata::value_ptr&lt; islot_comestible &gt; &amp; get_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14803">item.cpp:14803</a></div></div>
<div class="ttc" id="aclassitem_html_a4157fd25455cac5772aad99e839ecc2e"><div class="ttname"><a href="classitem.html#a4157fd25455cac5772aad99e839ecc2e">item::get_pocket_size</a></div><div class="ttdeci">int get_pocket_size() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14876">item.cpp:14876</a></div></div>
<div class="ttc" id="aclassitem_html_a41b668b8e4cd352077e032d4e152f365"><div class="ttname"><a href="classitem.html#a41b668b8e4cd352077e032d4e152f365">item::remove_owner</a></div><div class="ttdeci">void remove_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02811">item.h:2811</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a43e1a8cf7a4bbfebf8e060d16ae54020"><div class="ttname"><a href="classitem.html#a43e1a8cf7a4bbfebf8e060d16ae54020">item::breathability</a></div><div class="ttdeci">int breathability() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08843">item.cpp:8843</a></div></div>
<div class="ttc" id="aclassitem_html_a44a8bb6387c8f43fa1040ded39d5b776"><div class="ttname"><a href="classitem.html#a44a8bb6387c8f43fa1040ded39d5b776">item::is_ammo_belt</a></div><div class="ttdeci">bool is_ammo_belt() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09460">item.cpp:9460</a></div></div>
<div class="ttc" id="aclassitem_html_a45bcd33992b7d26eb4ae9f76a16b58fa"><div class="ttname"><a href="classitem.html#a45bcd33992b7d26eb4ae9f76a16b58fa">item::has_fault</a></div><div class="ttdeci">bool has_fault(const fault_id &amp;fault) const</div><div class="ttdoc">Does this item have the specified fault.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07558">item.cpp:7558</a></div></div>
<div class="ttc" id="aclassitem_html_a464c09886d48850b162592b9aa985853"><div class="ttname"><a href="classitem.html#a464c09886d48850b162592b9aa985853">item::flammable</a></div><div class="ttdeci">bool flammable(int threshold=0) const</div><div class="ttdoc">Whether the items is flammable.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11811">item.cpp:11811</a></div></div>
<div class="ttc" id="aclassitem_html_a4661d733113e53ee370d5aa83e31137b"><div class="ttname"><a href="classitem.html#a4661d733113e53ee370d5aa83e31137b">item::is_going_bad</a></div><div class="ttdeci">bool is_going_bad() const</div><div class="ttdoc">an item is about to become rotten when shelf life has nearly elapsed</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01119">item.h:1119</a></div></div>
<div class="ttc" id="aclassitem_html_a46801ba44575f795bcdba419de521ccb"><div class="ttname"><a href="classitem.html#a46801ba44575f795bcdba419de521ccb">item::cover_type</a></div><div class="ttdeci">cover_type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02208">item.h:2208</a></div></div>
<div class="ttc" id="aclassitem_html_a46801ba44575f795bcdba419de521ccba046adde220491bd0b14fa33adb2cb8e7"><div class="ttname"><a href="classitem.html#a46801ba44575f795bcdba419de521ccba046adde220491bd0b14fa33adb2cb8e7">item::cover_type::COVER_DEFAULT</a></div><div class="ttdeci">@ COVER_DEFAULT</div></div>
<div class="ttc" id="aclassitem_html_a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904"><div class="ttname"><a href="classitem.html#a46801ba44575f795bcdba419de521ccba725a8fca585d799bdd11e3f11ea98904">item::cover_type::COVER_RANGED</a></div><div class="ttdeci">@ COVER_RANGED</div></div>
<div class="ttc" id="aclassitem_html_a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8"><div class="ttname"><a href="classitem.html#a46801ba44575f795bcdba419de521ccba84ee98e722384cf558d13bb5191a0df8">item::cover_type::COVER_VITALS</a></div><div class="ttdeci">@ COVER_VITALS</div></div>
<div class="ttc" id="aclassitem_html_a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533"><div class="ttname"><a href="classitem.html#a46801ba44575f795bcdba419de521ccbacfcea7be7e12c20b1ccebb568119c533">item::cover_type::COVER_MELEE</a></div><div class="ttdeci">@ COVER_MELEE</div></div>
<div class="ttc" id="aclassitem_html_a4683e228cc8fa5f63e94932bc7f7b73c"><div class="ttname"><a href="classitem.html#a4683e228cc8fa5f63e94932bc7f7b73c">item::maybe_get_var</a></div><div class="ttdeci">std::optional&lt; std::string &gt; maybe_get_var(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01922">item.cpp:1922</a></div></div>
<div class="ttc" id="aclassitem_html_a46b9bb1181827a365eb83d935c663677"><div class="ttname"><a href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a></div><div class="ttdeci">time_point birthday() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14686">item.cpp:14686</a></div></div>
<div class="ttc" id="aclassitem_html_a471e1b31ebc2a1ef705c421f8f529705"><div class="ttname"><a href="classitem.html#a471e1b31ebc2a1ef705c421f8f529705">item::process_fake_mill</a></div><div class="ttdeci">bool process_fake_mill(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13106">item.cpp:13106</a></div></div>
<div class="ttc" id="aclassitem_html_a473448af85ae4182f130bd488bf7c0fb"><div class="ttname"><a href="classitem.html#a473448af85ae4182f130bd488bf7c0fb">item::mod_charges</a></div><div class="ttdeci">void mod_charges(int mod)</div><div class="ttdoc">Modify the charges of this item, only use for items counted by charges! The item must have enough cha...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14183">item.cpp:14183</a></div></div>
<div class="ttc" id="aclassitem_html_a47689c581570bdc5402297a2802428ed"><div class="ttname"><a href="classitem.html#a47689c581570bdc5402297a2802428ed">item::is_upgrade</a></div><div class="ttdeci">bool is_upgrade() const</div><div class="ttdoc">Whether the CBM is an upgrade to another bionic module.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14696">item.cpp:14696</a></div></div>
<div class="ttc" id="aclassitem_html_a478ecf81e48540e1ba39de33df968c43"><div class="ttname"><a href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a></div><div class="ttdeci">bool has_var(const std::string &amp;name) const</div><div class="ttdoc">Whether the variable is defined at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01928">item.cpp:1928</a></div></div>
<div class="ttc" id="aclassitem_html_a4798c98065209313df2c98cf49dc50f0"><div class="ttname"><a href="classitem.html#a4798c98065209313df2c98cf49dc50f0">item::get_thickness</a></div><div class="ttdeci">float get_thickness() const</div><div class="ttdoc">Returns the islot_armor::thickness value, or 0 for non-armor.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08408">item.cpp:8408</a></div></div>
<div class="ttc" id="aclassitem_html_a4800c32ea052d36233db889257cc7867"><div class="ttname"><a href="classitem.html#a4800c32ea052d36233db889257cc7867">item::min_cycle_recoil</a></div><div class="ttdeci">int min_cycle_recoil() const</div><div class="ttdoc">The minimum force required to cycle the gun, can be overridden by mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10438">item.cpp:10438</a></div></div>
<div class="ttc" id="aclassitem_html_a481f77e8382794e7b913571ccc109778"><div class="ttname"><a href="classitem.html#a481f77e8382794e7b913571ccc109778">item::is_soft</a></div><div class="ttdeci">bool is_soft() const</div><div class="ttdoc">Is this item flexible enough to be worn on body parts like antlers?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14249">item.cpp:14249</a></div></div>
<div class="ttc" id="aclassitem_html_a487b1c2d4c6e05794c446b231f39d6e8"><div class="ttname"><a href="classitem.html#a487b1c2d4c6e05794c446b231f39d6e8">item::get_clothing_mod_val</a></div><div class="ttdeci">float get_clothing_mod_val(clothing_mod_type type) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14837">item.cpp:14837</a></div></div>
<div class="ttc" id="aclassitem_html_a48f495097039db579f63fef551736843"><div class="ttname"><a href="classitem.html#a48f495097039db579f63fef551736843">item::get_specific_heat_solid</a></div><div class="ttdeci">float get_specific_heat_solid() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09544">item.cpp:9544</a></div></div>
<div class="ttc" id="aclassitem_html_a4938361b8fe897c4e85d66020ef91aff"><div class="ttname"><a href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a></div><div class="ttdeci">void set_var(const std::string &amp;name, int value)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01809">item.cpp:1809</a></div></div>
<div class="ttc" id="aclassitem_html_a4974052f9a7c7c664bb62fd3a860c7fa"><div class="ttname"><a href="classitem.html#a4974052f9a7c7c664bb62fd3a860c7fa">item::get_uncraft_components</a></div><div class="ttdeci">std::vector&lt; item_comp &gt; get_uncraft_components() const</div><div class="ttdoc">Returns a list of components used to craft this item or the default components if it wasn't player-cr...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14720">item.cpp:14720</a></div></div>
<div class="ttc" id="aclassitem_html_a4a8ef7489779cfdd9d416ea5ae15f672"><div class="ttname"><a href="classitem.html#a4a8ef7489779cfdd9d416ea5ae15f672">item::get_prefix_flags</a></div><div class="ttdeci">const FlagsSetType &amp; get_prefix_flags() const</div><div class="ttdoc">returns read-only set of flags of this item that will add prefixes to this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07665">item.cpp:7665</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a4adcc4a3a5f5fb20a4d245d79109640a"><div class="ttname"><a href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">item::ammo_data</a></div><div class="ttdeci">const itype * ammo_data() const</div><div class="ttdoc">Specific ammo data, returns nullptr if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10995">item.cpp:10995</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03080">item.h:3080</a></div></div>
<div class="ttc" id="aclassitem_html_a4b5324bb0d76a4fd22944e9fc978bbc8"><div class="ttname"><a href="classitem.html#a4b5324bb0d76a4fd22944e9fc978bbc8">item::process_temperature_rot</a></div><div class="ttdeci">bool process_temperature_rot(float insulation, const tripoint &amp;pos, map &amp;here, Character *carrier, temperature_flag flag=temperature_flag::NORMAL, float spoil_modifier=1.0f)</div><div class="ttdoc">Update temperature for things like food Update rot for things that perish All items that rot also hav...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12625">item.cpp:12625</a></div></div>
<div class="ttc" id="aclassitem_html_a4c20a84da478c9270bbd9e60b5ec8774"><div class="ttname"><a href="classitem.html#a4c20a84da478c9270bbd9e60b5ec8774">item::has_edged_damage</a></div><div class="ttdeci">bool has_edged_damage() const</div><div class="ttdoc">Returns whether this weapon does any damage type suitable for diamond coating.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08608">item.cpp:8608</a></div></div>
<div class="ttc" id="aclassitem_html_a4c54ded219374a2f5f80e8eee192dcdf"><div class="ttname"><a href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a></div><div class="ttdeci">static bool type_is_defined(const itype_id &amp;id)</div><div class="ttdoc">Check whether the type id refers to a known type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14576">item.cpp:14576</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_a4d85d48a0b3ca00ee3a68db59046c7c8"><div class="ttname"><a href="classitem.html#a4d85d48a0b3ca00ee3a68db59046c7c8">item::is_old_owner</a></div><div class="ttdeci">bool is_old_owner(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02148">item.cpp:2148</a></div></div>
<div class="ttc" id="aclassitem_html_a4ebb47a7b946240255e3a91e892abab5"><div class="ttname"><a href="classitem.html#a4ebb47a7b946240255e3a91e892abab5">item::disassembly_info</a></div><div class="ttdeci">void disassembly_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05221">item.cpp:5221</a></div></div>
<div class="ttc" id="aclassitem_html_a5093379156498b4d523b3ac1f733adc4"><div class="ttname"><a href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a></div><div class="ttdeci">bool is_filthy() const</div><div class="ttdoc">Marks the item as filthy, so characters with squeamish trait can't wear it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14652">item.cpp:14652</a></div></div>
<div class="ttc" id="aclassitem_html_a50c31a32b49c4418a24ff4b14552a7ff"><div class="ttname"><a href="classitem.html#a50c31a32b49c4418a24ff4b14552a7ff">item::repairable_levels</a></div><div class="ttdeci">int repairable_levels() const</div><div class="ttdoc">Returns how many damage levels can be repaired on this item Example: item with 100 damage returns 1 (...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08952">item.cpp:8952</a></div></div>
<div class="ttc" id="aclassitem_html_a50e4b0dafdccaf9006cb1b4c36f70c8a"><div class="ttname"><a href="classitem.html#a50e4b0dafdccaf9006cb1b4c36f70c8a">item::use_amount_internal</a></div><div class="ttdeci">bool use_amount_internal(const itype_id &amp;it, int &amp;quantity, std::list&lt; item &gt; &amp;used, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12043">item.cpp:12043</a></div></div>
<div class="ttc" id="aclassitem_html_a51f4fe9cc7d7089fce3faabf483c0bce"><div class="ttname"><a href="classitem.html#a51f4fe9cc7d7089fce3faabf483c0bce">item::get_plant_name</a></div><div class="ttdeci">std::string get_plant_name() const</div><div class="ttdoc">The name of the plant as it appears in the various informational menus.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14220">item.cpp:14220</a></div></div>
<div class="ttc" id="aclassitem_html_a52f5044582c9c5dd6ccf882fad039d64"><div class="ttname"><a href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">item::is_frozen_liquid</a></div><div class="ttdeci">bool is_frozen_liquid() const</div><div class="ttdoc">Returns true if the item is A: is SOLID and if it B: is of type LIQUID.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00937">item.cpp:937</a></div></div>
<div class="ttc" id="aclassitem_html_a53211e74dc72eaa2a4042f07b78d9bdb"><div class="ttname"><a href="classitem.html#a53211e74dc72eaa2a4042f07b78d9bdb">item::contains_no_solids</a></div><div class="ttdeci">bool contains_no_solids() const</div><div class="ttdoc">Returns true if none of the contents are solid.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09877">item.cpp:9877</a></div></div>
<div class="ttc" id="aclassitem_html_a54040b19e6b59078c7736a141e0d6c6a"><div class="ttname"><a href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">item::has_pocket_type</a></div><div class="ttdeci">bool has_pocket_type(pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09685">item.cpp:9685</a></div></div>
<div class="ttc" id="aclassitem_html_a54fe4917d343209ae2fdb9b163bd967a"><div class="ttname"><a href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">item::can_unload_liquid</a></div><div class="ttdeci">bool can_unload_liquid() const</div><div class="ttdoc">Returns true if any of the contents are not frozen or not empty if it's liquid.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09868">item.cpp:9868</a></div></div>
<div class="ttc" id="aclassitem_html_a552ce8636543cf39e1f8d3fe84e8d5c9"><div class="ttname"><a href="classitem.html#a552ce8636543cf39e1f8d3fe84e8d5c9">item::gun_recoil</a></div><div class="ttdeci">int gun_recoil(const Character &amp;p, bool bipod=false, bool ideal_strength=false) const</div><div class="ttdoc">Get effective recoil considering handling, loaded ammo and effects of attached gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10579">item.cpp:10579</a></div></div>
<div class="ttc" id="aclassitem_html_a553d53f0a1b730f9810e70981cb77fa8"><div class="ttname"><a href="classitem.html#a553d53f0a1b730f9810e70981cb77fa8">item::get_total_contained_weight</a></div><div class="ttdeci">units::mass get_total_contained_weight(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11926">item.cpp:11926</a></div></div>
<div class="ttc" id="aclassitem_html_a566bdeada4c0f59174879f1ffaaa4d22"><div class="ttname"><a href="classitem.html#a566bdeada4c0f59174879f1ffaaa4d22">item::damage_armor_transforms</a></div><div class="ttdeci">armor_status damage_armor_transforms(damage_unit &amp;du) const</div><div class="ttdoc">Damage related logic for armor items that warp and transform instead of degrading.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09010">item.cpp:9010</a></div></div>
<div class="ttc" id="aclassitem_html_a57b10fc9db286a3449ddc92ab3d896f5"><div class="ttname"><a href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo (if available) and return the amount of ammo that was consumed Consume order: loaded ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10878">item.cpp:10878</a></div></div>
<div class="ttc" id="aclassitem_html_a58a1ae0c5310bb998fb9a1d0261e9858"><div class="ttname"><a href="classitem.html#a58a1ae0c5310bb998fb9a1d0261e9858">item::legacy_front</a></div><div class="ttdeci">item &amp; legacy_front()</div><div class="ttdoc">This function is to aid migration to using nested containers.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15170">item.cpp:15170</a></div></div>
<div class="ttc" id="aclassitem_html_a58ad095d78ff969488bcc06ec8a9dfbf"><div class="ttname"><a href="classitem.html#a58ad095d78ff969488bcc06ec8a9dfbf">item::mods</a></div><div class="ttdeci">std::vector&lt; const item * &gt; mods() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11227">item.cpp:11227</a></div></div>
<div class="ttc" id="aclassitem_html_a58c159edc49714bb9695b543ec0612b5"><div class="ttname"><a href="classitem.html#a58c159edc49714bb9695b543ec0612b5">item::get_usable_item_helper</a></div><div class="ttdeci">static Item * get_usable_item_helper(Item &amp;self, const std::string &amp;use_name)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11490">item.cpp:11490</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09853">item.cpp:9853</a></div></div>
<div class="ttc" id="aclassitem_html_a59a03649a0636c70e776054db688564a"><div class="ttname"><a href="classitem.html#a59a03649a0636c70e776054db688564a">item::is_tool</a></div><div class="ttdeci">bool is_tool() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09953">item.cpp:9953</a></div></div>
<div class="ttc" id="aclassitem_html_a59c811236ff70ccf999c72bf51cd756c"><div class="ttname"><a href="classitem.html#a59c811236ff70ccf999c72bf51cd756c">item::iterate_covered_body_parts_internal</a></div><div class="ttdeci">void iterate_covered_body_parts_internal(side s, const std::function&lt; void(const bodypart_str_id &amp;)&gt; &amp;cb) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01145">item.cpp:1145</a></div></div>
<div class="ttc" id="aclassitem_html_a5ac32d5d8193f5fad10893881f53cb1c"><div class="ttname"><a href="classitem.html#a5ac32d5d8193f5fad10893881f53cb1c">item::attack_time</a></div><div class="ttdeci">int attack_time(const Character &amp;you) const</div><div class="ttdoc">Base number of moves (Creature::moves) that a single melee attack with this items takes.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07444">item.cpp:7444</a></div></div>
<div class="ttc" id="aclassitem_html_a5b16490e7f48e5ebc5c640cf3e7475e0"><div class="ttname"><a href="classitem.html#a5b16490e7f48e5ebc5c640cf3e7475e0">item::all_known_contents</a></div><div class="ttdeci">std::list&lt; item * &gt; all_known_contents()</div><div class="ttdoc">returns a list of pointers to all visible or remembered top-level items</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15110">item.cpp:15110</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a5b7264e94fd2cf5c44784e76627d32fe"><div class="ttname"><a href="classitem.html#a5b7264e94fd2cf5c44784e76627d32fe">item::overwrite_relic</a></div><div class="ttdeci">void overwrite_relic(const relic &amp;nrelic)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13035">item.cpp:13035</a></div></div>
<div class="ttc" id="aclassitem_html_a5bb6926420993d655913e4d7779a3c30"><div class="ttname"><a href="classitem.html#a5bb6926420993d655913e4d7779a3c30">item::link_length</a></div><div class="ttdeci">int link_length() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13558">item.cpp:13558</a></div></div>
<div class="ttc" id="aclassitem_html_a5c06a880dbc40c5861201cbaae477996"><div class="ttname"><a href="classitem.html#a5c06a880dbc40c5861201cbaae477996">item::gun_shot_spread_multiplier</a></div><div class="ttdeci">float gun_shot_spread_multiplier() const</div><div class="ttdoc">Summed shot spread from mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10617">item.cpp:10617</a></div></div>
<div class="ttc" id="aclassitem_html_a5cc833f71e0454446fd0f877d24f6585"><div class="ttname"><a href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">item::common_ammo_default</a></div><div class="ttdeci">itype_id common_ammo_default(bool conversion=true) const</div><div class="ttdoc">Get default ammo for the first ammotype common to an item and its current magazine or &quot;NULL&quot; if none ...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11129">item.cpp:11129</a></div></div>
<div class="ttc" id="aclassitem_html_a5f1bd1f37a27ac2a4c994b4123dba5e6"><div class="ttname"><a href="classitem.html#a5f1bd1f37a27ac2a4c994b4123dba5e6">item::qualities_info</a></div><div class="ttdeci">void qualities_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05276">item.cpp:5276</a></div></div>
<div class="ttc" id="aclassitem_html_a601098e9f42af97e6fd3922bf574ca4a"><div class="ttname"><a href="classitem.html#a601098e9f42af97e6fd3922bf574ca4a">item::has_additional_encumbrance</a></div><div class="ttdeci">bool has_additional_encumbrance() const</div><div class="ttdoc">Returns if the armor has pockets with additional encumbrance.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01202">item.cpp:1202</a></div></div>
<div class="ttc" id="aclassitem_html_a6047039a5b290b71d4a2f8c9f0b8c364"><div class="ttname"><a href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">item::get_all_contained_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_contained_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09701">item.cpp:9701</a></div></div>
<div class="ttc" id="aclassitem_html_a60ce7c1072cdd4a6384d95598ba10231"><div class="ttname"><a href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a></div><div class="ttdeci">std::string info(bool showtext=false) const</div><div class="ttdoc">Return all the information about the item and its type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01953">item.cpp:1953</a></div></div>
<div class="ttc" id="aclassitem_html_a6109bbb00c791c6172780b1efe13bf61"><div class="ttname"><a href="classitem.html#a6109bbb00c791c6172780b1efe13bf61">item::can_contain_partial_directly</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain_partial_directly(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10189">item.cpp:10189</a></div></div>
<div class="ttc" id="aclassitem_html_a616aedf5cb1225f658078d1ffa48e8f6"><div class="ttname"><a href="classitem.html#a616aedf5cb1225f658078d1ffa48e8f6">item::total_contained_volume</a></div><div class="ttdeci">units::volume total_contained_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12005">item.cpp:12005</a></div></div>
<div class="ttc" id="aclassitem_html_a622ee79075b1be44b58c5d752ab52241"><div class="ttname"><a href="classitem.html#a622ee79075b1be44b58c5d752ab52241">item::craft_data_</a></div><div class="ttdeci">cata::value_ptr&lt; craft_data &gt; craft_data_</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03129">item.h:3129</a></div></div>
<div class="ttc" id="aclassitem_html_a6233ded50f0c2ddc86761f9b5cef5298"><div class="ttname"><a href="classitem.html#a6233ded50f0c2ddc86761f9b5cef5298">item::bionic_info</a></div><div class="ttdeci">void bionic_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05349">item.cpp:5349</a></div></div>
<div class="ttc" id="aclassitem_html_a624c3b7ec10ae766a9e75718af71e647"><div class="ttname"><a href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type, returns &quot;null&quot; if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11021">item.cpp:11021</a></div></div>
<div class="ttc" id="aclassitem_html_a628659a14a3b57d0627ddd5093e94147"><div class="ttname"><a href="classitem.html#a628659a14a3b57d0627ddd5093e94147">item::bday</a></div><div class="ttdeci">time_point bday</div><div class="ttdoc">The time the item was created.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03183">item.h:3183</a></div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60a"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60a">item::sizing</a></div><div class="ttdeci">sizing</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03039">item.h:3039</a></div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa096d4645ed938b760b6111684abd8c4c"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa096d4645ed938b760b6111684abd8c4c">item::sizing::small_sized_small_char</a></div><div class="ttdeci">@ small_sized_small_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa2e09daf3a4a2a25acca1a1d22e7a44fc">item::sizing::small_sized_big_char</a></div><div class="ttdeci">@ small_sized_big_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa4e15dc3960981fe316d564e84d5565d2">item::sizing::big_sized_small_char</a></div><div class="ttdeci">@ big_sized_small_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa567bc1d268f135496de3d5b946b691f3">item::sizing::ignore</a></div><div class="ttdeci">@ ignore</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa781d038afb4ccd0fb1b2085adfefd1c3"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa781d038afb4ccd0fb1b2085adfefd1c3">item::sizing::human_sized_human_char</a></div><div class="ttdeci">@ human_sized_human_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aa7cd492c10e5f2b8c6203c9a3e0bd5d26">item::sizing::human_sized_big_char</a></div><div class="ttdeci">@ human_sized_big_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aab070cdbbb5e27e5e07128ce369d16729">item::sizing::small_sized_human_char</a></div><div class="ttdeci">@ small_sized_human_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aab7d23f1d2500850af59c5ed5e374c50c">item::sizing::big_sized_human_char</a></div><div class="ttdeci">@ big_sized_human_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aae3c281ac6effc3982eea0c56df3fe766"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aae3c281ac6effc3982eea0c56df3fe766">item::sizing::big_sized_big_char</a></div><div class="ttdeci">@ big_sized_big_char</div></div>
<div class="ttc" id="aclassitem_html_a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa"><div class="ttname"><a href="classitem.html#a62ace782681001a7e8adbb600101f60aae3ebeb4f4fd83a4bed91e489ff90eafa">item::sizing::human_sized_small_char</a></div><div class="ttdeci">@ human_sized_small_char</div></div>
<div class="ttc" id="aclassitem_html_a62fef893b74d8691c331aca77d163584"><div class="ttname"><a href="classitem.html#a62fef893b74d8691c331aca77d163584">item::heat_up</a></div><div class="ttdeci">void heat_up()</div><div class="ttdoc">Set the item to HOT and resets last_temp_check.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12966">item.cpp:12966</a></div></div>
<div class="ttc" id="aclassitem_html_a634166a0674bcf69eb3874c7e7789344"><div class="ttname"><a href="classitem.html#a634166a0674bcf69eb3874c7e7789344">item::melee_skill</a></div><div class="ttdeci">skill_id melee_skill() const</div><div class="ttdoc">The most relevant skill used with this melee weapon.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10418">item.cpp:10418</a></div></div>
<div class="ttc" id="aclassitem_html_a63b6654a99f9b300a313a6921d134bf2"><div class="ttname"><a href="classitem.html#a63b6654a99f9b300a313a6921d134bf2">item::simulate_burn</a></div><div class="ttdeci">float simulate_burn(fire_data &amp;frd) const</div><div class="ttdoc">Calculate all burning calculations, but don't actually apply them to item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11713">item.cpp:11713</a></div></div>
<div class="ttc" id="aclassitem_html_a64e90b4f86aa185a44a6e5f43e954686"><div class="ttname"><a href="classitem.html#a64e90b4f86aa185a44a6e5f43e954686">item::processing_speed</a></div><div class="ttdeci">int processing_speed() const</div><div class="ttdoc">The rate at which an item should be processed, in number of turns between updates.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12601">item.cpp:12601</a></div></div>
<div class="ttc" id="aclassitem_html_a65507c5b84bb9d124f2f3a1922ac966e"><div class="ttname"><a href="classitem.html#a65507c5b84bb9d124f2f3a1922ac966e">item::get_used_holster_weight</a></div><div class="ttdeci">units::mass get_used_holster_weight() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11951">item.cpp:11951</a></div></div>
<div class="ttc" id="aclassitem_html_a660699e1c63b2ab0b4e5ac88e61d8ad6"><div class="ttname"><a href="classitem.html#a660699e1c63b2ab0b4e5ac88e61d8ad6">item::faults</a></div><div class="ttdeci">cata::heap&lt; std::set&lt; fault_id &gt; &gt; faults</div><div class="ttdoc">What faults (if any) currently apply to this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03077">item.h:3077</a></div></div>
<div class="ttc" id="aclassitem_html_a663816619c55096d7e2736484047ce5a"><div class="ttname"><a href="classitem.html#a663816619c55096d7e2736484047ce5a">item::irradiation</a></div><div class="ttdeci">int irradiation</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03141">item.h:3141</a></div></div>
<div class="ttc" id="aclassitem_html_a663b9d5d6a66664552e5551e11812ed9"><div class="ttname"><a href="classitem.html#a663b9d5d6a66664552e5551e11812ed9">item::only_made_of</a></div><div class="ttdeci">bool only_made_of(const std::set&lt; material_id &gt; &amp;mat_idents) const</div><div class="ttdoc">Check we are made of only the materials (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09231">item.cpp:9231</a></div></div>
<div class="ttc" id="aclassitem_html_a666dbdd93db53d49e8cd9d5b7503df79"><div class="ttname"><a href="classitem.html#a666dbdd93db53d49e8cd9d5b7503df79">item::can_have_itype_variant</a></div><div class="ttdeci">bool can_have_itype_variant() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09318">item.cpp:9318</a></div></div>
<div class="ttc" id="aclassitem_html_a66a57361dab03b70d84eb8f7afca1d10"><div class="ttname"><a href="classitem.html#a66a57361dab03b70d84eb8f7afca1d10">item::uses_magazine</a></div><div class="ttdeci">bool uses_magazine() const</div><div class="ttdoc">Does item have magazine well.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11180">item.cpp:11180</a></div></div>
<div class="ttc" id="aclassitem_html_a66b0bbc211f6fb668781640c971d3acc"><div class="ttname"><a href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">item::get_comestible_fun</a></div><div class="ttdeci">int get_comestible_fun() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07798">item.cpp:7798</a></div></div>
<div class="ttc" id="aclassitem_html_a66ba4b05a8ea5f9f15e4694027235aae"><div class="ttname"><a href="classitem.html#a66ba4b05a8ea5f9f15e4694027235aae">item::get_mtype</a></div><div class="ttdeci">const mtype * get_mtype() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09531">item.cpp:9531</a></div></div>
<div class="ttc" id="aclassitem_html_a66fcc8b7976e6c73904bdfbe5296c150"><div class="ttname"><a href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">item::age</a></div><div class="ttdeci">time_duration age() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14676">item.cpp:14676</a></div></div>
<div class="ttc" id="aclassitem_html_a6726b5f4fd328ba0ff74b4a95f3510c1"><div class="ttname"><a href="classitem.html#a6726b5f4fd328ba0ff74b4a95f3510c1">item::resist</a></div><div class="ttdeci">float resist(const damage_type_id &amp;dmg_type, bool to_self=false, const bodypart_target &amp;bp=bodypart_target(), int resist_value=0) const</div><div class="ttdoc">Resistance against different damage types (damage_type).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08661">item.cpp:8661</a></div></div>
<div class="ttc" id="aclassitem_html_a675cd52ea4fa28803363b698896db8ca"><div class="ttname"><a href="classitem.html#a675cd52ea4fa28803363b698896db8ca">item::ethereal</a></div><div class="ttdeci">bool ethereal</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03152">item.h:3152</a></div></div>
<div class="ttc" id="aclassitem_html_a6859ce2b8c50444a4991d773b490d58f"><div class="ttname"><a href="classitem.html#a6859ce2b8c50444a4991d773b490d58f">item::get_pet_armor_max_vol</a></div><div class="ttdeci">units::volume get_pet_armor_max_vol() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08487">item.cpp:8487</a></div></div>
<div class="ttc" id="aclassitem_html_a685baa0530bf9e4cb57c2cea27ed332b"><div class="ttname"><a href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">item::get_making</a></div><div class="ttdeci">const recipe &amp; get_making() const</div><div class="ttdoc">Get the stored recipe for in progress crafts.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14758">item.cpp:14758</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_a68dcc193f7192ee4a989abe18f93597a"><div class="ttname"><a href="classitem.html#a68dcc193f7192ee4a989abe18f93597a">item::rand_degradation</a></div><div class="ttdeci">void rand_degradation()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00868">item.cpp:868</a></div></div>
<div class="ttc" id="aclassitem_html_a6902798d07c0cf20fb5e601c8e192acc"><div class="ttname"><a href="classitem.html#a6902798d07c0cf20fb5e601c8e192acc">item::has_any_with</a></div><div class="ttdeci">bool has_any_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter, pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09690">item.cpp:9690</a></div></div>
<div class="ttc" id="aclassitem_html_a6921d1c458f1e840933b765ca9c7e583"><div class="ttname"><a href="classitem.html#a6921d1c458f1e840933b765ca9c7e583">item::is_food_container</a></div><div class="ttdeci">bool is_food_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09512">item.cpp:9512</a></div></div>
<div class="ttc" id="aclassitem_html_a699d0314aa1c5ee9903cf3cf862ee8cf"><div class="ttname"><a href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">item::is_bionic</a></div><div class="ttdeci">bool is_bionic() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09440">item.cpp:9440</a></div></div>
<div class="ttc" id="aclassitem_html_a69af532bd4cc93c70fb2d6ac3ed2b875"><div class="ttname"><a href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">item::composting_results</a></div><div class="ttdeci">const std::map&lt; itype_id, int &gt; &amp; composting_results() const</div><div class="ttdoc">The results of fermenting this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08518">item.cpp:8518</a></div></div>
<div class="ttc" id="aclassitem_html_a69b6ce2dd3062aa4b7d1dcc043d762bb"><div class="ttname"><a href="classitem.html#a69b6ce2dd3062aa4b7d1dcc043d762bb">item::empty_container</a></div><div class="ttdeci">bool empty_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15140">item.cpp:15140</a></div></div>
<div class="ttc" id="aclassitem_html_a69c3ef3dfce7b7e230016ea98af4520a"><div class="ttname"><a href="classitem.html#a69c3ef3dfce7b7e230016ea98af4520a">item::rot</a></div><div class="ttdeci">time_duration rot</div><div class="ttdoc">Accumulated rot, expressed as time the item has been in standard temperature.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03179">item.h:3179</a></div></div>
<div class="ttc" id="aclassitem_html_a69fe84aedebc97fec441f08f3f11abb1"><div class="ttname"><a href="classitem.html#a69fe84aedebc97fec441f08f3f11abb1">item::get_making_batch_size</a></div><div class="ttdeci">int get_making_batch_size() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14769">item.cpp:14769</a></div></div>
<div class="ttc" id="aclassitem_html_a6a3f16444c412bce4b75a7d600d6a3fe"><div class="ttname"><a href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a></div><div class="ttdeci">item &amp; ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Filter setting the ammo for this instance Any existing ammo is removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00719">item.cpp:719</a></div></div>
<div class="ttc" id="aclassitem_html_a6a5e2c34a4158677b2c1d062ebf01a5f"><div class="ttname"><a href="classitem.html#a6a5e2c34a4158677b2c1d062ebf01a5f">item::link_sort_key</a></div><div class="ttdeci">int link_sort_key() const</div><div class="ttdoc">Value used for sorting linked items in inventory lists.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13570">item.cpp:13570</a></div></div>
<div class="ttc" id="aclassitem_html_a6a67383d6c79247cf93f734f5ac3c265"><div class="ttname"><a href="classitem.html#a6a67383d6c79247cf93f734f5ac3c265">item::calc_temp</a></div><div class="ttdeci">void calc_temp(const units::temperature &amp;temp, float insulation, const time_duration &amp;time_delta)</div><div class="ttdoc">Calculate the thermal energy and temperature change of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12770">item.cpp:12770</a></div></div>
<div class="ttc" id="aclassitem_html_a6b645e4ffcf17d590104fdaab9158f06"><div class="ttname"><a href="classitem.html#a6b645e4ffcf17d590104fdaab9158f06">item::item_vars</a></div><div class="ttdeci">cata::heap&lt; std::map&lt; std::string, std::string &gt; &gt; item_vars</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03090">item.h:3090</a></div></div>
<div class="ttc" id="aclassitem_html_a6ba542e70d1c20032e51d3196f035a0d"><div class="ttname"><a href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">item::visit_items</a></div><div class="ttdeci">VisitResponse visit_items(const std::function&lt; VisitResponse(item *, item *)&gt; &amp;func) const override</div><div class="ttdoc">Traverses this object and any child items contained using a visitor pattern.</div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a6c105cc1200608aa11f2a93ab820e52e"><div class="ttname"><a href="classitem.html#a6c105cc1200608aa11f2a93ab820e52e">item::get_category_shallow</a></div><div class="ttdeci">const item_category &amp; get_category_shallow() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12354">item.cpp:12354</a></div></div>
<div class="ttc" id="aclassitem_html_a6c24ed0db4bb679412e13495af4bf87c"><div class="ttname"><a href="classitem.html#a6c24ed0db4bb679412e13495af4bf87c">item::link_name</a></div><div class="ttdeci">std::string link_name() const</div><div class="ttdoc">Name to use for describing the link, whether it's its own item, like &quot;extension cord&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13343">item.cpp:13343</a></div></div>
<div class="ttc" id="aclassitem_html_a6c31302e61d7addd210b9de5846b5257"><div class="ttname"><a href="classitem.html#a6c31302e61d7addd210b9de5846b5257">item::get_remaining_capacity</a></div><div class="ttdeci">units::volume get_remaining_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11913">item.cpp:11913</a></div></div>
<div class="ttc" id="aclassitem_html_a6d051a790e435f12bd56a5a370f43492"><div class="ttname"><a href="classitem.html#a6d051a790e435f12bd56a5a370f43492">item::min_containable_length</a></div><div class="ttdeci">units::length min_containable_length() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10071">item.cpp:10071</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1575c31b1dc0df51cbe3a1dfbfef16"><div class="ttname"><a href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Callback when contents of the item are affected in any way other than just processing.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06722">item.cpp:6722</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1f49b55eaaf92e616359490624bad2"><div class="ttname"><a href="classitem.html#a6d1f49b55eaaf92e616359490624bad2">item::gun_info</a></div><div class="ttdeci">void gun_info(const item *mod, std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03102">item.cpp:3102</a></div></div>
<div class="ttc" id="aclassitem_html_a6d3164628041c6ccdce14aedd711b640"><div class="ttname"><a href="classitem.html#a6d3164628041c6ccdce14aedd711b640">item::get_gun_energy_drain</a></div><div class="ttdeci">units::energy get_gun_energy_drain() const</div><div class="ttdoc">Get gun energy drain.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14586">item.cpp:14586</a></div></div>
<div class="ttc" id="aclassitem_html_a6dc463a17ae0cac2850b6d1bc8b34fa7"><div class="ttname"><a href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">item::inc_damage</a></div><div class="ttdeci">bool inc_damage()</div><div class="ttdoc">Same as mod_damage( itype::damage_scale ), advances item to next damage level.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08947">item.cpp:8947</a></div></div>
<div class="ttc" id="aclassitem_html_a6de81eeb1c4666a84e1d774582b945ae"><div class="ttname"><a href="classitem.html#a6de81eeb1c4666a84e1d774582b945ae">item::is_holster</a></div><div class="ttdeci">bool is_holster() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09465">item.cpp:9465</a></div></div>
<div class="ttc" id="aclassitem_html_a6f2be68fcb884d25e7bbd41d98b625b3"><div class="ttname"><a href="classitem.html#a6f2be68fcb884d25e7bbd41d98b625b3">item::corpse_volume</a></div><div class="ttdeci">units::volume corpse_volume(const mtype *corpse) const</div><div class="ttdoc">Volume check for corpses, helper for base_volume().</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07304">item.cpp:7304</a></div></div>
<div class="ttc" id="aclassitem_html_a6f7e133c24405fba732477668ca19da3"><div class="ttname"><a href="classitem.html#a6f7e133c24405fba732477668ca19da3">item::process_internal</a></div><div class="ttdeci">bool process_internal(map &amp;here, Character *carrier, const tripoint &amp;pos, float insulation=1, temperature_flag flag=temperature_flag::NORMAL, float spoil_modifier=1.0f)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14044">item.cpp:14044</a></div></div>
<div class="ttc" id="aclassitem_html_a707b3689cbff914f5cd469cfee11c1d8"><div class="ttname"><a href="classitem.html#a707b3689cbff914f5cd469cfee11c1d8">item::is_ablative</a></div><div class="ttdeci">bool is_ablative() const</div><div class="ttdoc">Returns if the armor has ablative pockets.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01196">item.cpp:1196</a></div></div>
<div class="ttc" id="aclassitem_html_a713d080573a79762924441b2b7350909"><div class="ttname"><a href="classitem.html#a713d080573a79762924441b2b7350909">item::get_quality_nonrecursive</a></div><div class="ttdeci">int get_quality_nonrecursive(const quality_id &amp;id, bool strict_boiling=true) const</div><div class="ttdoc">Return the level of a given quality the tool may have, or INT_MIN if it does not have that quality,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07705">item.cpp:7705</a></div></div>
<div class="ttc" id="aclassitem_html_a71dac02bae8b97487391d5540a89bc1c"><div class="ttname"><a href="classitem.html#a71dac02bae8b97487391d5540a89bc1c">item::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;use_name) const</div><div class="ttdoc">Returns the pointer to use_function with name use_name assigned to the type of this item or any of it...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11463">item.cpp:11463</a></div></div>
<div class="ttc" id="aclassitem_html_a721746ee594b379edfa634a4b2089265"><div class="ttname"><a href="classitem.html#a721746ee594b379edfa634a4b2089265">item::set_countdown</a></div><div class="ttdeci">void set_countdown(int num_turns)</div><div class="ttdoc">Sets time until activation for an item that will self-activate in the future.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12256">item.cpp:12256</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09667">item.cpp:9667</a></div></div>
<div class="ttc" id="aclassitem_html_a727917284cddff4dbf0113d1329fec51"><div class="ttname"><a href="classitem.html#a727917284cddff4dbf0113d1329fec51">item::get_mod_locations</a></div><div class="ttdeci">std::map&lt; gunmod_location, int &gt; get_mod_locations() const</div><div class="ttdoc">Get mod locations, including those added by other mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06251">item.cpp:6251</a></div></div>
<div class="ttc" id="aclassitem_html_a72a3777436f5b6b0fac303100451a42f"><div class="ttname"><a href="classitem.html#a72a3777436f5b6b0fac303100451a42f">item::set_old_owner</a></div><div class="ttdeci">void set_old_owner(const faction_id &amp;temp_owner)</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02803">item.h:2803</a></div></div>
<div class="ttc" id="aclassitem_html_a72d58d172f74830b7d965a0fdfaa2c17"><div class="ttname"><a href="classitem.html#a72d58d172f74830b7d965a0fdfaa2c17">item::is_money</a></div><div class="ttdeci">bool is_money() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08568">item.cpp:8568</a></div></div>
<div class="ttc" id="aclassitem_html_a732ea713c6965bb7a15ba7f2fe08f2b5"><div class="ttname"><a href="classitem.html#a732ea713c6965bb7a15ba7f2fe08f2b5">item::charges_per_weight</a></div><div class="ttdeci">int charges_per_weight(const units::mass &amp;m, bool suppress_warning=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01356">item.cpp:1356</a></div></div>
<div class="ttc" id="aclassitem_html_a733d3f8bc85cb1bc0e8d87b6ed5af7ac"><div class="ttname"><a href="classitem.html#a733d3f8bc85cb1bc0e8d87b6ed5af7ac">item::component_info</a></div><div class="ttdeci">void component_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05046">item.cpp:5046</a></div></div>
<div class="ttc" id="aclassitem_html_a73c898d632f790e7856ebdfef03e96f3"><div class="ttname"><a href="classitem.html#a73c898d632f790e7856ebdfef03e96f3">item::get_specific_energy_from_temperature</a></div><div class="ttdeci">units::specific_energy get_specific_energy_from_temperature(const units::temperature &amp;new_temperature) const</div><div class="ttdoc">Calculates item specific energy (J/g) from temperature.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12124">item.cpp:12124</a></div></div>
<div class="ttc" id="aclassitem_html_a74455429897a8496f1ba87140669c9f5"><div class="ttname"><a href="classitem.html#a74455429897a8496f1ba87140669c9f5">item::NO_PROCESSING</a></div><div class="ttdeci">static constexpr int NO_PROCESSING</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01589">item.h:1589</a></div></div>
<div class="ttc" id="aclassitem_html_a7454027d8aaeb67f6e9d6b374bae55c7"><div class="ttname"><a href="classitem.html#a7454027d8aaeb67f6e9d6b374bae55c7">item::display_stacked_with</a></div><div class="ttdeci">bool display_stacked_with(const item &amp;rhs, bool check_components=false) const</div><div class="ttdoc">Whether two items should stack when displayed in a inventory menu.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01378">item.cpp:1378</a></div></div>
<div class="ttc" id="aclassitem_html_a74a90ea94f124f8d857058c2704a7fc7"><div class="ttname"><a href="classitem.html#a74a90ea94f124f8d857058c2704a7fc7">item::gun_cycle_mode</a></div><div class="ttdeci">void gun_cycle_mode()</div><div class="ttdoc">Switch to the next available firing mode.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11442">item.cpp:11442</a></div></div>
<div class="ttc" id="aclassitem_html_a74f491e132994002d7bb107c8c56f2f3"><div class="ttname"><a href="classitem.html#a74f491e132994002d7bb107c8c56f2f3">item::remove_internal</a></div><div class="ttdeci">void remove_internal(const std::function&lt; bool(item &amp;)&gt; &amp;filter, int &amp;count, std::list&lt; item &gt; &amp;res)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14945">item.cpp:14945</a></div></div>
<div class="ttc" id="aclassitem_html_a75004c436d2ab58ce64498f8f5dd2506"><div class="ttname"><a href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506">item::armor_status</a></div><div class="ttdeci">armor_status</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01379">item.h:1379</a></div></div>
<div class="ttc" id="aclassitem_html_a75004c436d2ab58ce64498f8f5dd2506a0fdd493bed5a4a53ad5ccaa889f4e19a"><div class="ttname"><a href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a0fdd493bed5a4a53ad5ccaa889f4e19a">item::armor_status::TRANSFORMED</a></div><div class="ttdeci">@ TRANSFORMED</div></div>
<div class="ttc" id="aclassitem_html_a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43"><div class="ttname"><a href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a12d952669f0f0776d3836707f882df43">item::armor_status::UNDAMAGED</a></div><div class="ttdeci">@ UNDAMAGED</div></div>
<div class="ttc" id="aclassitem_html_a75004c436d2ab58ce64498f8f5dd2506a3cf53b7601ee463412beea23294bd347"><div class="ttname"><a href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a3cf53b7601ee463412beea23294bd347">item::armor_status::DAMAGED</a></div><div class="ttdeci">@ DAMAGED</div></div>
<div class="ttc" id="aclassitem_html_a75004c436d2ab58ce64498f8f5dd2506a5d7e41d3ac0abca5974598807df874ea"><div class="ttname"><a href="classitem.html#a75004c436d2ab58ce64498f8f5dd2506a5d7e41d3ac0abca5974598807df874ea">item::armor_status::DESTROYED</a></div><div class="ttdeci">@ DESTROYED</div></div>
<div class="ttc" id="aclassitem_html_a75713034c5248d9f6305822f2e976222"><div class="ttname"><a href="classitem.html#a75713034c5248d9f6305822f2e976222">item::all_pockets_rigid</a></div><div class="ttdeci">bool all_pockets_rigid() const</div><div class="ttdoc">True if every pocket is rigid or we have no pockets.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09696">item.cpp:9696</a></div></div>
<div class="ttc" id="aclassitem_html_a75b85410499e6e47e3fd85326a8e7ce4"><div class="ttname"><a href="classitem.html#a75b85410499e6e47e3fd85326a8e7ce4">item::made_of_types</a></div><div class="ttdeci">std::vector&lt; const material_type * &gt; made_of_types() const</div><div class="ttdoc">Same as made_of(), but returns the material_type directly.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09203">item.cpp:9203</a></div></div>
<div class="ttc" id="aclassitem_html_a76165a9e0121b48e5df59d0fcabc1728"><div class="ttname"><a href="classitem.html#a76165a9e0121b48e5df59d0fcabc1728">item::can_holster</a></div><div class="ttdeci">bool can_holster(const item &amp;obj, bool ignore=false) const</div><div class="ttdoc">Checks if item is a holster and currently capable of storing obj.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12542">item.cpp:12542</a></div></div>
<div class="ttc" id="aclassitem_html_a7651972f2eacf5ad1be81afb53e2c950"><div class="ttname"><a href="classitem.html#a7651972f2eacf5ad1be81afb53e2c950">item::gun_base_weight</a></div><div class="ttdeci">units::mass gun_base_weight() const</div><div class="ttdoc">The base weight of gun which takes receiver into account.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10568">item.cpp:10568</a></div></div>
<div class="ttc" id="aclassitem_html_a768c08639c1047f61b9aab2b894e9bcd"><div class="ttname"><a href="classitem.html#a768c08639c1047f61b9aab2b894e9bcd">item::ammo_effects</a></div><div class="ttdeci">std::set&lt; std::string &gt; ammo_effects(bool with_ammo=true) const</div><div class="ttdoc">Get ammo effects for item optionally inclusive of any resulting from the loaded ammo.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11143">item.cpp:11143</a></div></div>
<div class="ttc" id="aclassitem_html_a768ea4fe5f4b0b5054a91c4bab1a5bab"><div class="ttname"><a href="classitem.html#a768ea4fe5f4b0b5054a91c4bab1a5bab">item::contextualize_skill</a></div><div class="ttdeci">skill_id contextualize_skill(const skill_id &amp;id) const</div><div class="ttdoc">Puts the skill in context of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14637">item.cpp:14637</a></div></div>
<div class="ttc" id="aclassitem_html_a76baae3501d92f1fca07b9d8f52bc6f1"><div class="ttname"><a href="classitem.html#a76baae3501d92f1fca07b9d8f52bc6f1">item::is_magazine_full</a></div><div class="ttdeci">bool is_magazine_full() const</div><div class="ttdoc">Whether the magazine pockets of this item have room for additional items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09863">item.cpp:9863</a></div></div>
<div class="ttc" id="aclassitem_html_a773105801673bb74d69b3ca2dac471d6"><div class="ttname"><a href="classitem.html#a773105801673bb74d69b3ca2dac471d6">item::get_base_material</a></div><div class="ttdeci">const material_type &amp; get_base_material() const</div><div class="ttdoc">Get the basic (main) material of this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10349">item.cpp:10349</a></div></div>
<div class="ttc" id="aclassitem_html_a778f402036fcb41dbaf8aeef08304254"><div class="ttname"><a href="classitem.html#a778f402036fcb41dbaf8aeef08304254">item::calculate_by_enchantment_wield</a></div><div class="ttdeci">double calculate_by_enchantment_wield(const Character &amp;owner, double modify, enchant_vals::mod value, bool round_value=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10038">item.cpp:10038</a></div></div>
<div class="ttc" id="aclassitem_html_a77cad1ee17273a24e50fe42e03eea269"><div class="ttname"><a href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">item::gun_range</a></div><div class="ttdeci">int gun_range(const Character *p) const</div><div class="ttdoc">The weapons range in map squares.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10648">item.cpp:10648</a></div></div>
<div class="ttc" id="aclassitem_html_a7905983b6a499f90dec87250ed395acf"><div class="ttname"><a href="classitem.html#a7905983b6a499f90dec87250ed395acf">item::pet_armor_protection_info</a></div><div class="ttdeci">void pet_armor_protection_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04004">item.cpp:4004</a></div></div>
<div class="ttc" id="aclassitem_html_a7910f9c43fec76d1c097fbff473af8d8"><div class="ttname"><a href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8">item::composting_time</a></div><div class="ttdeci">time_duration composting_time() const</div><div class="ttdoc">Time for this item to be fully fermented.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08513">item.cpp:8513</a></div></div>
<div class="ttc" id="aclassitem_html_a7a87dfe9c9c30a0ee04da41ecc48a3e7"><div class="ttname"><a href="classitem.html#a7a87dfe9c9c30a0ee04da41ecc48a3e7">item::has_own_flag</a></div><div class="ttdeci">bool has_own_flag(const flag_id &amp;f) const</div><div class="ttdoc">Checks whether item itself has given flag (doesn't check item type or gunmods).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07573">item.cpp:7573</a></div></div>
<div class="ttc" id="aclassitem_html_a7af3529d3ba327b8eac2d9be8bd5b1d6"><div class="ttname"><a href="classitem.html#a7af3529d3ba327b8eac2d9be8bd5b1d6">item::repair_info</a></div><div class="ttdeci">void repair_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05194">item.cpp:5194</a></div></div>
<div class="ttc" id="aclassitem_html_a7c9257f060bf53de49af433651eb9194"><div class="ttname"><a href="classitem.html#a7c9257f060bf53de49af433651eb9194">item::get_category_of_contents</a></div><div class="ttdeci">const item_category &amp; get_category_of_contents(int depth=0, int maxdepth=2) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12360">item.cpp:12360</a></div></div>
<div class="ttc" id="aclassitem_html_a7d0d70bd9b2bdcfd2541bee14866b010"><div class="ttname"><a href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">item::ebooks</a></div><div class="ttdeci">std::vector&lt; const item * &gt; ebooks() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11237">item.cpp:11237</a></div></div>
<div class="ttc" id="aclassitem_html_a7d1ba8693571b9563e111fe709348438"><div class="ttname"><a href="classitem.html#a7d1ba8693571b9563e111fe709348438">item::get_quality</a></div><div class="ttdeci">int get_quality(const quality_id &amp;id, bool strict_boiling=true) const</div><div class="ttdoc">Return the level of a given quality the tool may have, or INT_MIN if it does not have that quality,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07737">item.cpp:7737</a></div></div>
<div class="ttc" id="aclassitem_html_a7d8ce5c60b8038f357ff51aa7e87495c"><div class="ttname"><a href="classitem.html#a7d8ce5c60b8038f357ff51aa7e87495c">item::has_vitamin</a></div><div class="ttdeci">bool has_vitamin(const vitamin_id &amp;vitamin) const</div><div class="ttdoc">Does this item have the specified vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07614">item.cpp:7614</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_a7e23a1672b70221013c608311339cb09"><div class="ttname"><a href="classitem.html#a7e23a1672b70221013c608311339cb09">item::link_</a></div><div class="ttdeci">cata::value_ptr&lt; link_data &gt; link_</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03199">item.h:3199</a></div></div>
<div class="ttc" id="aclassitem_html_a7f1ae4e309841707eea0852dd4cd95a3"><div class="ttname"><a href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">item::activate</a></div><div class="ttdeci">item &amp; activate()</div><div class="ttdoc">Filter converting instance to active state.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00685">item.cpp:685</a></div></div>
<div class="ttc" id="aclassitem_html_a7f25e0430419609c538b07f704d6ba7a"><div class="ttname"><a href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">item::is_craft</a></div><div class="ttdeci">bool is_craft() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09930">item.cpp:9930</a></div></div>
<div class="ttc" id="aclassitem_html_a7f725d9c740f860c7525706d295a7c7f"><div class="ttname"><a href="classitem.html#a7f725d9c740f860c7525706d295a7c7f">item::get_highest_layer</a></div><div class="ttdeci">layer_level get_highest_layer(const sub_bodypart_id &amp;sbp) const</div><div class="ttdoc">Returns highest layer of an item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08280">item.cpp:8280</a></div></div>
<div class="ttc" id="aclassitem_html_a7ffe9b2c358a754134cbf4519c105fff"><div class="ttname"><a href="classitem.html#a7ffe9b2c358a754134cbf4519c105fff">item::cables</a></div><div class="ttdeci">std::vector&lt; const item * &gt; cables() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11242">item.cpp:11242</a></div></div>
<div class="ttc" id="aclassitem_html_a80618c347b04de8ef3414f21b2f136f6"><div class="ttname"><a href="classitem.html#a80618c347b04de8ef3414f21b2f136f6">item::overheat_symbol</a></div><div class="ttdeci">std::string overheat_symbol() const</div><div class="ttdoc">Returns a symbol for indicating the overheat level for a gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06751">item.cpp:6751</a></div></div>
<div class="ttc" id="aclassitem_html_a80b22af3c9477e515c1ffa3a13d348e1"><div class="ttname"><a href="classitem.html#a80b22af3c9477e515c1ffa3a13d348e1">item::contained_where</a></div><div class="ttdeci">item_pocket * contained_where(const item &amp;contained)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09731">item.cpp:9731</a></div></div>
<div class="ttc" id="aclassitem_html_a80ef6d13a5545c5d32af710fedf717eb"><div class="ttname"><a href="classitem.html#a80ef6d13a5545c5d32af710fedf717eb">item::durability_indicator</a></div><div class="ttdeci">std::string durability_indicator(bool include_intact=false) const</div><div class="ttdoc">Provides a prefix for the durability state of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09039">item.cpp:9039</a></div></div>
<div class="ttc" id="aclassitem_html_a811dfbca1ec2cd86b6b4de809c642fe8"><div class="ttname"><a href="classitem.html#a811dfbca1ec2cd86b6b4de809c642fe8">item::light</a></div><div class="ttdeci">light_emission light</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03197">item.h:3197</a></div></div>
<div class="ttc" id="aclassitem_html_a8163090872db2e3d3baa018999bf6943"><div class="ttname"><a href="classitem.html#a8163090872db2e3d3baa018999bf6943">item::get_avg_coverage</a></div><div class="ttdeci">int get_avg_coverage(const cover_type &amp;type=cover_type::COVER_DEFAULT) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08307">item.cpp:8307</a></div></div>
<div class="ttc" id="aclassitem_html_a81798b5b03c8bf2a153f9980de316f48"><div class="ttname"><a href="classitem.html#a81798b5b03c8bf2a153f9980de316f48">item::lift_strength</a></div><div class="ttdeci">int lift_strength() const</div><div class="ttdoc">Required strength to be able to successfully lift the item unaided by equipment.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07438">item.cpp:7438</a></div></div>
<div class="ttc" id="aclassitem_html_a81a58094823d43277c23e7520a7ba7b5"><div class="ttname"><a href="classitem.html#a81a58094823d43277c23e7520a7ba7b5">item::link</a></div><div class="ttdeci">item::link_data &amp; link()</div><div class="ttdoc">Gets the item's link data, initializing it if needed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13290">item.cpp:13290</a></div></div>
<div class="ttc" id="aclassitem_html_a81e681d4290360b38c2460ac54a614e5"><div class="ttname"><a href="classitem.html#a81e681d4290360b38c2460ac54a614e5">item::loaded_ammo</a></div><div class="ttdeci">const item &amp; loaded_ammo() const</div><div class="ttdoc">Get currently loaded ammo, if any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11031">item.cpp:11031</a></div></div>
<div class="ttc" id="aclassitem_html_a8204afe3e18e6b7e85c47ab2d1329dc2"><div class="ttname"><a href="classitem.html#a8204afe3e18e6b7e85c47ab2d1329dc2">item::energy_consume</a></div><div class="ttdeci">units::energy energy_consume(units::energy qty, const tripoint &amp;pos, Character *carrier, float fuel_efficiency=-1.0)</div><div class="ttdoc">Consume energy (if available) and return the amount of energy that was consumed Consume order: batter...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10943">item.cpp:10943</a></div></div>
<div class="ttc" id="aclassitem_html_a82e0833373b0141aec30768dfc349bbe"><div class="ttname"><a href="classitem.html#a82e0833373b0141aec30768dfc349bbe">item::is_power_armor</a></div><div class="ttdeci">bool is_power_armor() const</div><div class="ttdoc">Whether this is a power armor item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08038">item.cpp:8038</a></div></div>
<div class="ttc" id="aclassitem_html_a839bf08afc1c50d46b608020ed4290ae"><div class="ttname"><a href="classitem.html#a839bf08afc1c50d46b608020ed4290ae">item::barrel_length</a></div><div class="ttdeci">units::length barrel_length() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07250">item.cpp:7250</a></div></div>
<div class="ttc" id="aclassitem_html_a8420474e3cfb1c91957ee0ce30a57e86"><div class="ttname"><a href="classitem.html#a8420474e3cfb1c91957ee0ce30a57e86">item::current_phase</a></div><div class="ttdeci">phase_id current_phase</div><div class="ttdoc">Current phase state, inherits a default at room temperature from itype and can be changed through ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03190">item.h:3190</a></div></div>
<div class="ttc" id="aclassitem_html_a847d19164f1fc21cbd5dd9e88147c710"><div class="ttname"><a href="classitem.html#a847d19164f1fc21cbd5dd9e88147c710">item::FlagsSetType</a></div><div class="ttdeci">std::set&lt; flag_id &gt; FlagsSetType</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00198">item.h:198</a></div></div>
<div class="ttc" id="aclassitem_html_a84cbca948718b41241902acce542f352"><div class="ttname"><a href="classitem.html#a84cbca948718b41241902acce542f352">item::is_reloadable</a></div><div class="ttdeci">bool is_reloadable() const</div><div class="ttdoc">Is it ever possible to reload this item? ALso checks for reloading installed gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14413">item.cpp:14413</a></div></div>
<div class="ttc" id="aclassitem_html_a84f479532a526df83b19a5afd7f2862b"><div class="ttname"><a href="classitem.html#a84f479532a526df83b19a5afd7f2862b">item::all_ablative_armor</a></div><div class="ttdeci">std::list&lt; item * &gt; all_ablative_armor()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15120">item.cpp:15120</a></div></div>
<div class="ttc" id="aclassitem_html_a85f4baf5442d5db534baf3ba2b59d070"><div class="ttname"><a href="classitem.html#a85f4baf5442d5db534baf3ba2b59d070">item::max_link_length</a></div><div class="ttdeci">int max_link_length() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13564">item.cpp:13564</a></div></div>
<div class="ttc" id="aclassitem_html_a8673667a3d9507e9b7c66be499e51d80"><div class="ttname"><a href="classitem.html#a8673667a3d9507e9b7c66be499e51d80">item::on_takeoff</a></div><div class="ttdeci">void on_takeoff(Character &amp;p)</div><div class="ttdoc">Callback when a character takes off an item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06525">item.cpp:6525</a></div></div>
<div class="ttc" id="aclassitem_html_a8677a436063e8182f2e3486de9cc1ed4"><div class="ttname"><a href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">item::is_compostable</a></div><div class="ttdeci">bool is_compostable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09507">item.cpp:9507</a></div></div>
<div class="ttc" id="aclassitem_html_a8745e526c89a341c916986a0bc5a21f9"><div class="ttname"><a href="classitem.html#a8745e526c89a341c916986a0bc5a21f9">item::_itype_variant</a></div><div class="ttdeci">const itype_variant_data * _itype_variant</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03105">item.h:3105</a></div></div>
<div class="ttc" id="aclassitem_html_a87b25bdb6c42347eb5875093899d51fa"><div class="ttname"><a href="classitem.html#a87b25bdb6c42347eb5875093899d51fa">item::cached_category</a></div><div class="ttdeci">cat_cache cached_category</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03205">item.h:3205</a></div></div>
<div class="ttc" id="aclassitem_html_a884a7ea3cc59c2ed8342e3054c07a922"><div class="ttname"><a href="classitem.html#a884a7ea3cc59c2ed8342e3054c07a922">item::magazine_info</a></div><div class="ttdeci">void magazine_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02890">item.cpp:2890</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06855">item.cpp:6855</a></div></div>
<div class="ttc" id="aclassitem_html_a8997128dc1d0b04bc66d1cada9e4fba5"><div class="ttname"><a href="classitem.html#a8997128dc1d0b04bc66d1cada9e4fba5">item::seal</a></div><div class="ttdeci">bool seal()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09648">item.cpp:9648</a></div></div>
<div class="ttc" id="aclassitem_html_a8a6290c91fa94f5fb208c7b3188627b8"><div class="ttname"><a href="classitem.html#a8a6290c91fa94f5fb208c7b3188627b8">item::calculate_by_enchantment</a></div><div class="ttdeci">double calculate_by_enchantment(const Character &amp;owner, double modify, enchant_vals::mod value, bool round_value=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10011">item.cpp:10011</a></div></div>
<div class="ttc" id="aclassitem_html_a8ad991121ec586b5527bd9b0d79e7ef0"><div class="ttname"><a href="classitem.html#a8ad991121ec586b5527bd9b0d79e7ef0">item::is_software</a></div><div class="ttdeci">bool is_software() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08583">item.cpp:8583</a></div></div>
<div class="ttc" id="aclassitem_html_a8b3990ded6c9b29a413871f7017e3f9e"><div class="ttname"><a href="classitem.html#a8b3990ded6c9b29a413871f7017e3f9e">item::techniques</a></div><div class="ttdeci">cata::heap&lt; std::set&lt; matec_id &gt; &gt; techniques</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03093">item.h:3093</a></div></div>
<div class="ttc" id="aclassitem_html_a8b6013a4dab952626df6834f46ec048f"><div class="ttname"><a href="classitem.html#a8b6013a4dab952626df6834f46ec048f">item::force_insert_item</a></div><div class="ttdeci">void force_insert_item(const item &amp;it, pocket_type pk_type)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01803">item.cpp:1803</a></div></div>
<div class="ttc" id="aclassitem_html_a8b80049f3898463f6008b0840f1a8a58"><div class="ttname"><a href="classitem.html#a8b80049f3898463f6008b0840f1a8a58">item::ready_to_revive</a></div><div class="ttdeci">bool ready_to_revive(map &amp;here, const tripoint &amp;pos) const</div><div class="ttdoc">Whether this corpse should revive now.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08533">item.cpp:8533</a></div></div>
<div class="ttc" id="aclassitem_html_a8bd4c9e45ebb4ca6c43c389e1eb6d3af"><div class="ttname"><a href="classitem.html#a8bd4c9e45ebb4ca6c43c389e1eb6d3af">item::get_suffix_flags</a></div><div class="ttdeci">const FlagsSetType &amp; get_suffix_flags() const</div><div class="ttdoc">returns read-only set of flags of this item that will add suffixes to this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07670">item.cpp:7670</a></div></div>
<div class="ttc" id="aclassitem_html_a8c9562ef68b4f1419c420a7f177747d1"><div class="ttname"><a href="classitem.html#a8c9562ef68b4f1419c420a7f177747d1">item::get_specific_heat_liquid</a></div><div class="ttdeci">float get_specific_heat_liquid() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09536">item.cpp:9536</a></div></div>
<div class="ttc" id="aclassitem_html_a8d68589372751014af945302be6992ef"><div class="ttname"><a href="classitem.html#a8d68589372751014af945302be6992ef">item::get_layer</a></div><div class="ttdeci">std::vector&lt; layer_level &gt; get_layer() const</div><div class="ttdoc">Returns clothing layer for item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08164">item.cpp:8164</a></div></div>
<div class="ttc" id="aclassitem_html_a8db778da0efb225d159fd8c9128e6249"><div class="ttname"><a href="classitem.html#a8db778da0efb225d159fd8c9128e6249">item::randomize_rot</a></div><div class="ttdeci">void randomize_rot()</div><div class="ttdoc">Set item rot to a random value.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07875">item.cpp:7875</a></div></div>
<div class="ttc" id="aclassitem_html_a8e66b783b8111c0aefb616cb620623c8"><div class="ttname"><a href="classitem.html#a8e66b783b8111c0aefb616cb620623c8">item::craft_has_charges</a></div><div class="ttdeci">bool craft_has_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08628">item.cpp:8628</a></div></div>
<div class="ttc" id="aclassitem_html_a8f75faff6c4eccd2cd04c78fa6c95030"><div class="ttname"><a href="classitem.html#a8f75faff6c4eccd2cd04c78fa6c95030">item::requires_tags_processing</a></div><div class="ttdeci">bool requires_tags_processing</div><div class="ttdoc">true if item has any of the flags that require processing in item::process_internal.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03084">item.h:3084</a></div></div>
<div class="ttc" id="aclassitem_html_a8fa04ac19333613fdc072b87b3243a4b"><div class="ttname"><a href="classitem.html#a8fa04ac19333613fdc072b87b3243a4b">item::get_selected_stack_volume</a></div><div class="ttdeci">units::volume get_selected_stack_volume(const std::map&lt; const item *, int &gt; &amp;without) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14893">item.cpp:14893</a></div></div>
<div class="ttc" id="aclassitem_html_a900f0ca8b2a7d8f0738202c519313d0d"><div class="ttname"><a href="classitem.html#a900f0ca8b2a7d8f0738202c519313d0d">item::is_container_full</a></div><div class="ttdeci">bool is_container_full(bool allow_bucket=false) const</div><div class="ttdoc">Whether this item has no more free capacity for its current content.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09858">item.cpp:9858</a></div></div>
<div class="ttc" id="aclassitem_html_a902e330a0505ae225e2ed05921bdf004"><div class="ttname"><a href="classitem.html#a902e330a0505ae225e2ed05921bdf004">item::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol, bool suppress_warning=false) const</div><div class="ttdoc">Number of (charges of) this item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01332">item.cpp:1332</a></div></div>
<div class="ttc" id="aclassitem_html_a9099ca6d7da8f258d6efd957ab93cd6d"><div class="ttname"><a href="classitem.html#a9099ca6d7da8f258d6efd957ab93cd6d">item::is_cash_card</a></div><div class="ttdeci">bool is_cash_card() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08578">item.cpp:8578</a></div></div>
<div class="ttc" id="aclassitem_html_a910393f5651f273b5df0bdd576bef78d"><div class="ttname"><a href="classitem.html#a910393f5651f273b5df0bdd576bef78d">item::price</a></div><div class="ttdeci">int price(bool practical) const</div><div class="ttdoc">Returns the monetary value of an item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07032">item.cpp:7032</a></div></div>
<div class="ttc" id="aclassitem_html_a9113a7b590ad5a3d343de910de33aff2"><div class="ttname"><a href="classitem.html#a9113a7b590ad5a3d343de910de33aff2">item::handle_pickup_ownership</a></div><div class="ttdeci">void handle_pickup_ownership(Character &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06595">item.cpp:6595</a></div></div>
<div class="ttc" id="aclassitem_html_a91fb3717957325c9800f90c58a03ba4c"><div class="ttname"><a href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">item::is_toolmod</a></div><div class="ttdeci">bool is_toolmod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09775">item.cpp:9775</a></div></div>
<div class="ttc" id="aclassitem_html_a9212d253f21baa539e5aa28dc6e7fe44"><div class="ttname"><a href="classitem.html#a9212d253f21baa539e5aa28dc6e7fe44">item::softwares</a></div><div class="ttdeci">std::vector&lt; const item * &gt; softwares() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11232">item.cpp:11232</a></div></div>
<div class="ttc" id="aclassitem_html_a93975c0de5ac342f4e461b4caf712f82"><div class="ttname"><a href="classitem.html#a93975c0de5ac342f4e461b4caf712f82">item::update_prefix_suffix_flags</a></div><div class="ttdeci">void update_prefix_suffix_flags()</div><div class="ttdoc">Update prefix_tags_cache and suffix_tags_cache.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06698">item.cpp:6698</a></div></div>
<div class="ttc" id="aclassitem_html_a953a3502d31bc8be819bd1259651943f"><div class="ttname"><a href="classitem.html#a953a3502d31bc8be819bd1259651943f">item::on_drop</a></div><div class="ttdeci">bool on_drop(const tripoint &amp;pos)</div><div class="ttdoc">Invokes item type's itype::drop_action.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14657">item.cpp:14657</a></div></div>
<div class="ttc" id="aclassitem_html_a95c467c19e7fbcb31345109e6d7d9723"><div class="ttname"><a href="classitem.html#a95c467c19e7fbcb31345109e6d7d9723">item::aggregated_contents</a></div><div class="ttdeci">aggregate_t aggregated_contents(int depth=0, int maxdepth=2) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15018">item.cpp:15018</a></div></div>
<div class="ttc" id="aclassitem_html_a9631255be918afc443309fd2f3647b69"><div class="ttname"><a href="classitem.html#a9631255be918afc443309fd2f3647b69">item::in_container</a></div><div class="ttdeci">item in_container(const itype_id &amp;container_type, int qty=0, bool sealed=true, const std::string &amp;container_variant=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01235">item.cpp:1235</a></div></div>
<div class="ttc" id="aclassitem_html_a9691e517a7bc100b0734bf6e89feb708"><div class="ttname"><a href="classitem.html#a9691e517a7bc100b0734bf6e89feb708">item::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const item &amp;other) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10370">item.cpp:10370</a></div></div>
<div class="ttc" id="aclassitem_html_a9691e635ae33464eb0b2700e8bfce0ba"><div class="ttname"><a href="classitem.html#a9691e635ae33464eb0b2700e8bfce0ba">item::contents_only_one_type</a></div><div class="ttdeci">bool contents_only_one_type() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14978">item.cpp:14978</a></div></div>
<div class="ttc" id="aclassitem_html_a9721daec3304aeb9965b5679f9db3e7f"><div class="ttname"><a href="classitem.html#a9721daec3304aeb9965b5679f9db3e7f">item::set_rot</a></div><div class="ttdeci">void set_rot(time_duration val)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07870">item.cpp:7870</a></div></div>
<div class="ttc" id="aclassitem_html_a9781b39e9c1a98383f202db9935b6a23"><div class="ttname"><a href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">item::is_brewable</a></div><div class="ttdeci">bool is_brewable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09502">item.cpp:9502</a></div></div>
<div class="ttc" id="aclassitem_html_a97c519c4be7a500111112216e64a25a6"><div class="ttname"><a href="classitem.html#a97c519c4be7a500111112216e64a25a6">item::is_worn_by_player</a></div><div class="ttdeci">bool is_worn_by_player() const</div><div class="ttdoc">Returns true wether this item is worn or not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01224">item.cpp:1224</a></div></div>
<div class="ttc" id="aclassitem_html_a97d8d3d1e2660c131d92a1958327f7a1"><div class="ttname"><a href="classitem.html#a97d8d3d1e2660c131d92a1958327f7a1">item::link_has_state</a></div><div class="ttdeci">bool link_has_state(link_state state) const</div><div class="ttdoc">Returns true if either of the link's ends have the specified state.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13324">item.cpp:13324</a></div></div>
<div class="ttc" id="aclassitem_html_a97dda9dbf79f8df65ac930cb89ac9b98"><div class="ttname"><a href="classitem.html#a97dda9dbf79f8df65ac930cb89ac9b98">item::find_armor_data</a></div><div class="ttdeci">const islot_armor * find_armor_data() const</div><div class="ttdoc">If this is an armor item, return its armor data.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09601">item.cpp:9601</a></div></div>
<div class="ttc" id="aclassitem_html_a98094333487904d8d911fbc8f14c6569"><div class="ttname"><a href="classitem.html#a98094333487904d8d911fbc8f14c6569">item::is_compatible</a></div><div class="ttdeci">ret_val&lt; void &gt; is_compatible(const item &amp;it) const</div><div class="ttdoc">returns whether any of the pockets is compatible with the specified item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10081">item.cpp:10081</a></div></div>
<div class="ttc" id="aclassitem_html_a980b9e48afd103973a201fc487d0af8b"><div class="ttname"><a href="classitem.html#a980b9e48afd103973a201fc487d0af8b">item::is_book</a></div><div class="ttdeci">bool is_book() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09628">item.cpp:9628</a></div></div>
<div class="ttc" id="aclassitem_html_a98a1de7b06c68d9552e32d44ba0e6831"><div class="ttname"><a href="classitem.html#a98a1de7b06c68d9552e32d44ba0e6831">item::is_container_with_restriction</a></div><div class="ttdeci">bool is_container_with_restriction() const</div><div class="ttdoc">Whether it is a container, and if it is has some restrictions.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09672">item.cpp:9672</a></div></div>
<div class="ttc" id="aclassitem_html_a9912c47e06d70bd1ca003a8f588f4a02"><div class="ttname"><a href="classitem.html#a9912c47e06d70bd1ca003a8f588f4a02">item::calc_rot</a></div><div class="ttdeci">void calc_rot(units::temperature temp, float spoil_modifier, const time_duration &amp;time_delta)</div><div class="ttdoc">Accumulate rot of the item since last rot calculation.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07964">item.cpp:7964</a></div></div>
<div class="ttc" id="aclassitem_html_a99e821ffbf8bdda7759ac92aff06c910"><div class="ttname"><a href="classitem.html#a99e821ffbf8bdda7759ac92aff06c910">item::calc_rot_while_processing</a></div><div class="ttdeci">void calc_rot_while_processing(time_duration processing_duration)</div><div class="ttdoc">This is part of a workaround so that items don't rot away to nothing if the smoking rack is outside t...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08004">item.cpp:8004</a></div></div>
<div class="ttc" id="aclassitem_html_a9a1f33d04abe5ec73a31213be8d0c44e"><div class="ttname"><a href="classitem.html#a9a1f33d04abe5ec73a31213be8d0c44e">item::set_favorite</a></div><div class="ttdeci">void set_favorite(bool favorite)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14753">item.cpp:14753</a></div></div>
<div class="ttc" id="aclassitem_html_a9a8676fe361acce8c16a8fb437dafacf"><div class="ttname"><a href="classitem.html#a9a8676fe361acce8c16a8fb437dafacf">item::favorite_settings_menu</a></div><div class="ttdeci">void favorite_settings_menu()</div><div class="ttdoc">Open a menu for the player to set pocket favorite settings for the pockets in this item_contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15180">item.cpp:15180</a></div></div>
<div class="ttc" id="aclassitem_html_a9aab8660fb40eedb8d2da95e797ecd32"><div class="ttname"><a href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a></div><div class="ttdeci">bool is_armor() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09623">item.cpp:9623</a></div></div>
<div class="ttc" id="aclassitem_html_a9b06bb61116b722a90aa372a4561337a"><div class="ttname"><a href="classitem.html#a9b06bb61116b722a90aa372a4561337a">item::is_gunmod</a></div><div class="ttdeci">bool is_gunmod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09435">item.cpp:9435</a></div></div>
<div class="ttc" id="aclassitem_html_a9b7de1507e4000d58e9d813354073188"><div class="ttname"><a href="classitem.html#a9b7de1507e4000d58e9d813354073188">item::reload</a></div><div class="ttdeci">bool reload(Character &amp;u, item_location ammo, int qty)</div><div class="ttdoc">Reload item using ammo from location returning true if successful.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11612">item.cpp:11612</a></div></div>
<div class="ttc" id="aclassitem_html_a9b8415db80141e0ee2844d2b0f7204bb"><div class="ttname"><a href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb">item::brewing_results</a></div><div class="ttdeci">const std::map&lt; itype_id, int &gt; &amp; brewing_results() const</div><div class="ttdoc">The results of fermenting this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08507">item.cpp:8507</a></div></div>
<div class="ttc" id="aclassitem_html_a9b880f082ed473b329b45e78f21b7700"><div class="ttname"><a href="classitem.html#a9b880f082ed473b329b45e78f21b7700">item::get_total_weight_capacity</a></div><div class="ttdeci">units::mass get_total_weight_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11908">item.cpp:11908</a></div></div>
<div class="ttc" id="aclassitem_html_a9b88938f2a635283227bdc51a97a8988"><div class="ttname"><a href="classitem.html#a9b88938f2a635283227bdc51a97a8988">item::get_item_with</a></div><div class="ttdeci">item * get_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15155">item.cpp:15155</a></div></div>
<div class="ttc" id="aclassitem_html_a9be916871dac0d5b147c339efe4de194"><div class="ttname"><a href="classitem.html#a9be916871dac0d5b147c339efe4de194">item::handle_liquid_or_spill</a></div><div class="ttdeci">void handle_liquid_or_spill(Character &amp;guy, const item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10850">item.cpp:10850</a></div></div>
<div class="ttc" id="aclassitem_html_a9cfea3be1f920a3ae56a1dd1e426f7c7"><div class="ttname"><a href="classitem.html#a9cfea3be1f920a3ae56a1dd1e426f7c7">item::process_link</a></div><div class="ttdeci">bool process_link(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13578">item.cpp:13578</a></div></div>
<div class="ttc" id="aclassitem_html_a9e0411a5010e03c8d2670fe23eb25d0f"><div class="ttname"><a href="classitem.html#a9e0411a5010e03c8d2670fe23eb25d0f">item::is_battery</a></div><div class="ttdeci">bool is_battery() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09450">item.cpp:9450</a></div></div>
<div class="ttc" id="aclassitem_html_a9e073e3ce3fcc2e91bdaea5d603e798b"><div class="ttname"><a href="classitem.html#a9e073e3ce3fcc2e91bdaea5d603e798b">item::goes_bad</a></div><div class="ttdeci">bool goes_bad() const</div><div class="ttdoc">whether an item is perishable (can rot)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07818">item.cpp:7818</a></div></div>
<div class="ttc" id="aclassitem_html_a9e2ba6ad083ca4261daa0890d831d823"><div class="ttname"><a href="classitem.html#a9e2ba6ad083ca4261daa0890d831d823">item::get_defined_enchantments</a></div><div class="ttdeci">std::vector&lt; enchantment &gt; get_defined_enchantments() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10002">item.cpp:10002</a></div></div>
<div class="ttc" id="aclassitem_html_a9e2c24734b538e61e186fb6777b62c25"><div class="ttname"><a href="classitem.html#a9e2c24734b538e61e186fb6777b62c25">item::made_of_any</a></div><div class="ttdeci">bool made_of_any(const std::set&lt; material_id &gt; &amp;mat_idents) const</div><div class="ttdoc">Check we are made of at least one of a set (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09218">item.cpp:9218</a></div></div>
<div class="ttc" id="aclassitem_html_a9e4a83dab7a888fbbe93db9cbfaa563c"><div class="ttname"><a href="classitem.html#a9e4a83dab7a888fbbe93db9cbfaa563c">item::set_snippet</a></div><div class="ttdeci">void set_snippet(const snippet_id &amp;id)</div><div class="ttdoc">Set the snippet text (description) of this specific item, using the snippet library.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12342">item.cpp:12342</a></div></div>
<div class="ttc" id="aclassitem_html_a9f276bdd47b29bc1649dce5c64cbe433"><div class="ttname"><a href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">item::poison</a></div><div class="ttdeci">int poison</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03138">item.h:3138</a></div></div>
<div class="ttc" id="aclassitem_html_a9f29e8940a146016690f2776939a2980"><div class="ttname"><a href="classitem.html#a9f29e8940a146016690f2776939a2980">item::casings_handle</a></div><div class="ttdeci">void casings_handle(const std::function&lt; bool(item &amp;)&gt; &amp;func)</div><div class="ttdoc">Apply predicate to each contained spent casing removing it if predicate returns true.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11604">item.cpp:11604</a></div></div>
<div class="ttc" id="aclassitem_html_a9f4a009afa1b3adbe1136f0cb65c43ac"><div class="ttname"><a href="classitem.html#a9f4a009afa1b3adbe1136f0cb65c43ac">item::owner</a></div><div class="ttdeci">faction_id owner</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03192">item.h:3192</a></div></div>
<div class="ttc" id="aclassitem_html_a9fbebe808fb497b219858f7a61fa8419"><div class="ttname"><a href="classitem.html#a9fbebe808fb497b219858f7a61fa8419">item::on_wield</a></div><div class="ttdeci">void on_wield(Character &amp;you)</div><div class="ttdoc">Callback when a player starts wielding the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06570">item.cpp:6570</a></div></div>
<div class="ttc" id="aclassitem_html_a9fcc7813b424bb53b94be1988be66d54"><div class="ttname"><a href="classitem.html#a9fcc7813b424bb53b94be1988be66d54">item::is_engine</a></div><div class="ttdeci">bool is_engine() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09751">item.cpp:9751</a></div></div>
<div class="ttc" id="aclassitem_html_aa01faa951aa26aa368725a6fa065ccb5"><div class="ttname"><a href="classitem.html#aa01faa951aa26aa368725a6fa065ccb5">item::will_spill_if_unsealed</a></div><div class="ttdeci">bool will_spill_if_unsealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12558">item.cpp:12558</a></div></div>
<div class="ttc" id="aclassitem_html_aa037d122821f2c41b52b1e0b061fd4f2"><div class="ttname"><a href="classitem.html#aa037d122821f2c41b52b1e0b061fd4f2">item::energy</a></div><div class="ttdeci">units::energy energy</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03134">item.h:3134</a></div></div>
<div class="ttc" id="aclassitem_html_aa097a63b84424c4d19dd1e5581e4711d"><div class="ttname"><a href="classitem.html#aa097a63b84424c4d19dd1e5581e4711d">item::corpse</a></div><div class="ttdeci">const mtype * corpse</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03091">item.h:3091</a></div></div>
<div class="ttc" id="aclassitem_html_aa0acf524e808577447803cd549727617"><div class="ttname"><a href="classitem.html#aa0acf524e808577447803cd549727617">item::chip_resistance</a></div><div class="ttdeci">int chip_resistance(bool worst=false, const bodypart_id &amp;bp=bodypart_id()) const</div><div class="ttdoc">Returns resistance to being damaged by attack against the item itself.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08861">item.cpp:8861</a></div></div>
<div class="ttc" id="aclassitem_html_aa158562b82d463a57a0e282b6fedc2ee"><div class="ttname"><a href="classitem.html#aa158562b82d463a57a0e282b6fedc2ee">item::magazine_compatible</a></div><div class="ttdeci">std::set&lt; itype_id &gt; magazine_compatible() const</div><div class="ttdoc">Get compatible magazines (if any) for this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11202">item.cpp:11202</a></div></div>
<div class="ttc" id="aclassitem_html_aa17494d6cb1d70c05f43e99db0a63a39"><div class="ttname"><a href="classitem.html#aa17494d6cb1d70c05f43e99db0a63a39">item::get_relative_health</a></div><div class="ttdeci">float get_relative_health() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08905">item.cpp:8905</a></div></div>
<div class="ttc" id="aclassitem_html_aa1a2ecb3e9ebf95dc7fedac4c1de32b4"><div class="ttname"><a href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">item::gun_all_modes</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_mode &gt; gun_all_modes() const</div><div class="ttdoc">Get all possible modes for this gun inclusive of any attached gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11361">item.cpp:11361</a></div></div>
<div class="ttc" id="aclassitem_html_aa247d3fb0f92d9d0a719e6060ba26df0"><div class="ttname"><a href="classitem.html#aa247d3fb0f92d9d0a719e6060ba26df0">item::link_has_states</a></div><div class="ttdeci">bool link_has_states(link_state source, link_state target) const</div><div class="ttdoc">Returns true if both of the item's link connections match the specified states.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13330">item.cpp:13330</a></div></div>
<div class="ttc" id="aclassitem_html_aa24fc115fb6cd1124efec30970cfcd9b"><div class="ttname"><a href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">item::erase_var</a></div><div class="ttdeci">void erase_var(const std::string &amp;name)</div><div class="ttdoc">Erase the value of the given variable.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01933">item.cpp:1933</a></div></div>
<div class="ttc" id="aclassitem_html_aa25047563db389e8372f4f40ef7ac965"><div class="ttname"><a href="classitem.html#aa25047563db389e8372f4f40ef7ac965">item::is_emissive</a></div><div class="ttdeci">bool is_emissive() const</div><div class="ttdoc">Whether the item emits any light at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09943">item.cpp:9943</a></div></div>
<div class="ttc" id="aclassitem_html_aa2f8dc7ce32d941473ec949d809ae328"><div class="ttname"><a href="classitem.html#aa2f8dc7ce32d941473ec949d809ae328">item::is_melee</a></div><div class="ttdeci">bool is_melee() const</div><div class="ttdoc">Is this item an effective melee weapon for any damage type?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09586">item.cpp:9586</a></div></div>
<div class="ttc" id="aclassitem_html_aa31ffbae3561dd20a3a60e541f6fd02e"><div class="ttname"><a href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">item::ammo_unset</a></div><div class="ttdeci">item &amp; ammo_unset()</div><div class="ttdoc">Filter removing all ammo from this instance If the item is neither a tool, gun nor magazine is a no-o...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00837">item.cpp:837</a></div></div>
<div class="ttc" id="aclassitem_html_aa344ad5d3082d7a56b1c902fbafb6347"><div class="ttname"><a href="classitem.html#aa344ad5d3082d7a56b1c902fbafb6347">item::is_medication</a></div><div class="ttdeci">bool is_medication() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09489">item.cpp:9489</a></div></div>
<div class="ttc" id="aclassitem_html_aa370bf267d606ed6098dc9d1c518ebf5"><div class="ttname"><a href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">item::get_covered_body_parts</a></div><div class="ttdeci">body_part_set get_covered_body_parts() const</div><div class="ttdoc">Bitset of all covered body parts.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01031">item.cpp:1031</a></div></div>
<div class="ttc" id="aclassitem_html_aa4529b4c18a10ffd5a1f111536ad879b"><div class="ttname"><a href="classitem.html#aa4529b4c18a10ffd5a1f111536ad879b">item::unset_flags</a></div><div class="ttdeci">void unset_flags()</div><div class="ttdoc">Removes all item specific flags.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07552">item.cpp:7552</a></div></div>
<div class="ttc" id="aclassitem_html_aa475db2839de54a872f47b7c238e214a"><div class="ttname"><a href="classitem.html#aa475db2839de54a872f47b7c238e214a">item::snip_id</a></div><div class="ttdeci">snippet_id snip_id</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03140">item.h:3140</a></div></div>
<div class="ttc" id="aclassitem_html_aa4da95aa8718d73d04b241604c061098"><div class="ttname"><a href="classitem.html#aa4da95aa8718d73d04b241604c061098">item::get_available_recipes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; const recipe *, int &gt; &gt; get_available_recipes(const Character &amp;u) const</div><div class="ttdoc">Enumerates recipes available from this book and the skill level required to use them.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10313">item.cpp:10313</a></div></div>
<div class="ttc" id="aclassitem_html_aa51b9b2950e9ea68811bffb5635911c6"><div class="ttname"><a href="classitem.html#aa51b9b2950e9ea68811bffb5635911c6">item::set_owner</a></div><div class="ttdeci">void set_owner(const faction_id &amp;new_owner)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02178">item.cpp:2178</a></div></div>
<div class="ttc" id="aclassitem_html_aa5db17a55d827f446731edccd2815cfd"><div class="ttname"><a href="classitem.html#aa5db17a55d827f446731edccd2815cfd">item::cached_relative_encumbrance</a></div><div class="ttdeci">std::optional&lt; float &gt; cached_relative_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03198">item.h:3198</a></div></div>
<div class="ttc" id="aclassitem_html_aa712e8965a989b46eecab8ab19cd6e62"><div class="ttname"><a href="classitem.html#aa712e8965a989b46eecab8ab19cd6e62">item::damage_type_can_damage_items</a></div><div class="ttdeci">bool damage_type_can_damage_items(const damage_type_id &amp;dmg_type) const</div><div class="ttdoc">Helper function to check whether a damage_type can damage items for forward-declared damage_type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08655">item.cpp:8655</a></div></div>
<div class="ttc" id="aclassitem_html_aa75b056a2af85e5706c7629d1bbbaf06"><div class="ttname"><a href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">item::remaining_ammo_capacity</a></div><div class="ttdeci">int remaining_ammo_capacity() const</div><div class="ttdoc">how much more ammo can fit into this item if this item is not loaded, gives remaining capacity of its...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10787">item.cpp:10787</a></div></div>
<div class="ttc" id="aclassitem_html_aa764d6c0cfef8050a689291050706f22"><div class="ttname"><a href="classitem.html#aa764d6c0cfef8050a689291050706f22">item::will_explode_in_fire</a></div><div class="ttdeci">bool will_explode_in_fire() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12447">item.cpp:12447</a></div></div>
<div class="ttc" id="aclassitem_html_aa7e45a18f173ca31f0c0ba31f3397854"><div class="ttname"><a href="classitem.html#aa7e45a18f173ca31f0c0ba31f3397854">item::get_warmth</a></div><div class="ttdeci">int get_warmth() const</div><div class="ttdoc">Returns the warmth value that this item has when worn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08446">item.cpp:8446</a></div></div>
<div class="ttc" id="aclassitem_html_aa7e9319c5779e2e1c550158ee8a2cc98"><div class="ttname"><a href="classitem.html#aa7e9319c5779e2e1c550158ee8a2cc98">item::magazine_integral</a></div><div class="ttdeci">bool magazine_integral() const</div><div class="ttdoc">Can item load ammo like a magazine (has magazine pocket)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11175">item.cpp:11175</a></div></div>
<div class="ttc" id="aclassitem_html_aa7f4a67b2a035ea80827211cda4cb590"><div class="ttname"><a href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">item::countdown_point</a></div><div class="ttdeci">time_point countdown_point</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03145">item.h:3145</a></div></div>
<div class="ttc" id="aclassitem_html_aa8f260a5078a26c0bbd1f1f4fd184721"><div class="ttname"><a href="classitem.html#aa8f260a5078a26c0bbd1f1f4fd184721">item::properties_info</a></div><div class="ttdeci">void properties_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05686">item.cpp:5686</a></div></div>
<div class="ttc" id="aclassitem_html_aa92d94eef572e6a887312fef2c74c271"><div class="ttname"><a href="classitem.html#aa92d94eef572e6a887312fef2c74c271">item::allows_speedloader</a></div><div class="ttdeci">bool allows_speedloader(const itype_id &amp;speedloader_id) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09882">item.cpp:9882</a></div></div>
<div class="ttc" id="aclassitem_html_aa950eb4cd9e7464f646d03d7d3988d31"><div class="ttname"><a href="classitem.html#aa950eb4cd9e7464f646d03d7d3988d31">item::degradation_</a></div><div class="ttdeci">int degradation_</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03196">item.h:3196</a></div></div>
<div class="ttc" id="aclassitem_html_aaaa8e9d52bfe10d10fa4d44c1d2fdc52"><div class="ttname"><a href="classitem.html#aaaa8e9d52bfe10d10fa4d44c1d2fdc52">item::combine</a></div><div class="ttdeci">bool combine(const item &amp;rhs)</div><div class="ttdoc">combines two items together if possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01397">item.cpp:1397</a></div></div>
<div class="ttc" id="aclassitem_html_aaaf3784eda060adabe524a54cc873e68"><div class="ttname"><a href="classitem.html#aaaf3784eda060adabe524a54cc873e68">item::is_map</a></div><div class="ttdeci">bool is_map() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09643">item.cpp:9643</a></div></div>
<div class="ttc" id="aclassitem_html_aab4f4feeb64f169f408c24d03e0ce61f"><div class="ttname"><a href="classitem.html#aab4f4feeb64f169f408c24d03e0ce61f">item::ammo_type</a></div><div class="ttdeci">ammotype ammo_type() const</div><div class="ttdoc">Ammo type of an ammo item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11073">item.cpp:11073</a></div></div>
<div class="ttc" id="aclassitem_html_aabbf0dcc1b21ab8934074ab718d4a15f"><div class="ttname"><a href="classitem.html#aabbf0dcc1b21ab8934074ab718d4a15f">item::mutations_from_wearing</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; mutations_from_wearing(const Character &amp;guy, bool removing=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13001">item.cpp:13001</a></div></div>
<div class="ttc" id="aclassitem_html_aad1afe56872327f37ee02011e3a5fb8b"><div class="ttname"><a href="classitem.html#aad1afe56872327f37ee02011e3a5fb8b">item::get_shelf_life</a></div><div class="ttdeci">time_duration get_shelf_life() const</div><div class="ttdoc">Get the shelf life of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07837">item.cpp:7837</a></div></div>
<div class="ttc" id="aclassitem_html_aad3353f629e527eb4b9f6c2f666f9e36"><div class="ttname"><a href="classitem.html#aad3353f629e527eb4b9f6c2f666f9e36">item::get_reload_time</a></div><div class="ttdeci">int get_reload_time() const</div><div class="ttdoc">Returns the reload time of the gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09410">item.cpp:9410</a></div></div>
<div class="ttc" id="aclassitem_html_aad45569fa1fdd99d602eabbbbca04f75"><div class="ttname"><a href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a></div><div class="ttdeci">bool is_food() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09480">item.cpp:9480</a></div></div>
<div class="ttc" id="aclassitem_html_aae7575192fd862f237fefaeeb76eedd0"><div class="ttname"><a href="classitem.html#aae7575192fd862f237fefaeeb76eedd0">item::melee_combat_info</a></div><div class="ttdeci">void melee_combat_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05445">item.cpp:5445</a></div></div>
<div class="ttc" id="aclassitem_html_aaf38b59b3f6c11e04845ae782a4ba2e1"><div class="ttname"><a href="classitem.html#aaf38b59b3f6c11e04845ae782a4ba2e1">item::use_relic</a></div><div class="ttdeci">bool use_relic(Character &amp;guy, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13040">item.cpp:13040</a></div></div>
<div class="ttc" id="aclassitem_html_aaf71f60580cd467a838a8e706e594751"><div class="ttname"><a href="classitem.html#aaf71f60580cd467a838a8e706e594751">item::get_gun_ups_drain</a></div><div class="ttdeci">units::energy get_gun_ups_drain() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14601">item.cpp:14601</a></div></div>
<div class="ttc" id="aclassitem_html_aaf85fbd7b94614b15b1b99511ef2a3aa"><div class="ttname"><a href="classitem.html#aaf85fbd7b94614b15b1b99511ef2a3aa">item::label</a></div><div class="ttdeci">std::string label(unsigned int quantity=0, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Returns label from &quot;item_label&quot; itemvar and quantity.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14622">item.cpp:14622</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassitem_html_aaff8311e14e6819e6b6c2e207037f292"><div class="ttname"><a href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">item::get_remaining_capacity_for_liquid</a></div><div class="ttdeci">int get_remaining_capacity_for_liquid(const item &amp;liquid, bool allow_bucket=false, std::string *err=nullptr) const</div><div class="ttdoc">How much more of this liquid (in charges) can be put in this container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11956">item.cpp:11956</a></div></div>
<div class="ttc" id="aclassitem_html_ab000493eba0ddea5a6d0e4e9587a5f83"><div class="ttname"><a href="classitem.html#ab000493eba0ddea5a6d0e4e9587a5f83">item::can_revive</a></div><div class="ttdeci">bool can_revive() const</div><div class="ttdoc">Whether this is a corpse that can be revived.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08524">item.cpp:8524</a></div></div>
<div class="ttc" id="aclassitem_html_ab00eaab576446da90f829d1ceae66c98"><div class="ttname"><a href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a></div><div class="ttdeci">bool is_seed() const</div><div class="ttdoc">Whether this is actually a seed, the seed functions won't be of much use for non-seeds.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14201">item.cpp:14201</a></div></div>
<div class="ttc" id="aclassitem_html_ab01829202610bd64d462189e825462b2"><div class="ttname"><a href="classitem.html#ab01829202610bd64d462189e825462b2">item::mark_chapter_as_read</a></div><div class="ttdeci">void mark_chapter_as_read(const Character &amp;u)</div><div class="ttdoc">Mark one chapter of the book as read by the given player.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10274">item.cpp:10274</a></div></div>
<div class="ttc" id="aclassitem_html_ab0233f37ce5dac9cced5474bdcaffba8"><div class="ttname"><a href="classitem.html#ab0233f37ce5dac9cced5474bdcaffba8">item::collapsed_volume_delta</a></div><div class="ttdeci">units::volume collapsed_volume_delta() const</div><div class="ttdoc">Volume to subtract when the item is collapsed or folded.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07273">item.cpp:7273</a></div></div>
<div class="ttc" id="aclassitem_html_ab07d96e30c441a84435972df842f4c77"><div class="ttname"><a href="classitem.html#ab07d96e30c441a84435972df842f4c77">item::ammo_default</a></div><div class="ttdeci">itype_id ammo_default(bool conversion=true) const</div><div class="ttdoc">Default ammo for the the item magazine pocket, if item has ammo_types().</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11081">item.cpp:11081</a></div></div>
<div class="ttc" id="aclassitem_html_ab0c2f8561a1e504f056e26ef5fae1135"><div class="ttname"><a href="classitem.html#ab0c2f8561a1e504f056e26ef5fae1135">item::get_nested_content_volume_recursive</a></div><div class="ttdeci">units::volume get_nested_content_volume_recursive(const std::map&lt; const item *, int &gt; &amp;without) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14917">item.cpp:14917</a></div></div>
<div class="ttc" id="aclassitem_html_ab0d353c3b6df035982eab3dc22d0b196"><div class="ttname"><a href="classitem.html#ab0d353c3b6df035982eab3dc22d0b196">item::get_old_owner</a></div><div class="ttdeci">faction_id get_old_owner() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02201">item.cpp:2201</a></div></div>
<div class="ttc" id="aclassitem_html_ab175656b58311be0f2cc036bf21b0c69"><div class="ttname"><a href="classitem.html#ab175656b58311be0f2cc036bf21b0c69">item::use_charges</a></div><div class="ttdeci">bool use_charges(const itype_id &amp;what, int &amp;qty, std::list&lt; item &gt; &amp;used, const tripoint &amp;pos, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, Character *carrier=nullptr, bool in_tools=false)</div><div class="ttdoc">Consumes specified charges (or fewer) from this and any contained items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12269">item.cpp:12269</a></div></div>
<div class="ttc" id="aclassitem_html_ab180dbb50ec9d55570a1b1de1a2ce126"><div class="ttname"><a href="classitem.html#ab180dbb50ec9d55570a1b1de1a2ce126">item::is_silent</a></div><div class="ttdeci">bool is_silent() const</div><div class="ttdoc">Whether this is a (nearly) silent gun (a tiny bit of sound is allowed).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09430">item.cpp:9430</a></div></div>
<div class="ttc" id="aclassitem_html_ab21800e6d065dc9649a86d586e879912"><div class="ttname"><a href="classitem.html#ab21800e6d065dc9649a86d586e879912">item::can_link_up</a></div><div class="ttdeci">bool can_link_up() const</div><div class="ttdoc">Returns true if the item is/has a cable that can link up to other things. Should usually be called be...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13319">item.cpp:13319</a></div></div>
<div class="ttc" id="aclassitem_html_ab22fc9a4e0f9c6f5569b93e00deccfac"><div class="ttname"><a href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a></div><div class="ttdeci">item * magazine_current()</div><div class="ttdoc">Currently loaded magazine (if any)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11207">item.cpp:11207</a></div></div>
<div class="ttc" id="aclassitem_html_ab2e09f46f2a7c4d7278bbe98fa679cbf"><div class="ttname"><a href="classitem.html#ab2e09f46f2a7c4d7278bbe98fa679cbf">item::armor_made_of</a></div><div class="ttdeci">std::vector&lt; const part_material * &gt; armor_made_of(const bodypart_id &amp;bp) const</div><div class="ttdoc">The ids of the materials a specific portion is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09154">item.cpp:9154</a></div></div>
<div class="ttc" id="aclassitem_html_ab3a0a8aac3fe6347f06e4606b30e36d7"><div class="ttname"><a href="classitem.html#ab3a0a8aac3fe6347f06e4606b30e36d7">item::burn</a></div><div class="ttdeci">bool burn(fire_data &amp;frd)</div><div class="ttdoc">Burns the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11767">item.cpp:11767</a></div></div>
<div class="ttc" id="aclassitem_html_ab3c721f88b6fae5edd5a79f0da60b752"><div class="ttname"><a href="classitem.html#ab3c721f88b6fae5edd5a79f0da60b752">item::prefix_tags_cache</a></div><div class="ttdeci">cata::heap&lt; FlagsSetType &gt; prefix_tags_cache</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03087">item.h:3087</a></div></div>
<div class="ttc" id="aclassitem_html_ab40a3018f90c675715e80cc39384cde0"><div class="ttname"><a href="classitem.html#ab40a3018f90c675715e80cc39384cde0">item::effective_dps</a></div><div class="ttdeci">double effective_dps(const Character &amp;guy, Creature &amp;mon) const</div><div class="ttdoc">Calculate the item's effective damage per second past armor when wielded by a character against a mon...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02241">item.cpp:2241</a></div></div>
<div class="ttc" id="aclassitem_html_ab5544519ee3b45fbedf045dc14e9931f"><div class="ttname"><a href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">item::stacks_with</a></div><div class="ttdeci">stacking_info stacks_with(const item &amp;rhs, bool check_components=false, bool combine_liquid=false, bool check_cat=false, int depth=0, int maxdepth=2, bool precise=false) const</div><div class="ttdoc">Check wether each element of tname::segments stacks, ie.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01636">item.cpp:1636</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14681">item.cpp:14681</a></div></div>
<div class="ttc" id="aclassitem_html_ab5606d3baf832d8d2b7a531e4da5e899"><div class="ttname"><a href="classitem.html#ab5606d3baf832d8d2b7a531e4da5e899">item::get_safe_reference</a></div><div class="ttdeci">safe_reference&lt; item &gt; get_safe_reference()</div><div class="ttdoc">Return a pointer-like type that's automatically invalidated if this item is destroyed or assigned-to.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00423">item.cpp:423</a></div></div>
<div class="ttc" id="aclassitem_html_ab583f4735374c8cd0dcaff6417fee1cd"><div class="ttname"><a href="classitem.html#ab583f4735374c8cd0dcaff6417fee1cd">item::spill_open_pockets</a></div><div class="ttdeci">bool spill_open_pockets(Character &amp;guy, const item *avoid=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10230">item.cpp:10230</a></div></div>
<div class="ttc" id="aclassitem_html_ab59128bdf7df9143a5befbeeca60d133"><div class="ttname"><a href="classitem.html#ab59128bdf7df9143a5befbeeca60d133">item::has_sublocations</a></div><div class="ttdeci">bool has_sublocations() const</div><div class="ttdoc">returns true if the item has armor and if it has sub location coverage</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08368">item.cpp:8368</a></div></div>
<div class="ttc" id="aclassitem_html_ab602e7cf79da08819d5aff518890d405"><div class="ttname"><a href="classitem.html#ab602e7cf79da08819d5aff518890d405">item::fuel_energy</a></div><div class="ttdeci">units::energy fuel_energy() const</div><div class="ttdoc">Returns energy of single unit of this item as fuel for an engine.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09833">item.cpp:9833</a></div></div>
<div class="ttc" id="aclassitem_html_ab6ed09134cd52fef2ca7a56cbd32597e"><div class="ttname"><a href="classitem.html#ab6ed09134cd52fef2ca7a56cbd32597e">item::clear_automatic_whitelist</a></div><div class="ttdeci">void clear_automatic_whitelist()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01280">item.cpp:1280</a></div></div>
<div class="ttc" id="aclassitem_html_ab842b7c3aaa4d813575035be37cd3714"><div class="ttname"><a href="classitem.html#ab842b7c3aaa4d813575035be37cd3714">item::has_technique</a></div><div class="ttdeci">bool has_technique(const matec_id &amp;tech) const</div><div class="ttdoc">Whether the item supports a specific martial art technique (either through its type,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07755">item.cpp:7755</a></div></div>
<div class="ttc" id="aclassitem_html_ab8b0e2273c6555d01adbe242697940ab"><div class="ttname"><a href="classitem.html#ab8b0e2273c6555d01adbe242697940ab">item::can_combine</a></div><div class="ttdeci">bool can_combine(const item &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01383">item.cpp:1383</a></div></div>
<div class="ttc" id="aclassitem_html_ab9096a37a5f340f3ac5b6b564ec668cf"><div class="ttname"><a href="classitem.html#ab9096a37a5f340f3ac5b6b564ec668cf">item::overflow</a></div><div class="ttdeci">void overflow(const tripoint &amp;pos, const item_location &amp;loc=item_location::nowhere)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10235">item.cpp:10235</a></div></div>
<div class="ttc" id="aclassitem_html_aba52664635bd019bc5f853b1d184dc7e"><div class="ttname"><a href="classitem.html#aba52664635bd019bc5f853b1d184dc7e">item::set_cached_tool_selections</a></div><div class="ttdeci">void set_cached_tool_selections(const std::vector&lt; comp_selection&lt; tool_comp &gt;&gt; &amp;selections)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14791">item.cpp:14791</a></div></div>
<div class="ttc" id="aclassitem_html_abb750db4f0d09dba25b5ed37c58caf75"><div class="ttname"><a href="classitem.html#abb750db4f0d09dba25b5ed37c58caf75">item::num_item_stacks</a></div><div class="ttdeci">size_t num_item_stacks() const</div><div class="ttdoc">returns the number of items stacks in contents each item that is not count_by_charges,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15165">item.cpp:15165</a></div></div>
<div class="ttc" id="aclassitem_html_abb908918023b42cdf9137d154a76a25c"><div class="ttname"><a href="classitem.html#abb908918023b42cdf9137d154a76a25c">item::get_book_proficiency_bonuses</a></div><div class="ttdeci">book_proficiency_bonuses get_book_proficiency_bonuses() const</div><div class="ttdoc">translates the vector of proficiency bonuses into the container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10240">item.cpp:10240</a></div></div>
<div class="ttc" id="aclassitem_html_abbb3fb955cb5c911767c45325027bd63"><div class="ttname"><a href="classitem.html#abbb3fb955cb5c911767c45325027bd63">item::charge_linked_batteries</a></div><div class="ttdeci">int charge_linked_batteries(vehicle &amp;linked_veh, int turns_elapsed=1)</div><div class="ttdoc">Exchange power between an item's batteries and the vehicle/appliance it's linked to.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13761">item.cpp:13761</a></div></div>
<div class="ttc" id="aclassitem_html_abc7a9644453a2b167e19a4e988d12d22"><div class="ttname"><a href="classitem.html#abc7a9644453a2b167e19a4e988d12d22">item::set_mtype</a></div><div class="ttdeci">void set_mtype(const mtype *m)</div><div class="ttdoc">Sets the monster type associated with this item (corpse).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09568">item.cpp:9568</a></div></div>
<div class="ttc" id="aclassitem_html_abcf5c589c501dad415ff5ea3de4b1283"><div class="ttname"><a href="classitem.html#abcf5c589c501dad415ff5ea3de4b1283">item::ascii_art_info</a></div><div class="ttdeci">void ascii_art_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06113">item.cpp:6113</a></div></div>
<div class="ttc" id="aclassitem_html_abe25f0ce7aaa37bfe3bc70371f9f0f6c"><div class="ttname"><a href="classitem.html#abe25f0ce7aaa37bfe3bc70371f9f0f6c">item::rot_info</a></div><div class="ttdeci">void rot_info(const item *food_item, std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02837">item.cpp:2837</a></div></div>
<div class="ttc" id="aclassitem_html_abe2b7ef93e786d8c531815e4a8f92656"><div class="ttname"><a href="classitem.html#abe2b7ef93e786d8c531815e4a8f92656">item::process_blackpowder_fouling</a></div><div class="ttdeci">bool process_blackpowder_fouling(Character *carrier)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13956">item.cpp:13956</a></div></div>
<div class="ttc" id="aclassitem_html_abe2dffa94ebb86403ada7eadee18705f"><div class="ttname"><a href="classitem.html#abe2dffa94ebb86403ada7eadee18705f">item::get_freeze_point</a></div><div class="ttdeci">units::temperature get_freeze_point() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09560">item.cpp:9560</a></div></div>
<div class="ttc" id="aclassitem_html_abf446115b6197c91dd21139de6688d18"><div class="ttname"><a href="classitem.html#abf446115b6197c91dd21139de6688d18">item::convert</a></div><div class="ttdeci">item &amp; convert(const itype_id &amp;new_type, Character *carrier=nullptr)</div><div class="ttdoc">Filter converting this instance to another type preserving all other aspects.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00634">item.cpp:634</a></div></div>
<div class="ttc" id="aclassitem_html_abfb37d06bdad7717cbea765943e28da0"><div class="ttname"><a href="classitem.html#abfb37d06bdad7717cbea765943e28da0">item::is_bp_rigid_selective</a></div><div class="ttdeci">bool is_bp_rigid_selective(const T &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14361">item.cpp:14361</a></div></div>
<div class="ttc" id="aclassitem_html_abfb7ed1fed5f72c532192eb33e6c4962"><div class="ttname"><a href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14449">item.cpp:14449</a></div></div>
<div class="ttc" id="aclassitem_html_abfc3474737590a81c25c5c5d7154aaa2"><div class="ttname"><a href="classitem.html#abfc3474737590a81c25c5c5d7154aaa2">item::fill_with</a></div><div class="ttdeci">int fill_with(const item &amp;contained, int amount=INFINITE_CHARGES, bool unseal_pockets=false, bool allow_sealed=false, bool ignore_settings=false, bool into_bottom=false, Character *carrier=nullptr)</div><div class="ttdoc">Fill item with an item up to @amount number of items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12177">item.cpp:12177</a></div></div>
<div class="ttc" id="aclassitem_html_ac04309e9c82a908bc1612e21f316676a"><div class="ttname"><a href="classitem.html#ac04309e9c82a908bc1612e21f316676a">item::activation_consume</a></div><div class="ttdeci">int activation_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo to activate item qty times (if available) and return the amount of ammo that was consume...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10990">item.cpp:10990</a></div></div>
<div class="ttc" id="aclassitem_html_ac070089c03e5dc687bae39670edd5401"><div class="ttname"><a href="classitem.html#ac070089c03e5dc687bae39670edd5401">item::is_comestible</a></div><div class="ttdeci">bool is_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09475">item.cpp:9475</a></div></div>
<div class="ttc" id="aclassitem_html_ac11fd08d9b41ad301b7135906df8c33e"><div class="ttname"><a href="classitem.html#ac11fd08d9b41ad301b7135906df8c33e">item::gunmod_find_by_flag</a></div><div class="ttdeci">item * gunmod_find_by_flag(const flag_id &amp;flag)</div><div class="ttdoc">Get first attached gunmod with flag or nullptr if no such mod or item is not a gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11261">item.cpp:11261</a></div></div>
<div class="ttc" id="aclassitem_html_ac1b69026c16641b40c0bfa8d9d42fa7c"><div class="ttname"><a href="classitem.html#ac1b69026c16641b40c0bfa8d9d42fa7c">item::get_old_owner_name</a></div><div class="ttdeci">std::string get_old_owner_name() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02160">item.cpp:2160</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassitem_html_ac3802e76b128e7ee2982352e7ad72030"><div class="ttname"><a href="classitem.html#ac3802e76b128e7ee2982352e7ad72030">item::color</a></div><div class="ttdeci">nc_color color() const</div><div class="ttdoc">Returns the default color of the item (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07018">item.cpp:7018</a></div></div>
<div class="ttc" id="aclassitem_html_ac3898605336bf9c45ee3ce37d41d5ead"><div class="ttname"><a href="classitem.html#ac3898605336bf9c45ee3ce37d41d5ead">item::is_fresh</a></div><div class="ttdeci">bool is_fresh() const</div><div class="ttdoc">an item is fresh if it is capable of rotting but still has a long shelf life remaining</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01114">item.h:1114</a></div></div>
<div class="ttc" id="aclassitem_html_ac3cc4d74d020cbd36ae490cbe88f9152"><div class="ttname"><a href="classitem.html#ac3cc4d74d020cbd36ae490cbe88f9152">item::is_ammo</a></div><div class="ttdeci">bool is_ammo() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09470">item.cpp:9470</a></div></div>
<div class="ttc" id="aclassitem_html_ac46c94fbae3a31ba0e21f348875a3e74"><div class="ttname"><a href="classitem.html#ac46c94fbae3a31ba0e21f348875a3e74">item::armor_fit_info</a></div><div class="ttdeci">void armor_fit_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04388">item.cpp:4388</a></div></div>
<div class="ttc" id="aclassitem_html_ac4e99595add1c21e6294a22829174f0b"><div class="ttname"><a href="classitem.html#ac4e99595add1c21e6294a22829174f0b">item::armor_full_protection_info</a></div><div class="ttdeci">bool armor_full_protection_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts) const</div><div class="ttdoc">Returns true if protection info was printed as well.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03734">item.cpp:3734</a></div></div>
<div class="ttc" id="aclassitem_html_ac4f99d7d290f31e5da8c37f10ebc0d31"><div class="ttname"><a href="classitem.html#ac4f99d7d290f31e5da8c37f10ebc0d31">item::damage_</a></div><div class="ttdeci">int damage_</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03195">item.h:3195</a></div></div>
<div class="ttc" id="aclassitem_html_ac56f53ef32f24c048d9e893c9336ec95"><div class="ttname"><a href="classitem.html#ac56f53ef32f24c048d9e893c9336ec95">item::get_env_resist</a></div><div class="ttdeci">int get_env_resist(int override_base_resist=0) const</div><div class="ttdoc">Returns the resistance to environmental effects (islot_armor::env_resist) that this item provides whe...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08015">item.cpp:8015</a></div></div>
<div class="ttc" id="aclassitem_html_ac5ff6ac1e7657b7b8525140669744a28"><div class="ttname"><a href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item::item_counter</a></div><div class="ttdeci">int item_counter</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03142">item.h:3142</a></div></div>
<div class="ttc" id="aclassitem_html_ac64ed537e2c30e9909aa432018f7e25a"><div class="ttname"><a href="classitem.html#ac64ed537e2c30e9909aa432018f7e25a">item::set_degradation</a></div><div class="ttdeci">void set_degradation(int qty)</div><div class="ttdoc">Sets item's degradation constrained by [0 and max_damage] If item damage is lower it is raised up to ...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00910">item.cpp:910</a></div></div>
<div class="ttc" id="aclassitem_html_ac690c252311f4c021cb82c9487d35242"><div class="ttname"><a href="classitem.html#ac690c252311f4c021cb82c9487d35242">item::is_firearm</a></div><div class="ttdeci">bool is_firearm() const</div><div class="ttdoc">Does it require gunsmithing tools to repair.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09405">item.cpp:9405</a></div></div>
<div class="ttc" id="aclassitem_html_ac72213261395e0c525121ee6d2553a97"><div class="ttname"><a href="classitem.html#ac72213261395e0c525121ee6d2553a97">item::get_sizing</a></div><div class="ttdeci">sizing get_sizing(const Character &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02038">item.cpp:2038</a></div></div>
<div class="ttc" id="aclassitem_html_ac748827c6e5f8720ac68669108a7ba29"><div class="ttname"><a href="classitem.html#ac748827c6e5f8720ac68669108a7ba29">item::has_itype_variant</a></div><div class="ttdeci">bool has_itype_variant(bool check_option=true) const</div><div class="ttdoc">Does this item have a gun variant associated with it If check_option, the return of this is dependent...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09337">item.cpp:9337</a></div></div>
<div class="ttc" id="aclassitem_html_ac77c48d5e9c233b89f29a0aa9c68b9e7"><div class="ttname"><a href="classitem.html#ac77c48d5e9c233b89f29a0aa9c68b9e7">item::armor_info</a></div><div class="ttdeci">void armor_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04059">item.cpp:4059</a></div></div>
<div class="ttc" id="aclassitem_html_ac7c536dbf6f3c3e9e28015990a060e41"><div class="ttname"><a href="classitem.html#ac7c536dbf6f3c3e9e28015990a060e41">item::get_property_string</a></div><div class="ttdeci">std::string get_property_string(const std::string &amp;prop, const std::string &amp;def=&quot;&quot;) const</div><div class="ttdoc">Get typed property for item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07680">item.cpp:7680</a></div></div>
<div class="ttc" id="aclassitem_html_ac7dd765bb12db6e65022f21239987b36"><div class="ttname"><a href="classitem.html#ac7dd765bb12db6e65022f21239987b36">item::encumber_flags</a></div><div class="ttdeci">encumber_flags</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02231">item.h:2231</a></div></div>
<div class="ttc" id="aclassitem_html_ac7dd765bb12db6e65022f21239987b36a858e3134c711ff26c7fc1b99dbcd8607"><div class="ttname"><a href="classitem.html#ac7dd765bb12db6e65022f21239987b36a858e3134c711ff26c7fc1b99dbcd8607">item::encumber_flags::assume_full</a></div><div class="ttdeci">@ assume_full</div></div>
<div class="ttc" id="aclassitem_html_ac7dd765bb12db6e65022f21239987b36aba8ec6c1d4c689a9d653e1b9da324ce4"><div class="ttname"><a href="classitem.html#ac7dd765bb12db6e65022f21239987b36aba8ec6c1d4c689a9d653e1b9da324ce4">item::encumber_flags::assume_empty</a></div><div class="ttdeci">@ assume_empty</div></div>
<div class="ttc" id="aclassitem_html_ac7fc1e9e44759c1ae2dd5ef423fc5c1b"><div class="ttname"><a href="classitem.html#ac7fc1e9e44759c1ae2dd5ef423fc5c1b">item::is_tainted</a></div><div class="ttdeci">bool is_tainted() const</div><div class="ttdoc">Is item derived from a zombie?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14244">item.cpp:14244</a></div></div>
<div class="ttc" id="aclassitem_html_ac8356682e1760d4b4d4f62353eeb9ba9"><div class="ttname"><a href="classitem.html#ac8356682e1760d4b4d4f62353eeb9ba9">item::activate_thrown</a></div><div class="ttdeci">bool activate_thrown(const tripoint &amp;pos)</div><div class="ttdoc">Invoke use function on a thrown item that had &quot;ACT_ON_RANGED_HIT&quot; flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00696">item.cpp:696</a></div></div>
<div class="ttc" id="aclassitem_html_ac9288e8a4e4f02ba868cf6967a5bd488"><div class="ttname"><a href="classitem.html#ac9288e8a4e4f02ba868cf6967a5bd488">item::get_rot</a></div><div class="ttdeci">time_duration get_rot() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01138">item.h:1138</a></div></div>
<div class="ttc" id="aclassitem_html_ac9312acb1a0cd7c9b033d6df91b97a29"><div class="ttname"><a href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">item::get_proc_enchantments</a></div><div class="ttdeci">std::vector&lt; enchant_cache &gt; get_proc_enchantments() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09994">item.cpp:9994</a></div></div>
<div class="ttc" id="aclassitem_html_ac972bd94fc3a86b96499c34b8b1741a6"><div class="ttname"><a href="classitem.html#ac972bd94fc3a86b96499c34b8b1741a6">item::swap_side</a></div><div class="ttdeci">bool swap_side()</div><div class="ttdoc">Swap the side on which the item is worn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01191">item.cpp:1191</a></div></div>
<div class="ttc" id="aclassitem_html_ac988f5071585ba014e6f72a485c3f9cf"><div class="ttname"><a href="classitem.html#ac988f5071585ba014e6f72a485c3f9cf">item::gun_type</a></div><div class="ttdeci">gun_type_type gun_type() const</div><div class="ttdoc">Get the type of a ranged weapon (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10399">item.cpp:10399</a></div></div>
<div class="ttc" id="aclassitem_html_ac9c4e0958f88d199df077f8aeda254fc"><div class="ttname"><a href="classitem.html#ac9c4e0958f88d199df077f8aeda254fc">item::damage_melee</a></div><div class="ttdeci">int damage_melee(const damage_type_id &amp;dt) const</div><div class="ttdoc">Damage of given type caused when this item is used as melee weapon.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07452">item.cpp:7452</a></div></div>
<div class="ttc" id="aclassitem_html_ac9df48bb2d4404a70af9d2fc5e1fa1dd"><div class="ttname"><a href="classitem.html#ac9df48bb2d4404a70af9d2fc5e1fa1dd">item::is_corpse</a></div><div class="ttdeci">bool is_corpse() const</div><div class="ttdoc">Whether this is a corpse item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09526">item.cpp:9526</a></div></div>
<div class="ttc" id="aclassitem_html_acaaafe73d15db693a2ef330ac787321d"><div class="ttname"><a href="classitem.html#acaaafe73d15db693a2ef330ac787321d">item::already_used_by_player</a></div><div class="ttdeci">bool already_used_by_player(const Character &amp;p) const</div><div class="ttdoc">Check whether the item has been marked (by calling mark_as_used_by_player) as used by this specific p...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12518">item.cpp:12518</a></div></div>
<div class="ttc" id="aclassitem_html_acb2cc7e78ca9e1515b2e44a633d9f25c"><div class="ttname"><a href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">item::components</a></div><div class="ttdeci">item_components components</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03075">item.h:3075</a></div></div>
<div class="ttc" id="aclassitem_html_acb31dfc93d0de49315fdbbac504236df"><div class="ttname"><a href="classitem.html#acb31dfc93d0de49315fdbbac504236df">item::get_base_env_resist_w_filter</a></div><div class="ttdeci">int get_base_env_resist_w_filter() const</div><div class="ttdoc">Returns the base resistance to environmental effects if an item (for example a gas mask) requires a g...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08029">item.cpp:8029</a></div></div>
<div class="ttc" id="aclassitem_html_acb4c178eb7901e05c1a7306149f6610d"><div class="ttname"><a href="classitem.html#acb4c178eb7901e05c1a7306149f6610d">item::additional_encumbrance</a></div><div class="ttdeci">units::volume additional_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03208">item.h:3208</a></div></div>
<div class="ttc" id="aclassitem_html_acd759b167a7c80974842fac5eca8fcbf"><div class="ttname"><a href="classitem.html#acd759b167a7c80974842fac5eca8fcbf">item::is_same_temperature</a></div><div class="ttdeci">bool is_same_temperature(item const &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09974">item.cpp:9974</a></div></div>
<div class="ttc" id="aclassitem_html_acd78321ba4d5c09d39f1d58d20b68484"><div class="ttname"><a href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">item::gunmods</a></div><div class="ttdeci">std::vector&lt; item * &gt; gunmods()</div><div class="ttdoc">Returns all gunmods currently attached to this item (always empty if item not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11217">item.cpp:11217</a></div></div>
<div class="ttc" id="aclassitem_html_ace11ba657be810e5ee4cc2caeb8a0637"><div class="ttname"><a href="classitem.html#ace11ba657be810e5ee4cc2caeb8a0637">item::battery_info</a></div><div class="ttdeci">void battery_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04724">item.cpp:4724</a></div></div>
<div class="ttc" id="aclassitem_html_ace59d37f7711f9fbd823b43e8fa78ea9"><div class="ttname"><a href="classitem.html#ace59d37f7711f9fbd823b43e8fa78ea9">item::can_attach_as_pocket</a></div><div class="ttdeci">bool can_attach_as_pocket() const</div><div class="ttdoc">Returns true if the item can be attached with PALS straps.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14888">item.cpp:14888</a></div></div>
<div class="ttc" id="aclassitem_html_ace63931f931b85f18d5fc953a7b3fedf"><div class="ttname"><a href="classitem.html#ace63931f931b85f18d5fc953a7b3fedf">item::any_pockets_sealed</a></div><div class="ttdeci">bool any_pockets_sealed() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09662">item.cpp:9662</a></div></div>
<div class="ttc" id="aclassitem_html_acf89390a6191405cc59bc902cb3f1609"><div class="ttname"><a href="classitem.html#acf89390a6191405cc59bc902cb3f1609">item::has_relic_activation</a></div><div class="ttdeci">bool has_relic_activation() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09989">item.cpp:9989</a></div></div>
<div class="ttc" id="aclassitem_html_acf9b4242998c869e09a76406ffe0bb34"><div class="ttname"><a href="classitem.html#acf9b4242998c869e09a76406ffe0bb34">item::clear_vars</a></div><div class="ttdeci">void clear_vars()</div><div class="ttdoc">Removes all item variables.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01938">item.cpp:1938</a></div></div>
<div class="ttc" id="aclassitem_html_acfa81800391a5263b5d258cc5be1f346"><div class="ttname"><a href="classitem.html#acfa81800391a5263b5d258cc5be1f346">item::damage_armor_durability</a></div><div class="ttdeci">armor_status damage_armor_durability(damage_unit &amp;du, const bodypart_id &amp;bp)</div><div class="ttdoc">Damage related logic for armor items, wraps mod_damage with needed logic This version is for items wi...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08961">item.cpp:8961</a></div></div>
<div class="ttc" id="aclassitem_html_acfb5cbbf8bdda521d5c8c8b667ae478d"><div class="ttname"><a href="classitem.html#acfb5cbbf8bdda521d5c8c8b667ae478d">item::debug_info</a></div><div class="ttdeci">void debug_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02517">item.cpp:2517</a></div></div>
<div class="ttc" id="aclassitem_html_ad01c7f66719cc660c50d2d28086073ad"><div class="ttname"><a href="classitem.html#ad01c7f66719cc660c50d2d28086073ad">item::anchor</a></div><div class="ttdeci">lazy&lt; safe_reference_anchor &gt; anchor</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03089">item.h:3089</a></div></div>
<div class="ttc" id="aclassitem_html_ad1862bc5d5995e30dd224fab31d61f77"><div class="ttname"><a href="classitem.html#ad1862bc5d5995e30dd224fab31d61f77">item::has_clothing_mod</a></div><div class="ttdeci">bool has_clothing_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14812">item.cpp:14812</a></div></div>
<div class="ttc" id="aclassitem_html_ad1a1b9e061715c122074e2df204d9bbc"><div class="ttname"><a href="classitem.html#ad1a1b9e061715c122074e2df204d9bbc">item::ammo_info</a></div><div class="ttdeci">void ammo_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02949">item.cpp:2949</a></div></div>
<div class="ttc" id="aclassitem_html_ad340c283789ac6bd8578a16e8343d893"><div class="ttname"><a href="classitem.html#ad340c283789ac6bd8578a16e8343d893">item::is_dangerous</a></div><div class="ttdeci">bool is_dangerous() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14228">item.cpp:14228</a></div></div>
<div class="ttc" id="aclassitem_html_ad345f0faefeda773220f01b75acb9f28"><div class="ttname"><a href="classitem.html#ad345f0faefeda773220f01b75acb9f28">item::get_free_mod_locations</a></div><div class="ttdeci">int get_free_mod_locations(const gunmod_location &amp;location) const</div><div class="ttdoc">Number of mods that can still be installed into the given mod location, for non-guns it always return...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06268">item.cpp:6268</a></div></div>
<div class="ttc" id="aclassitem_html_ad4e3984fc584c1fa9a77b6cee933d355"><div class="ttname"><a href="classitem.html#ad4e3984fc584c1fa9a77b6cee933d355">item::basic_info</a></div><div class="ttdeci">void basic_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02387">item.cpp:2387</a></div></div>
<div class="ttc" id="aclassitem_html_ad569a7656fe40a87b977c9a934af6219"><div class="ttname"><a href="classitem.html#ad569a7656fe40a87b977c9a934af6219">item::get_recursive_disassemble_moves</a></div><div class="ttdeci">int get_recursive_disassemble_moves(const Character &amp;guy) const</div><div class="ttdoc">Compute the number of moves needed to disassemble this item and its components.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14924">item.cpp:14924</a></div></div>
<div class="ttc" id="aclassitem_html_ad56b5a2556cb36570017c62c30515f18"><div class="ttname"><a href="classitem.html#ad56b5a2556cb36570017c62c30515f18">item::degradation_symbol</a></div><div class="ttdeci">std::string degradation_symbol() const</div><div class="ttdoc">Returns a symbol indicating the current degradation of the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06783">item.cpp:6783</a></div></div>
<div class="ttc" id="aclassitem_html_ad590c0adef8b5b3ad024bf4c67900505"><div class="ttname"><a href="classitem.html#ad590c0adef8b5b3ad024bf4c67900505">item::itype_variant</a></div><div class="ttdeci">const itype_variant_data &amp; itype_variant() const</div><div class="ttdoc">The gun variant associated with this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09356">item.cpp:9356</a></div></div>
<div class="ttc" id="aclassitem_html_ad6cdbdd7e8295f3a6e802adffcd665ae"><div class="ttname"><a href="classitem.html#ad6cdbdd7e8295f3a6e802adffcd665ae">item::set_relative_rot</a></div><div class="ttdeci">void set_relative_rot(double val)</div><div class="ttdoc">Set current item rot relative to shelf life (no-op if item does not spoil)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07857">item.cpp:7857</a></div></div>
<div class="ttc" id="aclassitem_html_ad8d4ac9512f65051e505e3359b5a6f2c"><div class="ttname"><a href="classitem.html#ad8d4ac9512f65051e505e3359b5a6f2c">item::is_fuel</a></div><div class="ttdeci">bool is_fuel() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09761">item.cpp:9761</a></div></div>
<div class="ttc" id="aclassitem_html_ad9aa2c661ddeda4247546528984a1d3d"><div class="ttname"><a href="classitem.html#ad9aa2c661ddeda4247546528984a1d3d">item::has_label</a></div><div class="ttdeci">bool has_label() const</div><div class="ttdoc">Returns true if item has &quot;item_label&quot; itemvar.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14617">item.cpp:14617</a></div></div>
<div class="ttc" id="aclassitem_html_ada39e6de0077216777a56e6d237b7e0b"><div class="ttname"><a href="classitem.html#ada39e6de0077216777a56e6d237b7e0b">item::wind_resist</a></div><div class="ttdeci">int wind_resist() const</div><div class="ttdoc">How resistant clothes made of this material are to wind (0-100)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09797">item.cpp:9797</a></div></div>
<div class="ttc" id="aclassitem_html_adaaa3ece39eb40637371659dad8550e3"><div class="ttname"><a href="classitem.html#adaaa3ece39eb40637371659dad8550e3">item::faults_potential</a></div><div class="ttdeci">std::set&lt; fault_id &gt; faults_potential() const</div><div class="ttdoc">What faults can potentially occur with this item?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09821">item.cpp:9821</a></div></div>
<div class="ttc" id="aclassitem_html_adaaab23ac975ab0fbe52607cfa8ffe54"><div class="ttname"><a href="classitem.html#adaaab23ac975ab0fbe52607cfa8ffe54">item::on_wear</a></div><div class="ttdeci">void on_wear(Character &amp;p)</div><div class="ttdoc">Callback when a character starts wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06479">item.cpp:6479</a></div></div>
<div class="ttc" id="aclassitem_html_adb2689178dd21563b3536a3ed0e83336"><div class="ttname"><a href="classitem.html#adb2689178dd21563b3536a3ed0e83336">item::damage_level</a></div><div class="ttdeci">int damage_level(bool precise=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00876">item.cpp:876</a></div></div>
<div class="ttc" id="aclassitem_html_adb2ea39327f1a8da37740b4bfb171a5d"><div class="ttname"><a href="classitem.html#adb2ea39327f1a8da37740b4bfb171a5d">item::current_reach_range</a></div><div class="ttdeci">int current_reach_range(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07532">item.cpp:7532</a></div></div>
<div class="ttc" id="aclassitem_html_adbfe451148cddb54b8b4443bf85fe670"><div class="ttname"><a href="classitem.html#adbfe451148cddb54b8b4443bf85fe670">item::update_clothing_mod_val</a></div><div class="ttdeci">void update_clothing_mod_val()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14842">item.cpp:14842</a></div></div>
<div class="ttc" id="aclassitem_html_adc87bb1fb833c2beced16a2800c8215a"><div class="ttname"><a href="classitem.html#adc87bb1fb833c2beced16a2800c8215a">item::use_amount</a></div><div class="ttdeci">bool use_amount(const itype_id &amp;it, int &amp;quantity, std::list&lt; item &gt; &amp;used, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdoc">Consume a specific amount of items of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12010">item.cpp:12010</a></div></div>
<div class="ttc" id="aclassitem_html_adcc19485b2436da770a7b1dc46cb756a"><div class="ttname"><a href="classitem.html#adcc19485b2436da770a7b1dc46cb756a">item::damage_adjusted_armor_resist</a></div><div class="ttdeci">float damage_adjusted_armor_resist(float value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00897">item.cpp:897</a></div></div>
<div class="ttc" id="aclassitem_html_adcdeb47ea7d6d69bf557e9195896e5f5"><div class="ttname"><a href="classitem.html#adcdeb47ea7d6d69bf557e9195896e5f5">item::get_total_holsters</a></div><div class="ttdeci">int get_total_holsters() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11935">item.cpp:11935</a></div></div>
<div class="ttc" id="aclassitem_html_adce43f2490a85e2dc212a26ce5ded4fc"><div class="ttname"><a href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">item::is_magazine</a></div><div class="ttdeci">bool is_magazine() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09445">item.cpp:9445</a></div></div>
<div class="ttc" id="aclassitem_html_adce9200620918ac031843f985f6cbfb7"><div class="ttname"><a href="classitem.html#adce9200620918ac031843f985f6cbfb7">item::components_to_string</a></div><div class="ttdeci">std::string components_to_string() const</div><div class="ttdoc">List of all components in printable form, empty if this item has no components.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12563">item.cpp:12563</a></div></div>
<div class="ttc" id="aclassitem_html_add69e68717a184135498a334e4d4e9f9"><div class="ttname"><a href="classitem.html#add69e68717a184135498a334e4d4e9f9">item::average_dps</a></div><div class="ttdeci">double average_dps(const Character &amp;guy) const</div><div class="ttdoc">return the average dps of the weapon against evaluation monsters</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02377">item.cpp:2377</a></div></div>
<div class="ttc" id="aclassitem_html_adeee506a678ad91ac6c07e77296e7325"><div class="ttname"><a href="classitem.html#adeee506a678ad91ac6c07e77296e7325">item::get_covered_sub_body_parts</a></div><div class="ttdeci">std::vector&lt; sub_bodypart_id &gt; get_covered_sub_body_parts() const</div><div class="ttdoc">returns a vector of all the sub_body_parts of this item</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01017">item.cpp:1017</a></div></div>
<div class="ttc" id="aclassitem_html_adf662fb946f6a1188fe5e340ff80a95a"><div class="ttname"><a href="classitem.html#adf662fb946f6a1188fe5e340ff80a95a">item::on_pickup</a></div><div class="ttdeci">void on_pickup(Character &amp;p)</div><div class="ttdoc">Callback when a player starts carrying the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06651">item.cpp:6651</a></div></div>
<div class="ttc" id="aclassitem_html_adfb5ddb3d50f317c79eb7a1a26a63905"><div class="ttname"><a href="classitem.html#adfb5ddb3d50f317c79eb7a1a26a63905">item::get_relative_rot</a></div><div class="ttdeci">double get_relative_rot() const</div><div class="ttdoc">Get rot value relative to shelf life (or 0 if item does not spoil)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07849">item.cpp:7849</a></div></div>
<div class="ttc" id="aclassitem_html_adfd6f9946d4895a6ef2190e07c2486a3"><div class="ttname"><a href="classitem.html#adfd6f9946d4895a6ef2190e07c2486a3">item::gun_dispersion</a></div><div class="ttdeci">int gun_dispersion(bool with_ammo=true, bool with_scaling=true) const</div><div class="ttdoc">Summed dispersion of a gun, including values from mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10455">item.cpp:10455</a></div></div>
<div class="ttc" id="aclassitem_html_adfda21d467ccf51697ef53023d31e3cf"><div class="ttname"><a href="classitem.html#adfda21d467ccf51697ef53023d31e3cf">item::process_wet</a></div><div class="ttdeci">bool process_wet(Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13899">item.cpp:13899</a></div></div>
<div class="ttc" id="aclassitem_html_ae05d298b2cf91e4c12d5beca5f38c67f"><div class="ttname"><a href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">item::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15135">item.cpp:15135</a></div></div>
<div class="ttc" id="aclassitem_html_ae0863124133813cad747398f561c8048"><div class="ttname"><a href="classitem.html#ae0863124133813cad747398f561c8048">item::book_info</a></div><div class="ttdeci">void book_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04540">item.cpp:4540</a></div></div>
<div class="ttc" id="aclassitem_html_ae1413304deaa3b421aa4b4f252ea93d3"><div class="ttname"><a href="classitem.html#ae1413304deaa3b421aa4b4f252ea93d3">item::get_pet_armor_bodytype</a></div><div class="ttdeci">bodytype_id get_pet_armor_bodytype() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08497">item.cpp:8497</a></div></div>
<div class="ttc" id="aclassitem_html_ae18b1e273926e9acfd5792c98f153ea9"><div class="ttname"><a href="classitem.html#ae18b1e273926e9acfd5792c98f153ea9">item::covers</a></div><div class="ttdeci">bool covers(const bodypart_id &amp;bp) const</div><div class="ttdoc">Whether this item (when worn) covers the given body part.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00974">item.cpp:974</a></div></div>
<div class="ttc" id="aclassitem_html_ae1bbacaa88454c4476b531b217bfa3e9"><div class="ttname"><a href="classitem.html#ae1bbacaa88454c4476b531b217bfa3e9">item::display_money</a></div><div class="ttdeci">std::string display_money(unsigned int quantity, unsigned int total, const std::optional&lt; unsigned int &gt; &amp;selected=std::nullopt) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06834">item.cpp:6834</a></div></div>
<div class="ttc" id="aclassitem_html_ae1f6a127dcee627cc2758d8d30575733"><div class="ttname"><a href="classitem.html#ae1f6a127dcee627cc2758d8d30575733">item::has_rotten_away</a></div><div class="ttdeci">bool has_rotten_away() const</div><div class="ttdoc">Whether the item has enough rot that it should get removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12492">item.cpp:12492</a></div></div>
<div class="ttc" id="aclassitem_html_ae2393a9b4e31f34c14c0f3496ef938a4"><div class="ttname"><a href="classitem.html#ae2393a9b4e31f34c14c0f3496ef938a4">item::final_info</a></div><div class="ttdeci">void final_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05796">item.cpp:5796</a></div></div>
<div class="ttc" id="aclassitem_html_ae30c1b0547a59fb9bb199ed36fb49b21"><div class="ttname"><a href="classitem.html#ae30c1b0547a59fb9bb199ed36fb49b21">item::relic_data</a></div><div class="ttdeci">cata::value_ptr&lt; relic &gt; relic_data</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03132">item.h:3132</a></div></div>
<div class="ttc" id="aclassitem_html_ae34a4e6720079fcb1ec1814f046422e8"><div class="ttname"><a href="classitem.html#ae34a4e6720079fcb1ec1814f046422e8">item::can_repair_with</a></div><div class="ttdeci">bool can_repair_with(const material_id &amp;mat_ident) const</div><div class="ttdoc">Check we can repair with this material (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09254">item.cpp:9254</a></div></div>
<div class="ttc" id="aclassitem_html_ae35fc5671490285b91dab728b93ed938"><div class="ttname"><a href="classitem.html#ae35fc5671490285b91dab728b93ed938">item::is_rigid</a></div><div class="ttdeci">bool is_rigid() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14263">item.cpp:14263</a></div></div>
<div class="ttc" id="aclassitem_html_ae3e8157a5be5998c70229adecfea520e"><div class="ttname"><a href="classitem.html#ae3e8157a5be5998c70229adecfea520e">item::last_temp_check</a></div><div class="ttdeci">time_point last_temp_check</div><div class="ttdoc">the last time the temperature was updated for this item</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03181">item.h:3181</a></div></div>
<div class="ttc" id="aclassitem_html_ae403069b5762475b37df693ad99f567f"><div class="ttname"><a href="classitem.html#ae403069b5762475b37df693ad99f567f">item::can_contain_partial</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain_partial(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10180">item.cpp:10180</a></div></div>
<div class="ttc" id="aclassitem_html_ae47123eefc3d9d809658ea474091c8d7"><div class="ttname"><a href="classitem.html#ae47123eefc3d9d809658ea474091c8d7">item::update_modified_pockets</a></div><div class="ttdeci">void update_modified_pockets()</div><div class="ttdoc">Updates the pockets of this item to be correct based on the mods that are installed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01292">item.cpp:1292</a></div></div>
<div class="ttc" id="aclassitem_html_ae490218700ff9658235247b46ba75a56"><div class="ttname"><a href="classitem.html#ae490218700ff9658235247b46ba75a56">item::get_owner_name</a></div><div class="ttdeci">std::string get_owner_name() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02169">item.cpp:2169</a></div></div>
<div class="ttc" id="aclassitem_html_ae4b50776f23f2cfa6cee8a8141da5b7c"><div class="ttname"><a href="classitem.html#ae4b50776f23f2cfa6cee8a8141da5b7c">item::check_for_free_space</a></div><div class="ttdeci">units::volume check_for_free_space() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14855">item.cpp:14855</a></div></div>
<div class="ttc" id="aclassitem_html_ae66a5aed603c71426e451799110fbee3"><div class="ttname"><a href="classitem.html#ae66a5aed603c71426e451799110fbee3">item::iterate_covered_sub_body_parts_internal</a></div><div class="ttdeci">void iterate_covered_sub_body_parts_internal(side s, const std::function&lt; void(const sub_bodypart_str_id &amp;)&gt; &amp;cb) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01097">item.cpp:1097</a></div></div>
<div class="ttc" id="aclassitem_html_ae6a1ca40954db829643f80f8f204f612"><div class="ttname"><a href="classitem.html#ae6a1ca40954db829643f80f8f204f612">item::reset_temp_check</a></div><div class="ttdeci">void reset_temp_check()</div><div class="ttdoc">reset the last_temp_check used when crafting new items and the like</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12996">item.cpp:12996</a></div></div>
<div class="ttc" id="aclassitem_html_ae6e0d727dd759f898591df93162b8614"><div class="ttname"><a href="classitem.html#ae6e0d727dd759f898591df93162b8614">item::corpse_name</a></div><div class="ttdeci">std::string corpse_name</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03092">item.h:3092</a></div></div>
<div class="ttc" id="aclassitem_html_ae70dfaf9ac8fb72e1656e8ff3d730e91"><div class="ttname"><a href="classitem.html#ae70dfaf9ac8fb72e1656e8ff3d730e91">item::getlight_emit</a></div><div class="ttdeci">int getlight_emit() const</div><div class="ttdoc">How much light (see lightmap.cpp) the item emits (it's assumed to be circular).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11877">item.cpp:11877</a></div></div>
<div class="ttc" id="aclassitem_html_ae7552957ca969eb688de73e6d944069b"><div class="ttname"><a href="classitem.html#ae7552957ca969eb688de73e6d944069b">item::update_link_traits</a></div><div class="ttdeci">void update_link_traits()</div><div class="ttdoc">Updates all parts of the item's link_data that don't have to do with its connection.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13521">item.cpp:13521</a></div></div>
<div class="ttc" id="aclassitem_html_ae79cfef3dd3698b98478cfc08ba20a01"><div class="ttname"><a href="classitem.html#ae79cfef3dd3698b98478cfc08ba20a01">item::detonate</a></div><div class="ttdeci">bool detonate(const tripoint &amp;p, std::vector&lt; item &gt; &amp;drops)</div><div class="ttdoc">Detonates the item and adds remains (if any) to drops.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12460">item.cpp:12460</a></div></div>
<div class="ttc" id="aclassitem_html_ae7d60ea4eb674f50417aa912559b5238"><div class="ttname"><a href="classitem.html#ae7d60ea4eb674f50417aa912559b5238">item::get_latent_heat</a></div><div class="ttdeci">float get_latent_heat() const</div><div class="ttdoc">Returns latent heat of the item (J/g)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09552">item.cpp:9552</a></div></div>
<div class="ttc" id="aclassitem_html_ae8a58c6fe3c80cded11d6f3ccfa548a3"><div class="ttname"><a href="classitem.html#ae8a58c6fe3c80cded11d6f3ccfa548a3">item::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdoc">How much damage has the item sustained?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00858">item.cpp:858</a></div></div>
<div class="ttc" id="aclassitem_html_ae92e7a0bc79eedb9b113fd7cbda37b57"><div class="ttname"><a href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">item::first_ammo</a></div><div class="ttdeci">item &amp; first_ammo()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10840">item.cpp:10840</a></div></div>
<div class="ttc" id="aclassitem_html_ae9889725e446c9acbd5f23aa6cde35eb"><div class="ttname"><a href="classitem.html#ae9889725e446c9acbd5f23aa6cde35eb">item::is_software_storage</a></div><div class="ttdeci">bool is_software_storage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08591">item.cpp:8591</a></div></div>
<div class="ttc" id="aclassitem_html_ae9daf89e99f089da259528d1ed85e75d"><div class="ttname"><a href="classitem.html#ae9daf89e99f089da259528d1ed85e75d">item::get_total_capacity</a></div><div class="ttdeci">units::volume get_total_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdoc">It returns the maximum volume of any contents, including liquids, ammo, magazines,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11903">item.cpp:11903</a></div></div>
<div class="ttc" id="aclassitem_html_aeaa5462841292fc890f32e4a67712faa"><div class="ttname"><a href="classitem.html#aeaa5462841292fc890f32e4a67712faa">item::variant_description</a></div><div class="ttdeci">std::string variant_description() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09385">item.cpp:9385</a></div></div>
<div class="ttc" id="aclassitem_html_aeaf79d99756c14502ef9ee8860514662"><div class="ttname"><a href="classitem.html#aeaf79d99756c14502ef9ee8860514662">item::get_saved_recipes</a></div><div class="ttdeci">std::set&lt; recipe_id &gt; get_saved_recipes() const</div><div class="ttdoc">Returns recipes stored on the item (laptops, smartphones, sd cards etc) Filters out !...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10287">item.cpp:10287</a></div></div>
<div class="ttc" id="aclassitem_html_aeb47151201f462dee6e622c061209431"><div class="ttname"><a href="classitem.html#aeb47151201f462dee6e622c061209431">item::set_tools_to_continue</a></div><div class="ttdeci">void set_tools_to_continue(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14779">item.cpp:14779</a></div></div>
<div class="ttc" id="aclassitem_html_aeb49bb1b64eba3731e606ffe83e95b4f"><div class="ttname"><a href="classitem.html#aeb49bb1b64eba3731e606ffe83e95b4f">item::has_property</a></div><div class="ttdeci">bool has_property(const std::string &amp;prop) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07675">item.cpp:7675</a></div></div>
<div class="ttc" id="aclassitem_html_aec5b411d5f37e7ca9a75bfeed5af302b"><div class="ttname"><a href="classitem.html#aec5b411d5f37e7ca9a75bfeed5af302b">item::has_layer</a></div><div class="ttdeci">bool has_layer(const std::vector&lt; layer_level &gt; &amp;ll, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if an item has a given layer level on a specific part.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08258">item.cpp:8258</a></div></div>
<div class="ttc" id="aclassitem_html_aec8fbaef45b5f087f6a4e216c9c9baf1"><div class="ttname"><a href="classitem.html#aec8fbaef45b5f087f6a4e216c9c9baf1">item::select_itype_variant</a></div><div class="ttdeci">void select_itype_variant()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09302">item.cpp:9302</a></div></div>
<div class="ttc" id="aclassitem_html_aecc0a01ad32ee5f835915f41e818f59e"><div class="ttname"><a href="classitem.html#aecc0a01ad32ee5f835915f41e818f59e">item::food_info</a></div><div class="ttdeci">void food_info(const item *food_item, std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02653">item.cpp:2653</a></div></div>
<div class="ttc" id="aclassitem_html_aecf84874cbc13ba0ce8a205690747305"><div class="ttname"><a href="classitem.html#aecf84874cbc13ba0ce8a205690747305">item::get_side</a></div><div class="ttdeci">side get_side() const</div><div class="ttdoc">Returns side item currently worn on.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01169">item.cpp:1169</a></div></div>
<div class="ttc" id="aclassitem_html_aed157a025c9aef5188bd5eadf5d556ab"><div class="ttname"><a href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">item::unset_flag</a></div><div class="ttdeci">item &amp; unset_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter removing an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07641">item.cpp:7641</a></div></div>
<div class="ttc" id="aclassitem_html_aed15b9f2983bf68f5701e2b7e3b6ac73"><div class="ttname"><a href="classitem.html#aed15b9f2983bf68f5701e2b7e3b6ac73">item::ammo_types</a></div><div class="ttdeci">std::set&lt; ammotype &gt; ammo_types(bool conversion=true) const</div><div class="ttdoc">Ammo types (ammunition_type) the item magazine pocket can contain.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11056">item.cpp:11056</a></div></div>
<div class="ttc" id="aclassitem_html_aefa6100c19c67ff6a2d54698a47796ba"><div class="ttname"><a href="classitem.html#aefa6100c19c67ff6a2d54698a47796ba">item::damage_indicator</a></div><div class="ttdeci">std::string damage_indicator() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09034">item.cpp:9034</a></div></div>
<div class="ttc" id="aclassitem_html_af021f8399f7a270c4fecbe717b92828e"><div class="ttname"><a href="classitem.html#af021f8399f7a270c4fecbe717b92828e">item::can_reload_with</a></div><div class="ttdeci">bool can_reload_with(const item &amp;ammo, bool now) const</div><div class="ttdoc">returns whether the item can be reloaded with the specified item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09887">item.cpp:9887</a></div></div>
<div class="ttc" id="aclassitem_html_af0875ee1532053dc7144147e34145d89"><div class="ttname"><a href="classitem.html#af0875ee1532053dc7144147e34145d89">item::dps</a></div><div class="ttdeci">std::map&lt; std::string, double &gt; dps(bool for_display, bool for_calc, const Character &amp;guy) const</div><div class="ttdoc">calculate effective dps against a stock set of monsters.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02357">item.cpp:2357</a></div></div>
<div class="ttc" id="aclassitem_html_af0ba40b31415b6f32050d014a501b4b1"><div class="ttname"><a href="classitem.html#af0ba40b31415b6f32050d014a501b4b1">item::gun_damage</a></div><div class="ttdeci">damage_instance gun_damage(bool with_ammo=true, bool shot=false) const</div><div class="ttdoc">Summed ranged damage, armor piercing, and multipliers for both, of a gun, including values from mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10507">item.cpp:10507</a></div></div>
<div class="ttc" id="aclassitem_html_af128df748a75405ab738424bff725de5"><div class="ttname"><a href="classitem.html#af128df748a75405ab738424bff725de5">item::gun_get_mode</a></div><div class="ttdeci">gun_mode gun_get_mode(const gun_mode_id &amp;mode) const</div><div class="ttdoc">Check if gun supports a specific mode returning an invalid/empty mode if not.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11408">item.cpp:11408</a></div></div>
<div class="ttc" id="aclassitem_html_af15a86b2fb28e635721b31b735906800"><div class="ttname"><a href="classitem.html#af15a86b2fb28e635721b31b735906800">item::all_items_ptr</a></div><div class="ttdeci">std::list&lt; const item * &gt; all_items_ptr() const</div><div class="ttdoc">returns a list of pointers to all items inside recursively includes mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15062">item.cpp:15062</a></div></div>
<div class="ttc" id="aclassitem_html_af1a726363affb2862b7c3035431b69b6"><div class="ttname"><a href="classitem.html#af1a726363affb2862b7c3035431b69b6">item::get_plant_epoch</a></div><div class="ttdeci">time_duration get_plant_epoch(int num_epochs=3) const</div><div class="ttdoc">Time it takes to grow from one stage to another.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14206">item.cpp:14206</a></div></div>
<div class="ttc" id="aclassitem_html_af273ef83e89ee90f20f60b04402a4ec1"><div class="ttname"><a href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">item::is_ebook_storage</a></div><div class="ttdeci">bool is_ebook_storage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08596">item.cpp:8596</a></div></div>
<div class="ttc" id="aclassitem_html_af373f646c1ee172941490dc7cc04bbcd"><div class="ttname"><a href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">item::is_two_handed</a></div><div class="ttdeci">bool is_two_handed(const Character &amp;guy) const</div><div class="ttdoc">Whether the character needs both hands to wield this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09137">item.cpp:9137</a></div></div>
<div class="ttc" id="aclassitem_html_af38d78ce6d128f6c7a1999b7f9e00965"><div class="ttname"><a href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">item::invlet</a></div><div class="ttdeci">char invlet</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03211">item.h:3211</a></div></div>
<div class="ttc" id="aclassitem_html_af3e78b2fe634d88db841d879588e1ec3"><div class="ttname"><a href="classitem.html#af3e78b2fe634d88db841d879588e1ec3">item::spoilage_sort_order</a></div><div class="ttdeci">int spoilage_sort_order() const</div><div class="ttdoc">Get minimum time for this item or any of its contents to rot, ignoring fridge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07892">item.cpp:7892</a></div></div>
<div class="ttc" id="aclassitem_html_af46a8b8045e5ce3e7c175796599ca038"><div class="ttname"><a href="classitem.html#af46a8b8045e5ce3e7c175796599ca038">item::same_contents</a></div><div class="ttdeci">bool same_contents(const item &amp;rhs) const</div><div class="ttdoc">Whether the two items have same contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01750">item.cpp:1750</a></div></div>
<div class="ttc" id="aclassitem_html_af486ddb23bd7e254cc07ef3ba1ba846d"><div class="ttname"><a href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a></div><div class="ttdeci">bool made_of_from_type(phase_id phase) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09268">item.cpp:9268</a></div></div>
<div class="ttc" id="aclassitem_html_af4bcc60e3d1d786daa3d51f0cc8d71c6"><div class="ttname"><a href="classitem.html#af4bcc60e3d1d786daa3d51f0cc8d71c6">item::price_no_contents</a></div><div class="ttdeci">int price_no_contents(bool practical, std::optional&lt; int &gt; price_override=std::nullopt) const</div><div class="ttdoc">Returns the monetary value of an item by itself.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07044">item.cpp:7044</a></div></div>
<div class="ttc" id="aclassitem_html_af4d40038358173598156ed2d200e176f"><div class="ttname"><a href="classitem.html#af4d40038358173598156ed2d200e176f">item::ammo_sort_name</a></div><div class="ttdeci">std::string ammo_sort_name() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11161">item.cpp:11161</a></div></div>
<div class="ttc" id="aclassitem_html_af5218e06137e038fa90a320550884639"><div class="ttname"><a href="classitem.html#af5218e06137e038fa90a320550884639">item::tool_info</a></div><div class="ttdeci">void tool_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04746">item.cpp:4746</a></div></div>
<div class="ttc" id="aclassitem_html_af53663fa61792f964d7e1f4e9b11e450"><div class="ttname"><a href="classitem.html#af53663fa61792f964d7e1f4e9b11e450">item::process_extinguish</a></div><div class="ttdeci">bool process_extinguish(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13214">item.cpp:13214</a></div></div>
<div class="ttc" id="aclassitem_html_af607ad36c67593022397b437a3a5b5b4"><div class="ttname"><a href="classitem.html#af607ad36c67593022397b437a3a5b5b4">item::get_chapters</a></div><div class="ttdeci">int get_chapters() const</div><div class="ttdoc">How many chapters the book has (if any).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10259">item.cpp:10259</a></div></div>
<div class="ttc" id="aclassitem_html_af70d2ef5e2b0fb4533b25bf59690fff6"><div class="ttname"><a href="classitem.html#af70d2ef5e2b0fb4533b25bf59690fff6">item::get_encumber</a></div><div class="ttdeci">int get_encumber(const Character &amp;, const bodypart_id &amp;bodypart, encumber_flags=encumber_flags::none) const</div><div class="ttdoc">Returns the encumbrance value that this item has when worn by given player.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08076">item.cpp:8076</a></div></div>
<div class="ttc" id="aclassitem_html_af74cb7de99686fa8827fcd79151e0f8d"><div class="ttname"><a href="classitem.html#af74cb7de99686fa8827fcd79151e0f8d">item::set_item_temperature</a></div><div class="ttdeci">void set_item_temperature(units::temperature new_temperature)</div><div class="ttdoc">Sets the item temperature and item energy from new temperature and resets last_temp_check.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12146">item.cpp:12146</a></div></div>
<div class="ttc" id="aclassitem_html_af76842f6e7f6824589be0e31e0053409"><div class="ttname"><a href="classitem.html#af76842f6e7f6824589be0e31e0053409">item::is_funnel_container</a></div><div class="ttdeci">bool is_funnel_container(units::volume &amp;bigger_than) const</div><div class="ttdoc">Funnel related functions.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09935">item.cpp:9935</a></div></div>
<div class="ttc" id="aclassitem_html_af7cccefc9d12ce6fdc6f16490f27cdbc"><div class="ttname"><a href="classitem.html#af7cccefc9d12ce6fdc6f16490f27cdbc">item::enchantment_info</a></div><div class="ttdeci">void enchantment_info(std::vector&lt; iteminfo &gt; &amp;info, const iteminfo_query *parts, int batch, bool debug) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05154">item.cpp:5154</a></div></div>
<div class="ttc" id="aclassitem_html_af7e3523e193bb5422557e885ae050309"><div class="ttname"><a href="classitem.html#af7e3523e193bb5422557e885ae050309">item::obtain_cost</a></div><div class="ttdeci">int obtain_cost(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01774">item.cpp:1774</a></div></div>
<div class="ttc" id="aclassitem_html_af80e153fc97fb09df58a5be7302ae898"><div class="ttname"><a href="classitem.html#af80e153fc97fb09df58a5be7302ae898">item::casings_count</a></div><div class="ttdeci">int casings_count() const</div><div class="ttdoc">How many spent casings are contained within this item?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11592">item.cpp:11592</a></div></div>
<div class="ttc" id="aclassitem_html_af849bd11bb6afad312bb858a2f21021b"><div class="ttname"><a href="classitem.html#af849bd11bb6afad312bb858a2f21021b">item::set_saved_recipes</a></div><div class="ttdeci">void set_saved_recipes(const std::set&lt; recipe_id &gt; &amp;recipes)</div><div class="ttdoc">Sets recipes stored on the item (laptops, smartphones, sd cards etc)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10308">item.cpp:10308</a></div></div>
<div class="ttc" id="aclassitem_html_af84e26c1418a4d090bbf55174431b6ac"><div class="ttname"><a href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">item::is_bucket_nonempty</a></div><div class="ttdeci">bool is_bucket_nonempty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09746">item.cpp:9746</a></div></div>
<div class="ttc" id="aclassitem_html_af876b00a46cde846cf22f1f550bf37e2"><div class="ttname"><a href="classitem.html#af876b00a46cde846cf22f1f550bf37e2">item::only_item</a></div><div class="ttdeci">item &amp; only_item()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15145">item.cpp:15145</a></div></div>
<div class="ttc" id="aclassitem_html_af88f781fc1ec0ac53b35ab97a44dcd0f"><div class="ttname"><a href="classitem.html#af88f781fc1ec0ac53b35ab97a44dcd0f">item::has_temperature</a></div><div class="ttdeci">bool has_temperature() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09521">item.cpp:9521</a></div></div>
<div class="ttc" id="aclassitem_html_af8be3cc1fd31607205d7170b1e2eb4fb"><div class="ttname"><a href="classitem.html#af8be3cc1fd31607205d7170b1e2eb4fb">item::is_pet_armor</a></div><div class="ttdeci">bool is_pet_armor(bool on_pet=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09617">item.cpp:9617</a></div></div>
<div class="ttc" id="aclassitem_html_af8e91138079d26f76b75c354a85d6ee1"><div class="ttname"><a href="classitem.html#af8e91138079d26f76b75c354a85d6ee1">item::specific_energy</a></div><div class="ttdeci">units::specific_energy specific_energy</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03147">item.h:3147</a></div></div>
<div class="ttc" id="aclassitem_html_af90bc7e529fd4f0a23b84ff77b5c9c8e"><div class="ttname"><a href="classitem.html#af90bc7e529fd4f0a23b84ff77b5c9c8e">item::process_litcig</a></div><div class="ttdeci">bool process_litcig(map &amp;here, Character *carrier, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13137">item.cpp:13137</a></div></div>
<div class="ttc" id="aclassitem_html_af9135f611a5e339f43eee1124ae2b752"><div class="ttname"><a href="classitem.html#af9135f611a5e339f43eee1124ae2b752">item::leak</a></div><div class="ttdeci">bool leak(map &amp;here, Character *carrier, const tripoint &amp;pos, item_pocket *pocke=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14021">item.cpp:14021</a></div></div>
<div class="ttc" id="aclassitem_html_af914ae79aeca6aaa3ac77e3f6adf18cd"><div class="ttname"><a href="classitem.html#af914ae79aeca6aaa3ac77e3f6adf18cd">item::possible_itype_variant</a></div><div class="ttdeci">bool possible_itype_variant(const std::string &amp;test) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09323">item.cpp:9323</a></div></div>
<div class="ttc" id="aclassitem_html_af92f1cedcba23fcf2aab8b821554a89b"><div class="ttname"><a href="classitem.html#af92f1cedcba23fcf2aab8b821554a89b">item::is_gunmod_compatible</a></div><div class="ttdeci">ret_val&lt; void &gt; is_gunmod_compatible(const item &amp;mod) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11270">item.cpp:11270</a></div></div>
<div class="ttc" id="aclassitem_html_af93f65bed06f958b223829e82e9ea4ce"><div class="ttname"><a href="classitem.html#af93f65bed06f958b223829e82e9ea4ce">item::set_last_temp_check</a></div><div class="ttdeci">void set_last_temp_check(const time_point &amp;pt)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14039">item.cpp:14039</a></div></div>
<div class="ttc" id="aclassitem_html_afa39b2bde9d8c33ad973c1dd34602bc4"><div class="ttname"><a href="classitem.html#afa39b2bde9d8c33ad973c1dd34602bc4">item::link_to</a></div><div class="ttdeci">ret_val&lt; void &gt; link_to(const optional_vpart_position &amp;linked_vp, link_state link_type=link_state::no_link)</div><div class="ttdoc">Initializes the item's link_data and starts a connection to the specified vehicle position.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l13348">item.cpp:13348</a></div></div>
<div class="ttc" id="aclassitem_html_afa6ee7f1015b3ce52ef0169adc76c3b0"><div class="ttname"><a href="classitem.html#afa6ee7f1015b3ce52ef0169adc76c3b0">item::get_total_holster_weight</a></div><div class="ttdeci">units::mass get_total_holster_weight() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11947">item.cpp:11947</a></div></div>
<div class="ttc" id="aclassitem_html_afa838813479794c29ea01ccecf833791"><div class="ttname"><a href="classitem.html#afa838813479794c29ea01ccecf833791">item::in_its_container</a></div><div class="ttdeci">item in_its_container(int qty=0) const</div><div class="ttdoc">Returns this item into its default container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01229">item.cpp:1229</a></div></div>
<div class="ttc" id="aclassitem_html_afb76ea7bd94d06815e5ab68b520b2a19"><div class="ttname"><a href="classitem.html#afb76ea7bd94d06815e5ab68b520b2a19">item::sight_dispersion</a></div><div class="ttdeci">std::pair&lt; int, int &gt; sight_dispersion(const Character &amp;character) const</div><div class="ttdoc">Get lowest actual and effective dispersion of either integral or any attached sights for specific cha...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10483">item.cpp:10483</a></div></div>
<div class="ttc" id="aclassitem_html_afb86dcc6f69f9dcdc7abacd0eb377af8"><div class="ttname"><a href="classitem.html#afb86dcc6f69f9dcdc7abacd0eb377af8">item::get_remaining_weight_capacity</a></div><div class="ttdeci">units::mass get_remaining_weight_capacity(bool unrestricted_pockets_only=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11917">item.cpp:11917</a></div></div>
<div class="ttc" id="aclassitem_html_afcc181d2e2fe380ac28dd70f814798c2"><div class="ttname"><a href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">item::gun_set_mode</a></div><div class="ttdeci">bool gun_set_mode(const gun_mode_id &amp;mode)</div><div class="ttdoc">Try to set the mode for a gun, returning false if no such mode is possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11433">item.cpp:11433</a></div></div>
<div class="ttc" id="aclassitem_html_afcdf10dcfc610891ac9aef2b5157abc4"><div class="ttname"><a href="classitem.html#afcdf10dcfc610891ac9aef2b5157abc4">item::process</a></div><div class="ttdeci">bool process(map &amp;here, Character *carrier, const tripoint &amp;pos, float insulation=1, temperature_flag flag=temperature_flag::NORMAL, float spoil_multiplier_parent=1.0f, bool recursive=true)</div><div class="ttdoc">This is called once each turn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14010">item.cpp:14010</a></div></div>
<div class="ttc" id="aclassitem_html_afd036343012f6275683b8168d84c1be3"><div class="ttname"><a href="classitem.html#afd036343012f6275683b8168d84c1be3">item::repaired_with</a></div><div class="ttdeci">const std::set&lt; itype_id &gt; &amp; repaired_with() const</div><div class="ttdoc">If possible to repair this item what tools could potentially be used for this purpose?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09099">item.cpp:9099</a></div></div>
<div class="ttc" id="aclassitem_html_afd7799c0d554e1d9d1efd79896f1141a"><div class="ttname"><a href="classitem.html#afd7799c0d554e1d9d1efd79896f1141a">item::apply_freezerburn</a></div><div class="ttdeci">void apply_freezerburn()</div><div class="ttdoc">remove frozen tag and if it takes freezerburn, applies mushy/rotten</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12617">item.cpp:12617</a></div></div>
<div class="ttc" id="aclassitem_html_afd9fcc8f19476c95071b72c300f47ad1"><div class="ttname"><a href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">item::get_contents</a></div><div class="ttdeci">item_contents &amp; get_contents()</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03165">item.h:3165</a></div></div>
<div class="ttc" id="aclassitem_html_afeaaf502a3517e5359409ca0b9f658ad"><div class="ttname"><a href="classitem.html#afeaaf502a3517e5359409ca0b9f658ad">item::get_avg_encumber</a></div><div class="ttdeci">int get_avg_encumber(const Character &amp;, encumber_flags=encumber_flags::none) const</div><div class="ttdoc">Returns the average encumbrance value that this item across all portions Returns 0 if this is can not...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08047">item.cpp:8047</a></div></div>
<div class="ttc" id="aclassitem_html_afebc00bf525bada288b71deebbc84d84"><div class="ttname"><a href="classitem.html#afebc00bf525bada288b71deebbc84d84">item::set_damage</a></div><div class="ttdeci">void set_damage(int qty)</div><div class="ttdoc">Sets item damage constrained by [degradation and max_damage].</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00905">item.cpp:905</a></div></div>
<div class="ttc" id="aclassitem_html_afed495d5303347fcb8a9fe4d55d3345d"><div class="ttname"><a href="classitem.html#afed495d5303347fcb8a9fe4d55d3345d">item::update_inherited_flags</a></div><div class="ttdeci">void update_inherited_flags()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06667">item.cpp:6667</a></div></div>
<div class="ttc" id="aclassitem_html_afee29a1f4fe4a49b99063ceec550a2da"><div class="ttname"><a href="classitem.html#afee29a1f4fe4a49b99063ceec550a2da">item::get_gun_bionic_drain</a></div><div class="ttdeci">units::energy get_gun_bionic_drain() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14609">item.cpp:14609</a></div></div>
<div class="ttc" id="aclassiteminfo__query_html"><div class="ttname"><a href="classiteminfo__query.html">iteminfo_query</a></div><div class="ttdef"><b>Definition:</b> <a href="iteminfo__query_8h_source.html#l00258">iteminfo_query.h:259</a></div></div>
<div class="ttc" id="aclassiteminfo__query_html_a5bd07a0642fad2dcf4e6a6d1484a41b9"><div class="ttname"><a href="classiteminfo__query.html#a5bd07a0642fad2dcf4e6a6d1484a41b9">iteminfo_query::all</a></div><div class="ttdeci">static const iteminfo_query all</div><div class="ttdef"><b>Definition:</b> <a href="iteminfo__query_8h_source.html#l00296">iteminfo_query.h:296</a></div></div>
<div class="ttc" id="aclassiteminfo__query_html_a7878ab966f3d3ae0e941cfc61d9c8481"><div class="ttname"><a href="classiteminfo__query.html#a7878ab966f3d3ae0e941cfc61d9c8481">iteminfo_query::test</a></div><div class="ttdeci">bool test(const iteminfo_parts &amp;value) const</div><div class="ttdef"><b>Definition:</b> <a href="iteminfo__query_8cpp_source.html#l00024">iteminfo_query.cpp:24</a></div></div>
<div class="ttc" id="aclassiteminfo__query_html_acf3436028f42b76c954c3571460e1783"><div class="ttname"><a href="classiteminfo__query.html#acf3436028f42b76c954c3571460e1783">iteminfo_query::notext</a></div><div class="ttdeci">static const iteminfo_query notext</div><div class="ttdef"><b>Definition:</b> <a href="iteminfo__query_8h_source.html#l00297">iteminfo_query.h:297</a></div></div>
<div class="ttc" id="aclassjson__flag_html"><div class="ttname"><a href="classjson__flag.html">json_flag</a></div><div class="ttdoc">Flags: json entity with &quot;type&quot;: &quot;json_flag&quot;, defined in flags.json, vp_flags.json Currently used by:</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00396">flag.h:397</a></div></div>
<div class="ttc" id="aclassjson__flag_html_a4e37aa18092793ee949dda50f9fd5ad2"><div class="ttname"><a href="classjson__flag.html#a4e37aa18092793ee949dda50f9fd5ad2">json_flag::info</a></div><div class="ttdeci">std::string info() const</div><div class="ttdoc">Get informative text for display in UI.</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00413">flag.h:413</a></div></div>
<div class="ttc" id="aclassjson__flag_html_a6f1e6f90c7c8cd8b307136ceee121fb1"><div class="ttname"><a href="classjson__flag.html#a6f1e6f90c7c8cd8b307136ceee121fb1">json_flag::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdoc">Get name of the flag.</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00423">flag.h:423</a></div></div>
<div class="ttc" id="aclassjson__flag_html_a9a3a2e9f8307ff62bdab76d57a63c49a"><div class="ttname"><a href="classjson__flag.html#a9a3a2e9f8307ff62bdab76d57a63c49a">json_flag::item_prefix</a></div><div class="ttdeci">const translation &amp; item_prefix() const</div><div class="ttdoc">Custom prefix that is added to item name.</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00428">flag.h:428</a></div></div>
<div class="ttc" id="aclassjson__flag_html_aad9b17d0cba280db19809257db9ea5e6"><div class="ttname"><a href="classjson__flag.html#aad9b17d0cba280db19809257db9ea5e6">json_flag::item_suffix</a></div><div class="ttdeci">const translation &amp; item_suffix() const</div><div class="ttdoc">Custom suffix that is added to item name.</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00433">flag.h:433</a></div></div>
<div class="ttc" id="aclasslearn__spell__actor_html"><div class="ttname"><a href="classlearn__spell__actor.html">learn_spell_actor</a></div><div class="ttdoc">Learn a spell.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00687">iuse_actor.h:688</a></div></div>
<div class="ttc" id="aclasslearn__spell__actor_html_a25721a2c9e023087537b1f6b3026deb4"><div class="ttname"><a href="classlearn__spell__actor.html#a25721a2c9e023087537b1f6b3026deb4">learn_spell_actor::spells</a></div><div class="ttdeci">std::vector&lt; std::string &gt; spells</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00691">iuse_actor.h:691</a></div></div>
<div class="ttc" id="aclasslink__up__actor_html"><div class="ttname"><a href="classlink__up__actor.html">link_up_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01076">iuse_actor.h:1077</a></div></div>
<div class="ttc" id="aclasslink__up__actor_html_a23990adc9982e4fd425095025fe1975f"><div class="ttname"><a href="classlink__up__actor.html#a23990adc9982e4fd425095025fe1975f">link_up_actor::efficiency</a></div><div class="ttdeci">float efficiency</div><div class="ttdoc">(this) out of 1.0 chance to successfully add 1 charge every charge interval</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01084">iuse_actor.h:1084</a></div></div>
<div class="ttc" id="aclasslink__up__actor_html_a59b4574295f38f8d345ace78301cb70f"><div class="ttname"><a href="classlink__up__actor.html#a59b4574295f38f8d345ace78301cb70f">link_up_actor::cable_length</a></div><div class="ttdeci">int cable_length</div><div class="ttdoc">Maximum length of the cable.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01080">iuse_actor.h:1080</a></div></div>
<div class="ttc" id="aclasslink__up__actor_html_a925f6588347b47e58a0ae8f6999bb859"><div class="ttname"><a href="classlink__up__actor.html#a925f6588347b47e58a0ae8f6999bb859">link_up_actor::targets</a></div><div class="ttdeci">std::set&lt; link_state &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01090">iuse_actor.h:1090</a></div></div>
<div class="ttc" id="aclasslink__up__actor_html_af526f1c1b24926cd919b65c95771a7ff"><div class="ttname"><a href="classlink__up__actor.html#af526f1c1b24926cd919b65c95771a7ff">link_up_actor::charge_rate</a></div><div class="ttdeci">units::power charge_rate</div><div class="ttdoc">Charge rate in watts.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01082">iuse_actor.h:1082</a></div></div>
<div class="ttc" id="aclassma__technique_html_a63516053add4bcdfe2c74f47ec500e5b"><div class="ttname"><a href="classma__technique.html#a63516053add4bcdfe2c74f47ec500e5b">ma_technique::description</a></div><div class="ttdeci">translation description</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00141">martialarts.h:141</a></div></div>
<div class="ttc" id="aclassma__technique_html_aafd9a1df0b2618374f169ddca0b392ca"><div class="ttname"><a href="classma__technique.html#aafd9a1df0b2618374f169ddca0b392ca">ma_technique::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00139">martialarts.h:139</a></div></div>
<div class="ttc" id="aclassma__technique_html_ae61db16a48210ee6d7e026180292fbb3"><div class="ttname"><a href="classma__technique.html#ae61db16a48210ee6d7e026180292fbb3">ma_technique::condition_desc</a></div><div class="ttdeci">std::string condition_desc</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00201">martialarts.h:201</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a150f1b826e0e2722ccf76dbdac136ffd"><div class="ttname"><a href="classmap.html#a150f1b826e0e2722ccf76dbdac136ffd">map::emit_field</a></div><div class="ttdeci">void emit_field(const tripoint &amp;pos, const emit_id &amp;src, float mul=1.0f)</div><div class="ttdoc">Runs one cycle of emission src which may result in propagation of fields.</div><div class="ttdef"><b>Definition:</b> <a href="map__field_8cpp_source.html#l02102">map_field.cpp:2102</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06213">map.cpp:6213</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06563">map.cpp:6563</a></div></div>
<div class="ttc" id="aclassmap_html_a46608709f68358365d0734b1063fed73"><div class="ttname"><a href="classmap.html#a46608709f68358365d0734b1063fed73">map::inbounds</a></div><div class="ttdeci">bool inbounds(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09057">map.cpp:9057</a></div></div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09614">map.cpp:9614</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmap_html_a5690822d7d509cd4dc51ff92064353fe"><div class="ttname"><a href="classmap.html#a5690822d7d509cd4dc51ff92064353fe">map::rotten_item_spawn</a></div><div class="ttdeci">void rotten_item_spawn(const item &amp;item, const tripoint &amp;p)</div><div class="ttdoc">Checks to see if the item that is rotting away generates a creature when it does.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08320">map.cpp:8320</a></div></div>
<div class="ttc" id="aclassmap_html_a5b15ab6080f4853c1baddbd607b38b33"><div class="ttname"><a href="classmap.html#a5b15ab6080f4853c1baddbd607b38b33">map::get_temperature_mod</a></div><div class="ttdeci">units::temperature_delta get_temperature_mod(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04948">map.cpp:4948</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_ab1a08686c7d7b52636e0362ac4a0847f"><div class="ttname"><a href="classmap.html#ab1a08686c7d7b52636e0362ac4a0847f">map::flammable_items_at</a></div><div class="ttdeci">bool flammable_items_at(const tripoint &amp;p, int threshold=0)</div><div class="ttdoc">Checks if there are any flammable items on the tile.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03457">map.cpp:3457</a></div></div>
<div class="ttc" id="aclassmap_html_ac868b594b36b6b9bbcb130650fd4f61f"><div class="ttname"><a href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">map::getglobal</a></div><div class="ttdeci">tripoint_abs_ms getglobal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09625">map.cpp:9625</a></div></div>
<div class="ttc" id="aclassmap_html_ade82e480520c05f5a4e8917df19cef8c"><div class="ttname"><a href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">map::trap_set</a></div><div class="ttdeci">void trap_set(const tripoint &amp;p, const trap_id &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06297">map.cpp:6297</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassmartialart_html_a755de10d91b0292258efb0ab55b80cbc"><div class="ttname"><a href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">martialart::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00367">martialarts.h:367</a></div></div>
<div class="ttc" id="aclassmartialart_html_aaafaa92848ceeac9e66c6cbc28e38dd5"><div class="ttname"><a href="classmartialart.html#aaafaa92848ceeac9e66c6cbc28e38dd5">martialart::primary_skill</a></div><div class="ttdeci">skill_id primary_skill</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00372">martialarts.h:372</a></div></div>
<div class="ttc" id="aclassmaterial__type_html"><div class="ttname"><a href="classmaterial__type.html">material_type</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00070">material.h:71</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a7583dadd47fed32747f6e9611fcbf267"><div class="ttname"><a href="classmaterial__type.html#a7583dadd47fed32747f6e9611fcbf267">material_type::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00199">material.cpp:199</a></div></div>
<div class="ttc" id="aclassmaterial__type_html_a7bf0d6f32fe448f15bd917601703d15c"><div class="ttname"><a href="classmaterial__type.html#a7bf0d6f32fe448f15bd917601703d15c">material_type::get_fuel_data</a></div><div class="ttdeci">fuel_data get_fuel_data() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00351">material.cpp:351</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a02fa605494e946663ddd216166828f2a"><div class="ttname"><a href="classmonster.html#a02fa605494e946663ddd216166828f2a">monster::as_monster</a></div><div class="ttdeci">monster * as_monster() override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00101">monster.h:101</a></div></div>
<div class="ttc" id="aclassmonster_html_a8e30fdb59bcecd8ecb8a609431cb6caf"><div class="ttname"><a href="classmonster.html#a8e30fdb59bcecd8ecb8a609431cb6caf">monster::faction</a></div><div class="ttdeci">mfaction_id faction</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00545">monster.h:545</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00550">monster.h:550</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassnpc__class_html"><div class="ttname"><a href="classnpc__class.html">npc_class</a></div><div class="ttdef"><b>Definition:</b> <a href="npc__class_8h_source.html#l00071">npc_class.h:72</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_a077962bdd033d5a96974c8ddf3e26a59"><div class="ttname"><a href="classnpc.html#a077962bdd033d5a96974c8ddf3e26a59">npc::say</a></div><div class="ttdeci">void say(const char *const line, Args &amp;&amp;... args) const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l01025">npc.h:1025</a></div></div>
<div class="ttc" id="aclassnpc_html_a44b69dac954d29133179323df8502339"><div class="ttname"><a href="classnpc.html#a44b69dac954d29133179323df8502339">npc::as_npc</a></div><div class="ttdeci">npc * as_npc() override</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00808">npc.h:808</a></div></div>
<div class="ttc" id="aclassnpc_html_aa2736c9bc23fe9d6d780e2d5def2274e"><div class="ttname"><a href="classnpc.html#aa2736c9bc23fe9d6d780e2d5def2274e">npc::theft_witness_compare</a></div><div class="ttdeci">static bool theft_witness_compare(const npc *lhs, const npc *rhs)</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l03588">npc.cpp:3588</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_ae65ce03be0ec7c6890583b7ae2ee639f"><div class="ttname"><a href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">overmapbuffer::closest_city</a></div><div class="ttdeci">city_reference closest_city(const tripoint_abs_sm &amp;center)</div><div class="ttdoc">Find the closest city.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01476">overmapbuffer.cpp:1476</a></div></div>
<div class="ttc" id="aclasspocket__data_html"><div class="ttname"><a href="classpocket__data.html">pocket_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00450">item_pocket.h:451</a></div></div>
<div class="ttc" id="aclasspocket__data_html_a12c2c1e1195b2eb0d2fa2232463a12fa"><div class="ttname"><a href="classpocket__data.html#a12c2c1e1195b2eb0d2fa2232463a12fa">pocket_data::type</a></div><div class="ttdeci">pocket_type type</div><div class="ttdef"><b>Definition:</b> <a href="item__pocket_8h_source.html#l00467">item_pocket.h:467</a></div></div>
<div class="ttc" id="aclassrecipe__dictionary_html_a5f22263eae1314377f1c64ff6d6400fe"><div class="ttname"><a href="classrecipe__dictionary.html#a5f22263eae1314377f1c64ff6d6400fe">recipe_dictionary::is_item_on_loop</a></div><div class="ttdeci">bool is_item_on_loop(const itype_id &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00499">recipe_dictionary.cpp:499</a></div></div>
<div class="ttc" id="aclassrecipe__dictionary_html_a93af439fed4b5043d9709235e0cea03e"><div class="ttname"><a href="classrecipe__dictionary.html#a93af439fed4b5043d9709235e0cea03e">recipe_dictionary::get_uncraft</a></div><div class="ttdeci">static const recipe &amp; get_uncraft(const itype_id &amp;id)</div><div class="ttdoc">Returns disassembly recipe (or null recipe if no match)</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00077">recipe_dictionary.cpp:77</a></div></div>
<div class="ttc" id="aclassrecipe__subset_html"><div class="ttname"><a href="classrecipe__subset.html">recipe_subset</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8h_source.html#l00090">recipe_dictionary.h:91</a></div></div>
<div class="ttc" id="aclassrecipe__subset_html_ab4acb1f4fcfc79a7415a55e2eeda9a95"><div class="ttname"><a href="classrecipe__subset.html#ab4acb1f4fcfc79a7415a55e2eeda9a95">recipe_subset::of_component</a></div><div class="ttdeci">const std::set&lt; const recipe * &gt; &amp; of_component(const itype_id &amp;id) const</div><div class="ttdoc">Returns all recipes which could use component.</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00396">recipe_dictionary.cpp:396</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00086">recipe.h:87</a></div></div>
<div class="ttc" id="aclassrecipe_html_a0af03931c6f034e6b5269a5206e31bd2"><div class="ttname"><a href="classrecipe.html#a0af03931c6f034e6b5269a5206e31bd2">recipe::skill_used</a></div><div class="ttdeci">skill_id skill_used</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00188">recipe.h:188</a></div></div>
<div class="ttc" id="aclassrecipe_html_a10e4e7582e7174825ead3d07c3e4fca1"><div class="ttname"><a href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">recipe::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00133">recipe.h:133</a></div></div>
<div class="ttc" id="aclassrecipe_html_a12122c53b7b7d28364c07465d4573d37"><div class="ttname"><a href="classrecipe.html#a12122c53b7b7d28364c07465d4573d37">recipe::time_to_craft</a></div><div class="ttdeci">time_duration time_to_craft(const Character &amp;guy, recipe_time_flag flags=recipe_time_flag::none) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00087">recipe.cpp:87</a></div></div>
<div class="ttc" id="aclassrecipe_html_a555772480849b6e628c94dd0f56af81e"><div class="ttname"><a href="classrecipe.html#a555772480849b6e628c94dd0f56af81e">recipe::disassembly_requirements</a></div><div class="ttdeci">requirement_data disassembly_requirements() const</div><div class="ttdoc">If recipe can be used for disassembly fetch the combined requirements.</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00176">recipe.h:176</a></div></div>
<div class="ttc" id="aclassrecipe_html_a5c4a4110edf3bd4a33732d4fd8a9d53f"><div class="ttname"><a href="classrecipe.html#a5c4a4110edf3bd4a33732d4fd8a9d53f">recipe::makes_amount</a></div><div class="ttdeci">int makes_amount() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01514">recipe.cpp:1514</a></div></div>
<div class="ttc" id="aclassrecipe_html_a6ffa5ac015e9cb54bf2d360e5709cff3"><div class="ttname"><a href="classrecipe.html#a6ffa5ac015e9cb54bf2d360e5709cff3">recipe::is_practice</a></div><div class="ttdeci">bool is_practice() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01336">recipe.cpp:1336</a></div></div>
<div class="ttc" id="aclassrecipe_html_a76ff3dd477c2e0fb63a4d5845beb97a2"><div class="ttname"><a href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">recipe::time_to_craft_moves</a></div><div class="ttdeci">int64_t time_to_craft_moves(const Character &amp;guy, recipe_time_flag flags=recipe_time_flag::none) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00092">recipe.cpp:92</a></div></div>
<div class="ttc" id="aclassrecipe_html_a7aab303fc95f1e765db693bc59823ed6"><div class="ttname"><a href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">recipe::result_name</a></div><div class="ttdeci">std::string result_name(bool decorated=false) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01216">recipe.cpp:1216</a></div></div>
<div class="ttc" id="aclassrecipe_html_aa75469c5d2213a774931a5abf668a9dc"><div class="ttname"><a href="classrecipe.html#aa75469c5d2213a774931a5abf668a9dc">recipe::ident</a></div><div class="ttdeci">const recipe_id &amp; ident() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00155">recipe.h:155</a></div></div>
<div class="ttc" id="aclassrecipe_html_aaaa0b3bc09bae85e498281e619aaba48"><div class="ttname"><a href="classrecipe.html#aaaa0b3bc09bae85e498281e619aaba48">recipe::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00103">recipe.h:103</a></div></div>
<div class="ttc" id="aclassrecipe_html_ad68760d09d83ba4b7793ad831f7973d5"><div class="ttname"><a href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">recipe::simple_requirements</a></div><div class="ttdeci">const requirement_data &amp; simple_requirements() const</div><div class="ttdoc">Fetch combined requirement data (inline and via &quot;using&quot; syntax).</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00147">recipe.h:147</a></div></div>
<div class="ttc" id="aclassrelic_html"><div class="ttname"><a href="classrelic.html">relic</a></div><div class="ttdef"><b>Definition:</b> <a href="relic_8h_source.html#l00201">relic.h:202</a></div></div>
<div class="ttc" id="aclassret__val_3_01void_01_4_html"><div class="ttname"><a href="classret__val_3_01void_01_4.html">ret_val&lt; void &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00103">ret_val.h:104</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="aclassret__val__common_html_adf8af6e05bb9773c0b77b4299ba13c6c"><div class="ttname"><a href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">ret_val_common::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00017">ret_val.h:17</a></div></div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00048">ret_val.h:49</a></div></div>
<div class="ttc" id="aclassret__val_html_a0bbde13713bc279563fa85782599f957"><div class="ttname"><a href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val::make_success</a></div><div class="ttdeci">static ret_val make_success(T val=default_success::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00063">ret_val.h:63</a></div></div>
<div class="ttc" id="aclassret__val_html_a277e45f995cd21adfaceab9aa8388138"><div class="ttname"><a href="classret__val.html#a277e45f995cd21adfaceab9aa8388138">ret_val::value</a></div><div class="ttdeci">T value() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00091">ret_val.h:91</a></div></div>
<div class="ttc" id="aclassret__val_html_a415798e6fd736bd724329890cae0df4a"><div class="ttname"><a href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val::make_failure</a></div><div class="ttdeci">static ret_val make_failure(T val=default_failure::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00067">ret_val.h:67</a></div></div>
<div class="ttc" id="aclasssafe__reference__anchor_html_abc6afb71bf5ae0dbd9392122bd46d42b"><div class="ttname"><a href="classsafe__reference__anchor.html#abc6afb71bf5ae0dbd9392122bd46d42b">safe_reference_anchor::reference_to</a></div><div class="ttdeci">safe_reference&lt; T &gt; reference_to(T *object)</div><div class="ttdef"><b>Definition:</b> <a href="safe__reference_8h_source.html#l00066">safe_reference.h:66</a></div></div>
<div class="ttc" id="aclasssafe__reference_html"><div class="ttname"><a href="classsafe__reference.html">safe_reference&lt; item &gt;</a></div></div>
<div class="ttc" id="aclasssafe__reference_html_abcb6bf6d2b4f72a7c8f6459877c10d0c"><div class="ttname"><a href="classsafe__reference.html#abcb6bf6d2b4f72a7c8f6459877c10d0c">safe_reference::get</a></div><div class="ttdeci">T * get() const</div><div class="ttdef"><b>Definition:</b> <a href="safe__reference_8h_source.html#l00029">safe_reference.h:29</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a2c546ab8c71efe861ce1400b8d3e1261"><div class="ttname"><a href="classsnippet__library.html#a2c546ab8c71efe861ce1400b8d3e1261">snippet_library::expand</a></div><div class="ttdeci">std::string expand(const std::string &amp;str) const</div><div class="ttdoc">Expand the string by recursively replacing tags in angle brackets (&lt;&gt;) with random snippets from the ...</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00235">text_snippets.cpp:235</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a6edcf1dde9fb06d1df1b952a3162489e"><div class="ttname"><a href="classsnippet__library.html#a6edcf1dde9fb06d1df1b952a3162489e">snippet_library::get_EOC_by_id</a></div><div class="ttdeci">std::optional&lt; talk_effect_t &gt; get_EOC_by_id(const snippet_id &amp;id) const</div><div class="ttdoc">Returns the EOC connected with the snippet referenced by the id, or std::nullopt if there is no snipp...</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00202">text_snippets.cpp:202</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_ab54d86a48c6c49bf0a4b6d881bb52a3a"><div class="ttname"><a href="classsnippet__library.html#ab54d86a48c6c49bf0a4b6d881bb52a3a">snippet_library::get_snippet_by_id</a></div><div class="ttdeci">std::optional&lt; translation &gt; get_snippet_by_id(const snippet_id &amp;id) const</div><div class="ttdoc">Returns the snippet referenced by the id, or std::nullopt if there is no snippet with such id.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00193">text_snippets.cpp:193</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_aff12dd426e9f0340f5e861ddd291cea3"><div class="ttname"><a href="classsnippet__library.html#aff12dd426e9f0340f5e861ddd291cea3">snippet_library::random_id_from_category</a></div><div class="ttdeci">snippet_id random_id_from_category(const std::string &amp;cat) const</div><div class="ttdoc">Returns the id of a random snippet out of the given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00257">text_snippets.cpp:257</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; ammunition_type &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; mtype &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; mtype &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00221">calendar.h:221</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00459">calendar.h:460</a></div></div>
<div class="ttc" id="aclasstowing__data_html_aa4ea9ef21627b1cc84ff74c62fa7ba64"><div class="ttname"><a href="classtowing__data.html#aa4ea9ef21627b1cc84ff74c62fa7ba64">towing_data::set_towing</a></div><div class="ttdeci">bool set_towing(vehicle *tower_veh, vehicle *towed_veh)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06816">vehicle.cpp:6816</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
<div class="ttc" id="aclasstranslation_html_a85e9c5ae8df7eb6df7bac2473b9716dd"><div class="ttname"><a href="classtranslation.html#a85e9c5ae8df7eb6df7bac2473b9716dd">translation::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Whether the underlying string is empty, not matter what the context is or whether translation is need...</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00327">translation.cpp:327</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html_a96f3f957dba2ea5583a55060ffa04363"><div class="ttname"><a href="classunits_1_1quantity.html#a96f3f957dba2ea5583a55060ffa04363">units::quantity::value</a></div><div class="ttdeci">constexpr const value_type &amp; value() const</div><div class="ttdoc">Access the raw dimensionless value.</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00060">units.h:60</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a030263e1db60c034caa9e6f24199cd33"><div class="ttname"><a href="classvehicle.html#a030263e1db60c034caa9e6f24199cd33">vehicle::install_part</a></div><div class="ttdeci">int install_part(const point &amp;dp, const vpart_id &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01450">vehicle.cpp:1450</a></div></div>
<div class="ttc" id="aclassvehicle_html_a11938f323ced48690dafb98e8f569e67"><div class="ttname"><a href="classvehicle.html#a11938f323ced48690dafb98e8f569e67">vehicle::avail_linkable_part</a></div><div class="ttdeci">int avail_linkable_part(const point &amp;pt, bool to_ports) const</div><div class="ttdoc">Returns index of part at mount point pt which has link connection and is_available(),...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02814">vehicle.cpp:2814</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1369f357d2165aae36bb485ca703029a"><div class="ttname"><a href="classvehicle.html#a1369f357d2165aae36bb485ca703029a">vehicle::can_mount</a></div><div class="ttdeci">ret_val&lt; void &gt; can_mount(const point &amp;dp, const vpart_info &amp;vpi) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l01181">vehicle.cpp:1181</a></div></div>
<div class="ttc" id="aclassvehicle_html_a35d54e8a51e9571f03c0e192c70af09f"><div class="ttname"><a href="classvehicle.html#a35d54e8a51e9571f03c0e192c70af09f">vehicle::has_tow_attached</a></div><div class="ttdeci">bool has_tow_attached() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06790">vehicle.cpp:6790</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3900ee345be0453828a955a200154db1"><div class="ttname"><a href="classvehicle.html#a3900ee345be0453828a955a200154db1">vehicle::global_pos3</a></div><div class="ttdeci">tripoint global_pos3() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03431">vehicle.cpp:3431</a></div></div>
<div class="ttc" id="aclassvehicle_html_a40b149ccb2383cb1a263f3e3d88f3469"><div class="ttname"><a href="classvehicle.html#a40b149ccb2383cb1a263f3e3d88f3469">vehicle::is_towing</a></div><div class="ttdeci">bool is_towing() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06752">vehicle.cpp:6752</a></div></div>
<div class="ttc" id="aclassvehicle_html_a441fa41f264fb7bc45df81d71244a0d1"><div class="ttname"><a href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">vehicle::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02201">vehicle.h:2201</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4af264b2849a0ee9252809d0579c9e86"><div class="ttname"><a href="classvehicle.html#a4af264b2849a0ee9252809d0579c9e86">vehicle::linked_item_epower_this_turn</a></div><div class="ttdeci">units::power linked_item_epower_this_turn</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01477">vehicle.h:1477</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02276">vehicle.h:2276</a></div></div>
<div class="ttc" id="aclassvehicle_html_a546f6795113ae5bb41b64adc23fb3e3c"><div class="ttname"><a href="classvehicle.html#a546f6795113ae5bb41b64adc23fb3e3c">vehicle::find_vehicle</a></div><div class="ttdeci">static vehicle * find_vehicle(const tripoint_abs_ms &amp;where)</div><div class="ttdoc">Find a possibly off-map vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05344">vehicle.cpp:5344</a></div></div>
<div class="ttc" id="aclassvehicle_html_a709da7b758c18d51b79311eea6eaca59"><div class="ttname"><a href="classvehicle.html#a709da7b758c18d51b79311eea6eaca59">vehicle::pivot_rotation</a></div><div class="ttdeci">std::array&lt; units::angle, 2 &gt; pivot_rotation</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02303">vehicle.h:2303</a></div></div>
<div class="ttc" id="aclassvehicle_html_a72a3e7b7f00c193446b29adee5d5aa9f"><div class="ttname"><a href="classvehicle.html#a72a3e7b7f00c193446b29adee5d5aa9f">vehicle::tow_data</a></div><div class="ttdeci">towing_data tow_data</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02308">vehicle.h:2308</a></div></div>
<div class="ttc" id="aclassvehicle_html_a74a0e5a1d331e2d47d0147f7924a7a20"><div class="ttname"><a href="classvehicle.html#a74a0e5a1d331e2d47d0147f7924a7a20">vehicle::connected_battery_power_level</a></div><div class="ttdeci">std::pair&lt; int, int &gt; connected_battery_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05026">vehicle.cpp:5026</a></div></div>
<div class="ttc" id="aclassvehicle_html_a789289c4179f7677e45cb100ff5ffb9a"><div class="ttname"><a href="classvehicle.html#a789289c4179f7677e45cb100ff5ffb9a">vehicle::global_square_location</a></div><div class="ttdeci">tripoint_abs_ms global_square_location() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03421">vehicle.cpp:3421</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7ad9e33e7768c469c58e7d9f3bb1fd83"><div class="ttname"><a href="classvehicle.html#a7ad9e33e7768c469c58e7d9f3bb1fd83">vehicle::discharge_battery</a></div><div class="ttdeci">int discharge_battery(int amount, bool apply_loss=true)</div><div class="ttdoc">Discharges batteries in connected vehicles/appliances.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05564">vehicle.cpp:5564</a></div></div>
<div class="ttc" id="aclassvehicle_html_aa2123b10ad5b9401069f9b5774361878"><div class="ttname"><a href="classvehicle.html#aa2123b10ad5b9401069f9b5774361878">vehicle::mount_to_tripoint</a></div><div class="ttdeci">tripoint mount_to_tripoint(const point &amp;mount) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03326">vehicle.cpp:3326</a></div></div>
<div class="ttc" id="aclassvehicle_html_aab09d540376993e631367199ba1e6460"><div class="ttname"><a href="classvehicle.html#aab09d540376993e631367199ba1e6460">vehicle::cable_ports</a></div><div class="ttdeci">std::vector&lt; int &gt; cable_ports</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02196">vehicle.h:2196</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab18738d85258e3c9ac86197570f01eda"><div class="ttname"><a href="classvehicle.html#ab18738d85258e3c9ac86197570f01eda">vehicle::get_safe_reference</a></div><div class="ttdeci">safe_reference&lt; vehicle &gt; get_safe_reference()</div><div class="ttdoc">Return a pointer-like type that's automatically invalidated if this item is destroyed or assigned-to.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00248">vehicle.cpp:248</a></div></div>
<div class="ttc" id="aclassvehicle_html_ab24f511ea12640fe5f76e9609499ddd3"><div class="ttname"><a href="classvehicle.html#ab24f511ea12640fe5f76e9609499ddd3">vehicle::batteries</a></div><div class="ttdeci">std::vector&lt; int &gt; batteries</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02190">vehicle.h:2190</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac24aba962fd53d1a87bf57b52ce40508"><div class="ttname"><a href="classvehicle.html#ac24aba962fd53d1a87bf57b52ce40508">vehicle::is_towed</a></div><div class="ttdeci">bool is_towed() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06767">vehicle.cpp:6767</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac2d28a00ecef8f1077752dfca73c15eb"><div class="ttname"><a href="classvehicle.html#ac2d28a00ecef8f1077752dfca73c15eb">vehicle::precalc_mounts</a></div><div class="ttdeci">void precalc_mounts(int idir, const units::angle &amp;dir, const point &amp;pivot)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03338">vehicle.cpp:3338</a></div></div>
<div class="ttc" id="aclassvehicle_html_acdb2ebf673a32f657ac9e29b842ee7f5"><div class="ttname"><a href="classvehicle.html#acdb2ebf673a32f657ac9e29b842ee7f5">vehicle::part</a></div><div class="ttdeci">vehicle_part &amp; part(int part_num)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l08098">vehicle.cpp:8098</a></div></div>
<div class="ttc" id="aclassvehicle_html_ace5c25f3faffd8848491570cfb89f086"><div class="ttname"><a href="classvehicle.html#ace5c25f3faffd8848491570cfb89f086">vehicle::disp_name</a></div><div class="ttdeci">std::string disp_name() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__display_8cpp_source.html#l00032">vehicle_display.cpp:32</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad45ae53f6326f7fde4d8e59848470457"><div class="ttname"><a href="classvehicle.html#ad45ae53f6326f7fde4d8e59848470457">vehicle::coord_translate</a></div><div class="ttdeci">point coord_translate(const point &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03301">vehicle.cpp:3301</a></div></div>
<div class="ttc" id="aclassvehicle_html_adb993252c4c4131ced3d47e37ac0f811"><div class="ttname"><a href="classvehicle.html#adb993252c4c4131ced3d47e37ac0f811">vehicle::is_external_part</a></div><div class="ttdeci">bool is_external_part(const tripoint &amp;part_pt) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l06737">vehicle.cpp:6737</a></div></div>
<div class="ttc" id="aclassvehicle_html_adfbc0794c9bb9a5f1d75e1c52a2e561a"><div class="ttname"><a href="classvehicle.html#adfbc0794c9bb9a5f1d75e1c52a2e561a">vehicle::get_any_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_any_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and not removed.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03037">vehicle.cpp:3037</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae4f6d4393384b656bd9c12e14cb6e2cb"><div class="ttname"><a href="classvehicle.html#ae4f6d4393384b656bd9c12e14cb6e2cb">vehicle::part_at</a></div><div class="ttdeci">int part_at(const point &amp;dp) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03214">vehicle.cpp:3214</a></div></div>
<div class="ttc" id="aclassvehicle_html_af930d73448f446b3dc5fde3af07f90f9"><div class="ttname"><a href="classvehicle.html#af930d73448f446b3dc5fde3af07f90f9">vehicle::charge_battery</a></div><div class="ttdeci">int charge_battery(int amount, bool apply_loss=true)</div><div class="ttdoc">Charges batteries in connected vehicles/appliances.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05521">vehicle.cpp:5521</a></div></div>
<div class="ttc" id="aclassvehicle_html_afd4e8e8471b17450205d827dee8a41a5"><div class="ttname"><a href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">vehicle::pivot_anchor</a></div><div class="ttdeci">std::array&lt; point, 2 &gt; pivot_anchor</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02310">vehicle.h:2310</a></div></div>
<div class="ttc" id="aclassvisitable_html_a31e8c573cb6e4870cc005915efc103b3"><div class="ttname"><a href="classvisitable.html#a31e8c573cb6e4870cc005915efc103b3">visitable::find_parent</a></div><div class="ttdeci">item * find_parent(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00049">visitable.cpp:49</a></div></div>
<div class="ttc" id="aclassvisitable_html_abf24bf044bbf16def702fd78351fc46f"><div class="ttname"><a href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">visitable::has_item_with</a></div><div class="ttdeci">bool has_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00083">visitable.cpp:83</a></div></div>
<div class="ttc" id="aclassvisitable_html_adeb03e3af46e1b106a5f88f112add296"><div class="ttname"><a href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">visitable::remove_item</a></div><div class="ttdeci">item remove_item(item &amp;it)</div><div class="ttdoc">Removes and returns the item which must be contained by this instance.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00543">visitable.cpp:543</a></div></div>
<div class="ttc" id="aclassvisitable_html_af49d5ef7b3f2f0a8664c23097a56373f"><div class="ttname"><a href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">visitable::has_item</a></div><div class="ttdeci">bool has_item(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00075">visitable.cpp:75</a></div></div>
<div class="ttc" id="aclassvpart__info_html"><div class="ttname"><a href="classvpart__info.html">vpart_info</a></div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00239">veh_type.h:240</a></div></div>
<div class="ttc" id="aclassvpart__info_html_aea0fdb1ef9041e28d7856afae97dcc87"><div class="ttname"><a href="classvpart__info.html#aea0fdb1ef9041e28d7856afae97dcc87">vpart_info::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00256">veh_type.h:256</a></div></div>
<div class="ttc" id="aclassvpart__reference_html"><div class="ttname"><a href="classvpart__reference.html">vpart_reference</a></div><div class="ttdoc">This is a wrapper over a vehicle pointer and a reference to a part of it.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00153">vpart_position.h:154</a></div></div>
<div class="ttc" id="aclassweather__generator_html"><div class="ttname"><a href="classweather__generator.html">weather_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00028">weather_gen.h:29</a></div></div>
<div class="ttc" id="aclassweather__generator_html_a2a0b3598f7da7869d1ebf80b1e69e49a"><div class="ttname"><a href="classweather__generator.html#a2a0b3598f7da7869d1ebf80b1e69e49a">weather_generator::get_weather_temperature</a></div><div class="ttdeci">units::temperature get_weather_temperature(const tripoint &amp;, const time_point &amp;, unsigned) const</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8cpp_source.html#l00108">weather_gen.cpp:108</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a65e0974692317dee8098564d9952ec88"><div class="ttname"><a href="classweather__manager.html#a65e0974692317dee8098564d9952ec88">weather_manager::weather_precise</a></div><div class="ttdeci">pimpl&lt; w_point &gt; weather_precise</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00216">weather.h:216</a></div></div>
<div class="ttc" id="aclassweather__manager_html_ae21ca8b6895d5b684f224a35590e54a5"><div class="ttname"><a href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">weather_manager::windspeed</a></div><div class="ttdeci">int windspeed</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00211">weather.h:211</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html"><div class="ttname"><a href="clothing__mod_8h.html">clothing_mod.h</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152">clothing_mod_type</a></div><div class="ttdeci">clothing_mod_type</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00019">clothing_mod.h:19</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152a048d839f9586dc3494cec345d96cf53e"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a048d839f9586dc3494cec345d96cf53e">clothing_mod_type_bullet</a></div><div class="ttdeci">@ clothing_mod_type_bullet</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00024">clothing_mod.h:24</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152a342ae4773f302c28b2d13ff8438f7725"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a342ae4773f302c28b2d13ff8438f7725">clothing_mod_type_cut</a></div><div class="ttdeci">@ clothing_mod_type_cut</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00023">clothing_mod.h:23</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152a609bb7188e9c7d465c38a945ec9ff794"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152a609bb7188e9c7d465c38a945ec9ff794">clothing_mod_type_acid</a></div><div class="ttdeci">@ clothing_mod_type_acid</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00020">clothing_mod.h:20</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152ac78afc125f0318b59e4a332b4f7775d6"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ac78afc125f0318b59e4a332b4f7775d6">clothing_mod_type_encumbrance</a></div><div class="ttdeci">@ clothing_mod_type_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00025">clothing_mod.h:25</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152ace6c010f4f6485d88e125e59519e124a"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ace6c010f4f6485d88e125e59519e124a">clothing_mod_type_warmth</a></div><div class="ttdeci">@ clothing_mod_type_warmth</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00026">clothing_mod.h:26</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152ad2d4fd94e8035feea26ff5be258bf414"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ad2d4fd94e8035feea26ff5be258bf414">clothing_mod_type_bash</a></div><div class="ttdeci">@ clothing_mod_type_bash</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00022">clothing_mod.h:22</a></div></div>
<div class="ttc" id="aclothing__mod_8h_html_ab129387d97c2c7f0393c210d21df0152ad90ebbf164202c0c673c68e74286a9f2"><div class="ttname"><a href="clothing__mod_8h.html#ab129387d97c2c7f0393c210d21df0152ad90ebbf164202c0c673c68e74286a9f2">clothing_mod_type_fire</a></div><div class="ttdeci">@ clothing_mod_type_fire</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00021">clothing_mod.h:21</a></div></div>
<div class="ttc" id="aclzones_8h_html"><div class="ttname"><a href="clzones_8h.html">clzones.h</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00016">color.h:16</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00026">color.h:26</a></div></div>
<div class="ttc" id="acolor_8h_html_a2d8f37367a34632745626276dd4c9da6"><div class="ttname"><a href="color_8h.html#a2d8f37367a34632745626276dd4c9da6">c_black</a></div><div class="ttdeci">#define c_black</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00015">color.h:15</a></div></div>
<div class="ttc" id="acolor_8h_html_a39fc218ef401d918701636583a85a168"><div class="ttname"><a href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a></div><div class="ttdeci">#define c_magenta</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00023">color.h:23</a></div></div>
<div class="ttc" id="acolor_8h_html_a50c10870af6969c67007ca1374cf5da3"><div class="ttname"><a href="color_8h.html#a50c10870af6969c67007ca1374cf5da3">c_brown</a></div><div class="ttdeci">#define c_brown</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00024">color.h:24</a></div></div>
<div class="ttc" id="acolor_8h_html_a5738d18ff9e165cca088a623cb1883ae"><div class="ttname"><a href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a></div><div class="ttdeci">#define c_dark_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00018">color.h:18</a></div></div>
<div class="ttc" id="acolor_8h_html_a6c870a877c442090edead1e229b3953d"><div class="ttname"><a href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a></div><div class="ttdeci">#define c_pink</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_a894265dad49331c44392826fc52b848f"><div class="ttname"><a href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a></div><div class="ttdeci">#define c_light_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00022">color.h:22</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00025">color.h:25</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_a82aec5e351a3d6ef948536834dc1bbd0"><div class="ttname"><a href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a></div><div class="ttdeci">point ms_to_omt_copy(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00152">coordinate_conversions.cpp:152</a></div></div>
<div class="ttc" id="acoordinates_8h_html"><div class="ttname"><a href="coordinates_8h.html">coordinates.h</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a383a8345c0282c087ef788e4421c3ded"><div class="ttname"><a href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt; tripoint_abs_omt</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00726">coordinates.h:726</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acraft__command_8h_html"><div class="ttname"><a href="craft__command_8h.html">craft_command.h</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2a075a3e36a0a52dcbc568c05788e8a713">creature_size::medium</a></div><div class="ttdeci">@ medium</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a></div><div class="ttdeci">@ large</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a></div><div class="ttdeci">@ huge</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="adamage_8h_html"><div class="ttname"><a href="damage_8h.html">damage.h</a></div></div>
<div class="ttc" id="adebug_8cpp_html_a240782b16593c6bd607c64787c62da0e"><div class="ttname"><a href="debug_8cpp.html#a240782b16593c6bd607c64787c62da0e">DebugLog</a></div><div class="ttdeci">std::ostream &amp; DebugLog(DebugLevel lev, DebugClass cl)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8cpp_source.html#l01438">debug.cpp:1438</a></div></div>
<div class="ttc" id="adebug_8cpp_html_aa021995764a0c77f628e3411497239cc"><div class="ttname"><a href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a></div><div class="ttdeci">bool debug_mode</div><div class="ttdoc">Extended debugging mode, can be toggled during game.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8cpp_source.html#l00210">debug.cpp:210</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adebug_8h_html_ab658e6d84759440dbf3c890446075395acdde8abdfca282d5529a48366dcfe8fd"><div class="ttname"><a href="debug_8h.html#ab658e6d84759440dbf3c890446075395acdde8abdfca282d5529a48366dcfe8fd">D_WARNING</a></div><div class="ttdeci">@ D_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00141">debug.h:141</a></div></div>
<div class="ttc" id="adebug_8h_html_afa45cf12d72d4226196a7d03c54ad7d3a1d75ac3d58695ea88f599caa6a352098"><div class="ttname"><a href="debug_8h.html#afa45cf12d72d4226196a7d03c54ad7d3a1d75ac3d58695ea88f599caa6a352098">D_GAME</a></div><div class="ttdeci">@ D_GAME</div><div class="ttdoc">Main game class.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00167">debug.h:167</a></div></div>
<div class="ttc" id="adispersion_8h_html"><div class="ttname"><a href="dispersion_8h.html">dispersion.h</a></div></div>
<div class="ttc" id="adisplay_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">bodygraph_var::temp</a></div><div class="ttdeci">@ temp</div></div>
<div class="ttc" id="aeffect_8cpp_html_a26d5bc5ed07e16a92731edf2cc9db42d"><div class="ttname"><a href="effect_8cpp.html#a26d5bc5ed07e16a92731edf2cc9db42d">weed_msg</a></div><div class="ttdeci">void weed_msg(Character &amp;p)</div><div class="ttdoc">Handles the large variety of weed messages.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00129">effect.cpp:129</a></div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aeffect__source_8h_html"><div class="ttname"><a href="effect__source_8h.html">effect_source.h</a></div></div>
<div class="ttc" id="aenum__traits_8h_html"><div class="ttname"><a href="enum__traits_8h.html">enum_traits.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a851f5ac9941d720844d143ed9cfcf60a">ot_match_type::prefix</a></div><div class="ttdeci">@ prefix</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00354">enums.h:354</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5d"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5d">temperature_flag</a></div><div class="ttdeci">temperature_flag</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00100">enums.h:100</a></div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5da13f7e176e6012ee67a62acd2dbd6d39b"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da13f7e176e6012ee67a62acd2dbd6d39b">temperature_flag::ROOT_CELLAR</a></div><div class="ttdeci">@ ROOT_CELLAR</div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5da1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da1e23852820b9154316c7c06e2b7ba051">temperature_flag::NORMAL</a></div><div class="ttdeci">@ NORMAL</div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5da2023320d0009a528328d03b5796797be"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5da2023320d0009a528328d03b5796797be">temperature_flag::FREEZER</a></div><div class="ttdeci">@ FREEZER</div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5daa2ad87051c1d483b2f8bfc768cd0dba8"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5daa2ad87051c1d483b2f8bfc768cd0dba8">temperature_flag::HEATER</a></div><div class="ttdeci">@ HEATER</div></div>
<div class="ttc" id="aenums_8h_html_a5f18231241dd5fb662d1c5313636ec5dae8dfdc3882e77c31b5bb19ec1fc4c4c2"><div class="ttname"><a href="enums_8h.html#a5f18231241dd5fb662d1c5313636ec5dae8dfdc3882e77c31b5bb19ec1fc4c4c2">temperature_flag::FRIDGE</a></div><div class="ttdeci">@ FRIDGE</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8e"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8e">link_state</a></div><div class="ttdeci">link_state</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00477">enums.h:477</a></div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea0ed71b9dfd0b7544c114fa13da5ad015">link_state::vehicle_battery</a></div><div class="ttdeci">@ vehicle_battery</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea2bd9c0ed00116be1258e0cc66617d7c8">link_state::automatic</a></div><div class="ttdeci">@ automatic</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ea3a1722cb2f20e74ed2fff582d1c58424"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea3a1722cb2f20e74ed2fff582d1c58424">link_state::needs_reeling</a></div><div class="ttdeci">@ needs_reeling</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ea5e6b8267ce64e71d233da7d26939f5a5"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea5e6b8267ce64e71d233da7d26939f5a5">link_state::bio_cable</a></div><div class="ttdeci">@ bio_cable</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ea7b0746dabfaed032913530c495453f0f"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ea7b0746dabfaed032913530c495453f0f">link_state::ups</a></div><div class="ttdeci">@ ups</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eaacb3f90730059c48d6cf5cbeb8a9526d">link_state::vehicle_tow</a></div><div class="ttdeci">@ vehicle_tow</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eab089d8a49f33711544359d58ea8011ee">link_state::vehicle_port</a></div><div class="ttdeci">@ vehicle_port</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8ead96949e74b3f41ce25890bb1115bf5c6"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8ead96949e74b3f41ce25890bb1115bf5c6">link_state::solarpack</a></div><div class="ttdeci">@ solarpack</div></div>
<div class="ttc" id="aenums_8h_html_a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7"><div class="ttname"><a href="enums_8h.html#a7b313125fab5b29604be41a96f385a8eadd431dfaf61ea842693dca8be1ebcaf7">link_state::no_link</a></div><div class="ttdeci">@ no_link</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698">layer_level</a></div><div class="ttdeci">layer_level</div><div class="ttdoc">Possible layers that a piece of clothing/armor can occupy.</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00289">enums.h:289</a></div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1e23852820b9154316c7c06e2b7ba051">layer_level::NORMAL</a></div><div class="ttdeci">@ NORMAL</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a1f14b3050eadb1d797f12e2280943e4f">layer_level::OUTER</a></div><div class="ttdeci">@ OUTER</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a205d4b2f04ec6b6684a09c2c5c015d78">layer_level::AURA</a></div><div class="ttdeci">@ AURA</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a6fb80a6e208064bea091a862080e5075">layer_level::SKINTIGHT</a></div><div class="ttdeci">@ SKINTIGHT</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698a84bc9dc599a75b6f62f05f8f9f19455b">layer_level::WAIST</a></div><div class="ttdeci">@ WAIST</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698acfcf27190d11db9b157d1081b03a6659">layer_level::PERSONAL</a></div><div class="ttdeci">@ PERSONAL</div></div>
<div class="ttc" id="aenums_8h_html_aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d"><div class="ttname"><a href="enums_8h.html#aaabc9506ce6adb512e4600244aa38698ade27010d00c2ff4cf86eb4db146ae68d">layer_level::BELTED</a></div><div class="ttdeci">@ BELTED</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5">phase_id</a></div><div class="ttdeci">phase_id</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00234">enums.h:234</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a8c401a12a2610fd42cb90e25a5c538c7"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a8c401a12a2610fd42cb90e25a5c538c7">phase_id::PNULL</a></div><div class="ttdeci">@ PNULL</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5ad0dea69649a83749aa6bdf176092e8c9">phase_id::SOLID</a></div><div class="ttdeci">@ SOLID</div></div>
<div class="ttc" id="aexplosion_8h_html"><div class="ttname"><a href="explosion_8h.html">explosion.h</a></div></div>
<div class="ttc" id="afaction_8h_html"><div class="ttname"><a href="faction_8h.html">faction.h</a></div></div>
<div class="ttc" id="afault_8h_html"><div class="ttname"><a href="fault_8h.html">fault.h</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a0090428c1f6724209c133c6b04b037cd"><div class="ttname"><a href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a></div><div class="ttdeci">const field_type_str_id fd_fire(&quot;fd_fire&quot;)</div></div>
<div class="ttc" id="afield__type_8h_html"><div class="ttname"><a href="field__type_8h.html">field_type.h</a></div></div>
<div class="ttc" id="afire_8h_html"><div class="ttname"><a href="fire_8h.html">fire.h</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a03638a62d3262fbbe23590142201ab63"><div class="ttname"><a href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a></div><div class="ttdeci">const flag_id flag_RADIO_ACTIVATION(&quot;RADIO_ACTIVATION&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a05caeb5cb599136cfae695a27f316db7"><div class="ttname"><a href="flag_8cpp.html#a05caeb5cb599136cfae695a27f316db7">flag_SOLARPACK</a></div><div class="ttdeci">const flag_id flag_SOLARPACK(&quot;SOLARPACK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a0c4794877bf330a3ebe213d225ec32db"><div class="ttname"><a href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a></div><div class="ttdeci">const flag_id flag_NO_REPAIR(&quot;NO_REPAIR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a0ca4aa6ec2304125eedfe368adbdd613"><div class="ttname"><a href="flag_8cpp.html#a0ca4aa6ec2304125eedfe368adbdd613">flag_COLLAPSED_STOCK</a></div><div class="ttdeci">const flag_id flag_COLLAPSED_STOCK(&quot;COLLAPSED_STOCK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a1002f0b9b5b8f824ef9543ca6069271d"><div class="ttname"><a href="flag_8cpp.html#a1002f0b9b5b8f824ef9543ca6069271d">flag_STR_DRAW</a></div><div class="ttdeci">const flag_id flag_STR_DRAW(&quot;STR_DRAW&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a113069751de186b31961efa44fd458fd"><div class="ttname"><a href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a></div><div class="ttdeci">const flag_id flag_LITCIG(&quot;LITCIG&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a125f7dde665956a5bae736a8f73fafff"><div class="ttname"><a href="flag_8cpp.html#a125f7dde665956a5bae736a8f73fafff">flag_BURNOUT</a></div><div class="ttdeci">const flag_id flag_BURNOUT(&quot;BURNOUT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a130f7a6381a7705c555c545a851aa763"><div class="ttname"><a href="flag_8cpp.html#a130f7a6381a7705c555c545a851aa763">flag_TOBACCO</a></div><div class="ttdeci">const flag_id flag_TOBACCO(&quot;TOBACCO&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a1340a78c6350ff7b28b820d57af5c35d"><div class="ttname"><a href="flag_8cpp.html#a1340a78c6350ff7b28b820d57af5c35d">flag_UNBREAKABLE</a></div><div class="ttdeci">const flag_id flag_UNBREAKABLE(&quot;UNBREAKABLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a159fec9d4d5f11fb2e74992e39f0b066"><div class="ttname"><a href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a></div><div class="ttdeci">const flag_id flag_RECHARGE(&quot;RECHARGE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a16473ae4fa75bf2d7699f22f28811b00"><div class="ttname"><a href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a></div><div class="ttdeci">const flag_id flag_NO_PACKED(&quot;NO_PACKED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a174140adb2da2c8f0ec6e3779cc5aee2"><div class="ttname"><a href="flag_8cpp.html#a174140adb2da2c8f0ec6e3779cc5aee2">flag_RADIOSIGNAL_3</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_3(&quot;RADIOSIGNAL_3&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a1d6da470e2d0c764e84877215a30f42c"><div class="ttname"><a href="flag_8cpp.html#a1d6da470e2d0c764e84877215a30f42c">flag_NO_RELOAD</a></div><div class="ttdeci">const flag_id flag_NO_RELOAD(&quot;NO_RELOAD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a1dbd80575a5cd32a6d9214f4c15a4e5b"><div class="ttname"><a href="flag_8cpp.html#a1dbd80575a5cd32a6d9214f4c15a4e5b">flag_NEEDS_UNFOLD</a></div><div class="ttdeci">const flag_id flag_NEEDS_UNFOLD(&quot;NEEDS_UNFOLD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a20d9b9b13ede35084497c208f9938184"><div class="ttname"><a href="flag_8cpp.html#a20d9b9b13ede35084497c208f9938184">flag_RADIOSIGNAL_1</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_1(&quot;RADIOSIGNAL_1&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a2a03abb968c370e7306f145af285257b"><div class="ttname"><a href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a></div><div class="ttdeci">const flag_id flag_NO_STERILE(&quot;NO_STERILE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3113b401ba0ad2aa13b463985dd33812"><div class="ttname"><a href="flag_8cpp.html#a3113b401ba0ad2aa13b463985dd33812">flag_HIDDEN_HALLU</a></div><div class="ttdeci">const flag_id flag_HIDDEN_HALLU(&quot;HIDDEN_HALLU&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a32853644cb5744de33f201e235ac0809"><div class="ttname"><a href="flag_8cpp.html#a32853644cb5744de33f201e235ac0809">flag_FOLDED_STOCK</a></div><div class="ttdeci">const flag_id flag_FOLDED_STOCK(&quot;FOLDED_STOCK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3316fede84004fcf20073e46c58f2114"><div class="ttname"><a href="flag_8cpp.html#a3316fede84004fcf20073e46c58f2114">flag_UNDERSIZE</a></div><div class="ttdeci">const flag_id flag_UNDERSIZE(&quot;UNDERSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3321b67b0b4f70ac731073dbc6aef510"><div class="ttname"><a href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a></div><div class="ttdeci">const flag_id flag_DIAMOND(&quot;DIAMOND&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3402d96f947f3ce1d7a3c327a870c185"><div class="ttname"><a href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a></div><div class="ttdeci">const flag_id flag_FILTHY(&quot;FILTHY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34bae5f60acc126973461e6dc5162d3a"><div class="ttname"><a href="flag_8cpp.html#a34bae5f60acc126973461e6dc5162d3a">flag_MUSHY</a></div><div class="ttdeci">const flag_id flag_MUSHY(&quot;MUSHY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34da07ccc8b142916d801b317ffa84d1"><div class="ttname"><a href="flag_8cpp.html#a34da07ccc8b142916d801b317ffa84d1">flag_INEDIBLE</a></div><div class="ttdeci">const flag_id flag_INEDIBLE(&quot;INEDIBLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a34e497e60596636a67ecf5ea476840b2"><div class="ttname"><a href="flag_8cpp.html#a34e497e60596636a67ecf5ea476840b2">flag_DIRTY</a></div><div class="ttdeci">const flag_id flag_DIRTY(&quot;DIRTY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3bcbf7092a1bea453e53428f8bc5881f"><div class="ttname"><a href="flag_8cpp.html#a3bcbf7092a1bea453e53428f8bc5881f">flag_CONSUMABLE</a></div><div class="ttdeci">const flag_id flag_CONSUMABLE(&quot;CONSUMABLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3bd057608cf14b681c32b1cef61d7b3d"><div class="ttname"><a href="flag_8cpp.html#a3bd057608cf14b681c32b1cef61d7b3d">flag_DISABLE_SIGHTS</a></div><div class="ttdeci">const flag_id flag_DISABLE_SIGHTS(&quot;DISABLE_SIGHTS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a3e2d3cbf6b78ce65033d1f9cbf1f59bf"><div class="ttname"><a href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a></div><div class="ttdeci">const flag_id flag_USE_UPS(&quot;USE_UPS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a410cf578a9c95e78d5ae66287e05dc58"><div class="ttname"><a href="flag_8cpp.html#a410cf578a9c95e78d5ae66287e05dc58">flag_REDUCED_BASHING</a></div><div class="ttdeci">const flag_id flag_REDUCED_BASHING(&quot;REDUCED_BASHING&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4128fdaa3fee42416124b2a161b2c327"><div class="ttname"><a href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a></div><div class="ttdeci">const flag_id flag_SOLARPACK_ON(&quot;SOLARPACK_ON&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a43bdf243cb0c0e6f3c61a551442bcfc2"><div class="ttname"><a href="flag_8cpp.html#a43bdf243cb0c0e6f3c61a551442bcfc2">flag_IRRADIATED</a></div><div class="ttdeci">const flag_id flag_IRRADIATED(&quot;IRRADIATED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a43d8d65c837a9b018e1a9ed1a41bd6b7"><div class="ttname"><a href="flag_8cpp.html#a43d8d65c837a9b018e1a9ed1a41bd6b7">flag_NO_DROP</a></div><div class="ttdeci">const flag_id flag_NO_DROP(&quot;NO_DROP&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a465180aa3b409ee617f564f29ec8ce4f"><div class="ttname"><a href="flag_8cpp.html#a465180aa3b409ee617f564f29ec8ce4f">flag_OVERSIZE</a></div><div class="ttdeci">const flag_id flag_OVERSIZE(&quot;OVERSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b1e66074009ee39624c81309110a96f"><div class="ttname"><a href="flag_8cpp.html#a4b1e66074009ee39624c81309110a96f">flag_SPAWN_ACTIVE</a></div><div class="ttdeci">const flag_id flag_SPAWN_ACTIVE(&quot;SPAWN_ACTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b9d4fe0b26fc9079ae038232f080066"><div class="ttname"><a href="flag_8cpp.html#a4b9d4fe0b26fc9079ae038232f080066">flag_REACH_ATTACK</a></div><div class="ttdeci">const flag_id flag_REACH_ATTACK(&quot;REACH_ATTACK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4efafd2b42751d5a01f93e10ed31af01"><div class="ttname"><a href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a></div><div class="ttdeci">const flag_id flag_HOT(&quot;HOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a50220e81539eb4a6d7a2571ae4ebbeec"><div class="ttname"><a href="flag_8cpp.html#a50220e81539eb4a6d7a2571ae4ebbeec">flag_SHREDDED</a></div><div class="ttdeci">const flag_id flag_SHREDDED(&quot;SHREDDED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5095a4bb5199bf4c0981de000e15b8bd"><div class="ttname"><a href="flag_8cpp.html#a5095a4bb5199bf4c0981de000e15b8bd">flag_FIELD_DRESS_FAILED</a></div><div class="ttdeci">const flag_id flag_FIELD_DRESS_FAILED(&quot;FIELD_DRESS_FAILED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a53001758768062a7756a6d5b5cd91789"><div class="ttname"><a href="flag_8cpp.html#a53001758768062a7756a6d5b5cd91789">flag_IS_ARMOR</a></div><div class="ttdeci">const flag_id flag_IS_ARMOR(&quot;IS_ARMOR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a53d0bc56754749f4b8cea22528bc79c0"><div class="ttname"><a href="flag_8cpp.html#a53d0bc56754749f4b8cea22528bc79c0">flag_MAGIC_FOCUS</a></div><div class="ttdeci">const flag_id flag_MAGIC_FOCUS(&quot;MAGIC_FOCUS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a54d33006e58867ebfd2e641e2dcf8ad4"><div class="ttname"><a href="flag_8cpp.html#a54d33006e58867ebfd2e641e2dcf8ad4">flag_CHARGEDIM</a></div><div class="ttdeci">const flag_id flag_CHARGEDIM(&quot;CHARGEDIM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5685feafd05d6c3a374460c0b50ad725"><div class="ttname"><a href="flag_8cpp.html#a5685feafd05d6c3a374460c0b50ad725">flag_NEVER_JAMS</a></div><div class="ttdeci">const flag_id flag_NEVER_JAMS(&quot;NEVER_JAMS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5a03883a0cc36bc27471d1ae7423b86c"><div class="ttname"><a href="flag_8cpp.html#a5a03883a0cc36bc27471d1ae7423b86c">flag_COLLAPSE_CONTENTS</a></div><div class="ttdeci">const flag_id flag_COLLAPSE_CONTENTS(&quot;COLLAPSE_CONTENTS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5baa40ca4d295b45511b5b6775bed635"><div class="ttname"><a href="flag_8cpp.html#a5baa40ca4d295b45511b5b6775bed635">flag_NONCONDUCTIVE</a></div><div class="ttdeci">const flag_id flag_NONCONDUCTIVE(&quot;NONCONDUCTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5c4fceabb32d87b58efd54bf351e8249"><div class="ttname"><a href="flag_8cpp.html#a5c4fceabb32d87b58efd54bf351e8249">flag_ZOOM</a></div><div class="ttdeci">const flag_id flag_ZOOM(&quot;ZOOM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5d1fa7fb2e0d7c717f7bc1cc461407db"><div class="ttname"><a href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a></div><div class="ttdeci">const flag_id flag_VEHICLE(&quot;VEHICLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a5df341d5feeb19e516dc4af0d3851f86"><div class="ttname"><a href="flag_8cpp.html#a5df341d5feeb19e516dc4af0d3851f86">flag_SLOW_WIELD</a></div><div class="ttdeci">const flag_id flag_SLOW_WIELD(&quot;SLOW_WIELD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a601e941cb8aaf8e22fbbe2600a467892"><div class="ttname"><a href="flag_8cpp.html#a601e941cb8aaf8e22fbbe2600a467892">flag_FREEZERBURN</a></div><div class="ttdeci">const flag_id flag_FREEZERBURN(&quot;FREEZERBURN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a617ff8737418db1b70ad7c05f3044b7a"><div class="ttname"><a href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a></div><div class="ttdeci">const flag_id flag_FROZEN(&quot;FROZEN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a61c1220c2f02301b1f4e854b0dd6a670"><div class="ttname"><a href="flag_8cpp.html#a61c1220c2f02301b1f4e854b0dd6a670">flag_FROM_FROZEN_LIQUID</a></div><div class="ttdeci">const flag_id flag_FROM_FROZEN_LIQUID(&quot;FROM_FROZEN_LIQUID&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a62f31284e240af57f1ccb9b19a39c161"><div class="ttname"><a href="flag_8cpp.html#a62f31284e240af57f1ccb9b19a39c161">flag_LEAK_ALWAYS</a></div><div class="ttdeci">const flag_id flag_LEAK_ALWAYS(&quot;LEAK_ALWAYS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6315fddde1392c4f6fa530a3e2ab1cc7"><div class="ttname"><a href="flag_8cpp.html#a6315fddde1392c4f6fa530a3e2ab1cc7">flag_RADIO_INVOKE_PROC</a></div><div class="ttdeci">const flag_id flag_RADIO_INVOKE_PROC(&quot;RADIO_INVOKE_PROC&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6467459b9f0b5c87b0ed0802bc5ebf84"><div class="ttname"><a href="flag_8cpp.html#a6467459b9f0b5c87b0ed0802bc5ebf84">flag_SOFT</a></div><div class="ttdeci">const flag_id flag_SOFT(&quot;SOFT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6a2be000a54a3066454c455b0f8545cb"><div class="ttname"><a href="flag_8cpp.html#a6a2be000a54a3066454c455b0f8545cb">flag_NO_WEAR_EFFECT</a></div><div class="ttdeci">const flag_id flag_NO_WEAR_EFFECT(&quot;NO_WEAR_EFFECT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6ad3ff7f192f86d4b2b41331115e7e8c"><div class="ttname"><a href="flag_8cpp.html#a6ad3ff7f192f86d4b2b41331115e7e8c">flag_WIND_EXTINGUISH</a></div><div class="ttdeci">const flag_id flag_WIND_EXTINGUISH(&quot;WIND_EXTINGUISH&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6caf1bb724374595ea55666b7aa9dc29"><div class="ttname"><a href="flag_8cpp.html#a6caf1bb724374595ea55666b7aa9dc29">flag_RAIN_PROTECT</a></div><div class="ttdeci">const flag_id flag_RAIN_PROTECT(&quot;RAIN_PROTECT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6d39c77be08ccc6d143a1ea5da581656"><div class="ttname"><a href="flag_8cpp.html#a6d39c77be08ccc6d143a1ea5da581656">flag_FAKE_MILL</a></div><div class="ttdeci">const flag_id flag_FAKE_MILL(&quot;FAKE_MILL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6dc199244886ed3da302fbbb227ff922"><div class="ttname"><a href="flag_8cpp.html#a6dc199244886ed3da302fbbb227ff922">flag_PALS_SMALL</a></div><div class="ttdeci">const flag_id flag_PALS_SMALL(&quot;PALS_SMALL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a6f6f3fef65c1799282e6f0e6737a15d0"><div class="ttname"><a href="flag_8cpp.html#a6f6f3fef65c1799282e6f0e6737a15d0">flag_LEAK_DAM</a></div><div class="ttdeci">const flag_id flag_LEAK_DAM(&quot;LEAK_DAM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a70f7136fda398c1e666898d83307791c"><div class="ttname"><a href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a></div><div class="ttdeci">const flag_id flag_RADIO_MOD(&quot;RADIO_MOD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a72f4398fcd3abb5ecc58107488f26c5e"><div class="ttname"><a href="flag_8cpp.html#a72f4398fcd3abb5ecc58107488f26c5e">flag_ITEM_BROKEN</a></div><div class="ttdeci">const flag_id flag_ITEM_BROKEN(&quot;ITEM_BROKEN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a743b71859cbe5e1bb0852892ece0e7e6"><div class="ttname"><a href="flag_8cpp.html#a743b71859cbe5e1bb0852892ece0e7e6">flag_wooled</a></div><div class="ttdeci">const flag_id flag_wooled(&quot;wooled&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a74ea4bf25fd1d1476b4e5f7065c855a2"><div class="ttname"><a href="flag_8cpp.html#a74ea4bf25fd1d1476b4e5f7065c855a2">flag_CORPSE</a></div><div class="ttdeci">const flag_id flag_CORPSE(&quot;CORPSE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a787101f38315d6a40498ff0e558fdcd5"><div class="ttname"><a href="flag_8cpp.html#a787101f38315d6a40498ff0e558fdcd5">flag_ALWAYS_TWOHAND</a></div><div class="ttdeci">const flag_id flag_ALWAYS_TWOHAND(&quot;ALWAYS_TWOHAND&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a78f44342fdfdab8986b77a4847c4aca0"><div class="ttname"><a href="flag_8cpp.html#a78f44342fdfdab8986b77a4847c4aca0">flag_PADDED</a></div><div class="ttdeci">const flag_id flag_PADDED(&quot;PADDED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7b1205d03feada08c8559220b861548a"><div class="ttname"><a href="flag_8cpp.html#a7b1205d03feada08c8559220b861548a">flag_RADIOSIGNAL_2</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_2(&quot;RADIOSIGNAL_2&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7d8a64454549e0bab5aa7d7a7091f9d1"><div class="ttname"><a href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a></div><div class="ttdeci">const flag_id flag_USES_BIONIC_POWER(&quot;USES_BIONIC_POWER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7de72a0c864c849eaed5fb1c01ed1486"><div class="ttname"><a href="flag_8cpp.html#a7de72a0c864c849eaed5fb1c01ed1486">flag_GIBBED</a></div><div class="ttdeci">const flag_id flag_GIBBED(&quot;GIBBED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7dffac54d4c781ade6642ecb6365d4db"><div class="ttname"><a href="flag_8cpp.html#a7dffac54d4c781ade6642ecb6365d4db">flag_RELOAD_EJECT</a></div><div class="ttdeci">const flag_id flag_RELOAD_EJECT(&quot;RELOAD_EJECT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7e1e05972c269d40d228d92bbea6f9b7"><div class="ttname"><a href="flag_8cpp.html#a7e1e05972c269d40d228d92bbea6f9b7">flag_BYPRODUCT</a></div><div class="ttdeci">const flag_id flag_BYPRODUCT(&quot;BYPRODUCT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7fc2536a6bd2f1284ae3cff8b0c16d06"><div class="ttname"><a href="flag_8cpp.html#a7fc2536a6bd2f1284ae3cff8b0c16d06">flag_DANGEROUS</a></div><div class="ttdeci">const flag_id flag_DANGEROUS(&quot;DANGEROUS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a80adbb857748c7a6d3ab6c83a9ad8413"><div class="ttname"><a href="flag_8cpp.html#a80adbb857748c7a6d3ab6c83a9ad8413">flag_MAG_BELT</a></div><div class="ttdeci">const flag_id flag_MAG_BELT(&quot;MAG_BELT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a82194a206f84ad991a75e480359d8698"><div class="ttname"><a href="flag_8cpp.html#a82194a206f84ad991a75e480359d8698">flag_RADIOACTIVE</a></div><div class="ttdeci">const flag_id flag_RADIOACTIVE(&quot;RADIOACTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a85e69021f878bebdb83c52b769a60a3c"><div class="ttname"><a href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a></div><div class="ttdeci">const flag_id flag_WET(&quot;WET&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a893579a59613d945262c9cf9d9e8890c"><div class="ttname"><a href="flag_8cpp.html#a893579a59613d945262c9cf9d9e8890c">flag_WATER_EXTINGUISH</a></div><div class="ttdeci">const flag_id flag_WATER_EXTINGUISH(&quot;WATER_EXTINGUISH&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a91b719509dce6a71673f9183835e8939"><div class="ttname"><a href="flag_8cpp.html#a91b719509dce6a71673f9183835e8939">flag_WATERPROOF_GUN</a></div><div class="ttdeci">const flag_id flag_WATERPROOF_GUN(&quot;WATERPROOF_GUN&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a92e7c63899683aef8cd8288bbf555986"><div class="ttname"><a href="flag_8cpp.html#a92e7c63899683aef8cd8288bbf555986">flag_COLLAPSIBLE_STOCK</a></div><div class="ttdeci">const flag_id flag_COLLAPSIBLE_STOCK(&quot;COLLAPSIBLE_STOCK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a99021b3b0d6f54bbcd73ed3ff33a1bb7"><div class="ttname"><a href="flag_8cpp.html#a99021b3b0d6f54bbcd73ed3ff33a1bb7">flag_CABLE_SPOOL</a></div><div class="ttdeci">const flag_id flag_CABLE_SPOOL(&quot;CABLE_SPOOL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9b3c7ef799800088949e9bf1a326be7c"><div class="ttname"><a href="flag_8cpp.html#a9b3c7ef799800088949e9bf1a326be7c">flag_COLD</a></div><div class="ttdeci">const flag_id flag_COLD(&quot;COLD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9cbb8a5112cb5a6227de1e4867bf5d41"><div class="ttname"><a href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a></div><div class="ttdeci">const flag_id flag_HIDDEN_POISON(&quot;HIDDEN_POISON&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9e3e9a6a06acbe427c7a6071ce59aade"><div class="ttname"><a href="flag_8cpp.html#a9e3e9a6a06acbe427c7a6071ce59aade">flag_SKINNED</a></div><div class="ttdeci">const flag_id flag_SKINNED(&quot;SKINNED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9f2a9f68be69a11f6f6fcbedbfe05835"><div class="ttname"><a href="flag_8cpp.html#a9f2a9f68be69a11f6f6fcbedbfe05835">flag_PALS_MEDIUM</a></div><div class="ttdeci">const flag_id flag_PALS_MEDIUM(&quot;PALS_MEDIUM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9f68b56ceb405a195162c8e5e3c66151"><div class="ttname"><a href="flag_8cpp.html#a9f68b56ceb405a195162c8e5e3c66151">flag_PUMP_ACTION</a></div><div class="ttdeci">const flag_id flag_PUMP_ACTION(&quot;PUMP_ACTION&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa02e6b316d23f2611650b8f60a7c87f0"><div class="ttname"><a href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a></div><div class="ttdeci">const flag_id flag_IS_UPS(&quot;IS_UPS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa1084eab5da5ecd3f6efe55e0216eb96"><div class="ttname"><a href="flag_8cpp.html#aa1084eab5da5ecd3f6efe55e0216eb96">flag_PRIMITIVE_RANGED_WEAPON</a></div><div class="ttdeci">const flag_id flag_PRIMITIVE_RANGED_WEAPON(&quot;PRIMITIVE_RANGED_WEAPON&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa4483d80251dc96dd0c8313d8a6366f9"><div class="ttname"><a href="flag_8cpp.html#aa4483d80251dc96dd0c8313d8a6366f9">flag_RELOAD_AND_SHOOT</a></div><div class="ttdeci">const flag_id flag_RELOAD_AND_SHOOT(&quot;RELOAD_AND_SHOOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa5ce6fa0b5d6f6491b89348c50364c69"><div class="ttname"><a href="flag_8cpp.html#aa5ce6fa0b5d6f6491b89348c50364c69">flag_REDUCED_WEIGHT</a></div><div class="ttdeci">const flag_id flag_REDUCED_WEIGHT(&quot;REDUCED_WEIGHT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa88912d2b51e49a4122192f1270aa074"><div class="ttname"><a href="flag_8cpp.html#aa88912d2b51e49a4122192f1270aa074">flag_NO_SALVAGE</a></div><div class="ttdeci">const flag_id flag_NO_SALVAGE(&quot;NO_SALVAGE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aaaeb9d1427a35e25ade0ed04ee039c53"><div class="ttname"><a href="flag_8cpp.html#aaaeb9d1427a35e25ade0ed04ee039c53">flag_MELTS</a></div><div class="ttdeci">const flag_id flag_MELTS(&quot;MELTS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aab1184bf751613f16480d6412006f74e"><div class="ttname"><a href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a></div><div class="ttdeci">const flag_id flag_FIT(&quot;FIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aac4dd48e6bf871e1d3d952771499ec13"><div class="ttname"><a href="flag_8cpp.html#aac4dd48e6bf871e1d3d952771499ec13">flag_WATER_BREAK</a></div><div class="ttdeci">const flag_id flag_WATER_BREAK(&quot;WATER_BREAK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab0fa10b3db4d9eb9429524f8e0d0f0cd"><div class="ttname"><a href="flag_8cpp.html#ab0fa10b3db4d9eb9429524f8e0d0f0cd">flag_NO_UNLOAD</a></div><div class="ttdeci">const flag_id flag_NO_UNLOAD(&quot;NO_UNLOAD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab128f2bb0e074fd1dfe41c4abdbd1b4f"><div class="ttname"><a href="flag_8cpp.html#ab128f2bb0e074fd1dfe41c4abdbd1b4f">flag_PULPED</a></div><div class="ttdeci">const flag_id flag_PULPED(&quot;PULPED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab6927a1d5285fa81b3adeef6193fc08e"><div class="ttname"><a href="flag_8cpp.html#ab6927a1d5285fa81b3adeef6193fc08e">flag_PROCESSING_RESULT</a></div><div class="ttdeci">const flag_id flag_PROCESSING_RESULT(&quot;PROCESSING_RESULT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab701cd1281e9805c39c0e8c3df11c4fc"><div class="ttname"><a href="flag_8cpp.html#ab701cd1281e9805c39c0e8c3df11c4fc">flag_PROCESSING</a></div><div class="ttdeci">const flag_id flag_PROCESSING(&quot;PROCESSING&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab84b6994b5f9c90dc9f9fc46cb664acc"><div class="ttname"><a href="flag_8cpp.html#ab84b6994b5f9c90dc9f9fc46cb664acc">flag_PUMP_RAIL_COMPATIBLE</a></div><div class="ttdeci">const flag_id flag_PUMP_RAIL_COMPATIBLE(&quot;PUMP_RAIL_COMPATIBLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab929c3f9e2363fbe8eff00ba7cbc7203"><div class="ttname"><a href="flag_8cpp.html#ab929c3f9e2363fbe8eff00ba7cbc7203">flag_FAKE_SMOKE</a></div><div class="ttdeci">const flag_id flag_FAKE_SMOKE(&quot;FAKE_SMOKE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_abe92fef8aa87ba82f19f82a32795f3ed"><div class="ttname"><a href="flag_8cpp.html#abe92fef8aa87ba82f19f82a32795f3ed">flag_INTEGRATED</a></div><div class="ttdeci">const flag_id flag_INTEGRATED(&quot;INTEGRATED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac0e939866663d087e37274163b7536b3"><div class="ttname"><a href="flag_8cpp.html#ac0e939866663d087e37274163b7536b3">flag_STURDY</a></div><div class="ttdeci">const flag_id flag_STURDY(&quot;STURDY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac24eb8217d45a36465714b8ce88f8172"><div class="ttname"><a href="flag_8cpp.html#ac24eb8217d45a36465714b8ce88f8172">flag_FRAGILE</a></div><div class="ttdeci">const flag_id flag_FRAGILE(&quot;FRAGILE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac2e75bd71461a88a762c817f199feb23"><div class="ttname"><a href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a></div><div class="ttdeci">const flag_id flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac381c7232a1e13a326da1727a0ea297c"><div class="ttname"><a href="flag_8cpp.html#ac381c7232a1e13a326da1727a0ea297c">flag_MUNDANE</a></div><div class="ttdeci">const flag_id flag_MUNDANE(&quot;MUNDANE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac5b035ad53c74c5becc89b7492bd797b"><div class="ttname"><a href="flag_8cpp.html#ac5b035ad53c74c5becc89b7492bd797b">flag_REVIVE_SPECIAL</a></div><div class="ttdeci">const flag_id flag_REVIVE_SPECIAL(&quot;REVIVE_SPECIAL&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac66c1ad517271b2748b638ca6fbba212"><div class="ttname"><a href="flag_8cpp.html#ac66c1ad517271b2748b638ca6fbba212">flag_SPEEDLOADER</a></div><div class="ttdeci">const flag_id flag_SPEEDLOADER(&quot;SPEEDLOADER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac8832d07bcc08aa7dc7a1cefea521b12"><div class="ttname"><a href="flag_8cpp.html#ac8832d07bcc08aa7dc7a1cefea521b12">flag_SPEEDLOADER_CLIP</a></div><div class="ttdeci">const flag_id flag_SPEEDLOADER_CLIP(&quot;SPEEDLOADER_CLIP&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_acaf5771186b622ceab78decadc42556f"><div class="ttname"><a href="flag_8cpp.html#acaf5771186b622ceab78decadc42556f">flag_QUARTERED</a></div><div class="ttdeci">const flag_id flag_QUARTERED(&quot;QUARTERED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_acb8b508d58dee8c00950d284b017e520"><div class="ttname"><a href="flag_8cpp.html#acb8b508d58dee8c00950d284b017e520">flag_IRREMOVABLE</a></div><div class="ttdeci">const flag_id flag_IRREMOVABLE(&quot;IRREMOVABLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad0b1ce806d6f23c25a67db4e5043f6f0"><div class="ttname"><a href="flag_8cpp.html#ad0b1ce806d6f23c25a67db4e5043f6f0">flag_WATER_BREAK_ACTIVE</a></div><div class="ttdeci">const flag_id flag_WATER_BREAK_ACTIVE(&quot;WATER_BREAK_ACTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad12eb85cdd376a51aa3859ca5894377b"><div class="ttname"><a href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a></div><div class="ttdeci">const flag_id flag_SPLINT(&quot;SPLINT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad4ce7408d409de48211750e6a37bdd31"><div class="ttname"><a href="flag_8cpp.html#ad4ce7408d409de48211750e6a37bdd31">flag_TOURNIQUET</a></div><div class="ttdeci">const flag_id flag_TOURNIQUET(&quot;TOURNIQUET&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad5d45b309cb751520ede6a1c591e20a6"><div class="ttname"><a href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a></div><div class="ttdeci">const flag_id flag_BOMB(&quot;BOMB&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_add083f5a0fd286f98a1b027d93eccbac"><div class="ttname"><a href="flag_8cpp.html#add083f5a0fd286f98a1b027d93eccbac">flag_FIELD_DRESS</a></div><div class="ttdeci">const flag_id flag_FIELD_DRESS(&quot;FIELD_DRESS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae4145a31d8da9f94a59bb3d6fb13436f"><div class="ttname"><a href="flag_8cpp.html#ae4145a31d8da9f94a59bb3d6fb13436f">flag_FIRE_TWOHAND</a></div><div class="ttdeci">const flag_id flag_FIRE_TWOHAND(&quot;FIRE_TWOHAND&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae4e605cf7ef27103856049f726bcfdc8"><div class="ttname"><a href="flag_8cpp.html#ae4e605cf7ef27103856049f726bcfdc8">flag_CONDUCTIVE</a></div><div class="ttdeci">const flag_id flag_CONDUCTIVE(&quot;CONDUCTIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae741f745ab363a02cbe98252522460f5"><div class="ttname"><a href="flag_8cpp.html#ae741f745ab363a02cbe98252522460f5">flag_PALS_LARGE</a></div><div class="ttdeci">const flag_id flag_PALS_LARGE(&quot;PALS_LARGE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae7bba76e6be075e2bd38bcf730e4f4f9"><div class="ttname"><a href="flag_8cpp.html#ae7bba76e6be075e2bd38bcf730e4f4f9">flag_HARD</a></div><div class="ttdeci">const flag_id flag_HARD(&quot;HARD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae8607045269d50f5b92c4e7a4c09e95c"><div class="ttname"><a href="flag_8cpp.html#ae8607045269d50f5b92c4e7a4c09e95c">flag_NO_PARASITES</a></div><div class="ttdeci">const flag_id flag_NO_PARASITES(&quot;NO_PARASITES&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aea4b740c27cf414b16f59faf9a1e4c0e"><div class="ttname"><a href="flag_8cpp.html#aea4b740c27cf414b16f59faf9a1e4c0e">flag_REMOVED_STOCK</a></div><div class="ttdeci">const flag_id flag_REMOVED_STOCK(&quot;REMOVED_STOCK&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af2023595557d26bb6f4c19f23578ec75"><div class="ttname"><a href="flag_8cpp.html#af2023595557d26bb6f4c19f23578ec75">flag_NANOFAB_TEMPLATE</a></div><div class="ttdeci">const flag_id flag_NANOFAB_TEMPLATE(&quot;NANOFAB_TEMPLATE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af5cf62257c50aab58dba36dbb4d834f6"><div class="ttname"><a href="flag_8cpp.html#af5cf62257c50aab58dba36dbb4d834f6">flag_REACH3</a></div><div class="ttdeci">const flag_id flag_REACH3(&quot;REACH3&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af71f2c6320f42a26aa792634c2dd0035"><div class="ttname"><a href="flag_8cpp.html#af71f2c6320f42a26aa792634c2dd0035">flag_RELOAD_ONE</a></div><div class="ttdeci">const flag_id flag_RELOAD_ONE(&quot;RELOAD_ONE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af99f81babbf43195fabadad217d12fca"><div class="ttname"><a href="flag_8cpp.html#af99f81babbf43195fabadad217d12fca">flag_IS_PET_ARMOR</a></div><div class="ttdeci">const flag_id flag_IS_PET_ARMOR(&quot;IS_PET_ARMOR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afa7c0e8f7a4654a1b825f73111f5fe8e"><div class="ttname"><a href="flag_8cpp.html#afa7c0e8f7a4654a1b825f73111f5fe8e">flag_PSEUDO</a></div><div class="ttdeci">const flag_id flag_PSEUDO(&quot;PSEUDO&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afc6a264fae40049bceeea9bd1e1b6fb7"><div class="ttname"><a href="flag_8cpp.html#afc6a264fae40049bceeea9bd1e1b6fb7">flag_ELECTRONIC</a></div><div class="ttdeci">const flag_id flag_ELECTRONIC(&quot;ELECTRONIC&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afd2f01270d78e47d439c7c4a44c5d1a6"><div class="ttname"><a href="flag_8cpp.html#afd2f01270d78e47d439c7c4a44c5d1a6">flag_BIPOD</a></div><div class="ttdeci">const flag_id flag_BIPOD(&quot;BIPOD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afe61856808e76510f6ae6de1da02a184"><div class="ttname"><a href="flag_8cpp.html#afe61856808e76510f6ae6de1da02a184">flag_UNRECOVERABLE</a></div><div class="ttdeci">const flag_id flag_UNRECOVERABLE(&quot;UNRECOVERABLE&quot;)</div></div>
<div class="ttc" id="aflag_8h_html"><div class="ttname"><a href="flag_8h.html">flag.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_a20e1e24b746d8844d2e554086ba3b3bb"><div class="ttname"><a href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13866">game.cpp:13866</a></div></div>
<div class="ttc" id="agame_8cpp_html_abe70ab885639c40fb92f3adf812ebaf6"><div class="ttname"><a href="game_8cpp.html#abe70ab885639c40fb92f3adf812ebaf6">get_heat_radiation</a></div><div class="ttdeci">units::temperature_delta get_heat_radiation(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01614">game.cpp:1614</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_adb30c3833accc6babc195d1307374ef4"><div class="ttname"><a href="game_8cpp.html#adb30c3833accc6babc195d1307374ef4">get_convection_temperature</a></div><div class="ttdeci">units::temperature_delta get_convection_temperature(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01687">game.cpp:1687</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame_8h_html_ae92a399600a4c7e5972eb3e98e3cc718"><div class="ttname"><a href="game_8h.html#ae92a399600a4c7e5972eb3e98e3cc718">item_filter</a></div><div class="ttdeci">std::function&lt; bool(const item &amp;)&gt; item_filter</div><div class="ttdef"><b>Definition:</b> <a href="game_8h_source.html#l00104">game.h:104</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a1f4708eff2561553fb330e402b0f58dc"><div class="ttname"><a href="game__constants_8h.html#a1f4708eff2561553fb330e402b0f58dc">AVERAGE_ANNUAL_TEMPERATURE</a></div><div class="ttdeci">constexpr units::temperature AVERAGE_ANNUAL_TEMPERATURE</div><div class="ttdoc">Average annual temperature in Kelvin used for climate, weather and temperature calculation.</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00152">game_constants.h:152</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a271801f57dbbc5e91afd1fbbe0615a03"><div class="ttname"><a href="game__constants_8h.html#a271801f57dbbc5e91afd1fbbe0615a03">MELEE_STAT</a></div><div class="ttdeci">constexpr int MELEE_STAT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00140">game_constants.h:140</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a48b9330c21bc6a0b8f99d7a3414cfe9f"><div class="ttname"><a href="game__constants_8h.html#a48b9330c21bc6a0b8f99d7a3414cfe9f">PLUTONIUM_CHARGES</a></div><div class="ttdeci">constexpr int PLUTONIUM_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00089">game_constants.h:89</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a745392436b19cce3012d4d8dc0fe422c"><div class="ttname"><a href="game__constants_8h.html#a745392436b19cce3012d4d8dc0fe422c">MAX_VIEW_DISTANCE</a></div><div class="ttdeci">constexpr int MAX_VIEW_DISTANCE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00051">game_constants.h:51</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a754a537584865360f440ffe301069538"><div class="ttname"><a href="game__constants_8h.html#a754a537584865360f440ffe301069538">MAX_ITEM_VOLUME</a></div><div class="ttdeci">constexpr units::volume MAX_ITEM_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00033">game_constants.h:33</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a9a0de4360143c33059120b35030853cf"><div class="ttname"><a href="game__constants_8h.html#a9a0de4360143c33059120b35030853cf">RANGE_HARD_CAP</a></div><div class="ttdeci">constexpr int RANGE_HARD_CAP</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00126">game_constants.h:126</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aa5931cb2f162c829bae20f0df39ae014"><div class="ttname"><a href="game__constants_8h.html#aa5931cb2f162c829bae20f0df39ae014">INVENTORY_HANDLING_PENALTY</a></div><div class="ttdeci">constexpr int INVENTORY_HANDLING_PENALTY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00082">game_constants.h:82</a></div></div>
<div class="ttc" id="agame__constants_8h_html_adf7bb33c88c44d0c1da57b5948ead4ac"><div class="ttname"><a href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a></div><div class="ttdeci">constexpr int HALF_MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00048">game_constants.h:48</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="agroup__Weather_html_ga090dd5274c7af40d32814a41f2e16fe0"><div class="ttname"><a href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">weather_manager::get_cur_weather_gen</a></div><div class="ttdeci">const weather_generator &amp; get_cur_weather_gen() const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00895">weather.cpp:895</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga92e3dd986a664a399dffe62d2ebe2139"><div class="ttname"><a href="group__Weather.html#ga92e3dd986a664a399dffe62d2ebe2139">weather_manager::get_temperature</a></div><div class="ttdeci">units::temperature get_temperature(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00957">weather.cpp:957</a></div></div>
<div class="ttc" id="agroup__string__formatter__convert_html_gaa4f57cd78b90c1f424ff38d148b1261d"><div class="ttname"><a href="group__string__formatter__convert.html#gaa4f57cd78b90c1f424ff38d148b1261d">cata::convert</a></div><div class="ttdeci">std::enable_if_t&lt; is_integer&lt; RT &gt; &amp;&amp;is_integer&lt; T &gt;, RT &gt; convert(RT *, const string_formatter &amp;, T &amp;&amp;value, int)</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00081">string_formatter.h:81</a></div></div>
<div class="ttc" id="agun__mode_8h_html"><div class="ttname"><a href="gun__mode_8h.html">gun_mode.h</a></div></div>
<div class="ttc" id="aiexamine_8h_html"><div class="ttname"><a href="iexamine_8h.html">iexamine.h</a></div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958a34ec78fcc91ffb1e54cd85e4a0924332">kb_menu_status::add</a></div><div class="ttdeci">@ add</div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="ainput__enums_8h_html_af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282"><div class="ttname"><a href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1acb5e100e5a9a3e7f6d1fd97512215282">input_event_t::error</a></div><div class="ttdeci">@ error</div></div>
<div class="ttc" id="ainventory_8h_html"><div class="ttname"><a href="inventory_8h.html">inventory.h</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a014382a6bdb54f1671651435c6be043f"><div class="ttname"><a href="item_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a></div><div class="ttdeci">static const itype_id itype_disassembly(&quot;disassembly&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0296b65c9fcfa2ef2a33679368a6f4fc"><div class="ttname"><a href="item_8cpp.html#a0296b65c9fcfa2ef2a33679368a6f4fc">weight_to_info</a></div><div class="ttdeci">iteminfo weight_to_info(const std::string &amp;type, const std::string &amp;left, const units::mass &amp;weight, int, bool lower_is_better)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12434">item.cpp:12434</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a038037d5395f07c017ddf669f528d0b9"><div class="ttname"><a href="item_8cpp.html#a038037d5395f07c017ddf669f528d0b9">get_shortest_lifespan_from_components</a></div><div class="ttdeci">static time_duration get_shortest_lifespan_from_components(const item &amp;craft)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00464">item.cpp:464</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a04c0f30be5943072fbaecacc8a0cf848"><div class="ttname"><a href="item_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a></div><div class="ttdeci">static const itype_id itype_water_clean(&quot;water_clean&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a056b7253b0c9139b80e29917b415eeb4"><div class="ttname"><a href="item_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a></div><div class="ttdeci">static const furn_str_id furn_f_wind_mill_active(&quot;f_wind_mill_active&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a07c1990d0d8dd3b8a3305dca2429de8a"><div class="ttname"><a href="item_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a></div><div class="ttdeci">static const efftype_id effect_weed_high(&quot;weed_high&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0a159d6d4279cc648752aff679722d70"><div class="ttname"><a href="item_8cpp.html#a0a159d6d4279cc648752aff679722d70">sub_body_part_torso_upper</a></div><div class="ttdeci">static const sub_bodypart_str_id sub_body_part_torso_upper(&quot;torso_upper&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0aab3ef75ee5235f416a510b0876cad3"><div class="ttname"><a href="item_8cpp.html#a0aab3ef75ee5235f416a510b0876cad3">itype_cigar_butt</a></div><div class="ttdeci">static const itype_id itype_cigar_butt(&quot;cigar_butt&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0c2ffb782502d4509c0a854a315dfdeb"><div class="ttname"><a href="item_8cpp.html#a0c2ffb782502d4509c0a854a315dfdeb">itype_rm13_armor</a></div><div class="ttdeci">static const itype_id itype_rm13_armor(&quot;rm13_armor&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0ccb4d60ab6785e534c7eaa8ad7d07c6"><div class="ttname"><a href="item_8cpp.html#a0ccb4d60ab6785e534c7eaa8ad7d07c6">itype_brass_catcher</a></div><div class="ttdeci">static const itype_id itype_brass_catcher(&quot;brass_catcher&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0d04d7dcbc96ca001764ebf419003a8b"><div class="ttname"><a href="item_8cpp.html#a0d04d7dcbc96ca001764ebf419003a8b">item_category_spare_parts</a></div><div class="ttdeci">static const item_category_id item_category_spare_parts(&quot;spare_parts&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0e987240fca9e226501b6c99ad0dd4a4"><div class="ttname"><a href="item_8cpp.html#a0e987240fca9e226501b6c99ad0dd4a4">gun_mode_REACH</a></div><div class="ttdeci">static const gun_mode_id gun_mode_REACH(&quot;REACH&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a0faac6210fb0760466112e92f09a1f65"><div class="ttname"><a href="item_8cpp.html#a0faac6210fb0760466112e92f09a1f65">sawn_off_reduction</a></div><div class="ttdeci">static units::length sawn_off_reduction(const itype *type)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07186">item.cpp:7186</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a13183aed1904f5a0f40cc7fd7981593e"><div class="ttname"><a href="item_8cpp.html#a13183aed1904f5a0f40cc7fd7981593e">trait_JITTERY</a></div><div class="ttdeci">static const trait_id trait_JITTERY(&quot;JITTERY&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a13798283d6d3fdd8f38838da9d52fd19"><div class="ttname"><a href="item_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a></div><div class="ttdeci">static const ammotype ammo_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a1482bd2efd92c10f5f8ec958ff39d27b"><div class="ttname"><a href="item_8cpp.html#a1482bd2efd92c10f5f8ec958ff39d27b">itype_joint_roach</a></div><div class="ttdeci">static const itype_id itype_joint_roach(&quot;joint_roach&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a151e6b162a8a2cdbdb11c407013076eb"><div class="ttname"><a href="item_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a></div><div class="ttdeci">static const efftype_id effect_bleed(&quot;bleed&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a157369b3ee1f3f5a889eb1d42ed97638"><div class="ttname"><a href="item_8cpp.html#a157369b3ee1f3f5a889eb1d42ed97638">damage_bash</a></div><div class="ttdeci">static const damage_type_id damage_bash(&quot;bash&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a15d4c6dd0bd83d4205a6f043cd65fbb4"><div class="ttname"><a href="item_8cpp.html#a15d4c6dd0bd83d4205a6f043cd65fbb4">itype_hand_crossbow</a></div><div class="ttdeci">static const itype_id itype_hand_crossbow(&quot;hand_crossbow&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a17134d1aca453e886b1c7af72b8c7339"><div class="ttname"><a href="item_8cpp.html#a17134d1aca453e886b1c7af72b8c7339">dps_comp_monsters</a></div><div class="ttdeci">static const std::vector&lt; std::pair&lt; translation, dps_comp_data &gt; &gt; dps_comp_monsters</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02350">item.cpp:2350</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a1ed0e0569ca42bfbb736694d90fd03fa"><div class="ttname"><a href="item_8cpp.html#a1ed0e0569ca42bfbb736694d90fd03fa">trait_WOOLALLERGY</a></div><div class="ttdeci">static const trait_id trait_WOOLALLERGY(&quot;WOOLALLERGY&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a204277b3b0298457495ded9833c01151"><div class="ttname"><a href="item_8cpp.html#a204277b3b0298457495ded9833c01151">itype_bullet_crossbow</a></div><div class="ttdeci">static const itype_id itype_bullet_crossbow(&quot;bullet_crossbow&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a231490a5aa819b4014f1ed02ca49728d"><div class="ttname"><a href="item_8cpp.html#a231490a5aa819b4014f1ed02ca49728d">itype_cig_butt</a></div><div class="ttdeci">static const itype_id itype_cig_butt(&quot;cig_butt&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a233acdd06d6158e3a5383d4c81afe5cd"><div class="ttname"><a href="item_8cpp.html#a233acdd06d6158e3a5383d4c81afe5cd">mon_zombie_soldier_no_weakpoints</a></div><div class="ttdeci">static const mtype_id mon_zombie_soldier_no_weakpoints(&quot;mon_zombie_soldier_no_weakpoints&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a2d45b07dd9fac819b92d66f1bf628012"><div class="ttname"><a href="item_8cpp.html#a2d45b07dd9fac819b92d66f1bf628012">itype_null</a></div><div class="ttdeci">static const itype_id itype_null(&quot;null&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a2d866d9790623dc33511f3f08ec510b5"><div class="ttname"><a href="item_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a></div><div class="ttdeci">static const trait_id trait_TOLERANCE(&quot;TOLERANCE&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a33913b0fb893e7e3a076518b02aa5fb8"><div class="ttname"><a href="item_8cpp.html#a33913b0fb893e7e3a076518b02aa5fb8">flag_NO_DISPLAY</a></div><div class="ttdeci">static const std::string flag_NO_DISPLAY(&quot;NO_DISPLAY&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a35045bcfd0e1c55fb7e9b88d8e36a614"><div class="ttname"><a href="item_8cpp.html#a35045bcfd0e1c55fb7e9b88d8e36a614">damage_bullet</a></div><div class="ttdeci">static const damage_type_id damage_bullet(&quot;bullet&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a35f2f8386cafac888b1488869514370c"><div class="ttname"><a href="item_8cpp.html#a35f2f8386cafac888b1488869514370c">skill_weapon</a></div><div class="ttdeci">static const skill_id skill_weapon(&quot;weapon&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a3648d0ee246d4a66df0dcd8f2be595e8"><div class="ttname"><a href="item_8cpp.html#a3648d0ee246d4a66df0dcd8f2be595e8">qual_JACK</a></div><div class="ttdeci">static const quality_id qual_JACK(&quot;JACK&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a36f9b5f5d763f2c224b59b75af340c6c"><div class="ttname"><a href="item_8cpp.html#a36f9b5f5d763f2c224b59b75af340c6c">bio_digestion</a></div><div class="ttdeci">static const bionic_id bio_digestion(&quot;bio_digestion&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a421c7142796da54f1b8a19d369170a39"><div class="ttname"><a href="item_8cpp.html#a421c7142796da54f1b8a19d369170a39">armor_encumb_header_info</a></div><div class="ttdeci">static bool armor_encumb_header_info(const item &amp;it, std::vector&lt; iteminfo &gt; &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03700">item.cpp:3700</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a42b82c3f4a090a1bad809a74175c2e2e"><div class="ttname"><a href="item_8cpp.html#a42b82c3f4a090a1bad809a74175c2e2e">get_most_rotten_component</a></div><div class="ttdeci">static const item * get_most_rotten_component(const item &amp;craft)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00428">item.cpp:428</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a42c61c45a7c529e35bbd74c72b32a9ee"><div class="ttname"><a href="item_8cpp.html#a42c61c45a7c529e35bbd74c72b32a9ee">nolight</a></div><div class="ttdeci">light_emission nolight</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00238">item.cpp:238</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a42dcf913e0beb500cfac0d2d770d2569"><div class="ttname"><a href="item_8cpp.html#a42dcf913e0beb500cfac0d2d770d2569">nullitem</a></div><div class="ttdeci">static const itype * nullitem()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00242">item.cpp:242</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a430d0178c03f104d92fc2b4180a96344"><div class="ttname"><a href="item_8cpp.html#a430d0178c03f104d92fc2b4180a96344">iterate_helper</a></div><div class="ttdeci">static void iterate_helper(const item *i, const side s, const std::function&lt; void(const bodypart_str_id &amp;)&gt; &amp;cb)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01115">item.cpp:1115</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a478c9c699e4248bf7d25ae31156bf0b7"><div class="ttname"><a href="item_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a></div><div class="ttdeci">static const species_id species_ROBOT(&quot;ROBOT&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a48c584d65e77094efa0a53c595771d31"><div class="ttname"><a href="item_8cpp.html#a48c584d65e77094efa0a53c595771d31">mon_human</a></div><div class="ttdeci">static const mtype_id mon_human(&quot;mon_human&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a49d1951d52402e972f602eb8767311f1"><div class="ttname"><a href="item_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a></div><div class="ttdeci">static const furn_str_id furn_f_water_mill_active(&quot;f_water_mill_active&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a4dd26d066c5522c4787f42d46d7249eb"><div class="ttname"><a href="item_8cpp.html#a4dd26d066c5522c4787f42d46d7249eb">json_flag_CANNIBAL</a></div><div class="ttdeci">static const json_character_flag json_flag_CANNIBAL(&quot;CANNIBAL&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a4fbf975d8c329497caf15aa91d65a664"><div class="ttname"><a href="item_8cpp.html#a4fbf975d8c329497caf15aa91d65a664">trait_CARNIVORE</a></div><div class="ttdeci">static const trait_id trait_CARNIVORE(&quot;CARNIVORE&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a513ee3dfdb798f83e30d99f697f2fa5b"><div class="ttname"><a href="item_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a></div><div class="ttdeci">static const trait_id trait_LIGHTWEIGHT(&quot;LIGHTWEIGHT&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a52f20bf5a32adb49385320ff391b2f8e"><div class="ttname"><a href="item_8cpp.html#a52f20bf5a32adb49385320ff391b2f8e">fault_overheat_safety</a></div><div class="ttdeci">static const fault_id fault_overheat_safety(&quot;fault_overheat_safety&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a5d99eb66dbdc62edf33d93a7da3dd369"><div class="ttname"><a href="item_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a></div><div class="ttdeci">static const furn_str_id furn_f_smoking_rack_active(&quot;f_smoking_rack_active&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a5ffeadef52daa921bcfd6024526f8feb"><div class="ttname"><a href="item_8cpp.html#a5ffeadef52daa921bcfd6024526f8feb">qual_LIFT</a></div><div class="ttdeci">static const quality_id qual_LIFT(&quot;LIFT&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a603a14607a61f5c6b22c9a58adfc8b3e"><div class="ttname"><a href="item_8cpp.html#a603a14607a61f5c6b22c9a58adfc8b3e">json_flag_PSYCHOPATH</a></div><div class="ttdeci">static const json_character_flag json_flag_PSYCHOPATH(&quot;PSYCHOPATH&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a609c386685fa395233e3f1765e57a38b"><div class="ttname"><a href="item_8cpp.html#a609c386685fa395233e3f1765e57a38b">ammo_bolt</a></div><div class="ttdeci">static const ammotype ammo_bolt(&quot;bolt&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a617cda6dfe4d90ab4f9fac6cb1651c3b"><div class="ttname"><a href="item_8cpp.html#a617cda6dfe4d90ab4f9fac6cb1651c3b">vol_to_info</a></div><div class="ttdeci">iteminfo vol_to_info(const std::string &amp;type, const std::string &amp;left, const units::volume &amp;vol, int decimal_places, bool lower_is_better)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12417">item.cpp:12417</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a62b9a91d73cca0fcb671b80079e8ee5d"><div class="ttname"><a href="item_8cpp.html#a62b9a91d73cca0fcb671b80079e8ee5d">get_base_env_resist</a></div><div class="ttdeci">static int get_base_env_resist(const item &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02102">item.cpp:2102</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a6311ae33d9c01bff4835e9889df231f3"><div class="ttname"><a href="item_8cpp.html#a6311ae33d9c01bff4835e9889df231f3">RAPID</a></div><div class="ttdeci">static const matec_id RAPID(&quot;RAPID&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a66869ec3b1397247d8a2edab98aeb833"><div class="ttname"><a href="item_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a></div><div class="ttdeci">static const furn_str_id furn_f_metal_smoking_rack_active(&quot;f_metal_smoking_rack_active&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a66a1e9b20b26938bbc2c590ed475e96b"><div class="ttname"><a href="item_8cpp.html#a66a1e9b20b26938bbc2c590ed475e96b">armor_protect_dmg_info</a></div><div class="ttdeci">static void armor_protect_dmg_info(int dmg, std::vector&lt; iteminfo &gt; &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l03797">item.cpp:3797</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a66f8cc86597ffd0b135246de0ff57d40"><div class="ttname"><a href="item_8cpp.html#a66f8cc86597ffd0b135246de0ff57d40">item_category_weapons</a></div><div class="ttdeci">static const item_category_id item_category_weapons(&quot;weapons&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a686a459612f167b3e27e754951dc7b21"><div class="ttname"><a href="item_8cpp.html#a686a459612f167b3e27e754951dc7b21">ammo_plutonium</a></div><div class="ttdeci">static const ammotype ammo_plutonium(&quot;plutonium&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a69e37326c7c5f142d13f8ac8e070b728"><div class="ttname"><a href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a></div><div class="ttdeci">item &amp; null_item_reference()</div><div class="ttdoc">Returns a reference to a null item (see item::is_null).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00248">item.cpp:248</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a7630095c203f119c01b0a65a02437d76"><div class="ttname"><a href="item_8cpp.html#a7630095c203f119c01b0a65a02437d76">itype_waterproof_gunmod</a></div><div class="ttdeci">static const itype_id itype_waterproof_gunmod(&quot;waterproof_gunmod&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a77e4ff334cff4f91e1553f63fe6e8b92"><div class="ttname"><a href="item_8cpp.html#a77e4ff334cff4f91e1553f63fe6e8b92">sub_body_part_torso_lower</a></div><div class="ttdeci">static const sub_bodypart_str_id sub_body_part_torso_lower(&quot;torso_lower&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a78d952aba835a888ff4be076d6f2142b"><div class="ttname"><a href="item_8cpp.html#a78d952aba835a888ff4be076d6f2142b">inherit_rot_from_components</a></div><div class="ttdeci">static void inherit_rot_from_components(item &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00512">item.cpp:512</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a851ee4038ae4717b80a721f64cd184f3"><div class="ttname"><a href="item_8cpp.html#a851ee4038ae4717b80a721f64cd184f3">pseudo_debug_mon</a></div><div class="ttdeci">static const mtype_id pseudo_debug_mon(&quot;pseudo_debug_mon&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a853b3e08bd37bd6d41d1b057f3770e74"><div class="ttname"><a href="item_8cpp.html#a853b3e08bd37bd6d41d1b057f3770e74">get_clothing_mod_val_key</a></div><div class="ttdeci">static const std::string &amp; get_clothing_mod_val_key(clothing_mod_type type)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14822">item.cpp:14822</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a8619c531b6d61b558022c1f34944259f"><div class="ttname"><a href="item_8cpp.html#a8619c531b6d61b558022c1f34944259f">item_category_drugs</a></div><div class="ttdeci">static const item_category_id item_category_drugs(&quot;drugs&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a8c80c02fb14cd9bf70ec9aa43eba5164"><div class="ttname"><a href="item_8cpp.html#a8c80c02fb14cd9bf70ec9aa43eba5164">itype_rad_badge</a></div><div class="ttdeci">static const itype_id itype_rad_badge(&quot;rad_badge&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a8cfcfd0d206252fcdea1fb8ad30cc134"><div class="ttname"><a href="item_8cpp.html#a8cfcfd0d206252fcdea1fb8ad30cc134">enchantment_info_helper</a></div><div class="ttdeci">static void enchantment_info_helper(const item &amp;it, enchantment::has type, std::vector&lt; std::string &gt; &amp;always, std::vector&lt; std::string &gt; &amp;active, std::vector&lt; std::string &gt; &amp;inactive)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05061">item.cpp:5061</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a8d7d18ea05fab3f3a1c432f1ac02b7ed"><div class="ttname"><a href="item_8cpp.html#a8d7d18ea05fab3f3a1c432f1ac02b7ed">vitamin_human_flesh_vitamin</a></div><div class="ttdeci">static const vitamin_id vitamin_human_flesh_vitamin(&quot;human_flesh_vitamin&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a8de56f93319e34c27cd5c62dd4fa4e72"><div class="ttname"><a href="item_8cpp.html#a8de56f93319e34c27cd5c62dd4fa4e72">itype_blood</a></div><div class="ttdeci">static const itype_id itype_blood(&quot;blood&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a8e9978cebc9f2cddace428089ec0ae2d"><div class="ttname"><a href="item_8cpp.html#a8e9978cebc9f2cddace428089ec0ae2d">shelf_life_less_than_each_component</a></div><div class="ttdeci">static bool shelf_life_less_than_each_component(const item &amp;craft)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00485">item.cpp:485</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a917f093dcdc3861c86a6adf734a52641"><div class="ttname"><a href="item_8cpp.html#a917f093dcdc3861c86a6adf734a52641">skill_melee</a></div><div class="ttdeci">static const skill_id skill_melee(&quot;melee&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a9369361029f3d8faf5d727f460de0ba4"><div class="ttname"><a href="item_8cpp.html#a9369361029f3d8faf5d727f460de0ba4">mon_zombie_smoker</a></div><div class="ttdeci">static const mtype_id mon_zombie_smoker(&quot;mon_zombie_smoker&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_a9d98553b0009d1e6f15c077178c09149"><div class="ttname"><a href="item_8cpp.html#a9d98553b0009d1e6f15c077178c09149">itype_cigar_lit</a></div><div class="ttdeci">static const itype_id itype_cigar_lit(&quot;cigar_lit&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aa218e48e0797a261d4f9c74abda05d03"><div class="ttname"><a href="item_8cpp.html#aa218e48e0797a261d4f9c74abda05d03">MIN_LINK_EFFICIENCY</a></div><div class="ttdeci">static constexpr float MIN_LINK_EFFICIENCY</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00232">item.cpp:232</a></div></div>
<div class="ttc" id="aitem_8cpp_html_aa3482398423564904395b3f85ca0e730"><div class="ttname"><a href="item_8cpp.html#aa3482398423564904395b3f85ca0e730">itype_tuned_mechanism</a></div><div class="ttdeci">static const itype_id itype_tuned_mechanism(&quot;tuned_mechanism&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aa6055e7b9d5b2cb3ecd4cce48a416d33"><div class="ttname"><a href="item_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a></div><div class="ttdeci">static const efftype_id effect_cig(&quot;cig&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aa7bd2127a62492fce2df64589164987d"><div class="ttname"><a href="item_8cpp.html#aa7bd2127a62492fce2df64589164987d">insert_separation_line</a></div><div class="ttdeci">static void insert_separation_line(std::vector&lt; iteminfo &gt; &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02217">item.cpp:2217</a></div></div>
<div class="ttc" id="aitem_8cpp_html_aa823c9b895269af8721b12b861653c8d"><div class="ttname"><a href="item_8cpp.html#aa823c9b895269af8721b12b861653c8d">get_layer_helper</a></div><div class="ttdeci">static void get_layer_helper(const item *i, bodypart_id bp, std::set&lt; layer_level &gt; &amp;layers)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08173">item.cpp:8173</a></div></div>
<div class="ttc" id="aitem_8cpp_html_aa9e8bdd5ec93c113b082a84c5a448041"><div class="ttname"><a href="item_8cpp.html#aa9e8bdd5ec93c113b082a84c5a448041">is_preferred_component</a></div><div class="ttdeci">bool is_preferred_component(const item &amp;component)</div><div class="ttdoc">Filter for crafting components first pass searches excluding undesirable properties.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15190">item.cpp:15190</a></div></div>
<div class="ttc" id="aitem_8cpp_html_aaada8b39e1e59783b5dc682d67db64e0"><div class="ttname"><a href="item_8cpp.html#aaada8b39e1e59783b5dc682d67db64e0">morale_null</a></div><div class="ttdeci">static const morale_type morale_null(&quot;morale_null&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aab0054280289e72ae8b8d9f062e20e47"><div class="ttname"><a href="item_8cpp.html#aab0054280289e72ae8b8d9f062e20e47">CLOTHING_MOD_VAR_PREFIX</a></div><div class="ttdeci">static const std::string CLOTHING_MOD_VAR_PREFIX(&quot;clothing_mod_&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aaed94383d6a3117b0c4a53c77ee3d42e"><div class="ttname"><a href="item_8cpp.html#aaed94383d6a3117b0c4a53c77ee3d42e">USED_BY_IDS</a></div><div class="ttdeci">static const std::string USED_BY_IDS(&quot;USED_BY_IDS&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ab16f8be4be2050986e76d2cb0cff7609"><div class="ttname"><a href="item_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a></div><div class="ttdeci">static const efftype_id effect_sleep(&quot;sleep&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ab2f4ce2352fb943ced1db3ac4136b355"><div class="ttname"><a href="item_8cpp.html#ab2f4ce2352fb943ced1db3ac4136b355">bodygraph_full_body_iteminfo</a></div><div class="ttdeci">static const bodygraph_id bodygraph_full_body_iteminfo(&quot;full_body_iteminfo&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="item_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_abbe226ec1f3022a926b5846833cb4ee7"><div class="ttname"><a href="item_8cpp.html#abbe226ec1f3022a926b5846833cb4ee7">itype_power_cord</a></div><div class="ttdeci">static const itype_id itype_power_cord(&quot;power_cord&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_abda20c3b343cd71d0b07d5899ab6a8cb"><div class="ttname"><a href="item_8cpp.html#abda20c3b343cd71d0b07d5899ab6a8cb">PRICE_FILTHY_MALUS</a></div><div class="ttdeci">static const int PRICE_FILTHY_MALUS</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00230">item.cpp:230</a></div></div>
<div class="ttc" id="aitem_8cpp_html_abf665d19c2a38e87fa6fdae700c9e670"><div class="ttname"><a href="item_8cpp.html#abf665d19c2a38e87fa6fdae700c9e670">item_ptr_compare_by_charges</a></div><div class="ttdeci">bool item_ptr_compare_by_charges(const item *left, const item *right)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12501">item.cpp:12501</a></div></div>
<div class="ttc" id="aitem_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="item_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ac038c6319122de04af85fb88e6618601"><div class="ttname"><a href="item_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a></div><div class="ttdeci">static const skill_id skill_survival(&quot;survival&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ac27854471d10c049f77918a38d801b70"><div class="ttname"><a href="item_8cpp.html#ac27854471d10c049f77918a38d801b70">qual_BOIL</a></div><div class="ttdeci">static const quality_id qual_BOIL(&quot;BOIL&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ac2c5780a50f6dc653232de1aeffc85ab"><div class="ttname"><a href="item_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a></div><div class="ttdeci">static const itype_id itype_cash_card(&quot;cash_card&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ac2ef9940a6c3cfdb20bbeb9eb795091d"><div class="ttname"><a href="item_8cpp.html#ac2ef9940a6c3cfdb20bbeb9eb795091d">json_flag_SAPIOVORE</a></div><div class="ttdeci">static const json_character_flag json_flag_SAPIOVORE(&quot;SAPIOVORE&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ac471118dac34127cf80986b963ab30b6"><div class="ttname"><a href="item_8cpp.html#ac471118dac34127cf80986b963ab30b6">iterate_helper_sbp</a></div><div class="ttdeci">static void iterate_helper_sbp(const item *i, const side s, const std::function&lt; void(const sub_bodypart_str_id &amp;)&gt; &amp;cb)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01072">item.cpp:1072</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ac71caa61fb71b31b4ad12dfcc0d9dfef"><div class="ttname"><a href="item_8cpp.html#ac71caa61fb71b31b4ad12dfcc0d9dfef">itype_stock_none</a></div><div class="ttdeci">static const itype_id itype_stock_none(&quot;stock_none&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aca6160da93053b44b107ccef5e04175f"><div class="ttname"><a href="item_8cpp.html#aca6160da93053b44b107ccef5e04175f">get_freshness_description</a></div><div class="ttdeci">static std::string get_freshness_description(const item &amp;food_item)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01971">item.cpp:1971</a></div></div>
<div class="ttc" id="aitem_8cpp_html_acb5ce12112db1c8cd3b69158b97000d4"><div class="ttname"><a href="item_8cpp.html#acb5ce12112db1c8cd3b69158b97000d4">itype_barrel_small</a></div><div class="ttdeci">static const itype_id itype_barrel_small(&quot;barrel_small&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_acc343fa0f8e04fd5007e8abc6105f8a8"><div class="ttname"><a href="item_8cpp.html#acc343fa0f8e04fd5007e8abc6105f8a8">damage_acid</a></div><div class="ttdeci">static const damage_type_id damage_acid(&quot;acid&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_acc75a57299d74f6ca49181508f75fc20"><div class="ttname"><a href="item_8cpp.html#acc75a57299d74f6ca49181508f75fc20">item_compare_by_charges</a></div><div class="ttdeci">bool item_compare_by_charges(const item &amp;left, const item &amp;right)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12512">item.cpp:12512</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ace91bfda35938e1a3053b644a6104cff"><div class="ttname"><a href="item_8cpp.html#ace91bfda35938e1a3053b644a6104cff">itype_arredondo_chute</a></div><div class="ttdeci">static const itype_id itype_arredondo_chute(&quot;arredondo_chute&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_acf409ab736a978a27fd03d8e155eeee5"><div class="ttname"><a href="item_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a></div><div class="ttdeci">static const efftype_id effect_shakes(&quot;shakes&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_acf737677252a6e4b59333dac9d1f23ab"><div class="ttname"><a href="item_8cpp.html#acf737677252a6e4b59333dac9d1f23ab">enumerate_lcsorted_with_limit</a></div><div class="ttdeci">static std::string enumerate_lcsorted_with_limit(const std::vector&lt; std::string &gt; &amp;v, const int max=5)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00447">item.cpp:447</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ad0e39d29af45ea0a03f280197b35ca72"><div class="ttname"><a href="item_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a></div><div class="ttdeci">static const skill_id skill_cooking(&quot;cooking&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ad178609087c011320fb56782f1a30cf0"><div class="ttname"><a href="item_8cpp.html#ad178609087c011320fb56782f1a30cf0">item_category_food</a></div><div class="ttdeci">static const item_category_id item_category_food(&quot;food&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ad63c8e54fd505f8568be27342a2414f8"><div class="ttname"><a href="item_8cpp.html#ad63c8e54fd505f8568be27342a2414f8">mon_zombie_survivor_no_weakpoints</a></div><div class="ttdeci">static const mtype_id mon_zombie_survivor_no_weakpoints(&quot;mon_zombie_survivor_no_weakpoints&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_adc11d823a2cedb6fcbcd76d3b6ce6828"><div class="ttname"><a href="item_8cpp.html#adc11d823a2cedb6fcbcd76d3b6ce6828">GUN_MODE_VAR_NAME</a></div><div class="ttdeci">static const std::string GUN_MODE_VAR_NAME(&quot;item::mode&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ade1e3db3102b4d852659d72496478736"><div class="ttname"><a href="item_8cpp.html#ade1e3db3102b4d852659d72496478736">enchantment_info_printer</a></div><div class="ttdeci">static void enchantment_info_printer(std::vector&lt; iteminfo &gt; &amp;info, std::vector&lt; std::string &gt; &amp;always, std::vector&lt; std::string &gt; &amp;active, std::vector&lt; std::string &gt; &amp;inactive)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05129">item.cpp:5129</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ae01ac1ba15b1a58809aef8bc1f735b5b"><div class="ttname"><a href="item_8cpp.html#ae01ac1ba15b1a58809aef8bc1f735b5b">damage_heat</a></div><div class="ttdeci">static const damage_type_id damage_heat(&quot;heat&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ae1a1f893ca0a1908ca7906a1b86e4865"><div class="ttname"><a href="item_8cpp.html#ae1a1f893ca0a1908ca7906a1b86e4865">flag_BLACKPOWDER_FOULING_DAMAGE</a></div><div class="ttdeci">static const std::string flag_BLACKPOWDER_FOULING_DAMAGE(&quot;BLACKPOWDER_FOULING_DAMAGE&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_ae2c8f05535bb3a3db47f7e79704bbacb"><div class="ttname"><a href="item_8cpp.html#ae2c8f05535bb3a3db47f7e79704bbacb">hits_by_accuracy</a></div><div class="ttdeci">static constexpr std::array&lt; double, 41 &gt; hits_by_accuracy</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02229">item.cpp:2229</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ae629e87a352693e7f8d1895a698237d2"><div class="ttname"><a href="item_8cpp.html#ae629e87a352693e7f8d1895a698237d2">get_ranged_pierce</a></div><div class="ttdeci">static int get_ranged_pierce(const common_ranged_data &amp;ranged)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01944">item.cpp:1944</a></div></div>
<div class="ttc" id="aitem_8cpp_html_ae7965d5383e2733895a2d2c28ddd85c3"><div class="ttname"><a href="item_8cpp.html#ae7965d5383e2733895a2d2c28ddd85c3">item_category_tools</a></div><div class="ttdeci">static const item_category_id item_category_tools(&quot;tools&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aea8dde0d69cd34d32b4388bc5deab0af"><div class="ttname"><a href="item_8cpp.html#aea8dde0d69cd34d32b4388bc5deab0af">itype_cig_lit</a></div><div class="ttdeci">static const itype_id itype_cig_lit(&quot;cig_lit&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aeae762f2af2fc682c2ecaa077f764f66"><div class="ttname"><a href="item_8cpp.html#aeae762f2af2fc682c2ecaa077f764f66">item_category_container</a></div><div class="ttdeci">static const item_category_id item_category_container(&quot;container&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aecd517a9e74b5a5a21f0c75f88f50090"><div class="ttname"><a href="item_8cpp.html#aecd517a9e74b5a5a21f0c75f88f50090">damage_cut</a></div><div class="ttdeci">static const damage_type_id damage_cut(&quot;cut&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_aedcf91fddc2bef37ccd577b68c4ad604"><div class="ttname"><a href="item_8cpp.html#aedcf91fddc2bef37ccd577b68c4ad604">ammo_money</a></div><div class="ttdeci">static const ammotype ammo_money(&quot;money&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_af0fac6da14e7370e2af006f09efbd8c7"><div class="ttname"><a href="item_8cpp.html#af0fac6da14e7370e2af006f09efbd8c7">item_category_maps</a></div><div class="ttdeci">static const item_category_id item_category_maps(&quot;maps&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_af1062f0849ca05ce9086270bf9e7f406"><div class="ttname"><a href="item_8cpp.html#af1062f0849ca05ce9086270bf9e7f406">material_wool</a></div><div class="ttdeci">static const material_id material_wool(&quot;wool&quot;)</div></div>
<div class="ttc" id="aitem_8cpp_html_af1d92921df5b51c49b4339d821ccc7a3"><div class="ttname"><a href="item_8cpp.html#af1d92921df5b51c49b4339d821ccc7a3">operator&lt;</a></div><div class="ttdeci">static bool operator&lt;(const armor_encumb_data &amp;lhs, const armor_encumb_data &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04054">item.cpp:4054</a></div></div>
<div class="ttc" id="aitem_8cpp_html_af731207dc00e5afe7ac5c5f4e22ed652"><div class="ttname"><a href="item_8cpp.html#af731207dc00e5afe7ac5c5f4e22ed652">get_degrade_amount</a></div><div class="ttdeci">static int get_degrade_amount(const item &amp;it, int dmgNow_, int dmgPrev)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08914">item.cpp:8914</a></div></div>
<div class="ttc" id="aitem_8cpp_html_af818d8b81e06cfaa815792270032453f"><div class="ttname"><a href="item_8cpp.html#af818d8b81e06cfaa815792270032453f">json_flag_IMMUNE_SPOIL</a></div><div class="ttdeci">static const json_character_flag json_flag_IMMUNE_SPOIL(&quot;IMMUNE_SPOIL&quot;)</div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem_8h_html_a6f5cb4c44e3212e41e7736890eacbbba"><div class="ttname"><a href="item_8h.html#a6f5cb4c44e3212e41e7736890eacbbba">lifting_quality_to_mass</a></div><div class="ttdeci">units::mass lifting_quality_to_mass(int quality_level)</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03253">item.h:3253</a></div></div>
<div class="ttc" id="aitem__category_8h_html"><div class="ttname"><a href="item__category_8h.html">item_category.h</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a62fc9d4e4ca8f0e62b4556f5f65b666c"><div class="ttname"><a href="item__factory_8cpp.html#a62fc9d4e4ca8f0e62b4556f5f65b666c">item_controller</a></div><div class="ttdeci">std::unique_ptr&lt; Item_factory &gt; item_controller</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00126">item_factory.cpp:126</a></div></div>
<div class="ttc" id="aitem__factory_8cpp_html_a9910cca816b92f0a565dc6bc764889a6"><div class="ttname"><a href="item__factory_8cpp.html#a9910cca816b92f0a565dc6bc764889a6">item_is_blacklisted</a></div><div class="ttdeci">bool item_is_blacklisted(const itype_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="item__factory_8cpp_source.html#l00154">item_factory.cpp:154</a></div></div>
<div class="ttc" id="aitem__factory_8h_html"><div class="ttname"><a href="item__factory_8h.html">item_factory.h</a></div></div>
<div class="ttc" id="aitem__group_8h_html"><div class="ttname"><a href="item__group_8h.html">item_group.h</a></div></div>
<div class="ttc" id="aitem__tname_8h_html"><div class="ttname"><a href="item__tname_8h.html">item_tname.h</a></div></div>
<div class="ttc" id="aiteminfo__query_8h_html"><div class="ttname"><a href="iteminfo__query_8h.html">iteminfo_query.h</a></div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa02464f1f20716c4b55229bfa5ae25e12"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa02464f1f20716c4b55229bfa5ae25e12">iteminfo_parts::GUN_ARMORPIERCE_TOTAL</a></div><div class="ttdeci">@ GUN_ARMORPIERCE_TOTAL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa02b2ee1cfc05bf8c73324c9882afe557"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa02b2ee1cfc05bf8c73324c9882afe557">iteminfo_parts::DESCRIPTION_CONDUCTIVITY</a></div><div class="ttdeci">@ DESCRIPTION_CONDUCTIVITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa039446a4e6279997122a740b0df3ea31"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa039446a4e6279997122a740b0df3ea31">iteminfo_parts::AMMO_FX_BLACKPOWDER</a></div><div class="ttdeci">@ AMMO_FX_BLACKPOWDER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa03aac02ab98286d03fecc04cd363c0a2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa03aac02ab98286d03fecc04cd363c0a2">iteminfo_parts::FOOD_VIT_EFFECTS</a></div><div class="ttdeci">@ FOOD_VIT_EFFECTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa057c55297103ac35d60509c54620e6e1"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa057c55297103ac35d60509c54620e6e1">iteminfo_parts::ARMOR_ENCUMBRANCE</a></div><div class="ttdeci">@ ARMOR_ENCUMBRANCE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0589989590a223dd4c620484f6a6ab5d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0589989590a223dd4c620484f6a6ab5d">iteminfo_parts::GUNMOD_DAMAGE</a></div><div class="ttdeci">@ GUNMOD_DAMAGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa06c04c2e1ad34f82cf09e10bff068b57"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa06c04c2e1ad34f82cf09e10bff068b57">iteminfo_parts::GUNMOD_DISPERSION_SIGHT</a></div><div class="ttdeci">@ GUNMOD_DISPERSION_SIGHT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0900665dd96e1f42ee85cfedc4289cd9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0900665dd96e1f42ee85cfedc4289cd9">iteminfo_parts::GUNMOD_DISPERSION</a></div><div class="ttdeci">@ GUNMOD_DISPERSION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0b722d518bb16d21ae0d735b0e0a5163"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0b722d518bb16d21ae0d735b0e0a5163">iteminfo_parts::FOOD_NUTRITION</a></div><div class="ttdeci">@ FOOD_NUTRITION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0bc56aace05539f0536ac1c5ba320e20"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0bc56aace05539f0536ac1c5ba320e20">iteminfo_parts::BASE_AMOUNT</a></div><div class="ttdeci">@ BASE_AMOUNT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0c708ea0bab72a2433ec6b6fab2c956b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0c708ea0bab72a2433ec6b6fab2c956b">iteminfo_parts::FOOD_QUENCH</a></div><div class="ttdeci">@ FOOD_QUENCH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0c804e4fd5de9f864355262e269b3c99"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0c804e4fd5de9f864355262e269b3c99">iteminfo_parts::GUN_DISPERSION_LOADEDAMMO</a></div><div class="ttdeci">@ GUN_DISPERSION_LOADEDAMMO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0cd39031ef43b5e6b5d67f56169c9fce"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0cd39031ef43b5e6b5d67f56169c9fce">iteminfo_parts::BOOK_NUMUNREADCHAPTERS</a></div><div class="ttdeci">@ BOOK_NUMUNREADCHAPTERS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0ddc7f830553f82434d009830fcf3cc2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0ddc7f830553f82434d009830fcf3cc2">iteminfo_parts::DESCRIPTION_VEHICLE_PARTS</a></div><div class="ttdeci">@ DESCRIPTION_VEHICLE_PARTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa0f4fff99a379125e58d84de37966580a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa0f4fff99a379125e58d84de37966580a">iteminfo_parts::MED_CONSUME_TIME</a></div><div class="ttdeci">@ MED_CONSUME_TIME</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa10f8d133cc6fc9369c17060fb690b1b9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa10f8d133cc6fc9369c17060fb690b1b9">iteminfo_parts::ARMOR_BODYGRAPH</a></div><div class="ttdeci">@ ARMOR_BODYGRAPH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa1b56f4aab725171f7745e0e0d8000bd7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1b56f4aab725171f7745e0e0d8000bd7">iteminfo_parts::GUN_DISPERSION_TOTAL</a></div><div class="ttdeci">@ GUN_DISPERSION_TOTAL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa1bdd24bef41876fa1bbc468b1b424e22"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1bdd24bef41876fa1bbc468b1b424e22">iteminfo_parts::AMMO_DAMAGE_RANGE</a></div><div class="ttdeci">@ AMMO_DAMAGE_RANGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa1c321648d4dd9c894f346daded141455"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1c321648d4dd9c894f346daded141455">iteminfo_parts::BASE_DAMAGE</a></div><div class="ttdeci">@ BASE_DAMAGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa1f41d6a176d75ca1df32f76a81bd2e37"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa1f41d6a176d75ca1df32f76a81bd2e37">iteminfo_parts::FOOD_ALLERGEN</a></div><div class="ttdeci">@ FOOD_ALLERGEN</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa20f77793c38d1f46f5c61c54cfed6cf7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa20f77793c38d1f46f5c61c54cfed6cf7">iteminfo_parts::TOOL_MAGAZINE_COMPATIBLE</a></div><div class="ttdeci">@ TOOL_MAGAZINE_COMPATIBLE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa23133795303bd0faeeeb6810bb3ad640"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23133795303bd0faeeeb6810bb3ad640">iteminfo_parts::AMMO_FX_CANTMISSFIRE</a></div><div class="ttdeci">@ AMMO_FX_CANTMISSFIRE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa23c7a292a8e92a89bd6eaa5e7a0ce5e2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23c7a292a8e92a89bd6eaa5e7a0ce5e2">iteminfo_parts::QUALITIES</a></div><div class="ttdeci">@ QUALITIES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa23d8a241f0e32fd9929daac4d49ef340"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa23d8a241f0e32fd9929daac4d49ef340">iteminfo_parts::GUNMOD_RANGE</a></div><div class="ttdeci">@ GUNMOD_RANGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa2561ea773c126af917200bc412fc361c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2561ea773c126af917200bc412fc361c">iteminfo_parts::AMMO_TO_FIRE</a></div><div class="ttdeci">@ AMMO_TO_FIRE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa25a4260052ebde6514bb600ecd2a3a5c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa25a4260052ebde6514bb600ecd2a3a5c">iteminfo_parts::GUN_TYPE</a></div><div class="ttdeci">@ GUN_TYPE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa26563106819030fc129bd25776f4bd9a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa26563106819030fc129bd25776f4bd9a">iteminfo_parts::GUNMOD_RANGE_MULTIPLIER</a></div><div class="ttdeci">@ GUNMOD_RANGE_MULTIPLIER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa2663c3b9f1c1ed682d1f4f69ba120c79"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2663c3b9f1c1ed682d1f4f69ba120c79">iteminfo_parts::AMMO_FX_RECYCLED</a></div><div class="ttdeci">@ AMMO_FX_RECYCLED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa282d49c6e57b86ca0494ffe2425fa785"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa282d49c6e57b86ca0494ffe2425fa785">iteminfo_parts::BASE_DEBUG</a></div><div class="ttdeci">@ BASE_DEBUG</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa2a5ccca16709f945ec4f0d12d6162167"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2a5ccca16709f945ec4f0d12d6162167">iteminfo_parts::GUN_BARRELLENGTH</a></div><div class="ttdeci">@ GUN_BARRELLENGTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa2d91ee39d9f8e2e454e450aaac74c3c7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2d91ee39d9f8e2e454e450aaac74c3c7">iteminfo_parts::AMMO_DAMAGE_AP</a></div><div class="ttdeci">@ AMMO_DAMAGE_AP</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa2f738a8d3473924f949d7bdd04f3543f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa2f738a8d3473924f949d7bdd04f3543f">iteminfo_parts::DESCRIPTION_ENCHANTMENTS</a></div><div class="ttdeci">@ DESCRIPTION_ENCHANTMENTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3097bde01b4addf9cfdd2d211c3ebf57"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3097bde01b4addf9cfdd2d211c3ebf57">iteminfo_parts::DESCRIPTION_COMPONENTS_DISASSEMBLE</a></div><div class="ttdeci">@ DESCRIPTION_COMPONENTS_DISASSEMBLE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa347683c8f53a1a7f66b004254a18438d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa347683c8f53a1a7f66b004254a18438d">iteminfo_parts::FOOD_VITAMINS</a></div><div class="ttdeci">@ FOOD_VITAMINS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3491c37770c53413735486b0251f95e0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3491c37770c53413735486b0251f95e0">iteminfo_parts::MAGAZINE_COMPATIBLE_GUNS</a></div><div class="ttdeci">@ MAGAZINE_COMPATIBLE_GUNS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa35ba4a2677442e210c23a00a5601aba3"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa35ba4a2677442e210c23a00a5601aba3">iteminfo_parts::DESCRIPTION</a></div><div class="ttdeci">@ DESCRIPTION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa35d582a771a2eb1e3b971ecda7ae6d84"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa35d582a771a2eb1e3b971ecda7ae6d84">iteminfo_parts::GUNMOD_LOCATION</a></div><div class="ttdeci">@ GUNMOD_LOCATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3a07e3ba4359475b31e1eae6b5743467"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3a07e3ba4359475b31e1eae6b5743467">iteminfo_parts::DESCRIPTION_RECHARGE_UPSCAPABLE</a></div><div class="ttdeci">@ DESCRIPTION_RECHARGE_UPSCAPABLE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3d1d4eabca63b8b7c6102dbe638425cc"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3d1d4eabca63b8b7c6102dbe638425cc">iteminfo_parts::ARMOR_BODYPARTS</a></div><div class="ttdeci">@ ARMOR_BODYPARTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3f2572bc958e4490db06b7322b4675b6"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3f2572bc958e4490db06b7322b4675b6">iteminfo_parts::FOOD_HALLUCINOGENIC</a></div><div class="ttdeci">@ FOOD_HALLUCINOGENIC</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa3f6f1966e9b2cbe97a4d33992f9fab84"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa3f6f1966e9b2cbe97a4d33992f9fab84">iteminfo_parts::FOOD_ROT</a></div><div class="ttdeci">@ FOOD_ROT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa402590280b74396031d11226881121d9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa402590280b74396031d11226881121d9">iteminfo_parts::MED_PORTIONS</a></div><div class="ttdeci">@ MED_PORTIONS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4087f2afe0ce4e0ac1deb457321cc3a2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4087f2afe0ce4e0ac1deb457321cc3a2">iteminfo_parts::DESCRIPTION_GUNMOD_DISABLESSIGHTS</a></div><div class="ttdeci">@ DESCRIPTION_GUNMOD_DISABLESSIGHTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4298ef35129a33a7e3899630e2847fda"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4298ef35129a33a7e3899630e2847fda">iteminfo_parts::DESCRIPTION_MELEEDMG_TYPES</a></div><div class="ttdeci">@ DESCRIPTION_MELEEDMG_TYPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa437183a2ee10b05dd04a2373e30f9fbb"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa437183a2ee10b05dd04a2373e30f9fbb">iteminfo_parts::GUN_DAMAGE</a></div><div class="ttdeci">@ GUN_DAMAGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa43a9ade55f151d022d902d69e31507b7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa43a9ade55f151d022d902d69e31507b7">iteminfo_parts::ARMOR_WARMTH</a></div><div class="ttdeci">@ ARMOR_WARMTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4432c18ca4c6fd70a6b99fd5a7e8f054"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4432c18ca4c6fd70a6b99fd5a7e8f054">iteminfo_parts::AMMO_DAMAGE_VALUE</a></div><div class="ttdeci">@ AMMO_DAMAGE_VALUE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa47e513a56d92c80234a2870e9c2b46dd"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa47e513a56d92c80234a2870e9c2b46dd">iteminfo_parts::DESCRIPTION_COMPOSTABLE_PRODUCTS</a></div><div class="ttdeci">@ DESCRIPTION_COMPOSTABLE_PRODUCTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa48161940e933eea5d0b87c30433ef72f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa48161940e933eea5d0b87c30433ef72f">iteminfo_parts::GUN_AIMING_STATS</a></div><div class="ttdeci">@ GUN_AIMING_STATS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4cd71a570f613530bbf1190e214229ee"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4cd71a570f613530bbf1190e214229ee">iteminfo_parts::DESCRIPTION_USE_METHODS</a></div><div class="ttdeci">@ DESCRIPTION_USE_METHODS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4ec8d89f01be7fffe75d3f217900512b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4ec8d89f01be7fffe75d3f217900512b">iteminfo_parts::MED_JOY</a></div><div class="ttdeci">@ MED_JOY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa4fba65fff3f2bb4d8e21216fe405ae0b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa4fba65fff3f2bb4d8e21216fe405ae0b">iteminfo_parts::TOOL_BURNOUT</a></div><div class="ttdeci">@ TOOL_BURNOUT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa52620fa7ac46300572fe8ab4a186d1b0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa52620fa7ac46300572fe8ab4a186d1b0">iteminfo_parts::BASE_MOVES</a></div><div class="ttdeci">@ BASE_MOVES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa541e7d1cc18ad35c3563ac800dc15668"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa541e7d1cc18ad35c3563ac800dc15668">iteminfo_parts::BOOK_MORALECHANGE</a></div><div class="ttdeci">@ BOOK_MORALECHANGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa55a9e0ce1999085f92e071912acf1111"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa55a9e0ce1999085f92e071912acf1111">iteminfo_parts::AMMO_DAMAGE_RECOIL</a></div><div class="ttdeci">@ AMMO_DAMAGE_RECOIL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa5615faa78d7a8dc50ce95a14429c22b2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5615faa78d7a8dc50ce95a14429c22b2">iteminfo_parts::GUNMOD_FIELD_OF_VIEW</a></div><div class="ttdeci">@ GUNMOD_FIELD_OF_VIEW</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa56d9e37dc7f27fdedca6f786acf78bf7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa56d9e37dc7f27fdedca6f786acf78bf7">iteminfo_parts::DESCRIPTION_BREWABLE_DURATION</a></div><div class="ttdeci">@ DESCRIPTION_BREWABLE_DURATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa5789a7c68b3aaf7dfb33db96e6a86665"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5789a7c68b3aaf7dfb33db96e6a86665">iteminfo_parts::DESCRIPTION_FLAGS_POWERARMOR</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS_POWERARMOR</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa57b3ed51f4fb96ad22d4cae36bef975f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa57b3ed51f4fb96ad22d4cae36bef975f">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION_CHANNEL</a></div><div class="ttdeci">@ DESCRIPTION_RADIO_ACTIVATION_CHANNEL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa59024009f0d2f9f4dd87fc60d36545c6"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa59024009f0d2f9f4dd87fc60d36545c6">iteminfo_parts::BASE_OWNER</a></div><div class="ttdeci">@ BASE_OWNER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa59be0d71ec1b070b18d9f4215fa4a90f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa59be0d71ec1b070b18d9f4215fa4a90f">iteminfo_parts::DESCRIPTION_IRRADIATION</a></div><div class="ttdeci">@ DESCRIPTION_IRRADIATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa5f2fd59bf414e99ed703bbfa774e911e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5f2fd59bf414e99ed703bbfa774e911e">iteminfo_parts::GUN_ARMORPIERCE_LOADEDAMMO</a></div><div class="ttdeci">@ GUN_ARMORPIERCE_LOADEDAMMO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa5f4bf2d7052eaecdf7226763b1979a43"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5f4bf2d7052eaecdf7226763b1979a43">iteminfo_parts::BASE_WEIGHT</a></div><div class="ttdeci">@ BASE_WEIGHT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa5fcac0a5daec3f6bcd73a2d0004f1a6a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa5fcac0a5daec3f6bcd73a2d0004f1a6a">iteminfo_parts::BASE_STAMINA</a></div><div class="ttdeci">@ BASE_STAMINA</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa62d4071aabf7f7291f31959e440cd966"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa62d4071aabf7f7291f31959e440cd966">iteminfo_parts::DESCRIPTION_BREWABLE_PRODUCTS</a></div><div class="ttdeci">@ DESCRIPTION_BREWABLE_PRODUCTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa64e9486987d038b896593666ea873e60"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa64e9486987d038b896593666ea873e60">iteminfo_parts::GUNMOD_AIM_SPEED_MODIFIER</a></div><div class="ttdeci">@ GUNMOD_AIM_SPEED_MODIFIER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa66ded97adad69f0d0e43b011564cd41d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa66ded97adad69f0d0e43b011564cd41d">iteminfo_parts::DESCRIPTION_RECHARGE_NORELOAD</a></div><div class="ttdeci">@ DESCRIPTION_RECHARGE_NORELOAD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa68367ada6561c3d16a3445277703e8a3"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa68367ada6561c3d16a3445277703e8a3">iteminfo_parts::GUNMOD_USEDON</a></div><div class="ttdeci">@ GUNMOD_USEDON</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa684af65c6df05045e79e249dcb823f99"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa684af65c6df05045e79e249dcb823f99">iteminfo_parts::DESCRIPTION_FLAGS</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa68c87b5b76e6830a909f2f02a517d4a9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa68c87b5b76e6830a909f2f02a517d4a9">iteminfo_parts::DESCRIPTION_COMPONENTS_MADEFROM</a></div><div class="ttdeci">@ DESCRIPTION_COMPONENTS_MADEFROM</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6955cbfacb4d87c3d346f014cddc23f0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6955cbfacb4d87c3d346f014cddc23f0">iteminfo_parts::BASE_MATERIAL</a></div><div class="ttdeci">@ BASE_MATERIAL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6969097b379c9c7fcb8105d3d51d13a6"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6969097b379c9c7fcb8105d3d51d13a6">iteminfo_parts::BASE_BARTER</a></div><div class="ttdeci">@ BASE_BARTER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa69c5a2af31e3afb9da81b6910c42f90f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa69c5a2af31e3afb9da81b6910c42f90f">iteminfo_parts::GUN_CAPACITY</a></div><div class="ttdeci">@ GUN_CAPACITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6a938bcf44eb5ee746d9f76f10fa3c98"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6a938bcf44eb5ee746d9f76f10fa3c98">iteminfo_parts::DESCRIPTION_FAULTS</a></div><div class="ttdeci">@ DESCRIPTION_FAULTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6cd1da54ade64f53c7b7cbfacab49ed2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6cd1da54ade64f53c7b7cbfacab49ed2">iteminfo_parts::GUNMOD_RELOAD</a></div><div class="ttdeci">@ GUNMOD_RELOAD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6d6682e5ed91cf2005ab30b15a8ae399"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6d6682e5ed91cf2005ab30b15a8ae399">iteminfo_parts::BOOK_REQUIREMENTS_BEGINNER</a></div><div class="ttdeci">@ BOOK_REQUIREMENTS_BEGINNER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6d831a28effbb6efe262c19a550349c5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6d831a28effbb6efe262c19a550349c5">iteminfo_parts::GUN_RELOAD_TIME</a></div><div class="ttdeci">@ GUN_RELOAD_TIME</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa6f6107c063610b35a62796befffd6dbf"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa6f6107c063610b35a62796befffd6dbf">iteminfo_parts::ARMOR_ADDITIONAL_INFO</a></div><div class="ttdeci">@ ARMOR_ADDITIONAL_INFO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa7079d6c7eaab71f6fefcf4ea1c52698d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7079d6c7eaab71f6fefcf4ea1c52698d">iteminfo_parts::GUN_DISPERSION_SIGHT</a></div><div class="ttdeci">@ GUN_DISPERSION_SIGHT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa7087619a79dc1f23208e2aaf2e1ad12b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7087619a79dc1f23208e2aaf2e1ad12b">iteminfo_parts::DESCRIPTION_CONTENTS</a></div><div class="ttdeci">@ DESCRIPTION_CONTENTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa70eb37b2dee60ddc859aa633437f52f3"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa70eb37b2dee60ddc859aa633437f52f3">iteminfo_parts::GUNMOD_BLACKLIST_MOD</a></div><div class="ttdeci">@ GUNMOD_BLACKLIST_MOD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa71cf0f0e6acd28ae9bf66f560dccbb88"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71cf0f0e6acd28ae9bf66f560dccbb88">iteminfo_parts::BASE_VOLUME</a></div><div class="ttdeci">@ BASE_VOLUME</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa71e88a67ec4bcd3ce9c25b324b00f9d8">iteminfo_parts::ARMOR_PROTECTION</a></div><div class="ttdeci">@ ARMOR_PROTECTION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa72caeb06228457a87054c4694a11bd7d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa72caeb06228457a87054c4694a11bd7d">iteminfo_parts::DESCRIPTION_CBM_SLOTS</a></div><div class="ttdeci">@ DESCRIPTION_CBM_SLOTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa73a99ae46e1eb6f0d9e007bbc43d1aa0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa73a99ae46e1eb6f0d9e007bbc43d1aa0">iteminfo_parts::DESCRIPTION_ACTIVATABLE_TRANSFORMATION</a></div><div class="ttdeci">@ DESCRIPTION_ACTIVATABLE_TRANSFORMATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa73c3939619313f4363334c32da31b09d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa73c3939619313f4363334c32da31b09d">iteminfo_parts::BOOK_SKILLRANGE_MAX</a></div><div class="ttdeci">@ BOOK_SKILLRANGE_MAX</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa75a792139684dc53e8d06ed67b4c2b05"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa75a792139684dc53e8d06ed67b4c2b05">iteminfo_parts::BASE_CATEGORY</a></div><div class="ttdeci">@ BASE_CATEGORY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa77442a937fb6af35a59186ae8128306b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa77442a937fb6af35a59186ae8128306b">iteminfo_parts::DESCRIPTION_MELEEDMG_CRIT</a></div><div class="ttdeci">@ DESCRIPTION_MELEEDMG_CRIT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa7978badb14e7a32b55e875471196179f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7978badb14e7a32b55e875471196179f">iteminfo_parts::GUN_FIRE_MODES</a></div><div class="ttdeci">@ GUN_FIRE_MODES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa7e8f048a626c868dd942374a9e53ae9a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7e8f048a626c868dd942374a9e53ae9a">iteminfo_parts::DESCRIPTION_FLAGS_VARSIZE</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS_VARSIZE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa7f765fca08e85106c719b46800a668f9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa7f765fca08e85106c719b46800a668f9">iteminfo_parts::BASE_LENGTH</a></div><div class="ttdeci">@ BASE_LENGTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa816251e60133694a4a2202fb7c52c91a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa816251e60133694a4a2202fb7c52c91a">iteminfo_parts::DESCRIPTION_DIE</a></div><div class="ttdeci">@ DESCRIPTION_DIE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa834c0f2e3ff7fd9660e7359b2b3eed9f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa834c0f2e3ff7fd9660e7359b2b3eed9f">iteminfo_parts::DESCRIPTION_MED_ADDICTING</a></div><div class="ttdeci">@ DESCRIPTION_MED_ADDICTING</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa84f8270ca8b51f73539bdf7546473ebf"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa84f8270ca8b51f73539bdf7546473ebf">iteminfo_parts::GUN_DEFAULT_AMMO</a></div><div class="ttdeci">@ GUN_DEFAULT_AMMO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa873770393665c1a496127caa092e469c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa873770393665c1a496127caa092e469c">iteminfo_parts::BASE_MOD_SRC</a></div><div class="ttdeci">@ BASE_MOD_SRC</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa875044b9e87810a764dc01178665e57a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa875044b9e87810a764dc01178665e57a">iteminfo_parts::BASE_DPSTAM</a></div><div class="ttdeci">@ BASE_DPSTAM</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa8b373abf4d6fb882f3305e5c698ae7f1"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8b373abf4d6fb882f3305e5c698ae7f1">iteminfo_parts::DESCRIPTION_AUX_GUNMOD_HEADER</a></div><div class="ttdeci">@ DESCRIPTION_AUX_GUNMOD_HEADER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa8dba4b60e82bdf811f35108884eb0c9a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8dba4b60e82bdf811f35108884eb0c9a">iteminfo_parts::DESCRIPTION_RADIOACTIVITY_DAMAGED</a></div><div class="ttdeci">@ DESCRIPTION_RADIOACTIVITY_DAMAGED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa8ef1966ad26aa52b50358d1e5055454e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa8ef1966ad26aa52b50358d1e5055454e">iteminfo_parts::GUN_DEFAULT_BORE</a></div><div class="ttdeci">@ GUN_DEFAULT_BORE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa90c0b33fada34cb3046edcc25d25f93e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa90c0b33fada34cb3046edcc25d25f93e">iteminfo_parts::BASE_DPS</a></div><div class="ttdeci">@ BASE_DPS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa915a3c09f875175875701035a29aca5e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa915a3c09f875175875701035a29aca5e">iteminfo_parts::AMMO_FX_INCENDIARY</a></div><div class="ttdeci">@ AMMO_FX_INCENDIARY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa934647d484c8702f12e803d76213775c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa934647d484c8702f12e803d76213775c">iteminfo_parts::DESCRIPTION_BOOK_ADDITIONAL_RECIPES</a></div><div class="ttdeci">@ DESCRIPTION_BOOK_ADDITIONAL_RECIPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa96ead93df4385b3073d7a12643212b2d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa96ead93df4385b3073d7a12643212b2d">iteminfo_parts::FOOD_HEALTH</a></div><div class="ttdeci">@ FOOD_HEALTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa9a043b451970b64c8fd3d543c424bab9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9a043b451970b64c8fd3d543c424bab9">iteminfo_parts::GUN_DAMAGE_LOADEDAMMO</a></div><div class="ttdeci">@ GUN_DAMAGE_LOADEDAMMO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa9cc36647cacaabd70c736b2dc5021807"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9cc36647cacaabd70c736b2dc5021807">iteminfo_parts::ARMOR_COVERAGE</a></div><div class="ttdeci">@ ARMOR_COVERAGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa9d768f7499a8ffda5df1565ab746872a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9d768f7499a8ffda5df1565ab746872a">iteminfo_parts::GUN_DAMAGE_AMMOPROP</a></div><div class="ttdeci">@ GUN_DAMAGE_AMMOPROP</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa9ed695b93399bca71885d0c5c3533aff"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9ed695b93399bca71885d0c5c3533aff">iteminfo_parts::ARMOR_MATERIALS</a></div><div class="ttdeci">@ ARMOR_MATERIALS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaa9f3ddddbbac6b640d1777fd1b7492b6e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaa9f3ddddbbac6b640d1777fd1b7492b6e">iteminfo_parts::MED_STIMULATION</a></div><div class="ttdeci">@ MED_STIMULATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa117c0693a41ee090d6ac75ce6161336"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa117c0693a41ee090d6ac75ce6161336">iteminfo_parts::BOOK_REQUIREMENTS_INT</a></div><div class="ttdeci">@ BOOK_REQUIREMENTS_INT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa17f398622223b7a7cab29171e28ca7c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa17f398622223b7a7cab29171e28ca7c">iteminfo_parts::FOOD_SMELL</a></div><div class="ttdeci">@ FOOD_SMELL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa224525ca8e47b698bde157fed0155b8"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa224525ca8e47b698bde157fed0155b8">iteminfo_parts::AMMO_DAMAGE_DISPERSION</a></div><div class="ttdeci">@ AMMO_DAMAGE_DISPERSION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa4d9a9d6597a0dbc66433c9ca051413b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa4d9a9d6597a0dbc66433c9ca051413b">iteminfo_parts::GUNMOD_ADD_MOD</a></div><div class="ttdeci">@ GUNMOD_ADD_MOD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa53c3ce10a18ab7d07a3d00ba4868718"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa53c3ce10a18ab7d07a3d00ba4868718">iteminfo_parts::ARMOR_BREATHABILITY</a></div><div class="ttdeci">@ ARMOR_BREATHABILITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa563e1f1350c073cf54b65a31d0ea9c7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa563e1f1350c073cf54b65a31d0ea9c7">iteminfo_parts::AMMO_DAMAGE_RANGE_MULTIPLIER</a></div><div class="ttdeci">@ AMMO_DAMAGE_RANGE_MULTIPLIER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa76bf19daad9839801f098cd4db69d1c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa76bf19daad9839801f098cd4db69d1c">iteminfo_parts::FOOD_POISON</a></div><div class="ttdeci">@ FOOD_POISON</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa772f1191a9b2a8eea1de9ac71fa19e0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa772f1191a9b2a8eea1de9ac71fa19e0">iteminfo_parts::GUN_RECOIL_BIPOD</a></div><div class="ttdeci">@ GUN_RECOIL_BIPOD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa7f05cead12d1622791c76d94c3b999a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa7f05cead12d1622791c76d94c3b999a">iteminfo_parts::DESCRIPTION_BOOK_RECIPES</a></div><div class="ttdeci">@ DESCRIPTION_BOOK_RECIPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa8e7c238014ebc7462d62e5ac9ce0f8d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa8e7c238014ebc7462d62e5ac9ce0f8d">iteminfo_parts::MAGAZINE_RELOAD</a></div><div class="ttdeci">@ MAGAZINE_RELOAD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa9336e8db6fe4df7cb5f461ce256685c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa9336e8db6fe4df7cb5f461ce256685c">iteminfo_parts::FOOD_JOY</a></div><div class="ttdeci">@ FOOD_JOY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaa9cc0e872cc4847d3b48be6bd9e79554"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaa9cc0e872cc4847d3b48be6bd9e79554">iteminfo_parts::GUNMOD_LOUDNESS_MODIFIER</a></div><div class="ttdeci">@ GUNMOD_LOUDNESS_MODIFIER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaabae2ef3e5dc3ef734661234a6c8b263"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaabae2ef3e5dc3ef734661234a6c8b263">iteminfo_parts::GUN_ARMORPIERCE</a></div><div class="ttdeci">@ GUN_ARMORPIERCE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaacd2d84f7fd6f2d2a3a6872031695ffa"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaacd2d84f7fd6f2d2a3a6872031695ffa">iteminfo_parts::GUN_RECOIL_THEORETICAL_MINIMUM</a></div><div class="ttdeci">@ GUN_RECOIL_THEORETICAL_MINIMUM</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaad5a64fee23bfe23b12a01e9b4d7c653"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaad5a64fee23bfe23b12a01e9b4d7c653">iteminfo_parts::GUN_MAGAZINE</a></div><div class="ttdeci">@ GUN_MAGAZINE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaaee922908a854495f38f7b99bb28f90f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaaee922908a854495f38f7b99bb28f90f">iteminfo_parts::TOOL_CAPACITY</a></div><div class="ttdeci">@ TOOL_CAPACITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaaf11b61460c8a0f0f43ab34b995319b5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaaf11b61460c8a0f0f43ab34b995319b5">iteminfo_parts::AMMO_UPSCOST</a></div><div class="ttdeci">@ AMMO_UPSCOST</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaafe59b95a4b840314b82d76e529a01e0"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaafe59b95a4b840314b82d76e529a01e0">iteminfo_parts::FOOD_SATIATION</a></div><div class="ttdeci">@ FOOD_SATIATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab146a165148526b4cf89907a5eb4c179"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab146a165148526b4cf89907a5eb4c179">iteminfo_parts::DESCRIPTION_MILLEABLE</a></div><div class="ttdeci">@ DESCRIPTION_MILLEABLE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab2afd4a6277b698ee512778caa6febf8"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab2afd4a6277b698ee512778caa6febf8">iteminfo_parts::DESCRIPTION_GUNMOD_ADDREACHATTACK</a></div><div class="ttdeci">@ DESCRIPTION_GUNMOD_ADDREACHATTACK</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab33e96da85446439ebb1470a45597770"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab33e96da85446439ebb1470a45597770">iteminfo_parts::TOOL_MAGAZINE_CURRENT</a></div><div class="ttdeci">@ TOOL_MAGAZINE_CURRENT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab4804ffed45bd62b1cf22c64689f5f73"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab4804ffed45bd62b1cf22c64689f5f73">iteminfo_parts::AMMO_REMAINING_OR_TYPES</a></div><div class="ttdeci">@ AMMO_REMAINING_OR_TYPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab4ef9ddece2e01499339603addb5b638"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab4ef9ddece2e01499339603addb5b638">iteminfo_parts::DESCRIPTION_REPAIREDWITH</a></div><div class="ttdeci">@ DESCRIPTION_REPAIREDWITH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab5838b25437614ec77a9a8dee31e27f5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab5838b25437614ec77a9a8dee31e27f5">iteminfo_parts::DESCRIPTION_TECHNIQUES</a></div><div class="ttdeci">@ DESCRIPTION_TECHNIQUES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab79dd8bd02009ff88f5d2b475a87c296"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab79dd8bd02009ff88f5d2b475a87c296">iteminfo_parts::DESCRIPTION_FLAGS_SIDED</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS_SIDED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab8fdef243cfde306c9265b61ebf47080"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab8fdef243cfde306c9265b61ebf47080">iteminfo_parts::DESCRIPTION_GUN_MODS</a></div><div class="ttdeci">@ DESCRIPTION_GUN_MODS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaab93dacbe32497550a2db340c1299a10c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaab93dacbe32497550a2db340c1299a10c">iteminfo_parts::BOOK_INCLUDED_RECIPES</a></div><div class="ttdeci">@ BOOK_INCLUDED_RECIPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaba9e4ebccb5c1d0c86f74b485aef1a11"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaba9e4ebccb5c1d0c86f74b485aef1a11">iteminfo_parts::GUNMOD_ARMORPIERCE</a></div><div class="ttdeci">@ GUNMOD_ARMORPIERCE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaabd3949d1da788505014ce644dd38b245"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabd3949d1da788505014ce644dd38b245">iteminfo_parts::GUN_USEDSKILL</a></div><div class="ttdeci">@ GUN_USEDSKILL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaabd9c2bb184e2bcbe3f940ac6a130e6d4"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabd9c2bb184e2bcbe3f940ac6a130e6d4">iteminfo_parts::GUN_IDEAL_STRENGTH</a></div><div class="ttdeci">@ GUN_IDEAL_STRENGTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaabe9b83b8dfd0a66b1d7097d0f6cbe87e"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabe9b83b8dfd0a66b1d7097d0f6cbe87e">iteminfo_parts::AMMO_REMAINING</a></div><div class="ttdeci">@ AMMO_REMAINING</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaabf08329f3b4cb553c370380d01c111d6"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaabf08329f3b4cb553c370380d01c111d6">iteminfo_parts::GUN_DISPERSION</a></div><div class="ttdeci">@ GUN_DISPERSION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaac2437dc830ebe555fbc8bf71e8975be8"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac2437dc830ebe555fbc8bf71e8975be8">iteminfo_parts::BASE_CONTENTS</a></div><div class="ttdeci">@ BASE_CONTENTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaac2ba20d0d2498b78062040c97f37f63f"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac2ba20d0d2498b78062040c97f37f63f">iteminfo_parts::DESCRIPTION_COMPOSTABLE_DURATION</a></div><div class="ttdeci">@ DESCRIPTION_COMPOSTABLE_DURATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaac8b25c720b60691923e3e81192cc4185"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac8b25c720b60691923e3e81192cc4185">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION_PROC</a></div><div class="ttdeci">@ DESCRIPTION_RADIO_ACTIVATION_PROC</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaac9ddd8ec0ae7bb9c31ab86c5b710a26b"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaac9ddd8ec0ae7bb9c31ab86c5b710a26b">iteminfo_parts::DESCRIPTION_RECHARGE_UPSMODDED</a></div><div class="ttdeci">@ DESCRIPTION_RECHARGE_UPSMODDED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaacb04b55844124d02ab4f05a877a0a0ea"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb04b55844124d02ab4f05a877a0a0ea">iteminfo_parts::DESCRIPTION_MELEEDMG</a></div><div class="ttdeci">@ DESCRIPTION_MELEEDMG</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaacb2cc65ff75bdde8efd603f5bbe9fd04"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacb2cc65ff75bdde8efd603f5bbe9fd04">iteminfo_parts::AMMO_DAMAGE_CRIT_MULTIPLIER</a></div><div class="ttdeci">@ AMMO_DAMAGE_CRIT_MULTIPLIER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaacc0f6ba13027bdd335f96daf25b14ef5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaacc0f6ba13027bdd335f96daf25b14ef5">iteminfo_parts::GUN_ALLOWED_MAGAZINES</a></div><div class="ttdeci">@ GUN_ALLOWED_MAGAZINES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaace40cbc4372a34b39ed693890360b024"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaace40cbc4372a34b39ed693890360b024">iteminfo_parts::GUN_RECOIL</a></div><div class="ttdeci">@ GUN_RECOIL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad0a3f4aa5c78e900f55d39ba41d6c9ff"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad0a3f4aa5c78e900f55d39ba41d6c9ff">iteminfo_parts::DESCRIPTION_MELEEDMG_MOVES</a></div><div class="ttdeci">@ DESCRIPTION_MELEEDMG_MOVES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad12a5950956c105707821b2948f71750"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad12a5950956c105707821b2948f71750">iteminfo_parts::GUN_DAMAGE_TOTAL</a></div><div class="ttdeci">@ GUN_DAMAGE_TOTAL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad1c2acf6fd6e337cb1de996a8e264a80"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad1c2acf6fd6e337cb1de996a8e264a80">iteminfo_parts::DESCRIPTION_GUNMOD_CONSUMABLE</a></div><div class="ttdeci">@ DESCRIPTION_GUNMOD_CONSUMABLE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad25e1ad70042be7b6a83d94dc7ec02c6"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad25e1ad70042be7b6a83d94dc7ec02c6">iteminfo_parts::DESCRIPTION_HOLSTERS</a></div><div class="ttdeci">@ DESCRIPTION_HOLSTERS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad677c6c4526b3d8b3f2596d9e61661c4"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad677c6c4526b3d8b3f2596d9e61661c4">iteminfo_parts::DESCRIPTION_FLAGS_POWERARMOR_RADIATIONHINT</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS_POWERARMOR_RADIATIONHINT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad7aceee2cdc8eb25ceebcb1d2805c33c"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad7aceee2cdc8eb25ceebcb1d2805c33c">iteminfo_parts::AMMO_BARREL_DETAILS</a></div><div class="ttdeci">@ AMMO_BARREL_DETAILS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaad9dc894b41a9db0242eeda7aa7245ddd"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaad9dc894b41a9db0242eeda7aa7245ddd">iteminfo_parts::FOOD_CONSUME_TIME</a></div><div class="ttdeci">@ FOOD_CONSUME_TIME</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadb961649396a1b3006e0eb01f5b37aa5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadb961649396a1b3006e0eb01f5b37aa5">iteminfo_parts::TOOL_CHARGES</a></div><div class="ttdeci">@ TOOL_CHARGES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadc47330fd0111d3045c4f72fd8d7bcc2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc47330fd0111d3045c4f72fd8d7bcc2">iteminfo_parts::GUNMOD_AMMO</a></div><div class="ttdeci">@ GUNMOD_AMMO</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadc57ce01d968aafed58059e1bc743a04"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc57ce01d968aafed58059e1bc743a04">iteminfo_parts::GUN_MAX_RANGE</a></div><div class="ttdeci">@ GUN_MAX_RANGE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadc97189dd338a4574eb8cb260b8364b2"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadc97189dd338a4574eb8cb260b8364b2">iteminfo_parts::DESCRIPTION_GUNMOD</a></div><div class="ttdeci">@ DESCRIPTION_GUNMOD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadd581caa6dcfb7e4078b28e30553e329"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadd581caa6dcfb7e4078b28e30553e329">iteminfo_parts::DESCRIPTION_RADIOACTIVITY_ALWAYS</a></div><div class="ttdeci">@ DESCRIPTION_RADIOACTIVITY_ALWAYS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaddc94a8ab77ad873422caa16ceeabd96"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaddc94a8ab77ad873422caa16ceeabd96">iteminfo_parts::GUNMOD_STRENGTH</a></div><div class="ttdeci">@ GUNMOD_STRENGTH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaade426a25931d2a93b8b2377ecd103687"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade426a25931d2a93b8b2377ecd103687">iteminfo_parts::DESCRIPTION_GUN_CASINGS</a></div><div class="ttdeci">@ DESCRIPTION_GUN_CASINGS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaade6794c936294d98290d82987eb6ee81"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade6794c936294d98290d82987eb6ee81">iteminfo_parts::FOOD_PORTIONS</a></div><div class="ttdeci">@ FOOD_PORTIONS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaade87c958bfce7f5ecb1b1a701b71fa88"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaade87c958bfce7f5ecb1b1a701b71fa88">iteminfo_parts::DESCRIPTION_FLAGS_FITS</a></div><div class="ttdeci">@ DESCRIPTION_FLAGS_FITS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadeecc2651cff75ce994f8579b823e929"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadeecc2651cff75ce994f8579b823e929">iteminfo_parts::FOOD_CANNIBALISM</a></div><div class="ttdeci">@ FOOD_CANNIBALISM</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaadf835c38764a7e0322a8c9745f8025f9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaadf835c38764a7e0322a8c9745f8025f9">iteminfo_parts::DESCRIPTION_RADIO_ACTIVATION</a></div><div class="ttdeci">@ DESCRIPTION_RADIO_ACTIVATION</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaae0582478e0939db9658c75609f93395a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae0582478e0939db9658c75609f93395a">iteminfo_parts::GUNMOD_HANDLING</a></div><div class="ttdeci">@ GUNMOD_HANDLING</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaae0d4cc1534f28794a7c0af424108e5f9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae0d4cc1534f28794a7c0af424108e5f9">iteminfo_parts::GUN_CURRENT_LOUDNESS</a></div><div class="ttdeci">@ GUN_CURRENT_LOUDNESS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaae58473536d734de42d07bf9d27600975"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae58473536d734de42d07bf9d27600975">iteminfo_parts::AMMO_DAMAGE_PROPORTIONAL</a></div><div class="ttdeci">@ AMMO_DAMAGE_PROPORTIONAL</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaae7d00106a8c2dced27fe9db2474a89be"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaae7d00106a8c2dced27fe9db2474a89be">iteminfo_parts::ARMOR_RIGIDITY</a></div><div class="ttdeci">@ ARMOR_RIGIDITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaeafa6693cfe4c71733292bbdd1611086"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaeafa6693cfe4c71733292bbdd1611086">iteminfo_parts::BOOK_SUMMARY</a></div><div class="ttdeci">@ BOOK_SUMMARY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaec54fa3e497fad749440f8970873f1b4"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaec54fa3e497fad749440f8970873f1b4">iteminfo_parts::MED_QUENCH</a></div><div class="ttdeci">@ MED_QUENCH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaecd965c9acf656475c6d46511fec0488"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaecd965c9acf656475c6d46511fec0488">iteminfo_parts::GUNMOD_BLACKLIST_SLOT</a></div><div class="ttdeci">@ GUNMOD_BLACKLIST_SLOT</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaef2292520530e690d802d8d4e663a9ca"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef2292520530e690d802d8d4e663a9ca">iteminfo_parts::BOOK_UNREAD</a></div><div class="ttdeci">@ BOOK_UNREAD</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaef58b71886978f09ff0d371bcb367485"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef58b71886978f09ff0d371bcb367485">iteminfo_parts::DESCRIPTION_APPLICABLE_RECIPES</a></div><div class="ttdeci">@ DESCRIPTION_APPLICABLE_RECIPES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaef9ed3c3dfaa9742675bccedcbb7eb5d"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaef9ed3c3dfaa9742675bccedcbb7eb5d">iteminfo_parts::DESCRIPTION_NOTES</a></div><div class="ttdeci">@ DESCRIPTION_NOTES</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf0ec68231ba718dede64697046faa4d7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf0ec68231ba718dede64697046faa4d7">iteminfo_parts::MAGAZINE_CAPACITY</a></div><div class="ttdeci">@ MAGAZINE_CAPACITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf103bc771e0fce64d83d75d1e7dc067a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf103bc771e0fce64d83d75d1e7dc067a">iteminfo_parts::BOOK_SKILLRANGE_MIN</a></div><div class="ttdeci">@ BOOK_SKILLRANGE_MIN</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf274919abb7f766dc610cb2b52cccea9"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf274919abb7f766dc610cb2b52cccea9">iteminfo_parts::BASE_PRICE</a></div><div class="ttdeci">@ BASE_PRICE</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf337aad4b8ab1035e42a67cdff177ea7"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf337aad4b8ab1035e42a67cdff177ea7">iteminfo_parts::MAGAZINE_COMPATABILITY</a></div><div class="ttdeci">@ MAGAZINE_COMPATABILITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf44ed4a8e26c88133ccc064b0aa8f2d8"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf44ed4a8e26c88133ccc064b0aa8f2d8">iteminfo_parts::QUALITIES_CONTAINED</a></div><div class="ttdeci">@ QUALITIES_CONTAINED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf5b11c68a15a74d1a95636d4af06c7fa"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf5b11c68a15a74d1a95636d4af06c7fa">iteminfo_parts::DESCRIPTION_APPLICABLEMARTIALARTS</a></div><div class="ttdeci">@ DESCRIPTION_APPLICABLEMARTIALARTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaf69c0403f5998ebed28c7377c75cf753"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaf69c0403f5998ebed28c7377c75cf753">iteminfo_parts::BASE_RIGIDITY</a></div><div class="ttdeci">@ BASE_RIGIDITY</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaafa560e15f742e18dd9c9308413882612"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafa560e15f742e18dd9c9308413882612">iteminfo_parts::DESCRIPTION_TWOHANDED</a></div><div class="ttdeci">@ DESCRIPTION_TWOHANDED</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaafd1b98d244fca3b7323bf1c4be601739"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafd1b98d244fca3b7323bf1c4be601739">iteminfo_parts::BASE_REQUIREMENTS</a></div><div class="ttdeci">@ BASE_REQUIREMENTS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaafdcbd046e0cbc1e78bd81613144e188a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaafdcbd046e0cbc1e78bd81613144e188a">iteminfo_parts::AMMO_FX_RECOVER</a></div><div class="ttdeci">@ AMMO_FX_RECOVER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaff1ab3ea7bb7737d5b002849ad4bfb3a"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff1ab3ea7bb7737d5b002849ad4bfb3a">iteminfo_parts::BOOK_TIMEPERCHAPTER</a></div><div class="ttdeci">@ BOOK_TIMEPERCHAPTER</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaff44f29fcfbf562378921b15c7b62214"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff44f29fcfbf562378921b15c7b62214">iteminfo_parts::DESCRIPTION_GUNMOD_REACH</a></div><div class="ttdeci">@ DESCRIPTION_GUNMOD_REACH</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaff52226e484151c7ca5043d8315203f4"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff52226e484151c7ca5043d8315203f4">iteminfo_parts::ACTIONS</a></div><div class="ttdeci">@ ACTIONS</div></div>
<div class="ttc" id="aiteminfo__query_8h_html_aa68a581556ddf9d10387ba6d9f760cdaaff564f8fd99c036ec6c012ad5a01d2f5"><div class="ttname"><a href="iteminfo__query_8h.html#aa68a581556ddf9d10387ba6d9f760cdaaff564f8fd99c036ec6c012ad5a01d2f5">iteminfo_parts::BASE_TOHIT</a></div><div class="ttdeci">@ BASE_TOHIT</div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aitype_8h_html_a900fa847a573c744b0b3ea04319d6276a05b2815ccf6592b0f62fe89851e114fa"><div class="ttname"><a href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a05b2815ccf6592b0f62fe89851e114fa">itype_variant_kind::drug</a></div><div class="ttdeci">@ drug</div></div>
<div class="ttc" id="aitype_8h_html_a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180"><div class="ttname"><a href="itype_8h.html#a900fa847a573c744b0b3ea04319d6276a5161ebb0cce4b7987ba8b6935d60a180">itype_variant_kind::gun</a></div><div class="ttdeci">@ gun</div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716a0232b08080d33dfe8f01eb0b16c09492"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a0232b08080d33dfe8f01eb0b16c09492">COMPONENT_ID</a></div><div class="ttdeci">@ COMPONENT_ID</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01131">itype.h:1131</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716a391ad3dbcf1f6d5c27590a7e511a1667"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a391ad3dbcf1f6d5c27590a7e511a1667">FLAG</a></div><div class="ttdeci">@ FLAG</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01129">itype.h:1129</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716a6332547a7029263c6caae02ab40dc0d3"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a6332547a7029263c6caae02ab40dc0d3">VITAMIN</a></div><div class="ttdeci">@ VITAMIN</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01130">itype.h:1130</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716a75dc895fe06c98a85a1e2b0ade1cfb9e"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a75dc895fe06c98a85a1e2b0ade1cfb9e">COMPONENT_ID_SUBSTRING</a></div><div class="ttdeci">@ COMPONENT_ID_SUBSTRING</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01132">itype.h:1132</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716a7de63b88eb96440d3f795fb451ea58b5"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716a7de63b88eb96440d3f795fb451ea58b5">SNIPPET_ID</a></div><div class="ttdeci">@ SNIPPET_ID</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01134">itype.h:1134</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716aa76e4df6fe28cbd3f3c95e56f20637a5"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716aa76e4df6fe28cbd3f3c95e56f20637a5">num_condition_types</a></div><div class="ttdeci">@ num_condition_types</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01136">itype.h:1135</a></div></div>
<div class="ttc" id="aitype_8h_html_afc401f615ea14e8e1ee24cf7068b7716af68346ce0bfce7ab2ca0a240f5132863"><div class="ttname"><a href="itype_8h.html#afc401f615ea14e8e1ee24cf7068b7716af68346ce0bfce7ab2ca0a240f5132863">VAR</a></div><div class="ttdeci">@ VAR</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01133">itype.h:1133</a></div></div>
<div class="ttc" id="aiuse_8h_html"><div class="ttname"><a href="iuse_8h.html">iuse.h</a></div></div>
<div class="ttc" id="aiuse__actor_8h_html"><div class="ttname"><a href="iuse__actor_8h.html">iuse_actor.h</a></div></div>
<div class="ttc" id="aline_8h_html"><div class="ttname"><a href="line_8h.html">line.h</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="alocalized__comparator_8h_html"><div class="ttname"><a href="localized__comparator_8h.html">localized_comparator.h</a></div></div>
<div class="ttc" id="alocalized__comparator_8h_html_aa323a1324b9ad3f0c7dc65690aed09c6"><div class="ttname"><a href="localized__comparator_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a></div><div class="ttdeci">constexpr localized_comparator localized_compare</div><div class="ttdef"><b>Definition:</b> <a href="localized__comparator_8h_source.html#l00054">localized_comparator.h:54</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">static constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01566">magic.cpp:1566</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
<div class="ttc" id="amagic_8h_html"><div class="ttname"><a href="magic_8h.html">magic.h</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">spell_target::item</a></div><div class="ttdeci">@ item</div></div>
<div class="ttc" id="amagic__enchantment_8h_html"><div class="ttname"><a href="magic__enchantment_8h.html">magic_enchantment.h</a></div></div>
<div class="ttc" id="amake__static_8h_html"><div class="ttname"><a href="make__static_8h.html">make_static.h</a></div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a534031ea48a1f37568849d13926a4969"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a534031ea48a1f37568849d13926a4969">ter_furn_flag::TFLAG_FLAMMABLE</a></div><div class="ttdeci">@ TFLAG_FLAMMABLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a7518f40a34b4cbfbc922c4888af267cc"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7518f40a34b4cbfbc922c4888af267cc">ter_furn_flag::TFLAG_LIQUID</a></div><div class="ttdeci">@ TFLAG_LIQUID</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054aaf7810de5bb3f477a91dc0bdec78cd5e"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054aaf7810de5bb3f477a91dc0bdec78cd5e">ter_furn_flag::TFLAG_LIQUIDCONT</a></div><div class="ttdeci">@ TFLAG_LIQUIDCONT</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ad28950af654519872f21cb4f5f9abbe2"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ad28950af654519872f21cb4f5f9abbe2">ter_furn_flag::TFLAG_FLAMMABLE_ASH</a></div><div class="ttdeci">@ TFLAG_FLAMMABLE_ASH</div></div>
<div class="ttc" id="amartialarts_8cpp_html_abbde71d679db0bf89e89279e18183337"><div class="ttname"><a href="martialarts_8cpp.html#abbde71d679db0bf89e89279e18183337">martialart_difficulty</a></div><div class="ttdeci">std::string martialart_difficulty(const matype_id &amp;mstyle)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00570">martialarts.cpp:570</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_ad99254fef8817d713c1577c9f7021eb0"><div class="ttname"><a href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a></div><div class="ttdeci">matype_id martial_art_learned_from(const itype &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00109">martialarts.cpp:109</a></div></div>
<div class="ttc" id="amartialarts_8h_html"><div class="ttname"><a href="martialarts_8h.html">martialarts.h</a></div></div>
<div class="ttc" id="amaterial_8h_html"><div class="ttname"><a href="material_8h.html">material.h</a></div></div>
<div class="ttc" id="amaterial_8h_html_a7c650ea68616193580d8d5a366026b6a"><div class="ttname"><a href="material_8h.html#a7c650ea68616193580d8d5a366026b6a">material_list</a></div><div class="ttdeci">std::vector&lt; material_type &gt; material_list</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00024">material.h:24</a></div></div>
<div class="ttc" id="amath__defines_8h_html_a66b3ab30f1332874326ed93969e496e0"><div class="ttname"><a href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a></div><div class="ttdeci">#define M_SQRT2</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00031">math_defines.h:31</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a204ca52ef1b97d079c45e1cb6407f73b"><div class="ttname"><a href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">floor</a></div><div class="ttdeci">double floor(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00095">math_parser_func.h:95</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a6a96e281ee5bf1967d26afebe837ad48"><div class="ttname"><a href="math__parser__func_8h.html#a6a96e281ee5bf1967d26afebe837ad48">log</a></div><div class="ttdeci">double log(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00066">math_parser_func.h:66</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_ac9196b0cf8d9dd209db9fc00a69a55f6"><div class="ttname"><a href="math__parser__func_8h.html#ac9196b0cf8d9dd209db9fc00a69a55f6">ceil</a></div><div class="ttdeci">double ceil(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00100">math_parser_func.h:100</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a3ea1aed1d11cd410cce07fb5be7aa34f"><div class="ttname"><a href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a></div><div class="ttdeci">void add_msg_if_player_sees(const tripoint &amp;target, std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l01007">messages.cpp:1007</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="amod__manager_8h_html"><div class="ttname"><a href="mod__manager_8h.html">mod_manager.h</a></div></div>
<div class="ttc" id="amonster_8h_html"><div class="ttname"><a href="monster_8h.html">monster.h</a></div></div>
<div class="ttc" id="amtype_8cpp_html_a9611ac53122972087173a34c2d62e422"><div class="ttname"><a href="mtype_8cpp.html#a9611ac53122972087173a34c2d62e422">mon_flag_REVIVES</a></div><div class="ttdeci">mon_flag_id mon_flag_REVIVES</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00140">mtype.cpp:140</a></div></div>
<div class="ttc" id="amtype_8cpp_html_ab7333b9173e72d06bde3c9e2902e8b4f"><div class="ttname"><a href="mtype_8cpp.html#ab7333b9173e72d06bde3c9e2902e8b4f">mon_flag_POISON</a></div><div class="ttdeci">mon_flag_id mon_flag_POISON</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00132">mtype.cpp:132</a></div></div>
<div class="ttc" id="amtype_8cpp_html_afded2a41cb5fee46d27f7bc5b0fa3189"><div class="ttname"><a href="mtype_8cpp.html#afded2a41cb5fee46d27f7bc5b0fa3189">mon_flag_DORMANT</a></div><div class="ttdeci">mon_flag_id mon_flag_DORMANT</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00071">mtype.cpp:71</a></div></div>
<div class="ttc" id="amtype_8h_html"><div class="ttname"><a href="mtype_8h.html">mtype.h</a></div></div>
<div class="ttc" id="amutation_8h_html"><div class="ttname"><a href="mutation_8h.html">mutation.h</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a1cc7d633d8c8dabf76ce5d5598a11953"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a1cc7d633d8c8dabf76ce5d5598a11953">anonymous_namespace{item.cpp}::_stacks_weapon_mods</a></div><div class="ttdeci">bool _stacks_weapon_mods(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01468">item.cpp:1468</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a1f95437ac6525dae91393d7da0fda791"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a1f95437ac6525dae91393d7da0fda791">anonymous_namespace{item.cpp}::_stacks_components</a></div><div class="ttdeci">bool _stacks_components(item const &amp;lhs, item const &amp;rhs, bool check_components)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01626">item.cpp:1626</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a1fa8d8ca0069cee62506f654568fe9a2"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a1fa8d8ca0069cee62506f654568fe9a2">anonymous_namespace{item.cpp}::_stacks_food_status</a></div><div class="ttdeci">bool _stacks_food_status(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01526">item.cpp:1526</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a2b3605c8e12295478c02c7fb1518109f"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a2b3605c8e12295478c02c7fb1518109f">anonymous_namespace{item.cpp}::_stacks_mushy_dirty</a></div><div class="ttdeci">bool _stacks_mushy_dirty(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01520">item.cpp:1520</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a336335899269e48473019fdd419e0e08"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a336335899269e48473019fdd419e0e08">anonymous_namespace{item.cpp}::_stacks_food_perishable</a></div><div class="ttdeci">bool _stacks_food_perishable(item const &amp;lhs, item const &amp;rhs, bool check_cat)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01546">item.cpp:1546</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a3d96e2f85dfb148fc4cab8267ee34bf9"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a3d96e2f85dfb148fc4cab8267ee34bf9">anonymous_namespace{item.cpp}::_stacks_food_traits</a></div><div class="ttdeci">bool _stacks_food_traits(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01533">item.cpp:1533</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a4166bdcd785ee2daa27f06ecdc80932f"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a4166bdcd785ee2daa27f06ecdc80932f">anonymous_namespace{item.cpp}::_aggregate</a></div><div class="ttdeci">void _aggregate(C &amp;container, typename C::key_type const &amp;key, item const *it, item::aggregate_t *&amp;running_max, item::aggregate_t *&amp;max_type, int depth, int maxdepth)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14994">item.cpp:14994</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a4755131e594275351353f5b854aced43"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a4755131e594275351353f5b854aced43">anonymous_namespace{item.cpp}::_stacks_ethereal</a></div><div class="ttdeci">bool _stacks_ethereal(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01576">item.cpp:1576</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a5bd8eb99bd3fab0ab52f95e05c950ecc"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a5bd8eb99bd3fab0ab52f95e05c950ecc">anonymous_namespace{item.cpp}::left_side_parts</a></div><div class="ttdeci">const std::array&lt; bodypart_str_id, 4 &gt; &amp; left_side_parts()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01048">item.cpp:1048</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a6102f0a5a28fd9671fc702566b6c56ed"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a6102f0a5a28fd9671fc702566b6c56ed">anonymous_namespace{item.cpp}::_stacks_variant</a></div><div class="ttdeci">bool _stacks_variant(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01619">item.cpp:1619</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a6cc1aaa23d76ce4b15ecb782231219ec"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a6cc1aaa23d76ce4b15ecb782231219ec">anonymous_namespace{item.cpp}::_stacks_ups</a></div><div class="ttdeci">bool _stacks_ups(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01583">item.cpp:1583</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a82933526ce3524e8ca382afd38bc4c90"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a82933526ce3524e8ca382afd38bc4c90">anonymous_namespace{item.cpp}::_stacks_rot</a></div><div class="ttdeci">bool _stacks_rot(item const &amp;lhs, item const &amp;rhs, bool combine_liquid)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01505">item.cpp:1505</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_a95b52b23a156728336166bfc7e35071c"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#a95b52b23a156728336166bfc7e35071c">anonymous_namespace{item.cpp}::_stacks_mods</a></div><div class="ttdeci">bool _stacks_mods(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01590">item.cpp:1590</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_abbbb568da4ba6d57fa2a2026c9d6fb1b"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#abbbb568da4ba6d57fa2a2026c9d6fb1b">anonymous_namespace{item.cpp}::_stacks_whiteblacklist</a></div><div class="ttdeci">bool _stacks_whiteblacklist(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01446">item.cpp:1446</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_ac8941c70393d783ff5f0880ec175bc9e"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#ac8941c70393d783ff5f0880ec175bc9e">anonymous_namespace{item.cpp}::right_side_parts</a></div><div class="ttdeci">const std::array&lt; bodypart_str_id, 4 &gt; &amp; right_side_parts()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01059">item.cpp:1059</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_accb9130dcead64497b26dadae41bb1bf"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#accb9130dcead64497b26dadae41bb1bf">anonymous_namespace{item.cpp}::_stacks_location_hint</a></div><div class="ttdeci">bool _stacks_location_hint(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01477">item.cpp:1477</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_ad735a9abff454661870219a95e2d05f3"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#ad735a9abff454661870219a95e2d05f3">anonymous_namespace{item.cpp}::_stacks_clothing_size</a></div><div class="ttdeci">bool _stacks_clothing_size(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01553">item.cpp:1553</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_aea8d1217c01c8b5fe2477d14ce362584"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#aea8d1217c01c8b5fe2477d14ce362584">anonymous_namespace{item.cpp}::_stacks_wetness</a></div><div class="ttdeci">bool _stacks_wetness(item const &amp;lhs, item const &amp;rhs, bool precise)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01563">item.cpp:1563</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_afacc97507175c600a08649b292d2ab07"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#afacc97507175c600a08649b292d2ab07">anonymous_namespace{item.cpp}::_stacks_cbm_status</a></div><div class="ttdeci">bool _stacks_cbm_status(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01568">item.cpp:1568</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item_8cpp_03_html_affbfd9a205a1000e8580d50d80555a1b"><div class="ttname"><a href="namespaceanonymous__namespace_02item_8cpp_03.html#affbfd9a205a1000e8580d50d80555a1b">anonymous_namespace{item.cpp}::_stacks_food_irradiated</a></div><div class="ttdeci">bool _stacks_food_irradiated(item const &amp;lhs, item const &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01541">item.cpp:1541</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a0b4cf21bb2ec450d1ca6f2fa58a685b9"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a0b4cf21bb2ec450d1ca6f2fa58a685b9">anonymous_namespace{item_tname.cpp}::ethereal</a></div><div class="ttdeci">std::string ethereal(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00309">item_tname.cpp:309</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a41f2ec594f3c9a854551ea75977e6d6e"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a41f2ec594f3c9a854551ea75977e6d6e">anonymous_namespace{item_tname.cpp}::sealed</a></div><div class="ttdeci">std::string sealed(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00495">item_tname.cpp:495</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a4256f3419317e4120f16681460eed15a"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a4256f3419317e4120f16681460eed15a">anonymous_namespace{item_tname.cpp}::craft</a></div><div class="ttdeci">std::string craft(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00176">item_tname.cpp:176</a></div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
<div class="ttc" id="anamespacecalendar_html"><div class="ttname"><a href="namespacecalendar.html">calendar</a></div><div class="ttdoc">Time keeping class.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00078">calendar.h:79</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a0b28c598688bb85fbe9619baa7edf24b"><div class="ttname"><a href="namespacecalendar.html#a0b28c598688bb85fbe9619baa7edf24b">calendar::start_of_cataclysm</a></div><div class="ttdeci">time_point start_of_cataclysm</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a2830b54b0424fe452c0933f87d6201b3"><div class="ttname"><a href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a></div><div class="ttdeci">constexpr time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00541">calendar.h:541</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00753">calendar.cpp:753</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a8805341f2154c0e7a8b656e77e1a4143"><div class="ttname"><a href="namespacecalendar.html#a8805341f2154c0e7a8b656e77e1a4143">calendar::INDEFINITELY_LONG_DURATION</a></div><div class="ttdeci">const time_duration INDEFINITELY_LONG_DURATION</div><div class="ttdoc">The expected duration of the cataclysm.</div></div>
<div class="ttc" id="anamespacecalendar_html_adb38241f6561412667ab9be5fd29fdce"><div class="ttname"><a href="namespacecalendar.html#adb38241f6561412667ab9be5fd29fdce">calendar::turn_max</a></div><div class="ttdeci">constexpr time_point turn_max</div><div class="ttdoc">Largest possible time point.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00546">calendar.h:546</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacecalendar_html_aef148fa54dcd19dba93471745bb00975"><div class="ttname"><a href="namespacecalendar.html#aef148fa54dcd19dba93471745bb00975">calendar::season_ratio</a></div><div class="ttdeci">float season_ratio()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00743">calendar.cpp:743</a></div></div>
<div class="ttc" id="anamespacecalendar_html_af2fd3ce014b6191e1f1c0cba755b785a"><div class="ttname"><a href="namespacecalendar.html#af2fd3ce014b6191e1f1c0cba755b785a">calendar::season_from_default_ratio</a></div><div class="ttdeci">float season_from_default_ratio()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00748">calendar.cpp:748</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacecata_1_1options_html_a0e8da257866d83c9fc4b15612f69a8eb"><div class="ttname"><a href="namespacecata_1_1options.html#a0e8da257866d83c9fc4b15612f69a8eb">cata::options::damage_indicators</a></div><div class="ttdeci">std::vector&lt; std::string &gt; damage_indicators</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00028">cached_options.cpp:28</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5"><div class="ttname"><a href="namespacecatacurses.html#a2181be54a83455ed99a7b7fab4fb46e8aa8987a61b46eae2571fc4ab9bc5d6ed5">catacurses::black</a></div><div class="ttdeci">@ black</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00079">cursesdef.h:79</a></div></div>
<div class="ttc" id="anamespaceclothing__mods_html_a5bf63dd4b0368188aa71cfa230cfa989"><div class="ttname"><a href="namespaceclothing__mods.html#a5bf63dd4b0368188aa71cfa230cfa989">clothing_mods::string_from_clothing_mod_type</a></div><div class="ttdeci">std::string string_from_clothing_mod_type(clothing_mod_type type)</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8cpp_source.html#l00168">clothing_mod.cpp:168</a></div></div>
<div class="ttc" id="anamespaceclothing__mods_html_a76b8b8dcfd6c0d1af778f5722bbb3bdb"><div class="ttname"><a href="namespaceclothing__mods.html#a76b8b8dcfd6c0d1af778f5722bbb3bdb">clothing_mods::get_all</a></div><div class="ttdeci">const std::vector&lt; clothing_mod &gt; &amp; get_all()</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8cpp_source.html#l00145">clothing_mod.cpp:145</a></div></div>
<div class="ttc" id="anamespaceclothing__mods_html_a8f2f25d2cd5b92e4ab3f62cfd98d7c6e"><div class="ttname"><a href="namespaceclothing__mods.html#a8f2f25d2cd5b92e4ab3f62cfd98d7c6e">clothing_mods::get_all_with</a></div><div class="ttdeci">const std::vector&lt; clothing_mod &gt; &amp; get_all_with(clothing_mod_type type)</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8cpp_source.html#l00150">clothing_mod.cpp:150</a></div></div>
<div class="ttc" id="anamespaceclothing__mods_html_aec1b637295ff2f661b88d4c77692e176"><div class="ttname"><a href="namespaceclothing__mods.html#aec1b637295ff2f661b88d4c77692e176">clothing_mods::all_clothing_mod_types</a></div><div class="ttdeci">constexpr std::array&lt; clothing_mod_type, 9 &gt; all_clothing_mod_types</div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00066">clothing_mod.h:66</a></div></div>
<div class="ttc" id="anamespacedebug__menu_html_aa07895d5fd8a5172b7e5fa9a1e261fa6"><div class="ttname"><a href="namespacedebug__menu.html#aa07895d5fd8a5172b7e5fa9a1e261fa6">debug_menu::debug</a></div><div class="ttdeci">void debug()</div><div class="ttdef"><b>Definition:</b> <a href="debug__menu_8cpp_source.html#l03358">debug_menu.cpp:3358</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb">debugmode::DF_IUSE</a></div><div class="ttdeci">@ DF_IUSE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00260">debug.h:260</a></div></div>
<div class="ttc" id="anamespacedisplay_html"><div class="ttname"><a href="namespacedisplay.html">display</a></div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00094">display.h:95</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a01036ddcc971d02f6c32c3da31a119f2"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a01036ddcc971d02f6c32c3da31a119f2">enchant_vals::mod::RANGE</a></div><div class="ttdeci">@ RANGE</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998afd3fd8d876c094291424cddad4c109da"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998afd3fd8d876c094291424cddad4c109da">enchant_vals::mod::ITEM_ATTACK_SPEED</a></div><div class="ttdeci">@ ITEM_ATTACK_SPEED</div></div>
<div class="ttc" id="anamespaceexplosion__handler_html_af4ae8e07a9627dbfe22b2d07ea577587"><div class="ttname"><a href="namespaceexplosion__handler.html#af4ae8e07a9627dbfe22b2d07ea577587">explosion_handler::explosion</a></div><div class="ttdeci">void explosion(const Creature *source, const tripoint &amp;p, float power, float factor, bool fire, int casing_mass, float frag_mass)</div><div class="ttdoc">Queue an explosion at p of intensity (power) with (shrapnel) chunks of shrapnel.</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8cpp_source.html#l00489">explosion.cpp:489</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_ac3a1cc6107728c90e65e9af775f7c279"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#ac3a1cc6107728c90e65e9af775f7c279">game_menus::inv::compare</a></div><div class="ttdeci">void compare(avatar &amp;you, const std::optional&lt; tripoint &gt; &amp;offset)</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02394">game_inventory.cpp:2394</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a060b59dbae83b1188922a4b701894532"><div class="ttname"><a href="namespaceiexamine.html#a060b59dbae83b1188922a4b701894532">iexamine::on_smoke_out</a></div><div class="ttdeci">void on_smoke_out(const tripoint &amp;examp, const time_point &amp;start_time)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06737">iexamine.cpp:6737</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_abb9c8b4667ab26a946076aa255d46d75"><div class="ttname"><a href="namespaceiexamine.html#abb9c8b4667ab26a946076aa255d46d75">iexamine::mill_finalize</a></div><div class="ttdeci">void mill_finalize(Character &amp;, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06379">iexamine.cpp:6379</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_acd9cd308f5f982d0be7cecc680db89c0"><div class="ttname"><a href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">iexamine::bars</a></div><div class="ttdeci">void bars(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">If player has amorphous trait, slip through the bars.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01601">iexamine.cpp:1601</a></div></div>
<div class="ttc" id="anamespaceitem__group_html_ac3c103acdb13db1667ce38b1bc2bf8a1"><div class="ttname"><a href="namespaceitem__group.html#ac3c103acdb13db1667ce38b1bc2bf8a1">item_group::item_from</a></div><div class="ttdeci">item item_from(const item_group_id &amp;group_id, const time_point &amp;birthday)</div><div class="ttdoc">Returns a random item from the item group, handles packaged food by putting it into its container and...</div><div class="ttdef"><b>Definition:</b> <a href="item__group_8cpp_source.html#l00997">item_group.cpp:997</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html"><div class="ttname"><a href="namespaceitem__internal.html">item_internal</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00256">item.cpp:257</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_a27b6b980a290a373be63b1ef6c0d6d09"><div class="ttname"><a href="namespaceitem__internal.html#a27b6b980a290a373be63b1ef6c0d6d09">item_internal::goes_bad_cache_is_for</a></div><div class="ttdeci">static bool goes_bad_cache_is_for(const item *i)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00274">item.cpp:274</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_a6b64bf03e7d0612af4681fe5d9297a8d"><div class="ttname"><a href="namespaceitem__internal.html#a6b64bf03e7d0612af4681fe5d9297a8d">item_internal::goes_bad_cache_unset</a></div><div class="ttdeci">static void goes_bad_cache_unset()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00269">item.cpp:269</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_ab29e65ae2a5f57badbdb39863fc56496"><div class="ttname"><a href="namespaceitem__internal.html#ab29e65ae2a5f57badbdb39863fc56496">item_internal::goes_bad_cache_fetch</a></div><div class="ttdeci">static bool goes_bad_cache_fetch()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00260">item.cpp:260</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_ac94cd9616ea5011cfb58a47bce9242b8"><div class="ttname"><a href="namespaceitem__internal.html#ac94cd9616ea5011cfb58a47bce9242b8">item_internal::goes_bad_temp_cache</a></div><div class="ttdeci">static bool goes_bad_temp_cache</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00258">item.cpp:258</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_aeb6a5884dc69181dcad735402600ac74"><div class="ttname"><a href="namespaceitem__internal.html#aeb6a5884dc69181dcad735402600ac74">item_internal::goes_bad_cache_set</a></div><div class="ttdeci">static void goes_bad_cache_set(const item *i)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00264">item.cpp:264</a></div></div>
<div class="ttc" id="anamespaceitem__internal_html_af331c28e129a5a5f8c7e2a2619249993"><div class="ttname"><a href="namespaceitem__internal.html#af331c28e129a5a5f8c7e2a2619249993">item_internal::goes_bad_temp_cache_for</a></div><div class="ttdeci">static const item * goes_bad_temp_cache_for</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00259">item.cpp:259</a></div></div>
<div class="ttc" id="anamespaceiuse_html"><div class="ttname"><a href="namespaceiuse.html">iuse</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00029">iuse.h:30</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7a82eca2795b3af854b612ca79c53a353e">keycode::space</a></div><div class="ttdeci">@ space</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00080">input.h:80</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">keycode::end</a></div><div class="ttdeci">@ end</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00095">input.h:95</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa71175910d38b92b1d517712c548d4dc">keycode::right</a></div><div class="ttdeci">@ right</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00097">input.h:97</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7ae4956a4c75f3714cb1bb5cca8d9b3317">keycode::left</a></div><div class="ttdeci">@ left</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00098">input.h:98</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_a616ad2c7ee2eb002b683b41b04a888c1"><div class="ttname"><a href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">mapgen_defer::message</a></div><div class="ttdeci">static std::string message</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00632">mapgen.cpp:632</a></div></div>
<div class="ttc" id="anamespacematerials_html"><div class="ttname"><a href="namespacematerials.html">materials</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00175">material.h:176</a></div></div>
<div class="ttc" id="anamespacematerials_html_a9efa40da895bb4f5dbeb7db8f3f0b5bb"><div class="ttname"><a href="namespacematerials.html#a9efa40da895bb4f5dbeb7db8f3f0b5bb">materials::get_rotting</a></div><div class="ttdeci">std::set&lt; material_id &gt; get_rotting()</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00386">material.cpp:386</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="anamespacemelee_html"><div class="ttname"><a href="namespacemelee.html">melee</a></div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l02994">melee.cpp:2995</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a21d0cd6112e0f11d471fb3cbf0b4f759"><div class="ttname"><a href="namespaceom__direction.html#a21d0cd6112e0f11d471fb3cbf0b4f759">om_direction::bits</a></div><div class="ttdeci">constexpr size_t bits</div><div class="ttdoc">Number of bits needed to store directions.</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00069">omdata.h:69</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a27cad92b0d05637eb934f1a7f3424e41"><div class="ttname"><a href="namespaceom__direction.html#a27cad92b0d05637eb934f1a7f3424e41">om_direction::all</a></div><div class="ttdeci">const std::array&lt; type, 4 &gt; all</div><div class="ttdoc">For the purposes of iteration.</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00065">omdata.h:65</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00066">omdata.h:66</a></div></div>
<div class="ttc" id="anamespacestd_1_1this__thread_html_ad1967fe44af39a7961e35eed20166ca9"><div class="ttname"><a href="namespacestd_1_1this__thread.html#ad1967fe44af39a7961e35eed20166ca9">std::this_thread::get_id</a></div><div class="ttdeci">thread::id get_id()</div><div class="ttdef"><b>Definition:</b> <a href="mingw_8thread_8h_source.html#l00124">mingw.thread.h:124</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a3fa7c6789383b6c28db8a7b51764ca16"><div class="ttname"><a href="namespacetemperatures.html#a3fa7c6789383b6c28db8a7b51764ca16">temperatures::hot</a></div><div class="ttdeci">constexpr units::temperature hot</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00095">game_constants.h:95</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a6a0e3903fa0a749ee4c45d95eb6016d2"><div class="ttname"><a href="namespacetemperatures.html#a6a0e3903fa0a749ee4c45d95eb6016d2">temperatures::cold</a></div><div class="ttdeci">constexpr units::temperature cold</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00104">game_constants.h:104</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a6ac4b0413305dd75769d62227081d8b1"><div class="ttname"><a href="namespacetemperatures.html#a6ac4b0413305dd75769d62227081d8b1">temperatures::fridge</a></div><div class="ttdeci">constexpr units::temperature fridge</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00101">game_constants.h:101</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a6fe2961d424ef5406871b8ee32764330"><div class="ttname"><a href="namespacetemperatures.html#a6fe2961d424ef5406871b8ee32764330">temperatures::freezing</a></div><div class="ttdeci">constexpr units::temperature freezing</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00110">game_constants.h:110</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a9f523a38a9f55c0f553288964f823f38"><div class="ttname"><a href="namespacetemperatures.html#a9f523a38a9f55c0f553288964f823f38">temperatures::normal</a></div><div class="ttdeci">constexpr units::temperature normal</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00098">game_constants.h:98</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_ab5323589e14984e5c09cafa3b62def7d"><div class="ttname"><a href="namespacetemperatures.html#ab5323589e14984e5c09cafa3b62def7d">temperatures::freezer</a></div><div class="ttdeci">constexpr units::temperature freezer</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00107">game_constants.h:107</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_af00d7a49cf88a77d0ec81f562fea9856"><div class="ttname"><a href="namespacetemperatures.html#af00d7a49cf88a77d0ec81f562fea9856">temperatures::boiling</a></div><div class="ttdeci">constexpr units::temperature boiling</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00113">game_constants.h:113</a></div></div>
<div class="ttc" id="anamespacetname_html"><div class="ttname"><a href="namespacetname.html">tname</a></div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00612">item_tname.cpp:613</a></div></div>
<div class="ttc" id="anamespacetname_html_a03487240c0884564fdcdd76885dc1db1"><div class="ttname"><a href="namespacetname.html#a03487240c0884564fdcdd76885dc1db1">tname::print_segment</a></div><div class="ttdeci">std::string print_segment(tname::segments segment, item const &amp;it, unsigned int quantity, segment_bitset const &amp;segments)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00614">item_tname.cpp:614</a></div></div>
<div class="ttc" id="anamespacetname_html_a24cc3734547252a92df94fedcff08ae3"><div class="ttname"><a href="namespacetname.html#a24cc3734547252a92df94fedcff08ae3">tname::unprefixed_tname</a></div><div class="ttdeci">constexpr segment_bitset unprefixed_tname(default_tname_bits &amp;~tname_prefix_bits)</div></div>
<div class="ttc" id="anamespacetname_html_a9605486cdd7379b0de8170f658de6dd9"><div class="ttname"><a href="namespacetname.html#a9605486cdd7379b0de8170f658de6dd9">tname::default_tname</a></div><div class="ttdeci">constexpr segment_bitset default_tname(default_tname_bits)</div></div>
<div class="ttc" id="anamespacetname_html_aa1554d737e65bcbb35adabd62a2a9b9d"><div class="ttname"><a href="namespacetname.html#aa1554d737e65bcbb35adabd62a2a9b9d">tname::tname_contents</a></div><div class="ttdeci">constexpr segment_bitset tname_contents(tname_contents_bits)</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">tname::segments</a></div><div class="ttdeci">segments</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8h_source.html#l00018">item_tname.h:18</a></div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a0e60ac85bc39f1e221d66a048ff164da"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a0e60ac85bc39f1e221d66a048ff164da">tname::segments::UPS</a></div><div class="ttdeci">@ UPS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a10c4a304905dd48439743b393540ce88"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a10c4a304905dd48439743b393540ce88">tname::segments::BROKEN</a></div><div class="ttdeci">@ BROKEN</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a130e56729a947fb46d4f9a61addde6a0"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a130e56729a947fb46d4f9a61addde6a0">tname::segments::WEAPON_MODS</a></div><div class="ttdeci">@ WEAPON_MODS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a1327f5ea7ca842398f7fa76405897ee3"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a1327f5ea7ca842398f7fa76405897ee3">tname::segments::ETHEREAL</a></div><div class="ttdeci">@ ETHEREAL</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a17acb5339914b65206909e97bc4242e7"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a17acb5339914b65206909e97bc4242e7">tname::segments::CHARGES</a></div><div class="ttdeci">@ CHARGES</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a17c581785220dc0f84ffc0f0a787a299"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a17c581785220dc0f84ffc0f0a787a299">tname::segments::CUSTOM_ITEM_PREFIX</a></div><div class="ttdeci">@ CUSTOM_ITEM_PREFIX</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a18ff74f43da410c5529f7d6fca84f115"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a18ff74f43da410c5529f7d6fca84f115">tname::segments::ACTIVE</a></div><div class="ttdeci">@ ACTIVE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a200bf336a31a735fc0d946866b24554f"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a200bf336a31a735fc0d946866b24554f">tname::segments::CONTENTS_FULL</a></div><div class="ttdeci">@ CONTENTS_FULL</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a29e93352d0d973625131b5a71a0d24b1"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a29e93352d0d973625131b5a71a0d24b1">tname::segments::CLOTHING_SIZE</a></div><div class="ttdeci">@ CLOTHING_SIZE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a2ac0ed3f00fa0069d39782c633e29d17"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a2ac0ed3f00fa0069d39782c633e29d17">tname::segments::CRAFT</a></div><div class="ttdeci">@ CRAFT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a343494c4351f9f0ed130abd7cedb1c27"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a343494c4351f9f0ed130abd7cedb1c27">tname::segments::CONTENTS_COUNT</a></div><div class="ttdeci">@ CONTENTS_COUNT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a3ca55dfc198ca8884e24cd29a72ef0f7"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a3ca55dfc198ca8884e24cd29a72ef0f7">tname::segments::TECHNIQUES</a></div><div class="ttdeci">@ TECHNIQUES</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a3ef5656907af69ff36347e8dc2416744"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a3ef5656907af69ff36347e8dc2416744">tname::segments::DIRT</a></div><div class="ttdeci">@ DIRT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a4197f2a19f3662c85663bf81b4a722ee"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4197f2a19f3662c85663bf81b4a722ee">tname::segments::CUSTOM_ITEM_SUFFIX</a></div><div class="ttdeci">@ CUSTOM_ITEM_SUFFIX</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a41ecf3c2c3261d190038bf99196cbbd5"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a41ecf3c2c3261d190038bf99196cbbd5">tname::segments::FOOD_TRAITS</a></div><div class="ttdeci">@ FOOD_TRAITS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4819dc9f2283ad2dac18ec754438428b">tname::segments::TAGS</a></div><div class="ttdeci">@ TAGS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a4833df75743b2c5ce47d270268ef5579"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a4833df75743b2c5ce47d270268ef5579">tname::segments::CBM_STATUS</a></div><div class="ttdeci">@ CBM_STATUS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a5759c29105f0562576beb55d8981effe"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a5759c29105f0562576beb55d8981effe">tname::segments::LOCATION_HINT</a></div><div class="ttdeci">@ LOCATION_HINT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a57ccff8da88794bd74f0aacaf9682f22"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a57ccff8da88794bd74f0aacaf9682f22">tname::segments::FAVORITE_POST</a></div><div class="ttdeci">@ FAVORITE_POST</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a58c0a0e97e6d2f615bc264c2775fda44"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a58c0a0e97e6d2f615bc264c2775fda44">tname::segments::LINK</a></div><div class="ttdeci">@ LINK</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a62a15eeee54e263cd65b587e86f0004f"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a62a15eeee54e263cd65b587e86f0004f">tname::segments::RELIC</a></div><div class="ttdeci">@ RELIC</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a6ce5f855f667c4a7b51360d8c37e2e66"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a6ce5f855f667c4a7b51360d8c37e2e66">tname::segments::BURN</a></div><div class="ttdeci">@ BURN</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a7023640d655ead944f66a4544efc56c7"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a7023640d655ead944f66a4544efc56c7">tname::segments::WHEEL_DIAMETER</a></div><div class="ttdeci">@ WHEEL_DIAMETER</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a7370b57f42f84ed1172abf10459344a7"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a7370b57f42f84ed1172abf10459344a7">tname::segments::COMPONENTS</a></div><div class="ttdeci">@ COMPONENTS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a761123ba86a33d83dcf34060114e9832"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a761123ba86a33d83dcf34060114e9832">tname::segments::FOOD_PERISHABLE</a></div><div class="ttdeci">@ FOOD_PERISHABLE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a835b7a4ebc88d61845570e227e3a890d"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a835b7a4ebc88d61845570e227e3a890d">tname::segments::MODS</a></div><div class="ttdeci">@ MODS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a8b926ca329dfb31daa1211d0e158e05e"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a8b926ca329dfb31daa1211d0e158e05e">tname::segments::CONTENTS</a></div><div class="ttdeci">@ CONTENTS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a922b63193a7449068fe51b17a75f9546"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a922b63193a7449068fe51b17a75f9546">tname::segments::OVERHEAT</a></div><div class="ttdeci">@ OVERHEAT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a947745295c7a69e66d294305d72eae3c"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a947745295c7a69e66d294305d72eae3c">tname::segments::WHITEBLACKLIST</a></div><div class="ttdeci">@ WHITEBLACKLIST</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a948495146facadfe8859789036313d79">tname::segments::TYPE</a></div><div class="ttdeci">@ TYPE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6a9a66b5bf216bb23cf642da436bc5297e"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6a9a66b5bf216bb23cf642da436bc5297e">tname::segments::FILTHY</a></div><div class="ttdeci">@ FILTHY</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ab976538812ef6e3e5881e245d5fc3c76"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ab976538812ef6e3e5881e245d5fc3c76">tname::segments::TEMPERATURE</a></div><div class="ttdeci">@ TEMPERATURE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ac134494bb047e373adba0c7fc26e5188"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac134494bb047e373adba0c7fc26e5188">tname::segments::FOOD_STATUS</a></div><div class="ttdeci">@ FOOD_STATUS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ac26e1a550a336551c4e26732369c9a83"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac26e1a550a336551c4e26732369c9a83">tname::segments::FAVORITE_PRE</a></div><div class="ttdeci">@ FAVORITE_PRE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ac79312b5cadc8553c3740929cca71136"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac79312b5cadc8553c3740929cca71136">tname::segments::DURABILITY</a></div><div class="ttdeci">@ DURABILITY</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ac99d29efbd4fc48503faa81b5312f697"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ac99d29efbd4fc48503faa81b5312f697">tname::segments::FAULTS</a></div><div class="ttdeci">@ FAULTS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6acda7182af4cc0451672a1cd50d36f3a2"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6acda7182af4cc0451672a1cd50d36f3a2">tname::segments::VARIANT</a></div><div class="ttdeci">@ VARIANT</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ad0db3f5a4a306cff20be4187b3ef3445"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ad0db3f5a4a306cff20be4187b3ef3445">tname::segments::VARS</a></div><div class="ttdeci">@ VARS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ad1cd941e9361399f0433d63e6f7d7c76"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ad1cd941e9361399f0433d63e6f7d7c76">tname::segments::last_segment</a></div><div class="ttdeci">@ last_segment</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6ae38583f3a073fa2a86a841b672aba548"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6ae38583f3a073fa2a86a841b672aba548">tname::segments::CATEGORY</a></div><div class="ttdeci">@ CATEGORY</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6aec5d5b35e9ef72273e016a6f629004f9"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6aec5d5b35e9ef72273e016a6f629004f9">tname::segments::SEALED</a></div><div class="ttdeci">@ SEALED</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6af680f85e3db4d6b1e202f72f922b4498"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6af680f85e3db4d6b1e202f72f922b4498">tname::segments::FOOD_IRRADIATED</a></div><div class="ttdeci">@ FOOD_IRRADIATED</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6afc7deac95948dfebf5028ffdc7bcbb06"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afc7deac95948dfebf5028ffdc7bcbb06">tname::segments::WETNESS</a></div><div class="ttdeci">@ WETNESS</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6afd1267e84434bdbba6fd4fa7f869117d"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afd1267e84434bdbba6fd4fa7f869117d">tname::segments::CORPSE</a></div><div class="ttdeci">@ CORPSE</div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6afdb51dc036a8e6d2076497cad6c66046"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6afdb51dc036a8e6d2076497cad6c66046">tname::segments::CONTENTS_ABREV</a></div><div class="ttdeci">@ CONTENTS_ABREV</div></div>
<div class="ttc" id="anamespaceunits_html_a087bd10745d16c81bbce09c6cc3f177e"><div class="ttname"><a href="namespaceunits.html#a087bd10745d16c81bbce09c6cc3f177e">units::to_kilowatt</a></div><div class="ttdeci">constexpr value_type to_kilowatt(const quantity&lt; value_type, power_in_milliwatt_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00632">units.h:632</a></div></div>
<div class="ttc" id="anamespaceunits_html_a0a6a5961539645e3bd56992bf148f639"><div class="ttname"><a href="namespaceunits.html#a0a6a5961539645e3bd56992bf148f639">units::from_fahrenheit</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature::value_type, temperature_in_kelvin_tag &gt; from_fahrenheit(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00426">units.h:426</a></div></div>
<div class="ttc" id="anamespaceunits_html_a144476d36f26d6e1916493c3636d54dc"><div class="ttname"><a href="namespaceunits.html#a144476d36f26d6e1916493c3636d54dc">units::to_milliliter</a></div><div class="ttdeci">constexpr value_type to_milliliter(const quantity&lt; value_type, volume_in_milliliter_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00316">units.h:316</a></div></div>
<div class="ttc" id="anamespaceunits_html_a18c591ea28d684e38a315ff0468c7339"><div class="ttname"><a href="namespaceunits.html#a18c591ea28d684e38a315ff0468c7339">units::from_milligram</a></div><div class="ttdeci">constexpr quantity&lt; value_type, mass_in_milligram_tag &gt; from_milligram(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00337">units.h:337</a></div></div>
<div class="ttc" id="anamespaceunits_html_a2fa3e5208be6bf02ff8d1a8c4eca1de9"><div class="ttname"><a href="namespaceunits.html#a2fa3e5208be6bf02ff8d1a8c4eca1de9">units::from_degrees</a></div><div class="ttdeci">constexpr quantity&lt; double, angle_in_radians_tag &gt; from_degrees(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00752">units.h:752</a></div></div>
<div class="ttc" id="anamespaceunits_html_a345181745bb0299d6f6f8f96d4f4acdc"><div class="ttname"><a href="namespaceunits.html#a345181745bb0299d6f6f8f96d4f4acdc">units::from_kelvin_delta</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature_delta::value_type, temperature_delta_in_kelvin_tag &gt; from_kelvin_delta(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00472">units.h:472</a></div></div>
<div class="ttc" id="anamespaceunits_html_a35972f2cb1f47d2e34663106d2b45a45"><div class="ttname"><a href="namespaceunits.html#a35972f2cb1f47d2e34663106d2b45a45">units::from_joule_per_gram</a></div><div class="ttdeci">constexpr quantity&lt; value_type, specific_energy_in_joule_per_gram_tag &gt; from_joule_per_gram(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00383">units.h:383</a></div></div>
<div class="ttc" id="anamespaceunits_html_a3ace0fc0f1c25f25ff4e75a2b2d22c29"><div class="ttname"><a href="namespaceunits.html#a3ace0fc0f1c25f25ff4e75a2b2d22c29">units::to_millijoule</a></div><div class="ttdeci">constexpr value_type to_millijoule(const quantity&lt; value_type, energy_in_millijoule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00566">units.h:566</a></div></div>
<div class="ttc" id="anamespaceunits_html_a432535e58069e90c49e3e5c285bef861"><div class="ttname"><a href="namespaceunits.html#a432535e58069e90c49e3e5c285bef861">units::from_milliwatt</a></div><div class="ttdeci">constexpr quantity&lt; value_type, power_in_milliwatt_tag &gt; from_milliwatt(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00592">units.h:592</a></div></div>
<div class="ttc" id="anamespaceunits_html_a483cb6d663c30de1baa5996fe8097bcd"><div class="ttname"><a href="namespaceunits.html#a483cb6d663c30de1baa5996fe8097bcd">units::length_units</a></div><div class="ttdeci">const std::vector&lt; std::pair&lt; std::string, length &gt; &gt; length_units</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l01166">units.h:1166</a></div></div>
<div class="ttc" id="anamespaceunits_html_a4e18c5472c3f55e110fb16c9e0fe8c45"><div class="ttname"><a href="namespaceunits.html#a4e18c5472c3f55e110fb16c9e0fe8c45">units::to_liter</a></div><div class="ttdeci">constexpr double to_liter(const volume &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00321">units.h:321</a></div></div>
<div class="ttc" id="anamespaceunits_html_a5152e4aef05ed3617e160e36b95ef3ad"><div class="ttname"><a href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature::value_type, temperature_in_kelvin_tag &gt; from_celsius(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00418">units.h:418</a></div></div>
<div class="ttc" id="anamespaceunits_html_a562f71f7aa63ca761cd6869c48602bba"><div class="ttname"><a href="namespaceunits.html#a562f71f7aa63ca761cd6869c48602bba">units::display</a></div><div class="ttdeci">std::string display(const units::energy &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8cpp_source.html#l00131">units.cpp:131</a></div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00328">units.h:328</a></div></div>
<div class="ttc" id="anamespaceunits_html_a6d621878032da8dfad8b4e3460c82932"><div class="ttname"><a href="namespaceunits.html#a6d621878032da8dfad8b4e3460c82932">units::from_gram</a></div><div class="ttdeci">constexpr quantity&lt; value_type, mass_in_milligram_tag &gt; from_gram(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00344">units.h:344</a></div></div>
<div class="ttc" id="anamespaceunits_html_a70f92b42412609565a84bf9a7ff422a0"><div class="ttname"><a href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature_delta::value_type, temperature_delta_in_kelvin_tag &gt; from_fahrenheit_delta(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00495">units.h:495</a></div></div>
<div class="ttc" id="anamespaceunits_html_a7ad0e3aed5fcfc224568a0520be0efa5"><div class="ttname"><a href="namespaceunits.html#a7ad0e3aed5fcfc224568a0520be0efa5">units::to_kelvin</a></div><div class="ttdeci">constexpr value_type to_kelvin(const quantity&lt; value_type, temperature_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00411">units.h:411</a></div></div>
<div class="ttc" id="anamespaceunits_html_a7f3948de70e78d68af74fb3d119cf176"><div class="ttname"><a href="namespaceunits.html#a7f3948de70e78d68af74fb3d119cf176">units::to_kilojoule</a></div><div class="ttdeci">constexpr value_type to_kilojoule(const quantity&lt; value_type, energy_in_millijoule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00578">units.h:578</a></div></div>
<div class="ttc" id="anamespaceunits_html_a8306911daadc1a4d7a7b46e9786f4a4c"><div class="ttname"><a href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a></div><div class="ttdeci">constexpr value_type to_gram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00364">units.h:364</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9a9f862b2cd8fb3133a67b8bf927b017"><div class="ttname"><a href="namespaceunits.html#a9a9f862b2cd8fb3133a67b8bf927b017">units::from_kilojoule</a></div><div class="ttdeci">constexpr quantity&lt; value_type, energy_in_millijoule_tag &gt; from_kilojoule(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00555">units.h:555</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9d2095b1d2bb0876ccc98e48a5e99967"><div class="ttname"><a href="namespaceunits.html#a9d2095b1d2bb0876ccc98e48a5e99967">units::from_kilogram</a></div><div class="ttdeci">constexpr quantity&lt; value_type, mass_in_milligram_tag &gt; from_kilogram(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00351">units.h:351</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9e6793937cd630b03c24d520c5415904"><div class="ttname"><a href="namespaceunits.html#a9e6793937cd630b03c24d520c5415904">units::to_joule</a></div><div class="ttdeci">constexpr value_type to_joule(const quantity&lt; value_type, energy_in_millijoule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00572">units.h:572</a></div></div>
<div class="ttc" id="anamespaceunits_html_aafd2a8bd44b71ecc20b880db8071ad53"><div class="ttname"><a href="namespaceunits.html#aafd2a8bd44b71ecc20b880db8071ad53">units::power</a></div><div class="ttdeci">quantity&lt; std::int64_t, power_in_milliwatt_tag &gt; power</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00057">units_fwd.h:57</a></div></div>
<div class="ttc" id="anamespaceunits_html_ab8d1d147927f09ae08c72c677d20806d"><div class="ttname"><a href="namespaceunits.html#ab8d1d147927f09ae08c72c677d20806d">units::to_joule_per_gram</a></div><div class="ttdeci">constexpr value_type to_joule_per_gram(const quantity&lt; value_type, specific_energy_in_joule_per_gram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00390">units.h:390</a></div></div>
<div class="ttc" id="anamespaceunits_html_acd2222df073481c31e22fc477a686c62"><div class="ttname"><a href="namespaceunits.html#acd2222df073481c31e22fc477a686c62">units::to_milliwatt</a></div><div class="ttdeci">constexpr value_type to_milliwatt(const quantity&lt; value_type, power_in_milliwatt_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00620">units.h:620</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae0a8630df3fd6591e6014e1f888bf318"><div class="ttname"><a href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature::value_type, temperature_in_kelvin_tag &gt; from_kelvin(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00404">units.h:404</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae31e6d9c71949a72ee41be4be6f1afcd"><div class="ttname"><a href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00440">units.h:440</a></div></div>
<div class="ttc" id="anamespaceunits_html_afc3989e0a676995d9a235753085f235f"><div class="ttname"><a href="namespaceunits.html#afc3989e0a676995d9a235753085f235f">units::to_cent</a></div><div class="ttdeci">constexpr value_type to_cent(const quantity&lt; value_type, money_in_cent_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00665">units.h:665</a></div></div>
<div class="ttc" id="anamespacevehicles_1_1parts_html_a1760b563889a67b60d887f2cd6331846"><div class="ttname"><a href="namespacevehicles_1_1parts.html#a1760b563889a67b60d887f2cd6331846">vehicles::parts::get_all</a></div><div class="ttdeci">const std::vector&lt; vpart_info &gt; &amp; get_all()</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8cpp_source.html#l00960">veh_type.cpp:960</a></div></div>
<div class="ttc" id="anamespacevitamin__units_html_aadfbde1985df550092992163aa1bb9d3"><div class="ttname"><a href="namespacevitamin__units.html#aadfbde1985df550092992163aa1bb9d3">vitamin_units::mass</a></div><div class="ttdeci">units::quantity&lt; int, units::mass_in_microgram_tag &gt; mass</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00019">stomach.h:19</a></div></div>
<div class="ttc" id="anpc_8h_html"><div class="ttname"><a href="npc_8h.html">npc.h</a></div></div>
<div class="ttc" id="aomdata_8h_html_a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf"><div class="ttname"><a href="omdata_8h.html#a34fa26d94d253aff79aacd4ffbc1505da795f3202b17cb6bc3d4b771d8c6c9eaf">oter_travel_cost_type::other</a></div><div class="ttdeci">@ other</div></div>
<div class="ttc" id="aoptions_8h_html"><div class="ttname"><a href="options_8h.html">options.h</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a001be4a8b824418455d413a555b6d025"><div class="ttname"><a href="output_8cpp.html#a001be4a8b824418455d413a555b6d025">format_item_info</a></div><div class="ttdeci">std::string format_item_info(const std::vector&lt; iteminfo &gt; &amp;vItemDisplay, const std::vector&lt; iteminfo &gt; &amp;vItemCompare)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01110">output.cpp:1110</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a4a97da0b37bd470ce4622141ad111286"><div class="ttname"><a href="output_8cpp.html#a4a97da0b37bd470ce4622141ad111286">satiety_bar</a></div><div class="ttdeci">std::string satiety_bar(const int calpereffv)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02847">output.cpp:2847</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a71e024973a8beccd4a228d00ebd9503a"><div class="ttname"><a href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a></div><div class="ttdeci">std::string uppercase_first_letter(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02558">output.cpp:2558</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a813ac4bd0ac2745dfe41d13adf98996f"><div class="ttname"><a href="output_8cpp.html#a813ac4bd0ac2745dfe41d13adf98996f">replace_colors</a></div><div class="ttdeci">std::string replace_colors(std::string text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00998">output.cpp:998</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ad0b1d7ba5d5282e4c40c0bf03a2f90c2"><div class="ttname"><a href="output_8cpp.html#ad0b1d7ba5d5282e4c40c0bf03a2f90c2">rad_badge_color</a></div><div class="ttdeci">std::pair&lt; std::string, nc_color &gt; rad_badge_color(const int rad)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02694">output.cpp:2694</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_af3c457642e21078c897f89206b1a8501"><div class="ttname"><a href="output_8cpp.html#af3c457642e21078c897f89206b1a8501">healthy_bar</a></div><div class="ttdeci">std::string healthy_bar(const int healthy)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02866">output.cpp:2866</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
<div class="ttc" id="aoutput_8h_html_acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a334c4a4c42fdb79d7ebc3e73b517e6f8">enumeration_conjunction::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="aoutput_8h_html_acff0d12357d8a4690e781eed41b36b98a9022a153e6190f10d9b57aa4232b8aea"><div class="ttname"><a href="output_8h.html#acff0d12357d8a4690e781eed41b36b98a9022a153e6190f10d9b57aa4232b8aea">enumeration_conjunction::arrow</a></div><div class="ttdeci">@ arrow</div></div>
<div class="ttc" id="aoutput_8h_html_acff0d12357d8a4690e781eed41b36b98acfc049a17faac959998820e7aaaf4329"><div class="ttname"><a href="output_8h.html#acff0d12357d8a4690e781eed41b36b98acfc049a17faac959998820e7aaaf4329">enumeration_conjunction::or_</a></div><div class="ttdeci">@ or_</div></div>
<div class="ttc" id="aoutput_8h_html_afc5db1b09e0b37fa89eda5966c61b1f5"><div class="ttname"><a href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a></div><div class="ttdeci">std::string format_money(int cents)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l01141">output.h:1141</a></div></div>
<div class="ttc" id="aovermap_8cpp_html_a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95"><div class="ttname"><a href="overmap_8cpp.html#a1aa258a4b1427766c283c1ae9ea81f05ac5e3b9675d114c21ad3367d318f6aa95">join_type::mandatory</a></div><div class="ttdeci">@ mandatory</div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a></div><div class="ttdeci">@ WIELD</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00069">pickup.cpp:69</a></div></div>
<div class="ttc" id="apimpl_8h_html"><div class="ttname"><a href="pimpl_8h.html">pimpl.h</a></div></div>
<div class="ttc" id="apocket__type_8h_html"><div class="ttname"><a href="pocket__type_8h.html">pocket_type.h</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1">pocket_type</a></div><div class="ttdeci">pocket_type</div><div class="ttdef"><b>Definition:</b> <a href="pocket__type_8h_source.html#l00007">pocket_type.h:7</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">pocket_type::EBOOK</a></div><div class="ttdeci">@ EBOOK</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9ad53f422a98449de1c9f7bd20b2de8a">pocket_type::MAGAZINE</a></div><div class="ttdeci">@ MAGAZINE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a></div><div class="ttdeci">@ CONTAINER</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1aaea541d7f9574587656dc5125116e548">pocket_type::SOFTWARE</a></div><div class="ttdeci">@ SOFTWARE</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ab27af2204ca1397f7eda1c0421f4fcfc">pocket_type::MAGAZINE_WELL</a></div><div class="ttdeci">@ MAGAZINE_WELL</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a></div><div class="ttdeci">@ MOD</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1af447f5c03508de4d88e340390ba7c78f"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1af447f5c03508de4d88e340390ba7c78f">pocket_type::LAST</a></div><div class="ttdeci">@ LAST</div></div>
<div class="ttc" id="apoint_8h_html"><div class="ttname"><a href="point_8h.html">point.h</a></div></div>
<div class="ttc" id="apoint_8h_html_a0e8dbdd2aded60a5e099d44f5bbff80d"><div class="ttname"><a href="point_8h.html#a0e8dbdd2aded60a5e099d44f5bbff80d">tripoint_max</a></div><div class="ttdeci">constexpr tripoint tripoint_max</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00294">point.h:294</a></div></div>
<div class="ttc" id="apoint_8h_html_afa8693bb804568b71fece8ab73d959bf"><div class="ttname"><a href="point_8h.html#afa8693bb804568b71fece8ab73d959bf">tripoint_min</a></div><div class="ttdeci">constexpr tripoint tripoint_min</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00293">point.h:293</a></div></div>
<div class="ttc" id="aproficiency_8h_html"><div class="ttname"><a href="proficiency_8h.html">proficiency.h</a></div></div>
<div class="ttc" id="aproficiency_8h_html_a7c174fe5c5322e5b2d41254424fc5f75a5177790ad6df0ea98db41b37b602367c"><div class="ttname"><a href="proficiency_8h.html#a7c174fe5c5322e5b2d41254424fc5f75a5177790ad6df0ea98db41b37b602367c">proficiency_bonus_type::strength</a></div><div class="ttdeci">@ strength</div></div>
<div class="ttc" id="aprojectile_8cpp_html_a94546cfedf6b069ea55ca1d4c587bb93"><div class="ttname"><a href="projectile_8cpp.html#a94546cfedf6b069ea55ca1d4c587bb93">apply_ammo_effects</a></div><div class="ttdeci">void apply_ammo_effects(const Creature *source, const tripoint &amp;p, const std::set&lt; std::string &gt; &amp;effects)</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8cpp_source.html#l00142">projectile.cpp:142</a></div></div>
<div class="ttc" id="aprojectile_8h_html"><div class="ttname"><a href="projectile_8h.html">projectile.h</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a6b4c3a2a360b378de261413fbb7d84f0"><div class="ttname"><a href="ranged_8cpp.html#a6b4c3a2a360b378de261413fbb7d84f0">range_with_even_chance_of_good_hit</a></div><div class="ttdeci">int range_with_even_chance_of_good_hit(int dispersion)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00577">ranged.cpp:577</a></div></div>
<div class="ttc" id="aranged_8h_html"><div class="ttname"><a href="ranged_8h.html">ranged.h</a></div></div>
<div class="ttc" id="arecipe_8h_html"><div class="ttname"><a href="recipe_8h.html">recipe.h</a></div></div>
<div class="ttc" id="arecipe_8h_html_ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2"><div class="ttname"><a href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a></div><div class="ttdeci">@ ignore_proficiencies</div></div>
<div class="ttc" id="arecipe__dictionary_8cpp_html_a9fdb53bd54fb6dcc5f9b2e1e1b44570f"><div class="ttname"><a href="recipe__dictionary_8cpp.html#a9fdb53bd54fb6dcc5f9b2e1e1b44570f">recipe_dict</a></div><div class="ttdeci">recipe_dictionary recipe_dict</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8cpp_source.html#l00031">recipe_dictionary.cpp:31</a></div></div>
<div class="ttc" id="arecipe__dictionary_8h_html"><div class="ttname"><a href="recipe__dictionary_8h.html">recipe_dictionary.h</a></div></div>
<div class="ttc" id="arelic_8h_html"><div class="ttname"><a href="relic_8h.html">relic.h</a></div></div>
<div class="ttc" id="arequirements_8h_html"><div class="ttname"><a href="requirements_8h.html">requirements.h</a></div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00027">rng.cpp:27</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00134">rng.cpp:134</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00104">rng.h:104</a></div></div>
<div class="ttc" id="askill_8h_html"><div class="ttname"><a href="skill_8h.html">skill.h</a></div></div>
<div class="ttc" id="astomach_8h_html"><div class="ttname"><a href="stomach_8h.html">stomach.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astring__id_8h_html"><div class="ttname"><a href="string__id_8h.html">string_id.h</a></div></div>
<div class="ttc" id="astring__id__utils_8h_html"><div class="ttname"><a href="string__id__utils_8h.html">string_id_utils.h</a></div></div>
<div class="ttc" id="astring__id__utils_8h_html_a2b1329b7a7f39a8fc44c11272f30b55e"><div class="ttname"><a href="string__id__utils_8h.html#a2b1329b7a7f39a8fc44c11272f30b55e">sorted_lex</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; K, V &gt; &gt; sorted_lex(Col col)</div><div class="ttdoc">Returns vector sorted by lexicographic order of string_id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id__utils_8h_source.html#l00022">string_id_utils.h:22</a></div></div>
<div class="ttc" id="astructaim__type_html"><div class="ttname"><a href="structaim__type.html">aim_type</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00371">character.h:371</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html"><div class="ttname"><a href="structarmor__encumb__data.html">armor_encumb_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04036">item.cpp:4036</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html_a11a58acbcda685d67a069b512a35ca54"><div class="ttname"><a href="structarmor__encumb__data.html#a11a58acbcda685d67a069b512a35ca54">armor_encumb_data::encumb_min</a></div><div class="ttdeci">int encumb_min</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04039">item.cpp:4039</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html_a178af4fa89c9ec5a53f5e8997a54e7c6"><div class="ttname"><a href="structarmor__encumb__data.html#a178af4fa89c9ec5a53f5e8997a54e7c6">armor_encumb_data::encumb</a></div><div class="ttdeci">int encumb</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04037">item.cpp:4037</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html_a49aabc36c526ef49db46d768ed5987d4"><div class="ttname"><a href="structarmor__encumb__data.html#a49aabc36c526ef49db46d768ed5987d4">armor_encumb_data::encumb_max</a></div><div class="ttdeci">int encumb_max</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04038">item.cpp:4038</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html_a5c0874cd95046ba3cc57c17be0fc33a0"><div class="ttname"><a href="structarmor__encumb__data.html#a5c0874cd95046ba3cc57c17be0fc33a0">armor_encumb_data::armor_encumb_data</a></div><div class="ttdeci">armor_encumb_data(int in_encumb_min, int in_encumb, int in_encumb_max)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04047">item.cpp:4047</a></div></div>
<div class="ttc" id="astructarmor__encumb__data_html_a6bf72773db835afce0883fd837366244"><div class="ttname"><a href="structarmor__encumb__data.html#a6bf72773db835afce0883fd837366244">armor_encumb_data::operator==</a></div><div class="ttdeci">bool operator==(const armor_encumb_data &amp;a) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04041">item.cpp:4041</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html"><div class="ttname"><a href="structarmor__portion__data.html">armor_portion_data</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00277">itype.h:277</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a1064523b6750ce91d90409d03e1c984d"><div class="ttname"><a href="structarmor__portion__data.html#a1064523b6750ce91d90409d03e1c984d">armor_portion_data::coverage</a></div><div class="ttdeci">int coverage</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00296">itype.h:296</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a5df615d226253c130620aea7df865574"><div class="ttname"><a href="structarmor__portion__data.html#a5df615d226253c130620aea7df865574">armor_portion_data::comfortable</a></div><div class="ttdeci">bool comfortable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00355">itype.h:355</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a63903d5f173791b39620582196a9fcc0"><div class="ttname"><a href="structarmor__portion__data.html#a63903d5f173791b39620582196a9fcc0">armor_portion_data::encumber</a></div><div class="ttdeci">int encumber</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00286">itype.h:286</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a652e7f8ed5677ecbd1230c26e1e125e6"><div class="ttname"><a href="structarmor__portion__data.html#a652e7f8ed5677ecbd1230c26e1e125e6">armor_portion_data::best_protection_chance</a></div><div class="ttdeci">int best_protection_chance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00333">itype.h:333</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_a9ca7c23e5f018fad239bd2a1541db217"><div class="ttname"><a href="structarmor__portion__data.html#a9ca7c23e5f018fad239bd2a1541db217">armor_portion_data::layers</a></div><div class="ttdeci">std::set&lt; layer_level &gt; layers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00327">itype.h:327</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aa46a4b456dabc6f5c9bea37e35c95038"><div class="ttname"><a href="structarmor__portion__data.html#aa46a4b456dabc6f5c9bea37e35c95038">armor_portion_data::sub_coverage</a></div><div class="ttdeci">std::set&lt; sub_bodypart_str_id &gt; sub_coverage</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00324">itype.h:324</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aabe744d0df94853edbb8bc9db82ae410"><div class="ttname"><a href="structarmor__portion__data.html#aabe744d0df94853edbb8bc9db82ae410">armor_portion_data::rigid</a></div><div class="ttdeci">bool rigid</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00349">itype.h:349</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_aaf42a2c3d471eaf19bd53d22003b4bf9"><div class="ttname"><a href="structarmor__portion__data.html#aaf42a2c3d471eaf19bd53d22003b4bf9">armor_portion_data::breathability</a></div><div class="ttdeci">int breathability</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00346">itype.h:346</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ab61ec2399ae0c3b760af82685b141dc0"><div class="ttname"><a href="structarmor__portion__data.html#ab61ec2399ae0c3b760af82685b141dc0">armor_portion_data::volume_per_encumbrance</a></div><div class="ttdeci">static constexpr units::volume volume_per_encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00280">itype.h:280</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ac3fabd15e1320a95cce7ac696183fbaf"><div class="ttname"><a href="structarmor__portion__data.html#ac3fabd15e1320a95cce7ac696183fbaf">armor_portion_data::worst_protection_chance</a></div><div class="ttdeci">int worst_protection_chance</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00337">itype.h:337</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ac7ab081c566bef9bf9d3f8bf2e697d81"><div class="ttname"><a href="structarmor__portion__data.html#ac7ab081c566bef9bf9d3f8bf2e697d81">armor_portion_data::rigid_layer_only</a></div><div class="ttdeci">bool rigid_layer_only</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00352">itype.h:352</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ad0c7cca6c5e67850044a57369bee1fc8"><div class="ttname"><a href="structarmor__portion__data.html#ad0c7cca6c5e67850044a57369bee1fc8">armor_portion_data::covers</a></div><div class="ttdeci">std::optional&lt; body_part_set &gt; covers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00322">itype.h:322</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ae42e6eb2c36e3097a49516fa52a092d5"><div class="ttname"><a href="structarmor__portion__data.html#ae42e6eb2c36e3097a49516fa52a092d5">armor_portion_data::materials</a></div><div class="ttdeci">std::vector&lt; part_material &gt; materials</div><div class="ttdoc">What materials this portion is made of, for armor purposes.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00319">itype.h:319</a></div></div>
<div class="ttc" id="astructarmor__portion__data_html_ae863a53fdde88ddd5e11e355ae7affea"><div class="ttname"><a href="structarmor__portion__data.html#ae863a53fdde88ddd5e11e355ae7affea">armor_portion_data::avg_thickness</a></div><div class="ttdeci">float avg_thickness</div><div class="ttdoc">Average material thickness for all materials from this armor portion.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00305">itype.h:305</a></div></div>
<div class="ttc" id="astructbionic__data_html_a06694835a11655f5202446d51f1e8e4b"><div class="ttname"><a href="structbionic__data.html#a06694835a11655f5202446d51f1e8e4b">bionic_data::protec</a></div><div class="ttdeci">std::map&lt; bodypart_str_id, resistances &gt; protec</div><div class="ttdoc">Amount of damage protection offered by this bionic.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00111">bionics.h:111</a></div></div>
<div class="ttc" id="astructbionic__data_html_a3cf96a3fc532f2c82b73924ab585451e"><div class="ttname"><a href="structbionic__data.html#a3cf96a3fc532f2c82b73924ab585451e">bionic_data::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00141">bionics.h:141</a></div></div>
<div class="ttc" id="astructbionic__data_html_a46dddebc77b6ae7d8879c8b12fe02d4f"><div class="ttname"><a href="structbionic__data.html#a46dddebc77b6ae7d8879c8b12fe02d4f">bionic_data::capacity</a></div><div class="ttdeci">units::energy capacity</div><div class="ttdoc">Power bank size.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00045">bionics.h:45</a></div></div>
<div class="ttc" id="astructbionic__data_html_a8c9e4ced1429e0cfbb353e2c7bd9bc6d"><div class="ttname"><a href="structbionic__data.html#a8c9e4ced1429e0cfbb353e2c7bd9bc6d">bionic_data::env_protec</a></div><div class="ttdeci">std::map&lt; bodypart_str_id, size_t &gt; env_protec</div><div class="ttdoc">Amount of environmental protection offered by this bionic.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00109">bionics.h:109</a></div></div>
<div class="ttc" id="astructbionic__data_html_aa169d20729343547cd14f8db2dc07c88"><div class="ttname"><a href="structbionic__data.html#aa169d20729343547cd14f8db2dc07c88">bionic_data::encumbrance</a></div><div class="ttdeci">std::map&lt; bodypart_str_id, int &gt; encumbrance</div><div class="ttdoc">Body part encumbered by this bionic, mapped to the amount of encumbrance caused.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00119">bionics.h:119</a></div></div>
<div class="ttc" id="astructbionic__data_html_ac65e81046d312b60730341786da83042"><div class="ttname"><a href="structbionic__data.html#ac65e81046d312b60730341786da83042">bionic_data::required_bionic</a></div><div class="ttdeci">bionic_id required_bionic</div><div class="ttdoc">Id of another bionic which this bionic needs to have installed to be installed.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00062">bionics.h:62</a></div></div>
<div class="ttc" id="astructbionic__data_html_af544357a22cfa46822491eb947dcba49"><div class="ttname"><a href="structbionic__data.html#af544357a22cfa46822491eb947dcba49">bionic_data::fuel_opts</a></div><div class="ttdeci">std::vector&lt; material_id &gt; fuel_opts</div><div class="ttdoc">Fuel types that can be used by this bionic.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00068">bionics.h:68</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a3b033392942110cd83a51852c782220d"><div class="ttname"><a href="structbody__part__type.html#a3b033392942110cd83a51852c782220d">body_part_type::consolidate</a></div><div class="ttdeci">static std::set&lt; translation, localized_comparator &gt; consolidate(std::vector&lt; sub_bodypart_id &gt; &amp;covered)</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00625">bodypart.cpp:625</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a5c9ac1217c128e0f487b2f460dd3fad1a42155934c716c14660745bf822f4ff63"><div class="ttname"><a href="structbody__part__type.html#a5c9ac1217c128e0f487b2f460dd3fad1a42155934c716c14660745bf822f4ff63">body_part_type::type::torso</a></div><div class="ttdeci">@ torso</div></div>
<div class="ttc" id="astructbody__part__type_html_af61723b35f418a2b9d2eb92074f1ed95"><div class="ttname"><a href="structbody__part__type.html#af61723b35f418a2b9d2eb92074f1ed95">body_part_type::sub_parts</a></div><div class="ttdeci">std::vector&lt; sub_bodypart_str_id &gt; sub_parts</div><div class="ttdoc">Sub-location of the body part used for encumberance, coverage and determining protection.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00209">bodypart.h:209</a></div></div>
<div class="ttc" id="astructbodygraph__part_html"><div class="ttname"><a href="structbodygraph__part.html">bodygraph_part</a></div><div class="ttdef"><b>Definition:</b> <a href="bodygraph_8h_source.html#l00021">bodygraph.h:21</a></div></div>
<div class="ttc" id="astructbodygraph__part_html_a0775b5ec433e45367cb49c7146fa13df"><div class="ttname"><a href="structbodygraph__part.html#a0775b5ec433e45367cb49c7146fa13df">bodygraph_part::sub_bodyparts</a></div><div class="ttdeci">std::vector&lt; sub_bodypart_id &gt; sub_bodyparts</div><div class="ttdef"><b>Definition:</b> <a href="bodygraph_8h_source.html#l00025">bodygraph.h:25</a></div></div>
<div class="ttc" id="astructbodygraph__part_html_a6513c65aab49c5ea7d2f14870ccf7681"><div class="ttname"><a href="structbodygraph__part.html#a6513c65aab49c5ea7d2f14870ccf7681">bodygraph_part::bodyparts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; bodyparts</div><div class="ttdef"><b>Definition:</b> <a href="bodygraph_8h_source.html#l00023">bodygraph.h:23</a></div></div>
<div class="ttc" id="astructbodygraph_html_a84e2f8c5fd4e680df9689ba1bf4de6f2"><div class="ttname"><a href="structbodygraph.html#a84e2f8c5fd4e680df9689ba1bf4de6f2">bodygraph::fill_color</a></div><div class="ttdeci">nc_color fill_color</div><div class="ttdef"><b>Definition:</b> <a href="bodygraph_8h_source.html#l00060">bodygraph.h:60</a></div></div>
<div class="ttc" id="astructbook__proficiency__bonus_html"><div class="ttname"><a href="structbook__proficiency__bonus.html">book_proficiency_bonus</a></div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8h_source.html#l00195">proficiency.h:195</a></div></div>
<div class="ttc" id="astructcity__reference_html_ab0c773d91319598da593679bf737f4aa"><div class="ttname"><a href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city_reference::city</a></div><div class="ttdeci">const struct city * city</div><div class="ttdoc">The city itself, points into overmap::cities.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00075">overmapbuffer.h:75</a></div></div>
<div class="ttc" id="astructcity_html"><div class="ttname"><a href="structcity.html">city</a></div><div class="ttdef"><b>Definition:</b> <a href="city_8h_source.html#l00015">city.h:15</a></div></div>
<div class="ttc" id="astructclothing__mod_html"><div class="ttname"><a href="structclothing__mod.html">clothing_mod</a></div><div class="ttdef"><b>Definition:</b> <a href="clothing__mod_8h_source.html#l00044">clothing_mod.h:44</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html"><div class="ttname"><a href="structcommon__ranged__data.html">common_ranged_data</a></div><div class="ttdoc">Common data for ranged things: guns, gunmods and ammo.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00606">itype.h:606</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a497cd4533098e79f14f8a97fcec6ca1a"><div class="ttname"><a href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">common_ranged_data::dispersion</a></div><div class="ttdeci">int dispersion</div><div class="ttdoc">Dispersion &quot;bonus&quot; from gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00624">itype.h:624</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a94254f1acb94261bb47c4b7aaa3b0c89"><div class="ttname"><a href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">common_ranged_data::damage</a></div><div class="ttdeci">damage_instance damage</div><div class="ttdoc">Damage, armor piercing and multipliers for each.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00612">itype.h:612</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_ab1bb4e43a99ecb7ec197e23d00fc9a5a"><div class="ttname"><a href="structcommon__ranged__data.html#ab1bb4e43a99ecb7ec197e23d00fc9a5a">common_ranged_data::range_multiplier</a></div><div class="ttdeci">float range_multiplier</div><div class="ttdoc">Range multiplier from gunmods or ammo.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00620">itype.h:620</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_af73392bcb456d04c3fdf1a413b6b3a9e"><div class="ttname"><a href="structcommon__ranged__data.html#af73392bcb456d04c3fdf1a413b6b3a9e">common_ranged_data::range</a></div><div class="ttdeci">int range</div><div class="ttdoc">Range bonus from gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00616">itype.h:616</a></div></div>
<div class="ttc" id="astructcomp__selection_html"><div class="ttname"><a href="structcomp__selection.html">comp_selection&lt; tool_comp &gt;</a></div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructcomponent_html_a9c114293306257abbc1db25073fc0492"><div class="ttname"><a href="structcomponent.html#a9c114293306257abbc1db25073fc0492">component::type</a></div><div class="ttdeci">itype_id type</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00059">requirements.h:59</a></div></div>
<div class="ttc" id="astructcomponent_html_aa6596b552ee2f19c2440c5a6aed9ecf4"><div class="ttname"><a href="structcomponent.html#aa6596b552ee2f19c2440c5a6aed9ecf4">component::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00060">requirements.h:60</a></div></div>
<div class="ttc" id="astructconditional__name_html"><div class="ttname"><a href="structconditional__name.html">conditional_name</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01144">itype.h:1144</a></div></div>
<div class="ttc" id="astructdamage__info__order_html"><div class="ttname"><a href="structdamage__info__order.html">damage_info_order</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00062">damage.h:62</a></div></div>
<div class="ttc" id="astructdamage__info__order_html_abcd148754833299b0e047090ca6aa171abd990d94a212daf00c8198366850fcbe"><div class="ttname"><a href="structdamage__info__order.html#abcd148754833299b0e047090ca6aa171abd990d94a212daf00c8198366850fcbe">damage_info_order::info_disp::DETAILED</a></div><div class="ttdeci">@ DETAILED</div></div>
<div class="ttc" id="astructdamage__info__order_html_abcd148754833299b0e047090ca6aa171ae4ac03f6c9f00665644e868dd1fb9f1e"><div class="ttname"><a href="structdamage__info__order.html#abcd148754833299b0e047090ca6aa171ae4ac03f6c9f00665644e868dd1fb9f1e">damage_info_order::info_disp::BASIC</a></div><div class="ttdeci">@ BASIC</div></div>
<div class="ttc" id="astructdamage__info__order_html_acc94e12401bfe82d70f643bc637bff7fa6cebea0afe887cb6ef78b738eb7ab8a1"><div class="ttname"><a href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fa6cebea0afe887cb6ef78b738eb7ab8a1">damage_info_order::info_type::BIO</a></div><div class="ttdeci">@ BIO</div></div>
<div class="ttc" id="astructdamage__info__order_html_acc94e12401bfe82d70f643bc637bff7fa987a70821eb884ca13ccdf425fde0b14"><div class="ttname"><a href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fa987a70821eb884ca13ccdf425fde0b14">damage_info_order::info_type::PROT</a></div><div class="ttdeci">@ PROT</div></div>
<div class="ttc" id="astructdamage__info__order_html_acc94e12401bfe82d70f643bc637bff7fac52e47040347f6f55900e8318909b3c5"><div class="ttname"><a href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fac52e47040347f6f55900e8318909b3c5">damage_info_order::info_type::PET</a></div><div class="ttdeci">@ PET</div></div>
<div class="ttc" id="astructdamage__info__order_html_acc94e12401bfe82d70f643bc637bff7fae83355135c37d83b1c8e9dde5b446151"><div class="ttname"><a href="structdamage__info__order.html#acc94e12401bfe82d70f643bc637bff7fae83355135c37d83b1c8e9dde5b446151">damage_info_order::info_type::MELEE</a></div><div class="ttdeci">@ MELEE</div></div>
<div class="ttc" id="astructdamage__info__order_html_af833d28c6a767a77ad046a57366d749f"><div class="ttname"><a href="structdamage__info__order.html#af833d28c6a767a77ad046a57366d749f">damage_info_order::get_all</a></div><div class="ttdeci">static const std::vector&lt; damage_info_order &gt; &amp; get_all()</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00094">damage.cpp:94</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00132">damage.h:132</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a2cc3ee4ff8f77ab6cd74168b1999246a"><div class="ttname"><a href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_instance::damage_units</a></div><div class="ttdeci">std::vector&lt; damage_unit &gt; damage_units</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00133">damage.h:133</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a5b1ceec989d22133cef221930fddecf1"><div class="ttname"><a href="structdamage__instance.html#a5b1ceec989d22133cef221930fddecf1">damage_instance::di_considering_length</a></div><div class="ttdeci">damage_instance di_considering_length(units::length barrel_length) const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00453">damage.cpp:453</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a7894635fbb0cc5902154ff39fdc9ea2b"><div class="ttname"><a href="structdamage__instance.html#a7894635fbb0cc5902154ff39fdc9ea2b">damage_instance::type_damage</a></div><div class="ttdeci">float type_damage(const damage_type_id &amp;dt) const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00349">damage.cpp:349</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a96f6f6d008ed8744ce549cefcfec3951"><div class="ttname"><a href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">damage_instance::total_damage</a></div><div class="ttdeci">float total_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00372">damage.cpp:372</a></div></div>
<div class="ttc" id="astructdamage__instance_html_af81002fc0a5fafe2690d31403941d2d6"><div class="ttname"><a href="structdamage__instance.html#af81002fc0a5fafe2690d31403941d2d6">damage_instance::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00479">damage.cpp:479</a></div></div>
<div class="ttc" id="astructdamage__type_html"><div class="ttname"><a href="structdamage__type.html">damage_type</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00028">damage.h:28</a></div></div>
<div class="ttc" id="astructdamage__type_html_a11443d56f5134114d7ab862fabb9b23f"><div class="ttname"><a href="structdamage__type.html#a11443d56f5134114d7ab862fabb9b23f">damage_type::edged</a></div><div class="ttdeci">bool edged</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00042">damage.h:42</a></div></div>
<div class="ttc" id="astructdamage__type_html_a8057111c96d1ac54f8ed72b6ae911775"><div class="ttname"><a href="structdamage__type.html#a8057111c96d1ac54f8ed72b6ae911775">damage_type::get_all</a></div><div class="ttdeci">static const std::vector&lt; damage_type &gt; &amp; get_all()</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00078">damage.cpp:78</a></div></div>
<div class="ttc" id="astructdamage__type_html_aa196496b625df19dc34a17a674b33d02"><div class="ttname"><a href="structdamage__type.html#aa196496b625df19dc34a17a674b33d02">damage_type::derived_from</a></div><div class="ttdeci">std::pair&lt; damage_type_id, float &gt; derived_from</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00034">damage.h:34</a></div></div>
<div class="ttc" id="astructdamage__type_html_abc55cc8ae4147da338c62941a2646728"><div class="ttname"><a href="structdamage__type.html#abc55cc8ae4147da338c62941a2646728">damage_type::physical</a></div><div class="ttdeci">bool physical</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00039">damage.h:39</a></div></div>
<div class="ttc" id="astructdamage__type_html_abc87b4e9d9653f78c489b284bf647f33"><div class="ttname"><a href="structdamage__type.html#abc87b4e9d9653f78c489b284bf647f33">damage_type::env</a></div><div class="ttdeci">bool env</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00043">damage.h:43</a></div></div>
<div class="ttc" id="astructdamage__unit_html"><div class="ttname"><a href="structdamage__unit.html">damage_unit</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00110">damage.h:110</a></div></div>
<div class="ttc" id="astructdamage__unit_html_a5937d5d78a6db9efaefb0bf9517377d3"><div class="ttname"><a href="structdamage__unit.html#a5937d5d78a6db9efaefb0bf9517377d3">damage_unit::amount</a></div><div class="ttdeci">float amount</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00112">damage.h:112</a></div></div>
<div class="ttc" id="astructdamage__unit_html_a80a647d679545a588270b289a6a13dd3"><div class="ttname"><a href="structdamage__unit.html#a80a647d679545a588270b289a6a13dd3">damage_unit::type</a></div><div class="ttdeci">damage_type_id type</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00111">damage.h:111</a></div></div>
<div class="ttc" id="astructdamage__unit_html_a86471803f7e56a7064bedd8da78672ee"><div class="ttname"><a href="structdamage__unit.html#a86471803f7e56a7064bedd8da78672ee">damage_unit::unconditional_damage_mult</a></div><div class="ttdeci">float unconditional_damage_mult</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00118">damage.h:118</a></div></div>
<div class="ttc" id="astructdamage__unit_html_a8c5cf76dd074bd5dac9b76aaece0ecf4"><div class="ttname"><a href="structdamage__unit.html#a8c5cf76dd074bd5dac9b76aaece0ecf4">damage_unit::damage_multiplier</a></div><div class="ttdeci">float damage_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00115">damage.h:115</a></div></div>
<div class="ttc" id="astructdamage__unit_html_ab4d1b13f7ebe2f16a43038e1441ec2b5"><div class="ttname"><a href="structdamage__unit.html#ab4d1b13f7ebe2f16a43038e1441ec2b5">damage_unit::res_pen</a></div><div class="ttdeci">float res_pen</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00113">damage.h:113</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html"><div class="ttname"><a href="structdealt__damage__instance.html">dealt_damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00193">damage.h:193</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a2e105b0204c9295376296ffb405d5c34"><div class="ttname"><a href="structdealt__damage__instance.html#a2e105b0204c9295376296ffb405d5c34">dealt_damage_instance::dealt_dams</a></div><div class="ttdeci">std::map&lt; damage_type_id, int &gt; dealt_dams</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00194">damage.h:194</a></div></div>
<div class="ttc" id="astructdealt__damage__instance_html_a86b702070a1c313624abc78ff34eff48"><div class="ttname"><a href="structdealt__damage__instance.html#a86b702070a1c313624abc78ff34eff48">dealt_damage_instance::total_damage</a></div><div class="ttdeci">int total_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00586">damage.cpp:586</a></div></div>
<div class="ttc" id="astructdialogue_html"><div class="ttname"><a href="structdialogue.html">dialogue</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00184">dialogue.h:184</a></div></div>
<div class="ttc" id="astructdisp__mod__by__barrel_html_a07d80054aa15021b1945bba6cdcdbabf"><div class="ttname"><a href="structdisp__mod__by__barrel.html#a07d80054aa15021b1945bba6cdcdbabf">disp_mod_by_barrel::deserialize</a></div><div class="ttdeci">void deserialize(const JsonObject &amp;jo)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15197">item.cpp:15197</a></div></div>
<div class="ttc" id="astructdisp__mod__by__barrel_html_a396bb37ae2adaffad810c0ae88813e34"><div class="ttname"><a href="structdisp__mod__by__barrel.html#a396bb37ae2adaffad810c0ae88813e34">disp_mod_by_barrel::dispersion_modifier</a></div><div class="ttdeci">int dispersion_modifier</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03282">item.h:3282</a></div></div>
<div class="ttc" id="astructdisp__mod__by__barrel_html_a3b5cbdbdd8b5d90d2ec71db5d175836a"><div class="ttname"><a href="structdisp__mod__by__barrel.html#a3b5cbdbdd8b5d90d2ec71db5d175836a">disp_mod_by_barrel::barrel_length</a></div><div class="ttdeci">units::length barrel_length</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03281">item.h:3281</a></div></div>
<div class="ttc" id="astructdisp__mod__by__barrel_html_ab741cea90441f9e6fef6894ec9a3438f"><div class="ttname"><a href="structdisp__mod__by__barrel.html#ab741cea90441f9e6fef6894ec9a3438f">disp_mod_by_barrel::disp_mod_by_barrel</a></div><div class="ttdeci">disp_mod_by_barrel()</div></div>
<div class="ttc" id="astructdps__comp__data_html"><div class="ttname"><a href="structdps__comp__data.html">dps_comp_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02344">item.cpp:2344</a></div></div>
<div class="ttc" id="astructdps__comp__data_html_a34a0ab29aae9696788cc629fc1c093ee"><div class="ttname"><a href="structdps__comp__data.html#a34a0ab29aae9696788cc629fc1c093ee">dps_comp_data::mon_id</a></div><div class="ttdeci">mtype_id mon_id</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02345">item.cpp:2345</a></div></div>
<div class="ttc" id="astructdps__comp__data_html_a4c1151181678cb470c879e7f0a740e2e"><div class="ttname"><a href="structdps__comp__data.html#a4c1151181678cb470c879e7f0a740e2e">dps_comp_data::display</a></div><div class="ttdeci">bool display</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02346">item.cpp:2346</a></div></div>
<div class="ttc" id="astructdps__comp__data_html_ac62324c773057b2780903f7a7bae8db5"><div class="ttname"><a href="structdps__comp__data.html#ac62324c773057b2780903f7a7bae8db5">dps_comp_data::evaluate</a></div><div class="ttdeci">bool evaluate</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02347">item.cpp:2347</a></div></div>
<div class="ttc" id="astructencumbrance__data_html_aa481e5ed996635f0f1b746aba81ed90c"><div class="ttname"><a href="structencumbrance__data.html#aa481e5ed996635f0f1b746aba81ed90c">encumbrance_data::encumbrance</a></div><div class="ttdeci">int encumbrance</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00412">bodypart.h:412</a></div></div>
<div class="ttc" id="astructexplosion__data_html_a7611386ec7f61ad71a625f0b6750483c"><div class="ttname"><a href="structexplosion__data.html#a7611386ec7f61ad71a625f0b6750483c">explosion_data::power</a></div><div class="ttdeci">float power</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8h_source.html#l00036">explosion.h:36</a></div></div>
<div class="ttc" id="astructfire__data_html"><div class="ttname"><a href="structfire__data.html">fire_data</a></div><div class="ttdoc">Contains the state of a fire in one tile on one turn.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00018">fire.h:18</a></div></div>
<div class="ttc" id="astructfire__data_html_a534803a1b5139df57bfad4bd186de812"><div class="ttname"><a href="structfire__data.html#a534803a1b5139df57bfad4bd186de812">fire_data::fire_intensity</a></div><div class="ttdeci">int fire_intensity</div><div class="ttdoc">Current intensity of the fire.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00024">fire.h:24</a></div></div>
<div class="ttc" id="astructfire__data_html_a766c1e9448a11a83188b5e97e3276004"><div class="ttname"><a href="structfire__data.html#a766c1e9448a11a83188b5e97e3276004">fire_data::fuel_produced</a></div><div class="ttdeci">float fuel_produced</div><div class="ttdoc">Fuel contributed by each burning item this turn is summed here.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00028">fire.h:28</a></div></div>
<div class="ttc" id="astructfire__data_html_a87eeeef62c5793c2fcdf27de8efd85d8"><div class="ttname"><a href="structfire__data.html#a87eeeef62c5793c2fcdf27de8efd85d8">fire_data::smoke_produced</a></div><div class="ttdeci">float smoke_produced</div><div class="ttdoc">Smoke produced by each burning item this turn is summed here.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00026">fire.h:26</a></div></div>
<div class="ttc" id="astructfire__data_html_a9c5c2a6dc6f4efe05e65885660bb3893"><div class="ttname"><a href="structfire__data.html#a9c5c2a6dc6f4efe05e65885660bb3893">fire_data::contained</a></div><div class="ttdeci">bool contained</div><div class="ttdoc">The fire is contained and burned for fuel intentionally.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00030">fire.h:30</a></div></div>
<div class="ttc" id="astructfuel__data_html_a92de85cdbb52f759f19f99879c4172c9"><div class="ttname"><a href="structfuel__data.html#a92de85cdbb52f759f19f99879c4172c9">fuel_data::energy</a></div><div class="ttdeci">units::energy energy</div><div class="ttdoc">Energy of the fuel per litre.</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00060">material.h:60</a></div></div>
<div class="ttc" id="astructfuel__data_html_ab0a9319845eb7114cc61d0a41875aecc"><div class="ttname"><a href="structfuel__data.html#ab0a9319845eb7114cc61d0a41875aecc">fuel_data::pump_terrain</a></div><div class="ttdeci">std::string pump_terrain</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00062">material.h:62</a></div></div>
<div class="ttc" id="astructfuel__data_html_ad37b7320ad276e5524622d17865977f7"><div class="ttname"><a href="structfuel__data.html#ad37b7320ad276e5524622d17865977f7">fuel_data::explosion_data</a></div><div class="ttdeci">fuel_explosion_data explosion_data</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00061">material.h:61</a></div></div>
<div class="ttc" id="astructfuel__explosion__data_html"><div class="ttname"><a href="structfuel__explosion__data.html">fuel_explosion_data</a></div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00043">material.h:43</a></div></div>
<div class="ttc" id="astructfuel__explosion__data_html_a06fd400d83f640dee58c7bb8f967609a"><div class="ttname"><a href="structfuel__explosion__data.html#a06fd400d83f640dee58c7bb8f967609a">fuel_explosion_data::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="material_8cpp_source.html#l00419">material.cpp:419</a></div></div>
<div class="ttc" id="astructfunc_html"><div class="ttname"><a href="structfunc.html">func</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00067">math_parser_impl.h:67</a></div></div>
<div class="ttc" id="astructislot__ammo_html"><div class="ttname"><a href="structislot__ammo.html">islot_ammo</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00966">itype.h:966</a></div></div>
<div class="ttc" id="astructislot__ammo_html_a51c54ed0921be6f2f8962eab461cdbef"><div class="ttname"><a href="structislot__ammo.html#a51c54ed0921be6f2f8962eab461cdbef">islot_ammo::ammo_effects</a></div><div class="ttdeci">std::set&lt; std::string &gt; ammo_effects</div><div class="ttdoc">TODO: document me.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01011">itype.h:1011</a></div></div>
<div class="ttc" id="astructislot__ammo_html_a8554ea4bc34374622ff0c3c5d0da956d"><div class="ttname"><a href="structislot__ammo.html#a8554ea4bc34374622ff0c3c5d0da956d">islot_ammo::critical_multiplier</a></div><div class="ttdeci">float critical_multiplier</div><div class="ttdoc">The damage multiplier to apply after a critical hit.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01038">itype.h:1038</a></div></div>
<div class="ttc" id="astructislot__ammo_html_a8f5e8f2dc748abe2ce3b079236120e17"><div class="ttname"><a href="structislot__ammo.html#a8f5e8f2dc748abe2ce3b079236120e17">islot_ammo::dispersion_considering_length</a></div><div class="ttdeci">int dispersion_considering_length(units::length barrel_length) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00426">itype.cpp:426</a></div></div>
<div class="ttc" id="astructislot__ammo_html_a9bf197805d7d623f18b832dd3e5dc770"><div class="ttname"><a href="structislot__ammo.html#a9bf197805d7d623f18b832dd3e5dc770">islot_ammo::recoil</a></div><div class="ttdeci">int recoil</div><div class="ttdoc">Recoil (per shot), roughly equivalent to kinetic energy (in Joules)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01019">itype.h:1019</a></div></div>
<div class="ttc" id="astructislot__ammo_html_af589f0ff6323e19b6e010407eb2d7078"><div class="ttname"><a href="structislot__ammo.html#af589f0ff6323e19b6e010407eb2d7078">islot_ammo::force_stat_display</a></div><div class="ttdeci">bool force_stat_display</div><div class="ttdoc">Some combat ammo might not have a damage value Set this to make it show as combat ammo anyway.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01044">itype.h:1044</a></div></div>
<div class="ttc" id="astructislot__armor_html"><div class="ttname"><a href="structislot__armor.html">islot_armor</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00379">itype.h:379</a></div></div>
<div class="ttc" id="astructislot__armor_html_a0c18142004c2a71350e49205a67c7073"><div class="ttname"><a href="structislot__armor.html#a0c18142004c2a71350e49205a67c7073">islot_armor::avg_env_resist</a></div><div class="ttdeci">int avg_env_resist() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00263">itype.cpp:263</a></div></div>
<div class="ttc" id="astructislot__armor_html_a0da3d1bef6cc7dd66499906eadfaf57f"><div class="ttname"><a href="structislot__armor.html#a0da3d1bef6cc7dd66499906eadfaf57f">islot_armor::sided</a></div><div class="ttdeci">bool sided</div><div class="ttdoc">Whether this item can be worn on either side of the body.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00388">itype.h:388</a></div></div>
<div class="ttc" id="astructislot__armor_html_a1ddd5fc43a0d9d352128cd58fb3618eb"><div class="ttname"><a href="structislot__armor.html#a1ddd5fc43a0d9d352128cd58fb3618eb">islot_armor::data</a></div><div class="ttdeci">std::vector&lt; armor_portion_data &gt; data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00446">itype.h:446</a></div></div>
<div class="ttc" id="astructislot__armor_html_a2818da442fdeaf06512874cc9944a89b"><div class="ttname"><a href="structislot__armor.html#a2818da442fdeaf06512874cc9944a89b">islot_armor::warmth</a></div><div class="ttdeci">int warmth</div><div class="ttdoc">How much warmth this item provides.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00400">itype.h:400</a></div></div>
<div class="ttc" id="astructislot__armor_html_a341f7e97f96ee806e781dd9177a4f6da"><div class="ttname"><a href="structislot__armor.html#a341f7e97f96ee806e781dd9177a4f6da">islot_armor::noisy</a></div><div class="ttdeci">bool noisy</div><div class="ttdoc">Whether this item has pockets that are noisy.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00431">itype.h:431</a></div></div>
<div class="ttc" id="astructislot__armor_html_a37e19d473b3b2fdcec3cf2f59b28688e"><div class="ttname"><a href="structislot__armor.html#a37e19d473b3b2fdcec3cf2f59b28688e">islot_armor::additional_pocket_enc</a></div><div class="ttdeci">bool additional_pocket_enc</div><div class="ttdoc">Whether this item has pockets that generate additional encumbrance.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00412">itype.h:412</a></div></div>
<div class="ttc" id="astructislot__armor_html_a48e5b4fa9ba8d2d190f75084d6067223"><div class="ttname"><a href="structislot__armor.html#a48e5b4fa9ba8d2d190f75084d6067223">islot_armor::sub_data</a></div><div class="ttdeci">std::vector&lt; armor_portion_data &gt; sub_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00450">itype.h:450</a></div></div>
<div class="ttc" id="astructislot__armor_html_a65b02b04b0a3b268c012131ba5ba3e40"><div class="ttname"><a href="structislot__armor.html#a65b02b04b0a3b268c012131ba5ba3e40">islot_armor::avg_env_resist_w_filter</a></div><div class="ttdeci">int avg_env_resist_w_filter() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00275">itype.cpp:275</a></div></div>
<div class="ttc" id="astructislot__armor_html_a696a2447e782ced2fa80de2118742a07"><div class="ttname"><a href="structislot__armor.html#a696a2447e782ced2fa80de2118742a07">islot_armor::avg_thickness</a></div><div class="ttdeci">float avg_thickness() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00287">itype.cpp:287</a></div></div>
<div class="ttc" id="astructislot__armor_html_a6a8c453a4a5e6fb69247d9d1f57c5b2a"><div class="ttname"><a href="structislot__armor.html#a6a8c453a4a5e6fb69247d9d1f57c5b2a">islot_armor::has_sub_coverage</a></div><div class="ttdeci">bool has_sub_coverage</div><div class="ttdoc">If the item in question has any sub coverage when testing for encumbrance.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00441">itype.h:441</a></div></div>
<div class="ttc" id="astructislot__armor_html_a7610fea1701c2a18844d1241f743fe21"><div class="ttname"><a href="structislot__armor.html#a7610fea1701c2a18844d1241f743fe21">islot_armor::power_armor</a></div><div class="ttdeci">bool power_armor</div><div class="ttdoc">Whether this is a power armor item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00404">itype.h:404</a></div></div>
<div class="ttc" id="astructislot__armor_html_a831be734e376a8631d48eb028d116c76"><div class="ttname"><a href="structislot__armor.html#a831be734e376a8631d48eb028d116c76">islot_armor::rigid</a></div><div class="ttdeci">bool rigid</div><div class="ttdoc">If the entire item is rigid.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00421">itype.h:421</a></div></div>
<div class="ttc" id="astructislot__armor_html_aa80ca308d08bf529c3a2c602819fc431"><div class="ttname"><a href="structislot__armor.html#aa80ca308d08bf529c3a2c602819fc431">islot_armor::comfortable</a></div><div class="ttdeci">bool comfortable</div><div class="ttdoc">If the entire item is comfortable.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00426">itype.h:426</a></div></div>
<div class="ttc" id="astructislot__armor_html_aab35b43e855613f4b94d4e86f01d145c"><div class="ttname"><a href="structislot__armor.html#aab35b43e855613f4b94d4e86f01d145c">islot_armor::ablative</a></div><div class="ttdeci">bool ablative</div><div class="ttdoc">Whether this item has ablative pockets.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00408">itype.h:408</a></div></div>
<div class="ttc" id="astructislot__armor_html_acb2526811c5599ca3ba595cff89c9015"><div class="ttname"><a href="structislot__armor.html#acb2526811c5599ca3ba595cff89c9015">islot_armor::ripoff_chance</a></div><div class="ttdeci">bool ripoff_chance</div><div class="ttdoc">Whether this item has pockets that can be ripped off.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00416">itype.h:416</a></div></div>
<div class="ttc" id="astructislot__armor_html_ad56f6e5ee6ba203edbce4ea55d11fe2b"><div class="ttname"><a href="structislot__armor.html#ad56f6e5ee6ba203edbce4ea55d11fe2b">islot_armor::all_layers</a></div><div class="ttdeci">std::vector&lt; layer_level &gt; all_layers</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00453">itype.h:453</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html">islot_book::recipe_with_description_t</a></div><div class="ttdoc">What recipes can be learned from this book.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00544">itype.h:544</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_a281ac0918950f3547a56cb9e218ffe9e"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#a281ac0918950f3547a56cb9e218ffe9e">islot_book::recipe_with_description_t::skill_level</a></div><div class="ttdeci">int skill_level</div><div class="ttdoc">The skill level required to learn the recipe.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00552">itype.h:552</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_a37c2b2d291c1507dce0dcfa736dcc39e"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#a37c2b2d291c1507dce0dcfa736dcc39e">islot_book::recipe_with_description_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00024">itype.cpp:24</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_a81128db90cd0174d3500d4cb1bbf002e"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#a81128db90cd0174d3500d4cb1bbf002e">islot_book::recipe_with_description_t::recipe</a></div><div class="ttdeci">const class recipe * recipe</div><div class="ttdoc">The recipe that can be learned (never null).</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00548">itype.h:548</a></div></div>
<div class="ttc" id="astructislot__book_1_1recipe__with__description__t_html_ab1754e8717fef2508852ad9cf8576bff"><div class="ttname"><a href="structislot__book_1_1recipe__with__description__t.html#ab1754e8717fef2508852ad9cf8576bff">islot_book::recipe_with_description_t::is_hidden</a></div><div class="ttdeci">bool is_hidden() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00564">itype.h:564</a></div></div>
<div class="ttc" id="astructislot__book_html"><div class="ttname"><a href="structislot__book.html">islot_book</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00507">itype.h:507</a></div></div>
<div class="ttc" id="astructislot__book_html_a204a24c6591310275db5b98d764e10dd"><div class="ttname"><a href="structislot__book.html#a204a24c6591310275db5b98d764e10dd">islot_book::proficiencies</a></div><div class="ttdeci">std::vector&lt; book_proficiency_bonus &gt; proficiencies</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00571">itype.h:571</a></div></div>
<div class="ttc" id="astructislot__book_html_a399b81c9f3da52b81d3164ae88e2b87a"><div class="ttname"><a href="structislot__book.html#a399b81c9f3da52b81d3164ae88e2b87a">islot_book::time</a></div><div class="ttdeci">time_duration time</div><div class="ttdoc">How long it takes to read.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00536">itype.h:536</a></div></div>
<div class="ttc" id="astructislot__book_html_a6eca476a412d945669fcb56e20d8ef97"><div class="ttname"><a href="structislot__book.html#a6eca476a412d945669fcb56e20d8ef97">islot_book::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">The skill level the book provides.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00519">itype.h:519</a></div></div>
<div class="ttc" id="astructislot__book_html_a817f742eeee09070453b5f2d78d803be"><div class="ttname"><a href="structislot__book.html#a817f742eeee09070453b5f2d78d803be">islot_book::intel</a></div><div class="ttdeci">int intel</div><div class="ttdoc">Intelligence required to read it.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00531">itype.h:531</a></div></div>
<div class="ttc" id="astructislot__book_html_a86a3ae176a78c1eae14e7bebc74c2457"><div class="ttname"><a href="structislot__book.html#a86a3ae176a78c1eae14e7bebc74c2457">islot_book::skill</a></div><div class="ttdeci">skill_id skill</div><div class="ttdoc">Which skill it upgrades, if any.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00511">itype.h:511</a></div></div>
<div class="ttc" id="astructislot__book_html_a899cf37dd220cfce62e17e9f072ca9c5"><div class="ttname"><a href="structislot__book.html#a899cf37dd220cfce62e17e9f072ca9c5">islot_book::req</a></div><div class="ttdeci">int req</div><div class="ttdoc">The skill level required to understand it.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00523">itype.h:523</a></div></div>
<div class="ttc" id="astructislot__book_html_ae240630817ce9b3cee66b3e0d8d40e97"><div class="ttname"><a href="structislot__book.html#ae240630817ce9b3cee66b3e0d8d40e97">islot_book::recipes</a></div><div class="ttdeci">recipe_list_t recipes</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00570">itype.h:570</a></div></div>
<div class="ttc" id="astructislot__book_html_aff68466212e42b423a136b0da1a59b38"><div class="ttname"><a href="structislot__book.html#aff68466212e42b423a136b0da1a59b38">islot_book::chapters</a></div><div class="ttdeci">int chapters</div><div class="ttdoc">Fun books have chapters; after all are read, the book is less fun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00540">itype.h:540</a></div></div>
<div class="ttc" id="astructislot__gun_html"><div class="ttname"><a href="structislot__gun.html">islot_gun</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00686">itype.h:686</a></div></div>
<div class="ttc" id="astructislot__gunmod_html"><div class="ttname"><a href="structislot__gunmod.html">islot_gunmod</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00830">itype.h:830</a></div></div>
<div class="ttc" id="astructislot__magazine_html_a38072991107b79ba18c6f1741871b2cb"><div class="ttname"><a href="structislot__magazine.html#a38072991107b79ba18c6f1741871b2cb">islot_magazine::compatible_guns</a></div><div class="ttdeci">static std::map&lt; itype_id, std::set&lt; itype_id &gt; &gt; compatible_guns</div><div class="ttdoc">Map of [magazine type id] -&gt; [set of gun itype_ids that accept the mag type ].</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00953">itype.h:953</a></div></div>
<div class="ttc" id="astructitem_1_1aggregate__t_html"><div class="ttname"><a href="structitem_1_1aggregate__t.html">item::aggregate_t</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02926">item.h:2926</a></div></div>
<div class="ttc" id="astructitem_1_1aggregate__t_html_a08c10d241688b82489eb63922b6710cd"><div class="ttname"><a href="structitem_1_1aggregate__t.html#a08c10d241688b82489eb63922b6710cd">item::aggregate_t::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02929">item.h:2929</a></div></div>
<div class="ttc" id="astructitem_1_1aggregate__t_html_a8db1d54c2dab4f669c95edac6cf41984"><div class="ttname"><a href="structitem_1_1aggregate__t.html#a8db1d54c2dab4f669c95edac6cf41984">item::aggregate_t::info</a></div><div class="ttdeci">stacking_info info</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02927">item.h:2927</a></div></div>
<div class="ttc" id="astructitem_1_1cat__cache_html_a189c7664f1ed87715864524e12847aaa"><div class="ttname"><a href="structitem_1_1cat__cache.html#a189c7664f1ed87715864524e12847aaa">item::cat_cache::timestamp</a></div><div class="ttdeci">time_point timestamp</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03203">item.h:3203</a></div></div>
<div class="ttc" id="astructitem_1_1cat__cache_html_a3fcf96ebc53614d9521a1f78c2536196"><div class="ttname"><a href="structitem_1_1cat__cache.html#a3fcf96ebc53614d9521a1f78c2536196">item::cat_cache::id</a></div><div class="ttdeci">item_category_id id</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03202">item.h:3202</a></div></div>
<div class="ttc" id="astructitem_1_1default__charges__tag_html"><div class="ttname"><a href="structitem_1_1default__charges__tag.html">item::default_charges_tag</a></div><div class="ttdoc">Suppress randomization and always start with default quantity of charges.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00211">item.h:211</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html"><div class="ttname"><a href="structitem_1_1link__data.html">item::link_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01452">item.h:1452</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a208a39ac375933fd4b33168ce26196c7"><div class="ttname"><a href="structitem_1_1link__data.html#a208a39ac375933fd4b33168ce26196c7">item::link_data::charge_rate</a></div><div class="ttdeci">int charge_rate</div><div class="ttdoc">The cable's power capacity in watts, affects battery charge rate.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01472">item.h:1472</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a3bad2f65381eed201fc526a0514a3ab7"><div class="ttname"><a href="structitem_1_1link__data.html#a3bad2f65381eed201fc526a0514a3ab7">item::link_data::charge_interval</a></div><div class="ttdeci">int charge_interval</div><div class="ttdoc">How long it takes to charge 1 kW, the unit batteries use.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01476">item.h:1476</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a3daea00ece982171518df83a68cf3728"><div class="ttname"><a href="structitem_1_1link__data.html#a3daea00ece982171518df83a68cf3728">item::link_data::last_processed</a></div><div class="ttdeci">time_point last_processed</div><div class="ttdoc">The last turn process_link was called on this cable. Used to find how much time the cable spends outs...</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01466">item.h:1466</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a4aaec2ceb22823e8734f3e57ca8019bb"><div class="ttname"><a href="structitem_1_1link__data.html#a4aaec2ceb22823e8734f3e57ca8019bb">item::link_data::efficiency</a></div><div class="ttdeci">float efficiency</div><div class="ttdoc">(this) out of 1.0 chance to successfully add 1 charge every charge interval.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01474">item.h:1474</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a4b52a313745c43b1a4dc798a997879c1"><div class="ttname"><a href="structitem_1_1link__data.html#a4b52a313745c43b1a4dc798a997879c1">item::link_data::t_abs_pos</a></div><div class="ttdeci">tripoint_abs_ms t_abs_pos</div><div class="ttdoc">Absolute position of the linked target vehicle/appliance.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01460">item.h:1460</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a6440a003fe95092a55b12c0cdb3abf4f"><div class="ttname"><a href="structitem_1_1link__data.html#a6440a003fe95092a55b12c0cdb3abf4f">item::link_data::max_length</a></div><div class="ttdeci">int max_length</div><div class="ttdoc">The maximum length of the cable.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01470">item.h:1470</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a64ca11e0b5756edb11e6be50431b8f92"><div class="ttname"><a href="structitem_1_1link__data.html#a64ca11e0b5756edb11e6be50431b8f92">item::link_data::source</a></div><div class="ttdeci">link_state source</div><div class="ttdoc">State of the link's source connection, the end usually represented by the device/cable item itself....</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01454">item.h:1454</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a7b65c56e3c39b6e6964f1083514da84c"><div class="ttname"><a href="structitem_1_1link__data.html#a7b65c56e3c39b6e6964f1083514da84c">item::link_data::s_bub_pos</a></div><div class="ttdeci">tripoint s_bub_pos</div><div class="ttdoc">Reality bubble position of the link's source cable item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01464">item.h:1464</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_a8e4b77ebd9f4a6e987f4e360bda43786"><div class="ttname"><a href="structitem_1_1link__data.html#a8e4b77ebd9f4a6e987f4e360bda43786">item::link_data::t_veh</a></div><div class="ttdeci">safe_reference&lt; vehicle &gt; t_veh</div><div class="ttdoc">A safe reference to the link's target vehicle. Will recreate itself whenever possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01458">item.h:1458</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_ab89087b34dcc4fe0bca8d02217ab153a"><div class="ttname"><a href="structitem_1_1link__data.html#ab89087b34dcc4fe0bca8d02217ab153a">item::link_data::length</a></div><div class="ttdeci">int length</div><div class="ttdoc">The current slack of the cable.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01468">item.h:1468</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_abe0aec759190715da01469d9f7a9e061"><div class="ttname"><a href="structitem_1_1link__data.html#abe0aec759190715da01469d9f7a9e061">item::link_data::t_mount</a></div><div class="ttdeci">point t_mount</div><div class="ttdoc">The linked part's mount offset on the target vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01462">item.h:1462</a></div></div>
<div class="ttc" id="astructitem_1_1link__data_html_ae92040eb11b46bfdd1d15ada243ef941"><div class="ttname"><a href="structitem_1_1link__data.html#ae92040eb11b46bfdd1d15ada243ef941">item::link_data::target</a></div><div class="ttdeci">link_state target</div><div class="ttdoc">State of the link's target connection, the end represented by t_abs_pos. link_state.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01456">item.h:1456</a></div></div>
<div class="ttc" id="astructitem_1_1solitary__tag_html"><div class="ttname"><a href="structitem_1_1solitary__tag.html">item::solitary_tag</a></div><div class="ttdoc">Default (or randomized) charges except if counted by charges then only one charge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00216">item.h:216</a></div></div>
<div class="ttc" id="astructitem_1_1sound__data_html"><div class="ttname"><a href="structitem_1_1sound__data.html">item::sound_data</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02620">item.h:2620</a></div></div>
<div class="ttc" id="astructitem_1_1sound__data_html_aa2fb844ce506ca62f0c5d1d549f54826"><div class="ttname"><a href="structitem_1_1sound__data.html#aa2fb844ce506ca62f0c5d1d549f54826">item::sound_data::volume</a></div><div class="ttdeci">int volume</div><div class="ttdoc">Volume of the sound.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02622">item.h:2622</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00110">requirements.h:110</a></div></div>
<div class="ttc" id="astructitem__internal_1_1scoped__goes__bad__cache_html"><div class="ttname"><a href="structitem__internal_1_1scoped__goes__bad__cache.html">item_internal::scoped_goes_bad_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00279">item.cpp:279</a></div></div>
<div class="ttc" id="astructitem__internal_1_1scoped__goes__bad__cache_html_a9c04c10d3077efbb0ad9f9cf3240fc26"><div class="ttname"><a href="structitem__internal_1_1scoped__goes__bad__cache.html#a9c04c10d3077efbb0ad9f9cf3240fc26">item_internal::scoped_goes_bad_cache::~scoped_goes_bad_cache</a></div><div class="ttdeci">~scoped_goes_bad_cache()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00283">item.cpp:283</a></div></div>
<div class="ttc" id="astructitem__internal_1_1scoped__goes__bad__cache_html_aa1469bdfabcf1a484d40c1a7c96fcd98"><div class="ttname"><a href="structitem__internal_1_1scoped__goes__bad__cache.html#aa1469bdfabcf1a484d40c1a7c96fcd98">item_internal::scoped_goes_bad_cache::scoped_goes_bad_cache</a></div><div class="ttdeci">scoped_goes_bad_cache(item *i)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00280">item.cpp:280</a></div></div>
<div class="ttc" id="astructiteminfo_html"><div class="ttname"><a href="structiteminfo.html">iteminfo</a></div><div class="ttdoc">Value and metadata for one property of an item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00114">item.h:114</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16">iteminfo::flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00152">item.h:152</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a17168a987307538a1f25fa97640471f3">iteminfo::no_flags</a></div><div class="ttdeci">@ no_flags</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00153">item.h:153</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a340086fad9f573d5b79675a99335e890">iteminfo::no_newline</a></div><div class="ttdeci">@ no_newline</div><div class="ttdoc">Do not follow with a newline.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00156">item.h:156</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a3d47ad00c6b1394cba5781ae07ae6698">iteminfo::is_decimal</a></div><div class="ttdeci">@ is_decimal</div><div class="ttdoc">Print as decimal rather than integer.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00154">item.h:154</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16a711e564f20b0271cab7a85e1ab115cf5">iteminfo::show_plus</a></div><div class="ttdeci">@ show_plus</div><div class="ttdoc">Use a + sign for positive values.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00159">item.h:159</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16aba076bfbbc0221d2216b5f699d66b801">iteminfo::lower_is_better</a></div><div class="ttdeci">@ lower_is_better</div><div class="ttdoc">Lower values are better for this stat.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00157">item.h:157</a></div></div>
<div class="ttc" id="astructiteminfo_html_a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa"><div class="ttname"><a href="structiteminfo.html#a52b3543e16cce6f69f2e5cdb021c1e16acd4efabc933c1eb5ed469082a5eacaaa">iteminfo::no_name</a></div><div class="ttdeci">@ no_name</div><div class="ttdoc">Do not print the name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00158">item.h:158</a></div></div>
<div class="ttc" id="astructiteminfo_html_a80cae00f37b9dff657c8d7280aeac4e9"><div class="ttname"><a href="structiteminfo.html#a80cae00f37b9dff657c8d7280aeac4e9">iteminfo::iteminfo</a></div><div class="ttdeci">iteminfo(const std::string &amp;Type, const std::string &amp;Name, const std::string &amp;Fmt=&quot;&quot;, flags Flags=no_flags, double Value=-999, double UnitVal=0)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12376">item.cpp:12376</a></div></div>
<div class="ttc" id="astructitype__variant__data_html"><div class="ttname"><a href="structitype__variant__data.html">itype_variant_data</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00667">itype.h:667</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_a0adec56c131c1703dd92c99b2160e937"><div class="ttname"><a href="structitype__variant__data.html#a0adec56c131c1703dd92c99b2160e937">itype_variant_data::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00679">itype.h:679</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_a14ff35ef22c3665018aaaeef145c81fc"><div class="ttname"><a href="structitype__variant__data.html#a14ff35ef22c3665018aaaeef145c81fc">itype_variant_data::id</a></div><div class="ttdeci">std::string id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00668">itype.h:668</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_a39162967165d0c5b34215f5db409abf9"><div class="ttname"><a href="structitype__variant__data.html#a39162967165d0c5b34215f5db409abf9">itype_variant_data::art</a></div><div class="ttdeci">ascii_art_id art</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00671">itype.h:671</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_a9e47680d674b4163416bb4770b4a232b"><div class="ttname"><a href="structitype__variant__data.html#a9e47680d674b4163416bb4770b4a232b">itype_variant_data::expand_snippets</a></div><div class="ttdeci">bool expand_snippets</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00677">itype.h:677</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_ab37f68892137426385154d939d3a21de"><div class="ttname"><a href="structitype__variant__data.html#ab37f68892137426385154d939d3a21de">itype_variant_data::alt_color</a></div><div class="ttdeci">std::optional&lt; nc_color &gt; alt_color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00673">itype.h:673</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_ab6067bec7dc69b9f38259634008bfcb2"><div class="ttname"><a href="structitype__variant__data.html#ab6067bec7dc69b9f38259634008bfcb2">itype_variant_data::alt_description</a></div><div class="ttdeci">translation alt_description</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00670">itype.h:670</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_af3729c5714d51d418ce498aee324a6b0"><div class="ttname"><a href="structitype__variant__data.html#af3729c5714d51d418ce498aee324a6b0">itype_variant_data::alt_name</a></div><div class="ttdeci">translation alt_name</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00669">itype.h:669</a></div></div>
<div class="ttc" id="astructitype__variant__data_html_af96c10940879ded444d0c77a8a7569b1"><div class="ttname"><a href="structitype__variant__data.html#af96c10940879ded444d0c77a8a7569b1">itype_variant_data::alt_sym</a></div><div class="ttdeci">std::optional&lt; std::string &gt; alt_sym</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00672">itype.h:672</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01186">itype.h:1186</a></div></div>
<div class="ttc" id="astructitype_html_a025457dc0d2c2545e84cbb01533ed535"><div class="ttname"><a href="structitype.html#a025457dc0d2c2545e84cbb01533ed535">itype::min_dex</a></div><div class="ttdeci">int min_dex</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01366">itype.h:1366</a></div></div>
<div class="ttc" id="astructitype_html_a0a5d70cf8c883cd69f606eead503f322"><div class="ttname"><a href="structitype.html#a0a5d70cf8c883cd69f606eead503f322">itype::snippet_category</a></div><div class="ttdeci">std::string snippet_category</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01264">itype.h:1264</a></div></div>
<div class="ttc" id="astructitype_html_a134ff2407b627a2281b5393bd69cd78b"><div class="ttname"><a href="structitype.html#a134ff2407b627a2281b5393bd69cd78b">itype::variants</a></div><div class="ttdeci">std::vector&lt; itype_variant_data &gt; variants</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01241">itype.h:1241</a></div></div>
<div class="ttc" id="astructitype_html_a15ce9f3914d2afb7992e4683a0996791"><div class="ttname"><a href="structitype.html#a15ce9f3914d2afb7992e4683a0996791">itype::explosion</a></div><div class="ttdeci">explosion_data explosion</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01352">itype.h:1352</a></div></div>
<div class="ttc" id="astructitype_html_a18f4ca3e43dc84bc3ae9ef11127e28a3"><div class="ttname"><a href="structitype.html#a18f4ca3e43dc84bc3ae9ef11127e28a3">itype::variant_kind</a></div><div class="ttdeci">itype_variant_kind variant_kind</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01371">itype.h:1371</a></div></div>
<div class="ttc" id="astructitype_html_a1f98e4086129c4db4a4903e7a6bdac72"><div class="ttname"><a href="structitype.html#a1f98e4086129c4db4a4903e7a6bdac72">itype::insulation_factor</a></div><div class="ttdeci">float insulation_factor</div><div class="ttdoc">How much insulation this item provides, either as a container, or as a vehicle base part.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01427">itype.h:1427</a></div></div>
<div class="ttc" id="astructitype_html_a203a347d8d0a2784baa916490e2f377a"><div class="ttname"><a href="structitype.html#a203a347d8d0a2784baa916490e2f377a">itype::min_int</a></div><div class="ttdeci">int min_int</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01367">itype.h:1367</a></div></div>
<div class="ttc" id="astructitype_html_a22bc17798578e23432abf6e9194521f7"><div class="ttname"><a href="structitype.html#a22bc17798578e23432abf6e9194521f7">itype::charged_qualities</a></div><div class="ttdeci">std::map&lt; quality_id, int &gt; charged_qualities</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01288">itype.h:1288</a></div></div>
<div class="ttc" id="astructitype_html_a22e5b87c820d8b3323ffb43788bfe17c"><div class="ttname"><a href="structitype.html#a22e5b87c820d8b3323ffb43788bfe17c">itype::m_to_hit</a></div><div class="ttdeci">int m_to_hit</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01416">itype.h:1416</a></div></div>
<div class="ttc" id="astructitype_html_a26a1d2bbc02a4763711cdd9f817f68b6"><div class="ttname"><a href="structitype.html#a26a1d2bbc02a4763711cdd9f817f68b6">itype::countdown_interval</a></div><div class="ttdeci">time_duration countdown_interval</div><div class="ttdoc">If positive starts countdown to countdown_action at item creation.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01376">itype.h:1376</a></div></div>
<div class="ttc" id="astructitype_html_a291870408701f0174d8c46b7f770fbaf"><div class="ttname"><a href="structitype.html#a291870408701f0174d8c46b7f770fbaf">itype::get_id</a></div><div class="ttdeci">itype_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01497">itype.h:1497</a></div></div>
<div class="ttc" id="astructitype_html_a2e3c835eaac65d9922f07f99f2f3cf5d"><div class="ttname"><a href="structitype.html#a2e3c835eaac65d9922f07f99f2f3cf5d">itype::countdown_action</a></div><div class="ttdeci">use_function countdown_action</div><div class="ttdoc">Action to take when countdown expires.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01222">itype.h:1222</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00179">itype.cpp:179</a></div></div>
<div class="ttc" id="astructitype_html_a33aeb53774679283298d0202ae3e78ce"><div class="ttname"><a href="structitype.html#a33aeb53774679283298d0202ae3e78ce">itype::bionic</a></div><div class="ttdeci">cata::value_ptr&lt; islot_bionic &gt; bionic</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01211">itype.h:1211</a></div></div>
<div class="ttc" id="astructitype_html_a3425c169f961247fd33daa19b98934ce"><div class="ttname"><a href="structitype.html#a3425c169f961247fd33daa19b98934ce">itype::min_per</a></div><div class="ttdeci">int min_per</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01368">itype.h:1368</a></div></div>
<div class="ttc" id="astructitype_html_a37254c7bdbbddd208cc69e2338ab833b"><div class="ttname"><a href="structitype.html#a37254c7bdbbddd208cc69e2338ab833b">itype::pet_armor</a></div><div class="ttdeci">cata::value_ptr&lt; islot_pet_armor &gt; pet_armor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01202">itype.h:1202</a></div></div>
<div class="ttc" id="astructitype_html_a37edee7dafc5711621f26844cab78cf6"><div class="ttname"><a href="structitype.html#a37edee7dafc5711621f26844cab78cf6">itype::gunmod</a></div><div class="ttdeci">cata::value_ptr&lt; islot_gunmod &gt; gunmod</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01208">itype.h:1208</a></div></div>
<div class="ttc" id="astructitype_html_a3bb287064006eccf3ef665895976bc7c"><div class="ttname"><a href="structitype.html#a3bb287064006eccf3ef665895976bc7c">itype::expand_snippets</a></div><div class="ttdeci">bool expand_snippets</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01452">itype.h:1452</a></div></div>
<div class="ttc" id="astructitype_html_a3d7692cff108d3b8c59ca0847d25a45c"><div class="ttname"><a href="structitype.html#a3d7692cff108d3b8c59ca0847d25a45c">itype::phase</a></div><div class="ttdeci">phase_id phase</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01373">itype.h:1373</a></div></div>
<div class="ttc" id="astructitype_html_a4025c470ee962b556a984ad5acbf9e63"><div class="ttname"><a href="structitype.html#a4025c470ee962b556a984ad5acbf9e63">itype::picture_id</a></div><div class="ttdeci">ascii_art_id picture_id</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01266">itype.h:1266</a></div></div>
<div class="ttc" id="astructitype_html_a402963af27c727a87b20bddb4362754e"><div class="ttname"><a href="structitype.html#a402963af27c727a87b20bddb4362754e">itype::default_container_sealed</a></div><div class="ttdeci">bool default_container_sealed</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01443">itype.h:1443</a></div></div>
<div class="ttc" id="astructitype_html_a41038ca826de1713661d7edd6c1705d0"><div class="ttname"><a href="structitype.html#a41038ca826de1713661d7edd6c1705d0">itype::price</a></div><div class="ttdeci">units::money price</div><div class="ttdoc">Value before the Cataclysm.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01411">itype.h:1411</a></div></div>
<div class="ttc" id="astructitype_html_a435567e9d513701c13586b96e289e33a"><div class="ttname"><a href="structitype.html#a435567e9d513701c13586b96e289e33a">itype::price_post</a></div><div class="ttdeci">units::money price_post</div><div class="ttdoc">Value after the Cataclysm, dependent upon practical usages.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01414">itype.h:1414</a></div></div>
<div class="ttc" id="astructitype_html_a47b4618adf9e32c2e8e1a15f82588ac9"><div class="ttname"><a href="structitype.html#a47b4618adf9e32c2e8e1a15f82588ac9">itype::compostable</a></div><div class="ttdeci">cata::value_ptr&lt; islot_compostable &gt; compostable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01200">itype.h:1200</a></div></div>
<div class="ttc" id="astructitype_html_a4ecb806dae208ff275b4aa50ffcd3902"><div class="ttname"><a href="structitype.html#a4ecb806dae208ff275b4aa50ffcd3902">itype::weight</a></div><div class="ttdeci">units::mass weight</div><div class="ttdoc">Weight of item ( or each stack member )</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01234">itype.h:1234</a></div></div>
<div class="ttc" id="astructitype_html_a5122ad2da0463bc322c472df1dc9ce43"><div class="ttname"><a href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">itype::revert_to</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; revert_to</div><div class="ttdoc">If set the item will revert to this after countdown.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01382">itype.h:1382</a></div></div>
<div class="ttc" id="astructitype_html_a531f460f3ba31cb3e433f7e585e1d4e5"><div class="ttname"><a href="structitype.html#a531f460f3ba31cb3e433f7e585e1d4e5">itype::stack_size</a></div><div class="ttdeci">int stack_size</div><div class="ttdoc">Number of items per above volume for count_by_charges items.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01408">itype.h:1408</a></div></div>
<div class="ttc" id="astructitype_html_a5699c972f1a284761d3b0e1501fe8185"><div class="ttname"><a href="structitype.html#a5699c972f1a284761d3b0e1501fe8185">itype::integral_weight</a></div><div class="ttdeci">units::mass integral_weight</div><div class="ttdoc">Weight difference with the part it replaces for mods (defaults to weight)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01236">itype.h:1236</a></div></div>
<div class="ttc" id="astructitype_html_a5b7d715170e5bd7304bde8831dbe39bb"><div class="ttname"><a href="structitype.html#a5b7d715170e5bd7304bde8831dbe39bb">itype::damage_level</a></div><div class="ttdeci">int damage_level(int damage) const</div><div class="ttdoc">Quantizes item damage numbers into levels (for example for display).</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00105">itype.cpp:105</a></div></div>
<div class="ttc" id="astructitype_html_a5c0ae437ad7d19dc575e790a45667a1a"><div class="ttname"><a href="structitype.html#a5c0ae437ad7d19dc575e790a45667a1a">itype::degrade_increments</a></div><div class="ttdeci">int degrade_increments() const</div><div class="ttdoc">Number of degradation increments before the item is destroyed.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01475">itype.h:1475</a></div></div>
<div class="ttc" id="astructitype_html_a5c286a821362f883c93b7d984ecae163"><div class="ttname"><a href="structitype.html#a5c286a821362f883c93b7d984ecae163">itype::wheel</a></div><div class="ttdeci">cata::value_ptr&lt; islot_wheel &gt; wheel</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01206">itype.h:1206</a></div></div>
<div class="ttc" id="astructitype_html_a5eab25fa5a86843ce933e83f24b71087"><div class="ttname"><a href="structitype.html#a5eab25fa5a86843ce933e83f24b71087">itype::melee</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; melee</div><div class="ttdoc">Damage output in melee for zero or more damage types.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01441">itype.h:1441</a></div></div>
<div class="ttc" id="astructitype_html_a623ec8243b1e599086fa3a23c3179370"><div class="ttname"><a href="structitype.html#a623ec8243b1e599086fa3a23c3179370">itype::gun</a></div><div class="ttdeci">cata::value_ptr&lt; islot_gun &gt; gun</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01207">itype.h:1207</a></div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
<div class="ttc" id="astructitype_html_a64d8b1399996d38b2ed54e1543dcef50"><div class="ttname"><a href="structitype.html#a64d8b1399996d38b2ed54e1543dcef50">itype::light_emission</a></div><div class="ttdeci">unsigned light_emission</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01418">itype.h:1418</a></div></div>
<div class="ttc" id="astructitype_html_a6e22c966e0816d5b8ad665f74fc6aeaa"><div class="ttname"><a href="structitype.html#a6e22c966e0816d5b8ad665f74fc6aeaa">itype::engine</a></div><div class="ttdeci">cata::value_ptr&lt; islot_engine &gt; engine</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01205">itype.h:1205</a></div></div>
<div class="ttc" id="astructitype_html_a6f46e6ed5941eccded3fe37eba0491e7"><div class="ttname"><a href="structitype.html#a6f46e6ed5941eccded3fe37eba0491e7">itype::item_variables</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; item_variables</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01297">itype.h:1297</a></div></div>
<div class="ttc" id="astructitype_html_a7099f3ad89573870d81ce764d6cccb04"><div class="ttname"><a href="structitype.html#a7099f3ad89573870d81ce764d6cccb04">itype::armor</a></div><div class="ttdeci">cata::value_ptr&lt; islot_armor &gt; armor</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01201">itype.h:1201</a></div></div>
<div class="ttc" id="astructitype_html_a713cf194c7af78a6a101a6bfb26bc3a9"><div class="ttname"><a href="structitype.html#a713cf194c7af78a6a101a6bfb26bc3a9">itype::category_force</a></div><div class="ttdeci">item_category_id category_force</div><div class="ttdoc">If set via JSON forces item category to this (preventing automatic assignment)</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01269">itype.h:1269</a></div></div>
<div class="ttc" id="astructitype_html_a71434072aef9916ba0a62b7baa59a2b5"><div class="ttname"><a href="structitype.html#a71434072aef9916ba0a62b7baa59a2b5">itype::description</a></div><div class="ttdeci">translation description</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01354">itype.h:1354</a></div></div>
<div class="ttc" id="astructitype_html_a71835820e6594955948ef1e8bc7bed68"><div class="ttname"><a href="structitype.html#a71835820e6594955948ef1e8bc7bed68">itype::faults</a></div><div class="ttdeci">std::set&lt; fault_id &gt; faults</div><div class="ttdoc">What faults (if any) can occur.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01332">itype.h:1332</a></div></div>
<div class="ttc" id="astructitype_html_a72121b6b478fae1969a4b559f3ded22f"><div class="ttname"><a href="structitype.html#a72121b6b478fae1969a4b559f3ded22f">itype::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00164">itype.cpp:164</a></div></div>
<div class="ttc" id="astructitype_html_a76600c0d6a88c8d983838f0df2276212"><div class="ttname"><a href="structitype.html#a76600c0d6a88c8d983838f0df2276212">itype::invoke</a></div><div class="ttdeci">std::optional&lt; int &gt; invoke(Character *p, item &amp;it, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00195">itype.cpp:195</a></div></div>
<div class="ttc" id="astructitype_html_a78dfdecbef70d937bd669c233af65693"><div class="ttname"><a href="structitype.html#a78dfdecbef70d937bd669c233af65693">itype::nanofab_template_group</a></div><div class="ttdeci">item_group_id nanofab_template_group</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01341">itype.h:1341</a></div></div>
<div class="ttc" id="astructitype_html_a7a44fbc429e7e78283c414cb0edcc97c"><div class="ttname"><a href="structitype.html#a7a44fbc429e7e78283c414cb0edcc97c">itype::charges_default</a></div><div class="ttdeci">int charges_default() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00127">itype.cpp:127</a></div></div>
<div class="ttc" id="astructitype_html_a7cb80d77696cefb42ac6e75756b47e60"><div class="ttname"><a href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">itype::ammo</a></div><div class="ttdeci">cata::value_ptr&lt; islot_ammo &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01212">itype.h:1212</a></div></div>
<div class="ttc" id="astructitype_html_a7f957db922884120f5a9ce0d8789fdc4"><div class="ttname"><a href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">itype::mod</a></div><div class="ttdeci">cata::value_ptr&lt; islot_mod &gt; mod</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01204">itype.h:1204</a></div></div>
<div class="ttc" id="astructitype_html_a81cfbf195e75fa6b9729cc4ccb89131d"><div class="ttname"><a href="structitype.html#a81cfbf195e75fa6b9729cc4ccb89131d">itype::materials</a></div><div class="ttdeci">std::map&lt; material_id, int &gt; materials</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01303">itype.h:1303</a></div></div>
<div class="ttc" id="astructitype_html_a82ca05abd5038bf680072963a3a97a7c"><div class="ttname"><a href="structitype.html#a82ca05abd5038bf680072963a3a97a7c">itype::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01359">itype.h:1359</a></div></div>
<div class="ttc" id="astructitype_html_a883b56941550ca5486ce38fac797b482"><div class="ttname"><a href="structitype.html#a883b56941550ca5486ce38fac797b482">itype::longest_side</a></div><div class="ttdeci">units::length longest_side</div><div class="ttdoc">How long the longest side of this item is.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01400">itype.h:1400</a></div></div>
<div class="ttc" id="astructitype_html_a88ab4cc3858d8bb86e21cf83d13cc4c0"><div class="ttname"><a href="structitype.html#a88ab4cc3858d8bb86e21cf83d13cc4c0">itype::qualities</a></div><div class="ttdeci">std::map&lt; quality_id, int &gt; qualities</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01286">itype.h:1286</a></div></div>
<div class="ttc" id="astructitype_html_a88f1b039c08faacccaa9d637f894ee7f"><div class="ttname"><a href="structitype.html#a88f1b039c08faacccaa9d637f894ee7f">itype::thrown_damage</a></div><div class="ttdeci">damage_instance thrown_damage</div><div class="ttdoc">Base damage output when thrown.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01247">itype.h:1247</a></div></div>
<div class="ttc" id="astructitype_html_a953828c9c01185fef0f619ecdcd7f3b1"><div class="ttname"><a href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">itype::charges_to_use</a></div><div class="ttdeci">int charges_to_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00139">itype.cpp:139</a></div></div>
<div class="ttc" id="astructitype_html_a9bf7494805acc141b007ddade6a6313c"><div class="ttname"><a href="structitype.html#a9bf7494805acc141b007ddade6a6313c">itype::battery</a></div><div class="ttdeci">cata::value_ptr&lt; islot_battery &gt; battery</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01210">itype.h:1210</a></div></div>
<div class="ttc" id="astructitype_html_a9d0d50c14b184fceddd1a13ee279a6fc"><div class="ttname"><a href="structitype.html#a9d0d50c14b184fceddd1a13ee279a6fc">itype::drop_action</a></div><div class="ttdeci">use_function drop_action</div><div class="ttdoc">Action to take BEFORE the item is placed on map.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01219">itype.h:1219</a></div></div>
<div class="ttc" id="astructitype_html_a9defae7ba72f6d0af2e5629c4244f00e"><div class="ttname"><a href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">itype::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01501">itype.h:1501</a></div></div>
<div class="ttc" id="astructitype_html_aa0615d0fb9ee03b0b7350fe1f334d77b"><div class="ttname"><a href="structitype.html#aa0615d0fb9ee03b0b7350fe1f334d77b">itype::damage_max</a></div><div class="ttdeci">int damage_max() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01471">itype.h:1471</a></div></div>
<div class="ttc" id="astructitype_html_aa36633e74f64e1f6daf003687ef114b0"><div class="ttname"><a href="structitype.html#aa36633e74f64e1f6daf003687ef114b0">itype::source_monster</a></div><div class="ttdeci">mtype_id source_monster</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01344">itype.h:1344</a></div></div>
<div class="ttc" id="astructitype_html_aa5c0438c1bc94ded4e950ad684463a72"><div class="ttname"><a href="structitype.html#aa5c0438c1bc94ded4e950ad684463a72">itype::integral_volume</a></div><div class="ttdeci">units::volume integral_volume</div><div class="ttdoc">Space consumed when integrated as part of another item (defaults to volume) CAUTION: value given is f...</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01395">itype.h:1395</a></div></div>
<div class="ttc" id="astructitype_html_aa656fede37aaf975ab567bcc5c6a452e"><div class="ttname"><a href="structitype.html#aa656fede37aaf975ab567bcc5c6a452e">itype::comestible</a></div><div class="ttdeci">cata::value_ptr&lt; islot_comestible &gt; comestible</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01198">itype.h:1198</a></div></div>
<div class="ttc" id="astructitype_html_aa93ea10e5a9052713479ac2f21dfa3c0"><div class="ttname"><a href="structitype.html#aa93ea10e5a9052713479ac2f21dfa3c0">itype::pockets</a></div><div class="ttdeci">std::vector&lt; pocket_data &gt; pockets</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01253">itype.h:1253</a></div></div>
<div class="ttc" id="astructitype_html_aaf325d340c06130e2fd994e54400a012"><div class="ttname"><a href="structitype.html#aaf325d340c06130e2fd994e54400a012">itype::default_container</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; default_container</div><div class="ttdoc">unique string identifier for this type</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01280">itype.h:1280</a></div></div>
<div class="ttc" id="astructitype_html_ab1af94839bb0e587dc5e59b5b1d5a5d8"><div class="ttname"><a href="structitype.html#ab1af94839bb0e587dc5e59b5b1d5a5d8">itype::repair</a></div><div class="ttdeci">std::set&lt; itype_id &gt; repair</div><div class="ttdoc">What items can be used to repair this item?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01329">itype.h:1329</a></div></div>
<div class="ttc" id="astructitype_html_ab5a0c74951d7c96f34dbb6da4824f373"><div class="ttname"><a href="structitype.html#ab5a0c74951d7c96f34dbb6da4824f373">itype::milling_data</a></div><div class="ttdeci">cata::value_ptr&lt; islot_milling &gt; milling_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01215">itype.h:1215</a></div></div>
<div class="ttc" id="astructitype_html_ab5ccbb62a76230f61c7047b0f4258ff4"><div class="ttname"><a href="structitype.html#ab5ccbb62a76230f61c7047b0f4258ff4">itype::relic_data</a></div><div class="ttdeci">cata::value_ptr&lt; relic &gt; relic_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01214">itype.h:1214</a></div></div>
<div class="ttc" id="astructitype_html_ab7a866401e21c24a50a5823c5dbc80f8"><div class="ttname"><a href="structitype.html#ab7a866401e21c24a50a5823c5dbc80f8">itype::default_container_variant</a></div><div class="ttdeci">std::optional&lt; std::string &gt; default_container_variant</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01281">itype.h:1281</a></div></div>
<div class="ttc" id="astructitype_html_ab7f53da74b49e49693fd49a8c7407fdd"><div class="ttname"><a href="structitype.html#ab7f53da74b49e49693fd49a8c7407fdd">itype::repairs_with</a></div><div class="ttdeci">std::set&lt; material_id &gt; repairs_with</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01304">itype.h:1304</a></div></div>
<div class="ttc" id="astructitype_html_aba9992b8bc80b65d4153370b3e0755ec"><div class="ttname"><a href="structitype.html#aba9992b8bc80b65d4153370b3e0755ec">itype::magazine</a></div><div class="ttdeci">cata::value_ptr&lt; islot_magazine &gt; magazine</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01209">itype.h:1209</a></div></div>
<div class="ttc" id="astructitype_html_abd3ca12912367ae92d488864e09ea921"><div class="ttname"><a href="structitype.html#abd3ca12912367ae92d488864e09ea921">itype::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdoc">Space occupied by items of this type CAUTION: value given is for a default-sized stack.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01389">itype.h:1389</a></div></div>
<div class="ttc" id="astructitype_html_abef0d8869ced8040dc3004db7db39d57"><div class="ttname"><a href="structitype.html#abef0d8869ced8040dc3004db7db39d57">itype::min_skills</a></div><div class="ttdeci">std::map&lt; skill_id, int &gt; min_skills</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01326">itype.h:1326</a></div></div>
<div class="ttc" id="astructitype_html_ac08f9344750006c6cb10d104b6611977"><div class="ttname"><a href="structitype.html#ac08f9344750006c6cb10d104b6611977">itype::ammo_scale</a></div><div class="ttdeci">std::map&lt; std::string, int &gt; ammo_scale</div><div class="ttdoc">The factor of ammo consumption indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01318">itype.h:1318</a></div></div>
<div class="ttc" id="astructitype_html_ac59fb8f044e4a3841db679ecf8e646a7"><div class="ttname"><a href="structitype.html#ac59fb8f044e4a3841db679ecf8e646a7">itype::src</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; itype_id, mod_id &gt; &gt; src</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01238">itype.h:1238</a></div></div>
<div class="ttc" id="astructitype_html_ac93d9775de15087ba59da8d48e89cb6f"><div class="ttname"><a href="structitype.html#ac93d9775de15087ba59da8d48e89cb6f">itype::emits</a></div><div class="ttdeci">std::set&lt; emit_id &gt; emits</div><div class="ttdoc">Fields to emit when item is in active state.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01321">itype.h:1321</a></div></div>
<div class="ttc" id="astructitype_html_acaa924a27717e1a4f5fa3fb17a84383c"><div class="ttname"><a href="structitype.html#acaa924a27717e1a4f5fa3fb17a84383c">itype::conditional_names</a></div><div class="ttdeci">std::vector&lt; conditional_name &gt; conditional_names</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01244">itype.h:1244</a></div></div>
<div class="ttc" id="astructitype_html_acbc6974858332fd6933f71a304312d7f"><div class="ttname"><a href="structitype.html#acbc6974858332fd6933f71a304312d7f">itype::damage_scale</a></div><div class="ttdeci">static constexpr int damage_scale</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01465">itype.h:1465</a></div></div>
<div class="ttc" id="astructitype_html_aceefd307b3bf001fbbcb5fde7bbcdd88"><div class="ttname"><a href="structitype.html#aceefd307b3bf001fbbcb5fde7bbcdd88">itype::brewable</a></div><div class="ttdeci">cata::value_ptr&lt; islot_brewable &gt; brewable</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01199">itype.h:1199</a></div></div>
<div class="ttc" id="astructitype_html_ad08f77aa643e069f397747aeec45eb94"><div class="ttname"><a href="structitype.html#ad08f77aa643e069f397747aeec45eb94">itype::default_mat</a></div><div class="ttdeci">material_id default_mat</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01309">itype.h:1309</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
<div class="ttc" id="astructitype_html_ad3feb1bdd1db2f0b88ef6b74c25ef869"><div class="ttname"><a href="structitype.html#ad3feb1bdd1db2f0b88ef6b74c25ef869">itype::explode_in_fire</a></div><div class="ttdeci">bool explode_in_fire</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01446">itype.h:1446</a></div></div>
<div class="ttc" id="astructitype_html_ad55b9f82e65f57e8cfb6ecc4fc0445cb"><div class="ttname"><a href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">itype::seed</a></div><div class="ttdeci">cata::value_ptr&lt; islot_seed &gt; seed</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01213">itype.h:1213</a></div></div>
<div class="ttc" id="astructitype_html_ad8c03a65fe401a2c39c5f76116a46164"><div class="ttname"><a href="structitype.html#ad8c03a65fe401a2c39c5f76116a46164">itype::min_str</a></div><div class="ttdeci">int min_str</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01365">itype.h:1365</a></div></div>
<div class="ttc" id="astructitype_html_ada64ca1e7937118bb822cd9b0ea83497"><div class="ttname"><a href="structitype.html#ada64ca1e7937118bb822cd9b0ea83497">itype::properties</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; properties</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01294">itype.h:1294</a></div></div>
<div class="ttc" id="astructitype_html_adc032f577167e749b91124d76f56ddfe"><div class="ttname"><a href="structitype.html#adc032f577167e749b91124d76f56ddfe">itype::sym</a></div><div class="ttdeci">std::string sym</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01271">itype.h:1271</a></div></div>
<div class="ttc" id="astructitype_html_adc8d0bfd6899a3b8b4868e028c5a2214"><div class="ttname"><a href="structitype.html#adc8d0bfd6899a3b8b4868e028c5a2214">itype::get_flags</a></div><div class="ttdeci">const FlagsSetType &amp; get_flags() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00169">itype.cpp:169</a></div></div>
<div class="ttc" id="astructitype_html_adf6e9885e97f8b5b4ebbb58f43885e02"><div class="ttname"><a href="structitype.html#adf6e9885e97f8b5b4ebbb58f43885e02">itype::tick</a></div><div class="ttdeci">int tick(Character *p, item &amp;it, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00185">itype.cpp:185</a></div></div>
<div class="ttc" id="astructitype_html_aec04d23e907e3ea3cd9cfb08369dffcd"><div class="ttname"><a href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">itype::book</a></div><div class="ttdeci">cata::value_ptr&lt; islot_book &gt; book</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01203">itype.h:1203</a></div></div>
<div class="ttc" id="astructitype_html_aef9a3f51d54f46dd1d5a7accaf483922"><div class="ttname"><a href="structitype.html#aef9a3f51d54f46dd1d5a7accaf483922">itype::mat_portion_total</a></div><div class="ttdeci">int mat_portion_total</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01363">itype.h:1363</a></div></div>
<div class="ttc" id="astructitype_html_af120b48958f64cb16301d76d95d57d6a"><div class="ttname"><a href="structitype.html#af120b48958f64cb16301d76d95d57d6a">itype::techniques</a></div><div class="ttdeci">std::set&lt; matec_id &gt; techniques</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01323">itype.h:1323</a></div></div>
<div class="ttc" id="astructitype_html_af238865694d157c403d1c7d0b74106dc"><div class="ttname"><a href="structitype.html#af238865694d157c403d1c7d0b74106dc">itype::maximum_charges</a></div><div class="ttdeci">int maximum_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01514">itype.h:1514</a></div></div>
<div class="ttc" id="astructitype_html_af2971652c35b420d02faa9337c51c00b"><div class="ttname"><a href="structitype.html#af2971652c35b420d02faa9337c51c00b">itype::can_have_charges</a></div><div class="ttdeci">bool can_have_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00236">itype.cpp:236</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01420">itype.h:1420</a></div></div>
<div class="ttc" id="astructitype_html_afa43bb71000c037c9918d907fdacf0b5"><div class="ttname"><a href="structitype.html#afa43bb71000c037c9918d907fdacf0b5">itype::use_methods</a></div><div class="ttdeci">std::map&lt; std::string, use_function &gt; use_methods</div><div class="ttdoc">Actions an instance can perform (if any) indexed by action type.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01312">itype.h:1312</a></div></div>
<div class="ttc" id="astructitype_html_afc46b586361661f16219f0a465b71c1d"><div class="ttname"><a href="structitype.html#afc46b586361661f16219f0a465b71c1d">itype::can_use</a></div><div class="ttdeci">bool can_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00174">itype.cpp:174</a></div></div>
<div class="ttc" id="astructlabel_html"><div class="ttname"><a href="structlabel.html">label</a></div><div class="ttdoc">Struct used for storing labels (easier to json opposed to a std::map&lt;point, std::string&gt;)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00687">vehicle.h:687</a></div></div>
<div class="ttc" id="astructlight__emission_html"><div class="ttname"><a href="structlight__emission.html">light_emission</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00095">item.h:95</a></div></div>
<div class="ttc" id="astructlight__emission_html_a16250874faa8912324fbc4a305fe0e1b"><div class="ttname"><a href="structlight__emission.html#a16250874faa8912324fbc4a305fe0e1b">light_emission::luminance</a></div><div class="ttdeci">unsigned short luminance</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00096">item.h:96</a></div></div>
<div class="ttc" id="astructlight__emission_html_ab0ec1df6fca595be85ddc4ce6d64c274"><div class="ttname"><a href="structlight__emission.html#ab0ec1df6fca595be85ddc4ce6d64c274">light_emission::direction</a></div><div class="ttdeci">short direction</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00098">item.h:98</a></div></div>
<div class="ttc" id="astructlight__emission_html_ad2702f7a90a78ab3263fa52ffb803385"><div class="ttname"><a href="structlight__emission.html#ad2702f7a90a78ab3263fa52ffb803385">light_emission::width</a></div><div class="ttdeci">short width</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00097">item.h:97</a></div></div>
<div class="ttc" id="astructmat__burn__data_html"><div class="ttname"><a href="structmat__burn__data.html">mat_burn_data</a></div><div class="ttdoc">Contains burning parameters for a given material.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00045">fire.h:45</a></div></div>
<div class="ttc" id="astructmat__burn__data_html_a304f96d38e70395b7625d2c80f56de1c"><div class="ttname"><a href="structmat__burn__data.html#a304f96d38e70395b7625d2c80f56de1c">mat_burn_data::immune</a></div><div class="ttdeci">bool immune</div><div class="ttdoc">If this is true, an object will not burn or be destroyed by fire.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00047">fire.h:47</a></div></div>
<div class="ttc" id="astructmat__burn__data_html_a7d46d977a131b61638e03a07421f51db"><div class="ttname"><a href="structmat__burn__data.html#a7d46d977a131b61638e03a07421f51db">mat_burn_data::volume_per_turn</a></div><div class="ttdeci">units::volume volume_per_turn</div><div class="ttdoc">If non-zero and lower than item's volume, scale burning by volume_penalty / volume.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00049">fire.h:49</a></div></div>
<div class="ttc" id="astructmat__burn__data_html_a83f739c4ded3561758edc02f41146d66"><div class="ttname"><a href="structmat__burn__data.html#a83f739c4ded3561758edc02f41146d66">mat_burn_data::smoke</a></div><div class="ttdeci">float smoke</div><div class="ttdoc">Smoke produced per tick when this material burns.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00053">fire.h:53</a></div></div>
<div class="ttc" id="astructmat__burn__data_html_ae107a447a65043c0c2fc12822c9115de"><div class="ttname"><a href="structmat__burn__data.html#ae107a447a65043c0c2fc12822c9115de">mat_burn_data::fuel</a></div><div class="ttdeci">float fuel</div><div class="ttdoc">Fuel contributed per tick when this material burns.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00051">fire.h:51</a></div></div>
<div class="ttc" id="astructmat__burn__data_html_af4c94b496313de97c30c86d1dae2a02b"><div class="ttname"><a href="structmat__burn__data.html#af4c94b496313de97c30c86d1dae2a02b">mat_burn_data::burn</a></div><div class="ttdeci">float burn</div><div class="ttdoc">Volume of material destroyed per tick when this material burns.</div><div class="ttdef"><b>Definition:</b> <a href="fire_8h_source.html#l00055">fire.h:55</a></div></div>
<div class="ttc" id="astructmtype_html"><div class="ttname"><a href="structmtype.html">mtype</a></div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00284">mtype.h:284</a></div></div>
<div class="ttc" id="astructmtype_html_a09b3dab7e8a40d991242870bf1bf160e"><div class="ttname"><a href="structmtype.html#a09b3dab7e8a40d991242870bf1bf160e">mtype::burn_into</a></div><div class="ttdeci">mtype_id burn_into</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00309">mtype.h:309</a></div></div>
<div class="ttc" id="astructmtype_html_a228db8f2c45aee4865f92ca5a561889f"><div class="ttname"><a href="structmtype.html#a228db8f2c45aee4865f92ca5a561889f">mtype::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00406">mtype.h:406</a></div></div>
<div class="ttc" id="astructmtype_html_a2e7e15bb4c03b2e0a3e487f13d25e9bf"><div class="ttname"><a href="structmtype.html#a2e7e15bb4c03b2e0a3e487f13d25e9bf">mtype::zombify_into</a></div><div class="ttdeci">mtype_id zombify_into</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00311">mtype.h:311</a></div></div>
<div class="ttc" id="astructmtype_html_a51ec342d71717bb513f0158198b12840"><div class="ttname"><a href="structmtype.html#a51ec342d71717bb513f0158198b12840">mtype::in_species</a></div><div class="ttdeci">bool in_species(const species_id &amp;spec) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00385">mtype.cpp:385</a></div></div>
<div class="ttc" id="astructmtype_html_a576cee4080644fddb7db250a669b3ac1"><div class="ttname"><a href="structmtype.html#a576cee4080644fddb7db250a669b3ac1">mtype::mat</a></div><div class="ttdeci">std::map&lt; material_id, int &gt; mat</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00364">mtype.h:364</a></div></div>
<div class="ttc" id="astructmtype_html_a60dea81cdc4c627313e540831d311b5a"><div class="ttname"><a href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">mtype::id</a></div><div class="ttdeci">mtype_id id</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00301">mtype.h:301</a></div></div>
<div class="ttc" id="astructmtype_html_a6ad4c76593c4cd6423492169733885a1"><div class="ttname"><a href="structmtype.html#a6ad4c76593c4cd6423492169733885a1">mtype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00480">mtype.h:480</a></div></div>
<div class="ttc" id="astructmtype_html_a71161bb5851b4c48f32f3ebaf35b9b1d"><div class="ttname"><a href="structmtype.html#a71161bb5851b4c48f32f3ebaf35b9b1d">mtype::weight</a></div><div class="ttdeci">units::mass weight</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00292">mtype.h:292</a></div></div>
<div class="ttc" id="astructmtype_html_a7f92cbd89d3870833c9d5300acb325a1"><div class="ttname"><a href="structmtype.html#a7f92cbd89d3870833c9d5300acb325a1">mtype::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00409">mtype.h:409</a></div></div>
<div class="ttc" id="astructmtype_html_a8f4ef7b98c4bad77c50171f7da0f4f56"><div class="ttname"><a href="structmtype.html#a8f4ef7b98c4bad77c50171f7da0f4f56">mtype::has_flag</a></div><div class="ttdeci">bool has_flag(const mon_flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00520">mtype.h:520</a></div></div>
<div class="ttc" id="astructmtype_html_a9a8f4ead67d1836e3f4db624533af5aa"><div class="ttname"><a href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">mtype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00330">mtype.cpp:330</a></div></div>
<div class="ttc" id="astructmtype_html_af242ac55ae2896b040f91b3581e5fcbb"><div class="ttname"><a href="structmtype.html#af242ac55ae2896b040f91b3581e5fcbb">mtype::hp</a></div><div class="ttdeci">int hp</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00413">mtype.h:413</a></div></div>
<div class="ttc" id="astructnutrients_html"><div class="ttname"><a href="structnutrients.html">nutrients</a></div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00036">stomach.h:36</a></div></div>
<div class="ttc" id="astructnutrients_html_a27fef4783e99c7f2471a9fabcabe19b5"><div class="ttname"><a href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">nutrients::kcal</a></div><div class="ttdeci">int kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00118">stomach.cpp:118</a></div></div>
<div class="ttc" id="astructnutrients_html_a5bbbdebac3455bf17563f7f8754e1a10"><div class="ttname"><a href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">nutrients::vitamins</a></div><div class="ttdeci">std::map&lt; vitamin_id, int &gt; vitamins() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00047">stomach.cpp:47</a></div></div>
<div class="ttc" id="astructnutrients_html_a6f702fc676d942df593b7cac4e2facd0"><div class="ttname"><a href="structnutrients.html#a6f702fc676d942df593b7cac4e2facd0">nutrients::get_vitamin</a></div><div class="ttdeci">int get_vitamin(const vitamin_id &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00105">stomach.cpp:105</a></div></div>
<div class="ttc" id="astructpart__material_html"><div class="ttname"><a href="structpart__material.html">part_material</a></div><div class="ttdoc">Material data for individual armor body parts.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00238">itype.h:238</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructpoint_html_a9a82ca9504acabb1e30569f89c805471"><div class="ttname"><a href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00024">point.h:24</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00023">point.h:23</a></div></div>
<div class="ttc" id="astructpoint_html_afb447f6b720e999dcd3789b54ef2cca3"><div class="ttname"><a href="structpoint.html#afb447f6b720e999dcd3789b54ef2cca3">point::abs</a></div><div class="ttdeci">point abs() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00064">point.h:64</a></div></div>
<div class="ttc" id="astructquality_html"><div class="ttname"><a href="structquality.html">quality</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00044">requirements.h:44</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a175d46943600149603b7a915cb48092b"><div class="ttname"><a href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">requirement_data::get_tools</a></div><div class="ttdeci">const alter_tool_comp_vector &amp; get_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01152">requirements.cpp:1152</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01162">requirements.cpp:1162</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a7aa4a6fdb32c1ef086a2d6a9518ff9d0"><div class="ttname"><a href="structrequirement__data.html#a7aa4a6fdb32c1ef086a2d6a9518ff9d0">requirement_data::alter_quali_req_vector</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; quality_requirement &gt; &gt; alter_quali_req_vector</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00216">requirements.h:216</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a7acde751aa71fb09c3272929afae503f"><div class="ttname"><a href="structrequirement__data.html#a7acde751aa71fb09c3272929afae503f">requirement_data::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">empty requirements are not necessary null</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00256">requirements.h:256</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a81eb3f292988bc3b327f50cdcbb74e0c"><div class="ttname"><a href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; item_comp &gt; &gt; alter_item_comp_vector</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00217">requirements.h:217</a></div></div>
<div class="ttc" id="astructrequirement__data_html_ad7733e9b478f08e7e6e1ef94057e3502"><div class="ttname"><a href="structrequirement__data.html#ad7733e9b478f08e7e6e1ef94057e3502">requirement_data::get_qualities</a></div><div class="ttdeci">const alter_quali_req_vector &amp; get_qualities() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01157">requirements.cpp:1157</a></div></div>
<div class="ttc" id="astructrequirement__data_html_afa25e820b20f0a2ace91a174fafe648a"><div class="ttname"><a href="structrequirement__data.html#afa25e820b20f0a2ace91a174fafe648a">requirement_data::alter_tool_comp_vector</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; tool_comp &gt; &gt; alter_tool_comp_vector</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00215">requirements.h:215</a></div></div>
<div class="ttc" id="astructresistances_html"><div class="ttname"><a href="structresistances.html">resistances</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00204">damage.h:204</a></div></div>
<div class="ttc" id="astructresistances_html_a2360b00d9d46ab595d0ca46429c056e6"><div class="ttname"><a href="structresistances.html#a2360b00d9d46ab595d0ca46429c056e6">resistances::resist_vals</a></div><div class="ttdeci">std::unordered_map&lt; damage_type_id, float &gt; resist_vals</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00205">damage.h:205</a></div></div>
<div class="ttc" id="astructresistances_html_ab2707e673b2def1188ac7397012c1afb"><div class="ttname"><a href="structresistances.html#ab2707e673b2def1188ac7397012c1afb">resistances::get_effective_resist</a></div><div class="ttdeci">float get_effective_resist(const damage_unit &amp;du) const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00627">damage.cpp:627</a></div></div>
<div class="ttc" id="astructresistances_html_ab41b2fd695ed0cf542b640c6b295020f"><div class="ttname"><a href="structresistances.html#ab41b2fd695ed0cf542b640c6b295020f">resistances::type_resist</a></div><div class="ttdeci">float type_resist(const damage_type_id &amp;dt) const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00622">damage.cpp:622</a></div></div>
<div class="ttc" id="astructstacking__info_html"><div class="ttname"><a href="structstacking__info.html">stacking_info</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00187">item.h:187</a></div></div>
<div class="ttc" id="astructstacking__info_html_ad047ffeca5b2ced345af5b8397977b1d"><div class="ttname"><a href="structstacking__info.html#ad047ffeca5b2ced345af5b8397977b1d">stacking_info::bits</a></div><div class="ttdeci">tname::segment_bitset bits</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00188">item.h:188</a></div></div>
<div class="ttc" id="astructsub__body__part__type_html_a4fe2420efee3c7c4a189c2137bb464b9"><div class="ttname"><a href="structsub__body__part__type.html#a4fe2420efee3c7c4a189c2137bb464b9">sub_body_part_type::part_side</a></div><div class="ttdeci">side part_side</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00054">subbodypart.h:54</a></div></div>
<div class="ttc" id="astructsub__body__part__type_html_acf81c8c9ba88bcdb35daf2e525d38247"><div class="ttname"><a href="structsub__body__part__type.html#acf81c8c9ba88bcdb35daf2e525d38247">sub_body_part_type::max_coverage</a></div><div class="ttdeci">int max_coverage</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00068">subbodypart.h:68</a></div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdoc">Some traps aren't actually traps in the usual sense of the word.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00109">trap.h:109</a></div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00366">trap.cpp:366</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00112">trap.h:112</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
<div class="ttc" id="astructuse__function_html_a308134b3f05ca40164e867ac8d922da8"><div class="ttname"><a href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">use_function::call</a></div><div class="ttdeci">std::optional&lt; int &gt; call(Character *, item &amp;, const tripoint &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08922">iuse.cpp:8922</a></div></div>
<div class="ttc" id="astructuse__function_html_a468ef5f707dc56c2822d23ea226c9b36"><div class="ttname"><a href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">use_function::get_actor_ptr</a></div><div class="ttdeci">iuse_actor * get_actor_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00314">iuse.h:314</a></div></div>
<div class="ttc" id="astructvar_html"><div class="ttname"><a href="structvar.html">var</a></div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00109">math_parser_impl.h:109</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00254">vehicle.h:254</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a1db4e1805d25a95908b517ce51a64259"><div class="ttname"><a href="structvehicle__part.html#a1db4e1805d25a95908b517ce51a64259">vehicle_part::target</a></div><div class="ttdeci">std::pair&lt; tripoint, tripoint &gt; target</div><div class="ttdoc">Coordinates for some kind of target; jumper cables and turrets use this Two coordinate pairs are stor...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00526">vehicle.h:526</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a59d594dfb3854c67c2a04065c947cc3c"><div class="ttname"><a href="structvehicle__part.html#a59d594dfb3854c67c2a04065c947cc3c">vehicle_part::precalc</a></div><div class="ttdeci">std::array&lt; tripoint, 2 &gt; precalc</div><div class="ttdoc">mount translated to face.dir [0] and turn_dir [1]</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00451">vehicle.h:451</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a6aac739840c1a6745ff549cbb1ab34b0"><div class="ttname"><a href="structvehicle__part.html#a6aac739840c1a6745ff549cbb1ab34b0">vehicle_part::remove_flag</a></div><div class="ttdeci">void remove_flag(const vp_flag flag) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00283">vehicle.h:283</a></div></div>
<div class="ttc" id="astructvehicle__part_html_a80245eb0489bb37a9f3ed666a5589182"><div class="ttname"><a href="structvehicle__part.html#a80245eb0489bb37a9f3ed666a5589182">vehicle_part::set_flag</a></div><div class="ttdeci">void set_flag(const vp_flag flag) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00280">vehicle.h:280</a></div></div>
<div class="ttc" id="astructvehicle__part_html_ac6e2dfa7178b8bed91baea3543961a86"><div class="ttname"><a href="structvehicle__part.html#ac6e2dfa7178b8bed91baea3543961a86">vehicle_part::mount</a></div><div class="ttdeci">point mount</div><div class="ttdoc">mount point: x is on the forward/backward axis, y is on the left/right axis</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00447">vehicle.h:447</a></div></div>
<div class="ttc" id="astructvehicle__part_html_adab316825e5cdb2118b221cfa798be6f"><div class="ttname"><a href="structvehicle__part.html#adab316825e5cdb2118b221cfa798be6f">vehicle_part::carried_stack</a></div><div class="ttdeci">std::stack&lt; carried_part_data &gt; carried_stack</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00303">vehicle.h:303</a></div></div>
<div class="ttc" id="astructw__point_html"><div class="ttname"><a href="structw__point.html">w_point</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00017">weather_gen.h:17</a></div></div>
<div class="ttc" id="astructweighted__int__list_html"><div class="ttname"><a href="structweighted__int__list.html">weighted_int_list&lt; std::string &gt;</a></div></div>
<div class="ttc" id="astructweighted__list_html_aa2eb002d2ec795a0aab91178a93d05ba"><div class="ttname"><a href="structweighted__list.html#aa2eb002d2ec795a0aab91178a93d05ba">weighted_list::pick</a></div><div class="ttdeci">const T * pick(unsigned int randi) const</div><div class="ttdoc">This will return a pointer to an object from the list randomly selected and biased by weight.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00113">weighted_list.h:113</a></div></div>
<div class="ttc" id="astructweighted__list_html_ad960be5e22f6aaa4eb01af592a9476f5"><div class="ttname"><a href="structweighted__list.html#ad960be5e22f6aaa4eb01af592a9476f5">weighted_list::add</a></div><div class="ttdeci">T * add(const T &amp;obj, const W &amp;weight)</div><div class="ttdoc">This will add a new object to the weighted list.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00040">weighted_list.h:40</a></div></div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4">side</a></div><div class="ttdeci">side</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00029">subbodypart.h:29</a></div></div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a21507b40c80068eda19865706fdc2403">side::RIGHT</a></div><div class="ttdeci">@ RIGHT</div></div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a6328e5e3186c227a021ef2ff77e40197">side::BOTH</a></div><div class="ttdeci">@ BOTH</div></div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4a684d325a7303f52e64011467ff5c5758">side::LEFT</a></div><div class="ttdeci">@ LEFT</div></div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">side::num_sides</a></div><div class="ttdeci">@ num_sides</div></div>
<div class="ttc" id="asubbodypart_8h_html_afe416be1d7ca88687ead27c9ef9ffb82"><div class="ttname"><a href="subbodypart_8h.html#afe416be1d7ca88687ead27c9ef9ffb82">sub_bodypart_id</a></div><div class="ttdeci">int_id&lt; sub_body_part_type &gt; sub_bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="subbodypart_8h_source.html#l00027">subbodypart.h:27</a></div></div>
<div class="ttc" id="atext__snippets_8cpp_html_ac3fc11c159cd056aa15ad7c0b37b070a"><div class="ttname"><a href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a></div><div class="ttdeci">snippet_library SNIPPET</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00015">text_snippets.cpp:15</a></div></div>
<div class="ttc" id="atext__snippets_8h_html"><div class="ttname"><a href="text__snippets_8h.html">text_snippets.h</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a176e288c640c6506a86330cb10fbe13a"><div class="ttname"><a href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a></div><div class="ttdeci">translation to_translation(const std::string &amp;raw)</div><div class="ttdoc">Shorthands for translation::to_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00420">translation.cpp:420</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_a45dd4e3da9b83845bcd1c2d8e80cf802"><div class="ttname"><a href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a></div><div class="ttdeci">#define n_gettext(STRING1, STRING2, COUNT)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00091">translations.h:91</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
<div class="ttc" id="atranslations_8h_html_a9e39a96618079002323c6e554271d3e2"><div class="ttname"><a href="translations_8h.html#a9e39a96618079002323c6e554271d3e2">translate_marker_context</a></div><div class="ttdeci">#define translate_marker_context(c, x)</div><div class="ttdoc">Same as translate_marker, but also provides a context (string literal).</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00025">translations.h:25</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atranslations_8h_html_abe0b6bcea429e79219da2f21b41d6be9"><div class="ttname"><a href="translations_8h.html#abe0b6bcea429e79219da2f21b41d6be9">npgettext</a></div><div class="ttdeci">#define npgettext(STRING0, STRING1, STRING2, COUNT)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00093">translations.h:93</a></div></div>
<div class="ttc" id="atrap_8h_html"><div class="ttname"><a href="trap_8h.html">trap.h</a></div></div>
<div class="ttc" id="atry__parse__integer_8cpp_html_ae51236610f306440113477987363490b"><div class="ttname"><a href="try__parse__integer_8cpp.html#ae51236610f306440113477987363490b">try_parse_integer&lt; int &gt;</a></div><div class="ttdeci">template ret_val&lt; int &gt; try_parse_integer&lt; int &gt;(const std::string_view, bool use_locale)</div></div>
<div class="ttc" id="atry__parse__integer_8h_html"><div class="ttname"><a href="try__parse__integer_8h.html">try_parse_integer.h</a></div></div>
<div class="ttc" id="atype__id_8h_html_a4a240e1107e45f10d64b78f1b5f58d59"><div class="ttname"><a href="type__id_8h.html#a4a240e1107e45f10d64b78f1b5f58d59">ammotype</a></div><div class="ttdeci">string_id&lt; ammunition_type &gt; ammotype</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00020">type_id.h:20</a></div></div>
<div class="ttc" id="atype__id_8h_html_a62798cd4a1ea702e8d25b8c0f17a4834"><div class="ttname"><a href="type__id_8h.html#a62798cd4a1ea702e8d25b8c0f17a4834">vitamin_id</a></div><div class="ttdeci">string_id&lt; vitamin &gt; vitamin_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00292">type_id.h:292</a></div></div>
<div class="ttc" id="atype__id_8h_html_a7d1934ae1f3ab6bea8bd75f88070482d"><div class="ttname"><a href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a></div><div class="ttdeci">string_id&lt; recipe &gt; recipe_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00214">type_id.h:214</a></div></div>
<div class="ttc" id="atype__id_8h_html_a8174d98bb32e389bd2e1ab691167f7b9"><div class="ttname"><a href="type__id_8h.html#a8174d98bb32e389bd2e1ab691167f7b9">gun_mode_id</a></div><div class="ttdeci">string_id&lt; gun_mode &gt; gun_mode_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00106">type_id.h:106</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="aunits__fwd_8h_html"><div class="ttname"><a href="units__fwd_8h.html">units_fwd.h</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a5d1afc8428beadaac75fb68c5a2bfcd7"><div class="ttname"><a href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a></div><div class="ttdeci">const char * volume_units_abbr()</div><div class="ttdoc">Create an abbreviated units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00096">units_utility.cpp:96</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a6701113802c6412b3c5d3fa59149ca6c"><div class="ttname"><a href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a></div><div class="ttdeci">double convert_weight(const units::mass &amp;weight)</div><div class="ttdoc">Convert weight in grams to units defined by user (kg or lbs)</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00143">units_utility.cpp:143</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a763c57a150105f60bf72b72f26823213"><div class="ttname"><a href="units__utility_8cpp.html#a763c57a150105f60bf72b72f26823213">convert_length</a></div><div class="ttdeci">int convert_length(const units::length &amp;length)</div><div class="ttdoc">converts length to largest unit available 1000 mm = 1 meter for example assumed to be used in conjunc...</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00169">units_utility.cpp:169</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_adb77a71aaad9051e5936082915961b2f"><div class="ttname"><a href="units__utility_8cpp.html#adb77a71aaad9051e5936082915961b2f">weight_units</a></div><div class="ttdeci">const char * weight_units()</div><div class="ttdoc">Create a units label for a weight value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00091">units_utility.cpp:91</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_afa125a0ee11c6790f0be6d3b3707d28a"><div class="ttname"><a href="units__utility_8cpp.html#afa125a0ee11c6790f0be6d3b3707d28a">convert_volume</a></div><div class="ttdeci">double convert_volume(int volume)</div><div class="ttdoc">Convert volume from ml to units defined by user.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00275">units_utility.cpp:275</a></div></div>
<div class="ttc" id="aunits__utility_8h_html"><div class="ttname"><a href="units__utility_8h.html">units_utility.h</a></div></div>
<div class="ttc" id="avalue__ptr_8h_html"><div class="ttname"><a href="value__ptr_8h.html">value_ptr.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html"><div class="ttname"><a href="veh__type_8h.html">veh_type.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea0c516f66a07d369c24681ba3308defb8">VPFLAG_POWER_TRANSFER</a></div><div class="ttdeci">@ VPFLAG_POWER_TRANSFER</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00113">veh_type.h:113</a></div></div>
<div class="ttc" id="aveh__type_8h_html_aa3ff66a8c100c3deb40dfa70f1eb307ea8f0159e32409b47888df99c01106fdb5"><div class="ttname"><a href="veh__type_8h.html#aa3ff66a8c100c3deb40dfa70f1eb307ea8f0159e32409b47888df99c01106fdb5">VPFLAG_APPLIANCE</a></div><div class="ttdeci">@ VPFLAG_APPLIANCE</div><div class="ttdef"><b>Definition:</b> <a href="veh__type_8h_source.html#l00059">veh_type.h:59</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avehicle_8h_html_acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40"><div class="ttname"><a href="vehicle_8h.html#acba70ff9f8381a17fbca8057d0def3ceaf335343cdf8c36a0309ec7ea930f6a40">vp_flag::linked_flag</a></div><div class="ttdeci">@ linked_flag</div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a></div><div class="ttdeci">@ NEXT</div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea8d12a2ca7e5a64036d7251a3eda51a38">VisitResponse::ABORT</a></div><div class="ttdeci">@ ABORT</div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabeab85df04e922fe1dd3c1f0692faeaacef"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabeab85df04e922fe1dd3c1f0692faeaacef">VisitResponse::SKIP</a></div><div class="ttdeci">@ SKIP</div></div>
<div class="ttc" id="avitamin_8h_html"><div class="ttname"><a href="vitamin_8h.html">vitamin.h</a></div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a></div><div class="ttdeci">@ VITAMIN</div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
<div class="ttc" id="aweather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div></div>
<div class="ttc" id="aweather__gen_8h_html"><div class="ttname"><a href="weather__gen_8h.html">weather_gen.h</a></div></div>
<div class="ttc" id="aweather__type_8h_html"><div class="ttname"><a href="weather__type_8h.html">weather_type.h</a></div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a></div><div class="ttdeci">@ light</div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a></div><div class="ttdeci">@ heavy</div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a></div><div class="ttdeci">@ very_light</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:27 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
