<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: diary Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classdiary-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">diary Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Diary is connected to the player avatar.  
 <a href="classdiary.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="diary_8h_source.html">diary.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a86422a12599b8270949114da84153288"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a86422a12599b8270949114da84153288">diary</a> ()</td></tr>
<tr class="separator:a86422a12599b8270949114da84153288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a98b4baa9604353f14fb6b54e2b5ab"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a90a98b4baa9604353f14fb6b54e2b5ab">~diary</a> ()=default</td></tr>
<tr class="separator:a90a98b4baa9604353f14fb6b54e2b5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca50176a183179503d64dd627035c41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a7ca50176a183179503d64dd627035c41">death_entry</a> ()</td></tr>
<tr class="separator:a7ca50176a183179503d64dd627035c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7941d21aab55904c3fad41332e3ff90f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a7941d21aab55904c3fad41332e3ff90f">store</a> ()</td></tr>
<tr class="separator:a7941d21aab55904c3fad41332e3ff90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09cb51c0f59fd2def93eaac8a0ebc20f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a09cb51c0f59fd2def93eaac8a0ebc20f">load</a> ()</td></tr>
<tr class="separator:a09cb51c0f59fd2def93eaac8a0ebc20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4172f93b61f99c02ef8a359b4daedc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a6d4172f93b61f99c02ef8a359b4daedc">serialize</a> (std::ostream &amp;fout)</td></tr>
<tr class="separator:a6d4172f93b61f99c02ef8a359b4daedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4563d2028f1c80fa64445aa4c14d2c14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a4563d2028f1c80fa64445aa4c14d2c14">deserialize</a> (const <a class="el" href="classJsonValue.html">JsonValue</a> &amp;jsin)</td></tr>
<tr class="separator:a4563d2028f1c80fa64445aa4c14d2c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06443969896266eb913c97ce8031c86b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a06443969896266eb913c97ce8031c86b">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;jsout)</td></tr>
<tr class="separator:a06443969896266eb913c97ce8031c86b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a66d05a576c8306885cb621ef7995e625"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a66d05a576c8306885cb621ef7995e625">show_diary_ui</a> (<a class="el" href="classdiary.html">diary</a> *c_diary)</td></tr>
<tr class="separator:a66d05a576c8306885cb621ef7995e625"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa0b9c6e242815fa528bdadf4e2a678c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#aa0b9c6e242815fa528bdadf4e2a678c2">edit_page_ui</a> (const std::function&lt; <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a>()&gt; &amp;create_window)</td></tr>
<tr class="separator:aa0b9c6e242815fa528bdadf4e2a678c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c67ffc6071a9ea523839867ced1e19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a64c67ffc6071a9ea523839867ced1e19">set_opened_page</a> (int pagenum)</td></tr>
<tr class="separator:a64c67ffc6071a9ea523839867ced1e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a0cea09069099df5f5100a385ae3db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a48a0cea09069099df5f5100a385ae3db">new_page</a> ()</td></tr>
<tr class="separator:a48a0cea09069099df5f5100a385ae3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae91bc2c692491781357f10d8968a4d39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#ae91bc2c692491781357f10d8968a4d39">set_page_text</a> (std::string text)</td></tr>
<tr class="separator:ae91bc2c692491781357f10d8968a4d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a366422f3e1571b56a7eb25b2aa4fcbda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a366422f3e1571b56a7eb25b2aa4fcbda">delete_page</a> ()</td></tr>
<tr class="separator:a366422f3e1571b56a7eb25b2aa4fcbda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9469d0b03b04b173f73beca4b853ed55"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a9469d0b03b04b173f73beca4b853ed55">get_opened_page_num</a> () const</td></tr>
<tr class="separator:a9469d0b03b04b173f73beca4b853ed55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258954db4774907392c34f72e97d4276"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a258954db4774907392c34f72e97d4276">get_pages_list</a> ()</td></tr>
<tr class="separator:a258954db4774907392c34f72e97d4276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f04f66b87bac6fe12e292805908071c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a6f04f66b87bac6fe12e292805908071c">get_change_list</a> ()</td></tr>
<tr class="separator:a6f04f66b87bac6fe12e292805908071c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8673546132edabe134be1168c73ea4"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a4d8673546132edabe134be1168c73ea4">get_desc_map</a> ()</td></tr>
<tr class="separator:a4d8673546132edabe134be1168c73ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20c00b8b9dd1a1375f85d40e205d488"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdiary__page.html">diary_page</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a> (int offset=0)</td></tr>
<tr class="separator:aa20c00b8b9dd1a1375f85d40e205d488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafbfa5ecd902193a34752d16009b2b0e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#aafbfa5ecd902193a34752d16009b2b0e">get_page_text</a> ()</td></tr>
<tr class="separator:aafbfa5ecd902193a34752d16009b2b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfda5ef9ded514952fc899340a36d146"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#adfda5ef9ded514952fc899340a36d146">get_head_text</a> ()</td></tr>
<tr class="separator:adfda5ef9ded514952fc899340a36d146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3223f044433acc53d75b76a0c771c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#aaf3223f044433acc53d75b76a0c771c3">skill_changes</a> ()</td></tr>
<tr class="separator:aaf3223f044433acc53d75b76a0c771c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a0abb001ad2a79c20ecf2cb7d1b6bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#ae6a0abb001ad2a79c20ecf2cb7d1b6bd">kill_changes</a> ()</td></tr>
<tr class="separator:ae6a0abb001ad2a79c20ecf2cb7d1b6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f11125e72e6d7feff26ced914142a85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a6f11125e72e6d7feff26ced914142a85">trait_changes</a> ()</td></tr>
<tr class="separator:a6f11125e72e6d7feff26ced914142a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaefc266f94c291a2b97f81730b3eedd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#afaefc266f94c291a2b97f81730b3eedd">bionic_changes</a> ()</td></tr>
<tr class="separator:afaefc266f94c291a2b97f81730b3eedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9025dec5b103cd066b8bdb8e45f2027f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a9025dec5b103cd066b8bdb8e45f2027f">stat_changes</a> ()</td></tr>
<tr class="separator:a9025dec5b103cd066b8bdb8e45f2027f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0bf796d6ac303ece50170436c6fa415"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#ac0bf796d6ac303ece50170436c6fa415">prof_changes</a> ()</td></tr>
<tr class="separator:ac0bf796d6ac303ece50170436c6fa415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8078f58e8ccb22dbed7f3da9f524cc57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a8078f58e8ccb22dbed7f3da9f524cc57">mission_changes</a> ()</td></tr>
<tr class="separator:a8078f58e8ccb22dbed7f3da9f524cc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff278fdf400df7ead4de72650753ffb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a5ff278fdf400df7ead4de72650753ffb">spell_changes</a> ()</td></tr>
<tr class="separator:a5ff278fdf400df7ead4de72650753ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d4806a8994812ed8181043029438d50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a9d4806a8994812ed8181043029438d50">export_to_txt</a> (bool lastexport=false)</td></tr>
<tr class="separator:a9d4806a8994812ed8181043029438d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa75c99b1a0c89fbb255151d775718973"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a> (const std::string &amp;entry, const std::string &amp;desc=&quot;&quot;)</td></tr>
<tr class="separator:aa75c99b1a0c89fbb255151d775718973"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8d8461f55fc270d98364c4c181a74a06"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a></td></tr>
<tr class="separator:a8d8461f55fc270d98364c4c181a74a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ad2dbccb0c00daf2921a5e7cf69b9d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="structdiary__page.html">diary_page</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a></td></tr>
<tr class="separator:a97ad2dbccb0c00daf2921a5e7cf69b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae762e8247e4d80c00810c0fc0bf942a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> = 0</td></tr>
<tr class="separator:ae762e8247e4d80c00810c0fc0bf942a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99503e866a4edf7acc31209e55138462"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a></td></tr>
<tr class="separator:a99503e866a4edf7acc31209e55138462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0577a52698a647c7c617a96badb379c8"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a></td></tr>
<tr class="separator:a0577a52698a647c7c617a96badb379c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Diary is connected to the player avatar. </p>
<p>The player is able to add new pages. Every page saves the current character progression and shows the improvements compared to the previous pages. The player is also able to add a Text in every page.</p>

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00076">76</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a86422a12599b8270949114da84153288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86422a12599b8270949114da84153288">&#9670;&nbsp;</a></span>diary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">diary::diary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00619">619</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;{</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02684">character.h:2684</a></div></div>
<div class="ttc" id="aclassdiary_html_a8d8461f55fc270d98364c4c181a74a06"><div class="ttname"><a href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">diary::owner</a></div><div class="ttdeci">std::string owner</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00081">diary.h:81</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="character_8h_source.html#l02684">Character::name</a>, and <a class="el" href="diary_8h_source.html#l00081">owner</a>.</p>

</div>
</div>
<a id="a90a98b4baa9604353f14fb6b54e2b5ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a98b4baa9604353f14fb6b54e2b5ab">&#9670;&nbsp;</a></span>~diary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual diary::~diary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa75c99b1a0c89fbb255151d775718973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa75c99b1a0c89fbb255151d775718973">&#9670;&nbsp;</a></span>add_to_change_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::add_to_change_list </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>desc</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00081">81</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span>( !desc.empty() ) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a>[<a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>.size()] = desc;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>.push_back( entry );</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_a0577a52698a647c7c617a96badb379c8"><div class="ttname"><a href="classdiary.html#a0577a52698a647c7c617a96badb379c8">diary::desc_map</a></div><div class="ttdeci">std::map&lt; int, std::string &gt; desc_map</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00090">diary.h:90</a></div></div>
<div class="ttc" id="aclassdiary_html_a99503e866a4edf7acc31209e55138462"><div class="ttname"><a href="classdiary.html#a99503e866a4edf7acc31209e55138462">diary::change_list</a></div><div class="ttdeci">std::vector&lt; std::string &gt; change_list</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00088">diary.h:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00088">change_list</a>, and <a class="el" href="diary_8h_source.html#l00090">desc_map</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00198">bionic_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00255">kill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00138">mission_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00511">prof_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00344">skill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00089">spell_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00454">stat_changes()</a>, and <a class="el" href="diary_8cpp_source.html#l00392">trait_changes()</a>.</p>

</div>
</div>
<a id="afaefc266f94c291a2b97f81730b3eedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaefc266f94c291a2b97f81730b3eedd">&#9670;&nbsp;</a></span>bionic_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::bionic_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00198">198</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.empty() ) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bionics&quot;</span> ) );</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a> ) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="keyword">const</span> <a class="code" href="structbionic__data.html">bionic_data</a> &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> = elem.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.name.translated(), <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.description.translated() );</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.empty() ) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a> ) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span>( std::find( prevpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.begin(), prevpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.end(),</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               elem ) == prevpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.end() ) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;New Bionics: &quot;</span> ) );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structbionic__data.html">bionic_data</a> &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> = elem.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.name.translated(), <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.description.translated() );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span>( !prevpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.empty() ) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> &amp;elem : prevpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a> ) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">if</span>( std::find( currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.begin(), currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.end(),</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                               elem ) == currpage-&gt;<a class="code" href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">bionics</a>.end() ) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lost Bionics: &quot;</span> ) );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structbionic__data.html">bionic_data</a> &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> = elem.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.name.translated(), <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>.description.translated() );</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_aa20c00b8b9dd1a1375f85d40e205d488"><div class="ttname"><a href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">diary::get_page_ptr</a></div><div class="ttdeci">diary_page * get_page_ptr(int offset=0)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00072">diary.cpp:72</a></div></div>
<div class="ttc" id="aclassdiary_html_aa75c99b1a0c89fbb255151d775718973"><div class="ttname"><a href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">diary::add_to_change_list</a></div><div class="ttdeci">void add_to_change_list(const std::string &amp;entry, const std::string &amp;desc=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00081">diary.cpp:81</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; bionic_data &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
<div class="ttc" id="astructbionic__data_html"><div class="ttname"><a href="structbionic__data.html">bionic_data</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00033">bionics.h:33</a></div></div>
<div class="ttc" id="astructdiary__page_html"><div class="ttname"><a href="structdiary__page.html">diary_page</a></div><div class="ttdoc">diary page, to save current character progression</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00028">diary.h:28</a></div></div>
<div class="ttc" id="astructdiary__page_html_aa8970073b1e846c46b2d3e9932751143"><div class="ttname"><a href="structdiary__page.html#aa8970073b1e846c46b2d3e9932751143">diary_page::bionics</a></div><div class="ttdeci">std::vector&lt; bionic_id &gt; bionics</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00060">diary.h:60</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="diary_8h_source.html#l00060">diary_page::bionics</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, and <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a7ca50176a183179503d64dd627035c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca50176a183179503d64dd627035c41">&#9670;&nbsp;</a></span>death_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diary::death_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00610">610</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordtype">bool</span> lasttime = <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Open diary for the last time?&quot;</span> ) );</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span>( lasttime ) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="classdiary.html#a66d05a576c8306885cb621ef7995e625">show_diary_ui</a>( <span class="keyword">this</span> );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="classdiary.html#a9d4806a8994812ed8181043029438d50">export_to_txt</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_a66d05a576c8306885cb621ef7995e625"><div class="ttname"><a href="classdiary.html#a66d05a576c8306885cb621ef7995e625">diary::show_diary_ui</a></div><div class="ttdeci">static void show_diary_ui(diary *c_diary)</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00173">diary_ui.cpp:173</a></div></div>
<div class="ttc" id="aclassdiary_html_a9d4806a8994812ed8181043029438d50"><div class="ttname"><a href="classdiary.html#a9d4806a8994812ed8181043029438d50">diary::export_to_txt</a></div><div class="ttdeci">void export_to_txt(bool lastexport=false)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00673">diary.cpp:673</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l02982">game::death_screen()</a>.</p>

</div>
</div>
<a id="a366422f3e1571b56a7eb25b2aa4fcbda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a366422f3e1571b56a7eb25b2aa4fcbda">&#9670;&nbsp;</a></span>delete_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::delete_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00665">665</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() ) ) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.erase( <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.begin() + <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <a class="code" href="classdiary.html#a64c67ffc6071a9ea523839867ced1e19">set_opened_page</a>( <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> - 1 );</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_a64c67ffc6071a9ea523839867ced1e19"><div class="ttname"><a href="classdiary.html#a64c67ffc6071a9ea523839867ced1e19">diary::set_opened_page</a></div><div class="ttdeci">int set_opened_page(int pagenum)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00051">diary.cpp:51</a></div></div>
<div class="ttc" id="aclassdiary_html_a97ad2dbccb0c00daf2921a5e7cf69b9d"><div class="ttname"><a href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">diary::pages</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; diary_page &gt; &gt; pages</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00083">diary.h:83</a></div></div>
<div class="ttc" id="aclassdiary_html_ae762e8247e4d80c00810c0fc0bf942a2"><div class="ttname"><a href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">diary::opened_page</a></div><div class="ttdeci">int opened_page</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00086">diary.h:86</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00086">opened_page</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, and <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a4563d2028f1c80fa64445aa4c14d2c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4563d2028f1c80fa64445aa4c14d2c14">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diary::deserialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonValue.html">JsonValue</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00758">758</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;{</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="classJsonObject.html">JsonObject</a> data = jsin.<a class="code" href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">get_object</a>();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        data.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;owner&quot;</span>, <a class="code" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a> );</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.clear();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> elem : data.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( <span class="stringliteral">&quot;pages&quot;</span> ) ) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            std::unique_ptr&lt;diary_page&gt; page( <span class="keyword">new</span> <a class="code" href="structdiary__page.html">diary_page</a>() );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            page-&gt;m_text = elem.get_string( <span class="stringliteral">&quot;text&quot;</span> );</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            elem.read( <span class="stringliteral">&quot;turn&quot;</span>, page-&gt;turn );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            elem.read( <span class="stringliteral">&quot;time_accuracy&quot;</span>, page-&gt;time_acc );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            elem.read( <span class="stringliteral">&quot;active&quot;</span>, page-&gt;mission_active );</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            elem.read( <span class="stringliteral">&quot;completed&quot;</span>, page-&gt;mission_completed );</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="comment">// TODO: migrate &quot;faild&quot; to &quot;failed&quot;?</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            elem.read( <span class="stringliteral">&quot;faild&quot;</span>, page-&gt;mission_failed );</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            elem.read( <span class="stringliteral">&quot;kills&quot;</span>, page-&gt;kills );</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            elem.read( <span class="stringliteral">&quot;npc_kills&quot;</span>, page-&gt;npc_kills );</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            elem.read( <span class="stringliteral">&quot;male&quot;</span>, page-&gt;male );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            elem.read( <span class="stringliteral">&quot;str&quot;</span>, page-&gt;strength );</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            elem.read( <span class="stringliteral">&quot;dex&quot;</span>, page-&gt;dexterity );</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            elem.read( <span class="stringliteral">&quot;int&quot;</span>, page-&gt;intelligence );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            elem.read( <span class="stringliteral">&quot;per&quot;</span>, page-&gt;perception );</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            elem.read( <span class="stringliteral">&quot;traits&quot;</span>, page-&gt;traits );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            elem.read( <span class="stringliteral">&quot;bionics&quot;</span>, page-&gt;bionics );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            elem.read( <span class="stringliteral">&quot;spells&quot;</span>, page-&gt;known_spells );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            elem.read( <span class="stringliteral">&quot;skillsL&quot;</span>, page-&gt;skillsL );</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            elem.read( <span class="stringliteral">&quot;known_profs&quot;</span>, page-&gt;known_profs );</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            elem.read( <span class="stringliteral">&quot;learning_profs&quot;</span>, page-&gt;learning_profs );</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            elem.read( <span class="stringliteral">&quot;max_power_level&quot;</span>, page-&gt;max_power_level );</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">diary::pages</a>.push_back( std::move( page ) );</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code" href="classJsonError.html">JsonError</a> &amp;e ) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div>
<div class="ttc" id="aclassJsonError_html"><div class="ttname"><a href="classJsonError.html">JsonError</a></div><div class="ttdef"><b>Definition:</b> <a href="json__error_8h_source.html#l00007">json_error.h:8</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
<div class="ttc" id="aclassJsonValue_html_aa90309342403c2e86b358ce996e34a1f"><div class="ttname"><a href="classJsonValue.html#aa90309342403c2e86b358ce996e34a1f">JsonValue::get_object</a></div><div class="ttdeci">JsonObject get_object() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00268">flexbuffer_json-inl.h:268</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00268">JsonValue::get_object()</a>, <a class="el" href="diary_8h_source.html#l00081">owner</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, and <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00747">load()</a>.</p>

</div>
</div>
<a id="aa0b9c6e242815fa528bdadf4e2a678c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0b9c6e242815fa528bdadf4e2a678c2">&#9670;&nbsp;</a></span>edit_page_ui()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::edit_page_ui </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; <a class="el" href="classcatacurses_1_1window.html">catacurses::window</a>()&gt; &amp;&#160;</td>
          <td class="paramname"><em>create_window</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary__ui_8cpp_source.html#l00379">379</a> of file <a class="el" href="diary__ui_8cpp_source.html">diary_ui.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// Modify the stored text so the new text is displayed after exiting from</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// the editor window and before confirming or canceling the y/n query.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    std::string &amp;new_text = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>()-&gt;<a class="code" href="structdiary__page.html#a5d054f340835490c5243fa62addffb4e">m_text</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">const</span> std::string old_text = new_text;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classstring__editor__window.html">string_editor_window</a> ed( create_window, new_text );</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keyword">const</span> std::pair&lt;bool, std::string&gt; result = ed.query_string();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        new_text = result.second;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment">// Confirmed or unchanged</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span>( result.first || old_text == new_text ) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keyword">const</span> <a class="code" href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1">query_ynq_result</a> res = <a class="code" href="output_8cpp.html#a790f6d156ed386a8ae4d4ee4eb9eb739">query_ynq</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Save entry?&quot;</span> ) );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span>( res == <a class="code" href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1aa6105c0a611b41b08f1209506350279e">query_ynq_result::yes</a> ) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( res == <a class="code" href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1a7fa3b767c460b54a2be4d49030b349c7">query_ynq_result::no</a> ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            new_text = old_text;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    } <span class="keywordflow">while</span>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="ttc" id="aclassstring__editor__window_html"><div class="ttname"><a href="classstring__editor__window.html">string_editor_window</a></div><div class="ttdoc">Editor, to let the player edit text.</div><div class="ttdef"><b>Definition:</b> <a href="string__editor__window_8h_source.html#l00027">string_editor_window.h:28</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a790f6d156ed386a8ae4d4ee4eb9eb739"><div class="ttname"><a href="output_8cpp.html#a790f6d156ed386a8ae4d4ee4eb9eb739">query_ynq</a></div><div class="ttdeci">query_ynq_result query_ynq(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00851">output.cpp:851</a></div></div>
<div class="ttc" id="aoutput_8h_html_a8842f7f77abe90fa51f3a194e9a635e1"><div class="ttname"><a href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1">query_ynq_result</a></div><div class="ttdeci">query_ynq_result</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00431">output.h:431</a></div></div>
<div class="ttc" id="aoutput_8h_html_a8842f7f77abe90fa51f3a194e9a635e1a7fa3b767c460b54a2be4d49030b349c7"><div class="ttname"><a href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1a7fa3b767c460b54a2be4d49030b349c7">query_ynq_result::no</a></div><div class="ttdeci">@ no</div></div>
<div class="ttc" id="aoutput_8h_html_a8842f7f77abe90fa51f3a194e9a635e1aa6105c0a611b41b08f1209506350279e"><div class="ttname"><a href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1aa6105c0a611b41b08f1209506350279e">query_ynq_result::yes</a></div><div class="ttdeci">@ yes</div></div>
<div class="ttc" id="astructdiary__page_html_a5d054f340835490c5243fa62addffb4e"><div class="ttname"><a href="structdiary__page.html#a5d054f340835490c5243fa62addffb4e">diary_page::m_text</a></div><div class="ttdeci">std::string m_text</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00032">diary.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00032">diary_page::m_text</a>, <a class="el" href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1a7fa3b767c460b54a2be4d49030b349c7">no</a>, <a class="el" href="string__editor__window_8cpp_source.html#l00350">string_editor_window::query_string()</a>, <a class="el" href="output_8cpp_source.html#l00851">query_ynq()</a>, and <a class="el" href="output_8h.html#a8842f7f77abe90fa51f3a194e9a635e1aa6105c0a611b41b08f1209506350279e">yes</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a9d4806a8994812ed8181043029438d50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4806a8994812ed8181043029438d50">&#9670;&nbsp;</a></span>export_to_txt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::export_to_txt </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>lastexport</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00673">673</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    std::ofstream myfile;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    std::string path = lastexport ? <a class="code" href="namespacePATH__INFO.html#a182bc8dae734699bdf8e6942592366bc">PATH_INFO::memorialdir</a>() : <a class="code" href="namespacePATH__INFO.html">PATH_INFO</a>::<a class="code" href="namespacePATH__INFO.html#afc693c43111356ec987070ea63429bb4">world_base_save_path</a>();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    path += <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a> + <span class="stringliteral">&quot;s_diary.txt&quot;</span>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    myfile.open( fs::u8path( path ) );</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; static_cast&lt;int&gt;( <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() ); i++ ) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="classdiary.html#a64c67ffc6071a9ea523839867ced1e19">set_opened_page</a>( i );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keyword">const</span> <a class="code" href="structdiary__page.html">diary_page</a> page = *<a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        myfile &lt;&lt; <a class="code" href="classdiary.html#adfda5ef9ded514952fc899340a36d146">get_head_text</a>() + <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">for</span>( std::string &amp;str : this-&gt;<a class="code" href="classdiary.html#a6f04f66b87bac6fe12e292805908071c">get_change_list</a>() ) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            myfile &lt;&lt; <a class="code" href="output_8cpp.html#ab34a0072441c06a8f25f85710f7bb523">remove_color_tags</a>( str ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        std::vector&lt;std::string&gt; <a class="code" href="classfolded__text.html">folded_text</a> = <a class="code" href="output_8cpp.html#aea67d56cef07017be061e1ceefee80df">foldstring</a>( page.<a class="code" href="structdiary__page.html#a5d054f340835490c5243fa62addffb4e">m_text</a>, 50 );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;<a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> : <a class="code" href="classfolded__text.html">folded_text</a> ) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            myfile &lt;&lt; <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        myfile &lt;&lt;  <span class="stringliteral">&quot;\n\n\n&quot;</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    myfile.close();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_a6f04f66b87bac6fe12e292805908071c"><div class="ttname"><a href="classdiary.html#a6f04f66b87bac6fe12e292805908071c">diary::get_change_list</a></div><div class="ttdeci">std::vector&lt; std::string &gt; get_change_list()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00549">diary.cpp:549</a></div></div>
<div class="ttc" id="aclassdiary_html_adfda5ef9ded514952fc899340a36d146"><div class="ttname"><a href="classdiary.html#adfda5ef9ded514952fc899340a36d146">diary::get_head_text</a></div><div class="ttdeci">std::string get_head_text()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00586">diary.cpp:586</a></div></div>
<div class="ttc" id="aclassfolded__text_html"><div class="ttname"><a href="classfolded__text.html">folded_text</a></div><div class="ttdef"><b>Definition:</b> <a href="string__editor__window_8cpp_source.html#l00048">string_editor_window.cpp:49</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
<div class="ttc" id="anamespacePATH__INFO_html"><div class="ttname"><a href="namespacePATH__INFO.html">PATH_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="path__info_8h_source.html#l00018">path_info.h:19</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a182bc8dae734699bdf8e6942592366bc"><div class="ttname"><a href="namespacePATH__INFO.html#a182bc8dae734699bdf8e6942592366bc">PATH_INFO::memorialdir</a></div><div class="ttdeci">std::string memorialdir()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00330">path_info.cpp:330</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_afc693c43111356ec987070ea63429bb4"><div class="ttname"><a href="namespacePATH__INFO.html#afc693c43111356ec987070ea63429bb4">PATH_INFO::world_base_save_path</a></div><div class="ttdeci">std::string world_base_save_path()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13258">game.cpp:13258</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab34a0072441c06a8f25f85710f7bb523"><div class="ttname"><a href="output_8cpp.html#ab34a0072441c06a8f25f85710f7bb523">remove_color_tags</a></div><div class="ttdeci">std::string remove_color_tags(const std::string_view s)</div><div class="ttdoc">Removes the color tags from the input string.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00200">output.cpp:200</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aea67d56cef07017be061e1ceefee80df"><div class="ttname"><a href="output_8cpp.html#aea67d56cef07017be061e1ceefee80df">foldstring</a></div><div class="ttdeci">std::vector&lt; std::string &gt; foldstring(const std::string &amp;str, int width, const char split)</div><div class="ttdoc">Split the input text into separate lines and wrap long lines.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00123">output.cpp:123</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="output_8cpp_source.html#l00123">foldstring()</a>, <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>, <a class="el" href="diary_8cpp_source.html#l00586">get_head_text()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="diary_8h_source.html#l00032">diary_page::m_text</a>, <a class="el" href="path__info_8cpp_source.html#l00330">PATH_INFO::memorialdir()</a>, <a class="el" href="diary_8h_source.html#l00081">owner</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="output_8cpp_source.html#l00200">remove_color_tags()</a>, <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>, and <a class="el" href="game_8cpp_source.html#l13258">PATH_INFO::world_base_save_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00610">death_entry()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a6f04f66b87bac6fe12e292805908071c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f04f66b87bac6fe12e292805908071c">&#9670;&nbsp;</a></span>get_change_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; diary::get_change_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00549">549</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;{</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>.empty() ) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="classdiary.html#a9025dec5b103cd066b8bdb8e45f2027f">stat_changes</a>();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="classdiary.html#aaf3223f044433acc53d75b76a0c771c3">skill_changes</a>();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="classdiary.html#ac0bf796d6ac303ece50170436c6fa415">prof_changes</a>();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="classdiary.html#a6f11125e72e6d7feff26ced914142a85">trait_changes</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="classdiary.html#afaefc266f94c291a2b97f81730b3eedd">bionic_changes</a>();</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="classdiary.html#a5ff278fdf400df7ead4de72650753ffb">spell_changes</a>();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="classdiary.html#a8078f58e8ccb22dbed7f3da9f524cc57">mission_changes</a>();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="classdiary.html#ae6a0abb001ad2a79c20ecf2cb7d1b6bd">kill_changes</a>();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="ttc" id="aclassdiary_html_a5ff278fdf400df7ead4de72650753ffb"><div class="ttname"><a href="classdiary.html#a5ff278fdf400df7ead4de72650753ffb">diary::spell_changes</a></div><div class="ttdeci">void spell_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00089">diary.cpp:89</a></div></div>
<div class="ttc" id="aclassdiary_html_a6f11125e72e6d7feff26ced914142a85"><div class="ttname"><a href="classdiary.html#a6f11125e72e6d7feff26ced914142a85">diary::trait_changes</a></div><div class="ttdeci">void trait_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00392">diary.cpp:392</a></div></div>
<div class="ttc" id="aclassdiary_html_a8078f58e8ccb22dbed7f3da9f524cc57"><div class="ttname"><a href="classdiary.html#a8078f58e8ccb22dbed7f3da9f524cc57">diary::mission_changes</a></div><div class="ttdeci">void mission_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00138">diary.cpp:138</a></div></div>
<div class="ttc" id="aclassdiary_html_a9025dec5b103cd066b8bdb8e45f2027f"><div class="ttname"><a href="classdiary.html#a9025dec5b103cd066b8bdb8e45f2027f">diary::stat_changes</a></div><div class="ttdeci">void stat_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00454">diary.cpp:454</a></div></div>
<div class="ttc" id="aclassdiary_html_aaf3223f044433acc53d75b76a0c771c3"><div class="ttname"><a href="classdiary.html#aaf3223f044433acc53d75b76a0c771c3">diary::skill_changes</a></div><div class="ttdeci">void skill_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00344">diary.cpp:344</a></div></div>
<div class="ttc" id="aclassdiary_html_ac0bf796d6ac303ece50170436c6fa415"><div class="ttname"><a href="classdiary.html#ac0bf796d6ac303ece50170436c6fa415">diary::prof_changes</a></div><div class="ttdeci">void prof_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00511">diary.cpp:511</a></div></div>
<div class="ttc" id="aclassdiary_html_ae6a0abb001ad2a79c20ecf2cb7d1b6bd"><div class="ttname"><a href="classdiary.html#ae6a0abb001ad2a79c20ecf2cb7d1b6bd">diary::kill_changes</a></div><div class="ttdeci">void kill_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00255">diary.cpp:255</a></div></div>
<div class="ttc" id="aclassdiary_html_afaefc266f94c291a2b97f81730b3eedd"><div class="ttname"><a href="classdiary.html#afaefc266f94c291a2b97f81730b3eedd">diary::bionic_changes</a></div><div class="ttdeci">void bionic_changes()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00198">diary.cpp:198</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8cpp_source.html#l00198">bionic_changes()</a>, <a class="el" href="diary_8h_source.html#l00088">change_list</a>, <a class="el" href="diary_8cpp_source.html#l00255">kill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00138">mission_changes()</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="diary_8cpp_source.html#l00511">prof_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00344">skill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00089">spell_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00454">stat_changes()</a>, and <a class="el" href="diary_8cpp_source.html#l00392">trait_changes()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="diary_8cpp_source.html#l00567">get_desc_map()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a4d8673546132edabe134be1168c73ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8673546132edabe134be1168c73ea4">&#9670;&nbsp;</a></span>get_desc_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::string &gt; diary::get_desc_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00567">567</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;{</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a>.empty() ) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="classdiary.html#a6f04f66b87bac6fe12e292805908071c">get_change_list</a>();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00090">desc_map</a>, and <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="adfda5ef9ded514952fc899340a36d146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfda5ef9ded514952fc899340a36d146">&#9670;&nbsp;</a></span>get_head_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string diary::get_head_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00586">586</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keyword">const</span> <a class="code" href="structdiary__page.html">diary_page</a> *prevpageptr = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keyword">const</span> <a class="code" href="structdiary__page.html">diary_page</a> *currpageptr = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> prev_turn = ( prevpageptr != nullptr ) ? prevpageptr-&gt;<a class="code" href="structdiary__page.html#a3e232d6bcca57fd3eff07393d60edd0d">turn</a> : <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> turn_diff = currpageptr-&gt;<a class="code" href="structdiary__page.html#a3e232d6bcca57fd3eff07393d60edd0d">turn</a> - prev_turn;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        std::string time_diff_text;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> != 0 ) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            time_diff_text = <a class="code" href="calendar_8cpp.html#a713d07077e40d050ba2d4592d23c59b0">get_diary_time_since_str</a>( turn_diff, currpageptr-&gt;<a class="code" href="structdiary__page.html#afade24162f81b4c10393606c5779db45">time_acc</a> );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment">//~ Head text of a diary page</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">//~ %1$d is the current page number, %2$d is the number of pages in total</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">//~ %3$s is the time point when the current page was created</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">//~ %4$s is time relative to the previous page</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Entry: %1$d/%2$d, %3$s, %4$s&quot;</span> ),</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                              <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> + 1, <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size(),</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                              <a class="code" href="calendar_8cpp.html#aa46a241af36daedd3bb135ce1adf9411">get_diary_time_str</a>( currpageptr-&gt;<a class="code" href="structdiary__page.html#a3e232d6bcca57fd3eff07393d60edd0d">turn</a>, currpageptr-&gt;<a class="code" href="structdiary__page.html#afade24162f81b4c10393606c5779db45">time_acc</a> ),</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                              time_diff_text );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a713d07077e40d050ba2d4592d23c59b0"><div class="ttname"><a href="calendar_8cpp.html#a713d07077e40d050ba2d4592d23c59b0">get_diary_time_since_str</a></div><div class="ttdeci">std::string get_diary_time_since_str(const time_duration &amp;turn_diff, time_accuracy acc)</div><div class="ttdoc">Time approximation based on the player's timekeeping capability, formatted for diary pages.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00847">calendar.cpp:847</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aa46a241af36daedd3bb135ce1adf9411"><div class="ttname"><a href="calendar_8cpp.html#aa46a241af36daedd3bb135ce1adf9411">get_diary_time_str</a></div><div class="ttdeci">std::string get_diary_time_str(const time_point &amp;turn, time_accuracy acc)</div><div class="ttdoc">Time approximation based on the player's timekeeping capability, formatted for diary pages.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00891">calendar.cpp:891</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00459">calendar.h:460</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a2830b54b0424fe452c0933f87d6201b3"><div class="ttname"><a href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a></div><div class="ttdeci">constexpr time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00541">calendar.h:541</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructdiary__page_html_a3e232d6bcca57fd3eff07393d60edd0d"><div class="ttname"><a href="structdiary__page.html#a3e232d6bcca57fd3eff07393d60edd0d">diary_page::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00036">diary.h:36</a></div></div>
<div class="ttc" id="astructdiary__page_html_afade24162f81b4c10393606c5779db45"><div class="ttname"><a href="structdiary__page.html#afade24162f81b4c10393606c5779db45">diary_page::time_acc</a></div><div class="ttdeci">time_accuracy time_acc</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00039">diary.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="calendar_8cpp_source.html#l00847">get_diary_time_since_str()</a>, <a class="el" href="calendar_8cpp_source.html#l00891">get_diary_time_str()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00086">opened_page</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="diary_8h_source.html#l00039">diary_page::time_acc</a>, <a class="el" href="diary_8h_source.html#l00036">diary_page::turn</a>, and <a class="el" href="calendar_8h_source.html#l00541">calendar::turn_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a9469d0b03b04b173f73beca4b853ed55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9469d0b03b04b173f73beca4b853ed55">&#9670;&nbsp;</a></span>get_opened_page_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int diary::get_opened_page_num </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00067">67</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00086">opened_page</a>.</p>

</div>
</div>
<a id="aa20c00b8b9dd1a1375f85d40e205d488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa20c00b8b9dd1a1375f85d40e205d488">&#9670;&nbsp;</a></span>get_page_ptr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdiary__page.html">diary_page</a> * diary::get_page_ptr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00072">72</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() &amp;&amp; <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> + offset &gt;= 0 ) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>[<a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> + offset].get();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00086">opened_page</a>, and <a class="el" href="diary_8h_source.html#l00083">pages</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00198">bionic_changes()</a>, <a class="el" href="diary__ui_8cpp_source.html#l00379">edit_page_ui()</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="diary_8cpp_source.html#l00586">get_head_text()</a>, <a class="el" href="diary_8cpp_source.html#l00577">get_page_text()</a>, <a class="el" href="diary_8cpp_source.html#l00255">kill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00138">mission_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00511">prof_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00623">set_page_text()</a>, <a class="el" href="diary_8cpp_source.html#l00344">skill_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00089">spell_changes()</a>, <a class="el" href="diary_8cpp_source.html#l00454">stat_changes()</a>, and <a class="el" href="diary_8cpp_source.html#l00392">trait_changes()</a>.</p>

</div>
</div>
<a id="aafbfa5ecd902193a34752d16009b2b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafbfa5ecd902193a34752d16009b2b0e">&#9670;&nbsp;</a></span>get_page_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string diary::get_page_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00577">577</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>()-&gt;<a class="code" href="structdiary__page.html#a5d054f340835490c5243fa62addffb4e">m_text</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00032">diary_page::m_text</a>, and <a class="el" href="diary_8h_source.html#l00083">pages</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a258954db4774907392c34f72e97d4276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a258954db4774907392c34f72e97d4276">&#9670;&nbsp;</a></span>get_pages_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; diary::get_pages_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00041">41</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    std::vector&lt;std::string&gt; result;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    result.reserve( <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() );</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">for</span>( std::unique_ptr&lt;diary_page&gt; &amp;n : <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a> ) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        result.push_back( <a class="code" href="calendar_8cpp.html#aa46a241af36daedd3bb135ce1adf9411">get_diary_time_str</a>( n-&gt;turn, n-&gt;time_acc ) );</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00891">get_diary_time_str()</a>, and <a class="el" href="diary_8h_source.html#l00083">pages</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="ae6a0abb001ad2a79c20ecf2cb7d1b6bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a0abb001ad2a79c20ecf2cb7d1b6bd">&#9670;&nbsp;</a></span>kill_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::kill_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00255">255</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a>.empty() ) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Kills: &quot;</span> ) );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;mtype&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a> ) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> &amp;m = elem.first.obj();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = m.<a class="code" href="structmtype.html#a6ad4c76593c4cd6423492169733885a1">color</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                std::string <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a> = m.<a class="code" href="structmtype.html#a38400904b6ae1207054cca44318d0426">sym</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                std::string nname = m.<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>( elem.second );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%4d &quot;</span>, elem.second ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a>,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                    <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> ) + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( nname, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> ), m.<a class="code" href="structmtype.html#abace25d482003f6cfc96e4ef98763eea">get_description</a>() );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">npc_kills</a>.empty() ) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;NPC Killed&quot;</span> ) );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;npc_name : currpage-&gt;<a class="code" href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">npc_kills</a> ) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%4d &quot;</span>, 1 ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;@ &quot;</span> + npc_name, <a class="code" href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a> ) );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a>.empty() ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;mtype&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a> ) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <span class="keyword">const</span> <a class="code" href="structmtype.html">mtype</a> &amp;m = elem.first.obj();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = m.<a class="code" href="structmtype.html#a6ad4c76593c4cd6423492169733885a1">color</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                std::string <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a> = m.<a class="code" href="structmtype.html#a38400904b6ae1207054cca44318d0426">sym</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                std::string nname = m.<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>( elem.second );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordtype">int</span> kills = elem.second;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keywordflow">if</span>( prevpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a>.count( elem.first ) &gt; 0 ) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> prevkills = prevpage-&gt;<a class="code" href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">kills</a>[elem.first];</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    <span class="keywordflow">if</span>( kills &gt; prevkills ) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Kills: &quot;</span> ) );</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                            flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        kills = kills - prevkills;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%4d &quot;</span>, kills ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a>,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                            <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> ) + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( nname, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> ), m.<a class="code" href="structmtype.html#abace25d482003f6cfc96e4ef98763eea">get_description</a>() );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Kills: &quot;</span> ) );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%4d &quot;</span>, kills ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a>,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> ) + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( nname, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> ), m.<a class="code" href="structmtype.html#abace25d482003f6cfc96e4ef98763eea">get_description</a>() );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">npc_kills</a>.empty() ) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;prev_npc_kills = prevpage-&gt;<a class="code" href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">npc_kills</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;npc_name : currpage-&gt;<a class="code" href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">npc_kills</a> ) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">if</span>( ( std::find( prev_npc_kills.begin(), prev_npc_kills.end(),</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                 npc_name ) == prev_npc_kills.end() ) ) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;NPC Killed: &quot;</span> ) );</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%4d &quot;</span>, 1 ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;@ &quot;</span> + npc_name, <a class="code" href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a> ) );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_a39fc218ef401d918701636583a85a168"><div class="ttname"><a href="color_8h.html#a39fc218ef401d918701636583a85a168">c_magenta</a></div><div class="ttdeci">#define c_magenta</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00023">color.h:23</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="aeditmap_8cpp_html_aad8315087dc1d0ef9212680412a20601"><div class="ttname"><a href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol</a></div><div class="ttdeci">static int symbol(const T_t &amp;t)</div></div>
<div class="ttc" id="astructdiary__page_html_a3077bb64c49d2a19d25b6b59fd21a0b6"><div class="ttname"><a href="structdiary__page.html#a3077bb64c49d2a19d25b6b59fd21a0b6">diary_page::npc_kills</a></div><div class="ttdeci">std::vector&lt; std::string &gt; npc_kills</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00047">diary.h:47</a></div></div>
<div class="ttc" id="astructdiary__page_html_abffa26498493ef5540ac4e4abe8e3361"><div class="ttname"><a href="structdiary__page.html#abffa26498493ef5540ac4e4abe8e3361">diary_page::kills</a></div><div class="ttdeci">std::map&lt; mtype_id, int &gt; kills</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00045">diary.h:45</a></div></div>
<div class="ttc" id="astructmtype_html"><div class="ttname"><a href="structmtype.html">mtype</a></div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00284">mtype.h:284</a></div></div>
<div class="ttc" id="astructmtype_html_a38400904b6ae1207054cca44318d0426"><div class="ttname"><a href="structmtype.html#a38400904b6ae1207054cca44318d0426">mtype::sym</a></div><div class="ttdeci">std::string sym</div><div class="ttdoc">UTF-8 encoded symbol, should be exactly one cell wide.</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00352">mtype.h:352</a></div></div>
<div class="ttc" id="astructmtype_html_a6ad4c76593c4cd6423492169733885a1"><div class="ttname"><a href="structmtype.html#a6ad4c76593c4cd6423492169733885a1">mtype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00480">mtype.h:480</a></div></div>
<div class="ttc" id="astructmtype_html_a9a8f4ead67d1836e3f4db624533af5aa"><div class="ttname"><a href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">mtype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00330">mtype.cpp:330</a></div></div>
<div class="ttc" id="astructmtype_html_abace25d482003f6cfc96e4ef98763eea"><div class="ttname"><a href="structmtype.html#abace25d482003f6cfc96e4ef98763eea">mtype::get_description</a></div><div class="ttdeci">std::string get_description() const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00503">mtype.cpp:503</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00023">c_magenta</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="mtype_8h_source.html#l00480">mtype::color</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="mtype_8cpp_source.html#l00503">mtype::get_description()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00045">diary_page::kills</a>, <a class="el" href="mtype_8cpp_source.html#l00330">mtype::nname()</a>, <a class="el" href="diary_8h_source.html#l00047">diary_page::npc_kills</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="mtype_8h_source.html#l00352">mtype::sym</a>, and <a class="el" href="editmap_8cpp.html#aad8315087dc1d0ef9212680412a20601">symbol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a09cb51c0f59fd2def93eaac8a0ebc20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09cb51c0f59fd2def93eaac8a0ebc20f">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diary::load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00747">747</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;{</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="catacharset_8cpp.html#ae8ff0664ea195486ad0940e9a64a2452">base64_encode</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().get_save_id() + <span class="stringliteral">&quot;_diary&quot;</span> );</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="classcata__path.html">cata_path</a> path = <a class="code" href="namespacePATH__INFO.html#a1b0930ad9a7e99b36648bc6c93c38836">PATH_INFO::world_base_save_path_path</a>() / ( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;.json&quot;</span> );</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="filesystem_8cpp.html#aea678a36e4bf1e9ff808c85f1f367d30">file_exist</a>( path ) ) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <a class="code" href="cata__utility_8cpp.html#a2acae4817a18f00b9df2c758dd42f385">read_from_file_json</a>( path, [&amp;]( <span class="keyword">const</span> <a class="code" href="classJsonValue.html">JsonValue</a> &amp; jv ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <a class="code" href="classdiary.html#a4563d2028f1c80fa64445aa4c14d2c14">deserialize</a>( jv );</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        } );</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_a2acae4817a18f00b9df2c758dd42f385"><div class="ttname"><a href="cata__utility_8cpp.html#a2acae4817a18f00b9df2c758dd42f385">read_from_file_json</a></div><div class="ttdeci">bool read_from_file_json(const cata_path &amp;path, const std::function&lt; void(const JsonValue &amp;)&gt; &amp;reader)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00562">cata_utility.cpp:562</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_ae8ff0664ea195486ad0940e9a64a2452"><div class="ttname"><a href="catacharset_8cpp.html#ae8ff0664ea195486ad0940e9a64a2452">base64_encode</a></div><div class="ttdeci">std::string base64_encode(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00233">catacharset.cpp:233</a></div></div>
<div class="ttc" id="aclassJsonValue_html"><div class="ttname"><a href="classJsonValue.html">JsonValue</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00166">flexbuffer_json.h:167</a></div></div>
<div class="ttc" id="aclasscata__path_html"><div class="ttname"><a href="classcata__path.html">cata_path</a></div><div class="ttdoc">One of the problems of filesystem paths is they lack contextual awareness of 'where' they are.</div><div class="ttdef"><b>Definition:</b> <a href="cata__path_8h_source.html#l00033">cata_path.h:34</a></div></div>
<div class="ttc" id="aclassdiary_html_a4563d2028f1c80fa64445aa4c14d2c14"><div class="ttname"><a href="classdiary.html#a4563d2028f1c80fa64445aa4c14d2c14">diary::deserialize</a></div><div class="ttdeci">void deserialize(const JsonValue &amp;jsin)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00758">diary.cpp:758</a></div></div>
<div class="ttc" id="afilesystem_8cpp_html_aea678a36e4bf1e9ff808c85f1f367d30"><div class="ttname"><a href="filesystem_8cpp.html#aea678a36e4bf1e9ff808c85f1f367d30">file_exist</a></div><div class="ttdeci">bool file_exist(const std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00115">filesystem.cpp:115</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_a1b0930ad9a7e99b36648bc6c93c38836"><div class="ttname"><a href="namespacePATH__INFO.html#a1b0930ad9a7e99b36648bc6c93c38836">PATH_INFO::world_base_save_path_path</a></div><div class="ttdeci">cata_path world_base_save_path_path()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13266">game.cpp:13266</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="catacharset_8cpp_source.html#l00233">base64_encode()</a>, <a class="el" href="diary_8cpp_source.html#l00758">deserialize()</a>, <a class="el" href="filesystem_8cpp_source.html#l00115">file_exist()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00562">read_from_file_json()</a>, and <a class="el" href="game_8cpp_source.html#l13266">PATH_INFO::world_base_save_path_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l03070">game::load()</a>.</p>

</div>
</div>
<a id="a8078f58e8ccb22dbed7f3da9f524cc57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8078f58e8ccb22dbed7f3da9f524cc57">&#9670;&nbsp;</a></span>mission_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::mission_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00138">138</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keyword">auto</span> add_missions = [&amp;]( <span class="keyword">const</span> std::string &amp; <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> std::vector&lt;int&gt; *missions ) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span>( !missions-&gt;empty() ) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> uid : *missions ) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmission.html">mission</a> *miss = <a class="code" href="classmission.html#a3c86e5c0487cdc73eb6a921ac1161336">mission::find</a>( uid );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">if</span>( miss != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                            flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( miss-&gt;<a class="code" href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">name</a>(), miss-&gt;<a class="code" href="classmission.html#abded6444dc00a68d5f63a9592c1e78c7">get_description</a>() );</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        };</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Active missions:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#a84e30f2b2061a10da06b66eebc6d7090">mission_active</a> );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Completed missions:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#ab3375716049eb912412fd05a77fd39d6">mission_completed</a> );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failed missions:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#aac2eb1333c20be6d693bb44ca0c6ff31">mission_failed</a> );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keyword">auto</span> add_missions = [&amp;]( <span class="keyword">const</span> std::string &amp; <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">const</span> std::vector&lt;int&gt; *missions,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keyword">const</span> std::vector&lt;int&gt; *prevmissions ) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keywordtype">int</span> uid : *missions ) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">if</span>( std::find( prevmissions-&gt;begin(), prevmissions-&gt;end(), uid ) == prevmissions-&gt;end() ) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmission.html">mission</a> *miss = <a class="code" href="classmission.html#a3c86e5c0487cdc73eb6a921ac1161336">mission::find</a>( uid );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    <span class="keywordflow">if</span>( miss != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                            flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( miss-&gt;<a class="code" href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">name</a>(), miss-&gt;<a class="code" href="classmission.html#abded6444dc00a68d5f63a9592c1e78c7">get_description</a>() );</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        };</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;New missions:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#a84e30f2b2061a10da06b66eebc6d7090">mission_active</a>, &amp;prevpage-&gt;<a class="code" href="structdiary__page.html#a84e30f2b2061a10da06b66eebc6d7090">mission_active</a> );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;New completed missions:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#ab3375716049eb912412fd05a77fd39d6">mission_completed</a>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                      &amp;prevpage-&gt;<a class="code" href="structdiary__page.html#ab3375716049eb912412fd05a77fd39d6">mission_completed</a> );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        add_missions( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;New failed:&quot;</span> ), &amp;currpage-&gt;<a class="code" href="structdiary__page.html#aac2eb1333c20be6d693bb44ca0c6ff31">mission_failed</a>, &amp;prevpage-&gt;<a class="code" href="structdiary__page.html#aac2eb1333c20be6d693bb44ca0c6ff31">mission_failed</a> );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="ttc" id="aclassmission_html"><div class="ttname"><a href="classmission.html">mission</a></div><div class="ttdef"><b>Definition:</b> <a href="mission_8h_source.html#l00272">mission.h:273</a></div></div>
<div class="ttc" id="aclassmission_html_a3c86e5c0487cdc73eb6a921ac1161336"><div class="ttname"><a href="classmission.html#a3c86e5c0487cdc73eb6a921ac1161336">mission::find</a></div><div class="ttdeci">static mission * find(int id, bool ok_missing=false)</div><div class="ttdoc">Returns the mission with the matching id (uid).</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00087">mission.cpp:87</a></div></div>
<div class="ttc" id="aclassmission_html_abded6444dc00a68d5f63a9592c1e78c7"><div class="ttname"><a href="classmission.html#abded6444dc00a68d5f63a9592c1e78c7">mission::get_description</a></div><div class="ttdeci">std::string get_description() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00699">mission.cpp:699</a></div></div>
<div class="ttc" id="aclassmission_html_aee1d08a5297b5b9117cf5bf33b960c53"><div class="ttname"><a href="classmission.html#aee1d08a5297b5b9117cf5bf33b960c53">mission::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00824">mission.cpp:824</a></div></div>
<div class="ttc" id="astructdiary__page_html_a84e30f2b2061a10da06b66eebc6d7090"><div class="ttname"><a href="structdiary__page.html#a84e30f2b2061a10da06b66eebc6d7090">diary_page::mission_active</a></div><div class="ttdeci">std::vector&lt; int &gt; mission_active</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00042">diary.h:42</a></div></div>
<div class="ttc" id="astructdiary__page_html_aac2eb1333c20be6d693bb44ca0c6ff31"><div class="ttname"><a href="structdiary__page.html#aac2eb1333c20be6d693bb44ca0c6ff31">diary_page::mission_failed</a></div><div class="ttdeci">std::vector&lt; int &gt; mission_failed</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00043">diary.h:43</a></div></div>
<div class="ttc" id="astructdiary__page_html_ab3375716049eb912412fd05a77fd39d6"><div class="ttname"><a href="structdiary__page.html#ab3375716049eb912412fd05a77fd39d6">diary_page::mission_completed</a></div><div class="ttdeci">std::vector&lt; int &gt; mission_completed</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00041">diary.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="mission_8cpp_source.html#l00087">mission::find()</a>, <a class="el" href="mission_8cpp_source.html#l00699">mission::get_description()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00042">diary_page::mission_active</a>, <a class="el" href="diary_8h_source.html#l00041">diary_page::mission_completed</a>, <a class="el" href="diary_8h_source.html#l00043">diary_page::mission_failed</a>, <a class="el" href="mission_8cpp_source.html#l00824">mission::name()</a>, and <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a48a0cea09069099df5f5100a385ae3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48a0cea09069099df5f5100a385ae3db">&#9670;&nbsp;</a></span>new_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::new_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00628">628</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    std::unique_ptr&lt;diary_page&gt; page( <span class="keyword">new</span> <a class="code" href="structdiary__page.html">diary_page</a>() );</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    page -&gt; m_text = std::string();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    page -&gt; <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">turn</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    page -&gt; kills = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> -&gt;get_kill_tracker().kills;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    page -&gt; npc_kills = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_kill_tracker().npc_kills;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classavatar.html">avatar</a> *<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = &amp;<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    page -&gt; time_acc = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;has_watch() ? <a class="code" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9aba7de5bc6888294e5884b024a4c894f1">time_accuracy::FULL</a> :</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                       <a class="code" href="group__Weather.html#ga58330ad190bff4e811a7a9a21666bbf4">is_creature_outside</a>( *<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> ) ? <a class="code" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9afba5cdfa4bcb408f641c743519a0fe19">time_accuracy::PARTIAL</a> : <a class="code" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9ab50339a10e1de285ac99d4c3990b8693">time_accuracy::NONE</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    page -&gt; mission_completed = <a class="code" href="classmission.html#a0f6bcb9fcb282e5c86af19de376c9839">mission::to_uid_vector</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_completed_missions() );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    page -&gt; mission_active = <a class="code" href="classmission.html#a0f6bcb9fcb282e5c86af19de376c9839">mission::to_uid_vector</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_active_missions() );</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    page -&gt; mission_failed = <a class="code" href="classmission.html#a0f6bcb9fcb282e5c86af19de376c9839">mission::to_uid_vector</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_failed_missions() );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    page -&gt; <a class="code" href="newcharacter_8cpp.html#a1d22ab3ab1f5b7b3d7b9491dcd8787b4">male</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;male;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    page-&gt;strength = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_str_base();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    page-&gt;dexterity = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_dex_base();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    page-&gt;intelligence = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_int_base();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    page-&gt;perception = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_per_base();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    page-&gt;traits = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_mutations_variants( <span class="keyword">false</span> );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> spells = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;magic-&gt;get_spells();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classspell.html">spell</a> *<a class="code" href="classspell.html">spell</a> : spells ) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">spell_id</a> &amp;<span class="keywordtype">id</span> = <a class="code" href="classspell.html">spell</a>-&gt;<a class="code" href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">id</a>();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> lvl = <a class="code" href="classspell.html">spell</a>-&gt;<a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        page-&gt; known_spells[<a class="code" href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">id</a>] = lvl;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    page-&gt; <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33">bionics</a> = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_bionics();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classSkill.html">Skill</a> &amp;elem : <a class="code" href="classSkill.html#a441fc250c865d6f560e897ad05d059c3">Skill::skills</a> ) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordtype">int</span> level = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_skill_level_object( elem.ident() ).level();</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        page-&gt;skillsL.insert( { elem.ident(), level } );</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    page -&gt; known_profs = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;_proficiencies-&gt;known_profs();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    page -&gt; learning_profs = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;_proficiencies-&gt;learning_profs();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    page-&gt;max_power_level = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;get_max_power_level();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">diary::pages</a>.push_back( std::move( page ) );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
<div class="ttc" id="acalendar_8h_html_a2c1cb575663aec51773d232cef1a22e9ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9ab50339a10e1de285ac99d4c3990b8693">time_accuracy::NONE</a></div><div class="ttdeci">@ NONE</div><div class="ttdoc">No accuracy, no idea what time it is.</div></div>
<div class="ttc" id="acalendar_8h_html_a2c1cb575663aec51773d232cef1a22e9aba7de5bc6888294e5884b024a4c894f1"><div class="ttname"><a href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9aba7de5bc6888294e5884b024a4c894f1">time_accuracy::FULL</a></div><div class="ttdeci">@ FULL</div><div class="ttdoc">Full accuracy, using a timekeeping device.</div></div>
<div class="ttc" id="acalendar_8h_html_a2c1cb575663aec51773d232cef1a22e9afba5cdfa4bcb408f641c743519a0fe19"><div class="ttname"><a href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9afba5cdfa4bcb408f641c743519a0fe19">time_accuracy::PARTIAL</a></div><div class="ttdeci">@ PARTIAL</div><div class="ttdoc">Estimated time, can see the sky.</div></div>
<div class="ttc" id="aclassSkill_html"><div class="ttname"><a href="classSkill.html">Skill</a></div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00032">skill.h:33</a></div></div>
<div class="ttc" id="aclassSkill_html_a441fc250c865d6f560e897ad05d059c3"><div class="ttname"><a href="classSkill.html#a441fc250c865d6f560e897ad05d059c3">Skill::skills</a></div><div class="ttdeci">static std::vector&lt; Skill &gt; skills</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00052">skill.h:52</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassmission_html_a0f6bcb9fcb282e5c86af19de376c9839"><div class="ttname"><a href="classmission.html#a0f6bcb9fcb282e5c86af19de376c9839">mission::to_uid_vector</a></div><div class="ttdeci">static std::vector&lt; int &gt; to_uid_vector(const std::vector&lt; mission * &gt; &amp;vec)</div><div class="ttdef"><b>Definition:</b> <a href="mission_8cpp_source.html#l00145">mission.cpp:145</a></div></div>
<div class="ttc" id="aclassspell_html"><div class="ttname"><a href="classspell.html">spell</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00421">magic.h:422</a></div></div>
<div class="ttc" id="aclassspell_html_a006cfd33c15f732b2463eda1ae0686cc"><div class="ttname"><a href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">spell::get_level</a></div><div class="ttdeci">int get_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01570">magic.cpp:1570</a></div></div>
<div class="ttc" id="aclassspell_html_a7d44bdaf4c9faff438e6b30973d68615"><div class="ttname"><a href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">spell::id</a></div><div class="ttdeci">spell_id id() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00662">magic.cpp:662</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="agroup__Weather_html_ga58330ad190bff4e811a7a9a21666bbf4"><div class="ttname"><a href="group__Weather.html#ga58330ad190bff4e811a7a9a21666bbf4">is_creature_outside</a></div><div class="ttdeci">bool is_creature_outside(const Creature &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00075">weather.cpp:75</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33">anonymous_namespace{player_display.cpp}::player_display_tab::bionics</a></div><div class="ttdeci">@ bionics</div></div>
<div class="ttc" id="anamespacebase__camps_html_a04fa69b1c0952a34dc4a7d26b3f9f786"><div class="ttname"><a href="namespacebase__camps.html#a04fa69b1c0952a34dc4a7d26b3f9f786">base_camps::id</a></div><div class="ttdeci">const std::string id</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00105">basecamp.h:105</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anewcharacter_8cpp_html_a1d22ab3ab1f5b7b3d7b9491dcd8787b4"><div class="ttname"><a href="newcharacter_8cpp.html#a1d22ab3ab1f5b7b3d7b9491dcd8787b4">male</a></div><div class="ttdeci">bool male</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l02053">newcharacter.cpp:2053</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9aba7de5bc6888294e5884b024a4c894f1">FULL</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="magic_8cpp_source.html#l01570">spell::get_level()</a>, <a class="el" href="basecamp_8h_source.html#l00105">base_camps::id</a>, <a class="el" href="magic_8cpp_source.html#l00662">spell::id()</a>, <a class="el" href="weather_8cpp_source.html#l00075">is_creature_outside()</a>, <a class="el" href="newcharacter_8cpp_source.html#l02053">male</a>, <a class="el" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9ab50339a10e1de285ac99d4c3990b8693">NONE</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="calendar_8h.html#a2c1cb575663aec51773d232cef1a22e9afba5cdfa4bcb408f641c743519a0fe19">PARTIAL</a>, <a class="el" href="skill_8h_source.html#l00052">Skill::skills</a>, <a class="el" href="mission_8cpp_source.html#l00145">mission::to_uid_vector()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="ac0bf796d6ac303ece50170436c6fa415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0bf796d6ac303ece50170436c6fa415">&#9670;&nbsp;</a></span>prof_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::prof_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00511">511</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a>.empty() ) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proficiencies:&quot;</span> ) );</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a> ) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="keyword">const</span> <a class="code" href="classproficiency.html">proficiency</a> &amp;p = elem.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( p.<a class="code" href="classproficiency.html#af9bf37649c3e186489841ddd1c23f0cf">name</a>(), p.<a class="code" href="classproficiency.html#a3b631b43ab6a85b119d84a0711db8ae7">description</a>() );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">proficiency_id</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a> ) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">if</span>( std::find( prevpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a>.begin(), prevpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a>.end(),</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                           elem ) == prevpage-&gt;<a class="code" href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">known_profs</a>.end() ) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proficiencies: &quot;</span> ) );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <span class="keyword">const</span> <a class="code" href="classproficiency.html">proficiency</a> &amp;p = elem.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( p.<a class="code" href="classproficiency.html#af9bf37649c3e186489841ddd1c23f0cf">name</a>(), p.<a class="code" href="classproficiency.html#a3b631b43ab6a85b119d84a0711db8ae7">description</a>() );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="ttc" id="aclassproficiency_html"><div class="ttname"><a href="classproficiency.html">proficiency</a></div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8h_source.html#l00063">proficiency.h:64</a></div></div>
<div class="ttc" id="aclassproficiency_html_a3b631b43ab6a85b119d84a0711db8ae7"><div class="ttname"><a href="classproficiency.html#a3b631b43ab6a85b119d84a0711db8ae7">proficiency::description</a></div><div class="ttdeci">std::string description() const</div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8cpp_source.html#l00175">proficiency.cpp:175</a></div></div>
<div class="ttc" id="aclassproficiency_html_af9bf37649c3e186489841ddd1c23f0cf"><div class="ttname"><a href="classproficiency.html#af9bf37649c3e186489841ddd1c23f0cf">proficiency::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="proficiency_8cpp_source.html#l00170">proficiency.cpp:170</a></div></div>
<div class="ttc" id="astructdiary__page_html_a4ba42db98056f6f2d85e635fd70b0daa"><div class="ttname"><a href="structdiary__page.html#a4ba42db98056f6f2d85e635fd70b0daa">diary_page::known_profs</a></div><div class="ttdeci">std::vector&lt; proficiency_id &gt; known_profs</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00064">diary.h:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="proficiency_8cpp_source.html#l00175">proficiency::description()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00064">diary_page::known_profs</a>, <a class="el" href="proficiency_8cpp_source.html#l00170">proficiency::name()</a>, and <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a06443969896266eb913c97ce8031c86b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06443969896266eb913c97ce8031c86b">&#9670;&nbsp;</a></span>serialize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diary::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>jsout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00714">714</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;owner&quot;</span>, <a class="code" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a> );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;pages&quot;</span> );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">start_array</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">for</span>( std::unique_ptr&lt;diary_page&gt; &amp;n : <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a> ) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        jsout.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;text&quot;</span>, n-&gt;m_text );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;turn&quot;</span>, n-&gt;turn );</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;time_accuracy&quot;</span>, n-&gt;time_acc );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;completed&quot;</span>, n-&gt;mission_completed );</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;active&quot;</span>, n-&gt;mission_active );</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">// TODO: migrate &quot;faild&quot; to &quot;failed&quot;?</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;faild&quot;</span>, n-&gt;mission_failed );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;kills&quot;</span>, n-&gt;kills );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;npc_kills&quot;</span>, n-&gt;npc_kills );</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;male&quot;</span>, n-&gt;male );</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;str&quot;</span>, n-&gt;strength );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;dex&quot;</span>, n-&gt;dexterity );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;int&quot;</span>, n-&gt;intelligence );</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;per&quot;</span>, n-&gt;perception );</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;traits&quot;</span>, n-&gt;traits );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;bionics&quot;</span>, n-&gt;bionics );</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;spells&quot;</span>, n-&gt;known_spells );</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;skillsL&quot;</span>, n-&gt;skillsL );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;known_profs&quot;</span>, n-&gt;known_profs );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;learning_profs&quot;</span>, n-&gt;learning_profs );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;max_power_level&quot;</span>, n-&gt;max_power_level );</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        jsout.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">end_array</a>();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html_a44cdd853d4c6913b37caa9f0131eeff2"><div class="ttname"><a href="classJsonOut.html#a44cdd853d4c6913b37caa9f0131eeff2">JsonOut::end_array</a></div><div class="ttdeci">void end_array()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02346">json.cpp:2346</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4550e2036b904c4d4a90e440dd41c684"><div class="ttname"><a href="classJsonOut.html#a4550e2036b904c4d4a90e440dd41c684">JsonOut::start_array</a></div><div class="ttdeci">void start_array(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02335">json.cpp:2335</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l02346">JsonOut::end_array()</a>, <a class="el" href="json_8cpp_source.html#l02327">JsonOut::end_object()</a>, <a class="el" href="json_8cpp_source.html#l02422">JsonOut::member()</a>, <a class="el" href="diary_8h_source.html#l00081">owner</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="json_8cpp_source.html#l02335">JsonOut::start_array()</a>, and <a class="el" href="json_8cpp_source.html#l02316">JsonOut::start_object()</a>.</p>

</div>
</div>
<a id="a6d4172f93b61f99c02ef8a359b4daedc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4172f93b61f99c02ef8a359b4daedc">&#9670;&nbsp;</a></span>serialize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diary::serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>fout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00706">706</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classJsonOut.html">JsonOut</a> jsout( fout, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    jsout.start_object();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="classdiary.html#a6d4172f93b61f99c02ef8a359b4daedc">serialize</a>( jsout );</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    jsout.end_object();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html"><div class="ttname"><a href="classJsonOut.html">JsonOut</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00735">json.h:736</a></div></div>
<div class="ttc" id="aclassdiary_html_a6d4172f93b61f99c02ef8a359b4daedc"><div class="ttname"><a href="classdiary.html#a6d4172f93b61f99c02ef8a359b4daedc">diary::serialize</a></div><div class="ttdeci">void serialize(std::ostream &amp;fout)</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00706">diary.cpp:706</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l02327">JsonOut::end_object()</a>, and <a class="el" href="json_8cpp_source.html#l02316">JsonOut::start_object()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00696">store()</a>.</p>

</div>
</div>
<a id="a64c67ffc6071a9ea523839867ced1e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c67ffc6071a9ea523839867ced1e19">&#9670;&nbsp;</a></span>set_opened_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int diary::set_opened_page </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pagenum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00051">51</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span>( pagenum != <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> ) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>.clear();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="classdiary.html#a0577a52698a647c7c617a96badb379c8">desc_map</a>.clear();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> = - 1;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pagenum &lt; 0 ) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> = <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() - 1;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a> = pagenum % <a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classdiary.html#ae762e8247e4d80c00810c0fc0bf942a2">opened_page</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8h_source.html#l00088">change_list</a>, <a class="el" href="diary_8h_source.html#l00090">desc_map</a>, <a class="el" href="diary_8h_source.html#l00086">opened_page</a>, and <a class="el" href="diary_8h_source.html#l00083">pages</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00665">delete_page()</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="ae91bc2c692491781357f10d8968a4d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae91bc2c692491781357f10d8968a4d39">&#9670;&nbsp;</a></span>set_page_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::set_page_text </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00623">623</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>()-&gt;<a class="code" href="structdiary__page.html#a5d054f340835490c5243fa62addffb4e">m_text</a> = std::move( text );</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, and <a class="el" href="diary_8h_source.html#l00032">diary_page::m_text</a>.</p>

</div>
</div>
<a id="a66d05a576c8306885cb621ef7995e625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d05a576c8306885cb621ef7995e625">&#9670;&nbsp;</a></span>show_diary_ui()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::show_diary_ui </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdiary.html">diary</a> *&#160;</td>
          <td class="paramname"><em>c_diary</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary__ui_8cpp_source.html#l00173">173</a> of file <a class="el" href="diary__ui_8cpp_source.html">diary_ui.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_diary;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_pages;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_text;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_changes;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_border;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_desc;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_head;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_info;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">enum class</span> window_mode : int {PAGE_WIN = 0, CHANGE_WIN, TEXT_WIN, NUM_WIN, FIRST_WIN = 0, LAST_WIN = NUM_WIN - 1};</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    window_mode currwin = window_mode::PAGE_WIN;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> diary_last_page = c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ? 0 : ( c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() - 1 );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    std::map&lt;window_mode, int&gt; selected = { {window_mode::PAGE_WIN, diary_last_page}, {window_mode::CHANGE_WIN, 0}, {window_mode::TEXT_WIN, 0} };</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;DIARY&quot;</span> );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    ctxt.register_navigate_ui_list();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    ctxt.register_leftright();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;PREV_TAB&quot;</span> );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;NEXT_TAB&quot;</span> );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;CONFIRM&quot;</span> );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;NEW_PAGE&quot;</span> );</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;DELETE PAGE&quot;</span> );</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;EXPORT_DIARY&quot;</span> );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;VIEW_SCORES&quot;</span> );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> ui_diary;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    ui_diary.<a class="code" href="classui__adaptor.html#abf55c7afc0d78d45a35788575f4c3cd5">on_screen_resize</a>( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keyword">const</span> std::pair&lt;point, point&gt; beg_and_max = <a class="code" href="diary__ui_8cpp.html#a2cb2d13cd8769c12edcbc2c44f75c508">diary_window_position</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;beg = beg_and_max.first;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = beg_and_max.second;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> midx = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x / 2;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        w_changes = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y - 3, midx - 1, beg + <a class="code" href="structpoint.html">point</a>( 0, 3 ) );</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        w_text = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y - 3, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x - midx - 1, beg + <a class="code" href="structpoint.html">point</a>( 2 + midx, 3 ) );</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        w_border = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y + 5, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x + 9, beg + <a class="code" href="structpoint.html">point</a>( -4, -2 ) );</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        w_head = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( 1, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x, beg + <a class="code" href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a> );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position_from_window( w_border );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    } );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    ui_diary.<a class="code" href="classui__adaptor.html#aca44063b3d85e97d97e2701ef3656433">mark_resize</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    ui_diary.<a class="code" href="classui__adaptor.html#a37e0f0811d9460640b86442a1facc87d">on_redraw</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_changes );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_text );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_border );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_head );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#aaa767ce5c3d661bc35c3aea176f0ada5">draw_diary_border</a>( &amp;w_border );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#a416af6fd3d2be59a0d7ea8a1576255e9">print_list_scrollable</a>( &amp;w_changes, c_diary-&gt;<a class="code" href="classdiary.html#a6f04f66b87bac6fe12e292805908071c">get_change_list</a>(), &amp;selected[window_mode::CHANGE_WIN],</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                               currwin == window_mode::CHANGE_WIN, <span class="keyword">false</span>, <a class="code" href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050aa6105c0a611b41b08f1209506350279e">report_color_error::yes</a> );</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#a416af6fd3d2be59a0d7ea8a1576255e9">print_list_scrollable</a>( &amp;w_text, c_diary-&gt;<a class="code" href="classdiary.html#aafbfa5ecd902193a34752d16009b2b0e">get_page_text</a>(), &amp;selected[window_mode::TEXT_WIN],</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                               currwin == window_mode::TEXT_WIN, <span class="keyword">false</span>, <a class="code" href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050a7fa3b767c460b54a2be4d49030b349c7">report_color_error::no</a> );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w_head, <a class="code" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a>, <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( w_head ) - 2, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        c_diary-&gt;<a class="code" href="classdiary.html#adfda5ef9ded514952fc899340a36d146">get_head_text</a>() );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_border );</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_head );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_changes );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_text );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    } );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> ui_pages;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    ui_pages.<a class="code" href="classui__adaptor.html#abf55c7afc0d78d45a35788575f4c3cd5">on_screen_resize</a>( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keyword">const</span> std::pair&lt;point, point&gt; beg_and_max = <a class="code" href="diary__ui_8cpp.html#a2cb2d13cd8769c12edcbc2c44f75c508">diary_window_position</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;beg = beg_and_max.first;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = beg_and_max.second;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        w_pages = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y + 5, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x * 3 / 10 + 1, <a class="code" href="structpoint.html">point</a>( beg.<a class="code" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - 5 - <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x * 3 / 10,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                      beg.<a class="code" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - 2 ) );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position_from_window( w_pages );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    } );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    ui_pages.<a class="code" href="classui__adaptor.html#aca44063b3d85e97d97e2701ef3656433">mark_resize</a>();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    ui_pages.<a class="code" href="classui__adaptor.html#a37e0f0811d9460640b86442a1facc87d">on_redraw</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_pages );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#a416af6fd3d2be59a0d7ea8a1576255e9">print_list_scrollable</a>( &amp;w_pages, c_diary-&gt;<a class="code" href="classdiary.html#a258954db4774907392c34f72e97d4276">get_pages_list</a>(), &amp;selected[window_mode::PAGE_WIN],</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                               currwin == window_mode::PAGE_WIN, <span class="keyword">true</span>, <a class="code" href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050aa6105c0a611b41b08f1209506350279e">report_color_error::yes</a> );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a>( w_pages, 0, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;pages: %d&quot;</span> ),</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                      c_diary-&gt;<a class="code" href="classdiary.html#a258954db4774907392c34f72e97d4276">get_pages_list</a>().size() ) );</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_pages );</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    } );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> ui_desc;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    ui_desc.<a class="code" href="classui__adaptor.html#abf55c7afc0d78d45a35788575f4c3cd5">on_screen_resize</a>( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keyword">const</span> std::pair&lt;point, point&gt; beg_and_max = <a class="code" href="diary__ui_8cpp.html#a2cb2d13cd8769c12edcbc2c44f75c508">diary_window_position</a>();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;beg = beg_and_max.first;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = beg_and_max.second;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        w_desc = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( 4, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x * 3 / 10 + <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x + 10, <a class="code" href="structpoint.html">point</a>( beg.<a class="code" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> - 5 - <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x * 3 / 10,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                     beg.<a class="code" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> - 6 ) );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position_from_window( w_desc );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    } );</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    ui_desc.<a class="code" href="classui__adaptor.html#aca44063b3d85e97d97e2701ef3656433">mark_resize</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ui_desc.<a class="code" href="classui__adaptor.html#a37e0f0811d9460640b86442a1facc87d">on_redraw</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_desc );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( w_desc );</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a>( w_desc, 0, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s&#39;s Diary&quot;</span> ), c_diary-&gt;<a class="code" href="classdiary.html#a8d8461f55fc270d98364c4c181a74a06">owner</a> ) );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        std::string desc = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s, %s, %s, %s&quot;</span> ),</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                          ctxt.get_desc( <span class="stringliteral">&quot;NEW_PAGE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;New page&quot;</span> ), <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a> ),</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                          ctxt.get_desc( <span class="stringliteral">&quot;CONFIRM&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Edit text&quot;</span> ), <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a> ),</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                          ctxt.get_desc( <span class="stringliteral">&quot;DELETE PAGE&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Delete page&quot;</span> ), <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a> ),</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                          ctxt.get_desc( <span class="stringliteral">&quot;EXPORT_DIARY&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Export diary&quot;</span> ), <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a> )</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                        );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a>( w_desc, 1,  <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, desc );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a>( w_desc, 2,  <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, ctxt.get_desc( <span class="stringliteral">&quot;VIEW_SCORES&quot;</span>,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;View achievements, scores, and kills&quot;</span> ), <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a> ) );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_desc );</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    } );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> ui_info;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    ui_info.<a class="code" href="classui__adaptor.html#abf55c7afc0d78d45a35788575f4c3cd5">on_screen_resize</a>( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keyword">const</span> std::pair&lt;point, point&gt; beg_and_max = <a class="code" href="diary__ui_8cpp.html#a2cb2d13cd8769c12edcbc2c44f75c508">diary_window_position</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;beg = beg_and_max.first;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = beg_and_max.second;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        w_info = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">std::clamp</a>( 3, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y / 2 - 4, 7 ), <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.x + 9, beg + <a class="code" href="structpoint.html">point</a>( -4,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                     3 + <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y + ( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a>.y &gt; 12 ) ) );</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position_from_window( w_info );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    } );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    ui_info.<a class="code" href="classui__adaptor.html#aca44063b3d85e97d97e2701ef3656433">mark_resize</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    ui_info.<a class="code" href="classui__adaptor.html#a37e0f0811d9460640b86442a1facc87d">on_redraw</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w_info );</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( w_info );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a>( w_info, 0, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Info&quot;</span> ) ) );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span>( currwin == window_mode::CHANGE_WIN || currwin == window_mode::TEXT_WIN ) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( w_info, <a class="code" href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a>, <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( w_info ) - 2, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                            c_diary-&gt;<a class="code" href="classdiary.html#a4d8673546132edabe134be1168c73ea4">get_desc_map</a>()[selected[window_mode::CHANGE_WIN]] );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w_info );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    } );</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span>( ( !c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() &amp;&amp;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;              selected[window_mode::PAGE_WIN] &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() ) ) ||</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            ( c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() &amp;&amp; selected[window_mode::PAGE_WIN] != 0 ) ) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            selected[window_mode::PAGE_WIN] = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        selected[window_mode::PAGE_WIN] = c_diary-&gt;<a class="code" href="classdiary.html#a64c67ffc6071a9ea523839867ced1e19">set_opened_page</a>( selected[window_mode::PAGE_WIN] );</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        ui_diary.<a class="code" href="classui__adaptor.html#a1629a0fbc701c48c974bb374f6cfad16">invalidate_ui</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        ui_pages.<a class="code" href="classui__adaptor.html#a1629a0fbc701c48c974bb374f6cfad16">invalidate_ui</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        ui_desc.<a class="code" href="classui__adaptor.html#a1629a0fbc701c48c974bb374f6cfad16">invalidate_ui</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        ui_info.<a class="code" href="classui__adaptor.html#a1629a0fbc701c48c974bb374f6cfad16">invalidate_ui</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="namespaceui__manager.html#a5496220e43b7d5f1b3cbbebe6cf1f83d">ui_manager::redraw_invalidated</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = ctxt.handle_input();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEFT&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PREV_TAB&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;RIGHT&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;NEXT_TAB&quot;</span> ) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment">// necessary to use inc_clamp_wrap()</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            static_assert( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( window_mode::FIRST_WIN ) == 0 );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            currwin = <a class="code" href="ui_8h.html#abfe82738e91dcea4d345dfb027214a73">inc_clamp_wrap</a>( currwin, <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;RIGHT&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;NEXT_TAB&quot;</span>,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                      window_mode::NUM_WIN );</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            selected[window_mode::TEXT_WIN] = 0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="ui_8cpp.html#a30f314df91df066807f8f0e735ada959">navigate_ui_list</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, selected[currwin], 10,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                     currwin == window_mode::PAGE_WIN ? c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size()</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                     : currwin == window_mode::CHANGE_WIN ? c_diary-&gt;<a class="code" href="classdiary.html#a99503e866a4edf7acc31209e55138462">change_list</a>.size()</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                     : <a class="code" href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#ad4a6b2a3daf2e966a48ff94a1f8ffd00">text_to_list_scrollable</a>( w_text, c_diary-&gt;<a class="code" href="classdiary.html#aafbfa5ecd902193a34752d16009b2b0e">get_page_text</a>(), <span class="keyword">false</span> ).size(), <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="comment">// size in navigate_ui_list above is redundant with print_list_scrollable&#39;s wrapping effect during redraw</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span>( currwin == window_mode::PAGE_WIN ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                selected[window_mode::CHANGE_WIN] = 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                selected[window_mode::TEXT_WIN] = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CONFIRM&quot;</span> ) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span>( !c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                c_diary-&gt;<a class="code" href="classdiary.html#aa0b9c6e242815fa528bdadf4e2a678c2">edit_page_ui</a>( [&amp;]() {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <span class="keywordflow">return</span> w_text;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                } );</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;NEW_PAGE&quot;</span> ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            c_diary-&gt;<a class="code" href="classdiary.html#a48a0cea09069099df5f5100a385ae3db">new_page</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            selected[window_mode::PAGE_WIN] = c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() - 1;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            currwin = window_mode::PAGE_WIN;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;VIEW_SCORES&quot;</span> ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="scores__ui_8cpp.html#afd05e52ba2f8f42095be6fc1d1536382">show_scores_ui</a>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;achievements(), <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;stats(), <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_kill_tracker() );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;DELETE PAGE&quot;</span> ) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span>( !c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.empty() ) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Really delete Page?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    c_diary-&gt;<a class="code" href="classdiary.html#a366422f3e1571b56a7eb25b2aa4fcbda">delete_page</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <span class="keywordflow">if</span>( selected[window_mode::PAGE_WIN] &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( c_diary-&gt;<a class="code" href="classdiary.html#a97ad2dbccb0c00daf2921a5e7cf69b9d">pages</a>.size() ) ) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        selected[window_mode::PAGE_WIN] --;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;EXPORT_DIARY&quot;</span> ) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Export Diary as .txt?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                c_diary-&gt;<a class="code" href="classdiary.html#a9d4806a8994812ed8181043029438d50">export_to_txt</a>();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="aclasscatacurses_1_1window_html"><div class="ttname"><a href="classcatacurses_1_1window.html">catacurses::window</a></div><div class="ttdoc">A wrapper over a pointer to a curses window.</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00054">cursesdef.h:55</a></div></div>
<div class="ttc" id="aclassdiary_html_a258954db4774907392c34f72e97d4276"><div class="ttname"><a href="classdiary.html#a258954db4774907392c34f72e97d4276">diary::get_pages_list</a></div><div class="ttdeci">std::vector&lt; std::string &gt; get_pages_list()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00041">diary.cpp:41</a></div></div>
<div class="ttc" id="aclassdiary_html_a366422f3e1571b56a7eb25b2aa4fcbda"><div class="ttname"><a href="classdiary.html#a366422f3e1571b56a7eb25b2aa4fcbda">diary::delete_page</a></div><div class="ttdeci">void delete_page()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00665">diary.cpp:665</a></div></div>
<div class="ttc" id="aclassdiary_html_a48a0cea09069099df5f5100a385ae3db"><div class="ttname"><a href="classdiary.html#a48a0cea09069099df5f5100a385ae3db">diary::new_page</a></div><div class="ttdeci">void new_page()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00628">diary.cpp:628</a></div></div>
<div class="ttc" id="aclassdiary_html_a4d8673546132edabe134be1168c73ea4"><div class="ttname"><a href="classdiary.html#a4d8673546132edabe134be1168c73ea4">diary::get_desc_map</a></div><div class="ttdeci">std::map&lt; int, std::string &gt; get_desc_map()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00567">diary.cpp:567</a></div></div>
<div class="ttc" id="aclassdiary_html_aa0b9c6e242815fa528bdadf4e2a678c2"><div class="ttname"><a href="classdiary.html#aa0b9c6e242815fa528bdadf4e2a678c2">diary::edit_page_ui</a></div><div class="ttdeci">void edit_page_ui(const std::function&lt; catacurses::window()&gt; &amp;create_window)</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00379">diary_ui.cpp:379</a></div></div>
<div class="ttc" id="aclassdiary_html_aafbfa5ecd902193a34752d16009b2b0e"><div class="ttname"><a href="classdiary.html#aafbfa5ecd902193a34752d16009b2b0e">diary::get_page_text</a></div><div class="ttdeci">std::string get_page_text()</div><div class="ttdef"><b>Definition:</b> <a href="diary_8cpp_source.html#l00577">diary.cpp:577</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8h_source.html#l00039">input_context.h:40</a></div></div>
<div class="ttc" id="aclassinput__context_html_af15391a3cae13b2e23c43e23342ec7c6"><div class="ttname"><a href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a></div><div class="ttdeci">static bool allow_all_keys(const input_event &amp;evt)</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00264">input_context.cpp:264</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00074">ui_manager.h:75</a></div></div>
<div class="ttc" id="aclassui__adaptor_html_a1629a0fbc701c48c974bb374f6cfad16"><div class="ttname"><a href="classui__adaptor.html#a1629a0fbc701c48c974bb374f6cfad16">ui_adaptor::invalidate_ui</a></div><div class="ttdeci">void invalidate_ui() const</div><div class="ttdoc">Invalidate this UI so it gets redrawn the next redraw unless an upper UI completely occludes this UI.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00275">ui_manager.cpp:275</a></div></div>
<div class="ttc" id="aclassui__adaptor_html_a37e0f0811d9460640b86442a1facc87d"><div class="ttname"><a href="classui__adaptor.html#a37e0f0811d9460640b86442a1facc87d">ui_adaptor::on_redraw</a></div><div class="ttdeci">void on_redraw(const redraw_callback_t &amp;fun)</div><div class="ttdoc">Set redraw and resize callbacks.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00143">ui_manager.cpp:143</a></div></div>
<div class="ttc" id="aclassui__adaptor_html_abf55c7afc0d78d45a35788575f4c3cd5"><div class="ttname"><a href="classui__adaptor.html#abf55c7afc0d78d45a35788575f4c3cd5">ui_adaptor::on_screen_resize</a></div><div class="ttdeci">void on_screen_resize(const screen_resize_callback_t &amp;fun)</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00148">ui_manager.cpp:148</a></div></div>
<div class="ttc" id="aclassui__adaptor_html_aca44063b3d85e97d97e2701ef3656433"><div class="ttname"><a href="classui__adaptor.html#aca44063b3d85e97d97e2701ef3656433">ui_adaptor::mark_resize</a></div><div class="ttdeci">void mark_resize() const</div><div class="ttdoc">Mark this ui_adaptor for resizing the next time it is redrawn.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00213">ui_manager.cpp:213</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00016">color.h:16</a></div></div>
<div class="ttc" id="acolor_8h_html_a258fd137afc4bfddf230fc6aa9b5c050a7fa3b767c460b54a2be4d49030b349c7"><div class="ttname"><a href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050a7fa3b767c460b54a2be4d49030b349c7">report_color_error::no</a></div><div class="ttdeci">@ no</div></div>
<div class="ttc" id="acolor_8h_html_a258fd137afc4bfddf230fc6aa9b5c050aa6105c0a611b41b08f1209506350279e"><div class="ttname"><a href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050aa6105c0a611b41b08f1209506350279e">report_color_error::yes</a></div><div class="ttdeci">@ yes</div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="adiary__ui_8cpp_html_a2cb2d13cd8769c12edcbc2c44f75c508"><div class="ttname"><a href="diary__ui_8cpp.html#a2cb2d13cd8769c12edcbc2c44f75c508">diary_window_position</a></div><div class="ttdeci">static std::pair&lt; point, point &gt; diary_window_position()</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00165">diary_ui.cpp:165</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02diary__ui_8cpp_03_html_a416af6fd3d2be59a0d7ea8a1576255e9"><div class="ttname"><a href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#a416af6fd3d2be59a0d7ea8a1576255e9">anonymous_namespace{diary_ui.cpp}::print_list_scrollable</a></div><div class="ttdeci">void print_list_scrollable(catacurses::window *win, const std::string &amp;text, int *selection, bool active, bool border, const report_color_error color_error)</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00085">diary_ui.cpp:85</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02diary__ui_8cpp_03_html_aaa767ce5c3d661bc35c3aea176f0ada5"><div class="ttname"><a href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#aaa767ce5c3d661bc35c3aea176f0ada5">anonymous_namespace{diary_ui.cpp}::draw_diary_border</a></div><div class="ttdeci">void draw_diary_border(catacurses::window *win)</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00105">diary_ui.cpp:105</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02diary__ui_8cpp_03_html_ad4a6b2a3daf2e966a48ff94a1f8ffd00"><div class="ttname"><a href="namespaceanonymous__namespace_02diary__ui_8cpp_03.html#ad4a6b2a3daf2e966a48ff94a1f8ffd00">anonymous_namespace{diary_ui.cpp}::text_to_list_scrollable</a></div><div class="ttdeci">std::vector&lt; std::string &gt; text_to_list_scrollable(catacurses::window &amp;win, const std::string &amp;text, const bool border)</div><div class="ttdef"><b>Definition:</b> <a href="diary__ui_8cpp_source.html#l00077">diary_ui.cpp:77</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a576fd20080b8f49e27acf97af45b374b"><div class="ttname"><a href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, const point &amp;begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00091">ncurses_def.cpp:91</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00067">ncurses_def.cpp:67</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ace2ce3990cb812fb83adf6e4ea1f9e8e"><div class="ttname"><a href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">catacurses::werase</a></div><div class="ttdeci">void werase(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00083">ncurses_def.cpp:83</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_a5496220e43b7d5f1b3cbbebe6cf1f83d"><div class="ttname"><a href="namespaceui__manager.html#a5496220e43b7d5f1b3cbbebe6cf1f83d">ui_manager::redraw_invalidated</a></div><div class="ttdeci">void redraw_invalidated()</div><div class="ttdoc">Redraw all invalidated windows without invalidating the top window.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00509">ui_manager.cpp:509</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00024">overmap_ui.h:25</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a8fb393e085b34b04ed037521fb92671b"><div class="ttname"><a href="output_8cpp.html#a8fb393e085b34b04ed037521fb92671b">center_print</a></div><div class="ttdeci">void center_print(const catacurses::window &amp;w, const int y, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00559">output.cpp:559</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00268">output.cpp:268</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab9659cbe9ec23a2efd813f795cb7fb73"><div class="ttname"><a href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, const point &amp;begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00379">output.cpp:379</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afea9968fcee47ebca0e45d27099d1c22"><div class="ttname"><a href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a></div><div class="ttdeci">void draw_border(const catacurses::window &amp;w, nc_color border_color, const std::string &amp;title, nc_color title_color)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00688">output.cpp:688</a></div></div>
<div class="ttc" id="apoint_8h_html_a5c8645fbdd39f3862d10d1521f3d0254"><div class="ttname"><a href="point_8h.html#a5c8645fbdd39f3862d10d1521f3d0254">point_south_east</a></div><div class="ttdeci">constexpr point point_south_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00256">point.h:256</a></div></div>
<div class="ttc" id="apoint_8h_html_a702e673ec0d39d0822e2dc453a6af3e5"><div class="ttname"><a href="point_8h.html#a702e673ec0d39d0822e2dc453a6af3e5">point_south</a></div><div class="ttdeci">constexpr point point_south</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00257">point.h:257</a></div></div>
<div class="ttc" id="ascores__ui_8cpp_html_afd05e52ba2f8f42095be6fc1d1536382"><div class="ttname"><a href="scores__ui_8cpp.html#afd05e52ba2f8f42095be6fc1d1536382">show_scores_ui</a></div><div class="ttdeci">void show_scores_ui(const achievements_tracker &amp;achievements, stats_tracker &amp;stats, const kill_tracker &amp;kills)</div><div class="ttdef"><b>Definition:</b> <a href="scores__ui_8cpp_source.html#l00090">scores_ui.cpp:90</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructpoint_html_a9a82ca9504acabb1e30569f89c805471"><div class="ttname"><a href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00024">point.h:24</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00023">point.h:23</a></div></div>
<div class="ttc" id="aui_8cpp_html_a30f314df91df066807f8f0e735ada959"><div class="ttname"><a href="ui_8cpp.html#a30f314df91df066807f8f0e735ada959">navigate_ui_list</a></div><div class="ttdeci">bool navigate_ui_list(const std::string &amp;action, V &amp;val, int page_delta, S size, bool wrap)</div><div class="ttdoc">Helper for typical UI list navigation with wrap-around Handles up, down, scroll_up and _down,...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01421">ui.cpp:1421</a></div></div>
<div class="ttc" id="aui_8h_html_abfe82738e91dcea4d345dfb027214a73"><div class="ttname"><a href="ui_8h.html#abfe82738e91dcea4d345dfb027214a73">inc_clamp_wrap</a></div><div class="ttdeci">std::enable_if_t&lt; !std::is_enum_v&lt; V &gt;, V &gt; inc_clamp_wrap(V val, int delta, S size)</div><div class="ttdoc">Helper for typical UI list navigation with wrap-around Add delta to val.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00596">ui.h:596</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="input__context_8cpp_source.html#l00264">input_context::allow_all_keys()</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="output_8cpp_source.html#l00559">center_print()</a>, <a class="el" href="diary_8h_source.html#l00088">change_list</a>, <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="diary_8cpp_source.html#l00665">delete_page()</a>, <a class="el" href="diary__ui_8cpp_source.html#l00165">diary_window_position()</a>, <a class="el" href="output_8cpp_source.html#l00688">draw_border()</a>, <a class="el" href="diary__ui_8cpp_source.html#l00105">anonymous_namespace{diary_ui.cpp}::draw_diary_border()</a>, <a class="el" href="diary__ui_8cpp_source.html#l00379">edit_page_ui()</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="output_8cpp_source.html#l00379">fold_and_print()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>, <a class="el" href="input__context_8cpp_source.html#l00269">input_context::get_desc()</a>, <a class="el" href="diary_8cpp_source.html#l00567">get_desc_map()</a>, <a class="el" href="diary_8cpp_source.html#l00586">get_head_text()</a>, <a class="el" href="diary_8cpp_source.html#l00577">get_page_text()</a>, <a class="el" href="diary_8cpp_source.html#l00041">get_pages_list()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="input__context_8cpp_source.html#l00427">input_context::handle_input()</a>, <a class="el" href="ui_8h_source.html#l00596">inc_clamp_wrap()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00275">ui_adaptor::invalidate_ui()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00213">ui_adaptor::mark_resize()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="ui_8cpp_source.html#l01421">navigate_ui_list()</a>, <a class="el" href="diary_8cpp_source.html#l00628">new_page()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::newwin()</a>, <a class="el" href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050a7fa3b767c460b54a2be4d49030b349c7">no</a>, <a class="el" href="ui__manager_8cpp_source.html#l00143">ui_adaptor::on_redraw()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00148">ui_adaptor::on_screen_resize()</a>, <a class="el" href="diary_8h_source.html#l00081">owner</a>, <a class="el" href="diary_8h_source.html#l00083">pages</a>, <a class="el" href="point_8h_source.html#l00257">point_south</a>, <a class="el" href="point_8h_source.html#l00256">point_south_east</a>, <a class="el" href="diary__ui_8cpp_source.html#l00085">anonymous_namespace{diary_ui.cpp}::print_list_scrollable()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00509">ui_manager::redraw_invalidated()</a>, <a class="el" href="input__context_8cpp_source.html#l00180">input_context::register_action()</a>, <a class="el" href="input__context_8cpp_source.html#l00507">input_context::register_leftright()</a>, <a class="el" href="input__context_8cpp_source.html#l00519">input_context::register_navigate_ui_list()</a>, <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>, <a class="el" href="scores__ui_8cpp_source.html#l00090">show_scores_ui()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="diary__ui_8cpp_source.html#l00077">anonymous_namespace{diary_ui.cpp}::text_to_list_scrollable()</a>, <a class="el" href="output_8cpp_source.html#l00268">trim_and_print()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00083">catacurses::werase()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00067">catacurses::wnoutrefresh()</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, <a class="el" href="point_8h_source.html#l00024">point::y</a>, and <a class="el" href="color_8h.html#a258fd137afc4bfddf230fc6aa9b5c050aa6105c0a611b41b08f1209506350279e">yes</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00610">death_entry()</a>, and <a class="el" href="handle__action_8cpp_source.html#l02111">game::do_regular_action()</a>.</p>

</div>
</div>
<a id="aaf3223f044433acc53d75b76a0c771c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3223f044433acc53d75b76a0c771c3">&#9670;&nbsp;</a></span>skill_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::skill_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00344">344</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span>( currpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a>.empty() ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skills:&quot;</span> ) );</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;Skill&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a> ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="keywordflow">if</span>( elem.second &gt; 0 ) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    <a class="code" href="classSkill.html">Skill</a> s = elem.first.obj();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;&lt;color_light_blue&gt;%s: %d&lt;/color&gt;&quot;</span>, s.<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(), elem.second ),</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                        s.<a class="code" href="classSkill.html#a436d048c727f893a752608f9b38ab18a">description</a>() );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;Skill&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a> ) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">if</span>( prevpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a>.find( elem.first ) != prevpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a>.end() ) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">if</span>( prevpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a>[elem.first] != elem.second ) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Skills: &quot;</span> ) );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <a class="code" href="classSkill.html">Skill</a> s = elem.first.obj();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;color_light_blue&gt;%s: %d -&gt; %d&lt;/color&gt;&quot;</span> ), s.<a class="code" href="classSkill.html#a11c69074ce9b251983f170510808bd85">name</a>(),</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                                       prevpage-&gt;<a class="code" href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">skillsL</a>[elem.first], elem.second ), s.<a class="code" href="classSkill.html#a436d048c727f893a752608f9b38ab18a">description</a>() );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="ttc" id="aclassSkill_html_a11c69074ce9b251983f170510808bd85"><div class="ttname"><a href="classSkill.html#a11c69074ce9b251983f170510808bd85">Skill::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00071">skill.h:71</a></div></div>
<div class="ttc" id="aclassSkill_html_a436d048c727f893a752608f9b38ab18a"><div class="ttname"><a href="classSkill.html#a436d048c727f893a752608f9b38ab18a">Skill::description</a></div><div class="ttdeci">std::string description() const</div><div class="ttdef"><b>Definition:</b> <a href="skill_8h_source.html#l00074">skill.h:74</a></div></div>
<div class="ttc" id="astructdiary__page_html_a7663de3b253337d3cdbb7c6d3a6f1895"><div class="ttname"><a href="structdiary__page.html#a7663de3b253337d3cdbb7c6d3a6f1895">diary_page::skillsL</a></div><div class="ttdeci">std::map&lt; skill_id, int &gt; skillsL</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00062">diary.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="skill_8h_source.html#l00074">Skill::description()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="skill_8h_source.html#l00071">Skill::name()</a>, <a class="el" href="diary_8h_source.html#l00062">diary_page::skillsL</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a5ff278fdf400df7ead4de72650753ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ff278fdf400df7ead4de72650753ffb">&#9670;&nbsp;</a></span>spell_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::spell_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00089">89</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classavatar.html">avatar</a> *<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = &amp;<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a>.empty() ) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Known spells:&quot;</span> ) );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;spell_type&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a> ) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keyword">const</span> <a class="code" href="classspell.html">spell</a> s = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;magic-&gt;get_spell( elem.first );</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s: %d&quot;</span> ), s.<a class="code" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>(), elem.second ), s.<a class="code" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a>() );</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a>.empty() ) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;spell_type&gt;</a>, <span class="keywordtype">int</span>&gt; &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a> ) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <span class="keywordflow">if</span>( prevpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a>.find( elem.first ) != prevpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a>.end() ) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> prevlvl = prevpage-&gt;<a class="code" href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">known_spells</a>[elem.first];</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="keywordflow">if</span>( elem.second != prevlvl ) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Improved/new spells: &quot;</span> ) );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                            flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classspell.html">spell</a> s = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;magic-&gt;get_spell( elem.first );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s: %d -&gt; %d&quot;</span> ), s.<a class="code" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>(), prevlvl, elem.second ),</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                            s.<a class="code" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a>() );</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Improved/new spells: &quot;</span> ) );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classspell.html">spell</a> s = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>-&gt;magic-&gt;get_spell( elem.first );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s: %d&quot;</span> ), s.<a class="code" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>(), elem.second ), s.<a class="code" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a>() );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_abdf34d5415c3fdafcd84fe3a7101bddb"><div class="ttname"><a href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">spell::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01207">magic.cpp:1207</a></div></div>
<div class="ttc" id="aclassspell_html_acc66691f05cd20a085370d79df52bafa"><div class="ttname"><a href="classspell.html#acc66691f05cd20a085370d79df52bafa">spell::description</a></div><div class="ttdeci">std::string description() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01543">magic.cpp:1543</a></div></div>
<div class="ttc" id="astructdiary__page_html_a63ca9723270bc3628a401e3b629ec304"><div class="ttname"><a href="structdiary__page.html#a63ca9723270bc3628a401e3b629ec304">diary_page::known_spells</a></div><div class="ttdeci">std::map&lt; spell_id, int &gt; known_spells</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00058">diary.h:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="magic_8cpp_source.html#l01543">spell::description()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00058">diary_page::known_spells</a>, <a class="el" href="magic_8cpp_source.html#l01207">spell::name()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a9025dec5b103cd066b8bdb8e45f2027f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9025dec5b103cd066b8bdb8e45f2027f">&#9670;&nbsp;</a></span>stat_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::stat_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00454">454</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats:&quot;</span> ) );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Strength: %d&quot;</span> ), currpage-&gt;<a class="code" href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">strength</a> ) );</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dexterity: %d&quot;</span> ), currpage-&gt;<a class="code" href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">dexterity</a> ) );</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Intelligence: %d&quot;</span> ), currpage-&gt;<a class="code" href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">intelligence</a> ) );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Perception: %d&quot;</span> ), currpage-&gt;<a class="code" href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">perception</a> ) );</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span>( currpage-&gt;<a class="code" href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">strength</a> != prevpage-&gt;<a class="code" href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">strength</a> ) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats: &quot;</span> ) );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Strength: %d -&gt; %d&quot;</span> ), prevpage-&gt;<a class="code" href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">strength</a>,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                               currpage-&gt;<a class="code" href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">strength</a> ) );</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">if</span>( currpage-&gt;<a class="code" href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">dexterity</a> != prevpage-&gt;<a class="code" href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">dexterity</a> ) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats: &quot;</span> ) );</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dexterity: %d -&gt; %d&quot;</span> ), prevpage-&gt;<a class="code" href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">dexterity</a>,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                               currpage-&gt;<a class="code" href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">dexterity</a> ) );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span>( currpage-&gt;<a class="code" href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">intelligence</a> != prevpage-&gt;<a class="code" href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">intelligence</a> ) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats: &quot;</span> ) );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Intelligence: %d -&gt; %d&quot;</span> ), prevpage-&gt;<a class="code" href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">intelligence</a>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                               currpage-&gt;<a class="code" href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">intelligence</a> ) );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span>( currpage-&gt;<a class="code" href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">perception</a> != prevpage-&gt;<a class="code" href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">perception</a> ) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stats: &quot;</span> ) );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Perception: %d -&gt; %d&quot;</span> ), prevpage-&gt;<a class="code" href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">perception</a>,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                               currpage-&gt;<a class="code" href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">perception</a> ) );</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div>
<div class="ttc" id="astructdiary__page_html_a4b07b809f807cce004b6ca06951c08f5"><div class="ttname"><a href="structdiary__page.html#a4b07b809f807cce004b6ca06951c08f5">diary_page::strength</a></div><div class="ttdeci">int strength</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00051">diary.h:51</a></div></div>
<div class="ttc" id="astructdiary__page_html_a5cc37c1f40f91f1842b9b60dd57f76b5"><div class="ttname"><a href="structdiary__page.html#a5cc37c1f40f91f1842b9b60dd57f76b5">diary_page::intelligence</a></div><div class="ttdeci">int intelligence</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00053">diary.h:53</a></div></div>
<div class="ttc" id="astructdiary__page_html_a72dc8545b196b6f00ddb5cec974eb735"><div class="ttname"><a href="structdiary__page.html#a72dc8545b196b6f00ddb5cec974eb735">diary_page::perception</a></div><div class="ttdeci">int perception</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00054">diary.h:54</a></div></div>
<div class="ttc" id="astructdiary__page_html_abcb4f692e32172ee7234ddd473799d8a"><div class="ttname"><a href="structdiary__page.html#abcb4f692e32172ee7234ddd473799d8a">diary_page::dexterity</a></div><div class="ttdeci">int dexterity</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00052">diary.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="diary_8h_source.html#l00052">diary_page::dexterity</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8h_source.html#l00053">diary_page::intelligence</a>, <a class="el" href="diary_8h_source.html#l00054">diary_page::perception</a>, <a class="el" href="diary_8h_source.html#l00051">diary_page::strength</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<a id="a7941d21aab55904c3fad41332e3ff90f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7941d21aab55904c3fad41332e3ff90f">&#9670;&nbsp;</a></span>store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool diary::store </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00696">696</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="catacharset_8cpp.html#ae8ff0664ea195486ad0940e9a64a2452">base64_encode</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().get_save_id() + <span class="stringliteral">&quot;_diary&quot;</span> );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    std::string path = <a class="code" href="namespacePATH__INFO.html#afc693c43111356ec987070ea63429bb4">PATH_INFO::world_base_save_path</a>() +  <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;.json&quot;</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> iswriten = <a class="code" href="cata__utility_8cpp.html#a622c5bbf103e24e414fea34574eb68a8">write_to_file</a>( path, [&amp;]( std::ostream &amp; fout ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="classdiary.html#a6d4172f93b61f99c02ef8a359b4daedc">serialize</a>( fout );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;diary data&quot;</span> ) );</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> iswriten;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_a622c5bbf103e24e414fea34574eb68a8"><div class="ttname"><a href="cata__utility_8cpp.html#a622c5bbf103e24e414fea34574eb68a8">write_to_file</a></div><div class="ttdeci">void write_to_file(const std::string &amp;path, const std::function&lt; void(std::ostream &amp;)&gt; &amp;writer)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00288">cata_utility.cpp:288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="catacharset_8cpp_source.html#l00233">base64_encode()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="diary_8cpp_source.html#l00706">serialize()</a>, <a class="el" href="game_8cpp_source.html#l13258">PATH_INFO::world_base_save_path()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00288">write_to_file()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l03348">game::save_player_data()</a>.</p>

</div>
</div>
<a id="a6f11125e72e6d7feff26ced914142a85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f11125e72e6d7feff26ced914142a85">&#9670;&nbsp;</a></span>trait_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diary::trait_changes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8cpp_source.html#l00392">392</a> of file <a class="el" href="diary_8cpp_source.html">diary.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *currpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="structdiary__page.html">diary_page</a> *prevpage = <a class="code" href="classdiary.html#aa20c00b8b9dd1a1375f85d40e205d488">get_page_ptr</a>( -1 );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span>( currpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span>( prevpage == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span>( !currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.empty() ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mutations:&quot;</span> ) );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrait__and__var.html">trait_and_var</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a> ) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( elem.<a class="code" href="structtrait__and__var.html#afd6d9ef5c844c6a5b0a5e2df8248654d">name</a>(), elem.<a class="code" href="structtrait__and__var.html#adf85440093db80a626f68f04622a3416">trait</a>-&gt;<a class="code" href="structmutation__branch.html#a5de9e8a32eb1d4919036866cca610f6b">get_display_color</a>() ), elem.<a class="code" href="structtrait__and__var.html#a173a4ae321f042c7d1868c88016028bf">desc</a>() );</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span>( prevpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.empty() &amp;&amp; !currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.empty() ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mutations:&quot;</span> ) );</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrait__and__var.html">trait_and_var</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a> ) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( elem.<a class="code" href="structtrait__and__var.html#afd6d9ef5c844c6a5b0a5e2df8248654d">name</a>(), elem.<a class="code" href="structtrait__and__var.html#adf85440093db80a626f68f04622a3416">trait</a>-&gt;<a class="code" href="structmutation__branch.html#a5de9e8a32eb1d4919036866cca610f6b">get_display_color</a>() ), elem.<a class="code" href="structtrait__and__var.html#a173a4ae321f042c7d1868c88016028bf">desc</a>() );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrait__and__var.html">trait_and_var</a> &amp;elem : currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a> ) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span>( std::find( prevpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.begin(), prevpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.end(),</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                               elem ) == prevpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.end() ) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Gained Mutation: &quot;</span> ) );</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( elem.<a class="code" href="structtrait__and__var.html#afd6d9ef5c844c6a5b0a5e2df8248654d">name</a>(), elem.<a class="code" href="structtrait__and__var.html#adf85440093db80a626f68f04622a3416">trait</a>-&gt;<a class="code" href="structmutation__branch.html#a5de9e8a32eb1d4919036866cca610f6b">get_display_color</a>() ), elem.<a class="code" href="structtrait__and__var.html#a173a4ae321f042c7d1868c88016028bf">desc</a>() );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            flag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtrait__and__var.html">trait_and_var</a> &amp;elem : prevpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a> ) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">if</span>( std::find( currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.begin(), currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.end(),</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                               elem ) == currpage-&gt;<a class="code" href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">traits</a>.end() ) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="keywordflow">if</span>( flag ) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                        <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lost Mutation: &quot;</span> ) );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        flag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( elem.<a class="code" href="structtrait__and__var.html#afd6d9ef5c844c6a5b0a5e2df8248654d">name</a>(), elem.<a class="code" href="structtrait__and__var.html#adf85440093db80a626f68f04622a3416">trait</a>-&gt;<a class="code" href="structmutation__branch.html#a5de9e8a32eb1d4919036866cca610f6b">get_display_color</a>() ), elem.<a class="code" href="structtrait__and__var.html#a173a4ae321f042c7d1868c88016028bf">desc</a>() );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span>( !flag ) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <a class="code" href="classdiary.html#aa75c99b1a0c89fbb255151d775718973">add_to_change_list</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div>
<div class="ttc" id="astructdiary__page_html_af51c4711ca6cbd29c8b52c658cc37cd7"><div class="ttname"><a href="structdiary__page.html#af51c4711ca6cbd29c8b52c658cc37cd7">diary_page::traits</a></div><div class="ttdeci">std::vector&lt; trait_and_var &gt; traits</div><div class="ttdef"><b>Definition:</b> <a href="diary_8h_source.html#l00056">diary.h:56</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a5de9e8a32eb1d4919036866cca610f6b"><div class="ttname"><a href="structmutation__branch.html#a5de9e8a32eb1d4919036866cca610f6b">mutation_branch::get_display_color</a></div><div class="ttdeci">nc_color get_display_color() const</div><div class="ttdoc">Returns the color to display the mutation name with.</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00783">mutation_data.cpp:783</a></div></div>
<div class="ttc" id="astructtrait__and__var_html"><div class="ttname"><a href="structtrait__and__var.html">trait_and_var</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00127">mutation.h:127</a></div></div>
<div class="ttc" id="astructtrait__and__var_html_a173a4ae321f042c7d1868c88016028bf"><div class="ttname"><a href="structtrait__and__var.html#a173a4ae321f042c7d1868c88016028bf">trait_and_var::desc</a></div><div class="ttdeci">std::string desc() const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00282">mutation_data.cpp:282</a></div></div>
<div class="ttc" id="astructtrait__and__var_html_adf85440093db80a626f68f04622a3416"><div class="ttname"><a href="structtrait__and__var.html#adf85440093db80a626f68f04622a3416">trait_and_var::trait</a></div><div class="ttdeci">trait_id trait</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00128">mutation.h:128</a></div></div>
<div class="ttc" id="astructtrait__and__var_html_afd6d9ef5c844c6a5b0a5e2df8248654d"><div class="ttname"><a href="structtrait__and__var.html#afd6d9ef5c844c6a5b0a5e2df8248654d">trait_and_var::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00277">mutation_data.cpp:277</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00282">trait_and_var::desc()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00783">mutation_branch::get_display_color()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00277">trait_and_var::name()</a>, <a class="el" href="mutation_8h_source.html#l00128">trait_and_var::trait</a>, and <a class="el" href="diary_8h_source.html#l00056">diary_page::traits</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a99503e866a4edf7acc31209e55138462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99503e866a4edf7acc31209e55138462">&#9670;&nbsp;</a></span>change_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; diary::change_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00088">88</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>, <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a0577a52698a647c7c617a96badb379c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0577a52698a647c7c617a96badb379c8">&#9670;&nbsp;</a></span>desc_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::string&gt; diary::desc_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00090">90</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00081">add_to_change_list()</a>, <a class="el" href="diary_8cpp_source.html#l00567">get_desc_map()</a>, and <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>.</p>

</div>
</div>
<a id="ae762e8247e4d80c00810c0fc0bf942a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae762e8247e4d80c00810c0fc0bf942a2">&#9670;&nbsp;</a></span>opened_page</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int diary::opened_page = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00086">86</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00665">delete_page()</a>, <a class="el" href="diary_8cpp_source.html#l00586">get_head_text()</a>, <a class="el" href="diary_8cpp_source.html#l00067">get_opened_page_num()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, and <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>.</p>

</div>
</div>
<a id="a8d8461f55fc270d98364c4c181a74a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d8461f55fc270d98364c4c181a74a06">&#9670;&nbsp;</a></span>owner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string diary::owner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00081">81</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00758">deserialize()</a>, <a class="el" href="diary_8cpp_source.html#l00619">diary()</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="diary_8cpp_source.html#l00714">serialize()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<a id="a97ad2dbccb0c00daf2921a5e7cf69b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ad2dbccb0c00daf2921a5e7cf69b9d">&#9670;&nbsp;</a></span>pages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::unique_ptr&lt;<a class="el" href="structdiary__page.html">diary_page</a>&gt; &gt; diary::pages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="diary_8h_source.html#l00083">83</a> of file <a class="el" href="diary_8h_source.html">diary.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="diary_8cpp_source.html#l00665">delete_page()</a>, <a class="el" href="diary_8cpp_source.html#l00758">deserialize()</a>, <a class="el" href="diary_8cpp_source.html#l00673">export_to_txt()</a>, <a class="el" href="diary_8cpp_source.html#l00549">get_change_list()</a>, <a class="el" href="diary_8cpp_source.html#l00586">get_head_text()</a>, <a class="el" href="diary_8cpp_source.html#l00072">get_page_ptr()</a>, <a class="el" href="diary_8cpp_source.html#l00577">get_page_text()</a>, <a class="el" href="diary_8cpp_source.html#l00041">get_pages_list()</a>, <a class="el" href="diary_8cpp_source.html#l00628">new_page()</a>, <a class="el" href="diary_8cpp_source.html#l00714">serialize()</a>, <a class="el" href="diary_8cpp_source.html#l00051">set_opened_page()</a>, and <a class="el" href="diary__ui_8cpp_source.html#l00173">show_diary_ui()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="diary_8h_source.html">diary.h</a></li>
<li>src/<a class="el" href="diary_8cpp_source.html">diary.cpp</a></li>
<li>src/<a class="el" href="diary__ui_8cpp_source.html">diary_ui.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:37 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
