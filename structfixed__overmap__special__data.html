<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: fixed_overmap_special_data Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structfixed__overmap__special__data-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fixed_overmap_special_data Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for fixed_overmap_special_data:</div>
<div class="dyncontent">
 <div class="center">
  <img src="structfixed__overmap__special__data.png" usemap="#fixed_5Fovermap_5Fspecial_5Fdata_map" alt=""/>
  <map id="fixed_5Fovermap_5Fspecial_5Fdata_map" name="fixed_5Fovermap_5Fspecial_5Fdata_map">
<area href="structovermap__special__data.html" alt="overmap_special_data" shape="rect" coords="0,0,173,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a89e9c7d8a01977413201791b6e85f989"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a89e9c7d8a01977413201791b6e85f989">fixed_overmap_special_data</a> ()=default</td></tr>
<tr class="separator:a89e9c7d8a01977413201791b6e85f989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd97fd4fcdf7536e1622143234ccc1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#afbd97fd4fcdf7536e1622143234ccc1f">fixed_overmap_special_data</a> (const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;ter)</td></tr>
<tr class="separator:afbd97fd4fcdf7536e1622143234ccc1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12905731ac87d86ecc9c61aad2d7b98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#aa12905731ac87d86ecc9c61aad2d7b98">finalize</a> (const std::string &amp;, const <a class="el" href="classcata_1_1flat__set.html">cata::flat_set</a>&lt; <a class="el" href="classstring__id.html">string_id</a>&lt; <a class="el" href="structovermap__location.html">overmap_location</a> &gt;&gt; &amp;default_locations) override</td></tr>
<tr class="separator:aa12905731ac87d86ecc9c61aad2d7b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd6b11e5a7a2137733eaa63e4dc836a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#aebd6b11e5a7a2137733eaa63e4dc836a">finalize_mapgen_parameters</a> (<a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;params, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const override</td></tr>
<tr class="separator:aebd6b11e5a7a2137733eaa63e4dc836a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5ea266c41a15c240ff85ead2cef6de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#abf5ea266c41a15c240ff85ead2cef6de">check</a> (const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const override</td></tr>
<tr class="separator:abf5ea266c41a15c240ff85ead2cef6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37598f5bca01638aa66e0f231123487e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a37598f5bca01638aa66e0f231123487e">get_terrain_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="separator:a37598f5bca01638aa66e0f231123487e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61ce374e6b4e6262eb825f1601db1b41"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a61ce374e6b4e6262eb825f1601db1b41">preview_terrains</a> () const override</td></tr>
<tr class="separator:a61ce374e6b4e6262eb825f1601db1b41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3c8eb27fb1049934a2bb0aa4501a02"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structovermap__special__locations.html">overmap_special_locations</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#aaf3c8eb27fb1049934a2bb0aa4501a02">required_locations</a> () const override</td></tr>
<tr class="separator:aaf3c8eb27fb1049934a2bb0aa4501a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2889903f72962045f25d0f34eeaf213"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#ac2889903f72962045f25d0f34eeaf213">score_rotation_at</a> (const <a class="el" href="classovermap.html">overmap</a> &amp;om, const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;p, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a> r) const override</td></tr>
<tr class="separator:ac2889903f72962045f25d0f34eeaf213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587aaf395153a3c246ce5dae2f72edfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structspecial__placement__result.html">special_placement_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a587aaf395153a3c246ce5dae2f72edfc">place</a> (<a class="el" href="classovermap.html">overmap</a> &amp;om, const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;origin, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a> dir, bool blob, const <a class="el" href="structcity.html">city</a> &amp;cit, bool must_be_unexplored) const override</td></tr>
<tr class="separator:a587aaf395153a3c246ce5dae2f72edfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_structovermap__special__data"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_structovermap__special__data')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="structovermap__special__data.html">overmap_special_data</a></td></tr>
<tr class="memitem:a39a3dceb44367f992ba83786f0303149 inherit pub_methods_structovermap__special__data"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structovermap__special__data.html#a39a3dceb44367f992ba83786f0303149">~overmap_special_data</a> ()=default</td></tr>
<tr class="separator:a39a3dceb44367f992ba83786f0303149 inherit pub_methods_structovermap__special__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a803dd7f58ecdabe4479d21dedca2de25"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a></td></tr>
<tr class="separator:a803dd7f58ecdabe4479d21dedca2de25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bdaaf1c99a282fd77d340ec7ebfbb6b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structovermap__special__connection.html">overmap_special_connection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">connections</a></td></tr>
<tr class="separator:a5bdaaf1c99a282fd77d340ec7ebfbb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01204">1204</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a89e9c7d8a01977413201791b6e85f989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e9c7d8a01977413201791b6e85f989">&#9670;&nbsp;</a></span>fixed_overmap_special_data() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fixed_overmap_special_data::fixed_overmap_special_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afbd97fd4fcdf7536e1622143234ccc1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd97fd4fcdf7536e1622143234ccc1f">&#9670;&nbsp;</a></span>fixed_overmap_special_data() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fixed_overmap_special_data::fixed_overmap_special_data </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;&#160;</td>
          <td class="paramname"><em>ter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01206">1206</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        : <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>{ ter }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    {}</div>
<div class="ttc" id="astructfixed__overmap__special__data_html_a803dd7f58ecdabe4479d21dedca2de25"><div class="ttname"><a href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">fixed_overmap_special_data::terrains</a></div><div class="ttdeci">std::vector&lt; overmap_special_terrain &gt; terrains</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l01468">overmap.cpp:1468</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abf5ea266c41a15c240ff85ead2cef6de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf5ea266c41a15c240ff85ead2cef6de">&#9670;&nbsp;</a></span>check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fixed_overmap_special_data::check </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#a15ea331e4b6671f043682ac61b14ee99">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01283">1283</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                                          {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        std::set&lt;oter_str_id&gt; invalid_terrains;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        std::set&lt;tripoint&gt; points;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;elem : <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a> ) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">oter_str_id</a> &amp;oter = elem.terrain;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <span class="keywordflow">if</span>( !oter.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                <span class="keywordflow">if</span>( !invalid_terrains.count( oter ) ) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    <span class="comment">// Not a huge fan of the the direct id manipulation here, but I don&#39;t know</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    <span class="comment">// how else to do this</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    <span class="comment">// Because we try to access all the terrains in the finalization,</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    <span class="comment">// this is a little redundant, but whatever</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    <a class="code" href="classstring__id.html">oter_str_id</a> <a class="code" href="namespaceom__lines.html#a5ec98eac952a4807873e8916ca355f28">invalid</a>( oter.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot;_north&quot;</span> );</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="namespaceom__lines.html#a5ec98eac952a4807873e8916ca355f28">invalid</a>.is_valid() ) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, terrain \&quot;%s\&quot; rotates, but is specified without a &quot;</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                                  <span class="stringliteral">&quot;rotation.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, oter.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                    } <span class="keywordflow">else</span>  {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, terrain \&quot;%s\&quot; is invalid.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, oter.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                    }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                    invalid_terrains.insert( oter );</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> = elem.p;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="keywordflow">if</span>( points.count( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, point %s is duplicated.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.to_string() );</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                points.insert( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <span class="keywordflow">if</span>( elem.locations.empty() ) {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, no location is defined for point %s or the &quot;</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                          <span class="stringliteral">&quot;overall special.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.to_string() );</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;l : elem.locations ) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <span class="keywordflow">if</span>( !l.is_valid() ) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, point %s, location \&quot;%s\&quot; is invalid.&quot;</span>,</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                              <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.to_string(), l.c_str() );</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__connection.html">overmap_special_connection</a> &amp;elem : <a class="code" href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">connections</a> ) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;oter = <a class="code" href="structfixed__overmap__special__data.html#a37598f5bca01638aa66e0f231123487e">get_terrain_at</a>( elem.p );</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="keywordflow">if</span>( !elem.terrain ) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, connection %s doesn&#39;t have a terrain.&quot;</span>,</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                          <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, elem.p.to_string() );</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !elem.existing &amp;&amp; !elem.terrain-&gt;has_flag( <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08dad8be0ecb22807aef2bd5a6428185be93">oter_flags::line_drawing</a> ) ) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, connection %s \&quot;%s\&quot; isn&#39;t drawn with lines.&quot;</span>,</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                          <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, elem.p.to_string(), elem.terrain.c_str() );</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !elem.existing &amp;&amp; oter.<a class="code" href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">terrain</a> &amp;&amp; !oter.<a class="code" href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">terrain</a>-&gt;<a class="code" href="structoter__t.html#a2da2bae35bfb9feee7dd6d343edc9333">type_is</a>( elem.terrain ) ) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, connection %s overwrites \&quot;%s\&quot;.&quot;</span>,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                          <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, elem.p.to_string(), oter.<a class="code" href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">terrain</a>.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">if</span>( elem.from ) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <span class="comment">// The only supported directions are north/east/south/west</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="comment">// as those are the four directions that overmap connections</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                <span class="comment">// can be made in. If the direction we figured out wasn&#39;t</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                <span class="comment">// one of those, warn the user/developer.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                <span class="keyword">const</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> calculated_direction = <a class="code" href="coordinates_8h.html#a70d5706d5a84c7c1953498fa0c651b3e">direction_from</a>( *elem.from, elem.p );</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                <span class="keywordflow">switch</span>( calculated_direction ) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a>:</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a>:</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a>:</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a>:</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, connection %s is not directly north, &quot;</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                                  <span class="stringliteral">&quot;east, south or west of the defined \&quot;from\&quot; %s.&quot;</span>,</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                                  <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, elem.p.to_string(), elem.from-&gt;to_string() );</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    }</div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; oter_t &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a70d5706d5a84c7c1953498fa0c651b3e"><div class="ttname"><a href="coordinates_8h.html#a70d5706d5a84c7c1953498fa0c651b3e">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00790">coordinates.h:790</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a></div><div class="ttdeci">@ NORTH</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a></div><div class="ttdeci">@ EAST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a></div><div class="ttdeci">@ WEST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a></div><div class="ttdeci">@ SOUTH</div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="anamespaceom__lines_html_a5ec98eac952a4807873e8916ca355f28"><div class="ttname"><a href="namespaceom__lines.html#a5ec98eac952a4807873e8916ca355f28">om_lines::invalid</a></div><div class="ttdeci">static const size_t invalid</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00245">overmap.cpp:245</a></div></div>
<div class="ttc" id="aomdata_8h_html_ac214d1ec2c5c346a2ba8d8805839d08dad8be0ecb22807aef2bd5a6428185be93"><div class="ttname"><a href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08dad8be0ecb22807aef2bd5a6428185be93">oter_flags::line_drawing</a></div><div class="ttdeci">@ line_drawing</div></div>
<div class="ttc" id="astructfixed__overmap__special__data_html_a37598f5bca01638aa66e0f231123487e"><div class="ttname"><a href="structfixed__overmap__special__data.html#a37598f5bca01638aa66e0f231123487e">fixed_overmap_special_data::get_terrain_at</a></div><div class="ttdeci">const overmap_special_terrain &amp; get_terrain_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l01363">overmap.cpp:1363</a></div></div>
<div class="ttc" id="astructfixed__overmap__special__data_html_a5bdaaf1c99a282fd77d340ec7ebfbb6b"><div class="ttname"><a href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">fixed_overmap_special_data::connections</a></div><div class="ttdeci">std::vector&lt; overmap_special_connection &gt; connections</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l01469">overmap.cpp:1469</a></div></div>
<div class="ttc" id="astructoter__t_html_a2da2bae35bfb9feee7dd6d343edc9333"><div class="ttname"><a href="structoter__t.html#a2da2bae35bfb9feee7dd6d343edc9333">oter_t::type_is</a></div><div class="ttdeci">bool type_is(const int_id&lt; oter_type_t &gt; &amp;type_id) const</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00963">overmap.cpp:963</a></div></div>
<div class="ttc" id="astructovermap__special__connection_html"><div class="ttname"><a href="structovermap__special__connection.html">overmap_special_connection</a></div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00506">omdata.h:506</a></div></div>
<div class="ttc" id="astructovermap__special__terrain_html"><div class="ttname"><a href="structovermap__special__terrain.html">overmap_special_terrain</a></div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00495">omdata.h:495</a></div></div>
<div class="ttc" id="astructovermap__special__terrain_html_aa6d67e0a2999bf57abf2a54000df7beb"><div class="ttname"><a href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">overmap_special_terrain::terrain</a></div><div class="ttdeci">oter_str_id terrain</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00500">omdata.h:500</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="overmap_8cpp_source.html#l01469">connections</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="coordinates_8h_source.html#l00790">direction_from()</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">EAST</a>, <a class="el" href="overmap_8cpp_source.html#l01363">get_terrain_at()</a>, <a class="el" href="overmap_8cpp_source.html#l00245">om_lines::invalid</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08dad8be0ecb22807aef2bd5a6428185be93">line_drawing</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">NORTH</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">SOUTH</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="omdata_8h_source.html#l00500">overmap_special_terrain::terrain</a>, <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>, <a class="el" href="overmap_8cpp_source.html#l00963">oter_t::type_is()</a>, and <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">WEST</a>.</p>

</div>
</div>
<a id="aa12905731ac87d86ecc9c61aad2d7b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12905731ac87d86ecc9c61aad2d7b98">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fixed_overmap_special_data::finalize </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcata_1_1flat__set.html">cata::flat_set</a>&lt; <a class="el" href="classstring__id.html">string_id</a>&lt; <a class="el" href="structovermap__location.html">overmap_location</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>default_locations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#aacb91fab41cf9330e4c6b39c24bb89c9">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01210">1210</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                                                                      {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="comment">// If the special has default locations, then add those to the locations</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="comment">// of each of the terrains IF the terrain has no locations already.</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;t : <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a> ) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keywordflow">if</span>( t.locations.empty() ) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                t.locations = default_locations;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structovermap__special__connection.html">overmap_special_connection</a> &amp;elem : <a class="code" href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">connections</a> ) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;oter = <a class="code" href="structfixed__overmap__special__data.html#a37598f5bca01638aa66e0f231123487e">get_terrain_at</a>( elem.p );</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keywordflow">if</span>( !elem.terrain &amp;&amp; oter.<a class="code" href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">terrain</a> ) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                elem.terrain = oter.<a class="code" href="structovermap__special__terrain.html#aa6d67e0a2999bf57abf2a54000df7beb">terrain</a>-&gt;<a class="code" href="structoter__t.html#ab1638475c8650985ec100f0bc7fcafe7">get_type_id</a>();    <span class="comment">// Defaulted.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <span class="comment">// If the connection type hasn&#39;t been specified, we&#39;ll guess for them.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="comment">// The guess isn&#39;t always right (hence guessing) in the case where</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="comment">// multiple connections types can be made on a single location type,</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="comment">// e.g. both roads and forest trails can be placed on &quot;forest&quot; locations.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <span class="keywordflow">if</span>( elem.connection.is_null() ) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                elem.connection = <a class="code" href="namespaceovermap__connections.html#a23da3f5473af6f6b500dccd0d3755444">overmap_connections::guess_for</a>( elem.terrain );</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="comment">// If the connection has a &quot;from&quot; hint specified, then figure out what the</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="comment">// resulting direction from the hinted location to the connection point is,</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="comment">// and use that as the initial direction to be passed off to the connection</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <span class="comment">// building code.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">if</span>( elem.from ) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                <span class="keyword">const</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> calculated_direction = <a class="code" href="coordinates_8h.html#a70d5706d5a84c7c1953498fa0c651b3e">direction_from</a>( *elem.from, elem.p );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                <span class="keywordflow">switch</span>( calculated_direction ) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a>:</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                        elem.initial_dir = <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca8d8d1437907bca79900ac5f0ea1f5c73">cube_direction::north</a>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a>:</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                        elem.initial_dir = <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca320381dbf7cd2f31c04baa6b36e1c682">cube_direction::east</a>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a>:</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                        elem.initial_dir = <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca50fd76e33fe5b9617c5ca99008af8904">cube_direction::south</a>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a>:</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                        elem.initial_dir = <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bcada4f0053a5c13882268852ae2da2e466">cube_direction::west</a>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        <span class="comment">// The only supported directions are north/east/south/west</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                        <span class="comment">// as those are the four directions that overmap connections</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                        <span class="comment">// can be made in. If the direction we figured out wasn&#39;t</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                        <span class="comment">// one of those, just set this as invalid. We&#39;ll provide</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                        <span class="comment">// a warning to the user/developer in overmap_special::check().</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                        elem.initial_dir = <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51">cube_direction::last</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca320381dbf7cd2f31c04baa6b36e1c682"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca320381dbf7cd2f31c04baa6b36e1c682">cube_direction::east</a></div><div class="ttdeci">@ east</div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca50fd76e33fe5b9617c5ca99008af8904"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca50fd76e33fe5b9617c5ca99008af8904">cube_direction::south</a></div><div class="ttdeci">@ south</div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca8d8d1437907bca79900ac5f0ea1f5c73"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca8d8d1437907bca79900ac5f0ea1f5c73">cube_direction::north</a></div><div class="ttdeci">@ north</div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51">cube_direction::last</a></div><div class="ttdeci">@ last</div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bcada4f0053a5c13882268852ae2da2e466"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bcada4f0053a5c13882268852ae2da2e466">cube_direction::west</a></div><div class="ttdeci">@ west</div></div>
<div class="ttc" id="anamespaceovermap__connections_html_a23da3f5473af6f6b500dccd0d3755444"><div class="ttname"><a href="namespaceovermap__connections.html#a23da3f5473af6f6b500dccd0d3755444">overmap_connections::guess_for</a></div><div class="ttdeci">string_id&lt; overmap_connection &gt; guess_for(const int_id&lt; oter_type_t &gt; &amp;oter_id)</div><div class="ttdef"><b>Definition:</b> <a href="overmap__connection_8cpp_source.html#l00164">overmap_connection.cpp:164</a></div></div>
<div class="ttc" id="astructoter__t_html_ab1638475c8650985ec100f0bc7fcafe7"><div class="ttname"><a href="structoter__t.html#ab1638475c8650985ec100f0bc7fcafe7">oter_t::get_type_id</a></div><div class="ttdeci">const string_id&lt; oter_type_t &gt; &amp; get_type_id() const</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00323">omdata.h:323</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap_8cpp_source.html#l01469">connections</a>, <a class="el" href="coordinates_8h_source.html#l00790">direction_from()</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca320381dbf7cd2f31c04baa6b36e1c682">east</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">EAST</a>, <a class="el" href="overmap_8cpp_source.html#l01363">get_terrain_at()</a>, <a class="el" href="omdata_8h_source.html#l00323">oter_t::get_type_id()</a>, <a class="el" href="overmap__connection_8cpp_source.html#l00164">overmap_connections::guess_for()</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51">last</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca8d8d1437907bca79900ac5f0ea1f5c73">north</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">NORTH</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca50fd76e33fe5b9617c5ca99008af8904">south</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">SOUTH</a>, <a class="el" href="omdata_8h_source.html#l00500">overmap_special_terrain::terrain</a>, <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bcada4f0053a5c13882268852ae2da2e466">west</a>, and <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">WEST</a>.</p>

</div>
</div>
<a id="aebd6b11e5a7a2137733eaa63e4dc836a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd6b11e5a7a2137733eaa63e4dc836a">&#9670;&nbsp;</a></span>finalize_mapgen_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fixed_overmap_special_data::finalize_mapgen_parameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#a440b12b1c35111276ae045c0ccf6267f">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01267">1267</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                                                               {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;t : <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a> ) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="keywordflow">if</span>( !t.terrain.is_valid() ) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="type__id_8h.html#a62a00ee11c034c0eaf855dc51bf92337">oter_str_id</a>( t.terrain.str() + <span class="stringliteral">&quot;_north&quot;</span> ).<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, terrain \&quot;%s\&quot; rotates, but is specified without a &quot;</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                              <span class="stringliteral">&quot;rotation.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, t.terrain.str() );</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In %s, terrain \&quot;%s\&quot; is invalid.&quot;</span>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, t.terrain.str() );</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            std::string mapgen_id = t.terrain-&gt;get_mapgen_id();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            params.<a class="code" href="structmapgen__parameters.html#af4fa4b971b74880bf290b78a179cd2cd">check_and_merge</a>( <a class="code" href="mapgen_8cpp.html#ad48393641d017a324e4bae968c095a72">get_map_special_params</a>( mapgen_id ), <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="ttc" id="amapgen_8cpp_html_ad48393641d017a324e4bae968c095a72"><div class="ttname"><a href="mapgen_8cpp.html#ad48393641d017a324e4bae968c095a72">get_map_special_params</a></div><div class="ttdeci">mapgen_parameters get_map_special_params(const std::string &amp;mapgen_id)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l08055">mapgen.cpp:8055</a></div></div>
<div class="ttc" id="astructmapgen__parameters_html_af4fa4b971b74880bf290b78a179cd2cd"><div class="ttname"><a href="structmapgen__parameters.html#af4fa4b971b74880bf290b78a179cd2cd">mapgen_parameters::check_and_merge</a></div><div class="ttdeci">void check_and_merge(const mapgen_parameters &amp;, const std::string &amp;context, mapgen_parameter_scope up_to_scope=mapgen_parameter_scope::last)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l01719">mapgen.cpp:1719</a></div></div>
<div class="ttc" id="atype__id_8h_html_a62a00ee11c034c0eaf855dc51bf92337"><div class="ttname"><a href="type__id_8h.html#a62a00ee11c034c0eaf855dc51bf92337">oter_str_id</a></div><div class="ttdeci">string_id&lt; oter_t &gt; oter_str_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00189">type_id.h:189</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l01719">mapgen_parameters::check_and_merge()</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="mapgen_8cpp_source.html#l08055">get_map_special_params()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, and <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>.</p>

</div>
</div>
<a id="a37598f5bca01638aa66e0f231123487e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37598f5bca01638aa66e0f231123487e">&#9670;&nbsp;</a></span>get_terrain_at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a>&amp; fixed_overmap_special_data::get_terrain_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01363">1363</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                                                             {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.begin(), <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.end(),</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        [ &amp;p ]( <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp; elem ) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            return elem.p == p;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        } );</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keywordflow">if</span>( iter == <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.end() ) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> null_terrain{};</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <span class="keywordflow">return</span> null_terrain;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="keywordflow">return</span> *iter;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l01283">check()</a>, and <a class="el" href="overmap_8cpp_source.html#l01210">finalize()</a>.</p>

</div>
</div>
<a id="a587aaf395153a3c246ce5dae2f72edfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587aaf395153a3c246ce5dae2f72edfc">&#9670;&nbsp;</a></span>place()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspecial__placement__result.html">special_placement_result</a> fixed_overmap_special_data::place </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classovermap.html">overmap</a> &amp;&#160;</td>
          <td class="paramname"><em>om</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a>&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcity.html">city</a> &amp;&#160;</td>
          <td class="paramname"><em>cit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>must_be_unexplored</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#a1a12d77f72c0b094b44c5567b4b93e2b">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01410">1410</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                                                                  {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <a class="code" href="structspecial__placement__result.html">special_placement_result</a> result;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;elem : <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a> ) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_om_omt</a> <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> = <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a> + <a class="code" href="namespaceom__direction.html#a81218991d18ce76097c769d5c3f185c2">om_direction::rotate</a>( elem.p, dir );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <span class="keywordflow">if</span>( !( elem.terrain == <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">oter_str_id::NULL_ID</a>() ) ) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                result.<a class="code" href="structspecial__placement__result.html#a66ae8ef125da7d81a260bccf764caab3">omts_used</a>.push_back( <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> );</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                <span class="keyword">const</span> <a class="code" href="classint__id.html">oter_id</a> tid = elem.terrain-&gt;<a class="code" href="structoter__t.html#a5b69161ceba78a1954395d340fad0f0a">get_rotated</a>( dir );</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.ter_set( <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a>, tid );</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <span class="keywordflow">if</span>( blob ) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = -2; x &lt;= 2; x++ ) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = -2; y &lt;= 2; y++ ) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_om_omt</a> nearby_pos = <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> + <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( x, y );</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                            <span class="keywordflow">if</span>( !<a class="code" href="classovermap.html#acd3128520046b6006cb1d7dd1425053c">overmap::inbounds</a>( nearby_pos ) ) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                            }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 1 + <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( x ) + <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( y ) ) &amp;&amp;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                                elem.can_be_placed_on( <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.ter( nearby_pos ) ) ) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                                <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.ter_set( nearby_pos, tid );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                            }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                        }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                    }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="comment">// Make connections.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__connection.html">overmap_special_connection</a> &amp;elem : <a class="code" href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">connections</a> ) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <span class="keywordflow">if</span>( elem.connection ) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_om_omt</a> rp = <a class="code" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">origin</a> + <a class="code" href="namespaceom__direction.html#a81218991d18ce76097c769d5c3f185c2">om_direction::rotate</a>( elem.p, dir );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bc">cube_direction</a> initial_dir = elem.initial_dir;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                <span class="keywordflow">if</span>( initial_dir != <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51">cube_direction::last</a> ) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                    initial_dir = initial_dir + dir;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <span class="keywordflow">if</span>( cit ) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                    <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.build_connection( cit.<a class="code" href="structcity.html#a431de6762e8e0d96b6e0e95341ee608e">pos</a>, rp.<a class="code" href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">xy</a>(), elem.p.z, *elem.connection,</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                                         must_be_unexplored, initial_dir );</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                <span class="comment">// if no city present, search for nearby road within 50 tiles and make</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <span class="comment">// connection to it instead</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_om_omt</a> &amp;nearby_point : <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( rp, 50 ) ) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                        <span class="keywordflow">if</span>( <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.check_ot( <span class="stringliteral">&quot;road&quot;</span>, <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">ot_match_type::contains</a>, nearby_point ) ) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                            <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.build_connection(</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                nearby_point.xy(), rp.<a class="code" href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">xy</a>(), elem.p.z, *elem.connection,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                must_be_unexplored, initial_dir );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                        }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    }</div>
<div class="ttc" id="acalendar_8cpp_html_a6fe65b9e39049b6d361709241a23d1b6"><div class="ttname"><a href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a></div><div class="ttdeci">static lat_long location</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00034">calendar.cpp:34</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">cata_variant_type::point</a></div><div class="ttdeci">@ point</div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::overmap, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a7b5804160d1d0e69a9f2fba098bea723"><div class="ttname"><a href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00273">coordinates.h:273</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; oter_t &gt;</a></div></div>
<div class="ttc" id="aclassovermap_html_acd3128520046b6006cb1d7dd1425053c"><div class="ttname"><a href="classovermap.html#acd3128520046b6006cb1d7dd1425053c">overmap::inbounds</a></div><div class="ttdeci">static bool inbounds(const tripoint_om_omt &amp;p, int clearance=0)</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l03338">overmap.cpp:3338</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; oter_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; oter_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="acoordinates_8h_html_a560abf1cd341e88e2f13f454ec2ecc99"><div class="ttname"><a href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00848">coordinates.h:848</a></div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bc"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bc">cube_direction</a></div><div class="ttdeci">cube_direction</div><div class="ttdef"><b>Definition:</b> <a href="cube__direction_8h_source.html#l00019">cube_direction.h:19</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">ot_match_type::contains</a></div><div class="ttdeci">@ contains</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="anamespacecoords_html_ab3261fe84f776b15113e1cec5fe3a560"><div class="ttname"><a href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">coords::om</a></div><div class="ttdeci">constexpr scale om</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00042">coordinates.h:42</a></div></div>
<div class="ttc" id="anamespacecoords_html_ad99808a305ad40299e592d1266bed4a7"><div class="ttname"><a href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7">coords::origin</a></div><div class="ttdeci">origin</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00065">coordinates.h:65</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a81218991d18ce76097c769d5c3f185c2"><div class="ttname"><a href="namespaceom__direction.html#a81218991d18ce76097c769d5c3f185c2">om_direction::rotate</a></div><div class="ttdeci">point rotate(const point &amp;p, type dir)</div><div class="ttdoc">Various rotations.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06435">overmap.cpp:6435</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="astructcity_html_a431de6762e8e0d96b6e0e95341ee608e"><div class="ttname"><a href="structcity.html#a431de6762e8e0d96b6e0e95341ee608e">city::pos</a></div><div class="ttdeci">point_om_omt pos</div><div class="ttdef"><b>Definition:</b> <a href="city_8h_source.html#l00031">city.h:31</a></div></div>
<div class="ttc" id="astructoter__t_html_a5b69161ceba78a1954395d340fad0f0a"><div class="ttname"><a href="structoter__t.html#a5b69161ceba78a1954395d340fad0f0a">oter_t::get_rotated</a></div><div class="ttdeci">oter_id get_rotated(om_direction::type dir) const</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00927">overmap.cpp:927</a></div></div>
<div class="ttc" id="astructspecial__placement__result_html"><div class="ttname"><a href="structspecial__placement__result.html">special_placement_result</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l01182">overmap.cpp:1182</a></div></div>
<div class="ttc" id="astructspecial__placement__result_html_a66ae8ef125da7d81a260bccf764caab3"><div class="ttname"><a href="structspecial__placement__result.html#a66ae8ef125da7d81a260bccf764caab3">special_placement_result::omts_used</a></div><div class="ttdeci">std::vector&lt; tripoint_om_omt &gt; omts_used</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l01183">overmap.cpp:1183</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="overmap_8cpp_source.html#l01469">connections</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a>, <a class="el" href="overmap_8cpp_source.html#l00927">oter_t::get_rotated()</a>, <a class="el" href="overmap_8cpp_source.html#l03338">overmap::inbounds()</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca98bd1c45684cf587ac2347a92dd7bb51">last</a>, <a class="el" href="calendar_8cpp_source.html#l00034">location</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; oter_t &gt;::NULL_ID()</a>, <a class="el" href="coordinates_8h_source.html#l00042">coords::om</a>, <a class="el" href="overmap_8cpp_source.html#l01183">special_placement_result::omts_used</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="city_8h_source.html#l00031">city::pos</a>, <a class="el" href="overmap_8cpp_source.html#l06435">om_direction::rotate()</a>, <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>, and <a class="el" href="coordinates_8h_source.html#l00273">coords::coord_point&lt; Point, Origin, Scale, InBounds &gt;::xy()</a>.</p>

</div>
</div>
<a id="a61ce374e6b4e6262eb825f1601db1b41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61ce374e6b4e6262eb825f1601db1b41">&#9670;&nbsp;</a></span>preview_terrains()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a>&gt; fixed_overmap_special_data::preview_terrains </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#ad14031521956059042eaa2299c8b1e38">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01375">1375</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                                                                         {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        std::vector&lt;overmap_special_terrain&gt; result;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        std::copy_if( <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.begin(), <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.end(), std::back_inserter( result ),</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp; <a class="code" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a47afa88cfb198f52733fa3d1f43d7f04">terrain</a> ) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            return terrain.p.z == 0;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        } );</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    }</div>
<div class="ttc" id="adescriptions_8cpp_html_aeed2fa049c80ba4e2960866b4e00d5d8a47afa88cfb198f52733fa3d1f43d7f04"><div class="ttname"><a href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a47afa88cfb198f52733fa3d1f43d7f04">description_target::terrain</a></div><div class="ttdeci">@ terrain</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="descriptions_8cpp.html#aeed2fa049c80ba4e2960866b4e00d5d8a47afa88cfb198f52733fa3d1f43d7f04">terrain</a>, and <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>.</p>

</div>
</div>
<a id="aaf3c8eb27fb1049934a2bb0aa4501a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3c8eb27fb1049934a2bb0aa4501a02">&#9670;&nbsp;</a></span>required_locations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structovermap__special__locations.html">overmap_special_locations</a>&gt; fixed_overmap_special_data::required_locations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#a1916ed07c3d34ce582ce0698757bde90">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01384">1384</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                                                                             {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        std::vector&lt;overmap_special_locations&gt; result;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        result.reserve( <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.size() );</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        std::copy( <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.begin(), <a class="code" href="structfixed__overmap__special__data.html#a803dd7f58ecdabe4479d21dedca2de25">terrains</a>.end(), std::back_inserter( result ) );</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap_8cpp_source.html#l01468">terrains</a>.</p>

</div>
</div>
<a id="ac2889903f72962045f25d0f34eeaf213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2889903f72962045f25d0f34eeaf213">&#9670;&nbsp;</a></span>score_rotation_at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fixed_overmap_special_data::score_rotation_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classovermap.html">overmap</a> &amp;&#160;</td>
          <td class="paramname"><em>om</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a>&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="structovermap__special__data.html#acbf32324629c20a4634e59cc0893556d">overmap_special_data</a>.</p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01391">1391</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                                               {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="classscore.html">score</a> = 0;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structovermap__special__connection.html">overmap_special_connection</a> &amp;con : <a class="code" href="structfixed__overmap__special__data.html#a5bdaaf1c99a282fd77d340ec7ebfbb6b">connections</a> ) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_om_omt</a> rp = p + <a class="code" href="namespaceom__direction.html#a81218991d18ce76097c769d5c3f185c2">om_direction::rotate</a>( con.p, r );</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classovermap.html#acd3128520046b6006cb1d7dd1425053c">overmap::inbounds</a>( rp ) ) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">oter_id</a> &amp;oter = <a class="code" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.ter( rp );</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <span class="keywordflow">if</span>( ( oter-&gt;<a class="code" href="structoter__t.html#ab1638475c8650985ec100f0bc7fcafe7">get_type_id</a>() == <a class="code" href="classstring__id.html">oter_type_str_id</a>( con.terrain.str() ) ) ) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                ++<a class="code" href="classscore.html">score</a>; <span class="comment">// Found another one satisfied connection.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !oter || con.existing || !con.connection-&gt;pick_subtype_for( oter ) ) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classscore.html">score</a>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    }</div>
<div class="ttc" id="aclassscore_html"><div class="ttname"><a href="classscore.html">score</a></div><div class="ttdef"><b>Definition:</b> <a href="event__statistics_8h_source.html#l00101">event_statistics.h:102</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap_8cpp_source.html#l01469">connections</a>, <a class="el" href="omdata_8h_source.html#l00323">oter_t::get_type_id()</a>, <a class="el" href="overmap_8cpp_source.html#l03338">overmap::inbounds()</a>, <a class="el" href="coordinates_8h_source.html#l00042">coords::om</a>, and <a class="el" href="overmap_8cpp_source.html#l06435">om_direction::rotate()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5bdaaf1c99a282fd77d340ec7ebfbb6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bdaaf1c99a282fd77d340ec7ebfbb6b">&#9670;&nbsp;</a></span>connections</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structovermap__special__connection.html">overmap_special_connection</a>&gt; fixed_overmap_special_data::connections</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01469">1469</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l01283">check()</a>, <a class="el" href="overmap_8cpp_source.html#l01210">finalize()</a>, <a class="el" href="overmap_8cpp_source.html#l01410">place()</a>, and <a class="el" href="overmap_8cpp_source.html#l01391">score_rotation_at()</a>.</p>

</div>
</div>
<a id="a803dd7f58ecdabe4479d21dedca2de25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a803dd7f58ecdabe4479d21dedca2de25">&#9670;&nbsp;</a></span>terrains</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a>&gt; fixed_overmap_special_data::terrains</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01468">1468</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l01283">check()</a>, <a class="el" href="overmap_8cpp_source.html#l01210">finalize()</a>, <a class="el" href="overmap_8cpp_source.html#l01267">finalize_mapgen_parameters()</a>, <a class="el" href="overmap_8cpp_source.html#l01363">get_terrain_at()</a>, <a class="el" href="overmap_8cpp_source.html#l01410">place()</a>, <a class="el" href="overmap_8cpp_source.html#l01375">preview_terrains()</a>, and <a class="el" href="overmap_8cpp_source.html#l01384">required_locations()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/<a class="el" href="overmap_8cpp_source.html">overmap.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:38 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
