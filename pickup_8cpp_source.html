<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/pickup.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">pickup.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pickup_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pickup_8h.html">pickup.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="auto__pickup_8h.html">auto_pickup.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="colony_8h.html">colony.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="input_8h.html">input.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="input__context_8h.html">input_context.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__location_8h.html">item_location.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="item__stack_8h.html">item_stack.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="line_8h.html">line.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mapdata_8h.html">mapdata.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="options_8h.html">options.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="player__activity_8h.html">player_activity.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="point_8h.html">point.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="popup_8h.html">popup.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ui_8h.html">ui.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units__utility_8h.html">units_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#ac769307dd4918e4ccdd6cb4ec8b3b4b8">   39</a></span>&#160;<span class="keyword">using</span> <a class="code" href="pickup_8cpp.html#ac769307dd4918e4ccdd6cb4ec8b3b4b8">ItemCount</a> = std::pair&lt;item, int&gt;;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">   40</a></span>&#160;<span class="keyword">using</span> <a class="code" href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">PickupMap</a> = std::map&lt;std::string, ItemCount&gt;;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#ae06646808abdd3f4718d426b15e54392">   42</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> <a class="code" href="pickup_8cpp.html#ae06646808abdd3f4718d426b15e54392">json_flag_SHREDDED</a>( <span class="stringliteral">&quot;SHREDDED&quot;</span> );</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a0477eaea50c64fa3e2089bda562ed2bf">   43</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">zone_type_id</a> <a class="code" href="pickup_8cpp.html#a0477eaea50c64fa3e2089bda562ed2bf">zone_type_NO_AUTO_PICKUP</a>( <span class="stringliteral">&quot;NO_AUTO_PICKUP&quot;</span> );</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//helper function for Pickup::autopickup</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#aeb211bd7c9f9377d5ac40b7d0f815bf0">   46</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="pickup_8cpp.html#aeb211bd7c9f9377d5ac40b7d0f815bf0">show_pickup_message</a>( <span class="keyword">const</span> <a class="code" href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">PickupMap</a> &amp;mapPickup )</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : mapPickup ) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">if</span>( entry.second.first.invlet != 0 ) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pick up: %d %s [%c]&quot;</span> ), entry.second.second,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                     entry.second.first.display_name( entry.second.second ), entry.second.first.invlet );</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( entry.second.first.count_by_charges() ) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pick up: %s&quot;</span> ), entry.second.first.display_name( entry.second.second ) );</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pick up: %d %s&quot;</span> ), entry.second.second,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                     entry.second.first.display_name( entry.second.second ) );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structpickup__count.html">   61</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpickup__count.html">pickup_count</a> {</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structpickup__count.html#a64d0be2bd0df6a4e81ee48fde3df5c79">   62</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structpickup__count.html#a64d0be2bd0df6a4e81ee48fde3df5c79">pick</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">//count is 0 if the whole stack is being picked up, nonzero otherwise.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structpickup__count.html#aee71c7b15455b2d54bf101dedd3533e8">   64</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structpickup__count.html#aee71c7b15455b2d54bf101dedd3533e8">count</a> = 0;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;};</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">   67</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">   68</a></span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a> = -1,</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">   69</a></span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>,</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">   70</a></span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>,</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">   71</a></span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">   73</a></span>&#160;};</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a4a25436dd926395069ea5277fe5fbc9a">   75</a></span>&#160;<span class="keyword">static</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> <a class="code" href="pickup_8cpp.html#a4a25436dd926395069ea5277fe5fbc9a">handle_problematic_pickup</a>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it, <span class="keyword">const</span> std::string &amp;explain )</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = explain;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classitem.html">item</a> empty_it( it );</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    empty_it.<a class="code" href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">get_contents</a>().<a class="code" href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">clear_items</a>();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">bool</span> can_pickup = <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.can_stash( empty_it ) &amp;&amp; <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.can_pickWeight( empty_it );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">is_bucket_nonempty</a>() ) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wield %s&quot;</span> ), it.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>, can_pickup, <span class="charliteral">&#39;s&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spill contents of %s, then pick up %s&quot;</span> ),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        it.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), it.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> choice = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span>( choice &lt;= CANCEL || choice &gt;= <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a> ) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a><span class="keyword">&gt;</span>( choice );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">  103</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">Pickup::query_thief</a>()</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a> = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> force_uc = get_option&lt;bool&gt;( <span class="stringliteral">&quot;FORCE_CAPITAL_YN&quot;</span> );</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;allow_key = force_uc ? <a class="code" href="classinput__context.html#a84ffc12a29900a12517151cac4013948">input_context::disallow_lower_case_or_non_modified_letters</a></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                            : <a class="code" href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    std::string answer = <a class="code" href="classquery__popup.html">query_popup</a>()</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                         .<a class="code" href="classquery__popup.html#ab5a4d489f87e1e94671cc9b2b1c8e750">preferred_keyboard_mode</a>( <a class="code" href="input__enums_8h.html#a427553e505f5e242305906ce8a1ca8b5a1a54c1036ccb10069e9c06281d52007a">keyboard_mode::keycode</a> )</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                         .<a class="code" href="classquery__popup.html#aaf394e7bc1c55779a9527e98d5a350d9">allow_cancel</a>( <span class="keyword">false</span> )</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                         .<a class="code" href="classquery__popup.html#a0fcdd9c0efe58e77f0dbebe2cf0a0a92">context</a>( <span class="stringliteral">&quot;YES_NO_ALWAYS_NEVER&quot;</span> )</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                         .<a class="code" href="classquery__popup.html#ab8f062cd374f409c7191b608c074ec1c">message</a>( <span class="stringliteral">&quot;%s&quot;</span>, force_uc &amp;&amp; !<a class="code" href="input_8cpp.html#a36b11afdfd91247213fd3adbad09c5e9">is_keycode_mode_supported</a>()</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                   ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Picking up this item will be considered stealing, continue?  (Case sensitive)&quot;</span> )</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                   : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Picking up this item will be considered stealing, continue?&quot;</span> ) )</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                         .<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;YES&quot;</span>, allow_key ) <span class="comment">// yes, steal all items in this location that is selected</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                         .<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;NO&quot;</span>, allow_key ) <span class="comment">// no, pick up only what is free</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                         .<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;ALWAYS&quot;</span>, allow_key ) <span class="comment">// Yes, steal all items and stop asking me this question</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                         .<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;NEVER&quot;</span>, allow_key ) <span class="comment">// no, only grab free item and never ask me again</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                         .<a class="code" href="classquery__popup.html#a9e325c6866f26173987a5c93640e9662">cursor</a>( 1 ) <span class="comment">// default to the second option `NO`</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                         .<a class="code" href="classquery__popup.html#aa26700877b0cf2a70bb3af9926c9588b">query</a>()</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                         .<a class="code" href="structquery__popup_1_1result.html#a319891694f37a6970df28ca2279cf851">action</a>; <span class="comment">// retrieve the input action</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span>( answer == <span class="stringliteral">&quot;YES&quot;</span> ) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE&quot;</span>, <span class="stringliteral">&quot;THIEF_STEAL&quot;</span> );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE_KEEP&quot;</span>, <span class="stringliteral">&quot;NO&quot;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( answer == <span class="stringliteral">&quot;NO&quot;</span> ) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE&quot;</span>, <span class="stringliteral">&quot;THIEF_HONEST&quot;</span> );</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE_KEEP&quot;</span>, <span class="stringliteral">&quot;NO&quot;</span> );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( answer == <span class="stringliteral">&quot;ALWAYS&quot;</span> ) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE&quot;</span>, <span class="stringliteral">&quot;THIEF_STEAL&quot;</span> );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE_KEEP&quot;</span>, <span class="stringliteral">&quot;YES&quot;</span> );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( answer == <span class="stringliteral">&quot;NEVER&quot;</span> ) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE&quot;</span>, <span class="stringliteral">&quot;THIEF_HONEST&quot;</span> );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">u</a>.set_value( <span class="stringliteral">&quot;THIEF_MODE_KEEP&quot;</span>, <span class="stringliteral">&quot;YES&quot;</span> );</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">// error</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Not a valid option [ %s ]&quot;</span>, answer );</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a963440dafddb061fe59cd747f1e4cf88">  146</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="pickup_8cpp.html#a963440dafddb061fe59cd747f1e4cf88">is_bulk_load</a>( <span class="keyword">const</span> <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a> &amp;lhs, <span class="keyword">const</span> <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a> &amp;rhs )</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// Check if storage is the same</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span>( lhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a> &amp;&amp; rhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a> &amp;&amp; lhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a>-&gt;<a class="code" href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">stacks_with</a>( *rhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a> ) &amp;&amp;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        lhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a>.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() == <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5f0b6ebc4bea10285ba2b8a6ce78b863">item_location::type::container</a> &amp;&amp;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        rhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a>.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>() == <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5f0b6ebc4bea10285ba2b8a6ce78b863">item_location::type::container</a> &amp;&amp;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        lhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a>.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>() == rhs.<a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a>.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>() ) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// Check if source is the same</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span>( lhs.<a class="code" href="structPickup_1_1pick__info.html#a4104dc04e982751485abdb405293bc2b">src_type</a> == rhs.<a class="code" href="structPickup_1_1pick__info.html#a4104dc04e982751485abdb405293bc2b">src_type</a> ) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">switch</span>( lhs.<a class="code" href="structPickup_1_1pick__info.html#a4104dc04e982751485abdb405293bc2b">src_type</a> ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5f0b6ebc4bea10285ba2b8a6ce78b863">item_location::type::container</a>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <span class="keywordflow">return</span> lhs.<a class="code" href="structPickup_1_1pick__info.html#a0795a281c88bae336eab6ae0f5d01216">src_container</a> == rhs.<a class="code" href="structPickup_1_1pick__info.html#a0795a281c88bae336eab6ae0f5d01216">src_container</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae">item_location::type::map</a>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5a76e813d6a0a40548b91acc11557bd2">item_location::type::vehicle</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    <span class="keywordflow">return</span> lhs.<a class="code" href="structPickup_1_1pick__info.html#a30949090ef2826eaef2010d15d003277">src_pos</a> == rhs.<a class="code" href="structPickup_1_1pick__info.html#a30949090ef2826eaef2010d15d003277">src_pos</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// Returns false if pickup caused a prompt and the player selected to cancel pickup</span></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="pickup_8cpp.html#a04d3433848a436ca2c93c87909a01917">  172</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="pickup_8cpp.html#a04d3433848a436ca2c93c87909a01917">pick_one_up</a>( <a class="code" href="classitem__location.html">item_location</a> &amp;loc, <span class="keywordtype">int</span> quantity, <span class="keywordtype">bool</span> &amp;got_water, <span class="keywordtype">bool</span> &amp;got_gas,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                         <a class="code" href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">PickupMap</a> &amp;mapPickup, <span class="keywordtype">bool</span> <a class="code" href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">autopickup</a>, <span class="keywordtype">bool</span> &amp;stash_successful, <span class="keywordtype">bool</span> &amp;got_frozen_liquid,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                         <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a> &amp;info )</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">bool</span> picked_up = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">bool</span> crushed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a> pre_info( info );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a> option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// We already checked in do_pickup if this was a nullptr</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// Make copies so the original remains untouched if we bail out</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> newloc = loc;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">//original item reference</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;it = *newloc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">//new item (copy)</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classitem.html">item</a> newit = it;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span>( !newit.<a class="code" href="classitem.html#a0b35b9066ad71987b77727af45d96059">is_owned_by</a>( player_character, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// Has the player given input on if stealing is ok?</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_ASK&quot;</span> ) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <a class="code" href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">Pickup::query_thief</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;THIEF_MODE&quot;</span> ) == <span class="stringliteral">&quot;THIEF_HONEST&quot;</span> ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Since we are honest, return no problem before picking up</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        player_character.<a class="code" href="classCharacter.html#a72814cbd916b863b7b20b43345ef2329">invlet_to_item</a>( newit.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// Existing invlet is not re-usable, remove it and let the code in player.cpp/inventory.cpp</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// add a new invlet, otherwise keep the (usable) invlet.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        newit.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Handle charges, quantity == 0 means move all</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>( quantity != 0 &amp;&amp; newit.<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; quantity ) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = quantity;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">bool</span> did_prompt = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">is_frozen_liquid</a>() ) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="pickup_8cpp.html#ae06646808abdd3f4718d426b15e54392">json_flag_SHREDDED</a> ) ) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            crushed = player_character.<a class="code" href="classCharacter.html#a6fee5f76f33b6b476efedb8e23c36eb2">crush_frozen_liquid</a>( newloc );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span>( crushed ) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                newit.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="pickup_8cpp.html#ae06646808abdd3f4718d426b15e54392">json_flag_SHREDDED</a> );</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                got_frozen_liquid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        got_water = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) ) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        got_gas = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">is_bucket_nonempty</a>() ) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">autopickup</a> ) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keyword">const</span> std::string &amp;explain = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Can&#39;t stash %s while it&#39;s not empty&quot;</span> ),</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                         newit.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            option = <a class="code" href="pickup_8cpp.html#a4a25436dd926395069ea5277fe5fbc9a">handle_problematic_pickup</a>( newit, explain );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            did_prompt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !player_character.<a class="code" href="classCharacter.html#aa53d35923b539a53325f071cc1e94ae4">can_pickWeight_partial</a>( newit, <span class="keyword">false</span> ) ||</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;               !player_character.<a class="code" href="classCharacter.html#af84eccbb8811da4ef5ea1a991ac28094">can_stash_partial</a>( newit, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        stash_successful = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        option = <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">switch</span>( option ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a>:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="comment">// Some other option</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a>:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            picked_up = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a>:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            picked_up = player_character.<a class="code" href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">wield</a>( newit );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a>:</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Tried to spill contents from an empty container&quot;</span> );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">//using original item, possibly modifying it</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            picked_up = it.<a class="code" href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">spill_contents</a>( player_character );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">if</span>( !picked_up ) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span> invlet = newit.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                newit = it;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                newit.<a class="code" href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">invlet</a> = invlet;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// Intentional fallthrough</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a>: {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordtype">int</span> last_charges = newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="classret__val.html">ret_val&lt;item_location&gt;</a> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = player_character.<a class="code" href="classCharacter.html#ac1b7a385cf58425333922f844b85ec0b">i_add_or_fill</a>( newit, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, &amp;it,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                                         <span class="comment">/*allow_drop=*/</span><span class="keyword">false</span>, <span class="comment">/*allow_wield=*/</span><span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> added_it = <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.value();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.success() ) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="keywordflow">if</span>( added_it == <a class="code" href="classitem__location.html#ac32191753a11cc2f4aa2ad6d50e6405b">item_location::nowhere</a> ) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = last_charges - newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                    newit.<a class="code" href="classitem.html#adf662fb946f6a1188fe5e340ff80a95a">on_pickup</a>( player_character );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    <span class="keywordflow">if</span>( newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> != 0 ) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                        <span class="keyword">auto</span> &amp;entry = mapPickup[newit.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>()];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        entry.second += newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        entry.first = newit;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        picked_up = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( &amp;*added_it == &amp;it ) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    <span class="comment">// merged to the original stack, restore original charges</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = last_charges;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    <span class="comment">// successfully added</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="keyword">auto</span> &amp;entry = mapPickup[newit.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>()];</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    entry.second += newit.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    entry.first = newit;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    picked_up = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">if</span>( picked_up ) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="comment">// Update info</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                info.<a class="code" href="structPickup_1_1pick__info.html#ad58cf76c7787fc05a3dac02b73656752">set_dst</a>( added_it );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span>( picked_up ) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        info.<a class="code" href="structPickup_1_1pick__info.html#ad950d71d3bc3ef6c2220938c6d488907">set_src</a>( loc );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        info.<a class="code" href="structPickup_1_1pick__info.html#aa2c92bc499822cdf0d8c6a5b1f218569">total_bulk_volume</a> += loc-&gt;<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>( <span class="keyword">false</span>, <span class="keyword">false</span>, quantity );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="pickup_8cpp.html#a963440dafddb061fe59cd747f1e4cf88">is_bulk_load</a>( pre_info, info ) ) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="comment">// Cost to take an item from a container or map</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            player_character.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -loc.<a class="code" href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">obtain_cost</a>( player_character, quantity ) );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="comment">// Pure cost to handling item excluding overhead.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            player_character.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( player_character.<a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( *loc, <span class="keyword">true</span>, 0, quantity,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                   <span class="keyword">true</span> ), 1 ) );</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="classcontents__change__handler.html">contents_change_handler</a> handler;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        handler.<a class="code" href="classcontents__change__handler.html#a327c4c2672f8e662338e72e6a8d1210c">unseal_pocket_containing</a>( loc );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;orig_it = *loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="comment">// Subtract moved charges instead of assigning leftover charges,</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// since the total charges of the original item may have changed</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// due to merging.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span>( orig_it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            orig_it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= newit.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        player_character.<a class="code" href="classCharacter.html#a3801457283281bb7dcc0572d3f707e10">flag_encumbrance</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        player_character.<a class="code" href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">invalidate_weight_carried_cache</a>();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">return</span> picked_up || !did_prompt;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="namespacePickup.html#a43f67199ea70997956834b5bb3b6c92c">  336</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacePickup.html#a43f67199ea70997956834b5bb3b6c92c">Pickup::do_pickup</a>( std::vector&lt;item_location&gt; &amp;targets, std::vector&lt;int&gt; &amp;quantities,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                        <span class="keywordtype">bool</span> <a class="code" href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">autopickup</a>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        <span class="keywordtype">bool</span> &amp;stash_successful, <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a> &amp;info )</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">bool</span> got_water = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">bool</span> got_gas = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">bool</span> got_frozen_liquid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">bool</span> weight_is_okay = ( player_character.<a class="code" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() &lt;= player_character.<a class="code" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() );</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// Map of items picked up so we can output them all at the end and</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// merge dropping items with the same name.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">PickupMap</a> mapPickup;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">bool</span> problem = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">while</span>( !problem &amp;&amp; player_character.<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &gt;= 0 &amp;&amp; !targets.empty() ) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> target = std::move( targets.back() );</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordtype">int</span> quantity = quantities.back();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="comment">// Whether we pick the item up or not, we&#39;re done trying to do so,</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">// so remove it from the list.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        targets.pop_back();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        quantities.pop_back();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span>( !target ) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;lost target item of ACT_PICKUP&quot;</span> );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        problem = !<a class="code" href="pickup_8cpp.html#a04d3433848a436ca2c93c87909a01917">pick_one_up</a>( target, quantity, got_water, got_gas, mapPickup, <a class="code" href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">autopickup</a>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                stash_successful, got_frozen_liquid, info );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span>( info.<a class="code" href="structPickup_1_1pick__info.html#aa2c92bc499822cdf0d8c6a5b1f218569">total_bulk_volume</a> &gt; 200_ml ) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="comment">// Bulk loading is not allowed beyond a certain volume</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            info = <a class="code" href="structPickup_1_1pick__info.html">Pickup::pick_info</a>();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span>( !mapPickup.empty() ) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="pickup_8cpp.html#aeb211bd7c9f9377d5ac40b7d0f815bf0">show_pickup_message</a>( mapPickup );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span>( got_frozen_liquid ) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Chunks of frozen liquid cannot be picked up without the correct tools.&quot;</span> ) );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span>( got_water ) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spilt liquid cannot be picked back up.  Try mopping it instead.&quot;</span> ) );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">if</span>( got_gas ) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spilt gasses cannot be picked up.  They will disappear over time.&quot;</span> ) );</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span>( weight_is_okay &amp;&amp; player_character.<a class="code" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() &gt; player_character.<a class="code" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() ) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re overburdened!&quot;</span> ) );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    player_character.<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> !problem;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">// Auto pickup items at given location</span></div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="namespacePickup.html#aa79735a5fb835ca5563988c16e78cb74">  393</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacePickup.html#aa79735a5fb835ca5563988c16e78cb74">Pickup::autopickup</a>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p )</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;local = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span>( local.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; !get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_PICKUP_ADJACENT&quot;</span> ) ) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// which items are we grabbing?</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    std::vector&lt;item_stack::iterator&gt; here;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">const</span> <a class="code" href="classmap__stack.html">map_stack</a> mapitems = local.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">item_stack::iterator</a> it = mapitems.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); it != mapitems.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ++it ) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        here.push_back( it );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Recursively pick up adjacent items if that option is on.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_PICKUP_ADJACENT&quot;</span> ) &amp;&amp; <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.pos() == p ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">//Autopickup adjacent</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        std::array&lt;direction, 8&gt; adjacentDir = {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a>, <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a5a889abd3c291052e9dcce6adbc4092e">direction::NORTHEAST</a>, <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a>,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3ad8edaf2a35fe6e4eb32cc57b7d8fa270">direction::SOUTHEAST</a>, <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a>, <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96f30aeb5638ae7ac40d90b5ebdde47e">direction::SOUTHWEST</a>,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a>, <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a54486c15c75f9e0ada3484a7812252ff">direction::NORTHWEST</a></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        };</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> &amp;elem : adjacentDir ) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> apos = <a class="code" href="structtripoint.html">tripoint</a>( <a class="code" href="line_8cpp.html#a399f25250fad82fbc37b72a78dfafb43">displace_XY</a>( elem ), 0 );</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            apos += p;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <a class="code" href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">autopickup</a>( apos );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Bail out if this square cannot be auto-picked-up</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;check_zone( <a class="code" href="pickup_8cpp.html#a0477eaea50c64fa3e2089bda562ed2bf">zone_type_NO_AUTO_PICKUP</a>, p ) ||</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        local.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a">ter_furn_flag::TFLAG_SEALED</a>, p ) ) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="activity__item__handling_8cpp.html#a14dcded7a48aa4f96aeecf1e76f8f947">drop_locations</a> selected_items = <a class="code" href="namespaceauto__pickup.html#a5e507c16c032cb774f8d4215a27a807d">auto_pickup::select_items</a>( here, p );</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span>( selected_items.empty() ) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// At this point we&#39;ve selected our items, register an activity to pick them up.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    std::vector&lt;int&gt; quantities;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    std::vector&lt;item_location&gt; target_items;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="activity__item__handling_8cpp.html#a115d183c47f43a022e7d4aa0f26e05b7">drop_location</a> selected : selected_items ) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="classitem.html">item</a> *it = selected.first.get_item();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        target_items.push_back( selected.first );</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        quantities.push_back( it-&gt;<a class="code" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() ? it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : 0 );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="classpickup__activity__actor.html">pickup_activity_actor</a> actor( target_items, quantities, <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.pos(), <span class="keyword">true</span> );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.assign_activity( actor );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// Auto pickup will need to auto resume since there can be several of them on the stack.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.activity.auto_resume = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="namespacePickup.html#a0d66127845c7f02c3cf50466ab7c5959">  447</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacePickup.html#a0d66127845c7f02c3cf50466ab7c5959">Pickup::cost_to_move_item</a>( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp;who, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it )</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Do not involve inventory capacity, it&#39;s not like you put it in backpack</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 50;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span>( who.<a class="code" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// No free hand? That will cost you extra</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += 20;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> delta_weight = <a class="code" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a>( it.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() - who.<a class="code" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// Is it too heavy? It&#39;ll take 10 moves per kg over limit</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, delta_weight / 100 );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Keep it sane - it&#39;s not a long activity</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 400, <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="structPickup_1_1pick__info.html#a95f335c0f064586c8e79c14e0e8a4888">  463</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structPickup_1_1pick__info.html#a95f335c0f064586c8e79c14e0e8a4888">Pickup::pick_info::serialize</a>( <a class="code" href="classJsonOut.html">JsonOut</a> &amp;jsout )<span class="keyword"> const</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    jsout.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;total_bulk_volume&quot;</span>, <a class="code" href="structPickup_1_1pick__info.html#aa2c92bc499822cdf0d8c6a5b1f218569">total_bulk_volume</a> );</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;src_type&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="structPickup_1_1pick__info.html#a4104dc04e982751485abdb405293bc2b">src_type</a> ) );</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;src_pos&quot;</span>, <a class="code" href="structPickup_1_1pick__info.html#a30949090ef2826eaef2010d15d003277">src_pos</a> );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;src_container&quot;</span>, <a class="code" href="structPickup_1_1pick__info.html#a0795a281c88bae336eab6ae0f5d01216">src_container</a> );</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    jsout.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;dst&quot;</span>, <a class="code" href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">dst</a> );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    jsout.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="structPickup_1_1pick__info.html#af7345cce985df1bcd283df6d3abee75e">  474</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structPickup_1_1pick__info.html#af7345cce985df1bcd283df6d3abee75e">Pickup::pick_info::deserialize</a>( <span class="keyword">const</span> <a class="code" href="classJsonObject.html">JsonObject</a> &amp;jsobj )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">int</span> src_type_ = 0;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;total_bulk_volume&quot;</span>, total_bulk_volume );</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;src_type&quot;</span>, src_type_ );</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    src_type = <span class="keyword">static_cast&lt;</span><a class="code" href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888d">item_location::type</a><span class="keyword">&gt;</span>( src_type_ );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;src_pos&quot;</span>, src_pos );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;src_container&quot;</span>, src_container );</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    jsobj.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;dst&quot;</span>, dst );</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="structPickup_1_1pick__info.html#ad950d71d3bc3ef6c2220938c6d488907">  485</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structPickup_1_1pick__info.html#ad950d71d3bc3ef6c2220938c6d488907">Pickup::pick_info::set_src</a>( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;src_ )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// item_location of source may become invalid after the item is moved, so save the information separately.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    src_pos = src_.<a class="code" href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">position</a>();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    src_container = src_.<a class="code" href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">parent_item</a>();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    src_type = src_.<a class="code" href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">where</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="structPickup_1_1pick__info.html#ad58cf76c7787fc05a3dac02b73656752">  493</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structPickup_1_1pick__info.html#ad58cf76c7787fc05a3dac02b73656752">Pickup::pick_info::set_dst</a>( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;dst_ )</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    dst = dst_;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;std::vector&lt;Pickup::pickup_rect&gt; <a class="code" href="structPickup_1_1pickup__rect.html#a1a23dba1a03c4b891ba1a749645afcb6">Pickup::pickup_rect::list</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="structPickup_1_1pickup__rect.html#af8303fe0bacf8885f8d4fd387a6ee7b8">  500</a></span>&#160;<a class="code" href="structPickup_1_1pickup__rect.html">Pickup::pickup_rect</a> *<a class="code" href="structPickup_1_1pickup__rect.html#af8303fe0bacf8885f8d4fd387a6ee7b8">Pickup::pickup_rect::find_by_coordinate</a>( <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> &amp;p )</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structPickup_1_1pickup__rect.html">pickup_rect</a> &amp;rect : <a class="code" href="structPickup_1_1pickup__rect.html#a1a23dba1a03c4b891ba1a749645afcb6">pickup_rect::list</a> ) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">if</span>( rect.contains( p ) ) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">return</span> &amp;rect;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
<div class="ttc" id="aactivity__actor__definitions_8h_html"><div class="ttname"><a href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a115d183c47f43a022e7d4aa0f26e05b7"><div class="ttname"><a href="activity__item__handling_8cpp.html#a115d183c47f43a022e7d4aa0f26e05b7">drop_location</a></div><div class="ttdeci">std::pair&lt; item_location, int &gt; drop_location</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00183">activity_item_handling.cpp:183</a></div></div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a14dcded7a48aa4f96aeecf1e76f8f947"><div class="ttname"><a href="activity__item__handling_8cpp.html#a14dcded7a48aa4f96aeecf1e76f8f947">drop_locations</a></div><div class="ttdeci">std::list&lt; std::pair&lt; item_location, int &gt; &gt; drop_locations</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00184">activity_item_handling.cpp:184</a></div></div>
<div class="ttc" id="aauto__pickup_8h_html"><div class="ttname"><a href="auto__pickup_8h.html">auto_pickup.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bdec852c8280a1cb4bb5e45e14057b5"><div class="ttname"><a href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">Character::weight_capacity</a></div><div class="ttdeci">units::mass weight_capacity() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03197">character.cpp:3197</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3801457283281bb7dcc0572d3f707e10"><div class="ttname"><a href="classCharacter.html#a3801457283281bb7dcc0572d3f707e10">Character::flag_encumbrance</a></div><div class="ttdeci">void flag_encumbrance()</div><div class="ttdoc">Flag encumbrance for updating.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02644">character.cpp:2644</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5929e955c11ee6c749447472df7c774d"><div class="ttname"><a href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">Character::weight_carried</a></div><div class="ttdeci">units::mass weight_carried() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03088">character.cpp:3088</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6fee5f76f33b6b476efedb8e23c36eb2"><div class="ttname"><a href="classCharacter.html#a6fee5f76f33b6b476efedb8e23c36eb2">Character::crush_frozen_liquid</a></div><div class="ttdeci">bool crush_frozen_liquid(item_location loc)</div><div class="ttdoc">Prompts user about crushing item at item_location loc, for harvesting of frozen liquids.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10140">character.cpp:10140</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72814cbd916b863b7b20b43345ef2329"><div class="ttname"><a href="classCharacter.html#a72814cbd916b863b7b20b43345ef2329">Character::invlet_to_item</a></div><div class="ttdeci">item * invlet_to_item(int invlet) const</div><div class="ttdoc">Return the item pointer of the item with given invlet, return nullptr if the player does not have suc...</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00540">character_inventory.cpp:540</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa53d35923b539a53325f071cc1e94ae4"><div class="ttname"><a href="classCharacter.html#aa53d35923b539a53325f071cc1e94ae4">Character::can_pickWeight_partial</a></div><div class="ttdeci">bool can_pickWeight_partial(const item &amp;it, bool safe=true) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03261">character.cpp:3261</a></div></div>
<div class="ttc" id="aclassCharacter_html_abfefc2e9898fff84f1d6bf007a73a976"><div class="ttname"><a href="classCharacter.html#abfefc2e9898fff84f1d6bf007a73a976">Character::wield</a></div><div class="ttdeci">virtual bool wield(item &amp;target)=0</div><div class="ttdoc">Removes currently wielded item (if any) and replaces it with the target item.</div></div>
<div class="ttc" id="aclassCharacter_html_ac1b7a385cf58425333922f844b85ec0b"><div class="ttname"><a href="classCharacter.html#ac1b7a385cf58425333922f844b85ec0b">Character::i_add_or_fill</a></div><div class="ttdeci">ret_val&lt; item_location &gt; i_add_or_fill(item &amp;it, bool should_stack=true, const item *avoid=nullptr, const item *original_inventory_item=nullptr, bool allow_drop=true, bool allow_wield=true, bool ignore_pkt_settings=false)</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00377">character_inventory.cpp:377</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad79464264cb8a2061f5888d092f5cd86"><div class="ttname"><a href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">Character::is_armed</a></div><div class="ttdeci">bool is_armed() const</div><div class="ttdoc">Returns true if the character is wielding something.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00192">melee.cpp:192</a></div></div>
<div class="ttc" id="aclassCharacter_html_af5284cbdea522644fc9a677dd7e3f847"><div class="ttname"><a href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">Character::item_handling_cost</a></div><div class="ttdeci">int item_handling_cost(const item &amp;it, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY, int charges_in_it=-1, bool bulk_cost=false) const</div><div class="ttdoc">Calculate (but do not deduct) the number of moves required when handling (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07285">character.cpp:7285</a></div></div>
<div class="ttc" id="aclassCharacter_html_af84eccbb8811da4ef5ea1a991ac28094"><div class="ttname"><a href="classCharacter.html#af84eccbb8811da4ef5ea1a991ac28094">Character::can_stash_partial</a></div><div class="ttdeci">bool can_stash_partial(const item &amp;it, bool ignore_pkt_settings=false)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01514">character.cpp:1514</a></div></div>
<div class="ttc" id="aclassCharacter_html_afcc7ba8e4203089cb86e515bc2b21a76"><div class="ttname"><a href="classCharacter.html#afcc7ba8e4203089cb86e515bc2b21a76">Character::invalidate_weight_carried_cache</a></div><div class="ttdeci">void invalidate_weight_carried_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03097">character.cpp:3097</a></div></div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01959">creature.cpp:1959</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassCreature_html_af3d3fb7cfb98cf3c36f0f0681414274a"><div class="ttname"><a href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">Creature::get_moves</a></div><div class="ttdeci">int get_moves() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02004">creature.cpp:2004</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonOut_html"><div class="ttname"><a href="classJsonOut.html">JsonOut</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00735">json.h:736</a></div></div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclasscontents__change__handler_html"><div class="ttname"><a href="classcontents__change__handler.html">contents_change_handler</a></div><div class="ttdoc">Records a batch of unsealed containers and handles spilling at once.</div><div class="ttdef"><b>Definition:</b> <a href="contents__change__handler_8h_source.html#l00019">contents_change_handler.h:20</a></div></div>
<div class="ttc" id="aclasscontents__change__handler_html_a327c4c2672f8e662338e72e6a8d1210c"><div class="ttname"><a href="classcontents__change__handler.html#a327c4c2672f8e662338e72e6a8d1210c">contents_change_handler::unseal_pocket_containing</a></div><div class="ttdeci">void unseal_pocket_containing(const item_location &amp;loc)</div><div class="ttdoc">Unseal the pocket containing loc and add loc's parent to the list.</div><div class="ttdef"><b>Definition:</b> <a href="contents__change__handler_8cpp_source.html#l00020">contents_change_handler.cpp:20</a></div></div>
<div class="ttc" id="aclassinput__context_html_a84ffc12a29900a12517151cac4013948"><div class="ttname"><a href="classinput__context.html#a84ffc12a29900a12517151cac4013948">input_context::disallow_lower_case_or_non_modified_letters</a></div><div class="ttdeci">static bool disallow_lower_case_or_non_modified_letters(const input_event &amp;evt)</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00249">input_context.cpp:249</a></div></div>
<div class="ttc" id="aclassinput__context_html_af15391a3cae13b2e23c43e23342ec7c6"><div class="ttname"><a href="classinput__context.html#af15391a3cae13b2e23c43e23342ec7c6">input_context::allow_all_keys</a></div><div class="ttdeci">static bool allow_all_keys(const input_event &amp;evt)</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00264">input_context.cpp:264</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a0c7ab52c6270d1ff2a98c75e0ee5ba3b"><div class="ttname"><a href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">item_contents::clear_items</a></div><div class="ttdeci">void clear_items()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l01424">item_contents.cpp:1424</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888d"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888d">item_location::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00031">item_location.h:31</a></div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da1d78dc8ed51214e518b5114fe24490ae">item_location::type::map</a></div><div class="ttdeci">@ map</div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888da5a76e813d6a0a40548b91acc11557bd2"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5a76e813d6a0a40548b91acc11557bd2">item_location::type::vehicle</a></div><div class="ttdeci">@ vehicle</div></div>
<div class="ttc" id="aclassitem__location_html_a038e108475b9fb4f9833268f5fa2888da5f0b6ebc4bea10285ba2b8a6ce78b863"><div class="ttname"><a href="classitem__location.html#a038e108475b9fb4f9833268f5fa2888da5f0b6ebc4bea10285ba2b8a6ce78b863">item_location::type::container</a></div><div class="ttdeci">@ container</div></div>
<div class="ttc" id="aclassitem__location_html_a0f73e1c094e3e36d6455d46436e299a9"><div class="ttname"><a href="classitem__location.html#a0f73e1c094e3e36d6455d46436e299a9">item_location::where</a></div><div class="ttdeci">type where() const</div><div class="ttdoc">Returns the type of location where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01001">item_location.cpp:1001</a></div></div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01041">item_location.cpp:1041</a></div></div>
<div class="ttc" id="aclassitem__location_html_a7c2a92227d0946b673eb95b0a53c766c"><div class="ttname"><a href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">item_location::position</a></div><div class="ttdeci">tripoint position() const</div><div class="ttdoc">Returns the position where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01011">item_location.cpp:1011</a></div></div>
<div class="ttc" id="aclassitem__location_html_ac32191753a11cc2f4aa2ad6d50e6405b"><div class="ttname"><a href="classitem__location.html#ac32191753a11cc2f4aa2ad6d50e6405b">item_location::nowhere</a></div><div class="ttdeci">static const item_location nowhere</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00041">item_location.h:41</a></div></div>
<div class="ttc" id="aclassitem__location_html_ac61eb40367834d791602ff3a2ca5c5a9"><div class="ttname"><a href="classitem__location.html#ac61eb40367834d791602ff3a2ca5c5a9">item_location::obtain_cost</a></div><div class="ttdeci">int obtain_cost(const Character &amp;ch, int qty=-1) const</div><div class="ttdoc">Calculate (but do not deduct) number of moves required to obtain an item.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01036">item_location.cpp:1036</a></div></div>
<div class="ttc" id="aclassitem__location_html_ad2c318c46c6daaa28c9ed522ae6d13a4"><div class="ttname"><a href="classitem__location.html#ad2c318c46c6daaa28c9ed522ae6d13a4">item_location::parent_item</a></div><div class="ttdeci">item_location parent_item() const</div><div class="ttdoc">returns the parent item, or an invalid location if it has no parent</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l00860">item_location.cpp:860</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00032">item_stack.cpp:32</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00019">item_stack.cpp:19</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00037">item_stack.cpp:37</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08623">item.cpp:8623</a></div></div>
<div class="ttc" id="aclassitem_html_a0b35b9066ad71987b77727af45d96059"><div class="ttname"><a href="classitem.html#a0b35b9066ad71987b77727af45d96059">item::is_owned_by</a></div><div class="ttdeci">bool is_owned_by(const Character &amp;c, bool available_to_take=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l02116">item.cpp:2116</a></div></div>
<div class="ttc" id="aclassitem_html_a2ea9b8df7dba40fc847f51563285f5aa"><div class="ttname"><a href="classitem.html#a2ea9b8df7dba40fc847f51563285f5aa">item::spill_contents</a></div><div class="ttdeci">bool spill_contents(Character &amp;c)</div><div class="ttdoc">Unloads the item's contents.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10206">item.cpp:10206</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdoc">Total weight of an item accounting for all contained/integrated items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07081">item.cpp:7081</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdoc">Return true if this item's type is counted by charges (true for stackable, ammo, or comestible)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08618">item.cpp:8618</a></div></div>
<div class="ttc" id="aclassitem_html_a52f5044582c9c5dd6ccf882fad039d64"><div class="ttname"><a href="classitem.html#a52f5044582c9c5dd6ccf882fad039d64">item::is_frozen_liquid</a></div><div class="ttdeci">bool is_frozen_liquid() const</div><div class="ttdoc">Returns true if the item is A: is SOLID and if it B: is of type LIQUID.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00937">item.cpp:937</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09853">item.cpp:9853</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06855">item.cpp:6855</a></div></div>
<div class="ttc" id="aclassitem_html_ab5544519ee3b45fbedf045dc14e9931f"><div class="ttname"><a href="classitem.html#ab5544519ee3b45fbedf045dc14e9931f">item::stacks_with</a></div><div class="ttdeci">stacking_info stacks_with(const item &amp;rhs, bool check_components=false, bool combine_liquid=false, bool check_cat=false, int depth=0, int maxdepth=2, bool precise=false) const</div><div class="ttdoc">Check wether each element of tname::segments stacks, ie.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01636">item.cpp:1636</a></div></div>
<div class="ttc" id="aclassitem_html_adf662fb946f6a1188fe5e340ff80a95a"><div class="ttname"><a href="classitem.html#adf662fb946f6a1188fe5e340ff80a95a">item::on_pickup</a></div><div class="ttdeci">void on_pickup(Character &amp;p)</div><div class="ttdoc">Callback when a player starts carrying the item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06651">item.cpp:6651</a></div></div>
<div class="ttc" id="aclassitem_html_af38d78ce6d128f6c7a1999b7f9e00965"><div class="ttname"><a href="classitem.html#af38d78ce6d128f6c7a1999b7f9e00965">item::invlet</a></div><div class="ttdeci">char invlet</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03211">item.h:3211</a></div></div>
<div class="ttc" id="aclassitem_html_af486ddb23bd7e254cc07ef3ba1ba846d"><div class="ttname"><a href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a></div><div class="ttdeci">bool made_of_from_type(phase_id phase) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09268">item.cpp:9268</a></div></div>
<div class="ttc" id="aclassitem_html_af84e26c1418a4d090bbf55174431b6ac"><div class="ttname"><a href="classitem.html#af84e26c1418a4d090bbf55174431b6ac">item::is_bucket_nonempty</a></div><div class="ttdeci">bool is_bucket_nonempty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09746">item.cpp:9746</a></div></div>
<div class="ttc" id="aclassitem_html_afd9fcc8f19476c95071b72c300f47ad1"><div class="ttname"><a href="classitem.html#afd9fcc8f19476c95071b72c300f47ad1">item::get_contents</a></div><div class="ttdeci">item_contents &amp; get_contents()</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03165">item.h:3165</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00106">map.h:107</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclasspickup__activity__actor_html"><div class="ttname"><a href="classpickup__activity__actor.html">pickup_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00531">activity_actor_definitions.h:532</a></div></div>
<div class="ttc" id="aclassquery__popup_html"><div class="ttname"><a href="classquery__popup.html">query_popup</a></div><div class="ttdoc">UI class for displaying messages or querying player input with popups.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00035">popup.h:36</a></div></div>
<div class="ttc" id="aclassquery__popup_html_a0fcdd9c0efe58e77f0dbebe2cf0a0a92"><div class="ttname"><a href="classquery__popup.html#a0fcdd9c0efe58e77f0dbebe2cf0a0a92">query_popup::context</a></div><div class="ttdeci">query_popup &amp; context(const std::string &amp;cat)</div><div class="ttdoc">Specify the input context.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00153">popup.cpp:153</a></div></div>
<div class="ttc" id="aclassquery__popup_html_a677ca3e1f238f2bdaa7d2ad0eadf49e1"><div class="ttname"><a href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">query_popup::option</a></div><div class="ttdeci">query_popup &amp; option(const std::string &amp;opt)</div><div class="ttdoc">Specify an action as an option.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00160">popup.cpp:160</a></div></div>
<div class="ttc" id="aclassquery__popup_html_a9e325c6866f26173987a5c93640e9662"><div class="ttname"><a href="classquery__popup.html#a9e325c6866f26173987a5c93640e9662">query_popup::cursor</a></div><div class="ttdeci">query_popup &amp; cursor(size_t pos)</div><div class="ttdoc">Specify starting cursor position.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00205">popup.cpp:205</a></div></div>
<div class="ttc" id="aclassquery__popup_html_aa26700877b0cf2a70bb3af9926c9588b"><div class="ttname"><a href="classquery__popup.html#aa26700877b0cf2a70bb3af9926c9588b">query_popup::query</a></div><div class="ttdeci">result query()</div><div class="ttdoc">Query until a valid action or an error happens and return the result.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00403">popup.cpp:403</a></div></div>
<div class="ttc" id="aclassquery__popup_html_aaf394e7bc1c55779a9527e98d5a350d9"><div class="ttname"><a href="classquery__popup.html#aaf394e7bc1c55779a9527e98d5a350d9">query_popup::allow_cancel</a></div><div class="ttdeci">query_popup &amp; allow_cancel(bool allow)</div><div class="ttdoc">Specify whether an implicit cancel option is allowed.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00184">popup.cpp:184</a></div></div>
<div class="ttc" id="aclassquery__popup_html_ab5a4d489f87e1e94671cc9b2b1c8e750"><div class="ttname"><a href="classquery__popup.html#ab5a4d489f87e1e94671cc9b2b1c8e750">query_popup::preferred_keyboard_mode</a></div><div class="ttdeci">query_popup &amp; preferred_keyboard_mode(keyboard_mode mode)</div><div class="ttdoc">Specify the desired keyboard mode.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00222">popup.cpp:222</a></div></div>
<div class="ttc" id="aclassquery__popup_html_ab8f062cd374f409c7191b608c074ec1c"><div class="ttname"><a href="classquery__popup.html#ab8f062cd374f409c7191b608c074ec1c">query_popup::message</a></div><div class="ttdeci">query_popup &amp; message(const std::string &amp;fmt, Args &amp;&amp;... args)</div><div class="ttdoc">Specify the query message.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00089">popup.h:89</a></div></div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00048">ret_val.h:49</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; json_flag &gt;</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="acolony_8h_html"><div class="ttname"><a href="colony_8h.html">colony.h</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6"><div class="ttname"><a href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">usage_from::player</a></div><div class="ttdeci">@ player</div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a></div><div class="ttdeci">@ GAS</div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a7b774effe4a349c6dd82ad4f4f21d34c">var_type::u</a></div><div class="ttdeci">@ u</div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="ainput_8cpp_html_a36b11afdfd91247213fd3adbad09c5e9"><div class="ttname"><a href="input_8cpp.html#a36b11afdfd91247213fd3adbad09c5e9">is_keycode_mode_supported</a></div><div class="ttdeci">bool is_keycode_mode_supported()</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00063">input.cpp:63</a></div></div>
<div class="ttc" id="ainput_8h_html"><div class="ttname"><a href="input_8h.html">input.h</a></div></div>
<div class="ttc" id="ainput__context_8h_html"><div class="ttname"><a href="input__context_8h.html">input_context.h</a></div></div>
<div class="ttc" id="ainput__enums_8h_html_a427553e505f5e242305906ce8a1ca8b5a1a54c1036ccb10069e9c06281d52007a"><div class="ttname"><a href="input__enums_8h.html#a427553e505f5e242305906ce8a1ca8b5a1a54c1036ccb10069e9c06281d52007a">keyboard_mode::keycode</a></div><div class="ttdeci">@ keycode</div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__location_8h_html"><div class="ttname"><a href="item__location_8h.html">item_location.h</a></div></div>
<div class="ttc" id="aitem__stack_8h_html"><div class="ttname"><a href="item__stack_8h.html">item_stack.h</a></div></div>
<div class="ttc" id="aline_8cpp_html_a399f25250fad82fbc37b72a78dfafb43"><div class="ttname"><a href="line_8cpp.html#a399f25250fad82fbc37b72a78dfafb43">displace_XY</a></div><div class="ttdeci">point displace_XY(const direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00515">line.cpp:515</a></div></div>
<div class="ttc" id="aline_8h_html"><div class="ttname"><a href="line_8h.html">line.h</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a></div><div class="ttdeci">@ NORTH</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a></div><div class="ttdeci">@ EAST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a54486c15c75f9e0ada3484a7812252ff"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a54486c15c75f9e0ada3484a7812252ff">direction::NORTHWEST</a></div><div class="ttdeci">@ NORTHWEST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a5a889abd3c291052e9dcce6adbc4092e"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a5a889abd3c291052e9dcce6adbc4092e">direction::NORTHEAST</a></div><div class="ttdeci">@ NORTHEAST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a></div><div class="ttdeci">@ WEST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a></div><div class="ttdeci">@ SOUTH</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a96f30aeb5638ae7ac40d90b5ebdde47e"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96f30aeb5638ae7ac40d90b5ebdde47e">direction::SOUTHWEST</a></div><div class="ttdeci">@ SOUTHWEST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3ad8edaf2a35fe6e4eb32cc57b7d8fa270"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3ad8edaf2a35fe6e4eb32cc57b7d8fa270">direction::SOUTHEAST</a></div><div class="ttdeci">@ SOUTHEAST</div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amapdata_8h_html"><div class="ttname"><a href="mapdata_8h.html">mapdata.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a06b6576c9bdb2b0cd9d4ae1b585eaf1a">ter_furn_flag::TFLAG_SEALED</a></div><div class="ttdeci">@ TFLAG_SEALED</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_abc25f6933aae16ccd5a998b800448850"><div class="ttname"><a href="namespacePATH__INFO.html#abc25f6933aae16ccd5a998b800448850">PATH_INFO::autopickup</a></div><div class="ttdeci">cata_path autopickup()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00214">path_info.cpp:214</a></div></div>
<div class="ttc" id="anamespacePickup_html_a0d66127845c7f02c3cf50466ab7c5959"><div class="ttname"><a href="namespacePickup.html#a0d66127845c7f02c3cf50466ab7c5959">Pickup::cost_to_move_item</a></div><div class="ttdeci">int cost_to_move_item(const Character &amp;who, const item &amp;it)</div><div class="ttdoc">Determines the cost of moving an item by a character.</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00447">pickup.cpp:447</a></div></div>
<div class="ttc" id="anamespacePickup_html_a43f67199ea70997956834b5bb3b6c92c"><div class="ttname"><a href="namespacePickup.html#a43f67199ea70997956834b5bb3b6c92c">Pickup::do_pickup</a></div><div class="ttdeci">bool do_pickup(std::vector&lt; item_location &gt; &amp;targets, std::vector&lt; int &gt; &amp;quantities, bool autopickup, bool &amp;stash_successful, Pickup::pick_info &amp;info)</div><div class="ttdoc">Returns false if the player was presented a prompt and decided to cancel the pickup.</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00336">pickup.cpp:336</a></div></div>
<div class="ttc" id="anamespacePickup_html_aa79735a5fb835ca5563988c16e78cb74"><div class="ttname"><a href="namespacePickup.html#aa79735a5fb835ca5563988c16e78cb74">Pickup::autopickup</a></div><div class="ttdeci">void autopickup(const tripoint &amp;p)</div><div class="ttdoc">Pick up items; 'g' or ',' or via examine()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00393">pickup.cpp:393</a></div></div>
<div class="ttc" id="anamespacePickup_html_ab150873f2ba005312d65e11cea9d3706"><div class="ttname"><a href="namespacePickup.html#ab150873f2ba005312d65e11cea9d3706">Pickup::query_thief</a></div><div class="ttdeci">bool query_thief()</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00103">pickup.cpp:103</a></div></div>
<div class="ttc" id="anamespaceauto__pickup_html_a5e507c16c032cb774f8d4215a27a807d"><div class="ttname"><a href="namespaceauto__pickup.html#a5e507c16c032cb774f8d4215a27a807d">auto_pickup::select_items</a></div><div class="ttdeci">std::list&lt; std::pair&lt; item_location, int &gt; &gt; select_items(const std::vector&lt; item_stack::iterator &gt; &amp;from, const tripoint &amp;location)</div><div class="ttdoc">Select which items on the map tile should be auto-picked up.</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00248">auto_pickup.cpp:248</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespaceunits_html_a8306911daadc1a4d7a7b46e9786f4a4c"><div class="ttname"><a href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a></div><div class="ttdeci">constexpr value_type to_gram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00364">units.h:364</a></div></div>
<div class="ttc" id="aoptions_8h_html"><div class="ttname"><a href="options_8h.html">options.h</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a0477eaea50c64fa3e2089bda562ed2bf"><div class="ttname"><a href="pickup_8cpp.html#a0477eaea50c64fa3e2089bda562ed2bf">zone_type_NO_AUTO_PICKUP</a></div><div class="ttdeci">static const zone_type_id zone_type_NO_AUTO_PICKUP(&quot;NO_AUTO_PICKUP&quot;)</div></div>
<div class="ttc" id="apickup_8cpp_html_a04d3433848a436ca2c93c87909a01917"><div class="ttname"><a href="pickup_8cpp.html#a04d3433848a436ca2c93c87909a01917">pick_one_up</a></div><div class="ttdeci">static bool pick_one_up(item_location &amp;loc, int quantity, bool &amp;got_water, bool &amp;got_gas, PickupMap &amp;mapPickup, bool autopickup, bool &amp;stash_successful, bool &amp;got_frozen_liquid, Pickup::pick_info &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00172">pickup.cpp:172</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a4a25436dd926395069ea5277fe5fbc9a"><div class="ttname"><a href="pickup_8cpp.html#a4a25436dd926395069ea5277fe5fbc9a">handle_problematic_pickup</a></div><div class="ttdeci">static pickup_answer handle_problematic_pickup(const item &amp;it, const std::string &amp;explain)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00075">pickup.cpp:75</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1">pickup_answer</a></div><div class="ttdeci">pickup_answer</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00067">pickup.cpp:67</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1a37e5e1ac1cb8d085e53c84e8ed6514e9">NUM_ANSWERS</a></div><div class="ttdeci">@ NUM_ANSWERS</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00073">pickup.cpp:72</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ac318239754caa08c2df1edef8e8994e3">WIELD</a></div><div class="ttdeci">@ WIELD</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00069">pickup.cpp:69</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1aca2be1f63d060cd294aba7da969743b1">SPILL</a></div><div class="ttdeci">@ SPILL</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00070">pickup.cpp:70</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae3947b7ec73b9b7ef32249ea80aec67f">STASH</a></div><div class="ttdeci">@ STASH</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00071">pickup.cpp:71</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90"><div class="ttname"><a href="pickup_8cpp.html#a777d97e4e0b5f526a83ac7c820cb92e1ae4842754cb17e5234637e3a85a7f3d90">CANCEL</a></div><div class="ttdeci">@ CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00068">pickup.cpp:68</a></div></div>
<div class="ttc" id="apickup_8cpp_html_a963440dafddb061fe59cd747f1e4cf88"><div class="ttname"><a href="pickup_8cpp.html#a963440dafddb061fe59cd747f1e4cf88">is_bulk_load</a></div><div class="ttdeci">static bool is_bulk_load(const Pickup::pick_info &amp;lhs, const Pickup::pick_info &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00146">pickup.cpp:146</a></div></div>
<div class="ttc" id="apickup_8cpp_html_ac769307dd4918e4ccdd6cb4ec8b3b4b8"><div class="ttname"><a href="pickup_8cpp.html#ac769307dd4918e4ccdd6cb4ec8b3b4b8">ItemCount</a></div><div class="ttdeci">std::pair&lt; item, int &gt; ItemCount</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00039">pickup.cpp:39</a></div></div>
<div class="ttc" id="apickup_8cpp_html_ae06646808abdd3f4718d426b15e54392"><div class="ttname"><a href="pickup_8cpp.html#ae06646808abdd3f4718d426b15e54392">json_flag_SHREDDED</a></div><div class="ttdeci">static const flag_id json_flag_SHREDDED(&quot;SHREDDED&quot;)</div></div>
<div class="ttc" id="apickup_8cpp_html_aeb211bd7c9f9377d5ac40b7d0f815bf0"><div class="ttname"><a href="pickup_8cpp.html#aeb211bd7c9f9377d5ac40b7d0f815bf0">show_pickup_message</a></div><div class="ttdeci">static void show_pickup_message(const PickupMap &amp;mapPickup)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00046">pickup.cpp:46</a></div></div>
<div class="ttc" id="apickup_8cpp_html_af85655a378e7051cf747a723a9f2291b"><div class="ttname"><a href="pickup_8cpp.html#af85655a378e7051cf747a723a9f2291b">PickupMap</a></div><div class="ttdeci">std::map&lt; std::string, ItemCount &gt; PickupMap</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00040">pickup.cpp:40</a></div></div>
<div class="ttc" id="apickup_8h_html"><div class="ttname"><a href="pickup_8h.html">pickup.h</a></div></div>
<div class="ttc" id="aplayer__activity_8h_html"><div class="ttname"><a href="player__activity_8h.html">player_activity.h</a></div></div>
<div class="ttc" id="apoint_8h_html"><div class="ttname"><a href="point_8h.html">point.h</a></div></div>
<div class="ttc" id="apopup_8h_html"><div class="ttname"><a href="popup_8h.html">popup.h</a></div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html"><div class="ttname"><a href="structPickup_1_1pick__info.html">Pickup::pick_info</a></div><div class="ttdoc">Pick up information reminder for bulk loading.</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00017">pickup.h:17</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_a0795a281c88bae336eab6ae0f5d01216"><div class="ttname"><a href="structPickup_1_1pick__info.html#a0795a281c88bae336eab6ae0f5d01216">Pickup::pick_info::src_container</a></div><div class="ttdeci">item_location src_container</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00027">pickup.h:27</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_a30949090ef2826eaef2010d15d003277"><div class="ttname"><a href="structPickup_1_1pick__info.html#a30949090ef2826eaef2010d15d003277">Pickup::pick_info::src_pos</a></div><div class="ttdeci">tripoint src_pos</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00026">pickup.h:26</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_a4104dc04e982751485abdb405293bc2b"><div class="ttname"><a href="structPickup_1_1pick__info.html#a4104dc04e982751485abdb405293bc2b">Pickup::pick_info::src_type</a></div><div class="ttdeci">item_location::type src_type</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00025">pickup.h:25</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_a6445bcb8b8b5e2bb6bb19d92cae9bc72"><div class="ttname"><a href="structPickup_1_1pick__info.html#a6445bcb8b8b5e2bb6bb19d92cae9bc72">Pickup::pick_info::dst</a></div><div class="ttdeci">item_location dst</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00028">pickup.h:28</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_a95f335c0f064586c8e79c14e0e8a4888"><div class="ttname"><a href="structPickup_1_1pick__info.html#a95f335c0f064586c8e79c14e0e8a4888">Pickup::pick_info::serialize</a></div><div class="ttdeci">void serialize(JsonOut &amp;jsout) const</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00463">pickup.cpp:463</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_aa2c92bc499822cdf0d8c6a5b1f218569"><div class="ttname"><a href="structPickup_1_1pick__info.html#aa2c92bc499822cdf0d8c6a5b1f218569">Pickup::pick_info::total_bulk_volume</a></div><div class="ttdeci">units::volume total_bulk_volume</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00024">pickup.h:24</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_ad58cf76c7787fc05a3dac02b73656752"><div class="ttname"><a href="structPickup_1_1pick__info.html#ad58cf76c7787fc05a3dac02b73656752">Pickup::pick_info::set_dst</a></div><div class="ttdeci">void set_dst(const item_location &amp;dst_)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00493">pickup.cpp:493</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_ad950d71d3bc3ef6c2220938c6d488907"><div class="ttname"><a href="structPickup_1_1pick__info.html#ad950d71d3bc3ef6c2220938c6d488907">Pickup::pick_info::set_src</a></div><div class="ttdeci">void set_src(const item_location &amp;src_)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00485">pickup.cpp:485</a></div></div>
<div class="ttc" id="astructPickup_1_1pick__info_html_af7345cce985df1bcd283df6d3abee75e"><div class="ttname"><a href="structPickup_1_1pick__info.html#af7345cce985df1bcd283df6d3abee75e">Pickup::pick_info::deserialize</a></div><div class="ttdeci">void deserialize(const JsonObject &amp;jsobj)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00474">pickup.cpp:474</a></div></div>
<div class="ttc" id="astructPickup_1_1pickup__rect_html"><div class="ttname"><a href="structPickup_1_1pickup__rect.html">Pickup::pickup_rect</a></div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00050">pickup.h:50</a></div></div>
<div class="ttc" id="astructPickup_1_1pickup__rect_html_a1a23dba1a03c4b891ba1a749645afcb6"><div class="ttname"><a href="structPickup_1_1pickup__rect.html#a1a23dba1a03c4b891ba1a749645afcb6">Pickup::pickup_rect::list</a></div><div class="ttdeci">static std::vector&lt; pickup_rect &gt; list</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8h_source.html#l00054">pickup.h:54</a></div></div>
<div class="ttc" id="astructPickup_1_1pickup__rect_html_af8303fe0bacf8885f8d4fd387a6ee7b8"><div class="ttname"><a href="structPickup_1_1pickup__rect.html#af8303fe0bacf8885f8d4fd387a6ee7b8">Pickup::pickup_rect::find_by_coordinate</a></div><div class="ttdeci">static pickup_rect * find_by_coordinate(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00500">pickup.cpp:500</a></div></div>
<div class="ttc" id="astructpickup__count_html"><div class="ttname"><a href="structpickup__count.html">pickup_count</a></div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00061">pickup.cpp:61</a></div></div>
<div class="ttc" id="astructpickup__count_html_a64d0be2bd0df6a4e81ee48fde3df5c79"><div class="ttname"><a href="structpickup__count.html#a64d0be2bd0df6a4e81ee48fde3df5c79">pickup_count::pick</a></div><div class="ttdeci">bool pick</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00062">pickup.cpp:62</a></div></div>
<div class="ttc" id="astructpickup__count_html_aee71c7b15455b2d54bf101dedd3533e8"><div class="ttname"><a href="structpickup__count.html#aee71c7b15455b2d54bf101dedd3533e8">pickup_count::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l00064">pickup.cpp:64</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructquery__popup_1_1result_html_a319891694f37a6970df28ca2279cf851"><div class="ttname"><a href="structquery__popup_1_1result.html#a319891694f37a6970df28ca2279cf851">query_popup::result::action</a></div><div class="ttdeci">std::string action</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00066">popup.h:66</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="aui_8h_html"><div class="ttname"><a href="ui_8h.html">ui.h</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="aunits__utility_8h_html"><div class="ttname"><a href="units__utility_8h.html">units_utility.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:31 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
