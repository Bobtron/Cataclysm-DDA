<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: iexamine Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">iexamine Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a44996bde1bc157e453fa64ec3b6aba34"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a44996bde1bc157e453fa64ec3b6aba34">can_hack</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you)</td></tr>
<tr class="separator:a44996bde1bc157e453fa64ec3b6aba34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f535acef0246f6278825d8b8e99b221"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8f535acef0246f6278825d8b8e99b221">try_start_hacking</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a8f535acef0246f6278825d8b8e99b221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f540fc59b79309c7728ee939fcdcaed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5f540fc59b79309c7728ee939fcdcaed">egg_sack_generic</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="type__id_8h.html#a039e4134b8c5eb549ca440b962667a2f">mtype_id</a> &amp;montype)</td></tr>
<tr class="separator:a5f540fc59b79309c7728ee939fcdcaed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b01dcde847b9429cc2d968d955f93e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4b01dcde847b9429cc2d968d955f93e8">none</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a4b01dcde847b9429cc2d968d955f93e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nothing player can interact with here.  <a href="namespaceiexamine.html#a4b01dcde847b9429cc2d968d955f93e8">More...</a><br /></td></tr>
<tr class="separator:a4b01dcde847b9429cc2d968d955f93e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acead0d070df1ed47be749f0a39a4695f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acead0d070df1ed47be749f0a39a4695f">always_false</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:acead0d070df1ed47be749f0a39a4695f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5820d62517f1b9ecd4898cd74abe9a1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae5820d62517f1b9ecd4898cd74abe9a1">false_and_debugmsg</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae5820d62517f1b9ecd4898cd74abe9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca50fc557c5712a5f1396993f51f7b80"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aca50fc557c5712a5f1396993f51f7b80">always_true</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aca50fc557c5712a5f1396993f51f7b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a776ee399c8ac58e562ff916e3a8ac7d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a776ee399c8ac58e562ff916e3a8ac7d0">harvestable_now</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a776ee399c8ac58e562ff916e3a8ac7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ddb9a8a6a877bfb2bbe06e04b4c8dc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2ddb9a8a6a877bfb2bbe06e04b4c8dc7">gaspump</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a2ddb9a8a6a877bfb2bbe06e04b4c8dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use "gas pump.".  <a href="namespaceiexamine.html#a2ddb9a8a6a877bfb2bbe06e04b4c8dc7">More...</a><br /></td></tr>
<tr class="separator:a2ddb9a8a6a877bfb2bbe06e04b4c8dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11a326d6710c71d4c866068a39cc188d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a11a326d6710c71d4c866068a39cc188d">atm</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a11a326d6710c71d4c866068a39cc188d"><td class="mdescLeft">&#160;</td><td class="mdescRight">launches the atm menu class which then handles all the atm interactions.  <a href="namespaceiexamine.html#a11a326d6710c71d4c866068a39cc188d">More...</a><br /></td></tr>
<tr class="separator:a11a326d6710c71d4c866068a39cc188d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b6859bad7428ebea265e73982b8db9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a49b6859bad7428ebea265e73982b8db9">vending</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a49b6859bad7428ebea265e73982b8db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates vending machine UI and allows players to purchase contained items with a cash card.  <a href="namespaceiexamine.html#a49b6859bad7428ebea265e73982b8db9">More...</a><br /></td></tr>
<tr class="separator:a49b6859bad7428ebea265e73982b8db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6c4f01d9e8a2e24dad525767f2dc83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aaa6c4f01d9e8a2e24dad525767f2dc83">elevator</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aaa6c4f01d9e8a2e24dad525767f2dc83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b09c32e571c128c86203a24af5b13d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad6b09c32e571c128c86203a24af5b13d">nanofab</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ad6b09c32e571c128c86203a24af5b13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">TEMPLATE FABRICATORS Generate items from found blueprints.  <a href="namespaceiexamine.html#ad6b09c32e571c128c86203a24af5b13d">More...</a><br /></td></tr>
<tr class="separator:ad6b09c32e571c128c86203a24af5b13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1586afb32548e61bf115ac2fec0361e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1586afb32548e61bf115ac2fec0361e0">controls_gate</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a1586afb32548e61bf115ac2fec0361e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open gate.  <a href="namespaceiexamine.html#a1586afb32548e61bf115ac2fec0361e0">More...</a><br /></td></tr>
<tr class="separator:a1586afb32548e61bf115ac2fec0361e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8116fba53e3bf82aa670c31c932045"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ace8116fba53e3bf82aa670c31c932045">cardreader</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ace8116fba53e3bf82aa670c31c932045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae322f02d09192d385c9eef1dd1dde1b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae322f02d09192d385c9eef1dd1dde1b2">cardreader_robofac</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae322f02d09192d385c9eef1dd1dde1b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6daf5fb773dc8eccdf30b20f4bfda90a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6daf5fb773dc8eccdf30b20f4bfda90a">cardreader_foodplace</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a6daf5fb773dc8eccdf30b20f4bfda90a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6ca394ee59a2aa33376ca583d07d02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a9d6ca394ee59a2aa33376ca583d07d02">intercom</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a9d6ca394ee59a2aa33376ca583d07d02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a856fb079b417035e617a943f73657696"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a856fb079b417035e617a943f73657696">cvdmachine</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a856fb079b417035e617a943f73657696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick an appropriate item and apply diamond coating if possible.  <a href="namespaceiexamine.html#a856fb079b417035e617a943f73657696">More...</a><br /></td></tr>
<tr class="separator:a856fb079b417035e617a943f73657696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac009ba984e6e90765ec3d7fd4e5266f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac009ba984e6e90765ec3d7fd4e5266f9">change_appearance</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ac009ba984e6e90765ec3d7fd4e5266f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change player eye and skin color.  <a href="namespaceiexamine.html#ac009ba984e6e90765ec3d7fd4e5266f9">More...</a><br /></td></tr>
<tr class="separator:ac009ba984e6e90765ec3d7fd4e5266f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a431b43fb7e1ea71df0686c6772bca406"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a431b43fb7e1ea71df0686c6772bca406">rubble</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a431b43fb7e1ea71df0686c6772bca406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt removal of rubble.  <a href="namespaceiexamine.html#a431b43fb7e1ea71df0686c6772bca406">More...</a><br /></td></tr>
<tr class="separator:a431b43fb7e1ea71df0686c6772bca406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17292ceeb90cd8b5f9ab5ecb803996bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a17292ceeb90cd8b5f9ab5ecb803996bd">chainfence</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a17292ceeb90cd8b5f9ab5ecb803996bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt climbing over fence.  <a href="namespaceiexamine.html#a17292ceeb90cd8b5f9ab5ecb803996bd">More...</a><br /></td></tr>
<tr class="separator:a17292ceeb90cd8b5f9ab5ecb803996bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd9cd308f5f982d0be7cecc680db89c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">bars</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:acd9cd308f5f982d0be7cecc680db89c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">If player has amorphous trait, slip through the bars.  <a href="namespaceiexamine.html#acd9cd308f5f982d0be7cecc680db89c0">More...</a><br /></td></tr>
<tr class="separator:acd9cd308f5f982d0be7cecc680db89c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad140e70f3803795e1c50a8a643b668ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad140e70f3803795e1c50a8a643b668ae">deployed_furniture</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="separator:ad140e70f3803795e1c50a8a643b668ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d78ab741ca0cc4a9fb0e7103f07b15d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1d78ab741ca0cc4a9fb0e7103f07b15d">portable_structure</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a1d78ab741ca0cc4a9fb0e7103f07b15d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine structure's type and prompts its removal.  <a href="namespaceiexamine.html#a1d78ab741ca0cc4a9fb0e7103f07b15d">More...</a><br /></td></tr>
<tr class="separator:a1d78ab741ca0cc4a9fb0e7103f07b15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849d5b536feff95718be5b07437fe3fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a849d5b536feff95718be5b07437fe3fe">pit</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a849d5b536feff95718be5b07437fe3fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is a 2x4 around, prompt placing it across pit.  <a href="namespaceiexamine.html#a849d5b536feff95718be5b07437fe3fe">More...</a><br /></td></tr>
<tr class="separator:a849d5b536feff95718be5b07437fe3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd7a7bc6a140ae90499420be27ac318"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a0dd7a7bc6a140ae90499420be27ac318">pit_covered</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a0dd7a7bc6a140ae90499420be27ac318"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt removing the 2x4 placed across the pit.  <a href="namespaceiexamine.html#a0dd7a7bc6a140ae90499420be27ac318">More...</a><br /></td></tr>
<tr class="separator:a0dd7a7bc6a140ae90499420be27ac318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32bf9c3c07c5727daa67e7c820b9831b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a32bf9c3c07c5727daa67e7c820b9831b">safe</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a32bf9c3c07c5727daa67e7c820b9831b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to crack safe through audio-feedback manual lock manipulation.  <a href="namespaceiexamine.html#a32bf9c3c07c5727daa67e7c820b9831b">More...</a><br /></td></tr>
<tr class="separator:a32bf9c3c07c5727daa67e7c820b9831b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0cc37c0aca01671756f6a2e6b0381a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa0cc37c0aca01671756f6a2e6b0381a8">gunsafe_el</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aa0cc37c0aca01671756f6a2e6b0381a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to "hack" the gunsafe's electronic lock and open it.  <a href="namespaceiexamine.html#aa0cc37c0aca01671756f6a2e6b0381a8">More...</a><br /></td></tr>
<tr class="separator:aa0cc37c0aca01671756f6a2e6b0381a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc2100a2072b0f37d45251f960303b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4bc2100a2072b0f37d45251f960303b9">harvest_furn_nectar</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a4bc2100a2072b0f37d45251f960303b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bd536c4f8d0dedb965690d04284a34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a99bd536c4f8d0dedb965690d04284a34">harvest_furn</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a99bd536c4f8d0dedb965690d04284a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3889118d41632c78020ec2be310696"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#afe3889118d41632c78020ec2be310696">harvest_ter_nectar</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:afe3889118d41632c78020ec2be310696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0598328fc05e2c387631a1d17ba67ab0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a0598328fc05e2c387631a1d17ba67ab0">harvest_ter</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a0598328fc05e2c387631a1d17ba67ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbc3e26e68c4cdf239d71548c2677cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5cbc3e26e68c4cdf239d71548c2677cd">harvested_plant</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a5cbc3e26e68c4cdf239d71548c2677cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only harvest a plant once per season.  <a href="namespaceiexamine.html#a5cbc3e26e68c4cdf239d71548c2677cd">More...</a><br /></td></tr>
<tr class="separator:a5cbc3e26e68c4cdf239d71548c2677cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a061412764e0f7a31458bb8fcaa751e71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">locked_object</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a061412764e0f7a31458bb8fcaa751e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether PC has a crowbar then calls <a class="el" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse.crowbar</a>.  <a href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">More...</a><br /></td></tr>
<tr class="separator:a061412764e0f7a31458bb8fcaa751e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86f29619c48793c99088d13017bc6e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab86f29619c48793c99088d13017bc6e9">locked_object_pickable</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ab86f29619c48793c99088d13017bc6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether PC has picklocks then calls pick_lock iuse function OR assigns ACT_LOCKPICK.  <a href="namespaceiexamine.html#ab86f29619c48793c99088d13017bc6e9">More...</a><br /></td></tr>
<tr class="separator:ab86f29619c48793c99088d13017bc6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63f5daa5e7a2e4683e803228911d77c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa63f5daa5e7a2e4683e803228911d77c">bulletin_board</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aa63f5daa5e7a2e4683e803228911d77c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4cbb108c2dfb614e900d1e0d5c02d36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa4cbb108c2dfb614e900d1e0d5c02d36">pedestal_wyrm</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:aa4cbb108c2dfb614e900d1e0d5c02d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawn 1d4 wyrms and sink pedestal into ground.  <a href="namespaceiexamine.html#aa4cbb108c2dfb614e900d1e0d5c02d36">More...</a><br /></td></tr>
<tr class="separator:aa4cbb108c2dfb614e900d1e0d5c02d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab319de46f8e2400c7c87e55af682351f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab319de46f8e2400c7c87e55af682351f">pedestal_temple</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ab319de46f8e2400c7c87e55af682351f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put petrified eye on pedestal causing it to sink into ground and open temple.  <a href="namespaceiexamine.html#ab319de46f8e2400c7c87e55af682351f">More...</a><br /></td></tr>
<tr class="separator:ab319de46f8e2400c7c87e55af682351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4592ecf94e8300f013e0e5d45ad118e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4592ecf94e8300f013e0e5d45ad118e5">door_peephole</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a4592ecf94e8300f013e0e5d45ad118e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock/open door or attempt to peek through peephole.  <a href="namespaceiexamine.html#a4592ecf94e8300f013e0e5d45ad118e5">More...</a><br /></td></tr>
<tr class="separator:a4592ecf94e8300f013e0e5d45ad118e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f17f88f7e2f7d263dabad23627d1f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aa7f17f88f7e2f7d263dabad23627d1f0">fswitch</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aa7f17f88f7e2f7d263dabad23627d1f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad286e31517b7c40545f6a4ff0a43293c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad286e31517b7c40545f6a4ff0a43293c">flower_tulip</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ad286e31517b7c40545f6a4ff0a43293c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e1ac97689890fd812b00dd4612a2ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af2e1ac97689890fd812b00dd4612a2ab">flower_spurge</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af2e1ac97689890fd812b00dd4612a2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28884290409ac389dbe3ba0efedf379d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a28884290409ac389dbe3ba0efedf379d">flower_poppy</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a28884290409ac389dbe3ba0efedf379d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt pick (or drink nectar if able) poppy bud.  <a href="namespaceiexamine.html#a28884290409ac389dbe3ba0efedf379d">More...</a><br /></td></tr>
<tr class="separator:a28884290409ac389dbe3ba0efedf379d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84021fbba8edf73928f76518ab7de443"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a84021fbba8edf73928f76518ab7de443">flower_cactus</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a84021fbba8edf73928f76518ab7de443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompt pick cactus pad.  <a href="namespaceiexamine.html#a84021fbba8edf73928f76518ab7de443">More...</a><br /></td></tr>
<tr class="separator:a84021fbba8edf73928f76518ab7de443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f27bbd3e133afeb6df58007cca8f8bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8f27bbd3e133afeb6df58007cca8f8bc">flower_bluebell</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a8f27bbd3e133afeb6df58007cca8f8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a06b17d790bf206f9e3d9a4dc6644a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3a06b17d790bf206f9e3d9a4dc6644a0">flower_dahlia</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a3a06b17d790bf206f9e3d9a4dc6644a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dig up its roots or drink its nectar if you can.  <a href="namespaceiexamine.html#a3a06b17d790bf206f9e3d9a4dc6644a0">More...</a><br /></td></tr>
<tr class="separator:a3a06b17d790bf206f9e3d9a4dc6644a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe971c7a2f88d57acbd67f2b71485797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#afe971c7a2f88d57acbd67f2b71485797">flower_marloss</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:afe971c7a2f88d57acbd67f2b71485797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ec8ff1d13697f3468e88047b3c9308"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a53ec8ff1d13697f3468e88047b3c9308">fungus</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:a53ec8ff1d13697f3468e88047b3c9308"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove furniture.  <a href="namespaceiexamine.html#a53ec8ff1d13697f3468e88047b3c9308">More...</a><br /></td></tr>
<tr class="separator:a53ec8ff1d13697f3468e88047b3c9308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43fc7dc298f3f2d47b67a09661ff875"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad43fc7dc298f3f2d47b67a09661ff875">dirtmound</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="memdesc:ad43fc7dc298f3f2d47b67a09661ff875"><td class="mdescLeft">&#160;</td><td class="mdescRight">If it's warm enough, pick one of the player's seeds and plant it.  <a href="namespaceiexamine.html#ad43fc7dc298f3f2d47b67a09661ff875">More...</a><br /></td></tr>
<tr class="separator:ad43fc7dc298f3f2d47b67a09661ff875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04513aa3819dd6c90e42d8d3257447c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af04513aa3819dd6c90e42d8d3257447c">aggie_plant</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af04513aa3819dd6c90e42d8d3257447c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b84afb4c41e21b026c2528e7427910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a85b84afb4c41e21b026c2528e7427910">tree_hickory</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a85b84afb4c41e21b026c2528e7427910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7ddf36c220547c01f20b13e6ff1504"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3e7ddf36c220547c01f20b13e6ff1504">tree_maple</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a3e7ddf36c220547c01f20b13e6ff1504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f638eb41ad7ec2f5c1e4f4cdbef14e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab2f638eb41ad7ec2f5c1e4f4cdbef14e">tree_maple_tapped</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ab2f638eb41ad7ec2f5c1e4f4cdbef14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6acc71566db7034036df3bda99752c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ad6acc71566db7034036df3bda99752c0">shrub_marloss</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ad6acc71566db7034036df3bda99752c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ec5b984bb66397465ff02ff4f415c62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2ec5b984bb66397465ff02ff4f415c62">tree_marloss</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a2ec5b984bb66397465ff02ff4f415c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab037943e4ced1f457f6bd7e3ab6ed8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1ab037943e4ced1f457f6bd7e3ab6ed8">shrub_wildveggies</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a1ab037943e4ced1f457f6bd7e3ab6ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c530dd14bb244dce80da141d2cab912"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6c530dd14bb244dce80da141d2cab912">part_con</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a6c530dd14bb244dce80da141d2cab912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132428ef2cdc394ec957b7d3620696da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a132428ef2cdc394ec957b7d3620696da">water_source</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a132428ef2cdc394ec957b7d3620696da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43950808ed7b251864db0d95c8eb2c22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a43950808ed7b251864db0d95c8eb2c22">finite_water_source</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a43950808ed7b251864db0d95c8eb2c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67d3d8d0386a332c30aa05b0bcd90b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ac67d3d8d0386a332c30aa05b0bcd90b7">kiln_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ac67d3d8d0386a332c30aa05b0bcd90b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff025167fabe1e72086f5dd616678c93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aff025167fabe1e72086f5dd616678c93">kiln_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aff025167fabe1e72086f5dd616678c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2323a53368ac4c9aedc585b46a4215ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a2323a53368ac4c9aedc585b46a4215ae">stook_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a2323a53368ac4c9aedc585b46a4215ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624ebca81ee19128287dbc641cadec86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a624ebca81ee19128287dbc641cadec86">stook_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a624ebca81ee19128287dbc641cadec86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cde8c4e8ea09c0ca32a7c9473c550f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a4cde8c4e8ea09c0ca32a7c9473c550f1">arcfurnace_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a4cde8c4e8ea09c0ca32a7c9473c550f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0202f6a8484cd9a4ac11f8bcabe406f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae0202f6a8484cd9a4ac11f8bcabe406f">arcfurnace_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae0202f6a8484cd9a4ac11f8bcabe406f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab402e6411d9882bc35f2b8e28c1592c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab402e6411d9882bc35f2b8e28c1592c3">autoclave_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ab402e6411d9882bc35f2b8e28c1592c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5129da7d6d9f0d852c0d03408e9c1e46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5129da7d6d9f0d852c0d03408e9c1e46">autoclave_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5129da7d6d9f0d852c0d03408e9c1e46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7f0cf18496f21a6996465f40aec42c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5a7f0cf18496f21a6996465f40aec42c">fireplace</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5a7f0cf18496f21a6996465f40aec42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370c7ee8905e19d8c449dd18a4807cdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a370c7ee8905e19d8c449dd18a4807cdb">fvat_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a370c7ee8905e19d8c449dd18a4807cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5462dc5cc5fb8b987660b8a00221f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6c5462dc5cc5fb8b987660b8a00221f1">fvat_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a6c5462dc5cc5fb8b987660b8a00221f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5bba737498b6d803aa312a45dc8062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5c5bba737498b6d803aa312a45dc8062">compost_empty</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5c5bba737498b6d803aa312a45dc8062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf2425e9165696d90c081e8e7035742"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a3cf2425e9165696d90c081e8e7035742">compost_full</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a3cf2425e9165696d90c081e8e7035742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b5f8bc538c251b5038acf2525e1b52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ae1b5f8bc538c251b5038acf2525e1b52">keg</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ae1b5f8bc538c251b5038acf2525e1b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad09594b19d42ed43aaf6cb9cdac7354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aad09594b19d42ed43aaf6cb9cdac7354">reload_furniture</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:aad09594b19d42ed43aaf6cb9cdac7354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb104e39abd73bf320f7145784ea430"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#abbb104e39abd73bf320f7145784ea430">curtains</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:abbb104e39abd73bf320f7145784ea430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e000c896229f98b834e4cdb08836d63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a7e000c896229f98b834e4cdb08836d63">sign</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a7e000c896229f98b834e4cdb08836d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545273a5bf7dc9a5d88575f36c6829b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a545273a5bf7dc9a5d88575f36c6829b9">pay_gas</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a545273a5bf7dc9a5d88575f36c6829b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579957168f59de1f52f4c4a03383093b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a579957168f59de1f52f4c4a03383093b">ledge</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a579957168f59de1f52f4c4a03383093b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5707473d2a4a0593e8d32deb73066c16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5707473d2a4a0593e8d32deb73066c16">autodoc</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5707473d2a4a0593e8d32deb73066c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad9f49734402e38bfde7c74f37e21e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acad9f49734402e38bfde7c74f37e21e6">attunement_altar</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:acad9f49734402e38bfde7c74f37e21e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab708f67bb8e2bad48fd8c3a294e35422"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ab708f67bb8e2bad48fd8c3a294e35422">translocator</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:ab708f67bb8e2bad48fd8c3a294e35422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060b59dbae83b1188922a4b701894532"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a060b59dbae83b1188922a4b701894532">on_smoke_out</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="classtime__point.html">time_point</a> &amp;start_time)</td></tr>
<tr class="separator:a060b59dbae83b1188922a4b701894532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb9c8b4667ab26a946076aa255d46d75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#abb9c8b4667ab26a946076aa255d46d75">mill_finalize</a> (<a class="el" href="classCharacter.html">Character</a> &amp;, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:abb9c8b4667ab26a946076aa255d46d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc8e7beaae7e212a2cfb5a8ac5695da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#adbc8e7beaae7e212a2cfb5a8ac5695da">quern_examine</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:adbc8e7beaae7e212a2cfb5a8ac5695da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825e4f2b208de22af31d956cef304935"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a825e4f2b208de22af31d956cef304935">smoker_options</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a825e4f2b208de22af31d956cef304935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4acd718a9ed5d2f4e052da39834c4a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#af4acd718a9ed5d2f4e052da39834c4a1">open_safe</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:af4acd718a9ed5d2f4e052da39834c4a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a29c7f85f654d3e9b1e97ed92800c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a23a29c7f85f654d3e9b1e97ed92800c9">workbench</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a23a29c7f85f654d3e9b1e97ed92800c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc39070b625f5b003d3401d46bf2a0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a9bc39070b625f5b003d3401d46bf2a0c">workbench_internal</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classvpart__reference.html">vpart_reference</a> &gt; &amp;part)</td></tr>
<tr class="separator:a9bc39070b625f5b003d3401d46bf2a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc40e68ee855b17b5c9a3238acd39c85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#acc40e68ee855b17b5c9a3238acd39c85">workout</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:acc40e68ee855b17b5c9a3238acd39c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371ca377784ccb87e3d8bf4e3da17c21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a371ca377784ccb87e3d8bf4e3da17c21">invalid</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a371ca377784ccb87e3d8bf4e3da17c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700893be2f824844fdc4b4ea4b2ee148"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos, <a class="el" href="classitem.html">item</a> &amp;liquid)</td></tr>
<tr class="memdesc:a700893be2f824844fdc4b4ea4b2ee148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pour liquid into a keg (furniture) on the map.  <a href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">More...</a><br /></td></tr>
<tr class="separator:a700893be2f824844fdc4b4ea4b2ee148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada89967c78ff4632820932976c12ab8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p, int number)</td></tr>
<tr class="separator:ada89967c78ff4632820932976c12ab8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6987b7ccb6bfbaa1be3d45360eb106f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">toPumpFuel</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;src, const <a class="el" href="structtripoint.html">tripoint</a> &amp;dst, int units)</td></tr>
<tr class="separator:a6987b7ccb6bfbaa1be3d45360eb106f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5488f1bdb7e18772c51ec43e6e9806"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a9c5488f1bdb7e18772c51ec43e6e9806">getNearFilledGasTank</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;center, int &amp;fuel_units, <a class="el" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534fa">fuel_station_fuel_type</a> &amp;fuel_type)</td></tr>
<tr class="separator:a9c5488f1bdb7e18772c51ec43e6e9806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f416fad095ebdced5c867b735550fa4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8f416fad095ebdced5c867b735550fa4">has_keg</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:a8f416fad095ebdced5c867b735550fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether there is a keg on the map that can be filled via <a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>.  <a href="namespaceiexamine.html#a8f416fad095ebdced5c867b735550fa4">More...</a><br /></td></tr>
<tr class="separator:a8f416fad095ebdced5c867b735550fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063625d8728319f6e54a792b609f1719"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classitem.html">item</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">get_harvest_items</a> (const <a class="el" href="structitype.html">itype</a> &amp;type, int plant_count, int seed_count, bool byproducts)</td></tr>
<tr class="memdesc:a063625d8728319f6e54a792b609f1719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Items that appear when a generic plant is harvested.  <a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">More...</a><br /></td></tr>
<tr class="separator:a063625d8728319f6e54a792b609f1719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">get_seed_entries</a> (const std::vector&lt; <a class="el" href="classitem.html">item</a> * &gt; &amp;seed_inv)</td></tr>
<tr class="memdesc:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)  <a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">More...</a><br /></td></tr>
<tr class="separator:a52eaa83fb4f8dacccac4a5e736cf3fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8076e42db14f124567108b5754caa31a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">query_seed</a> (const std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; &amp;seed_entries)</td></tr>
<tr class="memdesc:a8076e42db14f124567108b5754caa31a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose seed for planting.  <a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">More...</a><br /></td></tr>
<tr class="separator:a8076e42db14f124567108b5754caa31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54a7f677b72d66d7f8415e577f59d1dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a54a7f677b72d66d7f8415e577f59d1dd">plant_seed</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;seed_id)</td></tr>
<tr class="memdesc:a54a7f677b72d66d7f8415e577f59d1dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual planting of selected seed.  <a href="namespaceiexamine.html#a54a7f677b72d66d7f8415e577f59d1dd">More...</a><br /></td></tr>
<tr class="separator:a54a7f677b72d66d7f8415e577f59d1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bbdc2309183d193b87f8d86e30df6bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a5bbdc2309183d193b87f8d86e30df6bc">clear_overgrown</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a5bbdc2309183d193b87f8d86e30df6bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40fdda8f9827185fc887569f5c61832a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a40fdda8f9827185fc887569f5c61832a">harvest_plant_ex</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp)</td></tr>
<tr class="separator:a40fdda8f9827185fc887569f5c61832a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aada324c7fd1b483274c84e288b76e17c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#aada324c7fd1b483274c84e288b76e17c">harvest_plant</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;examp, bool from_activity)</td></tr>
<tr class="memdesc:aada324c7fd1b483274c84e288b76e17c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual harvesting of selected plant.  <a href="namespaceiexamine.html#aada324c7fd1b483274c84e288b76e17c">More...</a><br /></td></tr>
<tr class="separator:aada324c7fd1b483274c84e288b76e17c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a854e51ea3743ca7215eb8457990851fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a854e51ea3743ca7215eb8457990851fd">fertilize_plant</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;tile, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fertilizer)</td></tr>
<tr class="separator:a854e51ea3743ca7215eb8457990851fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b0952e9370bd1f1ecd8332f7e2ce3f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a48b0952e9370bd1f1ecd8332f7e2ce3f">choose_fertilizer</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const std::string &amp;pname, bool ask_player)</td></tr>
<tr class="separator:a48b0952e9370bd1f1ecd8332f7e2ce3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cd2a64129f840567218bcfe9bf2dbde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classret__val.html">ret_val</a>&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a1cd2a64129f840567218bcfe9bf2dbde">can_fertilize</a> (<a class="el" href="classCharacter.html">Character</a> &amp;you, const <a class="el" href="structtripoint.html">tripoint</a> &amp;tile, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;fertilizer)</td></tr>
<tr class="separator:a1cd2a64129f840567218bcfe9bf2dbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63227416f0cc5cfd60513e79e6c5baa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiexamine.html#a63227416f0cc5cfd60513e79e6c5baa4">practice_survival_while_foraging</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="separator:a63227416f0cc5cfd60513e79e6c5baa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af04513aa3819dd6c90e42d8d3257447c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04513aa3819dd6c90e42d8d3257447c">&#9670;&nbsp;</a></span>aggie_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::aggie_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02848">2848</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;{</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> = std::find_if( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        return it.is_seed();</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    } );</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160; </div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> == items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, examp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    }</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="keyword">const</span> std::string pname = <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;get_plant_name();</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160; </div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">ter_furn_flag::TFLAG_GROWTH_HARVEST</a>, examp ) &amp;&amp;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;        <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Harvest the %s?&quot;</span> ), pname ) ) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        <a class="code" href="namespaceiexamine.html#aada324c7fd1b483274c84e288b76e17c">harvest_plant</a>( you, examp, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">ter_furn_flag::TFLAG_GROWTH_HARVEST</a>, examp ) ) {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() &gt; 1 ) {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This %s has already been fertilized.&quot;</span> ), pname );</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        }</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> fertilizer = <a class="code" href="namespaceiexamine.html#a48b0952e9370bd1f1ecd8332f7e2ce3f">choose_fertilizer</a>( you, pname, <span class="keyword">true</span> <span class="comment">/*ask player for confirmation */</span> );</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <span class="keywordflow">if</span>( !fertilizer.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            <a class="code" href="namespaceiexamine.html#a854e51ea3743ca7215eb8457990851fd">fertilize_plant</a>( you, examp, fertilizer );</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;}</div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a09718022e82be5bc5dd6d84463521751"><div class="ttname"><a href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">item_stack::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00014">item_stack.cpp:14</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00032">item_stack.cpp:32</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00037">item_stack.cpp:37</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00106">map.h:107</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a09ef3e8c2e6664e3ed98d1e1e18a4b4f"><div class="ttname"><a href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">map::has_flag_furn</a></div><div class="ttdeci">bool has_flag_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03112">map.cpp:3112</a></div></div>
<div class="ttc" id="aclassmap_html_a410a8dcd3e1ee0e87da584bf878d6f83"><div class="ttname"><a href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">map::furn_set</a></div><div class="ttdeci">bool furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, bool furn_reset=false, bool avoid_creatures=false)</div><div class="ttdoc">furn_reset should be true if new_furniture is being set to f_null when the player is grab-moving furn...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01743">map.cpp:1743</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclassmap_html_a9b1c092685c43287d5db23156f3f337e"><div class="ttname"><a href="classmap.html#a9b1c092685c43287d5db23156f3f337e">map::i_clear</a></div><div class="ttdeci">void i_clear(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05030">map.cpp:5030</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; furn_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">ter_furn_flag::TFLAG_GROWTH_HARVEST</a></div><div class="ttdeci">@ TFLAG_GROWTH_HARVEST</div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a48b0952e9370bd1f1ecd8332f7e2ce3f"><div class="ttname"><a href="namespaceiexamine.html#a48b0952e9370bd1f1ecd8332f7e2ce3f">iexamine::choose_fertilizer</a></div><div class="ttdeci">itype_id choose_fertilizer(Character &amp;you, const std::string &amp;pname, bool ask_player)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02814">iexamine.cpp:2814</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a854e51ea3743ca7215eb8457990851fd"><div class="ttname"><a href="namespaceiexamine.html#a854e51ea3743ca7215eb8457990851fd">iexamine::fertilize_plant</a></div><div class="ttdeci">void fertilize_plant(Character &amp;you, const tripoint &amp;tile, const itype_id &amp;fertilizer)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02765">iexamine.cpp:2765</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_aada324c7fd1b483274c84e288b76e17c"><div class="ttname"><a href="namespaceiexamine.html#aada324c7fd1b483274c84e288b76e17c">iexamine::harvest_plant</a></div><div class="ttdeci">void harvest_plant(Character &amp;you, const tripoint &amp;examp, bool from_activity)</div><div class="ttdoc">Actual harvesting of selected plant.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02676">iexamine.cpp:2676</a></div></div>
<div class="ttc" id="anamespaceiuse_html_ae81079151986b7a91874751dae6720a5"><div class="ttname"><a href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">iuse::seed</a></div><div class="ttdeci">std::optional&lt; int &gt; seed(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05301">iuse.cpp:5301</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="iexamine_8cpp_source.html#l02814">choose_fertilizer()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="iexamine_8cpp_source.html#l02765">fertilize_plant()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02676">harvest_plant()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, <a class="el" href="item__stack_8cpp_source.html#l00014">item_stack::size()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">TFLAG_GROWTH_HARVEST</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="acead0d070df1ed47be749f0a39a4695f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acead0d070df1ed47be749f0a39a4695f">&#9670;&nbsp;</a></span>always_false()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::always_false </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00311">311</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="aca50fc557c5712a5f1396993f51f7b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca50fc557c5712a5f1396993f51f7b80">&#9670;&nbsp;</a></span>always_true()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::always_true </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00323">323</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a4cde8c4e8ea09c0ca32a7c9473c550f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cde8c4e8ea09c0ca32a7c9473c550f1">&#9670;&nbsp;</a></span>arcfurnace_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::arcfurnace_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Fabrication decreases loss when firing a furnace 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03036">3036</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;{</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_arcfurnace_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_arcfurnace_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keywordflow">if</span>( cur_arcfurnace_type == <a class="code" href="iexamine_8cpp.html#aa3cdaa6c405ffdfbd8a9849646aac9bc">furn_f_arcfurnace_empty</a> ) {</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;        next_arcfurnace_type = <a class="code" href="iexamine_8cpp.html#a33f241494d31eadbb2323d3bf8d84619">furn_f_arcfurnace_full</a>;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action arcfurnace_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    }</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160; </div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;material_id&gt; arcfurnaceable{ <a class="code" href="iexamine_8cpp.html#a43782cbaa75010823a2cf8308493c5f1">material_cac2powder</a> };</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordtype">bool</span> fuel_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="keywordflow">if</span>( i.typeId() == <a class="code" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a> ) {</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace already contains calcium carbide.&quot;</span> ) );</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove it before activating the arc furnace again.&quot;</span> ) );</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i.made_of_any( arcfurnaceable ) ) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            fuel_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace contains %s, which can&#39;t be made into calcium carbide!&quot;</span> ),</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;                     i.tname( 1, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;        }</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    }</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160; </div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="keywordflow">if</span>( !fuel_present ) {</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace is empty.  Fill it with powdered coke and lime mix, and try again.&quot;</span> ) );</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    }</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="comment">    ///\EFFECT_FABRICATION decreases loss when firing a furnace</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">float</span> skill = you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> );</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordtype">int</span> loss = 60 - 2 *</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;               skill; <span class="comment">// Inefficiency is still fine, coal and limestone is abundant</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160; </div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        total_volume += i.volume();</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    }</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160; </div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *char_type = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a> );</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordtype">int</span> char_charges = char_type-&gt;<a class="code" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( ( 100 - loss ) * total_volume / 100 );</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="keywordflow">if</span>( char_charges &lt; 1 ) {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The batch in this furnace is too small to yield usable calcium carbide.&quot;</span> ) );</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    }</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="comment">//arc furnaces require a huge amount of current, so 1 full storage battery would work as a stand in</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a581c2e6646bc18796f26d3c18e38120a">available_ups</a>() &lt; 1250_kJ ) {</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace is ready to be turned on, but you lack a UPS with sufficient power.&quot;</span> ) );</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace contains %s %s of material, and is ready to be turned on.&quot;</span> ),</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                 <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( total_volume ), <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() );</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on the furnace?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        }</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    }</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160; </div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    you.<a class="code" href="classCharacter.html#a32d3883998c51586c2617ee82bb9ffac">consume_ups</a>( 1250_kJ );</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <a class="code" href="classitem.html">item</a> result( <span class="stringliteral">&quot;unfinished_cac2&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    result.charges = char_charges;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, result );</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn on the furnace.&quot;</span> ) );</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a32d3883998c51586c2617ee82bb9ffac"><div class="ttname"><a href="classCharacter.html#a32d3883998c51586c2617ee82bb9ffac">Character::consume_ups</a></div><div class="ttdeci">units::energy consume_ups(units::energy qty, int radius=-1)</div><div class="ttdoc">Consume UPS charges.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09669">character.cpp:9669</a></div></div>
<div class="ttc" id="aclassCharacter_html_a581c2e6646bc18796f26d3c18e38120a"><div class="ttname"><a href="classCharacter.html#a581c2e6646bc18796f26d3c18e38120a">Character::available_ups</a></div><div class="ttdeci">units::energy available_ups() const</div><div class="ttdoc">Available ups from all sources Sum of mech, bionic UPS and UPS.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09642">character.cpp:9642</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; furn_t &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassmap_html_af79fb1f952314ecb64890590c91cf5a8"><div class="ttname"><a href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">map::add_item</a></div><div class="ttdeci">item &amp; add_item(const tripoint &amp;p, item new_item, int copies)</div><div class="ttdoc">Place an item on the map, despite the parameter name, this is not necessarily a new item.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05329">map.cpp:5329</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a33f241494d31eadbb2323d3bf8d84619"><div class="ttname"><a href="iexamine_8cpp.html#a33f241494d31eadbb2323d3bf8d84619">furn_f_arcfurnace_full</a></div><div class="ttdeci">static const furn_str_id furn_f_arcfurnace_full(&quot;f_arcfurnace_full&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a43782cbaa75010823a2cf8308493c5f1"><div class="ttname"><a href="iexamine_8cpp.html#a43782cbaa75010823a2cf8308493c5f1">material_cac2powder</a></div><div class="ttdeci">static const material_id material_cac2powder(&quot;cac2powder&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a91db7131b5f34ebfd87e414471d3252c"><div class="ttname"><a href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a></div><div class="ttdeci">static const itype_id itype_unfinished_cac2(&quot;unfinished_cac2&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a92adaaef73b238fc4ae42c4f0ee72a86"><div class="ttname"><a href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a></div><div class="ttdeci">static const skill_id skill_fabrication(&quot;fabrication&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa3cdaa6c405ffdfbd8a9849646aac9bc"><div class="ttname"><a href="iexamine_8cpp.html#aa3cdaa6c405ffdfbd8a9849646aac9bc">furn_f_arcfurnace_empty</a></div><div class="ttdeci">static const furn_str_id furn_f_arcfurnace_empty(&quot;f_arcfurnace_empty&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab1af02b599a6211215be7003eb1b91b3"><div class="ttname"><a href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a></div><div class="ttdeci">static const itype_id itype_chem_carbide(&quot;chem_carbide&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a297635a05a44e1f896fb829a0474f586"><div class="ttname"><a href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a></div><div class="ttdeci">std::string format_volume(const units::volume &amp;volume)</div><div class="ttdoc">Convert and format volume.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l03231">output.cpp:3231</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01186">itype.h:1186</a></div></div>
<div class="ttc" id="astructitype_html_a437edaf34e4c8b5bd688005360507b7d"><div class="ttname"><a href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">itype::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol) const</div><div class="ttdoc">Number of (charges of) this type of item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00149">itype.cpp:149</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a5d1afc8428beadaac75fb68c5a2bfcd7"><div class="ttname"><a href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a></div><div class="ttdeci">const char * volume_units_abbr()</div><div class="ttdoc">Create an abbreviated units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00096">units_utility.cpp:96</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09642">Character::available_ups()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="itype_8cpp_source.html#l00149">itype::charges_per_volume()</a>, <a class="el" href="character_8cpp_source.html#l09669">Character::consume_ups()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="output_8cpp_source.html#l03231">format_volume()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#aa3cdaa6c405ffdfbd8a9849646aac9bc">furn_f_arcfurnace_empty</a>, <a class="el" href="iexamine_8cpp.html#a33f241494d31eadbb2323d3bf8d84619">furn_f_arcfurnace_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>, <a class="el" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="iexamine_8cpp.html#a43782cbaa75010823a2cf8308493c5f1">material_cac2powder</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="units__utility_8cpp_source.html#l00096">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ae0202f6a8484cd9a4ac11f8bcabe406f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0202f6a8484cd9a4ac11f8bcabe406f">&#9670;&nbsp;</a></span>arcfurnace_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::arcfurnace_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03109">3109</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;{</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_arcfurnace_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_arcfurnace_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">if</span>( cur_arcfurnace_type == <a class="code" href="iexamine_8cpp.html#a33f241494d31eadbb2323d3bf8d84619">furn_f_arcfurnace_full</a> ) {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        next_arcfurnace_type = <a class="code" href="iexamine_8cpp.html#aa3cdaa6c405ffdfbd8a9849646aac9bc">furn_f_arcfurnace_empty</a>;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action arcfurnace_full, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    }</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This furnace is empty…&quot;</span> ) );</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *char_type = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a> );</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s an arc furnace there.&quot;</span> ) );</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> firing_time = 2_hours; <span class="comment">// Arc furnaces work really fast in reality</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> time_left = firing_time - items.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordtype">int</span> minutes = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="keywordflow">if</span>( minutes &gt; 60 ) {</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish burning in about %d hour.&quot;</span>,</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                                <span class="stringliteral">&quot;It will finish burning in about %d hours.&quot;</span>,</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;                                hours ), hours );</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes &gt; 30 ) {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will finish burning in less than an hour.&quot;</span> ) );</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It should take about %d minute to finish burning.&quot;</span>,</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                                <span class="stringliteral">&quot;It should take about %d minutes to finish burning.&quot;</span>,</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                                minutes ), minutes );</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        }</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160; </div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;        <span class="keywordflow">if</span>( item_it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a> || item_it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a> ) {</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            total_volume += item_it-&gt;volume();</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;            item_it = items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;            item_it++;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        }</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160; </div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <a class="code" href="classitem.html">item</a> result( <span class="stringliteral">&quot;chem_carbide&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    result.charges = char_type-&gt;<a class="code" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( total_volume );</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, result );</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_arcfurnace_type );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It has finished burning, yielding %d calcium carbide.&quot;</span> ), result.charges );</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;}</div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00019">item_stack.cpp:19</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ae07c2d2c71ea7c7ba2607f2edc5a41df"><div class="ttname"><a href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">item_stack::only_item</a></div><div class="ttdeci">item &amp; only_item()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00087">item_stack.cpp:87</a></div></div>
<div class="ttc" id="aclassitem_html_a66fcc8b7976e6c73904bdfbe5296c150"><div class="ttname"><a href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">item::age</a></div><div class="ttdeci">time_duration age() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14676">item.cpp:14676</a></div></div>
<div class="ttc" id="aclassmap__stack_html_ab58ec66a7ca2e476c6d90967dccc8062"><div class="ttname"><a href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">map_stack::erase</a></div><div class="ttdeci">iterator erase(const_iterator it) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00219">map.cpp:219</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="atranslations_8h_html_a45dd4e3da9b83845bcd1c2d8e80cf802"><div class="ttname"><a href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a></div><div class="ttdeci">#define n_gettext(STRING1, STRING2, COUNT)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00091">translations.h:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="itype_8cpp_source.html#l00149">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#aa3cdaa6c405ffdfbd8a9849646aac9bc">furn_f_arcfurnace_empty</a>, <a class="el" href="iexamine_8cpp.html#a33f241494d31eadbb2323d3bf8d84619">furn_f_arcfurnace_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab1af02b599a6211215be7003eb1b91b3">itype_chem_carbide</a>, <a class="el" href="iexamine_8cpp.html#a91db7131b5f34ebfd87e414471d3252c">itype_unfinished_cac2</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a11a326d6710c71d4c866068a39cc188d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11a326d6710c71d4c866068a39cc188d">&#9670;&nbsp;</a></span>atm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::atm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>launches the atm menu class which then handles all the atm interactions. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01016">1016</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    atm_menu {you}.start();</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l02874">activity_handlers::atm_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="acad9f49734402e38bfde7c74f37e21e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acad9f49734402e38bfde7c74f37e21e6">&#9670;&nbsp;</a></span>attunement_altar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::attunement_altar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00576">576</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    std::set&lt;trait_id&gt; attunements;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structmutation__branch.html">mutation_branch</a> &amp;mut : <a class="code" href="structmutation__branch.html#a15421800b8099c46fc7ed169e607ac56">mutation_branch::get_all</a>() ) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span>( mut.flags.count( <a class="code" href="iexamine_8cpp.html#aedd9545f80199d4556c56f119057f1e3">json_flag_ATTUNEMENT</a> ) ) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            attunements.emplace( mut.id );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// remove the attunements the player does not have prereqs for</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = attunements.begin(); iter != attunements.end(); ) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordtype">bool</span> has_prereq = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">// the normal usage of prereqs only needs one, but attunements put all their prereqs into the same array</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">// each prereqs is required for it as well</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;prereq : ( *iter )-&gt;<a class="code" href="structmutation__branch.html#abef02f8a6594e8416e9520c75899353a">prereqs</a> ) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( prereq ) ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                has_prereq = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span>( has_prereq ) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            ++iter;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            iter = attunements.erase( iter );</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">if</span>( attunements.empty() ) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">// the player doesn&#39;t have at least two base classes</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This altar gives you the creeps.&quot;</span> ) );</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// remove the attunements the player has conflicts for</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = attunements.begin(); iter != attunements.end(); ) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a809f85bef6731c16373600ad9f97dad7">has_opposite_trait</a>( *iter ) &amp;&amp; you.<a class="code" href="classCharacter.html#a388203c53df7ead0437238b2b79f9cba">mutation_ok</a>( *iter, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            ++iter;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            iter = attunements.erase( iter );</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span>( attunements.empty() ) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ve attained what you can for now.&quot;</span> ) );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> iter = attunements.begin(); iter != attunements.end(); ) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#a3bfc01a755dbda58e054f9d13b02c722">has_attunement_spell_prereqs</a>( you, *iter ) ) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            ++iter;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            iter = attunements.erase( iter );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span>( attunements.empty() ) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel that the altar does not deem you worthy, yet.&quot;</span> ) );</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="classuilist.html">uilist</a> attunement_list;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    attunement_list.<a class="code" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick an Attunement to show the world your Worth.&quot;</span> );</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;attunement : attunements ) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">// There&#39;s no way for you to have this mutation, so a variant is pointless</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        attunement_list.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( attunement-&gt;name() );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    attunement_list.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span>( attunement_list.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Maybe later.&quot;</span> ) );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">auto</span> attunement_iter = attunements.begin();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    std::advance( attunement_iter, attunement_list.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;attunement = *attunement_iter;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">// There&#39;s no way for you to have this mutation, so a variant is pointless</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to pick %s?  This selection is permanent.&quot;</span> ),</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                 attunement-&gt;<a class="code" href="structmutation__branch.html#a2805339d7f40d83fbfb0846cca44761c">name</a>() ) ) ) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        you.<a class="code" href="classCharacter.html#a10389288ada57f4431eab188ca109528">toggle_trait</a>( attunement );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="comment">// There&#39;s no way for you to have this mutation, so a variant is pointless</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, attunement-&gt;<a class="code" href="structmutation__branch.html#a67f764c2a0612a360980e59a5e4fef21">desc</a>() );</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Maybe later.&quot;</span> ) );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a10389288ada57f4431eab188ca109528"><div class="ttname"><a href="classCharacter.html#a10389288ada57f4431eab188ca109528">Character::toggle_trait</a></div><div class="ttdeci">void toggle_trait(const trait_id &amp;, const std::string &amp;=&quot;&quot;)</div><div class="ttdoc">Toggles a trait on the player and in their mutation list.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00220">mutation.cpp:220</a></div></div>
<div class="ttc" id="aclassCharacter_html_a388203c53df7ead0437238b2b79f9cba"><div class="ttname"><a href="classCharacter.html#a388203c53df7ead0437238b2b79f9cba">Character::mutation_ok</a></div><div class="ttdeci">bool mutation_ok(const trait_id &amp;mutation, bool allow_good, bool allow_bad, bool allow_neutral, const vitamin_id &amp;mut_vit) const</div><div class="ttdoc">Returns true if the player doesn't have the mutation or a conflicting one and it complies with the al...</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00961">mutation.cpp:961</a></div></div>
<div class="ttc" id="aclassCharacter_html_a809f85bef6731c16373600ad9f97dad7"><div class="ttname"><a href="classCharacter.html#a809f85bef6731c16373600ad9f97dad7">Character::has_opposite_trait</a></div><div class="ttdeci">bool has_opposite_trait(const trait_id &amp;flag) const</div><div class="ttdoc">Returns true if the player has a trait which cancels the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10039">character.cpp:10039</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_a53ff5990a6abb4e7da837db31afea4b8"><div class="ttname"><a href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">uilist::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00418">ui.h:418</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3bfc01a755dbda58e054f9d13b02c722"><div class="ttname"><a href="iexamine_8cpp.html#a3bfc01a755dbda58e054f9d13b02c722">has_attunement_spell_prereqs</a></div><div class="ttdeci">static bool has_attunement_spell_prereqs(Character &amp;you, const trait_id &amp;attunement)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00559">iexamine.cpp:559</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aedd9545f80199d4556c56f119057f1e3"><div class="ttname"><a href="iexamine_8cpp.html#aedd9545f80199d4556c56f119057f1e3">json_flag_ATTUNEMENT</a></div><div class="ttdeci">static const json_character_flag json_flag_ATTUNEMENT(&quot;ATTUNEMENT&quot;)</div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructmutation__branch_html"><div class="ttname"><a href="structmutation__branch.html">mutation_branch</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00172">mutation.h:172</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a15421800b8099c46fc7ed169e607ac56"><div class="ttname"><a href="structmutation__branch.html#a15421800b8099c46fc7ed169e607ac56">mutation_branch::get_all</a></div><div class="ttdeci">static const std::vector&lt; mutation_branch &gt; &amp; get_all()</div><div class="ttdoc">All known mutations.</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00849">mutation_data.cpp:849</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a2805339d7f40d83fbfb0846cca44761c"><div class="ttname"><a href="structmutation__branch.html#a2805339d7f40d83fbfb0846cca44761c">mutation_branch::name</a></div><div class="ttdeci">std::string name(const std::string &amp;variant=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00579">mutation_data.cpp:579</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a67f764c2a0612a360980e59a5e4fef21"><div class="ttname"><a href="structmutation__branch.html#a67f764c2a0612a360980e59a5e4fef21">mutation_branch::desc</a></div><div class="ttdeci">std::string desc(const std::string &amp;variant=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00589">mutation_data.cpp:589</a></div></div>
<div class="ttc" id="astructmutation__branch_html_abef02f8a6594e8416e9520c75899353a"><div class="ttname"><a href="structmutation__branch.html#abef02f8a6594e8416e9520c75899353a">mutation_branch::prereqs</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; prereqs</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00320">mutation.h:320</a></div></div>
<div class="ttc" id="aui_8h_html_ae8a811731dd950d56e478c3ddc17e725"><div class="ttname"><a href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a></div><div class="ttdeci">const int UILIST_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00035">ui.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00589">mutation_branch::desc()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00849">mutation_branch::get_all()</a>, <a class="el" href="iexamine_8cpp_source.html#l00559">has_attunement_spell_prereqs()</a>, <a class="el" href="character_8cpp_source.html#l10039">Character::has_opposite_trait()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#aedd9545f80199d4556c56f119057f1e3">json_flag_ATTUNEMENT</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mutation_8cpp_source.html#l00961">Character::mutation_ok()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00579">mutation_branch::name()</a>, <a class="el" href="mutation_8h_source.html#l00320">mutation_branch::prereqs</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00418">uilist::title</a>, <a class="el" href="mutation_8cpp_source.html#l00220">Character::toggle_trait()</a>, and <a class="el" href="ui_8h_source.html#l00035">UILIST_CANCEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ab402e6411d9882bc35f2b8e28c1592c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab402e6411d9882bc35f2b8e28c1592c3">&#9670;&nbsp;</a></span>autoclave_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autoclave_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03257">3257</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;{</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_autoclave_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_autoclave_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="keywordflow">if</span>( cur_autoclave_type == <a class="code" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave&quot;</span> ) ) {</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        next_autoclave_type = <a class="code" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave_full&quot;</span> );</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action autoclave_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    }</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160; </div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <span class="keywordtype">bool</span> cbms = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        return i.is_bionic();</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    } );</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160; </div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="keywordtype">bool</span> filthy_cbms = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;        return i.is_bionic() &amp;&amp; i.has_flag( flag_FILTHY );</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    } );</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160; </div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This autoclave is empty…&quot;</span> ) );</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    }</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">if</span>( !cbms ) {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to remove all non-CBM items from the autoclave to start the program.&quot;</span> ) );</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    }</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="keywordflow">if</span>( filthy_cbms ) {</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Some of those CBMs are filthy, you should wash them first for the sterilization process to work properly.&quot;</span> ) );</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <a class="code" href="structrequirement__data.html">requirement_data</a> reqs = *<a class="code" href="iexamine_8cpp.html#a5b20784f73ce701dc7f33e1779bc4b15">requirement_data_autoclave</a>;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160; </div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <span class="keywordflow">if</span>( !reqs.<a class="code" href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">can_make_with_inventory</a>( you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>(), <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> ) ) {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, reqs.<a class="code" href="structrequirement__data.html#a1590c4ebea201a6937c0fa9a8227986d">list_missing</a>() );</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    }</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160; </div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start the autoclave?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( e, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        }</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( e );</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        }</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;            it.set_birthday( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        }</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start the autoclave.&quot;</span> ) );</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    }</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a33d0aa99b607cfbe38b910d4dd6b0b1b"><div class="ttname"><a href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">Character::consume_tools</a></div><div class="ttdeci">void consume_tools(const comp_selection&lt; tool_comp &gt; &amp;tool, int batch)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02400">crafting.cpp:2400</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5d161e8df8122b5f3d74a081ee8d12cf"><div class="ttname"><a href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">Character::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02029">crafting.cpp:2029</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe4c095c2e6510f07f351d7e091f5787"><div class="ttname"><a href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">Character::invalidate_crafting_inventory</a></div><div class="ttdeci">void invalidate_crafting_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00692">crafting.cpp:692</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5b20784f73ce701dc7f33e1779bc4b15"><div class="ttname"><a href="iexamine_8cpp.html#a5b20784f73ce701dc7f33e1779bc4b15">requirement_data_autoclave</a></div><div class="ttdeci">static const requirement_id requirement_data_autoclave(&quot;autoclave&quot;)</div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03267">item.h:3267</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a07c67f146358ed0de2aface7588c20d2"><div class="ttname"><a href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">requirement_data::can_make_with_inventory</a></div><div class="ttdeci">bool can_make_with_inventory(const read_only_visitable &amp;crafting_inv, const std::function&lt; bool(const item &amp;)&gt; &amp;filter, int batch=1, craft_flags=craft_flags::none) const</div><div class="ttdoc">Returns true if the requirements are fulfilled by the filtered inventory.</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00840">requirements.cpp:840</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a1590c4ebea201a6937c0fa9a8227986d"><div class="ttname"><a href="structrequirement__data.html#a1590c4ebea201a6937c0fa9a8227986d">requirement_data::list_missing</a></div><div class="ttdeci">std::string list_missing() const</div><div class="ttdoc">Returns a list of components/tools/qualities that are not available, nicely formatted for popup windo...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l00574">requirements.cpp:574</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a175d46943600149603b7a915cb48092b"><div class="ttname"><a href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">requirement_data::get_tools</a></div><div class="ttdeci">const alter_tool_comp_vector &amp; get_tools() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01152">requirements.cpp:1152</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01162">requirements.cpp:1162</a></div></div>
<div class="ttc" id="atype__id_8h_html_a6bc1468ac54b6176b517879f5f77564e"><div class="ttname"><a href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a></div><div class="ttdeci">int_id&lt; furn_t &gt; furn_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00099">type_id.h:99</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="requirements_8cpp_source.html#l00840">requirement_data::can_make_with_inventory()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="requirements_8cpp_source.html#l01152">requirement_data::get_tools()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="crafting_8cpp_source.html#l00692">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="requirements_8cpp_source.html#l00574">requirement_data::list_missing()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a5b20784f73ce701dc7f33e1779bc4b15">requirement_data_autoclave</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5129da7d6d9f0d852c0d03408e9c1e46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5129da7d6d9f0d852c0d03408e9c1e46">&#9670;&nbsp;</a></span>autoclave_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autoclave_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03317">3317</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;{</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_autoclave_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_autoclave_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="keywordflow">if</span>( cur_autoclave_type == <a class="code" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave_full&quot;</span> ) ) {</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;        next_autoclave_type = <a class="code" href="type__id_8h.html#a6bc1468ac54b6176b517879f5f77564e">furn_id</a>( <span class="stringliteral">&quot;f_autoclave&quot;</span> );</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action autoclave_full, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    }</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160; </div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <span class="keywordtype">bool</span> cbms = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        return i.is_bionic();</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    } );</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    <span class="keywordtype">bool</span> cbms_not_packed = std::all_of( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        return i.is_bionic() &amp;&amp; i.has_flag( flag_NO_PACKED );</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    } );</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160; </div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This autoclave is empty…&quot;</span> ) );</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    <span class="keywordflow">if</span>( !cbms ) {</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ERROR Autoclave can&#39;t process non CBM items.&quot;</span> ) );</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    }</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The autoclave is running.&quot;</span> ) );</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160; </div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;clock = *items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> Cycle_time = 90_minutes;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> time_left = Cycle_time - clock.<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The cycle will be complete in %s.&quot;</span> ), <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( time_left ) );</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    }</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        <span class="keywordflow">if</span>( !it.has_flag( <a class="code" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a> ) ) {</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;            it.unset_flag( <a class="code" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a> );</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;        }</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    }</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The cycle is complete, the CBMs are now sterile.&quot;</span> ) );</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <span class="keywordflow">if</span>( cbms_not_packed ) {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;CBMs in direct contact with the environment will almost immediately become contaminated.&quot;</span> ) );</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    }</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_autoclave_type );</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_abf1cdb8f4662bf96c8d762e9229df8d9"><div class="ttname"><a href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d, const bool compact)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00546">calendar.cpp:546</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a16473ae4fa75bf2d7699f22f28811b00"><div class="ttname"><a href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a></div><div class="ttdeci">const flag_id flag_NO_PACKED(&quot;NO_PACKED&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a2a03abb968c370e7306f145af285257b"><div class="ttname"><a href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a></div><div class="ttdeci">const flag_id flag_NO_STERILE(&quot;NO_STERILE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a>, <a class="el" href="flag_8cpp.html#a2a03abb968c370e7306f145af285257b">flag_NO_STERILE</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, and <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5707473d2a4a0593e8d32deb73066c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5707473d2a4a0593e8d32deb73066c16">&#9670;&nbsp;</a></span>autodoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::autodoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05684">5684</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;{</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> {</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;        INSTALL_CBM,</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;        UNINSTALL_CBM,</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;        BONESETTING,</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;        TREAT_WOUNDS,</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;        RAD_AWAY,</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;        BLOOD_ANALYSIS,</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;    };</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160; </div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;    <span class="keywordtype">bool</span> adjacent_couch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    <span class="keyword">static</span> <a class="code" href="classavatar.html">avatar</a> null_player;</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> couch_pos;</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;patient = <a class="code" href="iexamine_8cpp.html#a4c60e10da9a5c9fc32b506189784a73b">player_on_couch</a>( you, examp, null_player, adjacent_couch, couch_pos );</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;Operator = <a class="code" href="iexamine_8cpp.html#ad77710c695d26fb05fd8bb50ffacfe89">operator_present</a>( you, examp, null_player );</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160; </div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <span class="keyword">static</span> <a class="code" href="classitem.html">item</a> null_cyborg;</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;cyborg = <a class="code" href="iexamine_8cpp.html#a02d92cfddf3fce3ccffc5bb89c418c29">cyborg_on_couch</a>( couch_pos, null_cyborg );</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="keywordflow">if</span>( !adjacent_couch ) {</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No connected couches found.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    }</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    <span class="keywordflow">if</span>( &amp;patient == &amp;null_player ) {</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;        <span class="keywordflow">if</span>( &amp;cyborg != &amp;null_cyborg ) {</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;            <span class="keywordflow">if</span>( cyborg.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a> &amp;&amp; !cyborg.<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Patient is dead.  Please remove corpse to proceed.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cyborg.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a> ||</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;                       cyborg.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a> ) {</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ERROR Bionic Level Assessment: FULL CYBORG.  Autodoc Mk. XI can&#39;t operate.  Please move patient to appropriate facility.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;            }</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160; </div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;            <a class="code" href="classuilist.html">uilist</a> cmenu;</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;            cmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Autodoc Mk. XI.  Status: Online.  Please choose operation.&quot;</span> );</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;            cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose Compact Bionic Module to install.&quot;</span> ) );</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;            cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose installed bionic to uninstall.&quot;</span> ) );</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;            cmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160; </div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;            <span class="keywordflow">switch</span>( cmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;                <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;                    <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ERROR NO SPACE AVAILABLE.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;                }</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;                <span class="keywordflow">case</span> 2: {</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;                    std::vector&lt;std::string&gt; choice_names;</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;                    choice_names.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Personality_Override&quot;</span> ) );</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;                    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; 6; i++ ) {</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;                        choice_names.emplace_back( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;C0RR#PTED?D#TA&quot;</span> ) );</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;                    }</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;                    <span class="keywordtype">int</span> choice_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose bionic to uninstall&quot;</span> ), choice_names );</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;                    <span class="keywordflow">if</span>( choice_index == 0 ) {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;                        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;save_cyborg( &amp;cyborg, couch_pos, you );</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;                        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;UNKNOWN COMMAND.  Autodoc Mk. XI. Crashed.&quot;</span> ) );</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;                    }</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;                }</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;            }</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No patient found located on the connected couches.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;        }</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( patient.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a955b947f2ca18118b44d3e44aa72b66e">id</a>() == <a class="code" href="iexamine_8cpp.html#a63e5739b23bda74126ceb8fbb66e502b">ACT_OPERATION</a> ) {</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Operation underway.  Please wait until the end of the current procedure.  Estimated time remaining: %s.&quot;</span> ),</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;               <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( patient.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61">moves_left</a> ) ) );</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc is working on %s.&quot;</span> ), patient.<a class="code" href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">disp_name</a>() );</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    }</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160; </div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> unsafe_usage = &amp;Operator == &amp;null_player || ( &amp;Operator == &amp;you &amp;&amp; &amp;patient == &amp;you );</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;    std::string autodoc_header = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Autodoc Mk. XI.  Status: Online.  Please choose operation&quot;</span> );</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;    <span class="keywordflow">if</span>( unsafe_usage ) {</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;        <span class="keyword">const</span> std::string &amp;warning_sign = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot; /&quot;</span>, <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;!&quot;</span>,</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;                                          <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;\\&quot;</span>, <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;        <span class="keyword">const</span> std::string &amp;warning = warning_sign + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; WARNING: Operator missing&quot;</span> ),</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;                                     <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + warning_sign;</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        autodoc_header = warning +</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n Using the Autodoc without an operator can lead to &lt;color_light_cyan&gt;serious injuries&lt;/color&gt; or &lt;color_light_cyan&gt;death&lt;/color&gt;.\n By continuing with the operation you accept the risks and acknowledge that you will not take any legal actions against this facility in case of an accident. &quot;</span> );</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;    }</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160; </div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;    std::vector&lt;item&gt; arm_splints;</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;    std::vector&lt;item&gt; leg_splints;</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160; </div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;supplies : <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().i_at( examp ) ) {</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;        <span class="keywordflow">if</span>( supplies.typeId() == <a class="code" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a> ) {</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;            arm_splints.push_back( supplies );</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;        }</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;        <span class="keywordflow">if</span>( supplies.typeId() == <a class="code" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a> ) {</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;            leg_splints.push_back( supplies );</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;        }</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;    }</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160; </div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;    autodoc_header +=</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;        <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\n\n&lt;color_white&gt;Internal supplies:&lt;/color&gt;\n Arm splints: %d\n Leg splints: %d&quot;</span> ),</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;            arm_splints.size(), leg_splints.size() );</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160; </div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = autodoc_header;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( INSTALL_CBM, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose Compact Bionic Module to install&quot;</span> ) );</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( UNINSTALL_CBM, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose installed bionic to uninstall&quot;</span> ) );</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( BONESETTING, <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Splint broken limbs&quot;</span> ) );</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( TREAT_WOUNDS, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Treat wounds&quot;</span> ) );</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( RAD_AWAY, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Check radiation level&quot;</span> ) );</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( BLOOD_ANALYSIS, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Conduct blood analysis&quot;</span> ) );</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160; </div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160; </div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;    <span class="keywordtype">bool</span> needs_anesthesia = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    std::vector&lt;tool_comp&gt; anesth_kit;</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160; </div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    <span class="keywordflow">if</span>( patient.has_flag( <a class="code" href="iexamine_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> ) || patient.has_bionic( <a class="code" href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a> ) ||</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;        amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt; 1 ) {</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;        needs_anesthesia = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;        std::vector&lt;const item *&gt; a_filter = crafting_inv.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;            <span class="keywordflow">return</span> it.<a class="code" href="classvisitable.html#a5a228d9848d433246417bde5cfc1bf67">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a> );</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;        } );</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *anesthesia_item : a_filter ) {</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;            <span class="keywordflow">if</span>( anesthesia_item-&gt;ammo_remaining() &gt;= 1 ) {</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;                anesth_kit.emplace_back( anesthesia_item-&gt;typeId(), 1 );</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;            }</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;        }</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;    }</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160; </div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;    <span class="keywordflow">switch</span>( amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;        <span class="keywordflow">case</span> INSTALL_CBM: {</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> <a class="code" href="structbionic.html">bionic</a> = <a class="code" href="namespacegame__menus_1_1inv.html#a519d6d84ce3eb0713ff4b799f70e14fb">game_menus::inv::install_bionic</a>( you, you, patient );</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160; </div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="structbionic.html">bionic</a> ) {</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;            }</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160; </div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;            <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *itemtype = <a class="code" href="structbionic.html">bionic</a>.get_item()-&gt;type;</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;            <span class="keyword">const</span> std::string bionic_name = <a class="code" href="structbionic.html">bionic</a>.get_item()-&gt;typeId().c_str();</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160; </div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;            <a class="code" href="classCharacter.html">Character</a> &amp;installer = <a class="code" href="iexamine_8cpp.html#ab07811c5edb4a5794aa450cc9d5506b0">best_installer</a>( you, null_player, itemtype-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty );</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;            <span class="keywordflow">if</span>( &amp;installer == &amp;null_player ) {</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;            }</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160; </div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;            std::vector&lt;item_comp&gt; progs;</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;            <span class="keywordtype">bool</span> has_install_program = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160; </div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;            std::vector&lt;const item *&gt; install_programs = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( [itemtype](</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) -&gt; <span class="keywordtype">bool</span> { <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == itemtype-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;installation_data; } );</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160; </div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;            <span class="keywordflow">if</span>( !install_programs.empty() ) {</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;                has_install_program = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;                progs.emplace_back( install_programs[0]-&gt;typeId(), 1 );</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;            }</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160; </div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> weight = <a class="code" href="namespaceunits.html#aaa69e639de1239a30b679b5f6ae755ca">units::to_kilogram</a>( patient.bodyweight() ) / 10;</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> surgery_duration = itemtype-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty * 2;</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;            <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> req_anesth = *<a class="code" href="iexamine_8cpp.html#a868d0acce540b2aed09e0cba04e45a24">requirement_data_anesthetic</a> *</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;                                                surgery_duration * weight;</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160; </div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;            <span class="keywordflow">if</span>( patient.can_install_bionics( ( *itemtype ), installer, <span class="keyword">true</span>, has_install_program ? 10 : -1 ) ) {</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;                <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> duration = itemtype-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty * 20_minutes;</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;                patient.introduce_into_anesthesia( duration, installer, needs_anesthesia );</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;                <a class="code" href="structbionic.html">bionic</a>.remove_item();</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;                <span class="keywordflow">if</span>( needs_anesthesia ) {</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : req_anesth.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;                        you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( e, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;                    }</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : req_anesth.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;                        you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( e );</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;                    }</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;                    you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;                }</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;                installer.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_minutes ) );</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160; </div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;                patient.install_bionics( ( *itemtype ), installer, <span class="keyword">true</span>, has_install_program ? 10 : -1 );</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160; </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;                <span class="keywordflow">if</span>( has_install_program ) {</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;                    you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( progs );</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;                }</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;            }</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;        }</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160; </div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;        <span class="keywordflow">case</span> UNINSTALL_CBM: {</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;            <span class="keyword">const</span> <a class="code" href="classbionic__collection.html">bionic_collection</a> &amp;installed_bionics = *patient.my_bionics;</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;            <span class="keywordflow">if</span>( installed_bionics.empty() ) {</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;                <a class="code" href="iexamine_8cpp.html#ad531b66543397c01d1e5967beba2280f">popup_player_or_npc</a>( patient, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any bionics installed.&quot;</span> ),</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;                                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have any bionics installed.&quot;</span> ) );</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;            }</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160; </div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;            std::vector&lt;bionic_id&gt; bio_list;</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;            std::vector&lt;std::string&gt; bionic_names;</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;            std::vector&lt;const bionic *&gt; <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33">bionics</a>;</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structbionic.html">bionic</a> &amp;bio : installed_bionics ) {</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( bio.info().itype() ) ) {</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;                    bio_list.emplace_back( bio.id );</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;                    bionic_names.emplace_back( bio.info().name.translated() );</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;                    <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33">bionics</a>.push_back( &amp;bio );</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;                }</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;            }</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;            <span class="keywordtype">int</span> bionic_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose bionic to uninstall&quot;</span> ), bionic_names );</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;            <span class="keywordflow">if</span>( bionic_index &lt; 0 ) {</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;            }</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160; </div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> &amp;bid = bio_list[bionic_index];</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> difficulty =  bid-&gt;<a class="code" href="structbionic__data.html#ae62b994ccda9f8f297198014822a0e01">itype</a>()-&gt;<a class="code" href="structitype.html#a33aeb53774679283298d0202ae3e78ce">bionic</a>-&gt;difficulty;</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> volume_anesth = difficulty * 20 * 2; <span class="comment">// 2ml/min</span></div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160; </div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;            <a class="code" href="classCharacter.html">Character</a> &amp;installer = <a class="code" href="iexamine_8cpp.html#ab07811c5edb4a5794aa450cc9d5506b0">best_installer</a>( you, null_player, difficulty );</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;            <span class="keywordflow">if</span>( &amp;installer == &amp;null_player ) {</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;            }</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160; </div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;            <span class="keywordflow">if</span>( patient.can_uninstall_bionic( *bionics[bionic_index], installer, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;                <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> duration = difficulty * 20_minutes;</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;                patient.introduce_into_anesthesia( duration, installer, needs_anesthesia );</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;                <span class="keywordflow">if</span>( needs_anesthesia ) {</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;                    you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( anesth_kit, volume_anesth );</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;                }</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;                installer.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_minutes ) );</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;                patient.uninstall_bionic( *bionics[bionic_index], installer, <span class="keyword">true</span> );</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;            }</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;        }</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160; </div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;        <span class="keywordflow">case</span> BONESETTING: {</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;            <span class="keywordflow">if</span>( arm_splints.empty() &amp;&amp; leg_splints.empty() ) {</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Internal supply of splints exhausted.  Operation impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;            }</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160; </div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;            <span class="keywordtype">int</span> broken_limbs_count = 0;</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;part :</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;                 patient.get_all_body_parts( <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a> ) ) {</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> = patient.is_limb_broken( part );</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;                <a class="code" href="classeffect.html">effect</a> &amp;existing_effect = patient.get_effect( <a class="code" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, part );</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;                <span class="comment">// Skip part if not broken or already healed 50%</span></div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a> || ( !existing_effect.<a class="code" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() &amp;&amp;</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;                                 existing_effect.<a class="code" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() &gt;</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;                                 existing_effect.<a class="code" href="classeffect.html#a5201a58434d343a00ce457ce6602905c">get_max_duration</a>() - 5_days - 1_turns ) ) {</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;                }</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;                broken_limbs_count++;</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;                patient.mod_moves( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;                <span class="comment">// TODO: fail here if unable to perform the action, i.e. can&#39;t wear more, trait mismatch.</span></div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;                <span class="keywordtype">int</span> quantity = 1;</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;                <span class="keywordflow">if</span>( part == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ) || part == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ) ) {</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;                    <span class="keywordflow">if</span>( !arm_splints.empty() ) {</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().use_amount( examp, 1, <a class="code" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a>, quantity ) ) {</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;                            patient.wear_item( it, <span class="keyword">false</span> );</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;                        }</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;                        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Internal supply of arm splints exhausted.  Splinting broken arms impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;                    }</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( part == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) || part == <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ) ) {</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;                    <span class="keywordflow">if</span>( !leg_splints.empty() ) {</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().use_amount( examp, 1, <a class="code" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a>, quantity ) ) {</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;                            patient.wear_item( it, <span class="keyword">false</span> );</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;                        }</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;                        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Internal supply of leg splints exhausted.  Splinting broken legs impossible.  Exiting.&quot;</span> ) );</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;                    }</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;                }</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160; </div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;                <span class="keywordflow">if</span>( patient.worn_with_flag( <a class="code" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a>, part ) ) {</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The machine rapidly sets and splints your broken %s.&quot;</span> ),</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The machine rapidly sets and splints &lt;npcname&gt;&#39;s broken %s.&quot;</span> ),</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;                                                   <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( part ) );</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;                    patient.add_effect( <a class="code" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, 0_turns, part, <span class="keyword">true</span> );</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;                    <a class="code" href="classeffect.html">effect</a> &amp;mending_effect = patient.get_effect( <a class="code" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, part );</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;                    mending_effect.<a class="code" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( mending_effect.<a class="code" href="classeffect.html#a5201a58434d343a00ce457ce6602905c">get_max_duration</a>() - 5_days );</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;                }</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;            }</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;            <span class="keywordflow">if</span>( broken_limbs_count == 0 ) {</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;                <a class="code" href="iexamine_8cpp.html#ad531b66543397c01d1e5967beba2280f">popup_player_or_npc</a>( patient, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no limbs that require splinting.&quot;</span> ),</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;                                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have limbs that require splinting.&quot;</span> ) );</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;            }</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;        }</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160; </div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;        <span class="keywordflow">case</span> TREAT_WOUNDS: {</div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;            <span class="keywordflow">if</span>( !patient.has_effect( <a class="code" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a> ) &amp;&amp; !patient.has_effect( <a class="code" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) &amp;&amp;</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;                !patient.has_effect( <a class="code" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a> ) ) {</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;                you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any wounds that need treatment.&quot;</span> ),</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t have any wounds that need treatment.&quot;</span> ) );</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;            }</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160; </div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;            <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) || patient.has_effect( <a class="code" href="iexamine_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a> ) ) {</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;                <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a> ) ||</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;                    patient.has_effect( <a class="code" href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a> ) ||</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;                    patient.has_effect( <a class="code" href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a> ) ) {</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected a bacterial infection in your body, but as it also detected you&#39;ve already taken antibiotics, it decided not to apply another dose right now.&quot;</span> ),</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected a bacterial infection in &lt;npcname&gt;&#39;s body, but as it also detected they&#39;ve already taken antibiotics, it decided not to apply another dose right now.&quot;</span> ) );</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;                    patient.add_effect( <a class="code" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, 12_hours );</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;                    patient.add_effect( <a class="code" href="iexamine_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;                    patient.mod_pain( 3 );</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected a bacterial infection in your body and injected antibiotics to treat it.&quot;</span> ),</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected a bacterial infection in &lt;npcname&gt;&#39;s body and injected antibiotics to treat it.&quot;</span> ) );</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160; </div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;                    <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a> ) ) {</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;                        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;                            patient.remove_effect( <a class="code" href="iexamine_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a> );</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;                            patient.add_msg_if_player( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The muscle spasms start to go away.&quot;</span> ) );</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;                            patient.add_msg_if_player( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The medication does nothing to help the spasms.&quot;</span> ) );</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;                        }</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;                    }</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;                }</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;            }</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160; </div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;bp_healed :</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;                 patient.get_all_body_parts( <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a> ) ) {</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;                <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, bp_healed.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() ) ) {</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;                    patient.remove_effect( <a class="code" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, bp_healed );</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected ongoing blood loss from your %s and administered you hemostatic drugs to stop it.&quot;</span> ),</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected ongoing blood loss from &lt;npcname&gt;&#39;s %s and administered them hemostatic drugs to stop it.&quot;</span> ),</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;                                                   <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( bp_healed ) );</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;                }</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160; </div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;                <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, bp_healed.<a class="code" href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">id</a>() ) ) {</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;                    patient.remove_effect( <a class="code" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, bp_healed );</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected an open wound on your %s and applied disinfectant to sterilize it.&quot;</span> ),</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected an open wound on &lt;npcname&gt;&#39;s %s and applied disinfectant to sterilize it.&quot;</span> ),</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;                                                   <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( bp_healed ) );</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160; </div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;                    <span class="comment">// Fixed disinfectant intensity of 4 disinfectant_power + 10 first aid skill level of Autodoc.</span></div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> disinfectant_intensity = 14;</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;                    patient.add_effect( <a class="code" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, 1_turns, bp_healed );</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;                    <a class="code" href="classeffect.html">effect</a> &amp;e = patient.get_effect( <a class="code" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, bp_healed );</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;                    e.<a class="code" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( e.<a class="code" href="classeffect.html#aae46cb63cdb1a4ca3e612d464f20446a">get_int_dur_factor</a>() * disinfectant_intensity );</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;                    patient.set_part_damage_disinfected( bp_healed,</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;                                                         patient.get_part_hp_max( bp_healed ) - patient.get_part_hp_cur( bp_healed ) );</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;                }</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;            }</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;            patient.mod_moves( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;        }</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160; </div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;        <span class="keywordflow">case</span> RAD_AWAY: {</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;            patient.mod_moves( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;            patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc scanned you and detected a radiation level of %d mSv.&quot;</span> ),</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc scanned &lt;npcname&gt; and detected a radiation level of %d mSv.&quot;</span> ),</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;                                           patient.get_rad() );</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;            <span class="keywordflow">if</span>( patient.get_rad() ) {</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;                <span class="keywordflow">if</span>( patient.has_effect( <a class="code" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a> ) ) {</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;                    patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected an anti-radiation drug in your bloodstream, so it decided not to administer you another dose right now.&quot;</span> ),</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;                                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc detected an anti-radiation drug in &lt;npcname&gt;&#39;s bloodstream, so it decided not to administer them another dose right now.&quot;</span> ) );</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc administered an anti-radiation drug to treat radiation poisoning.&quot;</span> ) );</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;                    patient.mod_pain( 3 );</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;                    patient.add_effect( <a class="code" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a>, 1_hours );</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;                }</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;            }</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;            <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( patient.get_leak_level() ) ) {</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Warning!  Autodoc detected a radiation leak of %d mSv from items in patient&#39;s possession.  Urgent decontamination procedures highly recommended.&quot;</span> ),</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( patient.get_leak_level() ) );</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;            }</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;        }</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160; </div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;        <span class="keywordflow">case</span> BLOOD_ANALYSIS: {</div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;            patient.mod_moves( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;            patient.conduct_blood_analysis();</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;            patient.add_msg_player_or_npc( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc analyzed your blood.&quot;</span> ),</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Autodoc analyzed &lt;npcname&gt;&#39;s blood.&quot;</span> ) );</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;        }</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160; </div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;    }</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;}</div>
<div class="ttc" id="abodypart_8cpp_html_ac9aaf0eca53f33436ba15a5b29f68a16"><div class="ttname"><a href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a></div><div class="ttdeci">std::string body_part_name(const bodypart_id &amp;bp, int number)</div><div class="ttdoc">Returns the matching name of the body_part token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00791">bodypart.cpp:791</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00032">bodypart.h:32</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1e1996b6d6fc0a86d917cd155e1656d8"><div class="ttname"><a href="classCharacter.html#a1e1996b6d6fc0a86d917cd155e1656d8">Character::disp_name</a></div><div class="ttdeci">std::string disp_name(bool possessive=false, bool capitalize_first=false) const override</div><div class="ttdoc">Returns either &quot;you&quot; or the player's name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00829">character.cpp:829</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassbionic__collection_html"><div class="ttname"><a href="classbionic__collection.html">bionic_collection</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00266">bionics.h:267</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00260">effect.h:261</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01068">effect.cpp:1068</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00767">effect.cpp:767</a></div></div>
<div class="ttc" id="aclasseffect_html_a40265c904a684396b45a347239e38782"><div class="ttname"><a href="classeffect.html#a40265c904a684396b45a347239e38782">effect::set_duration</a></div><div class="ttdeci">void set_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Sets the duration, capping at max duration.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01076">effect.cpp:1076</a></div></div>
<div class="ttc" id="aclasseffect_html_a5201a58434d343a00ce457ce6602905c"><div class="ttname"><a href="classeffect.html#a5201a58434d343a00ce457ce6602905c">effect::get_max_duration</a></div><div class="ttdeci">time_duration get_max_duration() const</div><div class="ttdoc">Returns the maximum duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01072">effect.cpp:1072</a></div></div>
<div class="ttc" id="aclasseffect_html_aae46cb63cdb1a4ca3e612d464f20446a"><div class="ttname"><a href="classeffect.html#aae46cb63cdb1a4ca3e612d464f20446a">effect::get_int_dur_factor</a></div><div class="ttdeci">time_duration get_int_dur_factor() const</div><div class="ttdoc">Returns the number of turns it takes for the intensity to fall by 1 or 0 if intensity isn't based on ...</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01414">effect.cpp:1414</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem_html_a2993eb10a5ae589e6bb1be0a74cb65c1"><div class="ttname"><a href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">item::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03212">item.h:3212</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aclassitem_html_a4c54ded219374a2f5f80e8eee192dcdf"><div class="ttname"><a href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a></div><div class="ttdeci">static bool type_is_defined(const itype_id &amp;id)</div><div class="ttdoc">Check whether the type id refers to a known type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14576">item.cpp:14576</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a3a477cad2588badd9c96627a91f5eb61"><div class="ttname"><a href="classplayer__activity.html#a3a477cad2588badd9c96627a91f5eb61">player_activity::moves_left</a></div><div class="ttdeci">int moves_left</div><div class="ttdoc">The number of moves remaining in this activity before it is complete.</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00046">player_activity.h:46</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a955b947f2ca18118b44d3e44aa72b66e"><div class="ttname"><a href="classplayer__activity.html#a955b947f2ca18118b44d3e44aa72b66e">player_activity::id</a></div><div class="ttdeci">const activity_id &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00114">player_activity.h:114</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa3cde2bfb58efa9621289c0a70d24c5a"><div class="ttname"><a href="classstring__id.html#aa3cde2bfb58efa9621289c0a70d24c5a">string_id::id</a></div><div class="ttdeci">int_id&lt; T &gt; id() const</div><div class="ttdoc">Translate the string based it to the matching integer based id.</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00054">ammo_effect.cpp:54</a></div></div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="aclassvisitable_html_a3e80572268abd951cf016d275febe4e6"><div class="ttname"><a href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">visitable::items_with</a></div><div class="ttdeci">std::vector&lt; const item * &gt; items_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00330">visitable.cpp:330</a></div></div>
<div class="ttc" id="aclassvisitable_html_a5a228d9848d433246417bde5cfc1bf67"><div class="ttname"><a href="classvisitable.html#a5a228d9848d433246417bde5cfc1bf67">visitable::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level, int qty) const</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00153">visitable.cpp:153</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acreature_8h_html_aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787"><div class="ttname"><a href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a></div><div class="ttdeci">@ only_main</div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9a1f85e94c05010d1308d67d1d918944e4">broken</a></div><div class="ttdeci">@ broken</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00417">enums.h:417</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aflag_8cpp_html_ad12eb85cdd376a51aa3859ca5894377b"><div class="ttname"><a href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a></div><div class="ttdeci">const flag_id flag_SPLINT(&quot;SPLINT&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a02d92cfddf3fce3ccffc5bb89c418c29"><div class="ttname"><a href="iexamine_8cpp.html#a02d92cfddf3fce3ccffc5bb89c418c29">cyborg_on_couch</a></div><div class="ttdeci">static item &amp; cyborg_on_couch(const tripoint &amp;couch_pos, item &amp;null_cyborg)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05613">iexamine.cpp:5613</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a151e6b162a8a2cdbdb11c407013076eb"><div class="ttname"><a href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a></div><div class="ttdeci">static const efftype_id effect_bleed(&quot;bleed&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a15450ecf5b34a615affe959125bf1626"><div class="ttname"><a href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a></div><div class="ttdeci">static const bionic_id bio_painkiller(&quot;bio_painkiller&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1de43fa1f6d16ce87ab7a3a49e47c463"><div class="ttname"><a href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a></div><div class="ttdeci">static const efftype_id effect_infected(&quot;infected&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2ebc0d3c09d8f2896a466db2794c2845"><div class="ttname"><a href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_antibiotic(&quot;antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a34d6c775f0ffa1e39d670ea01615992c"><div class="ttname"><a href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a></div><div class="ttdeci">static const efftype_id effect_pblue(&quot;pblue&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a39b21fc30fecd7d4fb15047600d03522"><div class="ttname"><a href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a></div><div class="ttdeci">static const efftype_id effect_bite(&quot;bite&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3eff2536d0f2d082101e71815160a288"><div class="ttname"><a href="iexamine_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_PAIN_IMMUNE(&quot;PAIN_IMMUNE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a42ac34659f1b9fc5662b2f849fd96dab"><div class="ttname"><a href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a></div><div class="ttdeci">static const quality_id qual_ANESTHESIA(&quot;ANESTHESIA&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4c60e10da9a5c9fc32b506189784a73b"><div class="ttname"><a href="iexamine_8cpp.html#a4c60e10da9a5c9fc32b506189784a73b">player_on_couch</a></div><div class="ttdeci">static Character &amp; player_on_couch(Character &amp;you, const tripoint &amp;autodoc_loc, Character &amp;null_patient, bool &amp;adjacent_couch, tripoint &amp;couch_pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05572">iexamine.cpp:5572</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4ea2c47870b82e831292a9239b2e6ff2"><div class="ttname"><a href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a></div><div class="ttdeci">static const itype_id itype_corpse(&quot;corpse&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a63cd91492b3d8da8ba47a1253cde9886"><div class="ttname"><a href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a></div><div class="ttdeci">static const itype_id itype_leg_splint(&quot;leg_splint&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a63e5739b23bda74126ceb8fbb66e502b"><div class="ttname"><a href="iexamine_8cpp.html#a63e5739b23bda74126ceb8fbb66e502b">ACT_OPERATION</a></div><div class="ttdeci">static const activity_id ACT_OPERATION(&quot;ACT_OPERATION&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a66fbdfe284eb410fdbece4a3be98bf55"><div class="ttname"><a href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_weak_antibiotic(&quot;weak_antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7f4916fdb349021f0c436cb1f91b80fa"><div class="ttname"><a href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a></div><div class="ttdeci">static const itype_id itype_arm_splint(&quot;arm_splint&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a868d0acce540b2aed09e0cba04e45a24"><div class="ttname"><a href="iexamine_8cpp.html#a868d0acce540b2aed09e0cba04e45a24">requirement_data_anesthetic</a></div><div class="ttdeci">static const requirement_id requirement_data_anesthetic(&quot;anesthetic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9e957908de7da4eb428f8ba2c18e372e"><div class="ttname"><a href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a></div><div class="ttdeci">static const itype_id itype_bot_broken_cyborg(&quot;bot_broken_cyborg&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab07811c5edb4a5794aa450cc9d5506b0"><div class="ttname"><a href="iexamine_8cpp.html#ab07811c5edb4a5794aa450cc9d5506b0">best_installer</a></div><div class="ttdeci">static Character &amp; best_installer(Character &amp;you, Character &amp;null_player, int difficulty)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05628">iexamine.cpp:5628</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab5d38652b4b5ac4a2a4810d0d8c3ded1"><div class="ttname"><a href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_strong_antibiotic(&quot;strong_antibiotic&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab871cc9455a5c251797be55e9c14f49d"><div class="ttname"><a href="iexamine_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a></div><div class="ttdeci">static const efftype_id effect_strong_antibiotic_visible(&quot;strong_antibiotic_visible&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_acb76793db7227b1d22461d91189b44ab"><div class="ttname"><a href="iexamine_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a></div><div class="ttdeci">static const efftype_id effect_tetanus(&quot;tetanus&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad531b66543397c01d1e5967beba2280f"><div class="ttname"><a href="iexamine_8cpp.html#ad531b66543397c01d1e5967beba2280f">popup_player_or_npc</a></div><div class="ttdeci">void popup_player_or_npc(Character &amp;you, const char *player_mes, const char *npc_mes, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05674">iexamine.cpp:5674</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad77710c695d26fb05fd8bb50ffacfe89"><div class="ttname"><a href="iexamine_8cpp.html#ad77710c695d26fb05fd8bb50ffacfe89">operator_present</a></div><div class="ttdeci">static Character &amp; operator_present(Character &amp;you, const tripoint &amp;autodoc_loc, Character &amp;null_patient)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05594">iexamine.cpp:5594</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_adcc47d614ba63ddb056307153d5ac06c"><div class="ttname"><a href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a></div><div class="ttdeci">static const efftype_id effect_disinfected(&quot;disinfected&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae239a31e1ebbbbacd06a8fcdd8be2861"><div class="ttname"><a href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a></div><div class="ttdeci">static const efftype_id effect_mending(&quot;mending&quot;)</div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af0e23485ab96118ed88e3e573b597636"><div class="ttname"><a href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">PATH_INFO::options</a></div><div class="ttdeci">cata_path options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00354">path_info.cpp:354</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3af8eb4254a5c40ba0293fd18353b05a33">anonymous_namespace{player_display.cpp}::player_display_tab::bionics</a></div><div class="ttdeci">@ bionics</div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a519d6d84ce3eb0713ff4b799f70e14fb"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a519d6d84ce3eb0713ff4b799f70e14fb">game_menus::inv::install_bionic</a></div><div class="ttdeci">item_location install_bionic(Character &amp;installer, Character &amp;patron, Character &amp;patient, bool surgeon=false)</div><div class="ttdoc">Bionic install menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02710">game_inventory.cpp:2710</a></div></div>
<div class="ttc" id="anamespaceunits_html_aaa69e639de1239a30b679b5f6ae755ca"><div class="ttname"><a href="namespaceunits.html#aaa69e639de1239a30b679b5f6ae755ca">units::to_kilogram</a></div><div class="ttdeci">constexpr double to_kilogram(const mass &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00369">units.h:369</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="astructbionic__data_html_ae62b994ccda9f8f297198014822a0e01"><div class="ttname"><a href="structbionic__data.html#ae62b994ccda9f8f297198014822a0e01">bionic_data::itype</a></div><div class="ttdeci">itype_id itype() const</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l00286">bionics.cpp:286</a></div></div>
<div class="ttc" id="astructbionic_html"><div class="ttname"><a href="structbionic.html">bionic</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00198">bionics.h:198</a></div></div>
<div class="ttc" id="astructitype_html_a33aeb53774679283298d0202ae3e78ce"><div class="ttname"><a href="structitype.html#a33aeb53774679283298d0202ae3e78ce">itype::bionic</a></div><div class="ttdeci">cata::value_ptr&lt; islot_bionic &gt; bionic</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01211">itype.h:1211</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iexamine_8cpp.html#a63e5739b23bda74126ceb8fbb66e502b">ACT_OPERATION</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="iexamine_8cpp_source.html#l05628">best_installer()</a>, <a class="el" href="iexamine_8cpp.html#a15450ecf5b34a615affe959125bf1626">bio_painkiller</a>, <a class="el" href="itype_8h_source.html#l01211">itype::bionic</a>, <a class="el" href="bodypart_8cpp_source.html#l00791">body_part_name()</a>, <a class="el" href="character_8cpp_source.html#l06387">Character::bodyweight()</a>, <a class="el" href="enums_8h_source.html#l00417">broken</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="color_8h_source.html#l00030">c_yellow</a>, <a class="el" href="bionics_8cpp_source.html#l02334">Character::can_install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l02062">Character::can_uninstall_bionic()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="character_8cpp_source.html#l02930">Character::conduct_blood_analysis()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp_source.html#l05613">cyborg_on_couch()</a>, <a class="el" href="character_8cpp_source.html#l00829">Character::disp_name()</a>, <a class="el" href="iexamine_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a>, <a class="el" href="iexamine_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="el" href="iexamine_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="el" href="iexamine_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, <a class="el" href="iexamine_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="iexamine_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, <a class="el" href="iexamine_8cpp.html#a34d6c775f0ffa1e39d670ea01615992c">effect_pblue</a>, <a class="el" href="iexamine_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, <a class="el" href="iexamine_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a>, <a class="el" href="iexamine_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a>, <a class="el" href="iexamine_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a>, <a class="el" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a>, <a class="el" href="calendar_8h_source.html#l00225">time_duration::from_moves()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="creature_8cpp_source.html#l02627">Creature::get_all_body_parts()</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="effect_8cpp_source.html#l01068">effect::get_duration()</a>, <a class="el" href="creature_8cpp_source.html#l01852">Creature::get_effect()</a>, <a class="el" href="effect_8cpp_source.html#l01414">effect::get_int_dur_factor()</a>, <a class="el" href="character_8cpp_source.html#l06796">Character::get_leak_level()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="effect_8cpp_source.html#l01072">effect::get_max_duration()</a>, <a class="el" href="creature_8cpp_source.html#l02277">Creature::get_part_hp_cur()</a>, <a class="el" href="creature_8cpp_source.html#l02282">Creature::get_part_hp_max()</a>, <a class="el" href="character_8cpp_source.html#l06757">Character::get_rad()</a>, <a class="el" href="requirements_8cpp_source.html#l01152">requirement_data::get_tools()</a>, <a class="el" href="bionics_8cpp_source.html#l02648">Character::has_bionic()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="visitable_8cpp_source.html#l00153">visitable::has_quality()</a>, <a class="el" href="player__activity_8h_source.html#l00114">player_activity::id()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00054">string_id&lt; T &gt;::id()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02710">game_menus::inv::install_bionic()</a>, <a class="el" href="bionics_8cpp_source.html#l02417">Character::install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l03217">Character::introduce_into_anesthesia()</a>, <a class="el" href="crafting_8cpp_source.html#l00692">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="character_8cpp_source.html#l02149">Character::is_limb_broken()</a>, <a class="el" href="effect_8cpp_source.html#l00767">effect::is_null()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="bionics_8cpp_source.html#l00286">bionic_data::itype()</a>, <a class="el" href="iexamine_8cpp.html#a7f4916fdb349021f0c436cb1f91b80fa">itype_arm_splint</a>, <a class="el" href="iexamine_8cpp.html#a9e957908de7da4eb428f8ba2c18e372e">itype_bot_broken_cyborg</a>, <a class="el" href="iexamine_8cpp.html#a4ea2c47870b82e831292a9239b2e6ff2">itype_corpse</a>, <a class="el" href="iexamine_8cpp.html#a63cd91492b3d8da8ba47a1253cde9886">itype_leg_splint</a>, <a class="el" href="iexamine_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="player__activity_8h_source.html#l00046">player_activity::moves_left</a>, <a class="el" href="character_8h_source.html#l02723">Character::my_bionics</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">only_main</a>, <a class="el" href="iexamine_8cpp_source.html#l05594">operator_present()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="iexamine_8cpp_source.html#l05572">player_on_couch()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="iexamine_8cpp_source.html#l05674">popup_player_or_npc()</a>, <a class="el" href="iexamine_8cpp.html#a42ac34659f1b9fc5662b2f849fd96dab">qual_ANESTHESIA</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="iexamine_8cpp.html#a868d0acce540b2aed09e0cba04e45a24">requirement_data_anesthetic</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="effect_8cpp_source.html#l01076">effect::set_duration()</a>, <a class="el" href="creature_8cpp_source.html#l02361">Creature::set_part_damage_disinfected()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="units_8h_source.html#l00369">units::to_kilogram()</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="item_8cpp_source.html#l14576">item::type_is_defined()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="bionics_8cpp_source.html#l02117">Character::uninstall_bionic()</a>, <a class="el" href="character__attire_8cpp_source.html#l00431">Character::wear_item()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l02034">bionic_success_chance()</a>, <a class="el" href="bionics_8cpp_source.html#l01983">Character::bionics_adjusted_skill()</a>, <a class="el" href="bionics_8cpp_source.html#l01995">Character::bionics_pl_skill()</a>, <a class="el" href="bionics_8cpp_source.html#l02334">Character::can_install_bionics()</a>, <a class="el" href="bionics_8cpp_source.html#l02062">Character::can_uninstall_bionic()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="bionics_8cpp_source.html#l02417">Character::install_bionics()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03081">activity_handlers::operation_do_turn()</a>, and <a class="el" href="bionics_8cpp_source.html#l02117">Character::uninstall_bionic()</a>.</p>

</div>
</div>
<a id="acd9cd308f5f982d0be7cecc680db89c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd9cd308f5f982d0be7cecc680db89c0">&#9670;&nbsp;</a></span>bars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::bars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If player has amorphous trait, slip through the bars. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01601">1601</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;{</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a> ) ) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : you.<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#aef9cb6bfa6f5446ffbdf160e18ffdb86">encumb</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt;= 10 ) {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your amorphous body could slip though the %s, but your cumbersome gear can&#39;t.&quot;</span> ),</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                     here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Slip through the %s?&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You slide right between the bars.&quot;</span> ) );</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( examp );</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aef9cb6bfa6f5446ffbdf160e18ffdb86"><div class="ttname"><a href="classCharacter.html#aef9cb6bfa6f5446ffbdf160e18ffdb86">Character::encumb</a></div><div class="ttdeci">int encumb(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns ENC provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04046">character.cpp:4046</a></div></div>
<div class="ttc" id="aclassCreature_html_a4537397ede1aea8ecec28183252aabe3"><div class="ttname"><a href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(get_body_part_flags=get_body_part_flags::none) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02627">creature.cpp:2627</a></div></div>
<div class="ttc" id="aclassCreature_html_ac16dcdb688f6f47c594c98c83528a670"><div class="ttname"><a href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">Creature::setpos</a></div><div class="ttdeci">void setpos(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00188">creature.cpp:188</a></div></div>
<div class="ttc" id="aclassmap_html_a51e32639c8df0c90e0743f929bcf2111"><div class="ttname"><a href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">map::tername</a></div><div class="ttdeci">std::string tername(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02340">map.cpp:2340</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a></div><div class="ttdeci">@ none</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00040">dialogue.h:40</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab3388325c8d9a46ddb7af329e1b247fd"><div class="ttname"><a href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a></div><div class="ttdeci">static const trait_id trait_AMORPHOUS(&quot;AMORPHOUS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00238">bp</a>, <a class="el" href="character_8cpp_source.html#l04046">Character::encumb()</a>, <a class="el" href="creature_8cpp_source.html#l02627">Creature::get_all_body_parts()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="creature_8cpp_source.html#l00188">Creature::setpos()</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, and <a class="el" href="iexamine_8cpp.html#ab3388325c8d9a46ddb7af329e1b247fd">trait_AMORPHOUS</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l09039">item::durability_indicator()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="aa63f5daa5e7a2e4683e803228911d77c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa63f5daa5e7a2e4683e803228911d77c">&#9670;&nbsp;</a></span>bulletin_board()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::bulletin_board </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01971">1971</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;{</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;validate_camps();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">point_abs_omt</a> <a class="code" href="namespacecoords.html#ae222bbb7f74b56f73f807483083914fb">omt</a>( <a class="code" href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a>( here.<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() ) ) );</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    std::optional&lt;basecamp *&gt; bcp = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#afb50d2d30ce283fbd3ee8773fde98676">find_camp</a>( omt );</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span>( bcp ) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <a class="code" href="classbasecamp.html">basecamp</a> *temp_camp = *bcp;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#a9aeca574216eb4715b478f9349185bab">validate_bb_pos</a>( here.<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) );</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#aaabb991fdf80cf5ad1c2eb38b2b6ab84">validate_assignees</a>();</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#af444c9325e40cf302418a1566abdb4e2">validate_sort_points</a>();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#a4ae7a79b8b4ca5c5ea188d40d72b7c4e">scan_pseudo_items</a>();</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> = <span class="stringliteral">&quot;Base Missions&quot;</span>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <a class="code" href="classmission__data.html">mission_data</a> mission_key;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#ae589ad011146be27d180bd6638f6086f">set_by_radio</a>( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        temp_camp-&gt;<a class="code" href="classbasecamp.html#ac9f67bf4449e1d0c51b0cbd7839dcc51">get_available_missions</a>( mission_key, here );</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacetalk__function.html#a62b127ab85afb4cb9f6fb6d4593a0e21">talk_function::display_and_choose_opts</a>( mission_key, temp_camp-&gt;<a class="code" href="classbasecamp.html#ade51aefc6c8e4db92ffe5457e239aea2">camp_omt_pos</a>(),</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <span class="stringliteral">&quot;FACTION_CAMP&quot;</span>, <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">title</a> ) ) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            temp_camp-&gt;<a class="code" href="classbasecamp.html#abe26bf1323ce017b9bc79fbd0229c5d9">handle_mission</a>( mission_key.<a class="code" href="classmission__data.html#ab18a1ebd8872d7f4ee17d679833bf909">cur_key</a>.<a class="code" href="structmission__entry.html#a13ab4e9e06a59a2ff6a5e378a77fc990">id</a> );</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        }</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This bulletin board is not inside a camp&quot;</span> ) );</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    }</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;}</div>
<div class="ttc" id="aclassbasecamp_html"><div class="ttname"><a href="classbasecamp.html">basecamp</a></div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00158">basecamp.h:159</a></div></div>
<div class="ttc" id="aclassbasecamp_html_a4ae7a79b8b4ca5c5ea188d40d72b7c4e"><div class="ttname"><a href="classbasecamp.html#a4ae7a79b8b4ca5c5ea188d40d72b7c4e">basecamp::scan_pseudo_items</a></div><div class="ttdeci">void scan_pseudo_items()</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l02182">faction_camp.cpp:2182</a></div></div>
<div class="ttc" id="aclassbasecamp_html_a9aeca574216eb4715b478f9349185bab"><div class="ttname"><a href="classbasecamp.html#a9aeca574216eb4715b478f9349185bab">basecamp::validate_bb_pos</a></div><div class="ttdeci">void validate_bb_pos(const tripoint &amp;new_abs_pos)</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00184">basecamp.h:184</a></div></div>
<div class="ttc" id="aclassbasecamp_html_aaabb991fdf80cf5ad1c2eb38b2b6ab84"><div class="ttname"><a href="classbasecamp.html#aaabb991fdf80cf5ad1c2eb38b2b6ab84">basecamp::validate_assignees</a></div><div class="ttdeci">void validate_assignees()</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8cpp_source.html#l00522">basecamp.cpp:522</a></div></div>
<div class="ttc" id="aclassbasecamp_html_abe26bf1323ce017b9bc79fbd0229c5d9"><div class="ttname"><a href="classbasecamp.html#abe26bf1323ce017b9bc79fbd0229c5d9">basecamp::handle_mission</a></div><div class="ttdeci">bool handle_mission(const ui_mission_id &amp;miss_id)</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l01716">faction_camp.cpp:1716</a></div></div>
<div class="ttc" id="aclassbasecamp_html_ac9f67bf4449e1d0c51b0cbd7839dcc51"><div class="ttname"><a href="classbasecamp.html#ac9f67bf4449e1d0c51b0cbd7839dcc51">basecamp::get_available_missions</a></div><div class="ttdeci">void get_available_missions(mission_data &amp;mission_key, map &amp;here)</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l01393">faction_camp.cpp:1393</a></div></div>
<div class="ttc" id="aclassbasecamp_html_ade51aefc6c8e4db92ffe5457e239aea2"><div class="ttname"><a href="classbasecamp.html#ade51aefc6c8e4db92ffe5457e239aea2">basecamp::camp_omt_pos</a></div><div class="ttdeci">tripoint_abs_omt camp_omt_pos() const</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8h_source.html#l00175">basecamp.h:175</a></div></div>
<div class="ttc" id="aclassbasecamp_html_ae589ad011146be27d180bd6638f6086f"><div class="ttname"><a href="classbasecamp.html#ae589ad011146be27d180bd6638f6086f">basecamp::set_by_radio</a></div><div class="ttdeci">void set_by_radio(bool access_by_radio)</div><div class="ttdef"><b>Definition:</b> <a href="basecamp_8cpp_source.html#l00145">basecamp.cpp:145</a></div></div>
<div class="ttc" id="aclassbasecamp_html_af444c9325e40cf302418a1566abdb4e2"><div class="ttname"><a href="classbasecamp.html#af444c9325e40cf302418a1566abdb4e2">basecamp::validate_sort_points</a></div><div class="ttdeci">bool validate_sort_points()</div><div class="ttdef"><b>Definition:</b> <a href="faction__camp_8cpp_source.html#l05288">faction_camp.cpp:5288</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; point, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09614">map.cpp:9614</a></div></div>
<div class="ttc" id="aclassmission__data_html"><div class="ttname"><a href="classmission__data.html">mission_data</a></div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00133">mission_companion.h:134</a></div></div>
<div class="ttc" id="aclassmission__data_html_ab18a1ebd8872d7f4ee17d679833bf909"><div class="ttname"><a href="classmission__data.html#ab18a1ebd8872d7f4ee17d679833bf909">mission_data::cur_key</a></div><div class="ttdeci">mission_entry cur_key</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00137">mission_companion.h:137</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_afb50d2d30ce283fbd3ee8773fde98676"><div class="ttname"><a href="classovermapbuffer.html#afb50d2d30ce283fbd3ee8773fde98676">overmapbuffer::find_camp</a></div><div class="ttdeci">std::optional&lt; basecamp * &gt; find_camp(const point_abs_omt &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01259">overmapbuffer.cpp:1259</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_a82aec5e351a3d6ef948536834dc1bbd0"><div class="ttname"><a href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a></div><div class="ttdeci">point ms_to_omt_copy(const point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00152">coordinate_conversions.cpp:152</a></div></div>
<div class="ttc" id="anamespacecoords_html_ae222bbb7f74b56f73f807483083914fb"><div class="ttname"><a href="namespacecoords.html#ae222bbb7f74b56f73f807483083914fb">coords::omt</a></div><div class="ttdeci">constexpr scale omt</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00040">coordinates.h:40</a></div></div>
<div class="ttc" id="anamespacemusic_html_a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220"><div class="ttname"><a href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ac1aeefd5db867a2bf1814a6282f5e220">music::title</a></div><div class="ttdeci">@ title</div><div class="ttdef"><b>Definition:</b> <a href="music_8h_source.html#l00014">music.h:14</a></div></div>
<div class="ttc" id="anamespacetalk__function_html_a62b127ab85afb4cb9f6fb6d4593a0e21"><div class="ttname"><a href="namespacetalk__function.html#a62b127ab85afb4cb9f6fb6d4593a0e21">talk_function::display_and_choose_opts</a></div><div class="ttdeci">bool display_and_choose_opts(mission_data &amp;mission_key, const tripoint_abs_omt &amp;omt_pos, const std::string &amp;role_id, const std::string &amp;title)</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8cpp_source.html#l00904">mission_companion.cpp:904</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="astructmission__entry_html_a13ab4e9e06a59a2ff6a5e378a77fc990"><div class="ttname"><a href="structmission__entry.html#a13ab4e9e06a59a2ff6a5e378a77fc990">mission_entry::id</a></div><div class="ttdeci">ui_mission_id id</div><div class="ttdef"><b>Definition:</b> <a href="mission__companion_8h_source.html#l00126">mission_companion.h:126</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00202">point.h:202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="basecamp_8h_source.html#l00175">basecamp::camp_omt_pos()</a>, <a class="el" href="mission__companion_8h_source.html#l00137">mission_data::cur_key</a>, <a class="el" href="mission__companion_8cpp_source.html#l00904">talk_function::display_and_choose_opts()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01259">overmapbuffer::find_camp()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="faction__camp_8cpp_source.html#l01393">basecamp::get_available_missions()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09614">map::getabs()</a>, <a class="el" href="faction__camp_8cpp_source.html#l01716">basecamp::handle_mission()</a>, <a class="el" href="mission__companion_8h_source.html#l00126">mission_entry::id</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00152">ms_to_omt_copy()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="faction__camp_8cpp_source.html#l02182">basecamp::scan_pseudo_items()</a>, <a class="el" href="basecamp_8cpp_source.html#l00145">basecamp::set_by_radio()</a>, <a class="el" href="music_8h_source.html#l00014">music::title</a>, <a class="el" href="basecamp_8cpp_source.html#l00522">basecamp::validate_assignees()</a>, <a class="el" href="basecamp_8h_source.html#l00184">basecamp::validate_bb_pos()</a>, <a class="el" href="faction__camp_8cpp_source.html#l05288">basecamp::validate_sort_points()</a>, and <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a1cd2a64129f840567218bcfe9bf2dbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cd2a64129f840567218bcfe9bf2dbde">&#9670;&nbsp;</a></span>can_fertilize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classret__val.html">ret_val</a>&lt; void &gt; iexamine::can_fertilize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fertilizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02745">2745</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;{</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">ter_furn_flag::TFLAG_PLANT</a>, tile ) ) {</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tile isn&#39;t a plant&quot;</span> ) );</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    }</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tile ).<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() &gt; 1 ) {</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tile is already fertilized&quot;</span> ) );</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    }</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keywordflow">if</span>( ( fertilizer-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() &amp;&amp; !you.<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( fertilizer, 1 ) ) ||</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        !you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( fertilizer, 1 ) ) {</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val&lt;void&gt;::make_failure</a>(</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tried to fertilize with %s, but player doesn&#39;t have any.&quot;</span> ),</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                   fertilizer.<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160; </div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val&lt;void&gt;::make_success</a>();</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aa33f9870c95a95d8a46423c9d6477d99"><div class="ttname"><a href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09586">character.cpp:9586</a></div></div>
<div class="ttc" id="aclassret__val_html_a0bbde13713bc279563fa85782599f957"><div class="ttname"><a href="classret__val.html#a0bbde13713bc279563fa85782599f957">ret_val::make_success</a></div><div class="ttdeci">static ret_val make_success(T val=default_success::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00063">ret_val.h:63</a></div></div>
<div class="ttc" id="aclassret__val_html_a415798e6fd736bd724329890cae0df4a"><div class="ttname"><a href="classret__val.html#a415798e6fd736bd724329890cae0df4a">ret_val::make_failure</a></div><div class="ttdeci">static ret_val make_failure(T val=default_failure::value)</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00067">ret_val.h:67</a></div></div>
<div class="ttc" id="aclassvisitable_html_aa199bd0ea7a41c50a2de5761dd987338"><div class="ttname"><a href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo, const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01018">visitable.cpp:1018</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">ter_furn_flag::TFLAG_PLANT</a></div><div class="ttdeci">@ TFLAG_PLANT</div></div>
<div class="ttc" id="astructitype_html_a9defae7ba72f6d0af2e5629c4244f00e"><div class="ttname"><a href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">itype::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01501">itype.h:1501</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="itype_8h_source.html#l01501">itype::count_by_charges()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ret__val_8h_source.html#l00067">ret_val&lt; T &gt;::make_failure()</a>, <a class="el" href="ret__val_8h_source.html#l00063">ret_val&lt; T &gt;::make_success()</a>, <a class="el" href="item__stack_8cpp_source.html#l00014">item_stack::size()</a>, and <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">TFLAG_PLANT</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02765">fertilize_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03564">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a44996bde1bc157e453fa64ec3b6aba34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44996bde1bc157e453fa64ec3b6aba34">&#9670;&nbsp;</a></span>can_hack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::can_hack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01383">1383</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;{</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot read!&quot;</span> ) );</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;best_hacking = you.<a class="code" href="classCharacter.html#a201bedaf0d4d679b34fea2160434760f">best_item_with_quality</a>( <a class="code" href="iexamine_8cpp.html#a0e93b821c731e5a0e2504212605cfcd2">qual_HACK</a> );</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">if</span>( best_hacking.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() || !<a class="code" href="classitem__location.html">item_location</a>{you, &amp;best_hacking}-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( &amp;you ) ) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have a hacking tool with enough charges!&quot;</span> ) );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a201bedaf0d4d679b34fea2160434760f"><div class="ttname"><a href="classCharacter.html#a201bedaf0d4d679b34fea2160434760f">Character::best_item_with_quality</a></div><div class="ttdeci">item &amp; best_item_with_quality(const quality_id &amp;qid)</div><div class="ttdoc">Look for items in the player's inventory that have the specified quality; return the one with highest...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10226">character.cpp:10226</a></div></div>
<div class="ttc" id="aclassitem_html_a4d5555082454b3cb192f59a70838c891"><div class="ttname"><a href="classitem.html#a4d5555082454b3cb192f59a70838c891">item::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00931">item.cpp:931</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0e93b821c731e5a0e2504212605cfcd2"><div class="ttname"><a href="iexamine_8cpp.html#a0e93b821c731e5a0e2504212605cfcd2">qual_HACK</a></div><div class="ttdeci">static const quality_id qual_HACK(&quot;HACK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a357572465dfb7a0a417d86e1be77af49"><div class="ttname"><a href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a></div><div class="ttdeci">static const trait_id trait_ILLITERATE(&quot;ILLITERATE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l10226">Character::best_item_with_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="iexamine_8cpp.html#a0e93b821c731e5a0e2504212605cfcd2">qual_HACK</a>, and <a class="el" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine__actors_8cpp_source.html#l00163">cardreader_examine_actor::call()</a>, <a class="el" href="iexamine_8cpp_source.html#l01424">cardreader_foodplace()</a>, <a class="el" href="iexamine_8cpp_source.html#l05185">pay_gas()</a>, and <a class="el" href="iexamine_8cpp_source.html#l01397">try_start_hacking()</a>.</p>

</div>
</div>
<a id="ace8116fba53e3bf82aa670c31c932045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8116fba53e3bf82aa670c31c932045">&#9670;&nbsp;</a></span>cardreader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6daf5fb773dc8eccdf30b20f4bfda90a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6daf5fb773dc8eccdf30b20f4bfda90a">&#9670;&nbsp;</a></span>cardreader_foodplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader_foodplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01424">1424</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">if</span>( ( you.<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="iexamine_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a> ) ||</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;          you.<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="iexamine_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Press mask on the reader?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 3 ) ) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code" href="iexamine_8cpp.html#aaca56ce59495029afae297d7f84730a8">ter_t_door_metal_locked</a> ) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a74ab73a2211aa8da9a1820c9615f83a4">ter_t_door_metal_c</a> );</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                <a class="code" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        }</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a> ) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You press your face on the reader.&quot;</span> ) );</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The nearby doors are unlocked.&quot;</span> ) );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Hello Foodperson.  Welcome home.\&quot;&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The nearby doors are already unlocked.&quot;</span> ) );</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lock doors?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 3 ) ) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code" href="iexamine_8cpp.html#a32bf09215957660abce3c6b35376a7a3">ter_t_door_metal_o</a> || here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp ) == <a class="code" href="iexamine_8cpp.html#a74ab73a2211aa8da9a1820c9615f83a4">ter_t_door_metal_c</a> ) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == tmp ) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are in the way of the door, move before trying again.&quot;</span> ) );</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#aaca56ce59495029afae297d7f84730a8">ter_t_door_metal_locked</a> );</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                        }</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iexamine_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a>, 1 ) ||</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;               you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iexamine_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a>, 1 ) ) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;FOODPERSON DETECTED.  Please make yourself presentable.\&quot;&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                       <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Your face is inadequate.  Please go away.\&quot;&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                       <span class="stringliteral">&quot;speech&quot;</span>, <span class="stringliteral">&quot;welcome&quot;</span> );</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceiexamine.html#a44996bde1bc157e453fa64ec3b6aba34">can_hack</a>( you ) &amp;&amp; <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attempt to hack this card-reader?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            <a class="code" href="namespaceiexamine.html#a8f535acef0246f6278825d8b8e99b221">try_start_hacking</a>( you, examp );</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00538">character_attire.cpp:538</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="aclassmap_html_a59bdb65280e5e1461469b0e1275c402e"><div class="ttname"><a href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">map::ter_set</a></div><div class="ttdeci">bool ter_set(const tripoint &amp;p, const ter_id &amp;new_terrain, bool avoid_creatures=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02226">map.cpp:2226</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01922">map.cpp:1922</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_a18a5c5b03ba964c4d5d06e062510c99c"><div class="ttname"><a href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a></div><div class="ttdeci">static void open()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00574">handle_action.cpp:574</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a23ab798a014e7d7135089fa750c2b563"><div class="ttname"><a href="iexamine_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a></div><div class="ttdeci">static const itype_id itype_foodperson_mask(&quot;foodperson_mask&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a32bf09215957660abce3c6b35376a7a3"><div class="ttname"><a href="iexamine_8cpp.html#a32bf09215957660abce3c6b35376a7a3">ter_t_door_metal_o</a></div><div class="ttdeci">static const ter_str_id ter_t_door_metal_o(&quot;t_door_metal_o&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a74ab73a2211aa8da9a1820c9615f83a4"><div class="ttname"><a href="iexamine_8cpp.html#a74ab73a2211aa8da9a1820c9615f83a4">ter_t_door_metal_c</a></div><div class="ttdeci">static const ter_str_id ter_t_door_metal_c(&quot;t_door_metal_c&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9260a87c7c9a0df88820afa3a689dc68"><div class="ttname"><a href="iexamine_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a></div><div class="ttdeci">static const itype_id itype_foodperson_mask_on(&quot;foodperson_mask_on&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aaca56ce59495029afae297d7f84730a8"><div class="ttname"><a href="iexamine_8cpp.html#aaca56ce59495029afae297d7f84730a8">ter_t_door_metal_locked</a></div><div class="ttdeci">static const ter_str_id ter_t_door_metal_locked(&quot;t_door_metal_locked&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine_html_a44996bde1bc157e453fa64ec3b6aba34"><div class="ttname"><a href="namespaceiexamine.html#a44996bde1bc157e453fa64ec3b6aba34">iexamine::can_hack</a></div><div class="ttdeci">bool can_hack(Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01383">iexamine.cpp:1383</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a8f535acef0246f6278825d8b8e99b221"><div class="ttname"><a href="namespaceiexamine.html#a8f535acef0246f6278825d8b8e99b221">iexamine::try_start_hacking</a></div><div class="ttdeci">bool try_start_hacking(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01397">iexamine.cpp:1397</a></div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00318">sounds.cpp:318</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a></div><div class="ttdeci">@ electronic_speech</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iexamine_8cpp_source.html#l01383">can_hack()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="character__attire_8cpp_source.html#l00538">Character::is_wearing()</a>, <a class="el" href="iexamine_8cpp.html#a23ab798a014e7d7135089fa750c2b563">itype_foodperson_mask</a>, <a class="el" href="iexamine_8cpp.html#a9260a87c7c9a0df88820afa3a689dc68">itype_foodperson_mask_on</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="handle__action_8cpp_source.html#l00574">open()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a74ab73a2211aa8da9a1820c9615f83a4">ter_t_door_metal_c</a>, <a class="el" href="iexamine_8cpp.html#aaca56ce59495029afae297d7f84730a8">ter_t_door_metal_locked</a>, <a class="el" href="iexamine_8cpp.html#a32bf09215957660abce3c6b35376a7a3">ter_t_door_metal_o</a>, and <a class="el" href="iexamine_8cpp_source.html#l01397">try_start_hacking()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ae322f02d09192d385c9eef1dd1dde1b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae322f02d09192d385c9eef1dd1dde1b2">&#9670;&nbsp;</a></span>cardreader_robofac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cardreader_robofac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01410">1410</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;{</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> card_type = <a class="code" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( card_type, 1 ) &amp;&amp; <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Swipe your ID card?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        you.<a class="code" href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">use_amount</a>( card_type, 1 );</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The card reader short circuits!&quot;</span> ) );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a5006f23c16c4a853cb518ab7488ecbf4">ter_t_card_reader_broken</a> );</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="namespaceiexamine.html#a9d6ca394ee59a2aa33376ca583d07d02">intercom</a>( you, examp );</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have never seen this card reader model before.  Hacking it seems impossible.&quot;</span> ) );</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a24e0a245e9fafffb3c4a2e676b5cb635"><div class="ttname"><a href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">Character::use_amount</a></div><div class="ttdeci">std::list&lt; item &gt; use_amount(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09595">character.cpp:9595</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5006f23c16c4a853cb518ab7488ecbf4"><div class="ttname"><a href="iexamine_8cpp.html#a5006f23c16c4a853cb518ab7488ecbf4">ter_t_card_reader_broken</a></div><div class="ttdeci">static const ter_str_id ter_t_card_reader_broken(&quot;t_card_reader_broken&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aae6faeb7445e8e1c34fc703da8024a24"><div class="ttname"><a href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a></div><div class="ttdeci">static const itype_id itype_id_science(&quot;id_science&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine_html_a9d6ca394ee59a2aa33376ca583d07d02"><div class="ttname"><a href="namespaceiexamine.html#a9d6ca394ee59a2aa33376ca583d07d02">iexamine::intercom</a></div><div class="ttdeci">void intercom(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01472">iexamine.cpp:1472</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="iexamine_8cpp_source.html#l01472">intercom()</a>, <a class="el" href="iexamine_8cpp.html#aae6faeb7445e8e1c34fc703da8024a24">itype_id_science</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a5006f23c16c4a853cb518ab7488ecbf4">ter_t_card_reader_broken</a>, and <a class="el" href="character_8cpp_source.html#l09595">Character::use_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a17292ceeb90cd8b5f9ab5ecb803996bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17292ceeb90cd8b5f9ab5ecb803996bd">&#9670;&nbsp;</a></span>chainfence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::chainfence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt climbing over fence. </p>
<p>Calculates move cost, applies it to player and moves them. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01513">1513</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;{</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">// If player is grabbed, trapped, or somehow otherwise movement-impeded, first try to break free</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">move_effects</a>( <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a0c2f4c860613a583174fea53b3572831">get_working_arm_count</a>() &lt; 1 ) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t climb because your arms are too damaged or encumbered.&quot;</span> ) );</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> weapon = you.<a class="code" href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">get_wielded_item</a>();</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">if</span>( weapon &amp;&amp; weapon-&gt;<a class="code" href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">is_two_handed</a>( you ) ) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>(</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t climb because you have to wield a %s with both hands.\n\nPut it away?&quot;</span> ),</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                weapon-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) ) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a5140a7e16506aaabd28cf36c287b7619">unwield</a>() ) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="comment">// We&#39;re not going to do anything if we&#39;re already on that point.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">// Also prompt the player before taking an action.</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == examp || !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Climb obstacle?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 400;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="comment">// TODO: Remove hardcoded trait checks when new arthropod bits happen</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a0da02939b04141bc828addf38b2eaee6">ter_furn_flag::TFLAG_CLIMB_SIMPLE</a>, examp ) ) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a6aeeec82640334b9c9d4d4c7b7806afb">proficiency_prof_parkour</a> ) ) {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You vault over the obstacle with ease.&quot;</span> ) );</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 100; <span class="comment">// Not tall enough to warrant spider-climbing, so only relevant trait.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You vault over the obstacle.&quot;</span> ) );</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 300; <span class="comment">// Most common move cost for barricades pre-change.</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a> ) &amp;&amp;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;               !you.<a class="code" href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">wearing_fitting_on</a>( <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Climbing this obstacle is trivial for one such as you.&quot;</span> ) );</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 75; <span class="comment">// Yes, faster than walking.  6-8 limbs are impressive.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a> ) &amp;&amp;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;               !you.<a class="code" href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">wearing_fitting_on</a>( <a class="code" href="classint__id.html">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You quickly scale the fence.&quot;</span> ) );</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 90;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iexamine_8cpp.html#a6aeeec82640334b9c9d4d4c7b7806afb">proficiency_prof_parkour</a> ) ) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This obstacle is no match for your freerunning abilities.&quot;</span> ) );</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 100;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a> ) ? 800 : 400;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;slip_down( <a class="code" href="classgame.html#a418551d08e00eb850d2e6bbb5b6ff4ceadb3648fc1573ed5d245334b31cb072ee">game::climb_maneuver::over_obstacle</a>, <a class="code" href="iexamine_8cpp.html#af494651fe015656b0a69107a72411ba3">climbing_aid_furn_CLIMBABLE</a> ) ) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -move_cost );</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <a class="code" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;plmove&quot;</span>, <span class="stringliteral">&quot;clear_obstacle&quot;</span>,</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                             <a class="code" href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a>,</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                   <span class="stringliteral">&quot;Move cost to vault: %d, limb score modifier %.1f&quot;</span>, move_cost,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                   you.<a class="code" href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">get_modifier</a>( <a class="code" href="iexamine_8cpp.html#a0423495392868fdf246e865a828c29db">character_modifier_obstacle_climb_mod</a> ) );</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> /= you.<a class="code" href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">get_modifier</a>( <a class="code" href="iexamine_8cpp.html#a0423495392868fdf246e865a828c29db">character_modifier_obstacle_climb_mod</a> );</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a>,</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                   <span class="stringliteral">&quot;Final move cost %d&quot;</span>, move_cost );</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -move_cost );</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        here.<a class="code" href="classmap.html#a53d95390d133477f8b4a1ce76482750b">unboard_vehicle</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( examp );</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span>( examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> || examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt; <a class="code" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> ||</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &gt;= <a class="code" href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a> + <a class="code" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> || examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &gt;= <a class="code" href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a> + <a class="code" href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a> ) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( you );</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a09d9ec4b94ca85ac0b546d02232faf90"><div class="ttname"><a href="classCharacter.html#a09d9ec4b94ca85ac0b546d02232faf90">Character::wearing_fitting_on</a></div><div class="ttdeci">bool wearing_fitting_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body part.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00578">character_attire.cpp:578</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0c2f4c860613a583174fea53b3572831"><div class="ttname"><a href="classCharacter.html#a0c2f4c860613a583174fea53b3572831">Character::get_working_arm_count</a></div><div class="ttdeci">int get_working_arm_count() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02101">character.cpp:2101</a></div></div>
<div class="ttc" id="aclassCharacter_html_a191d57983e5a0064be49504c11e8b56a"><div class="ttname"><a href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">Character::get_modifier</a></div><div class="ttdeci">float get_modifier(const character_modifier_id &amp;mod, const skill_id &amp;skill=skill_id::NULL_ID()) const</div><div class="ttdef"><b>Definition:</b> <a href="character__modifier_8cpp_source.html#l00401">character_modifier.cpp:401</a></div></div>
<div class="ttc" id="aclassCharacter_html_a37772343c5d5a20510bafe1890a5a839"><div class="ttname"><a href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">Character::move_effects</a></div><div class="ttdeci">bool move_effects(bool attacking) override</div><div class="ttdoc">Processes effects which may prevent the Character from moving (bear traps, crushed,...</div><div class="ttdef"><b>Definition:</b> <a href="character__escape_8cpp_source.html#l00373">character_escape.cpp:373</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5140a7e16506aaabd28cf36c287b7619"><div class="ttname"><a href="classCharacter.html#a5140a7e16506aaabd28cf36c287b7619">Character::unwield</a></div><div class="ttdeci">bool unwield()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07899">character.cpp:7899</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02693">character.h:2693</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72472dd1bc3a1fba8b053682ae5a2244"><div class="ttname"><a href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">Character::has_proficiency</a></div><div class="ttdeci">bool has_proficiency(const proficiency_id &amp;prof) const</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00019">character_proficiency.cpp:19</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa9a4335ab1fd0d975199750b1ebf5bef"><div class="ttname"><a href="classCharacter.html#aa9a4335ab1fd0d975199750b1ebf5bef">Character::get_wielded_item</a></div><div class="ttdeci">item_location get_wielded_item() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00674">character.cpp:674</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassgame_html_a418551d08e00eb850d2e6bbb5b6ff4ceadb3648fc1573ed5d245334b31cb072ee"><div class="ttname"><a href="classgame.html#a418551d08e00eb850d2e6bbb5b6ff4ceadb3648fc1573ed5d245334b31cb072ee">game::climb_maneuver::over_obstacle</a></div><div class="ttdeci">@ over_obstacle</div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_af373f646c1ee172941490dc7cc04bbcd"><div class="ttname"><a href="classitem.html#af373f646c1ee172941490dc7cc04bbcd">item::is_two_handed</a></div><div class="ttdeci">bool is_two_handed(const Character &amp;guy) const</div><div class="ttdoc">Whether the character needs both hands to wield this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09137">item.cpp:9137</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a53d95390d133477f8b4a1ce76482750b"><div class="ttname"><a href="classmap.html#a53d95390d133477f8b4a1ce76482750b">map::unboard_vehicle</a></div><div class="ttdeci">void unboard_vehicle(const vpart_reference &amp;, Character *passenger, bool dead_passenger=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01395">map.cpp:1395</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a39fd8a829e3dc412646663066dbdb54c"><div class="ttname"><a href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a></div><div class="ttdeci">constexpr int SEEX</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00042">game_constants.h:42</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a4cfa35de359af17f7bc6c2a424339eb5"><div class="ttname"><a href="game__constants_8h.html#a4cfa35de359af17f7bc6c2a424339eb5">SEEY</a></div><div class="ttdeci">constexpr int SEEY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00043">game_constants.h:43</a></div></div>
<div class="ttc" id="agame__constants_8h_html_acf60bb2d3beb1625a9344e3291dda674"><div class="ttname"><a href="game__constants_8h.html#acf60bb2d3beb1625a9344e3291dda674">HALF_MAPSIZE_Y</a></div><div class="ttdeci">constexpr int HALF_MAPSIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00049">game_constants.h:49</a></div></div>
<div class="ttc" id="agame__constants_8h_html_adf7bb33c88c44d0c1da57b5948ead4ac"><div class="ttname"><a href="game__constants_8h.html#adf7bb33c88c44d0c1da57b5948ead4ac">HALF_MAPSIZE_X</a></div><div class="ttdeci">constexpr int HALF_MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00048">game_constants.h:48</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0423495392868fdf246e865a828c29db"><div class="ttname"><a href="iexamine_8cpp.html#a0423495392868fdf246e865a828c29db">character_modifier_obstacle_climb_mod</a></div><div class="ttdeci">static const character_modifier_id character_modifier_obstacle_climb_mod(&quot;obstacle_climb_mod&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3a176c0b195118f620ddab93c2ced71b"><div class="ttname"><a href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a></div><div class="ttdeci">static const trait_id trait_BADKNEES(&quot;BADKNEES&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6aeeec82640334b9c9d4d4c7b7806afb"><div class="ttname"><a href="iexamine_8cpp.html#a6aeeec82640334b9c9d4d4c7b7806afb">proficiency_prof_parkour</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_parkour(&quot;prof_parkour&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac41827abd252cabc27c7c385291f71e4"><div class="ttname"><a href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS_OK(&quot;INSECT_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_accbe02d1b542c1aeb1081f0e11e3afd5"><div class="ttname"><a href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS_OK(&quot;ARACHNID_ARMS_OK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af494651fe015656b0a69107a72411ba3"><div class="ttname"><a href="iexamine_8cpp.html#af494651fe015656b0a69107a72411ba3">climbing_aid_furn_CLIMBABLE</a></div><div class="ttdeci">static const climbing_aid_id climbing_aid_furn_CLIMBABLE(&quot;furn_CLIMBABLE&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a0da02939b04141bc828addf38b2eaee6"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a0da02939b04141bc828addf38b2eaee6">ter_furn_flag::TFLAG_CLIMB_SIMPLE</a></div><div class="ttdeci">@ TFLAG_CLIMB_SIMPLE</div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="anamespaceactivity__handlers_html_a88e87301f5548ff4bc7076a59fcde638"><div class="ttname"><a href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">activity_handlers::move_cost</a></div><div class="ttdeci">int move_cost(const item &amp;it, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00538">activity_item_handling.cpp:538</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a></div><div class="ttdeci">@ DF_IEXAMINE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00259">debug.h:259</a></div></div>
<div class="ttc" id="anamespacesfx_html_a1f138eaa92db132e81ce591751c512cc"><div class="ttname"><a href="namespacesfx.html#a1f138eaa92db132e81ce591751c512cc">sfx::get_heard_volume</a></div><div class="ttdeci">int get_heard_volume(const tripoint &amp;source)</div><div class="ttdoc">Functions from sfx that do not use the SDL_mixer API at all.</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l02045">sounds.cpp:2045</a></div></div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01999">sounds.cpp:1999</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="iexamine_8cpp.html#a0423495392868fdf246e865a828c29db">character_modifier_obstacle_climb_mod</a>, <a class="el" href="iexamine_8cpp.html#af494651fe015656b0a69107a72411ba3">climbing_aid_furn_CLIMBABLE</a>, <a class="el" href="debug_8h_source.html#l00259">debugmode::DF_IEXAMINE</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="sounds_8cpp_source.html#l02045">sfx::get_heard_volume()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character__modifier_8cpp_source.html#l00401">Character::get_modifier()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l00674">Character::get_wielded_item()</a>, <a class="el" href="character_8cpp_source.html#l02101">Character::get_working_arm_count()</a>, <a class="el" href="game__constants_8h_source.html#l00048">HALF_MAPSIZE_X</a>, <a class="el" href="game__constants_8h_source.html#l00049">HALF_MAPSIZE_Y</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00019">Character::has_proficiency()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l02693">Character::in_vehicle</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="item_8cpp_source.html#l09137">item::is_two_handed()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character__escape_8cpp_source.html#l00373">Character::move_effects()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classgame.html#a418551d08e00eb850d2e6bbb5b6ff4ceadb3648fc1573ed5d245334b31cb072ee">game::over_obstacle</a>, <a class="el" href="sounds_8cpp_source.html#l01999">sfx::play_variant_sound()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="iexamine_8cpp.html#a6aeeec82640334b9c9d4d4c7b7806afb">proficiency_prof_parkour</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="game__constants_8h_source.html#l00042">SEEX</a>, <a class="el" href="game__constants_8h_source.html#l00043">SEEY</a>, <a class="el" href="creature_8cpp_source.html#l00188">Creature::setpos()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a0da02939b04141bc828addf38b2eaee6">TFLAG_CLIMB_SIMPLE</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iexamine_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a>, <a class="el" href="iexamine_8cpp.html#a3a176c0b195118f620ddab93c2ced71b">trait_BADKNEES</a>, <a class="el" href="iexamine_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a>, <a class="el" href="map_8cpp_source.html#l01395">map::unboard_vehicle()</a>, <a class="el" href="character_8cpp_source.html#l07899">Character::unwield()</a>, <a class="el" href="character__attire_8cpp_source.html#l00578">Character::wearing_fitting_on()</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ac009ba984e6e90765ec3d7fd4e5266f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac009ba984e6e90765ec3d7fd4e5266f9">&#9670;&nbsp;</a></span>change_appearance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::change_appearance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change player eye and skin color. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00380">380</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    amenu.<a class="code" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Change what?&quot;</span> );</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Change eye color&quot;</span> ) );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Change skin color&quot;</span> ) );</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span>( amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 0 ) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        you.<a class="code" href="classCharacter.html#a203f26701c655cebed5511a56f777158">customize_appearance</a>( <a class="code" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">customize_appearance_choice::EYES</a> );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 1 ) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        you.<a class="code" href="classCharacter.html#a203f26701c655cebed5511a56f777158">customize_appearance</a>( <a class="code" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">customize_appearance_choice::SKIN</a> );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60"><div class="ttname"><a href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">customize_appearance_choice::SKIN</a></div><div class="ttdeci">@ SKIN</div></div>
<div class="ttc" id="acharacter_8h_html_ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605"><div class="ttname"><a href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">customize_appearance_choice::EYES</a></div><div class="ttdeci">@ EYES</div></div>
<div class="ttc" id="aclassCharacter_html_a203f26701c655cebed5511a56f777158"><div class="ttname"><a href="classCharacter.html#a203f26701c655cebed5511a56f777158">Character::customize_appearance</a></div><div class="ttdeci">void customize_appearance(customize_appearance_choice choice)</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l02354">mutation.cpp:2354</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00038">ui.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="mutation_8cpp_source.html#l02354">Character::customize_appearance()</a>, <a class="el" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">EYES</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">SKIN</a>, and <a class="el" href="ui_8h_source.html#l00418">uilist::title</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a48b0952e9370bd1f1ecd8332f7e2ce3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48b0952e9370bd1f1ecd8332f7e2ce3f">&#9670;&nbsp;</a></span>choose_fertilizer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> iexamine::choose_fertilizer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ask_player</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02814">2814</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;{</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    std::vector&lt;item *&gt; f_inv = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <a class="code" href="flag_8cpp.html#aff57c2d9ce2b1ec14e6f149a06856192">flag_FERTILIZER</a> );</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="keywordflow">if</span>( f_inv.empty() ) {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no fertilizer for the %s.&quot;</span> ), pname );</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    }</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    std::vector&lt;itype_id&gt; f_types;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    std::vector&lt;std::string&gt; f_names;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * <span class="keyword">const</span> &amp;f : f_inv ) {</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">if</span>( std::find( f_types.begin(), f_types.end(), f-&gt;typeId() ) == f_types.end() ) {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            f_types.push_back( f-&gt;typeId() );</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            f_names.push_back( f-&gt;tname() );</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        }</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordflow">if</span>( ask_player &amp;&amp; !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fertilize the %s&quot;</span> ), pname ) ) {</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    }</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160; </div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <span class="comment">// Choose fertilizer from list</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keywordtype">int</span> f_index = 0;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keywordflow">if</span>( f_types.size() &gt; 1 ) {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        f_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use which fertilizer?&quot;</span> ), f_names );</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    }</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="keywordflow">if</span>( f_index &lt; 0 ) {</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>();</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    }</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordflow">return</span> f_types[f_index];</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0e8509fc038cee083b5a7cc7bdf0f8f9"><div class="ttname"><a href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">Character::cache_get_items_with</a></div><div class="ttdeci">std::vector&lt; item * &gt; cache_get_items_with(const itype_id &amp;type, const std::function&lt; bool(item &amp;)&gt; &amp;do_and_check_func=return_true&lt; item &gt;)</div><div class="ttdoc">Returns all items with the given flag and/or that pass the given boolean item function,...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09494">character.cpp:9494</a></div></div>
<div class="ttc" id="aflag_8cpp_html_aff57c2d9ce2b1ec14e6f149a06856192"><div class="ttname"><a href="flag_8cpp.html#aff57c2d9ce2b1ec14e6f149a06856192">flag_FERTILIZER</a></div><div class="ttdeci">const flag_id flag_FERTILIZER(&quot;FERTILIZER&quot;)</div></div>
<div class="ttc" id="atype__id_8h_html_ac2f82f863d4e9e8f267a77a73910ebbf"><div class="ttname"><a href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a></div><div class="ttdeci">string_id&lt; itype &gt; itype_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00122">type_id.h:122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="flag_8cpp.html#aff57c2d9ce2b1ec14e6f149a06856192">flag_FERTILIZER</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02848">aggie_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03564">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a5bbdc2309183d193b87f8d86e30df6bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bbdc2309183d193b87f8d86e30df6bc">&#9670;&nbsp;</a></span>clear_overgrown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::clear_overgrown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02634">2634</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;{</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af2cb76df082ab60cdb5a07a23f3c5177">ter_furn_flag::TFLAG_GROWTH_OVERGROWN</a>, examp ) ) {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;clear_overgrown called on tile which is not an overgrown crop!&quot;</span> );</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    }</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <a class="code" href="classplayer__activity.html">player_activity</a> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code" href="iexamine_8cpp.html#ab5bc5ed59776348fcd0b7f411452055f">ACT_HARVEST</a>, to_moves&lt;int&gt;( 60_seconds ) );</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code" href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">plant</a>-&gt;base );</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pull up what&#39;s left of the planted crop and trample the rest.&quot;</span> ) );</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00032">player_activity.h:33</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00354">enums.h:354</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab5bc5ed59776348fcd0b7f411452055f"><div class="ttname"><a href="iexamine_8cpp.html#ab5bc5ed59776348fcd0b7f411452055f">ACT_HARVEST</a></div><div class="ttdeci">static const activity_id ACT_HARVEST(&quot;ACT_HARVEST&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054af2cb76df082ab60cdb5a07a23f3c5177"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af2cb76df082ab60cdb5a07a23f3c5177">ter_furn_flag::TFLAG_GROWTH_OVERGROWN</a></div><div class="ttdeci">@ TFLAG_GROWTH_OVERGROWN</div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astructfurn__t_html_ac3845e974a411f26a4481f8c21e579e7"><div class="ttname"><a href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">furn_t::plant</a></div><div class="ttdeci">cata::value_ptr&lt; plant_data &gt; plant</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00667">mapdata.h:667</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="iexamine_8cpp.html#ab5bc5ed59776348fcd0b7f411452055f">ACT_HARVEST</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="mapdata_8h_source.html#l00667">furn_t::plant</a>, and <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af2cb76df082ab60cdb5a07a23f3c5177">TFLAG_GROWTH_OVERGROWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l02970">generic_multi_activity_do()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5c5bba737498b6d803aa312a45dc8062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5bba737498b6d803aa312a45dc8062">&#9670;&nbsp;</a></span>compost_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::compost_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03756">3756</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;{</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> compost_type;</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    std::string compost_nname;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;    <span class="keywordtype">bool</span> to_deposit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> tank_volume = <a class="code" href="namespaceunits.html#a94416be3a2633d78eb3676cfa32bf1e3">units::from_liter</a>( 1000 );</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="keywordtype">bool</span> tank_full = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    <span class="keywordtype">bool</span> ferment = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <span class="keywordtype">bool</span> compost_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;    <span class="keywordtype">int</span> charges_on_ground = 0;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;        <span class="keywordflow">if</span>( !item_it-&gt;is_compostable() || compost_present ) {</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;            <span class="comment">// This isn&#39;t a biomass or there was already another kind of biomass inside,</span></div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;            <span class="comment">// so this has to be moved.</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;            items.<a class="code" href="classmap__stack.html#abbc2e2342baf6a35d2f6422a6bc78bbb">insert</a>( *item_it );</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            <span class="comment">// This will add items to a space near the tank, because it&#39;s flagged as NOITEM.</span></div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            item_it = items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;            item_it++;</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;            compost_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;        }</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    }</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="keywordflow">if</span>( !compost_present ) {</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This tank is empty.&quot;</span> ) );</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;        <span class="comment">// TODO: Allow using biomass from crafting inventory</span></div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> b_inv = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <span class="stringliteral">&quot;is_compostable&quot;</span>, &amp;<a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">item::is_compostable</a> );</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;        <span class="keywordflow">if</span>( b_inv.empty() ) {</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no biomass to ferment.&quot;</span> ) );</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        }</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;        <span class="comment">// Make lists of unique typeids and names for the menu</span></div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        <span class="comment">// Code shamelessly stolen from the crop planting function!</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;        std::vector&lt;itype_id&gt; b_types;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        std::vector&lt;std::string&gt; b_names;</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : b_inv ) {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;            <span class="keywordflow">if</span>( std::find( b_types.begin(), b_types.end(), <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) == b_types.end() ) {</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;                b_types.push_back( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() );</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;                b_names.push_back( <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) );</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;            }</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;        }</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;        <span class="comment">// Choose biomass from list</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;        <span class="keywordtype">int</span> b_index = 0;</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        <span class="keywordflow">if</span>( b_types.size() &gt; 1 ) {</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;            b_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use which biomass?&quot;</span> ), b_names );</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">//Only one biomass type was in inventory, so it&#39;s automatically used</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set %s in the tank?&quot;</span> ), b_names[0] ) ) {</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                b_index = -1;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;            }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;        }</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        <span class="keywordflow">if</span>( b_index &lt; 0 ) {</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        }</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;        to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;        compost_type = b_types[b_index];</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;        compost_nname = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( compost_type );</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;compost = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        compost_type = compost.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        compost_nname = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( compost_type );</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        charges_on_ground = compost.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This tank contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;                 compost.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), compost.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, compost.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * 100.0 / tank_volume );</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;        <span class="keyword">enum</span> <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> { ADD_COMPOST, REMOVE_COMPOST, START_FERMENT };</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;        <a class="code" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;        selectmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ADD_COMPOST, ( you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( compost_type ) &gt; 0 ), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Add more %s to the tank&quot;</span> ), compost_nname );</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( REMOVE_COMPOST, compost.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove %s from the tank&quot;</span> ), compost.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( START_FERMENT, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start anaerobic digestion&quot;</span> ) );</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;        selectmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        <span class="keywordflow">switch</span>( selectmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            <span class="keywordflow">case</span> ADD_COMPOST: {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;            }</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;            <span class="keywordflow">case</span> REMOVE_COMPOST: {</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;                <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), examp );</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;            }</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;            <span class="keywordflow">case</span> START_FERMENT: {</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                ferment = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;        }</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    }</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    <span class="keywordflow">if</span>( to_deposit ) {</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <a class="code" href="classitem.html">item</a> compost( compost_type, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> );</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="keywordtype">int</span> charges_held = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( compost_type );</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        compost.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = charges_on_ground;</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; charges_held &amp;&amp; !tank_full; i++ ) {</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;            you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( compost_type, 1 );</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;            compost.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;            <span class="keywordflow">if</span>( compost.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &gt;= tank_volume ) {</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;                tank_full = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;            }</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        }</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set %s in the tank.&quot;</span> ), compost_nname );</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The tank now contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                 compost.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), compost.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, compost.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * 100.0 / tank_volume );</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <span class="comment">//This is needed to bypass NOITEM</span></div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;        here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, compost );</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        <span class="keywordflow">if</span>( !tank_full ) {</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;            ferment = <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start anaerobic digestion?&quot;</span> ) );</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        }</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    }</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <span class="keywordflow">if</span>( tank_full || ferment ) {</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;        <a class="code" href="iexamine_8cpp.html#aa69181199d5de3bcc387987d123d7c94">compost_set_full</a>( examp );</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        <span class="keywordflow">if</span>( tank_full ) {</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The tank is full, so you close the lid and start anaerobic digestion.&quot;</span> ) );</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You close the lid and start anaerobic digestion.&quot;</span> ) );</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;        }</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        <span class="comment">// Set timer for biogas production</span></div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;ferm = *items_here.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>();</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        ferm.<a class="code" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">set_birthday</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    }</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a27276eed63fa4e431519d2b805735e0d"><div class="ttname"><a href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdoc">Use charges in character inventory.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09769">character.cpp:9769</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a30120d067eb1fe9921fdf2de395b53b1"><div class="ttname"><a href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">item::set_birthday</a></div><div class="ttdeci">void set_birthday(const time_point &amp;bday)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14691">item.cpp:14691</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassitem_html_a8677a436063e8182f2e3486de9cc1ed4"><div class="ttname"><a href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">item::is_compostable</a></div><div class="ttdeci">bool is_compostable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09507">item.cpp:9507</a></div></div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14681">item.cpp:14681</a></div></div>
<div class="ttc" id="aclassmap__stack_html_abbc2e2342baf6a35d2f6422a6bc78bbb"><div class="ttname"><a href="classmap__stack.html#abbc2e2342baf6a35d2f6422a6bc78bbb">map_stack::insert</a></div><div class="ttdeci">void insert(const item &amp;newitem) override</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00224">map.cpp:224</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa69181199d5de3bcc387987d123d7c94"><div class="ttname"><a href="iexamine_8cpp.html#aa69181199d5de3bcc387987d123d7c94">compost_set_full</a></div><div class="ttdeci">static void compost_set_full(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03747">iexamine.cpp:3747</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">static constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01567">magic.cpp:1567</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a2830b54b0424fe452c0933f87d6201b3"><div class="ttname"><a href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a></div><div class="ttdeci">constexpr time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00541">calendar.h:541</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_a29b260212d0cb959946f8a8094ce75f9"><div class="ttname"><a href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a></div><div class="ttdeci">bool handle_liquid_from_ground(const map_stack::iterator &amp;on_ground, const tripoint &amp;pos, const int radius)</div><div class="ttdoc">Handle finite liquid from ground.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00126">handle_liquid.cpp:126</a></div></div>
<div class="ttc" id="anamespaceunits_html_a94416be3a2633d78eb3676cfa32bf1e3"><div class="ttname"><a href="namespaceunits.html#a94416be3a2633d78eb3676cfa32bf1e3">units::from_liter</a></div><div class="ttdeci">constexpr quantity&lt; value_type, volume_in_milliliter_tag &gt; from_liter(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00310">units.h:310</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of()</a>, <a class="el" href="iexamine_8cpp_source.html#l03747">compost_set_full()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="units_8h_source.html#l00310">units::from_liter()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l00224">map_stack::insert()</a>, <a class="el" href="item_8cpp_source.html#l09507">item::is_compostable()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l14681">item::set_age()</a>, <a class="el" href="item_8cpp_source.html#l14691">item::set_birthday()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="calendar_8h_source.html#l00541">calendar::turn_zero</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a3cf2425e9165696d90c081e8e7035742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf2425e9165696d90c081e8e7035742">&#9670;&nbsp;</a></span>compost_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::compost_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03885">3885</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;{</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;    <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;biomass_full was empty!&quot;</span> );</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;        <a class="code" href="iexamine_8cpp.html#a7115f3199a77672353495c7cce426cf1">compost_set_empty</a>( examp );</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    }</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160; </div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        <span class="keywordflow">if</span>( !it.made_of_from_type( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove %s from the tank.&quot;</span> ), it.tname() );</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), it );</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;            here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( examp, &amp;it );</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        }</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    }</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160; </div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;    <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;        <a class="code" href="iexamine_8cpp.html#a7115f3199a77672353495c7cce426cf1">compost_set_empty</a>( examp );</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    }</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160; </div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;compost_i = *items_here.begin();</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;ferm = *items_here.end();</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> last_open_time = ferm.<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    <span class="keywordtype">int</span> fermented_days =  to_days&lt;int&gt;( last_open_time );</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="comment">// Biogas generating process starts after one month.</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    <span class="keywordtype">int</span> gas_gatherable =  fermented_days &lt; 30 ? fermented_days : fermented_days - 30 ;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    <span class="keywordtype">int</span> max_gas_gatherable = gas_gatherable &lt; 5 ? gas_gatherable : 5 ;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <span class="comment">// Does the tank contain unfermented biomass, or already fermented liquid?</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="keywordflow">if</span>( compost_i.<a class="code" href="classitem.html#a8677a436063e8182f2e3486de9cc1ed4">is_compostable</a>() ) {</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a tank of %s set to ferment there.&quot;</span> ), compost_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160; </div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;        <span class="comment">// TODO: change compost_time to return time_duration</span></div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> compost_time = compost_i.<a class="code" href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8">composting_time</a>();</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> progress = compost_i.<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;        <span class="keywordflow">if</span>( progress &lt; compost_time ) {</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;            <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( compost_time - progress );</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            <span class="keywordtype">int</span> days = to_days&lt;int&gt;( compost_time - progress );</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            <span class="keywordflow">if</span>( hours &lt; 1 ) {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will finish fermenting in less than an hour.&quot;</span> ) );</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( days &lt; 1 ) {</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish fermenting in about %d hour.&quot;</span>,</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;                                    <span class="stringliteral">&quot;It will finish fermenting in about %d hours.&quot;</span>,</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;                                    hours ), hours );</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish fermenting in about %d day.&quot;</span>,</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;                                    <span class="stringliteral">&quot;It will finish fermenting in about %d days.&quot;</span>,</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;                                    days ), days );</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;            }</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;            <span class="keywordflow">if</span>( to_days&lt;int&gt;( progress ) &gt;= 30 &amp;&amp; gas_gatherable &gt;= 1 ) {</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Gather biogas?  Can&#39;t stop once releasing started.&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;                    <span class="keyword">const</span> std::map&lt;itype_id, int&gt; results = compost_i.<a class="code" href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">composting_results</a>();</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> count = compost_i.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> gas_birthday = compost_i.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>();</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;                    <span class="keywordflow">if</span>( !max_gas_gatherable ) {</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No biogas gathered.&quot;</span> ) );</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;result : results ) {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                            <a class="code" href="classitem.html">item</a> biogas( result.first, gas_birthday );</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                            <span class="comment">// 40 L biogas for 1 KG of biomass over the whole anaerobic digestion process.</span></div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                            <span class="comment">// 1 unit of biomass(0.5 KG) for 80 units(0.25 L for each unit) of biogas.</span></div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;                            <span class="keywordtype">int</span> gas_amount = count * max_gas_gatherable * 80 / 30;</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                            <span class="keywordflow">if</span>( result.first-&gt;phase == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) {</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;                                <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a1d63b7a3e5295921d422df09aacdea4e">can_pickVolume_partial</a>( biogas ) ) {</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;                                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You released some biogas from the tank.&quot;</span> ) );</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;                                    biogas.charges = result.second;</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                                    you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( biogas, gas_amount );</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;                                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Gathered %s units of biogas.&quot;</span> ), gas_amount );</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                                }</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                            }</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;                        }</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;                    }</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Biogas generating process started for about %d day.&quot;</span>,</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                                        <span class="stringliteral">&quot;Biogas generating process started for about %d days.&quot;</span>,</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                                        max_gas_gatherable ), max_gas_gatherable );</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                    ferm.<a class="code" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">set_birthday</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;                }</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;            }</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        }</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160; </div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Finish fermenting?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;            <span class="keyword">const</span> std::map&lt;itype_id, int&gt; results = compost_i.<a class="code" href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">composting_results</a>();</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> count = compost_i.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;            <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> birthday = compost_i.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>();</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;            here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;result : results ) {</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;                <span class="keywordtype">int</span> amount = result.second * count;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;                <span class="comment">// TODO: Different age based on settings</span></div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;                <a class="code" href="classitem.html">item</a> compost( result.first, birthday );</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;                <span class="keywordflow">if</span>( result.first-&gt;phase == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) {</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;                    compost.charges = amount;</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;                    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, compost );</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is now ready for use.&quot;</span> ), result.first-&gt;nname( amount ) );</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( result.first-&gt;phase == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a> ) {</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;                    <span class="keywordtype">int</span> gas_amount = count * max_gas_gatherable * 80 / 30;</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;                    <span class="keywordflow">if</span>( !gas_amount || !you.<a class="code" href="classCharacter.html#a1d63b7a3e5295921d422df09aacdea4e">can_pickVolume_partial</a>( compost ) ) {</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You released some biogas from the tank.&quot;</span> ) );</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                        compost.charges = result.second;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                        you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( compost, gas_amount );</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Gathered %s units of biogas.&quot;</span> ), gas_amount );</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                    }</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                    you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( compost, amount );</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You removed the %s from the tank.&quot;</span> ), result.first-&gt;nname( amount ) );</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;                }</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            }</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160; </div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            you.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#aac0a332f25ef2fa6ed6d12f6ad17b2a1">skill_chemistry</a>, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( to_minutes&lt;int&gt;( compost_time ) / 10, 100 ) );</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        }</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160; </div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;            <a class="code" href="iexamine_8cpp.html#a7115f3199a77672353495c7cce426cf1">compost_set_empty</a>( examp );</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;        }</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160; </div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a tank of %s there.&quot;</span> ), compost_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    }</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160; </div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    <span class="keyword">const</span> std::string compost_name = compost_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( items_here.begin(), examp ) ) {</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        <a class="code" href="iexamine_8cpp.html#a7115f3199a77672353495c7cce426cf1">compost_set_empty</a>( examp );</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %s from the tank.&quot;</span> ), compost_name );</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;    }</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1d63b7a3e5295921d422df09aacdea4e"><div class="ttname"><a href="classCharacter.html#a1d63b7a3e5295921d422df09aacdea4e">Character::can_pickVolume_partial</a></div><div class="ttdeci">bool can_pickVolume_partial(const item &amp;it, bool safe=false, const item *avoid=nullptr, bool ignore_pkt_settings=true, bool is_pick_up_inv=false) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03235">character.cpp:3235</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6535a02158a1d6b23b0a6bb623dfae19"><div class="ttname"><a href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">Character::practice</a></div><div class="ttdeci">bool practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02683">character.cpp:2683</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae2d66e536142cf363783d099b6ae93da"><div class="ttname"><a href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">Character::i_add_or_drop</a></div><div class="ttdeci">bool i_add_or_drop(item &amp;it, int qty=1, const item *avoid=nullptr, const item *original_inventory_item=nullptr)</div><div class="ttdoc">Sets invlet and adds to inventory if possible, drops otherwise, returns true if either succeeded.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00451">character_inventory.cpp:451</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08623">item.cpp:8623</a></div></div>
<div class="ttc" id="aclassitem_html_a46b9bb1181827a365eb83d935c663677"><div class="ttname"><a href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a></div><div class="ttdeci">time_point birthday() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14686">item.cpp:14686</a></div></div>
<div class="ttc" id="aclassitem_html_a69af532bd4cc93c70fb2d6ac3ed2b875"><div class="ttname"><a href="classitem.html#a69af532bd4cc93c70fb2d6ac3ed2b875">item::composting_results</a></div><div class="ttdeci">const std::map&lt; itype_id, int &gt; &amp; composting_results() const</div><div class="ttdoc">The results of fermenting this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08518">item.cpp:8518</a></div></div>
<div class="ttc" id="aclassitem_html_a7910f9c43fec76d1c097fbff473af8d8"><div class="ttname"><a href="classitem.html#a7910f9c43fec76d1c097fbff473af8d8">item::composting_time</a></div><div class="ttdeci">time_duration composting_time() const</div><div class="ttdoc">Time for this item to be fully fermented.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08513">item.cpp:8513</a></div></div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aclassmap_html_ab075f4bc498a7cbf386b8f53b86b017d"><div class="ttname"><a href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, const map_stack::const_iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05001">map.cpp:5001</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00459">calendar.h:460</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">phase_id::GAS</a></div><div class="ttdeci">@ GAS</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7115f3199a77672353495c7cce426cf1"><div class="ttname"><a href="iexamine_8cpp.html#a7115f3199a77672353495c7cce426cf1">compost_set_empty</a></div><div class="ttdeci">static void compost_set_empty(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03738">iexamine.cpp:3738</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aac0a332f25ef2fa6ed6d12f6ad17b2a1"><div class="ttname"><a href="iexamine_8cpp.html#aac0a332f25ef2fa6ed6d12f6ad17b2a1">skill_chemistry</a></div><div class="ttdeci">static const skill_id skill_chemistry(&quot;chemistry&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="character_8cpp_source.html#l03235">Character::can_pickVolume_partial()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="iexamine_8cpp_source.html#l03738">compost_set_empty()</a>, <a class="el" href="item_8cpp_source.html#l08518">item::composting_results()</a>, <a class="el" href="item_8cpp_source.html#l08513">item::composting_time()</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a505273a0a2bba0111a40f6cccbc55d69">GAS</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00451">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="item_8cpp_source.html#l09507">item::is_compostable()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="item_8cpp_source.html#l14691">item::set_birthday()</a>, <a class="el" href="iexamine_8cpp.html#aac0a332f25ef2fa6ed6d12f6ad17b2a1">skill_chemistry</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a1586afb32548e61bf115ac2fec0361e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1586afb32548e61bf115ac2fec0361e0">&#9670;&nbsp;</a></span>controls_gate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::controls_gate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open gate. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01374">1374</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;{</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use the %s?&quot;</span> ), <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().tername( examp ) ) ) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;open_gate( examp );</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gates_8cpp_source.html#l00104">anonymous_namespace{gates.cpp}::gate_data::check()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="abbb104e39abd73bf320f7145784ea430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbb104e39abd73bf320f7145784ea430">&#9670;&nbsp;</a></span>curtains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::curtains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04868">4868</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;{</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> closed_window_with_curtains = here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>(</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;                <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a75cc73492008aa8a0ce2965ad7a2c20f">ter_furn_flag::TFLAG_BARRICADABLE_WINDOW_CURTAINS</a>,</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;                examp );</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &amp;&amp; ( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6701f7dc0aa6dba5a2a7cbb3568c3673">ter_furn_flag::TFLAG_WALL</a>, examp ) ||</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;                                          closed_window_with_curtains ) ) {</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;        <a class="code" href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">locked_object</a>( you, examp );</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;    }</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160; </div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> ter = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160; </div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <span class="comment">// Peek through the curtains, or tear them down.</span></div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    <a class="code" href="classuilist.html">uilist</a> window_menu;</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;    window_menu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Do what with the curtains?&quot;</span> );</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;    window_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, ( !ter.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structter__t.html#abec3ff6b6de8dcffdd615d4c1a908d99">close</a> &amp;&amp;</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;                               closed_window_with_curtains ), <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Peek through the closed curtains.&quot;</span> ) );</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;    window_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tear down the curtains.&quot;</span> ) );</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;    window_menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> choice = window_menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160; </div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;        <span class="comment">// Peek</span></div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( examp );</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You carefully peek through the curtains.&quot;</span> ) );</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;        <span class="comment">// Mr. Gorbachev, tear down those curtains!</span></div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code" href="structmap__data__common__t.html#a0f9c7a6620be695133ab7675958143ad">has_curtains</a>() ) {</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code" href="structmap__data__common__t.html#a201aa05623f9484cdfe27cadfc5962a9">curtain_transform</a> );</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;        }</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160; </div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a>, 1, 4, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a>, 2, 0, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a>, 1, 0, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a>, 1, 0, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You tear the curtains and curtain rod off the windowframe.&quot;</span> ) );</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;    }</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;}</div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassmap_html_a3bc75c8b706a54c1575b4460b2f363b1"><div class="ttname"><a href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">map::is_outside</a></div><div class="ttdeci">bool is_outside(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03395">map.cpp:3395</a></div></div>
<div class="ttc" id="aclassmap_html_a4417ea41f79e4b624612ae64ebac1d07"><div class="ttname"><a href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0, const std::set&lt; flag_id &gt; &amp;flags={}, const std::string &amp;variant=&quot;&quot;, const std::string &amp;faction=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05100">map.cpp:5100</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a02e82e402a863e0dc999947e5d4ca47c"><div class="ttname"><a href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a></div><div class="ttdeci">static const itype_id itype_string_36(&quot;string_36&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a507edb748d0809febec3f0ccb457c760"><div class="ttname"><a href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a></div><div class="ttdeci">static const itype_id itype_stick(&quot;stick&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8177cdbd5018d9944687a9ec28eafcc1"><div class="ttname"><a href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a></div><div class="ttdeci">static const itype_id itype_sheet(&quot;sheet&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9579eda537b28a33a9d7027f67524ee3"><div class="ttname"><a href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a></div><div class="ttdeci">static const itype_id itype_nail(&quot;nail&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a6701f7dc0aa6dba5a2a7cbb3568c3673"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6701f7dc0aa6dba5a2a7cbb3568c3673">ter_furn_flag::TFLAG_WALL</a></div><div class="ttdeci">@ TFLAG_WALL</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a75cc73492008aa8a0ce2965ad7a2c20f"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a75cc73492008aa8a0ce2965ad7a2c20f">ter_furn_flag::TFLAG_BARRICADABLE_WINDOW_CURTAINS</a></div><div class="ttdeci">@ TFLAG_BARRICADABLE_WINDOW_CURTAINS</div></div>
<div class="ttc" id="anamespaceiexamine_html_a061412764e0f7a31458bb8fcaa751e71"><div class="ttname"><a href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">iexamine::locked_object</a></div><div class="ttdeci">void locked_object(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">Checks whether PC has a crowbar then calls iuse.crowbar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01826">iexamine.cpp:1826</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a0f9c7a6620be695133ab7675958143ad"><div class="ttname"><a href="structmap__data__common__t.html#a0f9c7a6620be695133ab7675958143ad">map_data_common_t::has_curtains</a></div><div class="ttdeci">bool has_curtains() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00479">mapdata.h:479</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a201aa05623f9484cdfe27cadfc5962a9"><div class="ttname"><a href="structmap__data__common__t.html#a201aa05623f9484cdfe27cadfc5962a9">map_data_common_t::curtain_transform</a></div><div class="ttdeci">ter_str_id curtain_transform</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00477">mapdata.h:477</a></div></div>
<div class="ttc" id="astructter__t_html_abec3ff6b6de8dcffdd615d4c1a908d99"><div class="ttname"><a href="structter__t.html#abec3ff6b6de8dcffdd615d4c1a908d99">ter_t::close</a></div><div class="ttdeci">ter_str_id close</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00604">mapdata.h:604</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="mapdata_8h_source.html#l00604">ter_t::close</a>, <a class="el" href="mapdata_8h_source.html#l00477">map_data_common_t::curtain_transform</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mapdata_8h_source.html#l00479">map_data_common_t::has_curtains()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03395">map::is_outside()</a>, <a class="el" href="iexamine_8cpp.html#a9579eda537b28a33a9d7027f67524ee3">itype_nail</a>, <a class="el" href="iexamine_8cpp.html#a8177cdbd5018d9944687a9ec28eafcc1">itype_sheet</a>, <a class="el" href="iexamine_8cpp.html#a507edb748d0809febec3f0ccb457c760">itype_stick</a>, <a class="el" href="iexamine_8cpp.html#a02e82e402a863e0dc999947e5d4ca47c">itype_string_36</a>, <a class="el" href="iexamine_8cpp_source.html#l01826">locked_object()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a75cc73492008aa8a0ce2965ad7a2c20f">TFLAG_BARRICADABLE_WINDOW_CURTAINS</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a6701f7dc0aa6dba5a2a7cbb3568c3673">TFLAG_WALL</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapdata_8cpp_source.html#l00984">ter_t::check()</a>, <a class="el" href="vehicle__display_8cpp_source.html#l00059">vehicle::get_display_of_tile()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a856fb079b417035e617a943f73657696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a856fb079b417035e617a943f73657696">&#9670;&nbsp;</a></span>cvdmachine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::cvdmachine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pick an appropriate item and apply diamond coating if possible. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00337">337</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// Select an item to which it is possible to apply a diamond coating</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> e.<a class="code" href="classitem.html#a4c20a84da478c9270bbd9e60b5ec8774">has_edged_damage</a>() &amp;&amp;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;               !e.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a> ) &amp;&amp; !e.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9830d8d7584cf4c839424a8568bb08f8">flag_NO_CVD</a> ) &amp;&amp;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;               ( e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#a6cda9e7cd9c37d3822410cf6280babdf">material_steel</a> ) || e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#a0a1b85d37eb6c02c4f8d5e6f1eb0b55b">material_ch_steel</a> ) ||</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                 e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#ac2763dad5945ff609b30f495263f0b23">material_hc_steel</a> ) || e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#aff1f55422239b37437024efd52629d02">material_lc_steel</a> ) ||</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                 e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#a9b80a17b070f944362a512c1a9ab45f4">material_mc_steel</a> ) || e.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="iexamine_8cpp.html#ad14ae72c0655927bc90a5dd381c2b710">material_qt_steel</a> ) );</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Apply diamond coating&quot;</span> ), 1, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have a suitable item to coat with diamond&quot;</span> ) );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// Require materials proportional to selected item volume</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">auto</span> qty = loc-&gt;<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / <a class="code" href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    qty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, qty );</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="structrequirement__data.html">requirement_data</a> reqs = *<a class="code" href="iexamine_8cpp.html#a44007cea4d6700faf22fbacff8f70acc">requirement_data_cvd_diamond</a> * qty;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span>( !reqs.<a class="code" href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">can_make_with_inventory</a>( you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>(), <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> ) ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, reqs.<a class="code" href="structrequirement__data.html#a1590c4ebea201a6937c0fa9a8227986d">list_missing</a>() );</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// Consume materials</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( e, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( e );</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// Apply flag to item</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    loc-&gt;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a> );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You apply a diamond coating to your %s&quot;</span> ), loc-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>() );</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a4c20a84da478c9270bbd9e60b5ec8774"><div class="ttname"><a href="classitem.html#a4c20a84da478c9270bbd9e60b5ec8774">item::has_edged_damage</a></div><div class="ttdeci">bool has_edged_damage() const</div><div class="ttdoc">Returns whether this weapon does any damage type suitable for diamond coating.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08608">item.cpp:8608</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_abfb7ed1fed5f72c532192eb33e6c4962"><div class="ttname"><a href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14449">item.cpp:14449</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3321b67b0b4f70ac731073dbc6aef510"><div class="ttname"><a href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a></div><div class="ttdeci">const flag_id flag_DIAMOND(&quot;DIAMOND&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a9830d8d7584cf4c839424a8568bb08f8"><div class="ttname"><a href="flag_8cpp.html#a9830d8d7584cf4c839424a8568bb08f8">flag_NO_CVD</a></div><div class="ttdeci">const flag_id flag_NO_CVD(&quot;NO_CVD&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0a1b85d37eb6c02c4f8d5e6f1eb0b55b"><div class="ttname"><a href="iexamine_8cpp.html#a0a1b85d37eb6c02c4f8d5e6f1eb0b55b">material_ch_steel</a></div><div class="ttdeci">static const material_id material_ch_steel(&quot;ch_steel&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a44007cea4d6700faf22fbacff8f70acc"><div class="ttname"><a href="iexamine_8cpp.html#a44007cea4d6700faf22fbacff8f70acc">requirement_data_cvd_diamond</a></div><div class="ttdeci">static const requirement_id requirement_data_cvd_diamond(&quot;cvd_diamond&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6cda9e7cd9c37d3822410cf6280babdf"><div class="ttname"><a href="iexamine_8cpp.html#a6cda9e7cd9c37d3822410cf6280babdf">material_steel</a></div><div class="ttdeci">static const material_id material_steel(&quot;steel&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a9b80a17b070f944362a512c1a9ab45f4"><div class="ttname"><a href="iexamine_8cpp.html#a9b80a17b070f944362a512c1a9ab45f4">material_mc_steel</a></div><div class="ttdeci">static const material_id material_mc_steel(&quot;mc_steel&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac2763dad5945ff609b30f495263f0b23"><div class="ttname"><a href="iexamine_8cpp.html#ac2763dad5945ff609b30f495263f0b23">material_hc_steel</a></div><div class="ttdeci">static const material_id material_hc_steel(&quot;hc_steel&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad14ae72c0655927bc90a5dd381c2b710"><div class="ttname"><a href="iexamine_8cpp.html#ad14ae72c0655927bc90a5dd381c2b710">material_qt_steel</a></div><div class="ttdeci">static const material_id material_qt_steel(&quot;qt_steel&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aff1f55422239b37437024efd52629d02"><div class="ttname"><a href="iexamine_8cpp.html#aff1f55422239b37437024efd52629d02">material_lc_steel</a></div><div class="ttdeci">static const material_id material_lc_steel(&quot;lc_steel&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="anamespaceunits_html_a58e7d31fbaa28a1dd45fb598f8d1fba9"><div class="ttname"><a href="namespaceunits.html#a58e7d31fbaa28a1dd45fb598f8d1fba9">units::legacy_volume_factor</a></div><div class="ttdeci">constexpr volume legacy_volume_factor</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00328">units.h:328</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="requirements_8cpp_source.html#l00840">requirement_data::can_make_with_inventory()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="flag_8cpp.html#a3321b67b0b4f70ac731073dbc6aef510">flag_DIAMOND</a>, <a class="el" href="flag_8cpp.html#a9830d8d7584cf4c839424a8568bb08f8">flag_NO_CVD</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="requirements_8cpp_source.html#l01152">requirement_data::get_tools()</a>, <a class="el" href="item_8cpp_source.html#l08608">item::has_edged_damage()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="crafting_8cpp_source.html#l00692">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="units_8h_source.html#l00328">units::legacy_volume_factor</a>, <a class="el" href="requirements_8cpp_source.html#l00574">requirement_data::list_missing()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="iexamine_8cpp.html#a0a1b85d37eb6c02c4f8d5e6f1eb0b55b">material_ch_steel</a>, <a class="el" href="iexamine_8cpp.html#ac2763dad5945ff609b30f495263f0b23">material_hc_steel</a>, <a class="el" href="iexamine_8cpp.html#aff1f55422239b37437024efd52629d02">material_lc_steel</a>, <a class="el" href="iexamine_8cpp.html#a9b80a17b070f944362a512c1a9ab45f4">material_mc_steel</a>, <a class="el" href="iexamine_8cpp.html#ad14ae72c0655927bc90a5dd381c2b710">material_qt_steel</a>, <a class="el" href="iexamine_8cpp.html#a6cda9e7cd9c37d3822410cf6280babdf">material_steel</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="iexamine_8cpp.html#a44007cea4d6700faf22fbacff8f70acc">requirement_data_cvd_diamond</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="item_8cpp_source.html#l14449">item::type_name()</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ad140e70f3803795e1c50a8a643b668ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad140e70f3803795e1c50a8a643b668ae">&#9670;&nbsp;</a></span>deployed_furniture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::deployed_furniture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01625">1625</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;{</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> drop_pos = <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.z ) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        drop_pos = you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pull up the %s?&quot;</span> ), here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() ) ) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pull up the %s.&quot;</span> ),</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                               here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take down the %s?&quot;</span> ), here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() ) ) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take down the %s.&quot;</span> ),</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                               here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> furn_item = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( drop_pos, <a class="code" href="classitem.html">item</a>( furn_item, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a358731acbb8b137aa540bb8d49109ca3"><div class="ttname"><a href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">Character::query_yn</a></div><div class="ttdeci">bool query_yn(const char *const msg, Args &amp;&amp;... args) const</div><div class="ttdoc">It is supposed to hide the query_yn to simplify player vs.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02544">character.h:2544</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="astructfurn__t_html_a57b74b8dc09a89bb25ec33315c22178e"><div class="ttname"><a href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">furn_t::deployed_item</a></div><div class="ttdeci">itype_id deployed_item</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00656">mapdata.h:656</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a1e749bfdff8adff5829dc013dcac0cc1"><div class="ttname"><a href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">map_data_common_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00563">mapdata.cpp:563</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="mapdata_8h_source.html#l00656">furn_t::deployed_item</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mapdata_8cpp_source.html#l00563">map_data_common_t::name()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="iexamine_8cpp_source.html#l06921">smoker_options()</a>, <a class="el" href="iexamine_8cpp_source.html#l07156">workbench()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07170">workbench_internal()</a>.</p>

</div>
</div>
<a id="ad43fc7dc298f3f2d47b67a09661ff875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43fc7dc298f3f2d47b67a09661ff875">&#9670;&nbsp;</a></span>dirtmound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::dirtmound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If it's warm enough, pick one of the player's seeds and plant it. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02541">2541</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;{</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160; </div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>() ) ) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is too cold to plant anything now.&quot;</span> ) );</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="comment">/* ambient_light_at() not working?</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;<span class="comment">    if (here.ambient_light_at(examp) &lt; LIGHT_AMBIENT_LOW) {</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="comment">        add_msg(m_info, _(&quot;It is too dark to plant anything now.&quot;));</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="comment">        return;</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="comment">    }*/</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    std::vector&lt;item *&gt; seed_inv = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <span class="stringliteral">&quot;is_seed&quot;</span>, &amp;<a class="code" href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a> );</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">if</span>( seed_inv.empty() ) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no seeds to plant.&quot;</span> ) );</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Something&#39;s lying there…&quot;</span> ) );</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    <span class="keyword">auto</span> seed_entries = <a class="code" href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">get_seed_entries</a>( seed_inv );</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <span class="keywordtype">int</span> seed_index = <a class="code" href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">query_seed</a>( seed_entries );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="comment">// Did we cancel?</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <span class="keywordflow">if</span>( seed_index &lt; 0 || seed_index &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( seed_entries.size() ) ) {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You saved your seeds for later.&quot;</span> ) );</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    }</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;seed_id = std::get&lt;0&gt;( seed_entries[seed_index] );</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160; </div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( seed_id-&gt;seed-&gt;required_terrain_flag, examp ) ) {</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This type of seed can not be planted in this location.&quot;</span> ) );</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160; </div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <a class="code" href="namespaceiexamine.html#a54a7f677b72d66d7f8415e577f59d1dd">plant_seed</a>( you, examp, seed_id );</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_ab00eaab576446da90f829d1ceae66c98"><div class="ttname"><a href="classitem.html#ab00eaab576446da90f829d1ceae66c98">item::is_seed</a></div><div class="ttdeci">bool is_seed() const</div><div class="ttdoc">Whether this is actually a seed, the seed functions won't be of much use for non-seeds.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14201">item.cpp:14201</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03122">map.cpp:3122</a></div></div>
<div class="ttc" id="agroup__Weather_html_gadb21721b572a715148778ab71405819a"><div class="ttname"><a href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a></div><div class="ttdeci">bool warm_enough_to_plant(const tripoint &amp;pos)</div><div class="ttdoc">Is it warm enough to plant seeds?</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00875">weather.cpp:875</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a52eaa83fb4f8dacccac4a5e736cf3fe1"><div class="ttname"><a href="namespaceiexamine.html#a52eaa83fb4f8dacccac4a5e736cf3fe1">iexamine::get_seed_entries</a></div><div class="ttdeci">std::vector&lt; seed_tuple &gt; get_seed_entries(const std::vector&lt; item * &gt; &amp;seed_inv)</div><div class="ttdoc">Make lists of unique seed types and names for the menu(no multiple hemp seeds etc)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02476">iexamine.cpp:2476</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a54a7f677b72d66d7f8415e577f59d1dd"><div class="ttname"><a href="namespaceiexamine.html#a54a7f677b72d66d7f8415e577f59d1dd">iexamine::plant_seed</a></div><div class="ttdeci">void plant_seed(Character &amp;you, const tripoint &amp;examp, const itype_id &amp;seed_id)</div><div class="ttdoc">Actual planting of selected seed.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02530">iexamine.cpp:2530</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a8076e42db14f124567108b5754caa31a"><div class="ttname"><a href="namespaceiexamine.html#a8076e42db14f124567108b5754caa31a">iexamine::query_seed</a></div><div class="ttdeci">int query_seed(const std::vector&lt; seed_tuple &gt; &amp;seed_entries)</div><div class="ttdoc">Choose seed for planting.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02502">iexamine.cpp:2502</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="iexamine_8cpp_source.html#l02476">get_seed_entries()</a>, <a class="el" href="map_8cpp_source.html#l03122">map::has_flag_ter_or_furn()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l14201">item::is_seed()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l02530">plant_seed()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="iexamine_8cpp_source.html#l02502">query_seed()</a>, and <a class="el" href="weather_8cpp_source.html#l00875">warm_enough_to_plant()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05778">colorized_ter_name_flags_at()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a4592ecf94e8300f013e0e5d45ad118e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4592ecf94e8300f013e0e5d45ad118e5">&#9670;&nbsp;</a></span>door_peephole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::door_peephole </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock/open door or attempt to peek through peephole. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02062">2062</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;{</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="comment">// if door is a locked type attempt to open</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac4a81a25e90b04b9a92e0ec8945aad48">ter_furn_flag::TFLAG_OPENCLOSE_INSIDE</a>, examp ) ) {</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            <a class="code" href="namespaceiexamine.html#a061412764e0f7a31458bb8fcaa751e71">locked_object</a>( you, examp );</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot look through the peephole from the outside.&quot;</span> ) );</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        }</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    }</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="comment">// Peek through the peephole, or open the door.</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Do what with the door?&quot;</span> ), {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Peek through peephole.&quot;</span> ),</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Open door.&quot;</span> )</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    } );</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        <span class="comment">// Peek</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( examp );</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You peek through the peephole.&quot;</span> ) );</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        here.<a class="code" href="classmap.html#a9ac1c68c3941554a86bff27bf1ce2389">open_door</a>( you, examp, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the door.&quot;</span> ) );</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a9ac1c68c3941554a86bff27bf1ce2389"><div class="ttname"><a href="classmap.html#a9ac1c68c3941554a86bff27bf1ce2389">map::open_door</a></div><div class="ttdeci">bool open_door(Creature const &amp;u, const tripoint &amp;p, bool inside, bool check_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04689">map.cpp:4689</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ac4a81a25e90b04b9a92e0ec8945aad48"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac4a81a25e90b04b9a92e0ec8945aad48">ter_furn_flag::TFLAG_OPENCLOSE_INSIDE</a></div><div class="ttdeci">@ TFLAG_OPENCLOSE_INSIDE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03395">map::is_outside()</a>, <a class="el" href="iexamine_8cpp_source.html#l01826">locked_object()</a>, <a class="el" href="map_8cpp_source.html#l04689">map::open_door()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, and <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac4a81a25e90b04b9a92e0ec8945aad48">TFLAG_OPENCLOSE_INSIDE</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5f540fc59b79309c7728ee939fcdcaed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f540fc59b79309c7728ee939fcdcaed">&#9670;&nbsp;</a></span>egg_sack_generic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::egg_sack_generic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a039e4134b8c5eb549ca440b962667a2f">mtype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>montype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa6c4f01d9e8a2e24dad525767f2dc83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6c4f01d9e8a2e24dad525767f2dc83">&#9670;&nbsp;</a></span>elevator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::elevator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01278">1278</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> <span class="keyword">const</span> old_abs_pos = you.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> <span class="keyword">const</span> this_omt = project_to&lt;coords::omt&gt;( here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp ) );</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> sm_orig = here.<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( project_to&lt;coords::ms&gt;( this_omt ) );</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    std::vector&lt;tripoint&gt; this_elevator;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> : <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( examp, <a class="code" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> - 1 ) ) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab545d788bf687bde749bfd5b9bf685fa">ter_furn_flag::TFLAG_ELEVATOR</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            this_elevator.emplace_back( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> uit = std::find( this_elevator.cbegin(), this_elevator.cend(), you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span>( uit == this_elevator.cend() ) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You must stand inside the elevator to use it.&quot;</span> ) );</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    elevator_vehicles <span class="keyword">const</span> vehs = <a class="code" href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#abfa1ad8dd81c6b6bbfc3f8fc11b9ccc7">_get_vehicles_on_elevator</a>( this_elevator );</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span>( vehs.blocking ) {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is blocking the elevator&quot;</span> ), vehs.v.front()-&gt;name ) );</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">const</span> movez = <a class="code" href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#abb6bda172007c71bd43eccf961f37e0f">_choose_elevator_destz</a>( examp, this_omt, sm_orig ) - <a class="code" href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#a0cc398823630aecbe5860a5d7f915f8e">uilist_positive</a>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span>( movez &lt; -<a class="code" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a> ) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> <span class="keyword">const</span> that_omt( this_omt.<a class="code" href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">xy</a>(), movez );</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordtype">int</span> <span class="keyword">const</span> erot = <a class="code" href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#a455972bbeb3d6480491855504f53b721">_get_rot_delta</a>( this_omt, that_omt );</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    std::vector&lt;tripoint&gt; that_elevator;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    std::transform( this_elevator.begin(), this_elevator.end(), std::back_inserter( that_elevator ),</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    [&amp;erot, &amp;sm_orig, &amp;movez]( <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> &amp; p ) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        return _rotate_point_sm( { p.xy(), movez }, erot, sm_orig );</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    } );</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// first find critters in the destination elevator and move them out of the way</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCreature.html">Creature</a> &amp;critter : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_creatures() ) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> cr_pos = here.<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( critter.get_location() );</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> eit = std::find( that_elevator.cbegin(), that_elevator.cend(), cr_pos );</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">if</span>( eit != that_elevator.cend() ) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;candidate : <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( *eit, 10 ) ) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab545d788bf687bde749bfd5b9bf685fa">ter_furn_flag::TFLAG_ELEVATOR</a>, candidate ) &amp;&amp;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                    here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( candidate ) &amp;&amp;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( candidate ) == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                    critter.setpos( candidate );</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a> = [&amp;]( <a class="code" href="classmap__stack.html">map_stack</a> &amp; items, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; src, <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; dest ) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( dest, *it );</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            it = here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( src, it );</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    };</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// move along every item in the elevator</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">for</span>( decltype( this_elevator )::size_type i = 0; i &lt; this_elevator.size(); i++ ) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> &amp;src = this_elevator[i];</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src );</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a>( items, src, that_elevator[i] );</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// move along all creatures on the elevator</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCreature.html">Creature</a> &amp;critter : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_creatures() ) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> eit = std::find( this_elevator.cbegin(), this_elevator.cend(), critter.pos() );</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keywordflow">if</span>( eit != this_elevator.cend() ) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            critter.setpos( that_elevator[ std::distance( this_elevator.cbegin(), eit ) ] );</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classvehicle.html">vehicle</a> *v : vehs.v ) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> <span class="keyword">const</span> p = <a class="code" href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#adfded6934ff067223710172e29dafd03">_rotate_point_sm</a>( { v-&gt;<a class="code" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>().xy(), movez }, erot, sm_orig );</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        here.<a class="code" href="classmap.html#abeefac00972febd607e98bb0431bd5a9">displace_vehicle</a>( *v, p - v-&gt;<a class="code" href="classvehicle.html#a3900ee345be0453828a955a200154db1">global_pos3</a>() );</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        v-&gt;<a class="code" href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">turn</a>( erot * 90_degrees );</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        v-&gt;<a class="code" href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">face</a> = <a class="code" href="classtileray.html">tileray</a>( v-&gt;<a class="code" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a> );</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        v-&gt;<a class="code" href="classvehicle.html#ac2d28a00ecef8f1077752dfca73c15eb">precalc_mounts</a>( 0, v-&gt;<a class="code" href="classvehicle.html#af366981a584e12d25133fb479d47de33">turn_dir</a>, v-&gt;<a class="code" href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">pivot_anchor</a>[0] );</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    here.<a class="code" href="classmap.html#a1bf7be9d16b423fde0882be4bc3ecfc5">rebuild_vehicle_level_caches</a>();</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;vertical_shift( movez );</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;update_map( you, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <a class="code" href="namespacecata__event__dispatch.html#a5fa5ced911a7e79ed6851c428c5689ce">cata_event_dispatch::avatar_moves</a>( old_abs_pos.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>(), *you.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>(), <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>() );</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;}</div>
<div class="ttc" id="aactivity__actor_8cpp_html_a6caa1977f9f323abdb68e946d0129581"><div class="ttname"><a href="activity__actor_8cpp.html#a6caa1977f9f323abdb68e946d0129581">move_item</a></div><div class="ttdeci">static void move_item(Character &amp;you, item &amp;it, const int quantity, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest, vehicle *src_veh, int src_part)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l06996">activity_actor.cpp:6996</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a3261de1530798f5b934a71b9a4e17f5b"><div class="ttname"><a href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">Creature::get_location</a></div><div class="ttdeci">tripoint_abs_ms get_location() const</div><div class="ttdoc">Returns the location of the creature in map square coordinates (the most detailed coordinate system),...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03232">creature.cpp:3232</a></div></div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a7b5804160d1d0e69a9f2fba098bea723"><div class="ttname"><a href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00273">coordinates.h:273</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclassmap_html_a1bf7be9d16b423fde0882be4bc3ecfc5"><div class="ttname"><a href="classmap.html#a1bf7be9d16b423fde0882be4bc3ecfc5">map::rebuild_vehicle_level_caches</a></div><div class="ttdeci">void rebuild_vehicle_level_caches()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00443">map.cpp:443</a></div></div>
<div class="ttc" id="aclassmap_html_a426c21f7244ff80a61685a89e9146fec"><div class="ttname"><a href="classmap.html#a426c21f7244ff80a61685a89e9146fec">map::getlocal</a></div><div class="ttdeci">tripoint getlocal(const tripoint &amp;p) const</div><div class="ttdoc">Inverse of getabs.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09635">map.cpp:9635</a></div></div>
<div class="ttc" id="aclassmap_html_abeefac00972febd607e98bb0431bd5a9"><div class="ttname"><a href="classmap.html#abeefac00972febd607e98bb0431bd5a9">map::displace_vehicle</a></div><div class="ttdeci">bool displace_vehicle(vehicle &amp;veh, const tripoint &amp;dp, bool adjust_pos=true, const std::set&lt; int &gt; &amp;parts_to_move={})</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01435">map.cpp:1435</a></div></div>
<div class="ttc" id="aclassmap_html_ac868b594b36b6b9bbcb130650fd4f61f"><div class="ttname"><a href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">map::getglobal</a></div><div class="ttdeci">tripoint_abs_ms getglobal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09625">map.cpp:9625</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="aclasstileray_html"><div class="ttname"><a href="classtileray.html">tileray</a></div><div class="ttdef"><b>Definition:</b> <a href="tileray_8h_source.html#l00028">tileray.h:29</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1380ff85985897f9f8a34eba538e04db"><div class="ttname"><a href="classvehicle.html#a1380ff85985897f9f8a34eba538e04db">vehicle::turn</a></div><div class="ttdeci">void turn(units::angle deg)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__move_8cpp_source.html#l00668">vehicle_move.cpp:668</a></div></div>
<div class="ttc" id="aclassvehicle_html_a3900ee345be0453828a955a200154db1"><div class="ttname"><a href="classvehicle.html#a3900ee345be0453828a955a200154db1">vehicle::global_pos3</a></div><div class="ttdeci">tripoint global_pos3() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03431">vehicle.cpp:3431</a></div></div>
<div class="ttc" id="aclassvehicle_html_a8e021d197980bbed36ff3c43962df957"><div class="ttname"><a href="classvehicle.html#a8e021d197980bbed36ff3c43962df957">vehicle::face</a></div><div class="ttdeci">tileray face</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02312">vehicle.h:2312</a></div></div>
<div class="ttc" id="aclassvehicle_html_ac2d28a00ecef8f1077752dfca73c15eb"><div class="ttname"><a href="classvehicle.html#ac2d28a00ecef8f1077752dfca73c15eb">vehicle::precalc_mounts</a></div><div class="ttdeci">void precalc_mounts(int idir, const units::angle &amp;dir, const point &amp;pivot)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03338">vehicle.cpp:3338</a></div></div>
<div class="ttc" id="aclassvehicle_html_af366981a584e12d25133fb479d47de33"><div class="ttname"><a href="classvehicle.html#af366981a584e12d25133fb479d47de33">vehicle::turn_dir</a></div><div class="ttdeci">units::angle turn_dir</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02291">vehicle.h:2291</a></div></div>
<div class="ttc" id="aclassvehicle_html_afd4e8e8471b17450205d827dee8a41a5"><div class="ttname"><a href="classvehicle.html#afd4e8e8471b17450205d827dee8a41a5">vehicle::pivot_anchor</a></div><div class="ttdeci">std::array&lt; point, 2 &gt; pivot_anchor</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02310">vehicle.h:2310</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a560abf1cd341e88e2f13f454ec2ecc99"><div class="ttname"><a href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00848">coordinates.h:848</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00073">game_constants.h:73</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ab545d788bf687bde749bfd5b9bf685fa"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab545d788bf687bde749bfd5b9bf685fa">ter_furn_flag::TFLAG_ELEVATOR</a></div><div class="ttdeci">@ TFLAG_ELEVATOR</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02iexamine_8cpp_03_html_a0cc398823630aecbe5860a5d7f915f8e"><div class="ttname"><a href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#a0cc398823630aecbe5860a5d7f915f8e">anonymous_namespace{iexamine.cpp}::uilist_positive</a></div><div class="ttdeci">constexpr int uilist_positive</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01222">iexamine.cpp:1222</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02iexamine_8cpp_03_html_a455972bbeb3d6480491855504f53b721"><div class="ttname"><a href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#a455972bbeb3d6480491855504f53b721">anonymous_namespace{iexamine.cpp}::_get_rot_delta</a></div><div class="ttdeci">int _get_rot_delta(tripoint_abs_omt const &amp;this_omt, tripoint_abs_omt const &amp;that_omt)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01207">iexamine.cpp:1207</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02iexamine_8cpp_03_html_abb6bda172007c71bd43eccf961f37e0f"><div class="ttname"><a href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#abb6bda172007c71bd43eccf961f37e0f">anonymous_namespace{iexamine.cpp}::_choose_elevator_destz</a></div><div class="ttdeci">int _choose_elevator_destz(tripoint const &amp;examp, tripoint_abs_omt const &amp;this_omt, tripoint const &amp;sm_orig)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01224">iexamine.cpp:1224</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02iexamine_8cpp_03_html_abfa1ad8dd81c6b6bbfc3f8fc11b9ccc7"><div class="ttname"><a href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#abfa1ad8dd81c6b6bbfc3f8fc11b9ccc7">anonymous_namespace{iexamine.cpp}::_get_vehicles_on_elevator</a></div><div class="ttdeci">elevator_vehicles _get_vehicles_on_elevator(std::vector&lt; tripoint &gt; const &amp;elevator)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01251">iexamine.cpp:1251</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02iexamine_8cpp_03_html_adfded6934ff067223710172e29dafd03"><div class="ttname"><a href="namespaceanonymous__namespace_02iexamine_8cpp_03.html#adfded6934ff067223710172e29dafd03">anonymous_namespace{iexamine.cpp}::_rotate_point_sm</a></div><div class="ttdeci">tripoint _rotate_point_sm(tripoint const &amp;p, int erot, tripoint const &amp;orig)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01215">iexamine.cpp:1215</a></div></div>
<div class="ttc" id="anamespacecata__event__dispatch_html_a5fa5ced911a7e79ed6851c428c5689ce"><div class="ttname"><a href="namespacecata__event__dispatch.html#a5fa5ced911a7e79ed6851c428c5689ce">cata_event_dispatch::avatar_moves</a></div><div class="ttdeci">void avatar_moves(const tripoint &amp;old_abs_pos, const avatar &amp;u, const map &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13758">game.cpp:13758</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iexamine_8cpp_source.html#l01224">anonymous_namespace{iexamine.cpp}::_choose_elevator_destz()</a>, <a class="el" href="iexamine_8cpp_source.html#l01207">anonymous_namespace{iexamine.cpp}::_get_rot_delta()</a>, <a class="el" href="iexamine_8cpp_source.html#l01251">anonymous_namespace{iexamine.cpp}::_get_vehicles_on_elevator()</a>, <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="map_8cpp_source.html#l09635">map::getlocal()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="game__constants_8h_source.html#l00073">OVERMAP_DEPTH</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="game__constants_8h_source.html#l00042">SEEX</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ab545d788bf687bde749bfd5b9bf685fa">TFLAG_ELEVATOR</a>, <a class="el" href="iexamine_8cpp_source.html#l01222">anonymous_namespace{iexamine.cpp}::uilist_positive</a>, and <a class="el" href="coordinates_8h_source.html#l00273">coords::coord_point&lt; Point, Origin, Scale, InBounds &gt;::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l01224">anonymous_namespace{iexamine.cpp}::_choose_elevator_destz()</a>, <a class="el" href="iexamine_8cpp_source.html#l01251">anonymous_namespace{iexamine.cpp}::_get_vehicles_on_elevator()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ae5820d62517f1b9ecd4898cd74abe9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5820d62517f1b9ecd4898cd74abe9a1">&#9670;&nbsp;</a></span>false_and_debugmsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::false_and_debugmsg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00316">316</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Called false_and_debugmsg on %s - was a terrain with an actor configured incorrectly?&quot;</span>,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;              <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().tername( examp ) );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a854e51ea3743ca7215eb8457990851fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a854e51ea3743ca7215eb8457990851fd">&#9670;&nbsp;</a></span>fertilize_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fertilize_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>fertilizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02765">2765</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;{</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_fert = <a class="code" href="namespaceiexamine.html#a1cd2a64129f840567218bcfe9bf2dbde">can_fertilize</a>( you, tile, fertilizer );</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">if</span>( !can_fert.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( can_fert.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    }</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    std::list&lt;item&gt; planted;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">if</span>( fertilizer-&gt;<a class="code" href="structitype.html#a9defae7ba72f6d0af2e5629c4244f00e">count_by_charges</a>() ) {</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        planted = you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( fertilizer, 1 );</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        planted = you.<a class="code" href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">use_amount</a>( fertilizer, 1 );</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    }</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="comment">// Reduce the amount of time it takes until the next stage of the plant by</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="comment">// 20% of a seasons length. (default 2.8 days).</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> fertilizerEpoch = <a class="code" href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a>() * 0.2;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160; </div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tile );</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> = std::find_if( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        return it.is_seed();</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    } );</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> == items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, tile.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, tile.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, tile.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( tile );</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( tile, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160; </div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="comment">// TODO: item should probably clamp the value on its own</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;set_birthday( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;birthday() - fertilizerEpoch );</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="comment">// The plant furniture has the NOITEM token which prevents adding items on that square,</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="comment">// spawned items are moved to an adjacent field instead, but the fertilizer token</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="comment">// must be on the square of the plant, therefore this hack:</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">furn_id</a> old_furn = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( tile );</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( tile, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( tile, <a class="code" href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a>, 1, 1, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( tile, old_furn );</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160; </div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="comment">//~ %1$s: plant name, %2$s: fertilizer name</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fertilize the %1$s with the %2$s.&quot;</span> ), <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;get_plant_name(),</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;             planted.front().tname() );</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div>
<div class="ttc" id="aclassret__val_3_01void_01_4_html"><div class="ttname"><a href="classret__val_3_01void_01_4.html">ret_val&lt; void &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00103">ret_val.h:104</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="aclassret__val__common_html_adf8af6e05bb9773c0b77b4299ba13c6c"><div class="ttname"><a href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">ret_val_common::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00017">ret_val.h:17</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac0f9f7fa2c1a490eff73f2d180399ffe"><div class="ttname"><a href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a></div><div class="ttdeci">static const itype_id itype_fertilizer(&quot;fertilizer&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_aa61c940cc539463295afa98e7bf7d22b"><div class="ttname"><a href="namespacecalendar.html#aa61c940cc539463295afa98e7bf7d22b">calendar::season_length</a></div><div class="ttdeci">time_duration season_length()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00715">calendar.cpp:715</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a1cd2a64129f840567218bcfe9bf2dbde"><div class="ttname"><a href="namespaceiexamine.html#a1cd2a64129f840567218bcfe9bf2dbde">iexamine::can_fertilize</a></div><div class="ttdeci">ret_val&lt; void &gt; can_fertilize(Character &amp;you, const tripoint &amp;tile, const itype_id &amp;fertilizer)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02745">iexamine.cpp:2745</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="iexamine_8cpp_source.html#l02745">can_fertilize()</a>, <a class="el" href="itype_8h_source.html#l01501">itype::count_by_charges()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#ac0f9f7fa2c1a490eff73f2d180399ffe">itype_fertilizer</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="calendar_8cpp_source.html#l00715">calendar::season_length()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="ret__val_8h_source.html#l00017">ret_val_common::str()</a>, <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09595">Character::use_amount()</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02848">aggie_plant()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03564">activity_handlers::fertilize_plot_do_turn()</a>.</p>

</div>
</div>
<a id="a43950808ed7b251864db0d95c8eb2c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43950808ed7b251864db0d95c8eb2c22">&#9670;&nbsp;</a></span>finite_water_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::finite_water_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04665">4665</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;{</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ++item_it ) {</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;        <span class="keywordflow">if</span>( item_it-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;            <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( item_it, examp );</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;        }</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    }</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, and <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5a7f0cf18496f21a6996465f40aec42c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7f0cf18496f21a6996465f40aec42c">&#9670;&nbsp;</a></span>fireplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fireplace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03387">3387</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;{</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> already_on_fire = here.<a class="code" href="classmap.html#a67707f0985510ddac284d02f7e161d9c">has_nearby_fire</a>( examp, 0 );</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> furn_is_deployed = !here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>();</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160; </div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <span class="keyword">auto</span> is_firestarter = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        <span class="keywordflow">return</span> it.has_flag( <a class="code" href="flag_8cpp.html#ae82a5b18f3b5e17e762fd3f117641907">flag_FIRESTARTER</a> ) || it.has_flag( <a class="code" href="flag_8cpp.html#aba609be4a7e06d2a93f333a32e0c8d9e">flag_FIRE</a> );</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    };</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <span class="keyword">auto</span> is_firequencher = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;        <span class="keywordflow">return</span> it.damage_melee( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a>( <span class="stringliteral">&quot;bash&quot;</span> ) ) );</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    };</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160; </div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;    std::multimap&lt;int, item *&gt; firestarters;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    std::vector&lt;item *&gt; firequenchers = you.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( is_firequencher );</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160; </div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *it : you.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( is_firestarter ) ) {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;        <a class="code" href="iexamine_8cpp.html#a5e2e894410bdf1e63e66dcd4a784ad0d">add_firestarter</a>( it, firestarters, you, examp );</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    }</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160; </div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> : <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> ) ) {</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> == examp ) {</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            <span class="comment">// stuff in the fireplace can&#39;t light or quench itself</span></div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        }</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem__location.html">item_location</a> &amp;it : here.<a class="code" href="classmap.html#a465b100a7f16fef97298001da28fc899">items_with</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, is_firestarter ) ) {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <a class="code" href="iexamine_8cpp.html#a5e2e894410bdf1e63e66dcd4a784ad0d">add_firestarter</a>( &amp;*it, firestarters, you, examp );</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;        <span class="comment">// anything is fine, so only check if we got nothing yet</span></div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;        <span class="keywordflow">if</span>( firequenchers.empty() ) {</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem__location.html">item_location</a> &amp;it : here.<a class="code" href="classmap.html#a465b100a7f16fef97298001da28fc899">items_with</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, is_firequencher ) ) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                firequenchers.push_back( &amp;*it );</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            }</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;        }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    }</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160; </div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_firestarter = !firestarters.empty();</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_bionic_firestarter = you.<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a> ) &amp;&amp;</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                                        you.<a class="code" href="classCharacter.html#a8e23dcce68b00cf1b74fbb36bcf0101e">enough_power_for</a>( <a class="code" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a> );</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160; </div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <a class="code" href="classuilist.html">uilist</a> selection_menu;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    selection_menu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aa904e9f61ca568d8ed985cf22193b8ed">has_items</a>( examp ) ) {</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        <span class="comment">// Note: This is displayed regardless of whether &quot;examine with pickup&quot; was used</span></div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;        selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;g&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) );</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    }</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keywordflow">if</span>( !already_on_fire ) {</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, has_firestarter, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;                                 has_firestarter ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start a fire&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start a fire… you&#39;ll need a fire source.&quot;</span> ) );</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;        <span class="keywordflow">if</span>( has_bionic_firestarter ) {</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use a CBM to start a fire&quot;</span> ) );</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;        }</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !firequenchers.empty() ) {</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 4, <span class="keyword">true</span>, <span class="charliteral">&#39;e&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Extinguish fire&quot;</span> ) );</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;        selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 4, <span class="keyword">false</span>, <span class="charliteral">&#39;e&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Extinguish fire (bashing item required)&quot;</span> ) );</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    }</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <span class="keywordflow">if</span>( furn_is_deployed ) {</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        selection_menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 3, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take down the %s&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;    }</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    selection_menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160; </div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="keywordflow">switch</span>( selection_menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;pickup( examp );</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;firestarter : firestarters ) {</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;                <a class="code" href="classitem.html">item</a> *it = firestarter.second;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *usef = it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;firestarter&quot;</span> );</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;                <span class="keyword">const</span> <a class="code" href="classfirestarter__actor.html">firestarter_actor</a> *actor = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classfirestarter__actor.html">firestarter_actor</a> *<span class="keyword">&gt;</span>( usef-&gt;<a class="code" href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">get_actor_ptr</a>() );</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to start a fire with your %s…&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_use = actor-&gt;<a class="code" href="classfirestarter__actor.html#a771ed08651a54b2f87731f49b7876b70">can_use</a>( you, *it, examp );</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;                <span class="keywordflow">if</span>( can_use.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> charges = actor-&gt;<a class="code" href="classfirestarter__actor.html#acafab545f2c8e3a8655dc140b916ac31">use</a>( &amp;you, *it, examp ).value_or( 0 );</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                    you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), charges );</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, can_use.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;                }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;            }</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You weren&#39;t able to start a fire.&quot;</span> ) );</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        }</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;        <span class="keywordflow">case</span> 2: {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;            <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">get_field</a>( examp, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a> ) &amp;&amp; here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( examp, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                you.<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -<a class="code" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a>-&gt;<a class="code" href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">power_activate</a> );</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t light a fire there.&quot;</span> ) );</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            }</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        }</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;        <span class="keywordflow">case</span> 3: {</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            <span class="keywordflow">if</span>( already_on_fire ) {</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;                <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Really take down the %s while it&#39;s on fire?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                }</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;            }</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take down the %s.&quot;</span> ),</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;                                   here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> furn_item = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a>;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, <a class="code" href="classitem.html">item</a>( furn_item, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;        }</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;        <span class="keywordflow">case</span> 4: {</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            here.<a class="code" href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">remove_field</a>( examp, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a> );</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -200 );</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;With a few determined moves you put out the fire in the %s.&quot;</span> ),</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                                   here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        }</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    }</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02852">character.cpp:2852</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02648">bionics.cpp:2648</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e23dcce68b00cf1b74fbb36bcf0101e"><div class="ttname"><a href="classCharacter.html#a8e23dcce68b00cf1b74fbb36bcf0101e">Character::enough_power_for</a></div><div class="ttdeci">bool enough_power_for(const bionic_id &amp;bid) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02885">character.cpp:2885</a></div></div>
<div class="ttc" id="aclassfirestarter__actor_html"><div class="ttname"><a href="classfirestarter__actor.html">firestarter_actor</a></div><div class="ttdoc">Starts a fire instantly.</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l00462">iuse_actor.h:463</a></div></div>
<div class="ttc" id="aclassfirestarter__actor_html_a771ed08651a54b2f87731f49b7876b70"><div class="ttname"><a href="classfirestarter__actor.html#a771ed08651a54b2f87731f49b7876b70">firestarter_actor::can_use</a></div><div class="ttdeci">ret_val&lt; void &gt; can_use(const Character &amp;, const item &amp;, const tripoint &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l01357">iuse_actor.cpp:1357</a></div></div>
<div class="ttc" id="aclassfirestarter__actor_html_acafab545f2c8e3a8655dc140b916ac31"><div class="ttname"><a href="classfirestarter__actor.html#acafab545f2c8e3a8655dc140b916ac31">firestarter_actor::use</a></div><div class="ttdeci">std::optional&lt; int &gt; use(Character *, item &amp;, const tripoint &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l01405">iuse_actor.cpp:1405</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassmap_html_a02ff5fbdbdb3df97210f4874c41fd75a"><div class="ttname"><a href="classmap.html#a02ff5fbdbdb3df97210f4874c41fd75a">map::remove_field</a></div><div class="ttdeci">void remove_field(const tripoint &amp;p, const field_type_id &amp;field_to_remove)</div><div class="ttdoc">Remove field entry at xy, ignored if the field entry is not present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06630">map.cpp:6630</a></div></div>
<div class="ttc" id="aclassmap_html_a20933e73f539d62c2a10bed22bb9a0c7"><div class="ttname"><a href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">map::furnname</a></div><div class="ttdeci">std::string furnname(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01888">map.cpp:1888</a></div></div>
<div class="ttc" id="aclassmap_html_a30cfefdb115c16c5e1af6cc99f94bbbd"><div class="ttname"><a href="classmap.html#a30cfefdb115c16c5e1af6cc99f94bbbd">map::get_field</a></div><div class="ttdeci">field_entry * get_field(const tripoint &amp;p, const field_type_id &amp;type)</div><div class="ttdoc">Get field of specific type at point.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06516">map.cpp:6516</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06563">map.cpp:6563</a></div></div>
<div class="ttc" id="aclassmap_html_a465b100a7f16fef97298001da28fc899"><div class="ttname"><a href="classmap.html#a465b100a7f16fef97298001da28fc899">map::items_with</a></div><div class="ttdeci">std::list&lt; item_location &gt; items_with(const tripoint &amp;p, const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div><div class="ttdoc">Find items located at point p (on map or in vehicles) that pass the filter.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05960">map.cpp:5960</a></div></div>
<div class="ttc" id="aclassmap_html_a67707f0985510ddac284d02f7e161d9c"><div class="ttname"><a href="classmap.html#a67707f0985510ddac284d02f7e161d9c">map::has_nearby_fire</a></div><div class="ttdeci">bool has_nearby_fire(const tripoint &amp;p, int radius=1) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03600">map.cpp:3600</a></div></div>
<div class="ttc" id="aclassmap_html_aa904e9f61ca568d8ed985cf22193b8ed"><div class="ttname"><a href="classmap.html#aa904e9f61ca568d8ed985cf22193b8ed">map::has_items</a></div><div class="ttdeci">bool has_items(const tripoint &amp;p) const</div><div class="ttdoc">Checks for existence of items.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05890">map.cpp:5890</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a0090428c1f6724209c133c6b04b037cd"><div class="ttname"><a href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a></div><div class="ttdeci">const field_type_str_id fd_fire(&quot;fd_fire&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aba609be4a7e06d2a93f333a32e0c8d9e"><div class="ttname"><a href="flag_8cpp.html#aba609be4a7e06d2a93f333a32e0c8d9e">flag_FIRE</a></div><div class="ttdeci">const flag_id flag_FIRE(&quot;FIRE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae82a5b18f3b5e17e762fd3f117641907"><div class="ttname"><a href="flag_8cpp.html#ae82a5b18f3b5e17e762fd3f117641907">flag_FIRESTARTER</a></div><div class="ttdeci">const flag_id flag_FIRESTARTER(&quot;FIRESTARTER&quot;)</div></div>
<div class="ttc" id="agame__constants_8h_html_afec5544a31d4183805cff025dd84b5f4"><div class="ttname"><a href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a></div><div class="ttdeci">constexpr int PICKUP_RANGE</div><div class="ttdoc">Items on the map with at most this distance to the player are considered available for crafting,...</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00070">game_constants.h:70</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a4ff01c21f781cc397ad5ca4c9ca309e8"><div class="ttname"><a href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a></div><div class="ttdeci">static const bionic_id bio_lighter(&quot;bio_lighter&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5e2e894410bdf1e63e66dcd4a784ad0d"><div class="ttname"><a href="iexamine_8cpp.html#a5e2e894410bdf1e63e66dcd4a784ad0d">add_firestarter</a></div><div class="ttdeci">static void add_firestarter(item *it, std::multimap&lt; int, item * &gt; &amp;firestarters, Character &amp;you, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03375">iexamine.cpp:3375</a></div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="astructbionic__data_html_a91d04ff5e3de875e747fff05418f6253"><div class="ttname"><a href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">bionic_data::power_activate</a></div><div class="ttdeci">units::energy power_activate</div><div class="ttdoc">Power cost on activation.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00037">bionics.h:37</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00179">itype.cpp:179</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
<div class="ttc" id="astructuse__function_html_a468ef5f707dc56c2822d23ea226c9b36"><div class="ttname"><a href="structuse__function.html#a468ef5f707dc56c2822d23ea226c9b36">use_function::get_actor_ptr</a></div><div class="ttdeci">iuse_actor * get_actor_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00314">iuse.h:314</a></div></div>
<div class="ttc" id="atype__id_8h_html_a119965745ae171b731d18a45ec6ee424"><div class="ttname"><a href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a></div><div class="ttdeci">string_id&lt; damage_type &gt; damage_type_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00071">type_id.h:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="iexamine_8cpp_source.html#l03375">add_firestarter()</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="iexamine_8cpp.html#a4ff01c21f781cc397ad5ca4c9ca309e8">bio_lighter</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01357">firestarter_actor::can_use()</a>, <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="mapdata_8h_source.html#l00656">furn_t::deployed_item</a>, <a class="el" href="character_8cpp_source.html#l02885">Character::enough_power_for()</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="flag_8cpp.html#aba609be4a7e06d2a93f333a32e0c8d9e">flag_FIRE</a>, <a class="el" href="flag_8cpp.html#ae82a5b18f3b5e17e762fd3f117641907">flag_FIRESTARTER</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="iuse_8h_source.html#l00314">use_function::get_actor_ptr()</a>, <a class="el" href="map_8cpp_source.html#l06516">map::get_field()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="itype_8cpp_source.html#l00179">itype::get_use()</a>, <a class="el" href="bionics_8cpp_source.html#l02648">Character::has_bionic()</a>, <a class="el" href="map_8cpp_source.html#l05890">map::has_items()</a>, <a class="el" href="map_8cpp_source.html#l03600">map::has_nearby_fire()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="map_8cpp_source.html#l05960">map::items_with()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l02852">Character::mod_power_level()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="bionics_8h_source.html#l00037">bionic_data::power_activate</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l06630">map::remove_field()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>, <a class="el" href="ret__val_8h_source.html#l00017">ret_val_common::str()</a>, <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01405">firestarter_actor::use()</a>, and <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a8f27bbd3e133afeb6df58007cca8f8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f27bbd3e133afeb6df58007cca8f8bc">&#9670;&nbsp;</a></span>flower_bluebell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_bluebell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a84021fbba8edf73928f76518ab7de443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84021fbba8edf73928f76518ab7de443">&#9670;&nbsp;</a></span>flower_cactus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_cactus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt pick cactus pad. </p>
<p>Not safe for player. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02289">2289</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;{</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#ae997abd2fece07eb7d9c8b0b7d35affb">dead_plant</a>( <span class="keyword">true</span>, you, examp ) ) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) ) {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The cactus&#39; nettles sting you!&quot;</span> ) );</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        you.<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ), 4 );</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        you.<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ), 4 );</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;cactus_pad&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;seed_cactus&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7c11a4f12bee9f80279bff21faa54153"><div class="ttname"><a href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">Character::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id hurt, int dam, bool bypass_med=false) override</div><div class="ttdoc">Actually hurt the player, hurts a body_part directly, no armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08207">character.cpp:8207</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae997abd2fece07eb7d9c8b0b7d35affb"><div class="ttname"><a href="iexamine_8cpp.html#ae997abd2fece07eb7d9c8b0b7d35affb">dead_plant</a></div><div class="ttdeci">static bool dead_plant(bool flower, Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">If it's winter: show msg and return true.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02163">iexamine.cpp:2163</a></div></div>
<div class="ttc" id="anamespaceiexamine__helper_html_a6fef9f0c0c72b120b7300652165a6467"><div class="ttname"><a href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a></div><div class="ttdeci">void handle_harvest(Character &amp;you, const std::string &amp;itemid, bool force_drop)</div><div class="ttdoc">Spawn an item after harvesting the plant.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02207">iexamine.cpp:2207</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08207">Character::apply_damage()</a>, <a class="el" href="iexamine_8cpp_source.html#l02163">dead_plant()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02207">iexamine_helper::handle_harvest()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a3a06b17d790bf206f9e3d9a4dc6644a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a06b17d790bf206f9e3d9a4dc6644a0">&#9670;&nbsp;</a></span>flower_dahlia()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_dahlia </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dig up its roots or drink its nectar if you can. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02316">2316</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;{</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#ae997abd2fece07eb7d9c8b0b7d35affb">dead_plant</a>( <span class="keyword">true</span>, you, examp ) ) {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiexamine__helper.html#a606d0fd56610a4033bdaf3f9a35cb7e4">iexamine_helper::drink_nectar</a>( you ) ) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    }</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160; </div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordtype">bool</span> can_get_root = you.<a class="code" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a> ) || you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a> ) ||</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                        you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac23174d2f2548a51716a75790ab8a54d">trait_BURROWLARGE</a> );</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">if</span>( can_get_root ) {</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have a digging tool to dig up roots.  Pick %s anyway?&quot;</span> ),</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                       here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span>( can_get_root ) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;dahlia_root&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;seed_dahlia&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="comment">// There was a bud and flower spawn here</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="comment">// But those were useless, don&#39;t re-add until they get useful</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4fbb9c4ed21da8c03ce7d04036beea63"><div class="ttname"><a href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const override</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a17ec945038dd28db3e0041be27e319ad"><div class="ttname"><a href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a></div><div class="ttdeci">static const trait_id trait_BURROW(&quot;BURROW&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a73439c0a480cbe825af2284e8134349c"><div class="ttname"><a href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a></div><div class="ttdeci">static const quality_id qual_DIG(&quot;DIG&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac23174d2f2548a51716a75790ab8a54d"><div class="ttname"><a href="iexamine_8cpp.html#ac23174d2f2548a51716a75790ab8a54d">trait_BURROWLARGE</a></div><div class="ttdeci">static const trait_id trait_BURROWLARGE(&quot;BURROWLARGE&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine__helper_html_a606d0fd56610a4033bdaf3f9a35cb7e4"><div class="ttname"><a href="namespaceiexamine__helper.html#a606d0fd56610a4033bdaf3f9a35cb7e4">iexamine_helper::drink_nectar</a></div><div class="ttdeci">bool drink_nectar(Character &amp;you)</div><div class="ttdoc">Consume Nectar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02192">iexamine.cpp:2192</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iexamine_8cpp_source.html#l02163">dead_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l02192">iexamine_helper::drink_nectar()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02207">iexamine_helper::handle_harvest()</a>, <a class="el" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a>, and <a class="el" href="iexamine_8cpp.html#ac23174d2f2548a51716a75790ab8a54d">trait_BURROWLARGE</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="afe971c7a2f88d57acbd67f2b71485797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe971c7a2f88d57acbd67f2b71485797">&#9670;&nbsp;</a></span>flower_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02435">2435</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;{</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) == <a class="code" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a> ) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This flower is still alive, despite the harsh conditions…&quot;</span> ) );</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#a2c8a0adc3a541c07ec930b8cdfc0611a">can_drink_nectar</a>( you ) ) {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel out of place as you explore the %s. Drink?&quot;</span> ),</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                       here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                       ( 30_seconds ) ); <span class="comment">// Takes 30 seconds, more or less if faster/slower than 100 speed</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This flower tastes very wrong…&quot;</span> ) );</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="comment">// If you can drink flowers, you&#39;re post-thresh and the Mycus does not want you.</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, 10_minutes );</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    }</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, 1, 3, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a81656706da6c7486137ad8578c0f523e"><div class="ttname"><a href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a></div><div class="ttdeci">season_type season_of_year(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00810">calendar.cpp:810</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a></div><div class="ttdeci">@ WINTER</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00025">calendar.h:25</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0c073c8608c88bb092d72f27944a7df1"><div class="ttname"><a href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a></div><div class="ttdeci">static const efftype_id effect_teleglow(&quot;teleglow&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2c8a0adc3a541c07ec930b8cdfc0611a"><div class="ttname"><a href="iexamine_8cpp.html#a2c8a0adc3a541c07ec930b8cdfc0611a">can_drink_nectar</a></div><div class="ttdeci">static bool can_drink_nectar(const Character &amp;you)</div><div class="ttdoc">Helper method to see if player has traits, hunger and mouthwear for drinking nectar.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02182">iexamine.cpp:2182</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a398ef54be46ee27b157365a389e9d4e5"><div class="ttname"><a href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a></div><div class="ttdeci">static const itype_id itype_marloss_seed(&quot;marloss_seed&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="iexamine_8cpp_source.html#l02182">can_drink_nectar()</a>, <a class="el" href="iexamine_8cpp.html#a0c073c8608c88bb092d72f27944a7df1">effect_teleglow</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02207">iexamine_helper::handle_harvest()</a>, <a class="el" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00810">season_of_year()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="calendar_8h_source.html#l00025">WINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a28884290409ac389dbe3ba0efedf379d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28884290409ac389dbe3ba0efedf379d">&#9670;&nbsp;</a></span>flower_poppy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_poppy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt pick (or drink nectar if able) poppy bud. </p>
<p>Not safe for player.</p>
<p>Drinking causes: -25 hunger, +20 sleepiness, pkill2-70 effect and, 1 in 20 pkiller-1 addiction. Picking w/ env_resist &lt; 5 causes 1 in 3 sleep for 12 min and 4 dmg to each leg </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02230">2230</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;{</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#ae997abd2fece07eb7d9c8b0b7d35affb">dead_plant</a>( <span class="keyword">true</span>, you, examp ) ) {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">// TODO: Get rid of this section and move it to eating</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="comment">// Two y/n prompts is just too much</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iexamine_8cpp.html#a2c8a0adc3a541c07ec930b8cdfc0611a">can_drink_nectar</a>( you ) ) {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel woozy as you explore the %s. Drink?&quot;</span> ),</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                       here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You slowly suck up the nectar.&quot;</span> ) );</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <a class="code" href="classitem.html">item</a> poppy( <span class="stringliteral">&quot;poppy_nectar&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, 1 );</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( poppy ) );</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        you.<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 20 );</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a>, 7_minutes );</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <span class="comment">// Please drink poppy nectar responsibly.</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            you.<a class="code" href="classCharacter.html#ac84dbe117868448cfe201c691aae97ce">add_addiction</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#a55385703e7bedc3b31734dfb32bdbaf0">addiction_id</a>( <span class="stringliteral">&quot;opiate&quot;</span> ) ), 1 );</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    }</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick %s?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordtype">int</span> resist = you.<a class="code" href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">get_env_resist</a>( <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) );</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span>( resist &lt; 10 ) {</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <span class="comment">// Can&#39;t smell the flowers with a gas mask on!</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This flower has a heady aroma.&quot;</span> ) );</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="structweather__sum.html">weather_sum</a> recentWeather = <a class="code" href="group__Weather.html#gaa6c6337959732c2b193afe062236bdb8">sum_conditions</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - 10_minutes, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>,</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                                you.<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() );</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="comment">// If it has been raining recently, then this event is twice less likely.</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordflow">if</span>( ( ( recentWeather.<a class="code" href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">rain_amount</a> &gt; 1 ) ? <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 6 ) : <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) &amp;&amp; resist &lt; 5 ) {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="comment">// Should user player::infect, but can&#39;t!</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="comment">// player::infect needs to be restructured to return a bool indicating success.</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The flower&#39;s fragrance makes you extremely drowsy…&quot;</span> ) );</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        you.<a class="code" href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">fall_asleep</a>( 2_hours );</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your legs are covered in the poppy&#39;s roots!&quot;</span> ) );</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        you.<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ), 4 );</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        you.<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ), 4 );</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.5 );</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    }</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160; </div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160; </div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;poppy_bud&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <a class="code" href="namespaceiexamine__helper.html#a6fef9f0c0c72b120b7300652165a6467">iexamine_helper::handle_harvest</a>( you, <span class="stringliteral">&quot;withered&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4886c07d74c7e8ad7ce2ced7d8238015"><div class="ttname"><a href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">Character::fall_asleep</a></div><div class="ttdeci">void fall_asleep()</div><div class="ttdoc">Adds &quot;sleep&quot; to the player.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09029">character.cpp:9029</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8bc4c7c3d24cec4d735cf276e02de93a"><div class="ttname"><a href="classCharacter.html#a8bc4c7c3d24cec4d735cf276e02de93a">Character::get_env_resist</a></div><div class="ttdeci">int get_env_resist(bodypart_id bp) const override</div><div class="ttdoc">Returns overall env_resist on a body_part.</div><div class="ttdef"><b>Definition:</b> <a href="character__armor_8cpp_source.html#l00106">character_armor.cpp:106</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac84dbe117868448cfe201c691aae97ce"><div class="ttname"><a href="classCharacter.html#ac84dbe117868448cfe201c691aae97ce">Character::add_addiction</a></div><div class="ttdeci">void add_addiction(const addiction_id &amp;type, int strength)</div><div class="ttdoc">Adds an addiction to the player.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02020">suffer.cpp:2020</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae7eecab0795b77cbd6fabebc0e140486"><div class="ttname"><a href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">Character::mod_sleepiness</a></div><div class="ttdeci">void mod_sleepiness(int nsleepiness)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04544">character.cpp:4544</a></div></div>
<div class="ttc" id="aclassconsume__activity__actor_html"><div class="ttname"><a href="classconsume__activity__actor.html">consume_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00780">activity_actor_definitions.h:781</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaa6c6337959732c2b193afe062236bdb8"><div class="ttname"><a href="group__Weather.html#gaa6c6337959732c2b193afe062236bdb8">sum_conditions</a></div><div class="ttdeci">weather_sum sum_conditions(const time_point &amp;start, const time_point &amp;end, const tripoint_abs_ms &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00187">weather.cpp:187</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1b1e7277edfa2ba4a473cd58b150bd92"><div class="ttname"><a href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a></div><div class="ttdeci">static const efftype_id effect_pkill2(&quot;pkill2&quot;)</div></div>
<div class="ttc" id="astructweather__sum_html"><div class="ttname"><a href="structweather__sum.html">weather_sum</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00112">weather.h:112</a></div></div>
<div class="ttc" id="astructweather__sum_html_a5f99b2c6f5871e572b5ee517e2e562bd"><div class="ttname"><a href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">weather_sum::rain_amount</a></div><div class="ttdeci">int rain_amount</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00113">weather.h:113</a></div></div>
<div class="ttc" id="atype__id_8h_html_a55385703e7bedc3b31734dfb32bdbaf0"><div class="ttname"><a href="type__id_8h.html#a55385703e7bedc3b31734dfb32bdbaf0">addiction_id</a></div><div class="ttdeci">string_id&lt; add_type &gt; addiction_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00017">type_id.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="suffer_8cpp_source.html#l02020">Character::add_addiction()</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08207">Character::apply_damage()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="iexamine_8cpp_source.html#l02182">can_drink_nectar()</a>, <a class="el" href="iexamine_8cpp_source.html#l02163">dead_plant()</a>, <a class="el" href="iexamine_8cpp.html#a1b1e7277edfa2ba4a473cd58b150bd92">effect_pkill2</a>, <a class="el" href="character_8cpp_source.html#l09029">Character::fall_asleep()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="character__armor_8cpp_source.html#l00106">Character::get_env_resist()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02207">iexamine_helper::handle_harvest()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="weather_8h_source.html#l00113">weather_sum::rain_amount</a>, <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>, <a class="el" href="weather_8cpp_source.html#l00187">sum_conditions()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="af2e1ac97689890fd812b00dd4612a2ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e1ac97689890fd812b00dd4612a2ab">&#9670;&nbsp;</a></span>flower_spurge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_spurge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad286e31517b7c40545f6a4ff0a43293c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad286e31517b7c40545f6a4ff0a43293c">&#9670;&nbsp;</a></span>flower_tulip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::flower_tulip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa7f17f88f7e2f7d263dabad23627d1f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f17f88f7e2f7d263dabad23627d1f0">&#9670;&nbsp;</a></span>fswitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fswitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02093">2093</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;{</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Flip the %s?&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <a class="code" href="classint__id.html">ter_id</a> terid = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> tmp;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    tmp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = examp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keywordflow">for</span>( tmp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>; tmp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt;= examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> + 5; tmp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>++ ) {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="keywordflow">for</span>( tmp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = 0; tmp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt; <a class="code" href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a>; tmp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>++ ) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> &amp;nearby_ter = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp );</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            <span class="keywordflow">if</span>( terid == <a class="code" href="iexamine_8cpp.html#ab67148356b16b9ae7dfe07bec3b22c7d">ter_t_switch_rg</a> ) {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> ) {</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> );</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> ) {</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> );</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> ) {</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> );</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> ) {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> );</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code" href="iexamine_8cpp.html#a07b62547db0cd67db8eac56902961a48">ter_t_switch_gb</a> ) {</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> ) {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> );</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> ) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> );</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> ) {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> );</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> ) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> );</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code" href="iexamine_8cpp.html#abb05a83b9e3317f9430c62e3b52c8761">ter_t_switch_rb</a> ) {</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> ) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> );</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> ) {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> );</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> ) {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> );</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> ) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> );</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( terid == <a class="code" href="iexamine_8cpp.html#ab0f827568ef2773c6007933de7de1cc6">ter_t_switch_even</a> ) {</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                <span class="keywordflow">if</span>( ( tmp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> ) % 2 == 1 ) {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                    <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> ) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> );</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a> ) {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a> );</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> ) {</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> );</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a> ) {</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a> );</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> ) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> );</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( nearby_ter == <a class="code" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a> ) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( tmp, <a class="code" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a> );</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                    }</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;            }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You hear the rumble of rock shifting.&quot;</span> ) );</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <a class="code" href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a>().<a class="code" href="classtimed__event__manager.html#a1c1a0176abe4ee754ac79e08aebe6c84">add</a>( <a class="code" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a109a2d45d7995d10141172feca982d2e">timed_event_type::TEMPLE_SPAWN</a>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 3_turns );</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;}</div>
<div class="ttc" id="aclasstimed__event__manager_html_a1c1a0176abe4ee754ac79e08aebe6c84"><div class="ttname"><a href="classtimed__event__manager.html#a1c1a0176abe4ee754ac79e08aebe6c84">timed_event_manager::add</a></div><div class="ttdeci">void add(timed_event_type type, const time_point &amp;when, int faction_id=-1, int strength=-1, const std::string &amp;key=&quot;&quot;)</div><div class="ttdoc">Add an entry to the event queue.</div><div class="ttdef"><b>Definition:</b> <a href="timed__event_8cpp_source.html#l00388">timed_event.cpp:388</a></div></div>
<div class="ttc" id="agame_8cpp_html_a843dd63af25a83f66fdc5ea2bea33f01"><div class="ttname"><a href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a></div><div class="ttdeci">timed_event_manager &amp; get_timed_events()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13861">game.cpp:13861</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a2f229f6ae9b3affb78ec8139ccdbf18e"><div class="ttname"><a href="game__constants_8h.html#a2f229f6ae9b3affb78ec8139ccdbf18e">MAPSIZE_X</a></div><div class="ttdeci">constexpr int MAPSIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00045">game_constants.h:45</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a07b62547db0cd67db8eac56902961a48"><div class="ttname"><a href="iexamine_8cpp.html#a07b62547db0cd67db8eac56902961a48">ter_t_switch_gb</a></div><div class="ttdeci">static const ter_str_id ter_t_switch_gb(&quot;t_switch_gb&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2c3640a699a832eb5ae94b316b917ba1"><div class="ttname"><a href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a></div><div class="ttdeci">static const ter_str_id ter_t_floor_blue(&quot;t_floor_blue&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a91ecf61a7b8e7eeb9eab74e6d9c67d7c"><div class="ttname"><a href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a></div><div class="ttdeci">static const ter_str_id ter_t_rock_red(&quot;t_rock_red&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab0deb1d930287f30790b682aadeca888"><div class="ttname"><a href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a></div><div class="ttdeci">static const ter_str_id ter_t_floor_green(&quot;t_floor_green&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab0f827568ef2773c6007933de7de1cc6"><div class="ttname"><a href="iexamine_8cpp.html#ab0f827568ef2773c6007933de7de1cc6">ter_t_switch_even</a></div><div class="ttdeci">static const ter_str_id ter_t_switch_even(&quot;t_switch_even&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab4f394e94eaf61fa0a00d6e3a3afdf29"><div class="ttname"><a href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a></div><div class="ttdeci">static const ter_str_id ter_t_rock_green(&quot;t_rock_green&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab67148356b16b9ae7dfe07bec3b22c7d"><div class="ttname"><a href="iexamine_8cpp.html#ab67148356b16b9ae7dfe07bec3b22c7d">ter_t_switch_rg</a></div><div class="ttdeci">static const ter_str_id ter_t_switch_rg(&quot;t_switch_rg&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_abb05a83b9e3317f9430c62e3b52c8761"><div class="ttname"><a href="iexamine_8cpp.html#abb05a83b9e3317f9430c62e3b52c8761">ter_t_switch_rb</a></div><div class="ttdeci">static const ter_str_id ter_t_switch_rb(&quot;t_switch_rb&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adc9a1aad1e807ff988710be6ff003991"><div class="ttname"><a href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a></div><div class="ttdeci">static const ter_str_id ter_t_rock_blue(&quot;t_rock_blue&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae7967a2ec2c39846c38f7d92faaf24d5"><div class="ttname"><a href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a></div><div class="ttdeci">static const ter_str_id ter_t_floor_red(&quot;t_floor_red&quot;)</div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7a109a2d45d7995d10141172feca982d2e"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a109a2d45d7995d10141172feca982d2e">timed_event_type::TEMPLE_SPAWN</a></div><div class="ttdeci">@ TEMPLE_SPAWN</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="timed__event_8cpp_source.html#l00388">timed_event_manager::add()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13861">get_timed_events()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="game__constants_8h_source.html#l00045">MAPSIZE_X</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a109a2d45d7995d10141172feca982d2e">TEMPLE_SPAWN</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a2c3640a699a832eb5ae94b316b917ba1">ter_t_floor_blue</a>, <a class="el" href="iexamine_8cpp.html#ab0deb1d930287f30790b682aadeca888">ter_t_floor_green</a>, <a class="el" href="iexamine_8cpp.html#ae7967a2ec2c39846c38f7d92faaf24d5">ter_t_floor_red</a>, <a class="el" href="iexamine_8cpp.html#adc9a1aad1e807ff988710be6ff003991">ter_t_rock_blue</a>, <a class="el" href="iexamine_8cpp.html#ab4f394e94eaf61fa0a00d6e3a3afdf29">ter_t_rock_green</a>, <a class="el" href="iexamine_8cpp.html#a91ecf61a7b8e7eeb9eab74e6d9c67d7c">ter_t_rock_red</a>, <a class="el" href="iexamine_8cpp.html#ab0f827568ef2773c6007933de7de1cc6">ter_t_switch_even</a>, <a class="el" href="iexamine_8cpp.html#a07b62547db0cd67db8eac56902961a48">ter_t_switch_gb</a>, <a class="el" href="iexamine_8cpp.html#abb05a83b9e3317f9430c62e3b52c8761">ter_t_switch_rb</a>, <a class="el" href="iexamine_8cpp.html#ab67148356b16b9ae7dfe07bec3b22c7d">ter_t_switch_rg</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a53ec8ff1d13697f3468e88047b3c9308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ec8ff1d13697f3468e88047b3c9308">&#9670;&nbsp;</a></span>fungus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fungus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove furniture. </p>
<p>Add spore effect. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02464">2464</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;{</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s crumbles into spores!&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) );</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <a class="code" href="classfungal__effects.html">fungal_effects</a>().<a class="code" href="classfungal__effects.html#af20c43b3b075705a45a9cbf87aa39df4">create_spores</a>( examp, &amp;you );</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.5 );</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;}</div>
<div class="ttc" id="aclassfungal__effects_html"><div class="ttname"><a href="classfungal__effects.html">fungal_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8h_source.html#l00008">fungal_effects.h:9</a></div></div>
<div class="ttc" id="aclassfungal__effects_html_af20c43b3b075705a45a9cbf87aa39df4"><div class="ttname"><a href="classfungal__effects.html#af20c43b3b075705a45a9cbf87aa39df4">fungal_effects::create_spores</a></div><div class="ttdeci">void create_spores(const tripoint &amp;p, Creature *origin=nullptr)</div><div class="ttdoc">Makes spores at p.</div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8cpp_source.html#l00118">fungal_effects.cpp:118</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00118">fungal_effects::create_spores()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, and <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05778">colorized_ter_name_flags_at()</a>, <a class="el" href="monattack_8cpp_source.html#l01953">mattack::fungus_corporate()</a>, <a class="el" href="iexamine_8cpp_source.html#l02676">harvest_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10533">game::walk_move()</a>.</p>

</div>
</div>
<a id="a370c7ee8905e19d8c449dd18a4807cdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370c7ee8905e19d8c449dd18a4807cdb">&#9670;&nbsp;</a></span>fvat_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fvat_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03529">3529</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;{</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> brew_type;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    std::string brew_nname;</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    <span class="keywordtype">bool</span> to_deposit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> vat_volume = <a class="code" href="namespaceunits.html#a94416be3a2633d78eb3676cfa32bf1e3">units::from_liter</a>( 50 );</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="keywordtype">bool</span> vat_full = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="keywordtype">bool</span> ferment = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    <span class="keywordtype">bool</span> brew_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    <span class="keywordtype">int</span> charges_on_ground = 0;</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;        <span class="keywordflow">if</span>( !item_it-&gt;is_brewable() || brew_present ) {</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;            <span class="comment">// This isn&#39;t a brew or there was already another kind of brew inside,</span></div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;            <span class="comment">// so this has to be moved.</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            items.<a class="code" href="classmap__stack.html#abbc2e2342baf6a35d2f6422a6bc78bbb">insert</a>( *item_it );</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;            <span class="comment">// This will add items to a space near the vat, because it&#39;s flagged as NOITEM.</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;            item_it = items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            item_it++;</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            brew_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    <span class="keywordflow">if</span>( !brew_present ) {</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This keg is empty.&quot;</span> ) );</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        <span class="comment">// TODO: Allow using brews from crafting inventory</span></div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> b_inv = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <span class="stringliteral">&quot;is_brewable&quot;</span>, &amp;<a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">item::is_brewable</a> );</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        <span class="keywordflow">if</span>( b_inv.empty() ) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no brew to ferment.&quot;</span> ) );</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;        }</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        <span class="comment">// Make lists of unique typeids and names for the menu</span></div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;        <span class="comment">// Code shamelessly stolen from the crop planting function!</span></div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        std::vector&lt;itype_id&gt; b_types;</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        std::vector&lt;std::string&gt; b_names;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : b_inv ) {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;            <span class="keywordflow">if</span>( std::find( b_types.begin(), b_types.end(), <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) == b_types.end() ) {</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;                b_types.push_back( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() );</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;                b_names.push_back( <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>-&gt;typeId() ) );</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            }</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        }</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;        <span class="comment">// Choose brew from list</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <span class="keywordtype">int</span> b_index = 0;</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <span class="keywordflow">if</span>( b_types.size() &gt; 1 ) {</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            b_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use which brew?&quot;</span> ), b_names );</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">//Only one brew type was in inventory, so it&#39;s automatically used</span></div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set %s in the vat?&quot;</span> ), b_names[0] ) ) {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;                b_index = -1;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        <span class="keywordflow">if</span>( b_index &lt; 0 ) {</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        }</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        brew_type = b_types[b_index];</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        brew_nname = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( brew_type );</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;brew = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        brew_type = brew.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>();</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        brew_nname = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( brew_type );</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        charges_on_ground = brew.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This keg contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;                 brew.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), brew.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, brew.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * 100.0 / vat_volume );</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <span class="keyword">enum</span> <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> { ADD_BREW, REMOVE_BREW, START_FERMENT };</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <a class="code" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        selectmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ADD_BREW, ( you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( brew_type ) &gt; 0 ), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Add more %s to the vat&quot;</span> ), brew_nname );</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( REMOVE_BREW, brew.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove %s from the vat&quot;</span> ), brew.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( START_FERMENT, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start fermenting cycle&quot;</span> ) );</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        selectmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <span class="keywordflow">switch</span>( selectmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;            <span class="keywordflow">case</span> ADD_BREW: {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                to_deposit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;            }</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;            <span class="keywordflow">case</span> REMOVE_BREW: {</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), examp );</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            }</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            <span class="keywordflow">case</span> START_FERMENT: {</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                ferment = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            }</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        }</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    }</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    <span class="keywordflow">if</span>( to_deposit ) {</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        <a class="code" href="classitem.html">item</a> brew( brew_type, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> );</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <span class="keywordtype">int</span> charges_held = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( brew_type );</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        brew.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = charges_on_ground;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; charges_held &amp;&amp; !vat_full; i++ ) {</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;            you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( brew_type, 1 );</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;            brew.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            <span class="keywordflow">if</span>( brew.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &gt;= vat_volume ) {</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;                vat_full = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;            }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        }</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set %s in the vat.&quot;</span> ), brew_nname );</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The keg now contains %s (%d), %0.f%% full.&quot;</span> ),</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                 brew.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), brew.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, brew.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() * 100.0 / vat_volume );</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        <span class="comment">//This is needed to bypass NOITEM</span></div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;        here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, brew );</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;        <span class="keywordflow">if</span>( !vat_full ) {</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;            ferment = <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start fermenting cycle?&quot;</span> ) );</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;        }</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    }</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    <span class="keywordflow">if</span>( vat_full || ferment ) {</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;        here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        <a class="code" href="iexamine_8cpp.html#a26bcb6c20dd7a68c111fcc0cf9b8d70b">fvat_set_full</a>( examp );</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        <span class="keywordflow">if</span>( vat_full ) {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The vat is full, so you close the lid and start the fermenting cycle.&quot;</span> ) );</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You close the lid and start the fermenting cycle.&quot;</span> ) );</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;        }</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    }</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a9781b39e9c1a98383f202db9935b6a23"><div class="ttname"><a href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">item::is_brewable</a></div><div class="ttdeci">bool is_brewable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09502">item.cpp:9502</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a26bcb6c20dd7a68c111fcc0cf9b8d70b"><div class="ttname"><a href="iexamine_8cpp.html#a26bcb6c20dd7a68c111fcc0cf9b8d70b">fvat_set_full</a></div><div class="ttdeci">static void fvat_set_full(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03518">iexamine.cpp:3518</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="units_8h_source.html#l00310">units::from_liter()</a>, <a class="el" href="iexamine_8cpp_source.html#l03518">fvat_set_full()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l00224">map_stack::insert()</a>, <a class="el" href="item_8cpp_source.html#l09502">item::is_brewable()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l14681">item::set_age()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8h_source.html#l00541">calendar::turn_zero</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a6c5462dc5cc5fb8b987660b8a00221f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c5462dc5cc5fb8b987660b8a00221f1">&#9670;&nbsp;</a></span>fvat_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::fvat_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03653">3653</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;{</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;fvat_full was empty!&quot;</span> );</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <a class="code" href="iexamine_8cpp.html#a20c7318b81aa4fe814356df77a0d122e">fvat_set_empty</a>( examp );</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    }</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160; </div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;        <span class="keywordflow">if</span>( !it.made_of_from_type( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove %s from the vat.&quot;</span> ), it.tname() );</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), it );</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;            here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( examp, &amp;it );</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;        }</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        <a class="code" href="iexamine_8cpp.html#a20c7318b81aa4fe814356df77a0d122e">fvat_set_empty</a>( examp );</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    }</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160; </div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;brew_i = *items_here.begin();</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="comment">// Does the vat contain unfermented brew, or already fermented booze?</span></div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    <span class="comment">// TODO: Allow &quot;recursive brewing&quot; to continue without player having to check on it</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <span class="keywordflow">if</span>( brew_i.<a class="code" href="classitem.html#a9781b39e9c1a98383f202db9935b6a23">is_brewable</a>() ) {</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a vat of %s set to ferment there.&quot;</span> ), brew_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160; </div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        <span class="comment">// TODO: change brew_time to return time_duration</span></div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> brew_time = brew_i.<a class="code" href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">brewing_time</a>();</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> progress = brew_i.<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        <span class="keywordflow">if</span>( progress &lt; brew_time ) {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;            <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( brew_time - progress );</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;            <span class="keywordflow">if</span>( hours &lt; 1 ) {</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will finish brewing in less than an hour.&quot;</span> ) );</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish brewing in about %d hour.&quot;</span>,</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;                                    <span class="stringliteral">&quot;It will finish brewing in about %d hours.&quot;</span>,</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;                                    hours ), hours );</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;            }</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        }</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160; </div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Finish brewing?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            <span class="keyword">const</span> std::map&lt;itype_id, int&gt; results = brew_i.<a class="code" href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb">brewing_results</a>();</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> count = brew_i.<a class="code" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>();</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;            <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> birthday = brew_i.<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>();</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160; </div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;            here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const itype_id, int&gt; &amp;result : results ) {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;                <span class="keywordtype">int</span> amount = result.second * count;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                <span class="comment">// TODO: Different age based on settings</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                <a class="code" href="classitem.html">item</a> booze( result.first, birthday );</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                <span class="keywordflow">if</span>( result.first-&gt;phase == <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) {</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                    booze.charges = amount;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, booze );</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is now ready for bottling.&quot;</span> ), result.first-&gt;nname( amount ) );</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;                    you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( booze, amount );</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove the %s from the vat.&quot;</span> ), result.first-&gt;nname( amount ) );</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;                }</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            }</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160; </div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;            you.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( to_minutes&lt;int&gt;( brew_time ) / 10, 100 ) );</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        }</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160; </div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;            <a class="code" href="iexamine_8cpp.html#a20c7318b81aa4fe814356df77a0d122e">fvat_set_empty</a>( examp );</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        }</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a vat of fermented %s there.&quot;</span> ), brew_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    }</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160; </div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    <span class="keyword">const</span> std::string booze_name = brew_i.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( items_here.begin(), examp ) ) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;        <a class="code" href="iexamine_8cpp.html#a20c7318b81aa4fe814356df77a0d122e">fvat_set_empty</a>( examp );</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %s from the vat.&quot;</span> ), booze_name );</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    }</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a1c4782661219fccd444ab8d91ec04d58"><div class="ttname"><a href="classitem.html#a1c4782661219fccd444ab8d91ec04d58">item::brewing_time</a></div><div class="ttdeci">time_duration brewing_time() const</div><div class="ttdoc">Time for this item to be fully fermented.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08502">item.cpp:8502</a></div></div>
<div class="ttc" id="aclassitem_html_a9b8415db80141e0ee2844d2b0f7204bb"><div class="ttname"><a href="classitem.html#a9b8415db80141e0ee2844d2b0f7204bb">item::brewing_results</a></div><div class="ttdeci">const std::map&lt; itype_id, int &gt; &amp; brewing_results() const</div><div class="ttdoc">The results of fermenting this item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08507">item.cpp:8507</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a20c7318b81aa4fe814356df77a0d122e"><div class="ttname"><a href="iexamine_8cpp.html#a20c7318b81aa4fe814356df77a0d122e">fvat_set_empty</a></div><div class="ttdeci">static void fvat_set_empty(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l03507">iexamine.cpp:3507</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad0e39d29af45ea0a03f280197b35ca72"><div class="ttname"><a href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a></div><div class="ttdeci">static const skill_id skill_cooking(&quot;cooking&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="item_8cpp_source.html#l08507">item::brewing_results()</a>, <a class="el" href="item_8cpp_source.html#l08502">item::brewing_time()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="iexamine_8cpp_source.html#l03507">fvat_set_empty()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00451">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="item_8cpp_source.html#l09502">item::is_brewable()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a2ddb9a8a6a877bfb2bbe06e04b4c8dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ddb9a8a6a877bfb2bbe06e04b4c8dc7">&#9670;&nbsp;</a></span>gaspump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::gaspump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use "gas pump.". </p>
<p>Will pump any liquids on tile. </p>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
Dexterity decreases chance of spilling gas from a pump <dl class="section note"><dt>Note</dt><dd></dd></dl>
Dexterity decreases amount of gas spilled, if gas is spilled from pump 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00523">523</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use the %s?&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ++item_it ) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">if</span>( item_it-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {<span class="comment"></span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">            /// @note \EFFECT_DEX decreases chance of spilling gas from a pump</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"></span>            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 + you.<a class="code" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() ) ) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You accidentally spill the %s.&quot;</span> ), item_it-&gt;type_name() );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> max_spill_volume = <a class="code" href="namespaceunits.html#a94416be3a2633d78eb3676cfa32bf1e3">units::from_liter</a>( 1 );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> max_spill_charges = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, item_it-&gt;charges_per_volume( max_spill_volume ) );<span class="comment"></span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">                /// @note \EFFECT_DEX decreases amount of gas spilled, if gas is spilled from pump</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span>                <span class="keyword">const</span> <span class="keywordtype">int</span> qty = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, max_spill_charges * 8.0 / <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, you.<a class="code" href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">get_dex</a>() ) );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <a class="code" href="classitem.html">item</a> spill = item_it-&gt;<a class="code" href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">split</a>( qty );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordflow">if</span>( spill.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() ) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *item_it );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), spill );</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( item_it, examp, 1 );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Out of order.&quot;</span> ) );</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a34a927d0f161ac92ab0d462397828bd5"><div class="ttname"><a href="classCharacter.html#a34a927d0f161ac92ab0d462397828bd5">Character::get_dex</a></div><div class="ttdeci">int get_dex() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04131">character.cpp:4131</a></div></div>
<div class="ttc" id="aclassitem_html_a3c47a272ada88bc7d3d31a6a4b8a672c"><div class="ttname"><a href="classitem.html#a3c47a272ada88bc7d3d31a6a4b8a672c">item::split</a></div><div class="ttdeci">item split(int qty)</div><div class="ttdoc">Splits a count-by-charges item always leaving source item with minimum of 1 charge.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00920">item.cpp:920</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="units_8h_source.html#l00310">units::from_liter()</a>, <a class="el" href="character_8cpp_source.html#l04131">Character::get_dex()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8cpp_source.html#l00920">item::split()</a>, and <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a063625d8728319f6e54a792b609f1719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063625d8728319f6e54a792b609f1719">&#9670;&nbsp;</a></span>get_harvest_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="classitem.html">item</a> &gt; iexamine::get_harvest_items </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>plant_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seed_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>byproducts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Items that appear when a generic plant is harvested. </p>
<p>Seed <a class="el" href="structislot__seed.html">islot_seed</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The seed type, must have a <a class="el" href="structitype.html#ad55b9f82e65f57e8cfb6ecc4fc0445cb">itype::seed</a> slot. </td></tr>
    <tr><td class="paramname">plant_count</td><td>Number of fruits to generate. For charge-based items, this specifies multiples of the default charge. </td></tr>
    <tr><td class="paramname">seed_count</td><td>Number of seeds to generate. </td></tr>
    <tr><td class="paramname">byproducts</td><td>If true, byproducts (like straw, withered plants, see <a class="el" href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">islot_seed::byproducts</a>) are included. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02592">2592</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;{</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    std::list&lt;item&gt; result;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a>.seed ) {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    }</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="keyword">const</span> <a class="code" href="structislot__seed.html">islot_seed</a> &amp;seed_data = *<a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a>.seed;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="comment">// This is a temporary measure, itype should instead provide appropriate accessors</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="comment">// to expose data about the seed item to allow harvesting to function.</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;seed_type = <a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a>.get_id();</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespacemath__opers.html#a300de5bb023b6b24693cac754cc23008">add</a> = [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp; <a class="code" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> count ) {</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <a class="code" href="classitem.html">item</a> new_item( <span class="keywordtype">id</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        <span class="keywordflow">if</span>( new_item.count_by_charges() &amp;&amp; count &gt; 0 ) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;            new_item.charges *= count;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            new_item.charges /= seed_data.<a class="code" href="structislot__seed.html#a78d156b1edac50b5dca40ad9c2bc093e">fruit_div</a>;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <span class="keywordflow">if</span>( new_item.charges &lt;= 0 ) {</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                new_item.charges = 1;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            }</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            result.push_back( new_item );</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( count &gt; 0 ) {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            result.insert( result.begin(), count, new_item );</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        }</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    };</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keywordflow">if</span>( seed_data.<a class="code" href="structislot__seed.html#a7eb466642b2a218be8e60deff15c1c1e">spawn_seeds</a> ) {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <a class="code" href="namespacemath__opers.html#a300de5bb023b6b24693cac754cc23008">add</a>( seed_type, seed_count );</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <a class="code" href="namespacemath__opers.html#a300de5bb023b6b24693cac754cc23008">add</a>( seed_data.<a class="code" href="structislot__seed.html#a716438e2fcc04356b120fa909f15f68c">fruit_id</a>, plant_count );</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160; </div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="keywordflow">if</span>( byproducts ) {</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> : seed_data.<a class="code" href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">byproducts</a> ) {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            <a class="code" href="namespacemath__opers.html#a300de5bb023b6b24693cac754cc23008">add</a>( <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>, 1 );</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    }</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160; </div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
<div class="ttc" id="aclassint__id_html_a09d4f824b2540da7e682d10cdf324081"><div class="ttname"><a href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">int_id::id</a></div><div class="ttdeci">const string_id&lt; ammo_effect &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a300de5bb023b6b24693cac754cc23008"><div class="ttname"><a href="namespacemath__opers.html#a300de5bb023b6b24693cac754cc23008">math_opers::add</a></div><div class="ttdeci">constexpr double add(double l, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00208">math_parser_impl.h:208</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7c"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a></div><div class="ttdeci">type</div><div class="ttdoc">Basic enum for directions.</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00054">omdata.h:54</a></div></div>
<div class="ttc" id="astructislot__seed_html"><div class="ttname"><a href="structislot__seed.html">islot_seed</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01078">itype.h:1078</a></div></div>
<div class="ttc" id="astructislot__seed_html_a716438e2fcc04356b120fa909f15f68c"><div class="ttname"><a href="structislot__seed.html#a716438e2fcc04356b120fa909f15f68c">islot_seed::fruit_id</a></div><div class="ttdeci">itype_id fruit_id</div><div class="ttdoc">Type id of the fruit item.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01112">itype.h:1112</a></div></div>
<div class="ttc" id="astructislot__seed_html_a78d156b1edac50b5dca40ad9c2bc093e"><div class="ttname"><a href="structislot__seed.html#a78d156b1edac50b5dca40ad9c2bc093e">islot_seed::fruit_div</a></div><div class="ttdeci">int fruit_div</div><div class="ttdoc">Amount of harvested charges of fruits is divided by this number.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01092">itype.h:1092</a></div></div>
<div class="ttc" id="astructislot__seed_html_a7eb466642b2a218be8e60deff15c1c1e"><div class="ttname"><a href="structislot__seed.html#a7eb466642b2a218be8e60deff15c1c1e">islot_seed::spawn_seeds</a></div><div class="ttdeci">bool spawn_seeds</div><div class="ttdoc">Whether to spawn seed items additionally to the fruit items.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01116">itype.h:1116</a></div></div>
<div class="ttc" id="astructislot__seed_html_aeaf44d52989cf1aba2bd0fbf17c37519"><div class="ttname"><a href="structislot__seed.html#aeaf44d52989cf1aba2bd0fbf17c37519">islot_seed::byproducts</a></div><div class="ttdeci">std::vector&lt; itype_id &gt; byproducts</div><div class="ttdoc">Additionally items (a list of their item ids) that will spawn when harvesting the plant.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01120">itype.h:1120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="itype_8h_source.html#l01120">islot_seed::byproducts</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="item_8cpp_source.html#l08618">item::count_by_charges()</a>, <a class="el" href="itype_8h_source.html#l01092">islot_seed::fruit_div</a>, <a class="el" href="itype_8h_source.html#l01112">islot_seed::fruit_id</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="itype_8h_source.html#l01116">islot_seed::spawn_seeds</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="faction__camp_8cpp_source.html#l03547">farm_action()</a>, <a class="el" href="iexamine_8cpp_source.html#l02676">harvest_plant()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l01028">vehicle::operate_reaper()</a>.</p>

</div>
</div>
<a id="a52eaa83fb4f8dacccac4a5e736cf3fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52eaa83fb4f8dacccac4a5e736cf3fe1">&#9670;&nbsp;</a></span>get_seed_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; iexamine::get_seed_entries </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classitem.html">item</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>seed_inv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make lists of unique seed types and names for the menu(no multiple hemp seeds etc) </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02476">2476</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;{</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    std::map&lt;itype_id, int&gt; seed_map;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> : seed_inv ) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        seed_map[<a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;typeId()] += ( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;charges &gt; 0 ? <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;charges : 1 );</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    }</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160; </div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    std::vector&lt;seed_tuple&gt; seed_entries;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    seed_entries.reserve( seed_map.size() );</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pr : seed_map ) {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        seed_entries.emplace_back(</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            pr.first, <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( pr.first, pr.second ), pr.second );</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="comment">// Sort by name</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    std::sort( seed_entries.begin(), seed_entries.end(),</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &amp; l, <span class="keyword">const</span> <a class="code" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &amp; r ) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        return std::get&lt;1&gt;( l ).compare( std::get&lt;1&gt;( r ) ) &lt; 0;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    } );</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keywordflow">return</span> seed_entries;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;}</div>
<div class="ttc" id="aiexamine_8h_html_af451d8686f9b469b7d76b4d643773b6a"><div class="ttname"><a href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a></div><div class="ttdeci">std::tuple&lt; itype_id, std::string, int &gt; seed_tuple</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00024">iexamine.h:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, and <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02541">dirtmound()</a>, <a class="el" href="clzones_8cpp_source.html#l00304">plot_options::query_seed()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00878">vehicle::reload_seeds()</a>.</p>

</div>
</div>
<a id="ada89967c78ff4632820932976c12ab8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada89967c78ff4632820932976c12ab8b">&#9670;&nbsp;</a></span>getGasPumpByNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; iexamine::getGasPumpByNumber </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05091">5091</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;{</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p, 12 ) ) {</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> t = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( tmp );</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;        <span class="keywordflow">if</span>( ( t == <a class="code" href="iexamine_8cpp.html#ac7b82dd0a9cc15d6ebcaa96c107f7d34">ter_t_gas_pump</a> || t == <a class="code" href="iexamine_8cpp.html#acf2fe634c9d3945f603a50a69dfcd9d7">ter_t_gas_pump_a</a></div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;              || t == <a class="code" href="iexamine_8cpp.html#aacd127340d961354badfb15bf254ba3a">ter_t_diesel_pump</a> || t == <a class="code" href="iexamine_8cpp.html#af12ed232455595307bfdf0d38fa469fb">ter_t_diesel_pump_a</a> ) &amp;&amp; number == k++ ) {</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;            <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;        }</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;    }</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_aacd127340d961354badfb15bf254ba3a"><div class="ttname"><a href="iexamine_8cpp.html#aacd127340d961354badfb15bf254ba3a">ter_t_diesel_pump</a></div><div class="ttdeci">static const ter_str_id ter_t_diesel_pump(&quot;t_diesel_pump&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac7b82dd0a9cc15d6ebcaa96c107f7d34"><div class="ttname"><a href="iexamine_8cpp.html#ac7b82dd0a9cc15d6ebcaa96c107f7d34">ter_t_gas_pump</a></div><div class="ttdeci">static const ter_str_id ter_t_gas_pump(&quot;t_gas_pump&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_acf2fe634c9d3945f603a50a69dfcd9d7"><div class="ttname"><a href="iexamine_8cpp.html#acf2fe634c9d3945f603a50a69dfcd9d7">ter_t_gas_pump_a</a></div><div class="ttdeci">static const ter_str_id ter_t_gas_pump_a(&quot;t_gas_pump_a&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af12ed232455595307bfdf0d38fa469fb"><div class="ttname"><a href="iexamine_8cpp.html#af12ed232455595307bfdf0d38fa469fb">ter_t_diesel_pump_a</a></div><div class="ttdeci">static const ter_str_id ter_t_diesel_pump_a(&quot;t_diesel_pump_a&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="iexamine_8cpp.html#aacd127340d961354badfb15bf254ba3a">ter_t_diesel_pump</a>, <a class="el" href="iexamine_8cpp.html#af12ed232455595307bfdf0d38fa469fb">ter_t_diesel_pump_a</a>, <a class="el" href="iexamine_8cpp.html#ac7b82dd0a9cc15d6ebcaa96c107f7d34">ter_t_gas_pump</a>, and <a class="el" href="iexamine_8cpp.html#acf2fe634c9d3945f603a50a69dfcd9d7">ter_t_gas_pump_a</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00808">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05185">pay_gas()</a>.</p>

</div>
</div>
<a id="a9c5488f1bdb7e18772c51ec43e6e9806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5488f1bdb7e18772c51ec43e6e9806">&#9670;&nbsp;</a></span>getNearFilledGasTank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt; iexamine::getNearFilledGasTank </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>fuel_units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534fa">fuel_station_fuel_type</a> &amp;&#160;</td>
          <td class="paramname"><em>fuel_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04983">4983</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;{</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;    std::optional&lt;tripoint&gt; tank_loc;</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;    <span class="keywordtype">int</span> distance = INT_MAX;</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;    fuel_units = 0;</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160; </div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, <a class="code" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> * 2 ) ) {</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160; </div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;        <a class="code" href="classint__id.html">furn_id</a> check_for_fuel_tank = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( tmp );</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160; </div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <span class="keywordflow">if</span>( ( fuel_type == <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faa0a644528d9eb1161f06851a630c30cb7">FUEL_TYPE_GASOLINE</a> &amp;&amp; check_for_fuel_tank != <a class="code" href="iexamine_8cpp.html#a795114d1345631d85430c4c399e5e930">furn_f_gas_tank</a> ) ||</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            ( fuel_type == <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faac25821b3a419d9adeaf20fe286fd17b9">FUEL_TYPE_DIESEL</a> &amp;&amp; check_for_fuel_tank != <a class="code" href="iexamine_8cpp.html#a24d48130c594a0f078b88e9070a81b76">furn_f_diesel_tank</a> ) ) {</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        }</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160; </div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> new_distance = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a>, tmp );</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160; </div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;        <span class="keywordflow">if</span>( new_distance &gt;= distance ) {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;        }</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;        <span class="keywordflow">if</span>( !tank_loc ) {</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;            <span class="comment">// Return a potentially empty tank, but only if we don&#39;t find a closer full one.</span></div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;            tank_loc.emplace( tmp );</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;        }</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;k : here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( tmp ) ) {</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;            <span class="keywordflow">if</span>( k.made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;                distance = new_distance;</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;                tank_loc.emplace( tmp );</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;                fuel_units = k.charges;</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;            }</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;        }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    }</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="keywordflow">return</span> tank_loc;</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;}</div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="aenums_8h_html_a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b"><div class="ttname"><a href="enums_8h.html#a00763863874f01b868849b27ceee73c9ac6c4bfa285e112c6854a2d820f854e3b">center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00410">enums.h:410</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a24d48130c594a0f078b88e9070a81b76"><div class="ttname"><a href="iexamine_8cpp.html#a24d48130c594a0f078b88e9070a81b76">furn_f_diesel_tank</a></div><div class="ttdeci">static const furn_str_id furn_f_diesel_tank(&quot;f_diesel_tank&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a795114d1345631d85430c4c399e5e930"><div class="ttname"><a href="iexamine_8cpp.html#a795114d1345631d85430c4c399e5e930">furn_f_gas_tank</a></div><div class="ttdeci">static const furn_str_id furn_f_gas_tank(&quot;f_gas_tank&quot;)</div></div>
<div class="ttc" id="aiexamine_8h_html_ab3ce677220bcf4e6907814a2adf534faa0a644528d9eb1161f06851a630c30cb7"><div class="ttname"><a href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faa0a644528d9eb1161f06851a630c30cb7">FUEL_TYPE_GASOLINE</a></div><div class="ttdeci">@ FUEL_TYPE_GASOLINE</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00042">iexamine.h:42</a></div></div>
<div class="ttc" id="aiexamine_8h_html_ab3ce677220bcf4e6907814a2adf534faac25821b3a419d9adeaf20fe286fd17b9"><div class="ttname"><a href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faac25821b3a419d9adeaf20fe286fd17b9">FUEL_TYPE_DIESEL</a></div><div class="ttdeci">@ FUEL_TYPE_DIESEL</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00044">iexamine.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00410">center</a>, <a class="el" href="iexamine_8h_source.html#l00043">FUEL_TYPE_DIESEL</a>, <a class="el" href="iexamine_8h_source.html#l00042">FUEL_TYPE_GASOLINE</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#a24d48130c594a0f078b88e9070a81b76">furn_f_diesel_tank</a>, <a class="el" href="iexamine_8cpp.html#a795114d1345631d85430c4c399e5e930">furn_f_gas_tank</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, and <a class="el" href="game__constants_8h_source.html#l00042">SEEX</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00808">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05185">pay_gas()</a>.</p>

</div>
</div>
<a id="aa0cc37c0aca01671756f6a2e6b0381a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0cc37c0aca01671756f6a2e6b0381a8">&#9670;&nbsp;</a></span>gunsafe_el()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::gunsafe_el </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to "hack" the gunsafe's electronic lock and open it. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01816">1816</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attempt to hack this safe?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <a class="code" href="namespaceiexamine.html#a8f535acef0246f6278825d8b8e99b221">try_start_hacking</a>( you, examp );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="iexamine_8cpp_source.html#l01397">try_start_hacking()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00790">get_hack_type()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a99bd536c4f8d0dedb965690d04284a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99bd536c4f8d0dedb965690d04284a34">&#9670;&nbsp;</a></span>harvest_furn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_furn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02393">2393</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;{</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                       get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;all&quot;</span>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !<a class="code" href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a>( you, examp ) ) {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classharvest__activity__actor.html">harvest_activity_actor</a>( examp, auto_forage ) );</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;}</div>
<div class="ttc" id="aclassharvest__activity__actor_html"><div class="ttname"><a href="classharvest__activity__actor.html">harvest_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01118">activity_actor_definitions.h:1119</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab4a39f87ea9e6cfa4218ce017300bd75"><div class="ttname"><a href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a></div><div class="ttdeci">static bool query_pick(Character &amp;who, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02353">iexamine.cpp:2353</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l04219">harvest_activity_actor::start()</a>.</p>

</div>
</div>
<a id="a4bc2100a2072b0f37d45251f960303b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc2100a2072b0f37d45251f960303b9">&#9670;&nbsp;</a></span>harvest_furn_nectar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_furn_nectar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02383">2383</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;{</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                       get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;all&quot;</span>;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !<a class="code" href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a>( you, examp ) ) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classharvest__activity__actor.html">harvest_activity_actor</a>( examp, auto_forage ) );</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l04219">harvest_activity_actor::start()</a>.</p>

</div>
</div>
<a id="aada324c7fd1b483274c84e288b76e17c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada324c7fd1b483274c84e288b76e17c">&#9670;&nbsp;</a></span>harvest_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>from_activity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actual harvesting of selected plant. </p>
Survival increases number of plants harvested from a seed 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02676">2676</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;{</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> = std::find_if( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        return it.is_seed();</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    } );</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160; </div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> == items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, examp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    }</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160; </div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;seedType = <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;typeId();</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span>( seedType == <a class="code" href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a> ) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        <a class="code" href="namespaceiexamine.html#a53ec8ff1d13697f3468e88047b3c9308">fungus</a>( you, examp );</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( seedType == <a class="code" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a> ) {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        <a class="code" href="namespaceiexamine.html#a53ec8ff1d13697f3468e88047b3c9308">fungus</a>( you, examp );</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) &amp;&amp; ( you.<a class="code" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() &lt; 0.8f ||</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                you.<a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt; 300 ) ) {</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a0f35042a33ec1e99159c4eda3f6b21e1">ter_t_marloss</a> );</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;We have altered this unit&#39;s configuration to extract and provide local nutriment.  The Mycus provides.&quot;</span> ) );</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a> ) || ( ( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a> ) ||</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                   you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                   <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) {</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code" href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a>, examp );</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The seed blooms forth!  We have brought true beauty to this world.&quot;</span> ) );</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) || <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#ad8c3c35f2bf36fc11ed5778311f06549">furn_f_flower_marloss</a> );</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The seed blossoms rather rapidly…&quot;</span> ) );</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aba1ab49749e6067d4c99fe6d6b866af4">furn_f_flower_fungal</a> );</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The seed blossoms into a flower-looking fungus.&quot;</span> ) );</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;        }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// Generic seed, use the seed item data</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#a9239087df40088e8fd57d8e14d3ec342">flag_CUT_HARVEST</a> ) &amp;&amp; !crafting_inv.<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a70342b1dbe0b5b47da48942f8afb7280">qual_GRASS_CUT</a> ) ) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You will need a grass-cutting tool to harvest this plant.&quot;</span> ) );</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;            <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> &amp;<a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a> = *<a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a>-&gt;type;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;            <a class="code" href="classplayer__activity.html">player_activity</a> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code" href="iexamine_8cpp.html#ab5bc5ed59776348fcd0b7f411452055f">ACT_HARVEST</a>, to_moves&lt;int&gt;( 60_seconds ) );</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;            here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160; </div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;            <span class="keywordtype">int</span> skillLevel = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a>( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) );<span class="comment"></span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="comment">            ///\EFFECT_SURVIVAL increases number of plants harvested from a seed</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="comment"></span>            <span class="keywordtype">int</span> plant_count = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( skillLevel / 2, skillLevel );</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;            plant_count *= here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code" href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">plant</a>-&gt;harvest_multiplier;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;            plant_count = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( plant_count, 1 ), 12 );</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;            <span class="keywordtype">int</span> seedCount = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( plant_count / 4, plant_count / 2 ) );</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;i : <a class="code" href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">get_harvest_items</a>( type, plant_count, seedCount, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                <span class="keywordflow">if</span>( from_activity ) {</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                    i.set_var( <span class="stringliteral">&quot;activity_var&quot;</span>, you.<a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a> );</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                }</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), i );</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            }</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code" href="structfurn__t.html#ac3845e974a411f26a4481f8c21e579e7">plant</a>-&gt;base ) );</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You harvest the plant.&quot;</span> ) );</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        }</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    }</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a42c4ba47635e0659553c233c399da84a"><div class="ttname"><a href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">Character::get_kcal_percent</a></div><div class="ttdeci">float get_kcal_percent() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04476">character.cpp:4476</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02684">character.h:2684</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">virtual int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04517">character.cpp:4517</a></div></div>
<div class="ttc" id="aclassinventory_html_a8646038685427ab8967fd8ea2ee36e92"><div class="ttname"><a href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const override</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div></div>
<div class="ttc" id="aflag_8cpp_html_a9239087df40088e8fd57d8e14d3ec342"><div class="ttname"><a href="flag_8cpp.html#a9239087df40088e8fd57d8e14d3ec342">flag_CUT_HARVEST</a></div><div class="ttdeci">const flag_id flag_CUT_HARVEST(&quot;CUT_HARVEST&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0f35042a33ec1e99159c4eda3f6b21e1"><div class="ttname"><a href="iexamine_8cpp.html#a0f35042a33ec1e99159c4eda3f6b21e1">ter_t_marloss</a></div><div class="ttdeci">static const ter_str_id ter_t_marloss(&quot;t_marloss&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1559e4ecbfd1ba3582826f58c2408587"><div class="ttname"><a href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a></div><div class="ttdeci">static const trait_id trait_M_FERTILE(&quot;M_FERTILE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1dde15b62a88d05d0f3218beccaedc4e"><div class="ttname"><a href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a></div><div class="ttdeci">static const itype_id itype_fungal_seeds(&quot;fungal_seeds&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a40331e22a139e13b3b70f387c9fdd390"><div class="ttname"><a href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MYCUS(&quot;THRESH_MYCUS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a70342b1dbe0b5b47da48942f8afb7280"><div class="ttname"><a href="iexamine_8cpp.html#a70342b1dbe0b5b47da48942f8afb7280">qual_GRASS_CUT</a></div><div class="ttdeci">static const quality_id qual_GRASS_CUT(&quot;GRASS_CUT&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa98e65f7b10de7b33d3c7e877e7d00b6"><div class="ttname"><a href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a></div><div class="ttdeci">static const mtype_id mon_fungal_blossom(&quot;mon_fungal_blossom&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aba1ab49749e6067d4c99fe6d6b866af4"><div class="ttname"><a href="iexamine_8cpp.html#aba1ab49749e6067d4c99fe6d6b866af4">furn_f_flower_fungal</a></div><div class="ttdeci">static const furn_str_id furn_f_flower_fungal(&quot;f_flower_fungal&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac038c6319122de04af85fb88e6618601"><div class="ttname"><a href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a></div><div class="ttdeci">static const skill_id skill_survival(&quot;survival&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac71452586eb6cf87fab888bc561dc897"><div class="ttname"><a href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_M_DEPENDENT(&quot;M_DEPENDENT&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac948a4eb7ffef572bcb31aa96082292d"><div class="ttname"><a href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a></div><div class="ttdeci">static const trait_id trait_M_DEFENDER(&quot;M_DEFENDER&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad8c3c35f2bf36fc11ed5778311f06549"><div class="ttname"><a href="iexamine_8cpp.html#ad8c3c35f2bf36fc11ed5778311f06549">furn_f_flower_marloss</a></div><div class="ttdeci">static const furn_str_id furn_f_flower_marloss(&quot;f_flower_marloss&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af34ffb9de37241e71030cdc7183ba183"><div class="ttname"><a href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a></div><div class="ttdeci">static const trait_id trait_M_SPORES(&quot;M_SPORES&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a063625d8728319f6e54a792b609f1719"><div class="ttname"><a href="namespaceiexamine.html#a063625d8728319f6e54a792b609f1719">iexamine::get_harvest_items</a></div><div class="ttdeci">std::list&lt; item &gt; get_harvest_items(const itype &amp;type, int plant_count, int seed_count, bool byproducts)</div><div class="ttdoc">Items that appear when a generic plant is harvested.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02592">iexamine.cpp:2592</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a53ec8ff1d13697f3468e88047b3c9308"><div class="ttname"><a href="namespaceiexamine.html#a53ec8ff1d13697f3468e88047b3c9308">iexamine::fungus</a></div><div class="ttdeci">void fungus(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">Remove furniture.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l02464">iexamine.cpp:2464</a></div></div>
<div class="ttc" id="atype__id_8h_html_a13fd56b9ac506b2517d4889040e0ef66"><div class="ttname"><a href="type__id_8h.html#a13fd56b9ac506b2517d4889040e0ef66">furn_str_id</a></div><div class="ttdeci">string_id&lt; furn_t &gt; furn_str_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00100">type_id.h:100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="iexamine_8cpp.html#ab5bc5ed59776348fcd0b7f411452055f">ACT_HARVEST</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="flag_8cpp.html#a9239087df40088e8fd57d8e14d3ec342">flag_CUT_HARVEST</a>, <a class="el" href="iexamine_8cpp_source.html#l02464">fungus()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#aba1ab49749e6067d4c99fe6d6b866af4">furn_f_flower_fungal</a>, <a class="el" href="iexamine_8cpp.html#ad8c3c35f2bf36fc11ed5778311f06549">furn_f_flower_marloss</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="iexamine_8cpp_source.html#l02592">get_harvest_items()</a>, <a class="el" href="character_8cpp_source.html#l04476">Character::get_kcal_percent()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l04517">Character::get_thirst()</a>, <a class="el" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a1dde15b62a88d05d0f3218beccaedc4e">itype_fungal_seeds</a>, <a class="el" href="iexamine_8cpp.html#a398ef54be46ee27b157365a389e9d4e5">itype_marloss_seed</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="iexamine_8cpp.html#aa98e65f7b10de7b33d3c7e877e7d00b6">mon_fungal_blossom</a>, <a class="el" href="character_8h_source.html#l02684">Character::name</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="mapdata_8h_source.html#l00667">furn_t::plant</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="iexamine_8cpp.html#a70342b1dbe0b5b47da48942f8afb7280">qual_GRASS_CUT</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a0f35042a33ec1e99159c4eda3f6b21e1">ter_t_marloss</a>, <a class="el" href="iexamine_8cpp.html#ac948a4eb7ffef572bcb31aa96082292d">trait_M_DEFENDER</a>, <a class="el" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>, <a class="el" href="iexamine_8cpp.html#a1559e4ecbfd1ba3582826f58c2408587">trait_M_FERTILE</a>, <a class="el" href="iexamine_8cpp.html#af34ffb9de37241e71030cdc7183ba183">trait_M_SPORES</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02848">aggie_plant()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02970">generic_multi_activity_do()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02652">harvest_plant_ex()</a>.</p>

</div>
</div>
<a id="a40fdda8f9827185fc887569f5c61832a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40fdda8f9827185fc887569f5c61832a">&#9670;&nbsp;</a></span>harvest_plant_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_plant_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02652">2652</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;{</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// Can&#39;t use item_stack::only_item() since there might be fertilizer</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> = std::find_if( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        return it.is_seed();</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    } );</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> == items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Missing seed for plant at (%d, %d, %d)&quot;</span>, examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, examp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() );</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    }</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160; </div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">ter_furn_flag::TFLAG_GROWTH_HARVEST</a>, examp ) ) {</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <a class="code" href="namespaceiexamine.html#aada324c7fd1b483274c84e288b76e17c">harvest_plant</a>( you, examp, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    }</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iexamine_8cpp_source.html#l02676">harvest_plant()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="iuse_8cpp_source.html#l05301">iuse::seed()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a928bba44a528674e9a1a8496f6d71903">TFLAG_GROWTH_HARVEST</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="a0598328fc05e2c387631a1d17ba67ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0598328fc05e2c387631a1d17ba67ab0">&#9670;&nbsp;</a></span>harvest_ter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_ter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02415">2415</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;{</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                       ( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;all&quot;</span> ||</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;trees&quot;</span> );</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !<a class="code" href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a>( you, examp ) ) {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classharvest__activity__actor.html">harvest_activity_actor</a>( examp, auto_forage ) );</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="afe3889118d41632c78020ec2be310696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3889118d41632c78020ec2be310696">&#9670;&nbsp;</a></span>harvest_ter_nectar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvest_ter_nectar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02403">2403</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;{</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                       ( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;all&quot;</span> ||</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;bushes&quot;</span> ||</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;trees&quot;</span> );</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !<a class="code" href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a>( you, examp ) ) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    }</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classharvest__activity__actor.html">harvest_activity_actor</a>( examp, auto_forage ) );</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="a776ee399c8ac58e562ff916e3a8ac7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a776ee399c8ac58e562ff916e3a8ac7d0">&#9670;&nbsp;</a></span>harvestable_now()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::harvestable_now </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00328">328</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">harvest_id</a> hid = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ac78d19d421262da398e2873d7b173b76">get_harvest</a>( examp );</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> !hid-&gt;<a class="code" href="classharvest__list.html#a092b5fbd75286999a487c7c247b5bb0f">is_null</a>() &amp;&amp; !hid-&gt;<a class="code" href="classharvest__list.html#ac79881f0a4f6b520b4f848397b52a390">empty</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="ttc" id="aclassharvest__list_html_a092b5fbd75286999a487c7c247b5bb0f"><div class="ttname"><a href="classharvest__list.html#a092b5fbd75286999a487c7c247b5bb0f">harvest_list::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="harvest_8cpp_source.html#l00086">harvest.cpp:86</a></div></div>
<div class="ttc" id="aclassharvest__list_html_ac79881f0a4f6b520b4f848397b52a390"><div class="ttname"><a href="classharvest__list.html#ac79881f0a4f6b520b4f848397b52a390">harvest_list::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="harvest_8h_source.html#l00113">harvest.h:113</a></div></div>
<div class="ttc" id="aclassmap_html_ac78d19d421262da398e2873d7b173b76"><div class="ttname"><a href="classmap.html#ac78d19d421262da398e2873d7b173b76">map::get_harvest</a></div><div class="ttdeci">const harvest_id &amp; get_harvest(const tripoint &amp;p) const</div><div class="ttdoc">Returns the full harvest list, for spawning.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02157">map.cpp:2157</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="harvest_8h_source.html#l00113">harvest_list::empty()</a>, <a class="el" href="map_8cpp_source.html#l02157">map::get_harvest()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, and <a class="el" href="harvest_8cpp_source.html#l00086">harvest_list::is_null()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a5cbc3e26e68c4cdf239d71548c2677cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cbc3e26e68c4cdf239d71548c2677cd">&#9670;&nbsp;</a></span>harvested_plant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::harvested_plant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Only harvest a plant once per season. </p>
<p>Display message and call <a class="el" href="namespaceiexamine.html#a4b01dcde847b9429cc2d968d955f93e8" title="Nothing player can interact with here.">iexamine::none</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02429">2429</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;{</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nothing can be harvested from this plant in current season&quot;</span> ) );</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <a class="code" href="namespaceiexamine.html#a4b01dcde847b9429cc2d968d955f93e8">iexamine::none</a>( you, examp );</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div>
<div class="ttc" id="anamespaceiexamine_html_a4b01dcde847b9429cc2d968d955f93e8"><div class="ttname"><a href="namespaceiexamine.html#a4b01dcde847b9429cc2d968d955f93e8">iexamine::none</a></div><div class="ttdeci">void none(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">Nothing player can interact with here.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00306">iexamine.cpp:306</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, and <a class="el" href="iexamine_8cpp_source.html#l00306">none()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a8f416fad095ebdced5c867b735550fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f416fad095ebdced5c867b735550fa4">&#9670;&nbsp;</a></span>has_keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::has_keg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether there is a keg on the map that can be filled via <a class="el" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04027">4027</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;{</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) &gt; 0_ml;</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a59732e8d3f1cbbbe942381c75cff885f"><div class="ttname"><a href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a></div><div class="ttdeci">static units::volume get_keg_capacity(const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04018">iexamine.cpp:4018</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l04018">get_keg_capacity()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, and <a class="el" href="handle__liquid_8cpp_source.html#l00168">liquid_handler::get_liquid_target()</a>.</p>

</div>
</div>
<a id="a9d6ca394ee59a2aa33376ca583d07d02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d6ca394ee59a2aa33376ca583d07d02">&#9670;&nbsp;</a></span>intercom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::intercom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01472">1472</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;{</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keyword">const</span> std::vector&lt;npc *&gt; intercom_npcs = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_npcs_if( [examp]( <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp; guy ) {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="keywordflow">return</span> guy.<a class="code" href="classnpc.html#a2d47ff8926fed9a85d1168e7e514f871">myclass</a> == <a class="code" href="iexamine_8cpp.html#a34d559235cb85d041fdf49b840aa2b41">NC_ROBOFAC_INTERCOM</a> &amp;&amp; <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( guy.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), examp ) &lt; 10;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    } );</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span>( intercom_npcs.empty() ) {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No one responds.&quot;</span> ) );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <span class="comment">// TODO: This needs to be converted a talker_console or something</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().<a class="code" href="classavatar.html#a2d69f2df17dc25330b825a2e6a1aa93b">talk_to</a>( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( *intercom_npcs.front() ), <span class="keyword">false</span> );</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassavatar_html_a2d69f2df17dc25330b825a2e6a1aa93b"><div class="ttname"><a href="classavatar.html#a2d69f2df17dc25330b825a2e6a1aa93b">avatar::talk_to</a></div><div class="ttdeci">void talk_to(std::unique_ptr&lt; talker &gt; talk_with, bool radio_contact=false, bool is_computer=false, bool is_not_conversation=false)</div><div class="ttdef"><b>Definition:</b> <a href="npctalk_8cpp_source.html#l01358">npctalk.cpp:1358</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_a2d47ff8926fed9a85d1168e7e514f871"><div class="ttname"><a href="classnpc.html#a2d47ff8926fed9a85d1168e7e514f871">npc::myclass</a></div><div class="ttdeci">npc_class_id myclass</div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l01329">npc.h:1329</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a34d559235cb85d041fdf49b840aa2b41"><div class="ttname"><a href="iexamine_8cpp.html#a34d559235cb85d041fdf49b840aa2b41">NC_ROBOFAC_INTERCOM</a></div><div class="ttdeci">static const npc_class_id NC_ROBOFAC_INTERCOM(&quot;NC_ROBOFAC_INTERCOM&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="npc_8h_source.html#l01329">npc::myclass</a>, <a class="el" href="iexamine_8cpp.html#a34d559235cb85d041fdf49b840aa2b41">NC_ROBOFAC_INTERCOM</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, and <a class="el" href="npctalk_8cpp_source.html#l01358">avatar::talk_to()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l01410">cardreader_robofac()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a371ca377784ccb87e3d8bf4e3da17c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a371ca377784ccb87e3d8bf4e3da17c21">&#9670;&nbsp;</a></span>invalid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::invalid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07322">7322</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;{</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Called invalid iexamine function on %s!&quot;</span>, <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().tername( examp ) );</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ae1b5f8bc538c251b5038acf2525e1b52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1b5f8bc538c251b5038acf2525e1b52">&#9670;&nbsp;</a></span>keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::keg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04058">4058</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;{</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;    <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <span class="keyword">const</span> std::string keg_name = here.<a class="code" href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">name</a>( examp );</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> keg_cap = <a class="code" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( examp );</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160; </div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_container_with_liquid = <a class="code" href="classmap__cursor.html">map_cursor</a>( examp ).<a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;        <span class="keywordflow">return</span> !it.<a class="code" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() &amp;&amp; it.<a class="code" href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">can_unload_liquid</a>();</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    } );</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> liquid_present = <a class="code" href="classmap__cursor.html">map_cursor</a>( examp ).<a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">made_of_from_type</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> );</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    } );</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160; </div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordflow">if</span>( !liquid_present || has_container_with_liquid ) {</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is empty.&quot;</span> ) );</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        <span class="comment">// Get list of all drinks</span></div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;        <span class="keyword">auto</span> drinks_inv = you.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;            <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> );</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;        } );</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        <span class="keywordflow">if</span>( drinks_inv.empty() ) {</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any drinks to fill the %s with.&quot;</span> ), keg_name );</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;        }</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;        <span class="comment">// Make lists of unique drinks... about third time we do this, maybe we ought to make a function next time</span></div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;        std::vector&lt;itype_id&gt; drink_types;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        std::vector&lt;std::string&gt; drink_names;</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;        std::vector&lt;double&gt; drink_rot;</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;        std::vector&lt;time_point&gt; drink_bday;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *&amp;drink : drinks_inv ) {</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;            <span class="keyword">auto</span> found_drink = std::find( drink_types.begin(), drink_types.end(), drink-&gt;typeId() );</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;            <span class="keywordflow">if</span>( found_drink == drink_types.end() ) {</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                drink_types.push_back( drink-&gt;typeId() );</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                drink_names.push_back( <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink-&gt;typeId() ) );</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                drink_rot.push_back( drink-&gt;get_relative_rot() );</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                drink_bday.push_back( drink-&gt;birthday() );</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;                <span class="keyword">auto</span> rot_iter = std::next( drink_rot.begin(), std::distance( drink_types.begin(), found_drink ) );</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                <span class="comment">// Yep, worst rot wins.</span></div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                *rot_iter = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( *rot_iter, drink-&gt;get_relative_rot() );</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;            }</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;        }</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;        <span class="comment">// Choose drink to store in keg from list</span></div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;        <span class="keywordtype">int</span> drink_index = 0;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;        <span class="keywordflow">if</span>( drink_types.size() &gt; 1 ) {</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;            drink_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Store which drink?&quot;</span> ), drink_names );</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;            <span class="keywordflow">if</span>( drink_index &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( drink_index ) &gt;= drink_types.size() ) {</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;                drink_index = -1;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;            }</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">//Only one drink type was in inventory, so it&#39;s automatically used</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fill the %1$s with %2$s?&quot;</span> ),</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                           keg_name, drink_names[0].c_str() ) ) {</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                drink_index = -1;</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;            }</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;        }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;        <span class="keywordflow">if</span>( drink_index &lt; 0 ) {</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;        }</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160; </div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;        <span class="comment">// First empty the keg of foreign objects</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;        <a class="code" href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a>( examp );</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160; </div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;        <span class="comment">//Store liquid chosen in the keg</span></div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> drink_type = drink_types[ drink_index ];</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;        <span class="keywordtype">int</span> charges_held = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( drink_type );</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;        <a class="code" href="classitem.html">item</a> drink( drink_type, drink_bday[ drink_index ] );</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;        drink.set_relative_rot( drink_rot[ drink_index ] );</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;        drink.charges = 0;</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;        <span class="keywordtype">bool</span> keg_full = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;        <a class="code" href="classCharacter.html">Character</a> &amp;player_character = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>();</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; charges_held &amp;&amp; !keg_full; i++ ) {</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;            player_character.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( drink.typeId(), 1 );</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;            drink.charges++;</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;            keg_full = drink.volume() &gt;= keg_cap;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        }</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;        <span class="keywordflow">if</span>( keg_full ) {</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You completely fill the %1$s with %2$s.&quot;</span> ),</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;                     keg_name, <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink_type ) );</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fill the %1$s with %2$s.&quot;</span> ),</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;                     keg_name, <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink_type ) );</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;        }</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;        here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, drink );</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        <span class="comment">// First empty the keg of foreign objects</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;        <a class="code" href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a>( examp );</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160; </div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;drink = items.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;        <span class="keyword">const</span> std::string drink_tname = drink.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;        <span class="keyword">const</span> std::string drink_nname = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( drink.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;        <span class="keyword">enum</span> <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> {</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;            DISPENSE,</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;            HAVE_A_DRINK,</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;            REFILL,</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;        };</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;        <a class="code" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <span class="comment">//~ $1 - furniture name, $2 - liquid name, $3 - liquid charges, $4 - liquid volume, $5 - liquid capacity</span></div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;        selectmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%1$s with %2$s (%3$d)    %4$s / %5$s&quot;</span> ),</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;                                         <a class="code" href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a>( keg_name ), drink_tname, drink.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>,</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                                         <a class="code" href="units__utility_8cpp.html#a4c4801d2b2367ff07a77eb03e6c91b3d">vol_to_string</a>( drink.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>(), <span class="keyword">true</span>, <span class="keyword">true</span> ), <a class="code" href="units__utility_8cpp.html#a4c4801d2b2367ff07a77eb03e6c91b3d">vol_to_string</a>( keg_cap, <span class="keyword">true</span>, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( DISPENSE, drink.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ), <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dispense or dump %s&quot;</span> ), drink_tname );</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( HAVE_A_DRINK, drink.<a class="code" href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">is_food</a>() &amp;&amp; drink.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ),</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;                             <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Have a drink&quot;</span> ) );</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;        selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( REFILL, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Refill&quot;</span> ) );</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        selectmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160; </div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        <span class="keywordflow">switch</span>( selectmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;            <span class="keywordflow">case</span> DISPENSE:</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="namespaceliquid__handler.html#a29b260212d0cb959946f8a8094ce75f9">liquid_handler::handle_liquid_from_ground</a>( items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(), examp ) ) {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %1$s from the %2$s.&quot;</span> ),</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                             drink_tname, keg_name );</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                }</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160; </div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            <span class="keywordflow">case</span> HAVE_A_DRINK:</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">can_consume_as_is</a>( drink ) ) {</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                    <span class="keywordflow">return</span>; <span class="comment">// They didn&#39;t actually drink</span></div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;                }</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;                you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classconsume__activity__actor.html">consume_activity_actor</a>( drink ) );</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                drink.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>--;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;                <span class="keywordflow">if</span>( drink.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You squeeze the last drops of %1$s from the %2$s.&quot;</span> ),</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;                             drink_tname, keg_name );</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;                    here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;                }</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160; </div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;            <span class="keywordflow">case</span> REFILL: {</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;                <span class="keywordflow">if</span>( drink.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &gt;= keg_cap ) {</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is completely full.&quot;</span> ), keg_name );</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;                }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;                <span class="keywordtype">int</span> charges_held = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( drink.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;                <span class="keywordflow">if</span>( charges_held &lt; 1 ) {</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any %1$s to fill the %2$s with.&quot;</span> ),</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;                             drink_nname, keg_name );</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;                }</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;                <a class="code" href="classitem.html">item</a> tmp( drink.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, charges_held );</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                <a class="code" href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">pour_into_keg</a>( examp, tmp );</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;                you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( drink.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), charges_held - tmp.charges );</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fill the %1$s with %2$s.&quot;</span> ), keg_name, drink_nname );</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;            }</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160; </div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;        }</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    }</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a881167b8345723b21ff8c7e54781dcd5"><div class="ttname"><a href="classCharacter.html#a881167b8345723b21ff8c7e54781dcd5">Character::can_consume_as_is</a></div><div class="ttdeci">bool can_consume_as_is(const item &amp;it) const</div><div class="ttdoc">Check whether the character can consume this very item.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01679">consumption.cpp:1679</a></div></div>
<div class="ttc" id="aclassitem_html_a54fe4917d343209ae2fdb9b163bd967a"><div class="ttname"><a href="classitem.html#a54fe4917d343209ae2fdb9b163bd967a">item::can_unload_liquid</a></div><div class="ttdeci">bool can_unload_liquid() const</div><div class="ttdoc">Returns true if any of the contents are not frozen or not empty if it's liquid.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09868">item.cpp:9868</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09853">item.cpp:9853</a></div></div>
<div class="ttc" id="aclassitem_html_aad45569fa1fdd99d602eabbbbca04f75"><div class="ttname"><a href="classitem.html#aad45569fa1fdd99d602eabbbbca04f75">item::is_food</a></div><div class="ttdeci">bool is_food() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09480">item.cpp:9480</a></div></div>
<div class="ttc" id="aclassitem_html_af486ddb23bd7e254cc07ef3ba1ba846d"><div class="ttname"><a href="classitem.html#af486ddb23bd7e254cc07ef3ba1ba846d">item::made_of_from_type</a></div><div class="ttdeci">bool made_of_from_type(phase_id phase) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09268">item.cpp:9268</a></div></div>
<div class="ttc" id="aclassmap__cursor_html"><div class="ttname"><a href="classmap__cursor.html">map_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8h_source.html#l00015">map_selector.h:16</a></div></div>
<div class="ttc" id="aclassmap_html_a148fb7ddc87ffb1da97dd33e0529c983"><div class="ttname"><a href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">map::name</a></div><div class="ttdeci">std::string name(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01684">map.cpp:1684</a></div></div>
<div class="ttc" id="aclassvisitable_html_abf24bf044bbf16def702fd78351fc46f"><div class="ttname"><a href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">visitable::has_item_with</a></div><div class="ttdeci">bool has_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00083">visitable.cpp:83</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8778e47a7cd8da1779330966216e12e1"><div class="ttname"><a href="iexamine_8cpp.html#a8778e47a7cd8da1779330966216e12e1">displace_items_except_one_liquid</a></div><div class="ttdeci">static void displace_items_except_one_liquid(const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04032">iexamine.cpp:4032</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a700893be2f824844fdc4b4ea4b2ee148"><div class="ttname"><a href="namespaceiexamine.html#a700893be2f824844fdc4b4ea4b2ee148">iexamine::pour_into_keg</a></div><div class="ttdeci">bool pour_into_keg(const tripoint &amp;pos, item &amp;liquid)</div><div class="ttdoc">Pour liquid into a keg (furniture) on the map.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04220">iexamine.cpp:4220</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a71e024973a8beccd4a228d00ebd9503a"><div class="ttname"><a href="output_8cpp.html#a71e024973a8beccd4a228d00ebd9503a">uppercase_first_letter</a></div><div class="ttdeci">std::string uppercase_first_letter(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02558">output.cpp:2558</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a4c4801d2b2367ff07a77eb03e6c91b3d"><div class="ttname"><a href="units__utility_8cpp.html#a4c4801d2b2367ff07a77eb03e6c91b3d">vol_to_string</a></div><div class="ttdeci">std::string vol_to_string(const units::volume &amp;vol, const bool compact, const bool remove_trailing_zeroes)</div><div class="ttdoc">convert a volume unit to a string readable by a human</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00301">units_utility.cpp:301</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="consumption_8cpp_source.html#l01679">Character::can_consume_as_is()</a>, <a class="el" href="item_8cpp_source.html#l09868">item::can_unload_liquid()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of()</a>, <a class="el" href="iexamine_8cpp_source.html#l04032">displace_items_except_one_liquid()</a>, <a class="el" href="iexamine_8cpp_source.html#l04018">get_keg_capacity()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00126">liquid_handler::handle_liquid_from_ground()</a>, <a class="el" href="visitable_8cpp_source.html#l00083">visitable::has_item_with()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="item_8cpp_source.html#l09853">item::is_container_empty()</a>, <a class="el" href="item_8cpp_source.html#l09480">item::is_food()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="item_8cpp_source.html#l09268">item::made_of_from_type()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="map_8cpp_source.html#l01684">map::name()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="iexamine_8cpp_source.html#l04220">pour_into_keg()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l07857">item::set_relative_rot()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="output_8cpp_source.html#l02558">uppercase_first_letter()</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, <a class="el" href="units__utility_8cpp_source.html#l00301">vol_to_string()</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="inventory_8cpp_source.html#l00520">inventory::form_from_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ac67d3d8d0386a332c30aa05b0bcd90b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac67d3d8d0386a332c30aa05b0bcd90b7">&#9670;&nbsp;</a></span>kiln_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::kiln_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Fabrication decreases loss when firing a kiln 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02883">2883</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;{</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_kiln_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_kiln_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">if</span>( cur_kiln_type == <a class="code" href="iexamine_8cpp.html#adde0eccbc7973e81d94f58232c3c2deb">furn_f_kiln_empty</a> ) {</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        next_kiln_type = <a class="code" href="iexamine_8cpp.html#accf8d014c822b8554040fbe20c0a1011">furn_f_kiln_full</a>;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_kiln_type == <a class="code" href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a> ) {</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        next_kiln_type = <a class="code" href="iexamine_8cpp.html#af25e9b974cbbeadf2178a38938e667e3">furn_f_kiln_metal_full</a>;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action kiln_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    }</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;material_id&gt; kilnable{ <a class="code" href="iexamine_8cpp.html#ae654fe1131eeb6f3e0fe9021a79a3f74">material_wood</a>, <a class="code" href="iexamine_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a> };</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordtype">bool</span> fuel_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        <span class="keywordflow">if</span>( i.typeId() == <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln already contains charcoal.&quot;</span> ) );</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove it before firing the kiln again.&quot;</span> ) );</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i.made_of_any( kilnable ) ) {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;            fuel_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln contains %s, which can&#39;t be made into charcoal!&quot;</span> ), i.tname( 1,</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                     <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    }</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160; </div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordflow">if</span>( !fuel_present ) {</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln is empty.  Fill it with wood or bone and try again.&quot;</span> ) );</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    }</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <span class="comment">// https://energypedia.info/wiki/Charcoal_Production</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="comment">// charcoal has about 25% of the density of wood, and wood pyrolysis produces about 10-15% charcoal by weight for a stone kiln.</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <span class="comment">// listed efficiency is for primitive or DIY production, industrial process in a metal kiln is more efficient at 20-25%</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="comment">// 100% efficient conversion would be 1kg wood = 0.25kg charcoal, 1:1 volume conversion</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="comment">// fabrication should help here as kiln design and how you stack the wood matter to a degree, though the impact is low overall</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="comment">// For a cruddy kiln (a pit with a rock chimney) assume 10-15% efficiency, depending on fabrication (40-60% wastage)</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="comment">// For a well made kiln (industrial-style metal kiln) assume 20-25% efficiency, depending on fabrication (0-20% wastage)</span><span class="comment"></span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;<span class="comment">    ///\EFFECT_FABRICATION decreases loss when firing a kiln</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">float</span> skill = you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> );</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordtype">int</span> loss = 0;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="comment">// if the current kiln is a metal one, use a more efficient conversion rate otherwise default to assuming it is a rock pit kiln</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="keywordflow">if</span>( cur_kiln_type == <a class="code" href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a> ) {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        loss = 20 - 2 * skill;</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        loss = 60 - 2 * skill;</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    }</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160; </div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        total_volume += i.volume();</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    }</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160; </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *char_type = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a> );</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="keywordtype">int</span> char_charges = char_type-&gt;<a class="code" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( ( 100 - loss ) * total_volume / 100 );</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="keywordflow">if</span>( char_charges &lt; 1 ) {</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The batch in this kiln is too small to yield any charcoal.&quot;</span> ) );</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    }</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( <a class="code" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln is ready to be fired, but you have no fire source.&quot;</span> ) );</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln contains %s %s of material, and is ready to be fired.&quot;</span> ),</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                 <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( total_volume ), <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() );</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fire the kiln?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        }</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160; </div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 );</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <a class="code" href="classitem.html">item</a> result( <span class="stringliteral">&quot;unfinished_charcoal&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    result.charges = char_charges;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, result );</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160; </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a> ) ) {</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        you.<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, 5, 10, 3_hours, 2_hours );</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        you.<a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a> );</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You happily light a fire in the charcoal kiln.&quot;</span> ) );</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fire the charcoal kiln.&quot;</span> ) );</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    }</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2725bcbfa9e92e0590930e6a8e35764c"><div class="ttname"><a href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">Character::rem_morale</a></div><div class="ttdeci">void rem_morale(const morale_type &amp;type, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00154">character_morale.cpp:154</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a512959ad2b35ea057f2fed5445fc23c4"><div class="ttname"><a href="iexamine_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a></div><div class="ttdeci">static const trait_id trait_PYROMANIA(&quot;PYROMANIA&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6c9d36f2ac7b8adb5b1055508b33ce80"><div class="ttname"><a href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a></div><div class="ttdeci">static const itype_id itype_unfinished_charcoal(&quot;unfinished_charcoal&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa5ffa4fd2e1363b9474c32c3a47a6df9"><div class="ttname"><a href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a></div><div class="ttdeci">static const itype_id itype_fire(&quot;fire&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa83f04c09d26764216682c3f99031335"><div class="ttname"><a href="iexamine_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a></div><div class="ttdeci">static const material_id material_bone(&quot;bone&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab59a154650bd3771bb30915bd559c7b6"><div class="ttname"><a href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a></div><div class="ttdeci">static const itype_id itype_charcoal(&quot;charcoal&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_accf8d014c822b8554040fbe20c0a1011"><div class="ttname"><a href="iexamine_8cpp.html#accf8d014c822b8554040fbe20c0a1011">furn_f_kiln_full</a></div><div class="ttdeci">static const furn_str_id furn_f_kiln_full(&quot;f_kiln_full&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_adde0eccbc7973e81d94f58232c3c2deb"><div class="ttname"><a href="iexamine_8cpp.html#adde0eccbc7973e81d94f58232c3c2deb">furn_f_kiln_empty</a></div><div class="ttdeci">static const furn_str_id furn_f_kiln_empty(&quot;f_kiln_empty&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae3e86d913019ce0b3729b7e14b3fc1ea"><div class="ttname"><a href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a></div><div class="ttdeci">static const furn_str_id furn_f_kiln_metal_empty(&quot;f_kiln_metal_empty&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae654fe1131eeb6f3e0fe9021a79a3f74"><div class="ttname"><a href="iexamine_8cpp.html#ae654fe1131eeb6f3e0fe9021a79a3f74">material_wood</a></div><div class="ttdeci">static const material_id material_wood(&quot;wood&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af25e9b974cbbeadf2178a38938e667e3"><div class="ttname"><a href="iexamine_8cpp.html#af25e9b974cbbeadf2178a38938e667e3">furn_f_kiln_metal_full</a></div><div class="ttdeci">static const furn_str_id furn_f_kiln_metal_full(&quot;f_kiln_metal_full&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a7a7fa39cff1d7efe58e013c63b7f0ee6"><div class="ttname"><a href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_STARTFIRE(&quot;morale_pyromania_startfire&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae932ffaaef9c3a4092fc8727141405bf"><div class="ttname"><a href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_NOFIRE(&quot;morale_pyromania_nofire&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="itype_8cpp_source.html#l00149">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="output_8cpp_source.html#l03231">format_volume()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#adde0eccbc7973e81d94f58232c3c2deb">furn_f_kiln_empty</a>, <a class="el" href="iexamine_8cpp.html#accf8d014c822b8554040fbe20c0a1011">furn_f_kiln_full</a>, <a class="el" href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a>, <a class="el" href="iexamine_8cpp.html#af25e9b974cbbeadf2178a38938e667e3">furn_f_kiln_metal_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="iexamine_8cpp.html#aa83f04c09d26764216682c3f99031335">material_bone</a>, <a class="el" href="iexamine_8cpp.html#ae654fe1131eeb6f3e0fe9021a79a3f74">material_wood</a>, <a class="el" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a>, <a class="el" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="character__morale_8cpp_source.html#l00154">Character::rem_morale()</a>, <a class="el" href="iexamine_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="el" href="iexamine_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00096">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="aff025167fabe1e72086f5dd616678c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff025167fabe1e72086f5dd616678c93">&#9670;&nbsp;</a></span>kiln_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::kiln_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02976">2976</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;{</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_kiln_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_kiln_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="keywordflow">if</span>( cur_kiln_type == <a class="code" href="iexamine_8cpp.html#accf8d014c822b8554040fbe20c0a1011">furn_f_kiln_full</a> ) {</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        next_kiln_type = <a class="code" href="iexamine_8cpp.html#adde0eccbc7973e81d94f58232c3c2deb">furn_f_kiln_empty</a>;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_kiln_type == <a class="code" href="iexamine_8cpp.html#af25e9b974cbbeadf2178a38938e667e3">furn_f_kiln_metal_full</a> ) {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        next_kiln_type = <a class="code" href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action kiln_full, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    }</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This kiln is empty…&quot;</span> ) );</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    }</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *char_type = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> );</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a charcoal kiln there.&quot;</span> ) );</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> firing_time =</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        24_hours; <span class="comment">// internet guides claim about one day for a fairly large pot</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> time_left = firing_time - items.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        <span class="keywordtype">int</span> hours = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <span class="keywordtype">int</span> minutes = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        <span class="keywordflow">if</span>( minutes &gt; 60 ) {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish burning in about %d hour.&quot;</span>,</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;                                <span class="stringliteral">&quot;It will finish burning in about %d hours.&quot;</span>,</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;                                hours ), hours );</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes &gt; 30 ) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will finish burning in less than an hour.&quot;</span> ) );</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It should take about %d minute to finish burning.&quot;</span>,</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;                                <span class="stringliteral">&quot;It should take about %d minutes to finish burning.&quot;</span>,</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;                                minutes ), minutes );</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;        }</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    }</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160; </div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="comment">// Burn stuff that should get charred, leave out the rest</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ) {</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">if</span>( item_it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a> || item_it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) {</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            total_volume += item_it-&gt;volume();</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            item_it = items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            item_it++;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        }</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    }</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160; </div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <a class="code" href="classitem.html">item</a> result( <span class="stringliteral">&quot;charcoal&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    result.charges = char_type-&gt;<a class="code" href="structitype.html#a437edaf34e4c8b5bd688005360507b7d">charges_per_volume</a>( total_volume );</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, result );</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_kiln_type );</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It has finished burning, yielding %d charcoal.&quot;</span> ), result.charges );</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="itype_8cpp_source.html#l00149">itype::charges_per_volume()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#adde0eccbc7973e81d94f58232c3c2deb">furn_f_kiln_empty</a>, <a class="el" href="iexamine_8cpp.html#accf8d014c822b8554040fbe20c0a1011">furn_f_kiln_full</a>, <a class="el" href="iexamine_8cpp.html#ae3e86d913019ce0b3729b7e14b3fc1ea">furn_f_kiln_metal_empty</a>, <a class="el" href="iexamine_8cpp.html#af25e9b974cbbeadf2178a38938e667e3">furn_f_kiln_metal_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#a6c9d36f2ac7b8adb5b1055508b33ce80">itype_unfinished_charcoal</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a579957168f59de1f52f4c4a03383093b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579957168f59de1f52f4c4a03383093b">&#9670;&nbsp;</a></span>ledge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::ledge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05378">5378</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;{</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;    <span class="keyword">enum</span> ledge_actions {</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;        ledge_peek_down = 1,</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;        ledge_jump_across,</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;        ledge_fall_down,</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;        ledge_examine_furniture_below,</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;        ledge_glide,</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    };</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160; </div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> jump_target( you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + 2 * <a class="code" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() ),</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;                          you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + 2 * <a class="code" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( examp.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() ),</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;                          you.<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() );</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    <span class="keywordtype">bool</span> jump_target_valid = ( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( jump_target ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structter__t.html#ac732273f5e5c2f3298182003c032f871">trap</a> != <a class="code" href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a> );</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;    <a class="code" href="structpoint.html">point</a> jd( examp.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() + <a class="code" href="structpoint.html">point</a>( -you.<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>(), -you.<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() ) );</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    <span class="keywordtype">int</span> jump_direction = 0;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160; </div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;    <span class="keywordflow">if</span>( jd.y &gt; 0 &amp;&amp; jd.x == 0 ) {</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;        jump_direction = 0; <span class="comment">//south</span></div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y &gt; 0 &amp;&amp; jd.x &lt; 0 ) {</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;        jump_direction = 1; <span class="comment">//southwest</span></div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y == 0 &amp;&amp; jd.x &lt; 0 ) {</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;        jump_direction = 2; <span class="comment">//west</span></div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y &lt; 0 &amp;&amp; jd.x &lt; 0 ) {</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;        jump_direction = 3; <span class="comment">//northwest</span></div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y &lt; 0 &amp;&amp; jd.x == 0 ) {</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;        jump_direction = 4; <span class="comment">//north</span></div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y &lt; 0 &amp;&amp; jd.x &gt; 0 ) {</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;        jump_direction = 5; <span class="comment">//northeast</span></div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y == 0 &amp;&amp; jd.x &gt; 0 ) {</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;        jump_direction = 6; <span class="comment">//east</span></div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( jd.y &gt; 0 &amp;&amp; jd.x &gt; 0 ) {</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;        jump_direction = 7; <span class="comment">//southeast</span></div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    }</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160; </div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> just_below = examp;</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;    just_below.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>--;</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160; </div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;    <a class="code" href="classuilist.html">uilist</a> cmenu;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;    cmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is a ledge here.  What do you want to do?&quot;</span> );</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160; </div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    <span class="comment">// NOTE this menu is merged with the climb down menu, manage keys carefully.</span></div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;    cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ledge_peek_down, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Peek down.&quot;</span> ) );</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;climb_down_menu_gen( examp, cmenu );</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a09ef3e8c2e6664e3ed98d1e1e18a4b4f">has_flag_furn</a>( <span class="stringliteral">&quot;EXAMINE_FROM_ABOVE&quot;</span>, just_below ) ) {</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;        cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ledge_examine_furniture_below, <span class="keyword">true</span>, <span class="charliteral">&#39;e&#39;</span>,</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reach for the %s below.&quot;</span> ), here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( just_below ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;    }</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;    cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ledge_jump_across, jump_target_valid, <span class="charliteral">&#39;j&#39;</span>,</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;                    ( jump_target_valid ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Jump across.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Can&#39;t jump across (need a small gap).&quot;</span> ) ) );</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;    cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ledge_fall_down, <span class="keyword">true</span>, <span class="charliteral">&#39;f&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fall down.&quot;</span> ) );</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iexamine_8cpp.html#a60af1f1f9d206bee48e52592bbec084b">json_flag_GLIDE</a> ) || you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iexamine_8cpp.html#ac70e2b1d31968d447e642a66dcd95aa8">json_flag_WING_GLIDE</a> ) ||</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;        you.<a class="code" href="classCharacter.html#a135c74ba0feaaf89d8c2b0a96bdf1197">has_bodypart_with_flag</a>( <a class="code" href="iexamine_8cpp.html#a67abb0e2895a80aecf1518b23057de6a">json_flag_WING_ARM</a> ) ) {</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;        cmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ledge_glide, you.<a class="code" href="classCharacter.html#ab044dc6798f133af23528ac36f3768b3">can_fly</a>(), <span class="charliteral">&#39;g&#39;</span>,</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;                        ( you.<a class="code" href="classCharacter.html#ab044dc6798f133af23528ac36f3768b3">can_fly</a>() ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Glide away.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t glide in your current state&quot;</span> ) ) );</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;    }</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;    cmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160; </div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160; </div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;climb_down_menu_pick( examp, cmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) ) {</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;        <span class="comment">// This branch means the player chose some option generated by the climb menu.</span></div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;    }</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    <span class="keywordflow">switch</span>( cmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;        <span class="keywordflow">case</span> ledge_jump_across: {</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;            <span class="comment">// If player is grabbed, trapped, or somehow otherwise movement-impeded, first try to break free</span></div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">move_effects</a>( <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;            }</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160; </div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;            <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() &lt; 4 ) {</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too weak to jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( 100 * you.<a class="code" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() / you.<a class="code" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() &gt; 25 ) {</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too burdened to jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( examp, jump_target, <span class="keyword">false</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot jump over an obstacle - something is blocking the way.&quot;</span> ) );</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( jump_target ) ) {</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot jump over an obstacle - there is %s blocking the way.&quot;</span> ),</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;                         creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( jump_target )-&gt;disp_name() );</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !jump_target_valid ) {</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are not going to jump over an obstacle only to fall down.&quot;</span> ) );</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You jump over an obstacle.&quot;</span> ) );</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;                you.<a class="code" href="classCharacter.html#af987a23fb823861daf5d77051e3dc60f">set_activity_level</a>( <a class="code" href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a> );</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;                <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_player( jump_target );</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;            }</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;        }</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;        <span class="comment">/*case ledge_climb_down: {</span></div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;<span class="comment">            g-&gt;climb_down( examp );</span></div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;<span class="comment">            break;</span></div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;<span class="comment">        }*/</span></div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;        <span class="keywordflow">case</span> ledge_peek_down: {</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;            <span class="comment">// Peek</span></div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> where = examp;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a> = examp;</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;            <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a>.z--;</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;            <span class="keywordflow">while</span>( here.<a class="code" href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">valid_move</a>( where, below, <span class="keyword">false</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;                where.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>--;</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;                <a class="code" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a>.z--;</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;            }</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160; </div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> height = examp.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - where.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a78aded2c26271fa1d7c876350609530f">debugmode::DF_IEXAMINE</a>, <span class="stringliteral">&quot;Ledge height %d&quot;</span>, height );</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;            <span class="keywordflow">if</span>( height == 0 ) {</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t peek down there.&quot;</span> ) );</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;            }</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;peek( where );</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You peek over the ledge.&quot;</span> ) );</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;        }</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;        <span class="keywordflow">case</span> ledge_examine_furniture_below: {</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;            <span class="comment">// Examine the furniture below.</span></div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;            here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( just_below ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a6149132d4c5b7e1e15c36e5735207142">examine</a>( you, just_below );</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;        }</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;        <span class="comment">/*case ledge_cling_down: {</span></div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;<span class="comment">            // If player is grabbed, trapped, or somehow otherwise movement-impeded, first try to break free</span></div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;<span class="comment">            if( !you.move_effects( false ) ) {</span></div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;<span class="comment">                you.mod_moves( -to_moves&lt;int&gt;( 1_seconds ) );</span></div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;<span class="comment">                return;</span></div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;<span class="comment">            }</span></div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;<span class="comment">            if( !here.valid_move( you.pos(), examp, false, true ) ) {</span></div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;<span class="comment">                // Covered with something</span></div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;<span class="comment">                return;</span></div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;<span class="comment">            } else {</span></div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;<span class="comment">                you.setpos( examp );</span></div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;<span class="comment">                g-&gt;vertical_move( -1, false );</span></div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;<span class="comment">                if( here.has_flag( ter_furn_flag::TFLAG_DEEP_WATER, you.pos() ) ) {</span></div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;<span class="comment">                    you.set_underwater( true );</span></div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;<span class="comment">                    g-&gt;water_affect_items( you );</span></div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;<span class="comment">                    you.add_msg_if_player( _( &quot;You crawl down and dive underwater.&quot; ) );</span></div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;<span class="comment">                }</span></div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;<span class="comment">            }</span></div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;<span class="comment">            break;</span></div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;<span class="comment">        }*/</span></div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;        <span class="keywordflow">case</span> ledge_glide: {</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;            <span class="keywordtype">int</span> glide_distance = 5;</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;            <span class="keyword">const</span> <a class="code" href="classweather__manager.html">weather_manager</a> &amp;<a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a> = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>();</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You soar away from the ledge.&quot;</span> ) );</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;            <span class="keywordtype">int</span> angledifference = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.winddirection - jump_direction * 45 );</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;            <span class="comment">// Handle cases where the difference wraps around due to compass directions</span></div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;            angledifference = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( angledifference, 360 - angledifference );</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;            <span class="keywordflow">if</span>( angledifference &lt;= 45 &amp;&amp; weather.windspeed &gt;= 12 ) {</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your glide is aided by a tailwind.&quot;</span> ) );</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;                glide_distance += 1;</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;            }</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;            <span class="comment">// Check if the directions are greater than 135 degrees apart</span></div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( angledifference &gt;= 135 &amp;&amp; <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.windspeed &gt;= 12 ) {</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your glide is hindered by a headwind.&quot;</span> ) );</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;                glide_distance -= 1;</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;            }</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;            <span class="keywordflow">if</span>( jump_direction == 1 || jump_direction == 3 || jump_direction == 5 || jump_direction == 7 ) {</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;                glide_distance = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( 0.7 * glide_distance );</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;            }</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;            you.<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#ae8ce7a37a82a161735e383882ee7b3c0">grab</a>( <a class="code" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a> );</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;            <a class="code" href="classglide__activity__actor.html">glide_activity_actor</a> glide( &amp;you, jump_direction, glide_distance );</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;            you.<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iexamine_8cpp.html#aa3320a370fe1f7f1cf6e14918ca20358">effect_bouldering</a> );</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( glide );</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;            you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iexamine_8cpp.html#ae4f83c0deabe9fab8941ec2c28162eff">effect_gliding</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;            you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( examp );</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;        }</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;        <span class="keywordflow">case</span> ledge_fall_down: {</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Climbing might be safer.  Really fall from the ledge?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;                <span class="comment">// If player is grabbed, trapped, or somehow otherwise movement-impeded, first try to break free</span></div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;                <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a37772343c5d5a20510bafe1890a5a839">move_effects</a>( <span class="keyword">false</span> ) ) {</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;                }</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;                <span class="comment">// Step into open air, then fall...</span></div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;                <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">has_effect_with_flag</a>( <a class="code" href="iexamine_8cpp.html#a66258a732cd5dd5923520688b6e06a58">json_flag_LEVITATION</a> ) ) {</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;                    you.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iexamine_8cpp.html#a8e040e719c855475d4eeca27443fecfb">effect_slow_descent</a>, 1_seconds, <span class="keyword">false</span> );</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;                }</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;                you.<a class="code" href="classCreature.html#ac16dcdb688f6f47c594c98c83528a670">setpos</a>( examp );</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;                you.<a class="code" href="classCharacter.html#a69c0c59b49b3dad403a8aa428f5ff25c">gravity_check</a>();</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;                <span class="comment">// Just to highlight the trepidation</span></div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You decided to step back from the ledge.&quot;</span> ) );</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;            }</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;        }</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You decided to step back from the ledge.&quot;</span> ) );</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;    }</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0bdec852c8280a1cb4bb5e45e14057b5"><div class="ttname"><a href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">Character::weight_capacity</a></div><div class="ttdeci">units::mass weight_capacity() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03197">character.cpp:3197</a></div></div>
<div class="ttc" id="aclassCharacter_html_a135c74ba0feaaf89d8c2b0a96bdf1197"><div class="ttname"><a href="classCharacter.html#a135c74ba0feaaf89d8c2b0a96bdf1197">Character::has_bodypart_with_flag</a></div><div class="ttdeci">bool has_bodypart_with_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if the player has any bodypart with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11915">character.cpp:11915</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5929e955c11ee6c749447472df7c774d"><div class="ttname"><a href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">Character::weight_carried</a></div><div class="ttdeci">units::mass weight_carried() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03088">character.cpp:3088</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04127">character.cpp:4127</a></div></div>
<div class="ttc" id="aclassCharacter_html_a69c0c59b49b3dad403a8aa428f5ff25c"><div class="ttname"><a href="classCharacter.html#a69c0c59b49b3dad403a8aa428f5ff25c">Character::gravity_check</a></div><div class="ttdeci">void gravity_check()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11176">character.cpp:11176</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaaec0279242f05b51af5c8b7bb416bb1"><div class="ttname"><a href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">Character::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if player has a trait, bionic, effect, bodypart, or martial arts buff with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11967">character.cpp:11967</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab044dc6798f133af23528ac36f3768b3"><div class="ttname"><a href="classCharacter.html#ab044dc6798f133af23528ac36f3768b3">Character::can_fly</a></div><div class="ttdeci">bool can_fly()</div><div class="ttdoc">Checks to see if the character is able to use their wings properly.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12700">character.cpp:12700</a></div></div>
<div class="ttc" id="aclassCharacter_html_af987a23fb823861daf5d77051e3dc60f"><div class="ttname"><a href="classCharacter.html#af987a23fb823861daf5d77051e3dc60f">Character::set_activity_level</a></div><div class="ttdeci">void set_activity_level(float new_level)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06547">character.cpp:6547</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_a88c28bc08aa3e0d6fa1b187cee97d1c4"><div class="ttname"><a href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">Creature::posz</a></div><div class="ttdeci">int posz() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00317">creature.h:317</a></div></div>
<div class="ttc" id="aclassCreature_html_a9f0365208b65ab1c45d23f03f402f491"><div class="ttname"><a href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">Creature::posy</a></div><div class="ttdeci">int posy() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00314">creature.h:314</a></div></div>
<div class="ttc" id="aclassCreature_html_aecea7d852ffba499ec12350c95340b9d"><div class="ttname"><a href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">Creature::posx</a></div><div class="ttdeci">int posx() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00311">creature.h:311</a></div></div>
<div class="ttc" id="aclassCreature_html_aed2af9ad3e8abd06b3c3c4f1adaf607e"><div class="ttname"><a href="classCreature.html#aed2af9ad3e8abd06b3c3c4f1adaf607e">Creature::has_effect_with_flag</a></div><div class="ttdeci">bool has_effect_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has any effect with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01792">creature.cpp:1792</a></div></div>
<div class="ttc" id="aclassavatar_html_ae8ce7a37a82a161735e383882ee7b3c0"><div class="ttname"><a href="classavatar.html#ae8ce7a37a82a161735e383882ee7b3c0">avatar::grab</a></div><div class="ttdeci">void grab(object_type grab_type, const tripoint &amp;grab_point=tripoint_zero)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00699">avatar.cpp:699</a></div></div>
<div class="ttc" id="aclassglide__activity__actor_html"><div class="ttname"><a href="classglide__activity__actor.html">glide_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00353">activity_actor_definitions.h:354</a></div></div>
<div class="ttc" id="aclassmap_html_a3188771064ca49d4798c6a80bfad0fcd"><div class="ttname"><a href="classmap.html#a3188771064ca49d4798c6a80bfad0fcd">map::valid_move</a></div><div class="ttdeci">bool valid_move(const tripoint &amp;from, const tripoint &amp;to, bool bash=false, bool flying=false, bool via_ramp=false) const</div><div class="ttdoc">Returns true if a creature could walk from from to to in one step.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02542">map.cpp:2542</a></div></div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00198">weather.h:199</a></div></div>
<div class="ttc" id="acube__direction_8h_html_aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977"><div class="ttname"><a href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">cube_direction::below</a></div><div class="ttdeci">@ below</div></div>
<div class="ttc" id="aenums_8h_html_a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">object_type::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00010">enums.h:10</a></div></div>
<div class="ttc" id="agame_8cpp_html_a20e1e24b746d8844d2e554086ba3b3bb"><div class="ttname"><a href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13866">game.cpp:13866</a></div></div>
<div class="ttc" id="agame__constants_8h_html_abb5fc20f9a59bdfcb7319f2b856a9ab9"><div class="ttname"><a href="game__constants_8h.html#abb5fc20f9a59bdfcb7319f2b856a9ab9">BRISK_EXERCISE</a></div><div class="ttdeci">constexpr float BRISK_EXERCISE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00184">game_constants.h:184</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a60af1f1f9d206bee48e52592bbec084b"><div class="ttname"><a href="iexamine_8cpp.html#a60af1f1f9d206bee48e52592bbec084b">json_flag_GLIDE</a></div><div class="ttdeci">static const json_character_flag json_flag_GLIDE(&quot;GLIDE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a66258a732cd5dd5923520688b6e06a58"><div class="ttname"><a href="iexamine_8cpp.html#a66258a732cd5dd5923520688b6e06a58">json_flag_LEVITATION</a></div><div class="ttdeci">static const json_character_flag json_flag_LEVITATION(&quot;LEVITATION&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a67abb0e2895a80aecf1518b23057de6a"><div class="ttname"><a href="iexamine_8cpp.html#a67abb0e2895a80aecf1518b23057de6a">json_flag_WING_ARM</a></div><div class="ttdeci">static const json_character_flag json_flag_WING_ARM(&quot;WING_ARM&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a8e040e719c855475d4eeca27443fecfb"><div class="ttname"><a href="iexamine_8cpp.html#a8e040e719c855475d4eeca27443fecfb">effect_slow_descent</a></div><div class="ttdeci">static const efftype_id effect_slow_descent(&quot;slow_descent&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa3320a370fe1f7f1cf6e14918ca20358"><div class="ttname"><a href="iexamine_8cpp.html#aa3320a370fe1f7f1cf6e14918ca20358">effect_bouldering</a></div><div class="ttdeci">static const efftype_id effect_bouldering(&quot;bouldering&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac70e2b1d31968d447e642a66dcd95aa8"><div class="ttname"><a href="iexamine_8cpp.html#ac70e2b1d31968d447e642a66dcd95aa8">json_flag_WING_GLIDE</a></div><div class="ttdeci">static const json_character_flag json_flag_WING_GLIDE(&quot;WING_GLIDE&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae4f83c0deabe9fab8941ec2c28162eff"><div class="ttname"><a href="iexamine_8cpp.html#ae4f83c0deabe9fab8941ec2c28162eff">effect_gliding</a></div><div class="ttdeci">static const efftype_id effect_gliding(&quot;gliding&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">sounds::sound_t::weather</a></div><div class="ttdeci">@ weather</div></div>
<div class="ttc" id="astructmap__data__common__t_html_a6149132d4c5b7e1e15c36e5735207142"><div class="ttname"><a href="structmap__data__common__t.html#a6149132d4c5b7e1e15c36e5735207142">map_data_common_t::examine</a></div><div class="ttdeci">void examine(Character &amp;, const tripoint &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00588">mapdata.cpp:588</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructter__t_html_ac732273f5e5c2f3298182003c032f871"><div class="ttname"><a href="structter__t.html#ac732273f5e5c2f3298182003c032f871">ter_t::trap</a></div><div class="ttdeci">trap_id trap</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00618">mapdata.h:618</a></div></div>
<div class="ttc" id="atrap_8cpp_html_a9d7e5dc72cb6e99095b4cb3d0d26ecd4"><div class="ttname"><a href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a></div><div class="ttdeci">const trap_str_id tr_ledge(&quot;tr_ledge&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="cube__direction_8h.html#aea62013051f3c8842efa174037dfb5bca6cede1cfde12fc6d88ad1d8b6636a977">below</a>, <a class="el" href="game__constants_8h_source.html#l00184">BRISK_EXERCISE</a>, <a class="el" href="character_8cpp_source.html#l12700">Character::can_fly()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00259">debugmode::DF_IEXAMINE</a>, <a class="el" href="iexamine_8cpp.html#aa3320a370fe1f7f1cf6e14918ca20358">effect_bouldering</a>, <a class="el" href="iexamine_8cpp.html#ae4f83c0deabe9fab8941ec2c28162eff">effect_gliding</a>, <a class="el" href="iexamine_8cpp.html#a8e040e719c855475d4eeca27443fecfb">effect_slow_descent</a>, <a class="el" href="mapdata_8cpp_source.html#l00588">map_data_common_t::examine()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l04127">Character::get_str()</a>, <a class="el" href="game_8cpp_source.html#l13866">get_weather()</a>, <a class="el" href="avatar_8cpp_source.html#l00699">avatar::grab()</a>, <a class="el" href="character_8cpp_source.html#l11176">Character::gravity_check()</a>, <a class="el" href="character_8cpp_source.html#l11915">Character::has_bodypart_with_flag()</a>, <a class="el" href="creature_8cpp_source.html#l01792">Creature::has_effect_with_flag()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03112">map::has_flag_furn()</a>, <a class="el" href="iexamine_8cpp.html#a60af1f1f9d206bee48e52592bbec084b">json_flag_GLIDE</a>, <a class="el" href="iexamine_8cpp.html#a66258a732cd5dd5923520688b6e06a58">json_flag_LEVITATION</a>, <a class="el" href="iexamine_8cpp.html#a67abb0e2895a80aecf1518b23057de6a">json_flag_WING_ARM</a>, <a class="el" href="iexamine_8cpp.html#ac70e2b1d31968d447e642a66dcd95aa8">json_flag_WING_GLIDE</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character__escape_8cpp_source.html#l00373">Character::move_effects()</a>, <a class="el" href="mapdata_8cpp_source.html#l00563">map_data_common_t::name()</a>, <a class="el" href="enums_8h.html#a805138f2fff55cebf7ad4bc2b49f1f71ab50339a10e1de285ac99d4c3990b8693">NONE</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="creature_8h_source.html#l00317">Creature::posz()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="character_8cpp_source.html#l06547">Character::set_activity_level()</a>, <a class="el" href="creature_8cpp_source.html#l00188">Creature::setpos()</a>, <a class="el" href="enums_8h_source.html#l00010">sgn()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="trap_8cpp.html#a9d7e5dc72cb6e99095b4cb3d0d26ecd4">tr_ledge</a>, <a class="el" href="mapdata_8h_source.html#l00618">ter_t::trap</a>, <a class="el" href="map_8cpp_source.html#l02542">map::valid_move()</a>, <a class="el" href="character_8cpp_source.html#l03197">Character::weight_capacity()</a>, <a class="el" href="character_8cpp_source.html#l03088">Character::weight_carried()</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00024">point::y</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10533">game::walk_move()</a>.</p>

</div>
</div>
<a id="a061412764e0f7a31458bb8fcaa751e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a061412764e0f7a31458bb8fcaa751e71">&#9670;&nbsp;</a></span>locked_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::locked_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether PC has a crowbar then calls <a class="el" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse.crowbar</a>. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01826">1826</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;best_prying = you.<a class="code" href="classCharacter.html#a201bedaf0d4d679b34fea2160434760f">best_item_with_quality</a>( <a class="code" href="iexamine_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a> );</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;best_lockpick = you.<a class="code" href="classCharacter.html#a201bedaf0d4d679b34fea2160434760f">best_item_with_quality</a>( <a class="code" href="iexamine_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a> );</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> veh = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp );</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordtype">int</span> locked_part = -1;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// Check if the locked thing is a lockable door part.</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span>( veh ) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        std::vector&lt;vehicle_part *&gt; parts_at_target = veh-&gt;vehicle().get_parts_at(</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                    examp, <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span>, <a class="code" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> );</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">if</span>( !parts_at_target.empty() ) {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            locked_part = veh-&gt;vehicle().next_part_to_unlock(</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                              veh-&gt;vehicle().index_of_part( parts_at_target.front() ) );</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keyword">const</span> std::string target_name = here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ? here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) :</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                                    locked_part &gt;= 0 ? veh-&gt;vehicle().part( locked_part ).name() :</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                                    here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp );</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_prying = !best_prying.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>();</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> can_pick = ( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a490ed6fa7a432713ecb4b01b2cc291d5">ter_furn_flag::TFLAG_PICKABLE</a>, examp ) ||</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                            locked_part &gt;= 0 ) &amp;&amp;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                          ( !best_lockpick.<a class="code" href="classitem.html#a4d5555082454b3cb192f59a70838c891">is_null</a>() || you.<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a> ) );</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keyword">enum</span> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        pick = 0,</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        pry = 1,</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a> = 2</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    };</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">act::none</a>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">if</span>( has_prying &amp;&amp; can_pick ) {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pry_has = best_prying.<a class="code" href="classitem.html#a7d1ba8693571b9563e111fe709348438">get_quality</a>( <a class="code" href="iexamine_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a> );</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pry_req = here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ?</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                            here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code" href="structfurn__t.html#a27e414abdc53ff0f4da546d9d740fca8">prying</a>-&gt;prying_data().prying_level :</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                            here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code" href="structter__t.html#ad97e44c5c5cbf5b7d42eff45ff01f132">prying</a>-&gt;prying_data().prying_level;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="keywordflow">if</span>( pry_has &lt; pry_req ) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = act::pick;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with the %s?&quot;</span> ),</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                        target_name );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;l&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick the lock&quot;</span> ) );</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pry open&quot;</span> ) );</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <span class="keywordflow">if</span>( amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; act::pick || amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt; act::pry ) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = has_prying ? act::pry : can_pick ? act::pick : <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">act::none</a>;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">act::none</a> ) {</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is locked.  You could pry it open with the right tool…&quot;</span> ),</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                 target_name );</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == act::pry ) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <span class="comment">//~ %1$s: terrain/furniture name, %2$s: prying tool name</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to pry open the %1$s using your %2$s…&quot;</span> ),</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                               target_name, best_prying.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <a class="code" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a>( &amp;you, &amp;best_prying, examp );</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == act::pick ) {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <a class="code" href="namespaceiexamine.html#ab86f29619c48793c99088d13017bc6e9">locked_object_pickable</a>( you, examp );</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a7d1ba8693571b9563e111fe709348438"><div class="ttname"><a href="classitem.html#a7d1ba8693571b9563e111fe709348438">item::get_quality</a></div><div class="ttdeci">int get_quality(const quality_id &amp;id, bool strict_boiling=true) const</div><div class="ttdoc">Return the level of a given quality the tool may have, or INT_MIN if it does not have that quality,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07737">item.cpp:7737</a></div></div>
<div class="ttc" id="aclassmap_html_a00008f407a53edc2445622618d7ed071"><div class="ttname"><a href="classmap.html#a00008f407a53edc2445622618d7ed071">map::has_furn</a></div><div class="ttdeci">bool has_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01712">map.cpp:1712</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab00ec542b36966cfab67ea71cb586ace"><div class="ttname"><a href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a></div><div class="ttdeci">static const bionic_id bio_lockpick(&quot;bio_lockpick&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab1b63cf78382cbe22b62b8b62e9c71b7"><div class="ttname"><a href="iexamine_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a></div><div class="ttdeci">static const quality_id qual_PRY(&quot;PRY&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab78ab4891ee6307746c1e74a8b77de8d"><div class="ttname"><a href="iexamine_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a></div><div class="ttdeci">static const quality_id qual_LOCKPICK(&quot;LOCKPICK&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a490ed6fa7a432713ecb4b01b2cc291d5"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a490ed6fa7a432713ecb4b01b2cc291d5">ter_furn_flag::TFLAG_PICKABLE</a></div><div class="ttdeci">@ TFLAG_PICKABLE</div></div>
<div class="ttc" id="anamespaceiexamine_html_ab86f29619c48793c99088d13017bc6e9"><div class="ttname"><a href="namespaceiexamine.html#ab86f29619c48793c99088d13017bc6e9">iexamine::locked_object_pickable</a></div><div class="ttdeci">void locked_object_pickable(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdoc">Checks whether PC has picklocks then calls pick_lock iuse function OR assigns ACT_LOCKPICK.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01898">iexamine.cpp:1898</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1e61fe7c6df1284dc3fbe613c456ce8a"><div class="ttname"><a href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a></div><div class="ttdeci">std::optional&lt; int &gt; crowbar(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02719">iuse.cpp:2719</a></div></div>
<div class="ttc" id="astructfurn__t_html_a27e414abdc53ff0f4da546d9d740fca8"><div class="ttname"><a href="structfurn__t.html#a27e414abdc53ff0f4da546d9d740fca8">furn_t::prying</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_furn &gt; prying</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00663">mapdata.h:663</a></div></div>
<div class="ttc" id="astructter__t_html_ad97e44c5c5cbf5b7d42eff45ff01f132"><div class="ttname"><a href="structter__t.html#ad97e44c5c5cbf5b7d42eff45ff01f132">ter_t::prying</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_ter &gt; prying</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00612">mapdata.h:612</a></div></div>
<div class="ttc" id="avehicle_8h_html_ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb"><div class="ttname"><a href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a></div><div class="ttdeci">@ available</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="character_8cpp_source.html#l10226">Character::best_item_with_quality()</a>, <a class="el" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>, <a class="el" href="iuse_8cpp_source.html#l02719">iuse::crowbar()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l07737">item::get_quality()</a>, <a class="el" href="bionics_8cpp_source.html#l02648">Character::has_bionic()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="item_8cpp_source.html#l00931">item::is_null()</a>, <a class="el" href="iexamine_8cpp_source.html#l01898">locked_object_pickable()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="mapdata_8h_source.html#l00612">ter_t::prying</a>, <a class="el" href="mapdata_8h_source.html#l00663">furn_t::prying</a>, <a class="el" href="iexamine_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a>, <a class="el" href="iexamine_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a490ed6fa7a432713ecb4b01b2cc291d5">TFLAG_PICKABLE</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l04868">curtains()</a>, <a class="el" href="iexamine_8cpp_source.html#l02062">door_peephole()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ab86f29619c48793c99088d13017bc6e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86f29619c48793c99088d13017bc6e9">&#9670;&nbsp;</a></span>locked_object_pickable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::locked_object_pickable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether PC has picklocks then calls pick_lock iuse function OR assigns ACT_LOCKPICK. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01898">1898</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;{</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> veh = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp );</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordtype">int</span> locked_part = -1;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span>( veh ) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <span class="keyword">const</span> std::vector&lt;vehicle_part *&gt; parts_at_target = veh-&gt;vehicle().get_parts_at(</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                    examp, <span class="stringliteral">&quot;LOCKABLE_DOOR&quot;</span>, <a class="code" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">part_status_flag::available</a> );</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <span class="keywordflow">if</span>( !parts_at_target.empty() ) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            locked_part = veh-&gt;vehicle().next_part_to_unlock(</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                              veh-&gt;vehicle().index_of_part( parts_at_target.front() ) );</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        }</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keyword">const</span> std::string target_name = here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( examp ) ? here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) :</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                                    locked_part &gt;= 0 ? veh-&gt;vehicle().part( locked_part ).name() : here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp );</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160; </div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a> ) ) {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt;= <a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>-&gt;<a class="code" href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">power_activate</a> ) {</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            you.<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -<a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>-&gt;<a class="code" href="structbionic__data.html#a91d04ff5e3de875e747fff05418f6253">power_activate</a> );</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You activate your %s.&quot;</span> ), <a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>-&gt;<a class="code" href="structbionic__data.html#a3cf96a3fc532f2c82b73924ab585451e">name</a> );</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classlockpick__activity__actor.html#ab8eb29d78accfb29b26984446b96236f">lockpick_activity_actor::use_bionic</a>( here.<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( examp ) ) );</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have enough power to activate your %s.&quot;</span> ),</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                                   <a class="code" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>-&gt;<a class="code" href="structbionic__data.html#a3cf96a3fc532f2c82b73924ab585451e">name</a> );</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    std::vector&lt;item *&gt; picklocks = you.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( [&amp;you]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="comment">// Don&#39;t include worn items such as hairpins</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( it ) ) {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            return it.type-&gt;get_use( <span class="stringliteral">&quot;PICK_LOCK&quot;</span> ) != nullptr;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    } );</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; </div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span>( picklocks.empty() ) {</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is locked.  If only you had something to pick its lock with…&quot;</span> ),</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                 target_name );</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    }</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="comment">// Sort by their picklock level.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    std::sort( picklocks.begin(), picklocks.end(), [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * <a class="code" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        int a_quality = a-&gt;get_quality( qual_LOCKPICK );</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        int b_quality = b-&gt;get_quality( qual_LOCKPICK );</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <span class="comment">// Sort by durability to spend most broken item</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        if( a_quality == b_quality ) {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            return a-&gt;damage() &gt; b-&gt;damage();</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        }</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="keywordflow">return</span> a_quality &gt; b_quality;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    } );</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *it : picklocks ) {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pick the lock of %1$s using your %2$s?&quot;</span> ),</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                       target_name, it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) ) {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *iuse_fn = it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;PICK_LOCK&quot;</span> );</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to pick the lock of %1$s using your %2$s…&quot;</span> ),</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                               target_name, it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keyword">const</span> <a class="code" href="classret__val_3_01void_01_4.html">ret_val&lt;void&gt;</a> can_use = iuse_fn-&gt;<a class="code" href="structuse__function.html#a0c2ff5aa56aef91b6d8c73a5fb248091">can_call</a>( you, *it, examp );</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="keywordflow">if</span>( can_use.<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            iuse_fn-&gt;<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( &amp;you, *it, examp );</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, can_use.<a class="code" href="classret__val__common.html#adf8af6e05bb9773c0b77b4299ba13c6c">str</a>() );</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4d8d747c469431f530acb05c5f7a7f45"><div class="ttname"><a href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">Character::is_worn</a></div><div class="ttdeci">bool is_worn(const item &amp;thing) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01911">character.h:1911</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02824">character.cpp:2824</a></div></div>
<div class="ttc" id="aclasslockpick__activity__actor_html_ab8eb29d78accfb29b26984446b96236f"><div class="ttname"><a href="classlockpick__activity__actor.html#ab8eb29d78accfb29b26984446b96236f">lockpick_activity_actor::use_bionic</a></div><div class="ttdeci">static lockpick_activity_actor use_bionic(const tripoint &amp;target)</div><div class="ttdoc">Use bionic lockpick.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l02684">activity_actor.cpp:2684</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">static constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01566">magic.cpp:1566</a></div></div>
<div class="ttc" id="astructbionic__data_html_a3cf96a3fc532f2c82b73924ab585451e"><div class="ttname"><a href="structbionic__data.html#a3cf96a3fc532f2c82b73924ab585451e">bionic_data::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00141">bionics.h:141</a></div></div>
<div class="ttc" id="astructuse__function_html_a0c2ff5aa56aef91b6d8c73a5fb248091"><div class="ttname"><a href="structuse__function.html#a0c2ff5aa56aef91b6d8c73a5fb248091">use_function::can_call</a></div><div class="ttdeci">ret_val&lt; void &gt; can_call(const Character &amp;, const item &amp;, const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08908">iuse.cpp:8908</a></div></div>
<div class="ttc" id="astructuse__function_html_a308134b3f05ca40164e867ac8d922da8"><div class="ttname"><a href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">use_function::call</a></div><div class="ttdeci">std::optional&lt; int &gt; call(Character *, item &amp;, const tripoint &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08922">iuse.cpp:8922</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8cpp_source.html#l01566">a</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="vehicle_8h.html#ad9a221cee9ae7a69d6f09d4de701f02cae4894ca167b08880bfc35862f18575eb">available</a>, <a class="el" href="magic_8cpp_source.html#l01567">b</a>, <a class="el" href="iexamine_8cpp.html#ab00ec542b36966cfab67ea71cb586ace">bio_lockpick</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l02824">Character::get_power_level()</a>, <a class="el" href="map_8cpp_source.html#l09614">map::getabs()</a>, <a class="el" href="bionics_8cpp_source.html#l02648">Character::has_bionic()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="character_8cpp_source.html#l02852">Character::mod_power_level()</a>, <a class="el" href="bionics_8h_source.html#l00141">bionic_data::name</a>, <a class="el" href="bionics_8h_source.html#l00037">bionic_data::power_activate</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, <a class="el" href="activity__actor_8cpp_source.html#l02684">lockpick_activity_actor::use_bionic()</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="iexamine_8cpp_source.html#l01826">locked_object()</a>.</p>

</div>
</div>
<a id="abb9c8b4667ab26a946076aa255d46d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb9c8b4667ab26a946076aa255d46d75">&#9670;&nbsp;</a></span>mill_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::mill_finalize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06379">6379</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;{</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">furn_id</a> cur_mill_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_mill_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;    <span class="keywordflow">if</span>( cur_mill_type == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> ) {</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;        next_mill_type = <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a>;</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_mill_type == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;        next_mill_type = <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a>;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Furniture executed action mill_finalize, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;    }</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160; </div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_mill_type );</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;    }</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160; </div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;    std::map&lt;itype_id, int&gt; millable_counts;</div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160; </div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;iter : items ) {</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;        <span class="keywordflow">if</span>( iter.type-&gt;milling_data &amp;&amp; !iter.type-&gt;milling_data-&gt;into_.is_null() ) {</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;            <span class="keywordflow">if</span>( millable_counts.find( iter.typeId() ) == millable_counts.end() ) {</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;                millable_counts.emplace( iter.typeId(), 1 );</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;                millable_counts[iter.typeId()]++;</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;            }</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;        }</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;    }</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160; </div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;    <span class="keywordflow">for</span>( std::pair&lt;<span class="keyword">const</span> <a class="code" href="classstring__id.html">string_id&lt;itype&gt;</a>, <span class="keywordtype">int</span>&gt; mill_type_count : millable_counts ) {</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> source( mill_type_count.first );</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> product( source.type-&gt;milling_data-&gt;into_ );</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;        <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> rec = *source.type-&gt;milling_data-&gt;recipe_;</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160; </div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;        <span class="keywordflow">if</span>( rec.<a class="code" href="classrecipe.html#aaaa0b3bc09bae85e498281e619aaba48">is_null</a>() ) {</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failed to find milling recipe for %s. It wasn&#39;t milled.&quot;</span> ),</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;                      source.display_name().c_str() );</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160; </div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;            <span class="keyword">const</span> <a class="code" href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a> &amp;components =</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;                rec.<a class="code" href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">simple_requirements</a>().<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>();</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;            <span class="keywordtype">int</span> lot_size = 0;</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160; </div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;            <span class="comment">// Making the assumption that milling only uses a single type of input product. Support for mixed products would require additional logic.</span></div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;            <span class="comment">// We also make the assumption that this is the only relevant input, so if lubricants etc. was to be added more logic would be needed.</span></div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::vector&lt;item_comp&gt; &amp;<a class="code" href="structcomponent.html">component</a> : components ) {</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structitem__comp.html">item_comp</a> &amp;comp : <a class="code" href="structcomponent.html">component</a> ) {</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;                    <span class="keywordflow">if</span>( comp.type == mill_type_count.first ) {</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;                        lot_size = comp.count;</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;                    }</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;                }</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160; </div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;                <span class="keywordflow">if</span>( lot_size &gt; 0 ) {</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;                }</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;            }</div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160; </div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;            <span class="keywordflow">if</span>( lot_size == 0 ) {</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failed to find milling recipe for %s. Milling of it failed.&quot;</span> ),</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;                          source.display_name().c_str() );</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;                mill_type_count.second = 0;</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> batches = mill_type_count.second / lot_size;</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> process_count = batches * lot_size;</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160; </div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;                <span class="keywordflow">if</span>( batches == 0 ) {</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s is milled in batches of %d, so none was processed.&quot;</span> ),</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;                             source.tname(), lot_size );</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( process_count != mill_type_count.second ) {</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s is milled in batches of %d, so %d remained unprocessed.&quot;</span> ),</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;                             source.tname(), lot_size, mill_type_count.second - batches * lot_size );</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;                }</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160; </div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;                mill_type_count.second = process_count;</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160; </div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;                <a class="code" href="classitem__components.html">item_components</a> item_component_lot;</div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;                <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160; </div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;iter : items ) {</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;                    <span class="keywordflow">if</span>( iter.typeId() == mill_type_count.first ) {</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;                        item_component_lot.<a class="code" href="classitem__components.html#a8fd66d14ce513ca8fc5868a29791276b">add</a>( iter );</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;                        count++;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;                        <span class="keywordflow">if</span>( count == mill_type_count.second ) {</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;                        }</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;                    }</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;                }</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160; </div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;                std::vector&lt;item&gt; results = rec.<a class="code" href="classrecipe.html#a5c5dec1b4c4beae3485be0b6bf2ae22b">create_results</a>( batches, &amp;item_component_lot );</div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160; </div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;result : results ) {</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;                    here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( examp, result );</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;                }</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160; </div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> iter = items.begin(); iter != items.end(); ) {</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;                    <a class="code" href="classitem.html">item</a> &amp;it = *iter;</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160; </div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;                    <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == mill_type_count.first &amp;&amp; mill_type_count.second &gt; 0 ) {</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;                        iter = items.erase( iter );</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;                        mill_type_count.second--;</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;                        ++iter;</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;                    }</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;                }</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;            }</div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;        }</div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;    }</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160; </div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_mill_type );</div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;}</div>
<div class="ttc" id="aclassitem__components_html"><div class="ttname"><a href="classitem__components.html">item_components</a></div><div class="ttdef"><b>Definition:</b> <a href="item__components_8h_source.html#l00019">item_components.h:20</a></div></div>
<div class="ttc" id="aclassitem__components_html_a8fd66d14ce513ca8fc5868a29791276b"><div class="ttname"><a href="classitem__components.html#a8fd66d14ce513ca8fc5868a29791276b">item_components::add</a></div><div class="ttdeci">void add(item &amp;new_it)</div><div class="ttdef"><b>Definition:</b> <a href="item__components_8cpp_source.html#l00072">item_components.cpp:72</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00086">recipe.h:87</a></div></div>
<div class="ttc" id="aclassrecipe_html_a5c5dec1b4c4beae3485be0b6bf2ae22b"><div class="ttname"><a href="classrecipe.html#a5c5dec1b4c4beae3485be0b6bf2ae22b">recipe::create_results</a></div><div class="ttdeci">std::vector&lt; item &gt; create_results(int batch=1, item_components *used=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00776">recipe.cpp:776</a></div></div>
<div class="ttc" id="aclassrecipe_html_aaaa0b3bc09bae85e498281e619aaba48"><div class="ttname"><a href="classrecipe.html#aaaa0b3bc09bae85e498281e619aaba48">recipe::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00103">recipe.h:103</a></div></div>
<div class="ttc" id="aclassrecipe_html_ad68760d09d83ba4b7793ad831f7973d5"><div class="ttname"><a href="classrecipe.html#ad68760d09d83ba4b7793ad831f7973d5">recipe::simple_requirements</a></div><div class="ttdeci">const requirement_data &amp; simple_requirements() const</div><div class="ttdoc">Fetch combined requirement data (inline and via &quot;using&quot; syntax).</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00147">recipe.h:147</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a056b7253b0c9139b80e29917b415eeb4"><div class="ttname"><a href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a></div><div class="ttdeci">static const furn_str_id furn_f_wind_mill_active(&quot;f_wind_mill_active&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a179865191057812d556b754c5cefab72"><div class="ttname"><a href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a></div><div class="ttdeci">static const furn_str_id furn_f_wind_mill(&quot;f_wind_mill&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a49d1951d52402e972f602eb8767311f1"><div class="ttname"><a href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a></div><div class="ttdeci">static const furn_str_id furn_f_water_mill_active(&quot;f_water_mill_active&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a517d0cb6bd386ffeeab81fd020b0231c"><div class="ttname"><a href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a></div><div class="ttdeci">static const furn_str_id furn_f_water_mill(&quot;f_water_mill&quot;)</div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructitem__comp_html"><div class="ttname"><a href="structitem__comp.html">item_comp</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00110">requirements.h:110</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a81eb3f292988bc3b327f50cdcbb74e0c"><div class="ttname"><a href="structrequirement__data.html#a81eb3f292988bc3b327f50cdcbb74e0c">requirement_data::alter_item_comp_vector</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; item_comp &gt; &gt; alter_item_comp_vector</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00217">requirements.h:217</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item__components_8cpp_source.html#l00072">item_components::add()</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="recipe_8cpp_source.html#l00776">recipe::create_results()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a>, <a class="el" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a>, <a class="el" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a>, <a class="el" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="recipe_8h_source.html#l00103">recipe::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="itype_8h_source.html#l01215">itype::milling_data</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, <a class="el" href="recipe_8h_source.html#l00147">recipe::simple_requirements()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l13106">item::process_fake_mill()</a>.</p>

</div>
</div>
<a id="ad6b09c32e571c128c86203a24af5b13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b09c32e571c128c86203a24af5b13d">&#9670;&nbsp;</a></span>nanofab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::nanofab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TEMPLATE FABRICATORS Generate items from found blueprints. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00399">399</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;{</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordtype">bool</span> table_exists = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    std::list&lt;item_location&gt; on_table;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> nanofab_template;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="structspawn__point.html">spawn_point</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    std::set&lt;itype_id&gt; allowed_template = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp )-&gt;<a class="code" href="structter__t.html#a4e6014839ec3fbd37864370b6c8c0896">allowed_template_id</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;valid_location : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( examp, 1 ) ) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054afcfeb5b42cdf58e086d846da09e95eeb">ter_furn_flag::TFLAG_NANOFAB_TABLE</a>, valid_location ) ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <a class="code" href="structspawn__point.html">spawn_point</a> = valid_location;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            table_exists = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            on_table = here.<a class="code" href="classmap.html#a465b100a7f16fef97298001da28fc899">items_with</a>( valid_location, [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afec0a2080e0d2588df2939d9708e925d">flag_NANOFAB_REPAIR</a> );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            } );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span>( !table_exists ) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="classitem.html">item</a> new_item;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="structrequirement__data.html">requirement_data</a> reqs;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// If there is something on the table that can be repaired suggest to repair that instead of printing something new</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span>( !on_table.empty() ) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        new_item = <a class="code" href="classitem.html">item</a>( on_table.front()-&gt;typeId(), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordtype">int</span> damage = on_table.front()-&gt;damage_level();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span>( damage &lt;= 0 ) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;FABRICATOR COMPLIANT ITEM %s DETECTED, BUT NOT DAMAGED REMOVE WORKING ITEM FROM FABRICATOR&quot;</span> ),</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                   new_item.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="structspawn__point.html">spawn_point</a>, 10, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14">sounds::sound_t::speech</a>,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;REMOVE WORKING ITEM FROM FABRICATOR.&quot;</span> ), <span class="keyword">true</span> );</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span>( !on_table.front()-&gt;empty() ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ITEM %s DETECTED, CONTENTS OF ITEM WILL BE DESTROYED BY FABRICATOR PLEASE EMPTY ITEM AND RETURN&quot;</span> ),</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                   new_item.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="structspawn__point.html">spawn_point</a>, 10, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14">sounds::sound_t::speech</a>,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;PLEASE EMPTY ITEM AND RETURN.&quot;</span> ), <span class="keyword">true</span> );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="structspawn__point.html">spawn_point</a>, 10, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14">sounds::sound_t::speech</a>,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;REPAIR INTEGRITY DAMAGE?&quot;</span> ), <span class="keyword">true</span> );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;FABRICATOR COMPLIANT ITEM %s DETECTED, REPAIR INTEGRITY DAMAGE?&quot;</span> ),</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                       new_item.<a class="code" href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">display_name</a>() ) ) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// multiplier for the item being not completely destroyed</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordtype">float</span> dam_mult = .05f * damage;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordtype">int</span> qty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( dam_mult * new_item.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / 250_ml ) );</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        std::vector&lt;std::vector&lt;item_comp&gt;&gt; requirement_comp_vector;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        std::vector&lt;std::vector&lt;quality_requirement&gt;&gt; quality_comp_vector;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        std::vector&lt;std::vector&lt;tool_comp&gt;&gt; tool_comp_vector;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        std::vector&lt;item_comp&gt; nano_req = { <a class="code" href="structitem__comp.html">item_comp</a>( <a class="code" href="iexamine_8cpp.html#a805d4cc9fb2606feb09f2ef859260c4b">itype_nanomaterial</a>, 5 * qty ) };</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        requirement_comp_vector.push_back( nano_req );</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        std::vector&lt;item_comp&gt; item_req = { <a class="code" href="structitem__comp.html">item_comp</a>( on_table.front()-&gt;typeId(), 1 ) };</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        requirement_comp_vector.push_back( item_req );</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        reqs = <a class="code" href="structrequirement__data.html">requirement_data</a>( tool_comp_vector, quality_comp_vector, requirement_comp_vector );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">//Create a list of the names of all acceptable templates.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        std::set&lt;std::string&gt; templatenames;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> &amp;<span class="keywordtype">id</span> : allowed_template ) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            templatenames.insert( <a class="code" href="classint__id.html#a09d4f824b2540da7e682d10cdf324081">id</a>-&gt;nname( 1 ) );</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        std::string name_list = <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( templatenames );</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="comment">//Template selection</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        nanofab_template = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">return</span>  std::any_of( allowed_template.begin(), allowed_template.end(),</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            [&amp;e]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> itid ) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                return e.typeId() == itid;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            } );</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Introduce a compatible template.&quot;</span> ), <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a>,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any usable templates.\n\nCompatible templates are: &quot;</span> ) + name_list );</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">if</span>( !nanofab_template ) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        new_item = <a class="code" href="classitem.html">item</a>( nanofab_template-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;NANOFAB_ITEM_ID&quot;</span> ), <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordtype">int</span> qty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, new_item.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() / 250_ml );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        reqs = *nanofab_template-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#afeecc38f5096d4bfcfa7be374dc3cbc2">template_requirements</a> * qty;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// either way the new item should have the nanofabricator flag</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span>( !new_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#afec0a2080e0d2588df2939d9708e925d">flag_NANOFAB_REPAIR</a> ) ) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        new_item.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#afec0a2080e0d2588df2939d9708e925d">flag_NANOFAB_REPAIR</a> );</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span>( !reqs.<a class="code" href="structrequirement__data.html#a07c67f146358ed0de2aface7588c20d2">can_make_with_inventory</a>( you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>(), <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> ) ) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, reqs.<a class="code" href="structrequirement__data.html#a1590c4ebea201a6937c0fa9a8227986d">list_missing</a>() );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Consume materials</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( e, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : reqs.<a class="code" href="structrequirement__data.html#a175d46943600149603b7a915cb48092b">get_tools</a>() ) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( e );</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    you.<a class="code" href="classCharacter.html#afe4c095c2e6510f07f351d7e091f5787">invalidate_crafting_inventory</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span>( new_item.<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; new_item.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a> ) ) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        new_item.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a> );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="structspawn__point.html">spawn_point</a>, new_item );</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// if this template is single use</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// also check if the template exists at all</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span>( nanofab_template &amp;&amp; nanofab_template-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ab49bbc09702333c362476f4e8dfecabc">flag_NANOFAB_TEMPLATE_SINGLE_USE</a> ) ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        nanofab_template.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="ttc" id="aclassitem__location_html_a41e90133672d99aa1cecde670e37c23c"><div class="ttname"><a href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">item_location::remove_item</a></div><div class="ttdeci">void remove_item()</div><div class="ttdoc">Removes the selected item from the game.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01041">item_location.cpp:1041</a></div></div>
<div class="ttc" id="aclassitem_html_a0b12108a604ac9d940716bb8f1368cf5"><div class="ttname"><a href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a></div><div class="ttdeci">double get_var(const std::string &amp;name, double default_value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01839">item.cpp:1839</a></div></div>
<div class="ttc" id="aclassitem_html_a893525fea93fa0a45a51edeb64f1b973"><div class="ttname"><a href="classitem.html#a893525fea93fa0a45a51edeb64f1b973">item::display_name</a></div><div class="ttdeci">std::string display_name(unsigned int quantity=1) const</div><div class="ttdoc">Returns the item name and the charges or contained charges (if the item can have charges at all).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06855">item.cpp:6855</a></div></div>
<div class="ttc" id="aclassitem_html_a9aab8660fb40eedb8d2da95e797ecd32"><div class="ttname"><a href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a></div><div class="ttdeci">bool is_armor() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09623">item.cpp:9623</a></div></div>
<div class="ttc" id="aflag_8cpp_html_aab1184bf751613f16480d6412006f74e"><div class="ttname"><a href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a></div><div class="ttdeci">const flag_id flag_FIT(&quot;FIT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ab49bbc09702333c362476f4e8dfecabc"><div class="ttname"><a href="flag_8cpp.html#ab49bbc09702333c362476f4e8dfecabc">flag_NANOFAB_TEMPLATE_SINGLE_USE</a></div><div class="ttdeci">const flag_id flag_NANOFAB_TEMPLATE_SINGLE_USE(&quot;NANOFAB_TEMPLATE_SINGLE_USE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ac2e75bd71461a88a762c817f199feb23"><div class="ttname"><a href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a></div><div class="ttdeci">const flag_id flag_VARSIZE(&quot;VARSIZE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_afec0a2080e0d2588df2939d9708e925d"><div class="ttname"><a href="flag_8cpp.html#afec0a2080e0d2588df2939d9708e925d">flag_NANOFAB_REPAIR</a></div><div class="ttdeci">const flag_id flag_NANOFAB_REPAIR(&quot;NANOFAB_REPAIR&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a805d4cc9fb2606feb09f2ef859260c4b"><div class="ttname"><a href="iexamine_8cpp.html#a805d4cc9fb2606feb09f2ef859260c4b">itype_nanomaterial</a></div><div class="ttdeci">static const itype_id itype_nanomaterial(&quot;nanomaterial&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054afcfeb5b42cdf58e086d846da09e95eeb"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054afcfeb5b42cdf58e086d846da09e95eeb">ter_furn_flag::TFLAG_NANOFAB_TABLE</a></div><div class="ttdeci">@ TFLAG_NANOFAB_TABLE</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14">sounds::sound_t::speech</a></div><div class="ttdeci">@ speech</div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
<div class="ttc" id="astructitype_html_afeecc38f5096d4bfcfa7be374dc3cbc2"><div class="ttname"><a href="structitype.html#afeecc38f5096d4bfcfa7be374dc3cbc2">itype::template_requirements</a></div><div class="ttdeci">requirement_id template_requirements</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01273">itype.h:1273</a></div></div>
<div class="ttc" id="astructspawn__point_html"><div class="ttname"><a href="structspawn__point.html">spawn_point</a></div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00039">submap.h:39</a></div></div>
<div class="ttc" id="astructter__t_html_a4e6014839ec3fbd37864370b6c8c0896"><div class="ttname"><a href="structter__t.html#a4e6014839ec3fbd37864370b6c8c0896">ter_t::allowed_template_id</a></div><div class="ttdeci">std::set&lt; itype_id &gt; allowed_template_id</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00621">mapdata.h:621</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="mapdata_8h_source.html#l00621">ter_t::allowed_template_id</a>, <a class="el" href="requirements_8cpp_source.html#l00840">requirement_data::can_make_with_inventory()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="flag_8cpp.html#aab1184bf751613f16480d6412006f74e">flag_FIT</a>, <a class="el" href="flag_8cpp.html#afec0a2080e0d2588df2939d9708e925d">flag_NANOFAB_REPAIR</a>, <a class="el" href="flag_8cpp.html#ab49bbc09702333c362476f4e8dfecabc">flag_NANOFAB_TEMPLATE_SINGLE_USE</a>, <a class="el" href="flag_8cpp.html#ac2e75bd71461a88a762c817f199feb23">flag_VARSIZE</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="requirements_8cpp_source.html#l01152">requirement_data::get_tools()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="crafting_8cpp_source.html#l00692">Character::invalidate_crafting_inventory()</a>, <a class="el" href="item_8cpp_source.html#l09623">item::is_armor()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="map_8cpp_source.html#l05960">map::items_with()</a>, <a class="el" href="iexamine_8cpp.html#a805d4cc9fb2606feb09f2ef859260c4b">itype_nanomaterial</a>, <a class="el" href="requirements_8cpp_source.html#l00574">requirement_data::list_missing()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="item__location_8cpp_source.html#l01041">item_location::remove_item()</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a9b4a8a31b4caf3cc5c6205f74950ac14">sounds::speech</a>, <a class="el" href="itype_8h_source.html#l01273">itype::template_requirements</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054afcfeb5b42cdf58e086d846da09e95eeb">TFLAG_NANOFAB_TABLE</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a4b01dcde847b9429cc2d968d955f93e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b01dcde847b9429cc2d968d955f93e8">&#9670;&nbsp;</a></span>none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::none </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nothing player can interact with here. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00306">306</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That is a %s.&quot;</span> ), <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>( examp ) );</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, and <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05778">colorized_ter_name_flags_at()</a>, <a class="el" href="iexamine_8cpp_source.html#l02163">dead_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l02429">harvested_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="iexamine_8cpp_source.html#l04253">pick_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l04219">harvest_activity_actor::start()</a>.</p>

</div>
</div>
<a id="a060b59dbae83b1188922a4b701894532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060b59dbae83b1188922a4b701894532">&#9670;&nbsp;</a></span>on_smoke_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::on_smoke_out </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>start_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06737">6737</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;{</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a> ||</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;        here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a> ) {</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;        <a class="code" href="iexamine_8cpp.html#a50be5193a7cf41a150441ec7594a29b7">smoker_finalize</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), examp, start_time );</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;    }</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a50be5193a7cf41a150441ec7594a29b7"><div class="ttname"><a href="iexamine_8cpp.html#a50be5193a7cf41a150441ec7594a29b7">smoker_finalize</a></div><div class="ttdeci">static void smoker_finalize(Character &amp;, const tripoint &amp;examp, const time_point &amp;start_time)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06495">iexamine.cpp:6495</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5d99eb66dbdc62edf33d93a7da3dd369"><div class="ttname"><a href="iexamine_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a></div><div class="ttdeci">static const furn_str_id furn_f_smoking_rack_active(&quot;f_smoking_rack_active&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a66869ec3b1397247d8a2edab98aeb833"><div class="ttname"><a href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a></div><div class="ttdeci">static const furn_str_id furn_f_metal_smoking_rack_active(&quot;f_metal_smoking_rack_active&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a>, <a class="el" href="iexamine_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, and <a class="el" href="iexamine_8cpp_source.html#l06495">smoker_finalize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l13121">item::process_fake_smoke()</a>.</p>

</div>
</div>
<a id="af4acd718a9ed5d2f4e052da39834c4a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4acd718a9ed5d2f4e052da39834c4a1">&#9670;&nbsp;</a></span>open_safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::open_safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07150">7150</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;{</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You open the unlocked safe.&quot;</span> ) );</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;    <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a7642ad608b56a1b486285ad95959ccea">furn_f_safe_o</a> );</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a7642ad608b56a1b486285ad95959ccea"><div class="ttname"><a href="iexamine_8cpp.html#a7642ad608b56a1b486285ad95959ccea">furn_f_safe_o</a></div><div class="ttdeci">static const furn_str_id furn_f_safe_o(&quot;f_safe_o&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="iexamine_8cpp.html#a7642ad608b56a1b486285ad95959ccea">furn_f_safe_o</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, and <a class="el" href="enums_8h_source.html#l00352">m_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a6c530dd14bb244dce80da141d2cab912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c530dd14bb244dce80da141d2cab912">&#9670;&nbsp;</a></span>part_con()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::part_con </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04630">4630</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;{</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="structpartial__con.html">partial_con</a> *<span class="keyword">const</span> pc = here.<a class="code" href="classmap.html#a4dfba170dba1792376456ac2e6a6fd20">partial_con_at</a>( <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a>( examp ) ) ) {</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 &amp;&amp;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;            !you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a> ) ) {</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is too dark to construct right now.&quot;</span> ) );</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;        }</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;        <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp;built = pc-&gt;<a class="code" href="structconstruction.html#a3d25b58df95ace7f63d02f08cb7172ca">id</a>.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unfinished task: %s, %d%% complete here, continue construction?&quot;</span> ),</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;                       built.<a class="code" href="structconstruction.html#aa437285d9bdea6ba7ceccaa12e063838">group</a>-&gt;<a class="code" href="structconstruction__group.html#a025640b4b5fb5d6694a4d3064d6bba98">name</a>(), pc-&gt;counter / 100000 ) ) {</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cancel construction?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : pc-&gt;<a class="code" href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">components</a> ) {</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), it );</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;                }</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;                <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;                here.<a class="code" href="classmap.html#add8cb29014b062c35adc1dbf73781def">partial_con_remove</a>( <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( examp ) );</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;            }</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a> );</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;            you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp );</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;        }</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;    }</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassitem_html_acb2cc7e78ca9e1515b2e44a633d9f25c"><div class="ttname"><a href="classitem.html#acb2cc7e78ca9e1515b2e44a633d9f25c">item::components</a></div><div class="ttdeci">item_components components</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03075">item.h:3075</a></div></div>
<div class="ttc" id="aclassmap_html_a4dfba170dba1792376456ac2e6a6fd20"><div class="ttname"><a href="classmap.html#a4dfba170dba1792376456ac2e6a6fd20">map::partial_con_at</a></div><div class="ttdeci">partial_con * partial_con_at(const tripoint_bub_ms &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06244">map.cpp:6244</a></div></div>
<div class="ttc" id="aclassmap_html_add8cb29014b062c35adc1dbf73781def"><div class="ttname"><a href="classmap.html#add8cb29014b062c35adc1dbf73781def">map::partial_con_remove</a></div><div class="ttdeci">void partial_con_remove(const tripoint_bub_ms &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06262">map.cpp:6262</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_ace15a2f5a970ee2cdb53e5ded21d08a2"><div class="ttname"><a href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">player_activity::placement</a></div><div class="ttdeci">tripoint_abs_ms placement</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00068">player_activity.h:68</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a38e880e550bb0688dea9353138da8683"><div class="ttname"><a href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::reality_bubble, coords::ms &gt; tripoint_bub_ms</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00716">coordinates.h:716</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2ba9e40123e7b42ccc2327d637311c5a"><div class="ttname"><a href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a></div><div class="ttdeci">static const trait_id trait_DEBUG_HS(&quot;DEBUG_HS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac4155153aad418822a30e271955f0d73"><div class="ttname"><a href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a></div><div class="ttdeci">static const activity_id ACT_BUILD(&quot;ACT_BUILD&quot;)</div></div>
<div class="ttc" id="astructconstruction__group_html_a025640b4b5fb5d6694a4d3064d6bba98"><div class="ttname"><a href="structconstruction__group.html#a025640b4b5fb5d6694a4d3064d6bba98">construction_group::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="construction__group_8cpp_source.html#l00061">construction_group.cpp:61</a></div></div>
<div class="ttc" id="astructconstruction_html"><div class="ttname"><a href="structconstruction.html">construction</a></div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00043">construction.h:43</a></div></div>
<div class="ttc" id="astructconstruction_html_a3d25b58df95ace7f63d02f08cb7172ca"><div class="ttname"><a href="structconstruction.html#a3d25b58df95ace7f63d02f08cb7172ca">construction::id</a></div><div class="ttdeci">construction_id id</div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00072">construction.h:72</a></div></div>
<div class="ttc" id="astructconstruction_html_aa437285d9bdea6ba7ceccaa12e063838"><div class="ttname"><a href="structconstruction.html#aa437285d9bdea6ba7ceccaa12e063838">construction::group</a></div><div class="ttdeci">construction_group_str_id group</div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00047">construction.h:47</a></div></div>
<div class="ttc" id="astructpartial__con_html"><div class="ttname"><a href="structpartial__con.html">partial_con</a></div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00032">construction.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iexamine_8cpp.html#ac4155153aad418822a30e271955f0d73">ACT_BUILD</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="item_8h_source.html#l03075">item::components</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="construction_8h_source.html#l00047">construction::group</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="construction_8h_source.html#l00072">construction::id</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="construction__group_8cpp_source.html#l00061">construction_group::name()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="map_8cpp_source.html#l06244">map::partial_con_at()</a>, <a class="el" href="map_8cpp_source.html#l06262">map::partial_con_remove()</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="iexamine_8cpp.html#a2ba9e40123e7b42ccc2327d637311c5a">trait_DEBUG_HS</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01004">can_do_activity_there()</a>, and <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>.</p>

</div>
</div>
<a id="a545273a5bf7dc9a5d88575f36c6829b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545273a5bf7dc9a5d88575f36c6829b9">&#9670;&nbsp;</a></span>pay_gas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pay_gas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05185">5185</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;{</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160; </div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;    <span class="keywordtype">int</span> choice = -1;</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> buy_gas = 1;</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> choose_pump = 2;</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> hack = 3;</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> refund = 4;</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160; </div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re illiterate, and can&#39;t read the screen.&quot;</span> ) );</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;    }</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160; </div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;    <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534fa">fuel_station_fuel_type</a> fuelType = <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faa72ce08fe97aa480e3db0333632e9c59b">FUEL_TYPE_NONE</a>;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    std::string fuelTypeStr;</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    <span class="keywordtype">int</span> pumpCount = <a class="code" href="iexamine_8cpp.html#a388a6747dc37ce401e502c354180b2ee">getNearPumpCount</a>( examp, fuelType );</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    fuelTypeStr = fuelType == <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faa0a644528d9eb1161f06851a630c30cb7">FUEL_TYPE_GASOLINE</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;gasoline&quot;</span> ) : fuelType == <a class="code" href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faac25821b3a419d9adeaf20fe286fd17b9">FUEL_TYPE_DIESEL</a> ?</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;diesel&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    <span class="keywordflow">if</span>( pumpCount == 0 ) {</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failure!  No %s pumps found!&quot;</span> ), fuelTypeStr ) ) );</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;    }</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160; </div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;    <span class="keywordtype">int</span> tankUnits;</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pTank_ = <a class="code" href="namespaceiexamine.html#a9c5488f1bdb7e18772c51ec43e6e9806">getNearFilledGasTank</a>( examp, tankUnits, fuelType );</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;    <span class="keywordflow">if</span>( !pTank_ ) {</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Failure!  No %s tank found!&quot;</span> ), fuelTypeStr ) ) );</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;    }</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> pTank = *pTank_;</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160; </div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;    <span class="keywordflow">if</span>( tankUnits == 0 ) {</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>(</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;                   <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This station is out of %s.  We apologize for the inconvenience.&quot;</span> ),</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;                                  fuelTypeStr ) ) );</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;    }</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160; </div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> + 1 &gt; pumpCount ) {</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;        <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> = 0;</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;    }</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160; </div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    <span class="keywordtype">int</span> discount = <a class="code" href="iexamine_8cpp.html#a50e5e05effec67d6fb38cbfaf7d4f2f1">findBestGasDiscount</a>( you );</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;    std::string discountName = <a class="code" href="iexamine_8cpp.html#ac76ca28673c019de7a65eff29863dd13">getGasDiscountName</a>( discount );</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160; </div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    <span class="keywordtype">int</span> pricePerUnit = <a class="code" href="iexamine_8cpp.html#afca39ca1d122372a0da6581d3dc2a014">getGasPricePerLiter</a>( discount );</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160; </div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    amenu.<a class="code" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = 1;</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;    amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Welcome to AutoGas!&quot;</span> ) );</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What would you like to do?&quot;</span> ) ) );</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160; </div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( buy_gas, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Buy %s.&quot;</span> ),</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;                    fuelTypeStr ) ) );</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( refund, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Refund cash.&quot;</span> ) ) );</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160; </div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    std::string gaspumpselected = <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Current %s pump: &quot;</span> ),</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;                                  fuelTypeStr ) + <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> + 1 ) );</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">false</span>, -1, gaspumpselected );</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( choose_pump, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>,</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;                    <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose a %s pump.&quot;</span> ), fuelTypeStr ) ) );</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160; </div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your discount: &quot;</span> ) ) + discountName );</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">false</span>, -1, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>(</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your price per %s unit: &quot;</span> ) ), fuelTypeStr )</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;                    +</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;                    <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( pricePerUnit ) );</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160; </div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiexamine.html#a44996bde1bc157e453fa64ec3b6aba34">can_hack</a>( you ) ) {</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( hack, <span class="keyword">true</span>, <span class="charliteral">&#39;h&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Hack console.&quot;</span> ) );</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;    }</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160; </div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;    choice = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160; </div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;    <span class="keywordflow">if</span>( choose_pump == choice ) {</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;        <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;        amenu.<a class="code" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a>;</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;        amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Please choose %s pump:&quot;</span> ), fuelTypeStr ) );</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160; </div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;        std::vector&lt;tripoint&gt; pumps;</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; pumpCount; i++ ) {</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( i, <span class="keyword">true</span>, -1,</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;                            <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pump &quot;</span> ) ) + <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( i + 1 ) );</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;            pumps.emplace_back( <a class="code" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a>( examp, i ).value_or( examp ) );</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;        }</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;        <a class="code" href="classpointmenu__cb.html">pointmenu_cb</a> callback( pumps );</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;        amenu.<a class="code" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;callback;</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;        amenu.<a class="code" href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">w_y_setup</a> = 0;</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;        amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;        choice = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160; </div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;        <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;        }</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160; </div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;        <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> = choice;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160; </div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;        <a class="code" href="iexamine_8cpp.html#aadd8593d79f1678294b3eee4a0dfd1d2">turnOnSelectedPump</a>( examp, <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a>, fuelType );</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160; </div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160; </div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;    }</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160; </div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;    <span class="keywordflow">if</span>( buy_gas == choice ) {</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( <a class="code" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> );</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160; </div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> &lt; pricePerUnit ) {</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>(</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;                       <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Not enough money, please refill your cash card.&quot;</span> ) ) ); <span class="comment">//or ride on a solar car, ha ha ha</span></div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;        }</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160; </div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;        <span class="keywordtype">int</span> maximum_liters = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> / pricePerUnit, tankUnits / 1000 );</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160; </div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;        std::string popupmsg = <a class="code" href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;                                   <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;How many liters of %s to buy?  Max: %d L.  (0 to cancel)&quot;</span> ), fuelTypeStr, maximum_liters ) );</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;        <span class="keywordtype">int</span> liters = <a class="code" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;                     .<a class="code" href="classstring__input__popup.html#aa96aa0184abb3c9740c2a48f098eeb8b">title</a>( popupmsg )</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;                     .<a class="code" href="classstring__input__popup.html#ab3273f9bfdeac38fff067187b1d3715c">width</a>( 20 )</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;                     .<a class="code" href="classstring__input__popup.html#a42554f299ffa809034aa4cb4486e365b">text</a>( <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( maximum_liters ) )</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;                     .<a class="code" href="classstring__input__popup.html#af38cf4937c0dea802498161d1642fb08">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                     .<a class="code" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;        <span class="keywordflow">if</span>( liters &lt;= 0 ) {</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;        }</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;        <span class="keywordflow">if</span>( liters &gt; maximum_liters ) {</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;            liters = maximum_liters;</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;        }</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160; </div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; pGasPump = <a class="code" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a>( examp,</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;                <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> );</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;        <span class="keywordflow">if</span>( !pGasPump || !<a class="code" href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">toPumpFuel</a>( pTank, *pGasPump, liters * 1000 ) ) {</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;        }</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160; </div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Glug Glug Glug&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;                       <span class="stringliteral">&quot;gaspump&quot;</span> );</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160; </div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;        <span class="keywordtype">int</span> cost = liters * pricePerUnit;</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;        <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> -= cost;</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;        you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, cost );</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160; </div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your cash cards now hold %s.&quot;</span> ), <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) );</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;    }</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160; </div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    <span class="keywordflow">if</span>( hack == choice ) {</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;        <a class="code" href="namespaceiexamine.html#a8f535acef0246f6278825d8b8e99b221">try_start_hacking</a>( you, examp );</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;    }</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160; </div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;    <span class="keywordflow">if</span>( refund == choice ) {</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;        std::vector&lt;item *&gt; cash_cards = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <span class="stringliteral">&quot;is_cash_card&quot;</span>, &amp;<a class="code" href="classitem.html#a9099ca6d7da8f258d6efd957ab93cd6d">item::is_cash_card</a> );</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;        <span class="keywordflow">if</span>( cash_cards.empty() ) {</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have a cash card to refund money!&quot;</span> ) );</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;        }</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160; </div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; pGasPump = <a class="code" href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">getGasPumpByNumber</a>( examp,</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;                <a class="code" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code" href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">ags_pay_gas_selected_pump</a> );</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;        <span class="keywordtype">int</span> amount_fuel = pGasPump ? <a class="code" href="iexamine_8cpp.html#a33e3e7a76917c84ba0c01a57dd89d448">fromPumpFuel</a>( pTank, *pGasPump ) : -1;</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;        <span class="keywordflow">if</span>( amount_fuel &lt; 0 ) {</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unable to refund, no fuel in pump.&quot;</span> ) );</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;        }</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Glug Glug Glug&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;                       <span class="stringliteral">&quot;gaspump&quot;</span> );</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160; </div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;        <span class="comment">// getGasPricePerLiter( platinum_discount) min price to avoid exploit</span></div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;        <span class="keywordtype">int</span> amount_money = amount_fuel * <a class="code" href="iexamine_8cpp.html#afca39ca1d122372a0da6581d3dc2a014">getGasPricePerLiter</a>( 3 ) / 1000.0f;</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;        std::sort( cash_cards.begin(), cash_cards.end(), []( <a class="code" href="classitem.html">item</a> * l, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * r ) {</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;            return l-&gt;ammo_remaining() &gt; r-&gt;ammo_remaining();</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;        } );</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> * <span class="keyword">const</span> &amp;cc : cash_cards ) {</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;            <span class="keywordflow">if</span>( amount_money == 0 ) {</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;            }</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> transfer = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( amount_money, cc-&gt;remaining_ammo_capacity() );</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;            cc-&gt;ammo_set( cc-&gt;ammo_default(), transfer + cc-&gt;ammo_remaining() );</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;            amount_money -= transfer;</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;        }</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;        <span class="keywordflow">if</span>( amount_money ) {</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;All cash cards at maximum capacity.&quot;</span> ) );</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;            <span class="comment">// all fuel already removed from pump, so remaining amount_money simply ignored</span></div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;        }</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your cash cards now hold %s.&quot;</span> ),</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;                 <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( <a class="code" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> ) ) );</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;    }</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a9099ca6d7da8f258d6efd957ab93cd6d"><div class="ttname"><a href="classitem.html#a9099ca6d7da8f258d6efd957ab93cd6d">item::is_cash_card</a></div><div class="ttdeci">bool is_cash_card() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08578">item.cpp:8578</a></div></div>
<div class="ttc" id="aclasspointmenu__cb_html"><div class="ttname"><a href="classpointmenu__cb.html">pointmenu_cb</a></div><div class="ttdoc">Callback for uilist that pairs menu entries with points When an entry is selected,...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00575">ui.h:576</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00048">string_input_popup.h:49</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_a42554f299ffa809034aa4cb4486e365b"><div class="ttname"><a href="classstring__input__popup.html#a42554f299ffa809034aa4cb4486e365b">string_input_popup::text</a></div><div class="ttdeci">string_input_popup &amp; text(const std::string &amp;value)</div><div class="ttdoc">Set / get the text that can be modified by the user.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00666">string_input_popup.cpp:666</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_aa96aa0184abb3c9740c2a48f098eeb8b"><div class="ttname"><a href="classstring__input__popup.html#aa96aa0184abb3c9740c2a48f098eeb8b">string_input_popup::title</a></div><div class="ttdeci">string_input_popup &amp; title(const std::string &amp;value)</div><div class="ttdoc">The title: short string before the actual input field.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00113">string_input_popup.h:113</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ab3273f9bfdeac38fff067187b1d3715c"><div class="ttname"><a href="classstring__input__popup.html#ab3273f9bfdeac38fff067187b1d3715c">string_input_popup::width</a></div><div class="ttdeci">string_input_popup &amp; width(int value)</div><div class="ttdoc">Width (in console cells) of the input field itself.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00151">string_input_popup.h:151</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ad9511310a3e0d119d5587fbf0f877c07"><div class="ttname"><a href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">string_input_popup::query_int</a></div><div class="ttdeci">int query_int(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00361">string_input_popup.cpp:361</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_af38cf4937c0dea802498161d1642fb08"><div class="ttname"><a href="classstring__input__popup.html#af38cf4937c0dea802498161d1642fb08">string_input_popup::only_digits</a></div><div class="ttdeci">string_input_popup &amp; only_digits(bool value)</div><div class="ttdoc">If true, any non-digit input cancels the input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00166">string_input_popup.h:166</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00526">ui.h:526</a></div></div>
<div class="ttc" id="aclassuilist_html_ad4f5806d1d8ab3de3af8e3285faf47d6"><div class="ttname"><a href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">uilist::callback</a></div><div class="ttdeci">uilist_callback * callback</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00434">ui.h:434</a></div></div>
<div class="ttc" id="aclassuilist_html_ad9e47c1efe3c9fb954ceaeb5c65791fe"><div class="ttname"><a href="classuilist.html#ad9e47c1efe3c9fb954ceaeb5c65791fe">uilist::w_y_setup</a></div><div class="ttdeci">pos_scalar w_y_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00437">ui.h:437</a></div></div>
<div class="ttc" id="aclassuistatedata_html_ae286ee8af431b7530233b9052c0a7b8d"><div class="ttname"><a href="classuistatedata.html#ae286ee8af431b7530233b9052c0a7b8d">uistatedata::ags_pay_gas_selected_pump</a></div><div class="ttdeci">int ags_pay_gas_selected_pump</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00112">uistate.h:112</a></div></div>
<div class="ttc" id="agame_8cpp_html_a764052f34a47c6dee072c67b842a222c"><div class="ttname"><a href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a></div><div class="ttdeci">uistatedata uistate</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00385">game.cpp:385</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a33e3e7a76917c84ba0c01a57dd89d448"><div class="ttname"><a href="iexamine_8cpp.html#a33e3e7a76917c84ba0c01a57dd89d448">fromPumpFuel</a></div><div class="ttdeci">static int fromPumpFuel(const tripoint &amp;dst, const tripoint &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05132">iexamine.cpp:5132</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a388a6747dc37ce401e502c354180b2ee"><div class="ttname"><a href="iexamine_8cpp.html#a388a6747dc37ce401e502c354180b2ee">getNearPumpCount</a></div><div class="ttdeci">static int getNearPumpCount(const tripoint &amp;p, fuel_station_fuel_type &amp;fuel_type)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04966">iexamine.cpp:4966</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a50e5e05effec67d6fb38cbfaf7d4f2f1"><div class="ttname"><a href="iexamine_8cpp.html#a50e5e05effec67d6fb38cbfaf7d4f2f1">findBestGasDiscount</a></div><div class="ttdeci">static int findBestGasDiscount(Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05037">iexamine.cpp:5037</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aadd8593d79f1678294b3eee4a0dfd1d2"><div class="ttname"><a href="iexamine_8cpp.html#aadd8593d79f1678294b3eee4a0dfd1d2">turnOnSelectedPump</a></div><div class="ttdeci">static void turnOnSelectedPump(const tripoint &amp;p, int number, fuel_station_fuel_type &amp;fuel_type)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05159">iexamine.cpp:5159</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab942a581db0860ae3e4a1b0e54b9f9bf"><div class="ttname"><a href="iexamine_8cpp.html#ab942a581db0860ae3e4a1b0e54b9f9bf">str_to_illiterate_str</a></div><div class="ttdeci">static std::string str_to_illiterate_str(std::string s)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05048">iexamine.cpp:5048</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac2c5780a50f6dc653232de1aeffc85ab"><div class="ttname"><a href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a></div><div class="ttdeci">static const itype_id itype_cash_card(&quot;cash_card&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac76ca28673c019de7a65eff29863dd13"><div class="ttname"><a href="iexamine_8cpp.html#ac76ca28673c019de7a65eff29863dd13">getGasDiscountName</a></div><div class="ttdeci">static std::string getGasDiscountName(int discount)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05067">iexamine.cpp:5067</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_afca39ca1d122372a0da6581d3dc2a014"><div class="ttname"><a href="iexamine_8cpp.html#afca39ca1d122372a0da6581d3dc2a014">getGasPricePerLiter</a></div><div class="ttdeci">static int getGasPricePerLiter(int discount)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05080">iexamine.cpp:5080</a></div></div>
<div class="ttc" id="aiexamine_8h_html_ab3ce677220bcf4e6907814a2adf534fa"><div class="ttname"><a href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534fa">fuel_station_fuel_type</a></div><div class="ttdeci">fuel_station_fuel_type</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00040">iexamine.h:40</a></div></div>
<div class="ttc" id="aiexamine_8h_html_ab3ce677220bcf4e6907814a2adf534faa72ce08fe97aa480e3db0333632e9c59b"><div class="ttname"><a href="iexamine_8h.html#ab3ce677220bcf4e6907814a2adf534faa72ce08fe97aa480e3db0333632e9c59b">FUEL_TYPE_NONE</a></div><div class="ttdeci">@ FUEL_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8h_source.html#l00041">iexamine.h:41</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a6987b7ccb6bfbaa1be3d45360eb106f6"><div class="ttname"><a href="namespaceiexamine.html#a6987b7ccb6bfbaa1be3d45360eb106f6">iexamine::toPumpFuel</a></div><div class="ttdeci">bool toPumpFuel(const tripoint &amp;src, const tripoint &amp;dst, int units)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05105">iexamine.cpp:5105</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a9c5488f1bdb7e18772c51ec43e6e9806"><div class="ttname"><a href="namespaceiexamine.html#a9c5488f1bdb7e18772c51ec43e6e9806">iexamine::getNearFilledGasTank</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; getNearFilledGasTank(const tripoint &amp;center, int &amp;fuel_units, fuel_station_fuel_type &amp;fuel_type)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04983">iexamine.cpp:4983</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_ada89967c78ff4632820932976c12ab8b"><div class="ttname"><a href="namespaceiexamine.html#ada89967c78ff4632820932976c12ab8b">iexamine::getGasPumpByNumber</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; getGasPumpByNumber(const tripoint &amp;p, int number)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l05091">iexamine.cpp:5091</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a></div><div class="ttdeci">@ activity</div></div>
<div class="ttc" id="anamespaceunits_html_a6bbf7141fbe187ada34446a4d1ed1b4e"><div class="ttname"><a href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">units::money</a></div><div class="ttdeci">quantity&lt; int, money_in_cent_tag &gt; money</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00063">units_fwd.h:63</a></div></div>
<div class="ttc" id="aoutput_8h_html_afc5db1b09e0b37fa89eda5966c61b1f5"><div class="ttname"><a href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a></div><div class="ttdeci">std::string format_money(int cents)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l01141">output.h:1141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::activity</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="uistate_8h_source.html#l00112">uistatedata::ags_pay_gas_selected_pump</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="ui_8h_source.html#l00434">uilist::callback</a>, <a class="el" href="iexamine_8cpp_source.html#l01383">can_hack()</a>, <a class="el" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of()</a>, <a class="el" href="iexamine_8cpp_source.html#l05037">findBestGasDiscount()</a>, <a class="el" href="output_8h_source.html#l01141">format_money()</a>, <a class="el" href="iexamine_8cpp_source.html#l05132">fromPumpFuel()</a>, <a class="el" href="iexamine_8h_source.html#l00043">FUEL_TYPE_DIESEL</a>, <a class="el" href="iexamine_8h_source.html#l00042">FUEL_TYPE_GASOLINE</a>, <a class="el" href="iexamine_8h_source.html#l00041">FUEL_TYPE_NONE</a>, <a class="el" href="iexamine_8cpp_source.html#l05067">getGasDiscountName()</a>, <a class="el" href="iexamine_8cpp_source.html#l05080">getGasPricePerLiter()</a>, <a class="el" href="iexamine_8cpp_source.html#l05091">getGasPumpByNumber()</a>, <a class="el" href="iexamine_8cpp_source.html#l04983">getNearFilledGasTank()</a>, <a class="el" href="iexamine_8cpp_source.html#l04966">getNearPumpCount()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="item_8cpp_source.html#l08578">item::is_cash_card()</a>, <a class="el" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="string__input__popup_8h_source.html#l00166">string_input_popup::only_digits()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00361">string_input_popup::query_int()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00526">uilist::selected</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="iexamine_8cpp_source.html#l05048">str_to_illiterate_str()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00666">string_input_popup::text()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="string__input__popup_8h_source.html#l00113">string_input_popup::title()</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="iexamine_8cpp_source.html#l05105">toPumpFuel()</a>, <a class="el" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, <a class="el" href="iexamine_8cpp_source.html#l01397">try_start_hacking()</a>, <a class="el" href="iexamine_8cpp_source.html#l05159">turnOnSelectedPump()</a>, <a class="el" href="game_8cpp_source.html#l00385">uistate</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, <a class="el" href="ui_8h_source.html#l00437">uilist::w_y_setup</a>, and <a class="el" href="string__input__popup_8h_source.html#l00151">string_input_popup::width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00790">get_hack_type()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ab319de46f8e2400c7c87e55af682351f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab319de46f8e2400c7c87e55af682351f">&#9670;&nbsp;</a></span>pedestal_temple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pedestal_temple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put petrified eye on pedestal causing it to sink into ground and open temple. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02038">2038</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;{</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">if</span>( !items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; items.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> ) {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a> );</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a>().<a class="code" href="classtimed__event__manager.html#a1c1a0176abe4ee754ac79e08aebe6c84">add</a>( <a class="code" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a531546b69ef1b489aa33125d3efa48e9">timed_event_type::TEMPLE_OPEN</a>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 10_seconds );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, 1 ) &amp;&amp;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;               <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Place your petrified eye on the pedestal?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        you.<a class="code" href="classCharacter.html#a24e0a245e9fafffb3c4a2e676b5cb635">use_amount</a>( <a class="code" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, 1 );</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a> );</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        <a class="code" href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a>().<a class="code" href="classtimed__event__manager.html#a1c1a0176abe4ee754ac79e08aebe6c84">add</a>( <a class="code" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a531546b69ef1b489aa33125d3efa48e9">timed_event_type::TEMPLE_OPEN</a>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 10_seconds );</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This pedestal is engraved in eye-shaped diagrams, and has a &quot;</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    <span class="stringliteral">&quot;large semi-spherical indentation at the top.&quot;</span> ) );</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a39faa1c7d3f986d7dd89f347f4e2f43f"><div class="ttname"><a href="iexamine_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a></div><div class="ttdeci">static const ter_str_id ter_t_dirt(&quot;t_dirt&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6603cf1f31fc21c92a70ca94953d6da2"><div class="ttname"><a href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a></div><div class="ttdeci">static const itype_id itype_petrified_eye(&quot;petrified_eye&quot;)</div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7a531546b69ef1b489aa33125d3efa48e9"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a531546b69ef1b489aa33125d3efa48e9">timed_event_type::TEMPLE_OPEN</a></div><div class="ttdeci">@ TEMPLE_OPEN</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="timed__event_8cpp_source.html#l00388">timed_event_manager::add()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13861">get_timed_events()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a531546b69ef1b489aa33125d3efa48e9">TEMPLE_OPEN</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a39faa1c7d3f986d7dd89f347f4e2f43f">ter_t_dirt</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character_8cpp_source.html#l09595">Character::use_amount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="aa4cbb108c2dfb614e900d1e0d5c02d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4cbb108c2dfb614e900d1e0d5c02d36">&#9670;&nbsp;</a></span>pedestal_wyrm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pedestal_wyrm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Spawn 1d4 wyrms and sink pedestal into ground. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02001">2001</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;{</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">if</span>( !items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> &amp;&amp;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove the petrified eye from the pedestal?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160; </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            <a class="code" href="classitem.html">item</a> eye( <a class="code" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a> );</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( eye );</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <span class="comment">// Send in a few wyrms to start things off.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac9d4fbdbb600ed5b519c7065aea1af90">event_type::awakes_dark_wyrms</a>&gt;();</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p : here.<a class="code" href="classmap.html#a61d83c54adde6e54f8abf5a2b6834ea1">points_on_zlevel</a>() ) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( p ) == <a class="code" href="iexamine_8cpp.html#aa6ab067d6cbd463060eb6dea201ed4ad">ter_t_orifice</a> ) {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_around( <a class="code" href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a>, p, 1 );</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                }</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( examp, 80, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;an ominous grinding noise…&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                           <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;stones_grinding&quot;</span> );</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The pedestal sinks into the ground…&quot;</span> ) );</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aac746a69fccdce55c55a9fe973501393">ter_t_rock_floor</a> );</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <a class="code" href="game_8cpp.html#a843dd63af25a83f66fdc5ea2bea33f01">get_timed_events</a>().<a class="code" href="classtimed__event__manager.html#a1c1a0176abe4ee754ac79e08aebe6c84">add</a>( <a class="code" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a7f9b8abf1e800e55b929fc27c82450b0">timed_event_type::SPAWN_WYRMS</a>,</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                    <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 30_seconds, 60_seconds ) );</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You decided to leave the petrified eye on the pedestal…&quot;</span> ) );</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;}</div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aclassmap_html_a61d83c54adde6e54f8abf5a2b6834ea1"><div class="ttname"><a href="classmap.html#a61d83c54adde6e54f8abf5a2b6834ea1">map::points_on_zlevel</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_on_zlevel() const</div><div class="ttdoc">Yields a range of all points that are contained in the map and have the z-level of this map (abs_sub)...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10143">map.cpp:10143</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731ac9d4fbdbb600ed5b519c7065aea1af90"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731ac9d4fbdbb600ed5b519c7065aea1af90">event_type::awakes_dark_wyrms</a></div><div class="ttdeci">@ awakes_dark_wyrms</div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5561ff0e93d53b7928bfec9ba954ff40"><div class="ttname"><a href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a></div><div class="ttdeci">static const mtype_id mon_dark_wyrm(&quot;mon_dark_wyrm&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa6ab067d6cbd463060eb6dea201ed4ad"><div class="ttname"><a href="iexamine_8cpp.html#aa6ab067d6cbd463060eb6dea201ed4ad">ter_t_orifice</a></div><div class="ttdeci">static const ter_str_id ter_t_orifice(&quot;t_orifice&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aac746a69fccdce55c55a9fe973501393"><div class="ttname"><a href="iexamine_8cpp.html#aac746a69fccdce55c55a9fe973501393">ter_t_rock_floor</a></div><div class="ttdeci">static const ter_str_id ter_t_rock_floor(&quot;t_rock_floor&quot;)</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="atimed__event_8h_html_ad10eb56251f11e9a5694491529afbcc7a7f9b8abf1e800e55b929fc27c82450b0"><div class="ttname"><a href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a7f9b8abf1e800e55b929fc27c82450b0">timed_event_type::SPAWN_WYRMS</a></div><div class="ttdeci">@ SPAWN_WYRMS</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="timed__event_8cpp_source.html#l00388">timed_event_manager::add()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731ac9d4fbdbb600ed5b519c7065aea1af90">awakes_dark_wyrms</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13861">get_timed_events()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00451">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="iexamine_8cpp.html#a6603cf1f31fc21c92a70ca94953d6da2">itype_petrified_eye</a>, <a class="el" href="iexamine_8cpp.html#a5561ff0e93d53b7928bfec9ba954ff40">mon_dark_wyrm</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="map_8cpp_source.html#l10143">map::points_on_zlevel()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="timed__event_8h.html#ad10eb56251f11e9a5694491529afbcc7a7f9b8abf1e800e55b929fc27c82450b0">SPAWN_WYRMS</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#aa6ab067d6cbd463060eb6dea201ed4ad">ter_t_orifice</a>, <a class="el" href="iexamine_8cpp.html#aac746a69fccdce55c55a9fe973501393">ter_t_rock_floor</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a849d5b536feff95718be5b07437fe3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849d5b536feff95718be5b07437fe3fe">&#9670;&nbsp;</a></span>pit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If there is a 2x4 around, prompt placing it across pit. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01716">1716</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;{</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span>( !crafting_inv.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, 1 ) ) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    std::vector&lt;item_comp&gt; planks;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    planks.emplace_back( <a class="code" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, 1 );</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Place a plank over the pit?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        you.<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( planks, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> &amp;ter_pit = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a> ) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a964597094d304d60b22ca70fef704887">ter_t_pit_covered</a> );</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#a5b54905268cad0ebc1a842a9594b0e65">ter_t_pit_spiked</a> ) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acad75af712a73a115640cd7704d89261">ter_t_pit_spiked_covered</a> );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#abd49233bc2fac36e7e5fd2ba24dcac17">ter_t_pit_glass</a> ) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a2b39756cbfd66614c3f420f23b5d1938">ter_t_pit_glass_covered</a> );</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You place a plank of wood over the pit.&quot;</span> ) );</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a2903765637d33796105b203898a261ba"><div class="ttname"><a href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a></div><div class="ttdeci">static const itype_id itype_2x4(&quot;2x4&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2b39756cbfd66614c3f420f23b5d1938"><div class="ttname"><a href="iexamine_8cpp.html#a2b39756cbfd66614c3f420f23b5d1938">ter_t_pit_glass_covered</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_glass_covered(&quot;t_pit_glass_covered&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5b54905268cad0ebc1a842a9594b0e65"><div class="ttname"><a href="iexamine_8cpp.html#a5b54905268cad0ebc1a842a9594b0e65">ter_t_pit_spiked</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_spiked(&quot;t_pit_spiked&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a964597094d304d60b22ca70fef704887"><div class="ttname"><a href="iexamine_8cpp.html#a964597094d304d60b22ca70fef704887">ter_t_pit_covered</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_covered(&quot;t_pit_covered&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aaa258c5465ca70ec4568914f0975902c"><div class="ttname"><a href="iexamine_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a></div><div class="ttdeci">static const ter_str_id ter_t_pit(&quot;t_pit&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_abd49233bc2fac36e7e5fd2ba24dcac17"><div class="ttname"><a href="iexamine_8cpp.html#abd49233bc2fac36e7e5fd2ba24dcac17">ter_t_pit_glass</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_glass(&quot;t_pit_glass&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_acad75af712a73a115640cd7704d89261"><div class="ttname"><a href="iexamine_8cpp.html#acad75af712a73a115640cd7704d89261">ter_t_pit_spiked_covered</a></div><div class="ttdeci">static const ter_str_id ter_t_pit_spiked_covered(&quot;t_pit_spiked_covered&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="iexamine_8cpp.html#a2903765637d33796105b203898a261ba">itype_2x4</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a>, <a class="el" href="iexamine_8cpp.html#a964597094d304d60b22ca70fef704887">ter_t_pit_covered</a>, <a class="el" href="iexamine_8cpp.html#abd49233bc2fac36e7e5fd2ba24dcac17">ter_t_pit_glass</a>, <a class="el" href="iexamine_8cpp.html#a2b39756cbfd66614c3f420f23b5d1938">ter_t_pit_glass_covered</a>, <a class="el" href="iexamine_8cpp.html#a5b54905268cad0ebc1a842a9594b0e65">ter_t_pit_spiked</a>, and <a class="el" href="iexamine_8cpp.html#acad75af712a73a115640cd7704d89261">ter_t_pit_spiked_covered</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="trapfunc_8cpp_source.html#l01155">trapfunc::sinkhole()</a>.</p>

</div>
</div>
<a id="a0dd7a7bc6a140ae90499420be27ac318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd7a7bc6a140ae90499420be27ac318">&#9670;&nbsp;</a></span>pit_covered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::pit_covered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt removing the 2x4 placed across the pit. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01745">1745</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;{</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove cover?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <a class="code" href="classitem.html">item</a> plank( <span class="stringliteral">&quot;2x4&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove the plank.&quot;</span> ) );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), plank );</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> &amp;ter_pit = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( examp );</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#a964597094d304d60b22ca70fef704887">ter_t_pit_covered</a> ) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a> );</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#acad75af712a73a115640cd7704d89261">ter_t_pit_spiked_covered</a> ) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a5b54905268cad0ebc1a842a9594b0e65">ter_t_pit_spiked</a> );</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_pit == <a class="code" href="iexamine_8cpp.html#a2b39756cbfd66614c3f420f23b5d1938">ter_t_pit_glass_covered</a> ) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#abd49233bc2fac36e7e5fd2ba24dcac17">ter_t_pit_glass</a> );</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#aaa258c5465ca70ec4568914f0975902c">ter_t_pit</a>, <a class="el" href="iexamine_8cpp.html#a964597094d304d60b22ca70fef704887">ter_t_pit_covered</a>, <a class="el" href="iexamine_8cpp.html#abd49233bc2fac36e7e5fd2ba24dcac17">ter_t_pit_glass</a>, <a class="el" href="iexamine_8cpp.html#a2b39756cbfd66614c3f420f23b5d1938">ter_t_pit_glass_covered</a>, <a class="el" href="iexamine_8cpp.html#a5b54905268cad0ebc1a842a9594b0e65">ter_t_pit_spiked</a>, <a class="el" href="iexamine_8cpp.html#acad75af712a73a115640cd7704d89261">ter_t_pit_spiked_covered</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a54a7f677b72d66d7f8415e577f59d1dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54a7f677b72d66d7f8415e577f59d1dd">&#9670;&nbsp;</a></span>plant_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::plant_seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>seed_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actual planting of selected seed. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02530">2530</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <a class="code" href="classplayer__activity.html">player_activity</a> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code" href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a>, to_moves&lt;int&gt;( 30_seconds ) );</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.placement = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp );</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.str_values.emplace_back( seed_id );</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a0d5aea7689f3beb0f49eac50cd882a8b"><div class="ttname"><a href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a></div><div class="ttdeci">static const activity_id ACT_PLANT_SEED(&quot;ACT_PLANT_SEED&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="iexamine_8cpp.html#a0d5aea7689f3beb0f49eac50cd882a8b">ACT_PLANT_SEED</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, and <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02541">dirtmound()</a>, and <a class="el" href="activity__item__handling_8cpp_source.html#l02970">generic_multi_activity_do()</a>.</p>

</div>
</div>
<a id="a1d78ab741ca0cc4a9fb0e7103f07b15d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d78ab741ca0cc4a9fb0e7103f07b15d">&#9670;&nbsp;</a></span>portable_structure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::portable_structure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine structure's type and prompts its removal. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01674">1674</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;{</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">furn_str_id</a> fid = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>();</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keyword">const</span> std::pair&lt;itype_id, const deploy_tent_actor *&gt; tent_item_type = <a class="code" href="iexamine_8cpp.html#abd357e80986973f42404e84f85b59ccc">find_tent_itype</a>( fid );</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">if</span>( tent_item_type.first.is_null() ) {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;unknown furniture %s: don&#39;t know how to transform it into an item&quot;</span>, fid.<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> dropped = tent_item_type.first;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( dropped );</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordtype">int</span> radius;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span>( tent_item_type.second ) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keyword">const</span> <a class="code" href="classdeploy__tent__actor.html">deploy_tent_actor</a> &amp;actor = *tent_item_type.second;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="keywordflow">if</span>( !actor.<a class="code" href="classdeploy__tent__actor.html#a2da9ea681c49cf945005dcd6228652b7">check_intact</a>( examp ) ) {</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            <span class="keywordflow">if</span>( !actor.<a class="code" href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">broken_type</a> ) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is broken and can not be picked up.&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            dropped = *actor.<a class="code" href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">broken_type</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;damaged %s&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        radius = actor.<a class="code" href="classdeploy__tent__actor.html#a260f63c66f89a2f9e89756689891e17a">radius</a>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        radius = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 1, fid-&gt;<a class="code" href="structmap__data__common__t.html#ad09f16bf5be54a69df7a005b1c9070d7">bash</a>.<a class="code" href="structmap__bash__info.html#a25dd9c75c9b15f1f34061258239f8df2">collapse_radius</a> );</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take down the %s?&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="classtent__deconstruct__activity__actor.html">tent_deconstruct_activity_actor</a> actor( to_moves&lt;int&gt;( 20_minutes ), radius, examp, dropped );</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( actor );</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div>
<div class="ttc" id="aclassdeploy__tent__actor_html"><div class="ttname"><a href="classdeploy__tent__actor.html">deploy_tent_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01108">iuse_actor.h:1109</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_a260f63c66f89a2f9e89756689891e17a"><div class="ttname"><a href="classdeploy__tent__actor.html#a260f63c66f89a2f9e89756689891e17a">deploy_tent_actor::radius</a></div><div class="ttdeci">int radius</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01116">iuse_actor.h:1116</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_a2da9ea681c49cf945005dcd6228652b7"><div class="ttname"><a href="classdeploy__tent__actor.html#a2da9ea681c49cf945005dcd6228652b7">deploy_tent_actor::check_intact</a></div><div class="ttdeci">bool check_intact(const tripoint &amp;center) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8cpp_source.html#l05205">iuse_actor.cpp:5205</a></div></div>
<div class="ttc" id="aclassdeploy__tent__actor_html_ade88aa403abf0fdd70b0548d83437426"><div class="ttname"><a href="classdeploy__tent__actor.html#ade88aa403abf0fdd70b0548d83437426">deploy_tent_actor::broken_type</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; broken_type</div><div class="ttdef"><b>Definition:</b> <a href="iuse__actor_8h_source.html#l01117">iuse_actor.h:1117</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclasstent__deconstruct__activity__actor_html"><div class="ttname"><a href="classtent__deconstruct__activity__actor.html">tent_deconstruct_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01507">activity_actor_definitions.h:1508</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_abd357e80986973f42404e84f85b59ccc"><div class="ttname"><a href="iexamine_8cpp.html#abd357e80986973f42404e84f85b59ccc">find_tent_itype</a></div><div class="ttdeci">static std::pair&lt; itype_id, const deploy_tent_actor * &gt; find_tent_itype(const furn_str_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01651">iexamine.cpp:1651</a></div></div>
<div class="ttc" id="astructmap__bash__info_html_a25dd9c75c9b15f1f34061258239f8df2"><div class="ttname"><a href="structmap__bash__info.html#a25dd9c75c9b15f1f34061258239f8df2">map_bash_info::collapse_radius</a></div><div class="ttdeci">int collapse_radius</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00051">mapdata.h:51</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_ad09f16bf5be54a69df7a005b1c9070d7"><div class="ttname"><a href="structmap__data__common__t.html#ad09f16bf5be54a69df7a005b1c9070d7">map_data_common_t::bash</a></div><div class="ttdeci">map_bash_info bash</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00453">mapdata.h:453</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="mapdata_8h_source.html#l00453">map_data_common_t::bash</a>, <a class="el" href="iuse__actor_8h_source.html#l01117">deploy_tent_actor::broken_type</a>, <a class="el" href="iuse__actor_8cpp_source.html#l05205">deploy_tent_actor::check_intact()</a>, <a class="el" href="mapdata_8h_source.html#l00051">map_bash_info::collapse_radius</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iexamine_8cpp_source.html#l01651">find_tent_itype()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iuse__actor_8h_source.html#l01116">deploy_tent_actor::radius</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a700893be2f824844fdc4b4ea4b2ee148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700893be2f824844fdc4b4ea4b2ee148">&#9670;&nbsp;</a></span>pour_into_keg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::pour_into_keg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>liquid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pour liquid into a keg (furniture) on the map. </p>
<p>The transferred charges (if any) will be removed from the liquid item. </p><dl class="section return"><dt>Returns</dt><dd>Whether any charges have been transferred at all. </dd></dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04220">4220</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;{</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> keg_cap = <a class="code" href="iexamine_8cpp.html#a59732e8d3f1cbbbe942381c75cff885f">get_keg_capacity</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    <span class="keywordflow">if</span>( keg_cap &lt;= 0_ml ) {</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    }</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;    <span class="keyword">const</span> std::string keg_name = here.<a class="code" href="classmap.html#a148fb7ddc87ffb1da97dd33e0529c983">name</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160; </div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> stack = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;    <span class="keywordflow">if</span>( stack.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        here.<a class="code" href="classmap.html#af79fb1f952314ecb64890590c91cf5a8">add_item</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, liquid );</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ).<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0; <span class="comment">// Will be set later</span></div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( stack.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() != liquid.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) {</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s already contains some %s, you can&#39;t add a different liquid to it.&quot;</span> ),</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                 keg_name, <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( stack.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>().<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() ) );</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;    }</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160; </div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;drink = stack.<a class="code" href="classitem__stack.html#ae07c2d2c71ea7c7ba2607f2edc5a41df">only_item</a>();</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;    <span class="keywordflow">if</span>( drink.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &gt;= keg_cap ) {</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is full.&quot;</span> ), keg_name );</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    }</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160; </div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pour %1$s into the %2$s.&quot;</span> ), liquid.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), keg_name );</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    <span class="keywordflow">while</span>( liquid.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0 &amp;&amp; drink.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &lt; keg_cap ) {</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;        drink.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;        liquid.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>--;</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;    }</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05329">map::add_item()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="iexamine_8cpp_source.html#l04018">get_keg_capacity()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l01684">map::name()</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="item__stack_8cpp_source.html#l00087">item_stack::only_item()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l01423">activity_handlers::fill_liquid_do_turn()</a>, <a class="el" href="iexamine_8cpp_source.html#l04058">keg()</a>, and <a class="el" href="handle__liquid_8cpp_source.html#l00350">liquid_handler::perform_liquid_transfer()</a>.</p>

</div>
</div>
<a id="a63227416f0cc5cfd60513e79e6c5baa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63227416f0cc5cfd60513e79e6c5baa4">&#9670;&nbsp;</a></span>practice_survival_while_foraging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::practice_survival_while_foraging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence Intelligence caps survival skill gains from foraging Survival decreases survival skill gain from foraging (NEGATIVE) 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07445">7445</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;<span class="comment">    ///\EFFECT_INT Intelligence caps survival skill gains from foraging</span></div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_forage_skill = who.<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> / 3 + 1;<span class="comment"></span></div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;<span class="comment">    ///\EFFECT_SURVIVAL decreases survival skill gain from foraging (NEGATIVE)</span></div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_exp = 2 * ( max_forage_skill - <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( who.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>(</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;                                  <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) ) );</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;    <span class="comment">// Award experience for foraging attempt regardless of success</span></div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;    who.<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, max_exp ), max_forage_skill );</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00579">character.h:579</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l04255">harvest_activity_actor::finish()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l06652">forage_activity_actor::finish()</a>.</p>

</div>
</div>
<a id="adbc8e7beaae7e212a2cfb5a8ac5695da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc8e7beaae7e212a2cfb5a8ac5695da">&#9670;&nbsp;</a></span>quern_examine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::quern_examine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06746">6746</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;{</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a> ) {</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;        <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#af9b776627d41969fbca5089c3d22162c">is_water_shallow_current</a>( examp ) ) {</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The water mill needs to be over shallow flowing water to work.&quot;</span> ) );</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;        }</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;    }</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a> ) {</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( examp ) ) {</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The wind mill needs to be outside in the wind to work.&quot;</span> ) );</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;        }</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;    }</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160; </div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a36b9b01ff65b18784dbac2328d37541d">active</a> = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ||</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;                        here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a>;</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160; </div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;    <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;active mill was empty!&quot;</span> );</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a> );</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> ) {</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a> );</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;        }</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;    }</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160; </div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;    <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_mill_active was empty, and had fake_milling_item!&quot;</span> );</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a> );</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> ) {</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a> );</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;        }</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;        items_here.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;    }</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160; </div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> time_left = 0_turns;</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> f_volume = 0_ml;</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;    <span class="keywordtype">bool</span> f_check = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160; </div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;        <span class="keywordflow">if</span>( it.typeId() != <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;            f_check = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;            f_volume += it.volume();</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;        }</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;        <span class="keywordflow">if</span>( active &amp;&amp; it.typeId() == <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;            time_left = <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( it.item_counter );</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;        }</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;    }</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160; </div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> empty = f_volume == 0_ml;</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> full = f_volume &gt;= <a class="code" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a>;</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity = <a class="code" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a> - f_volume;</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160; </div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;    <a class="code" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;    smenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with the mill?&quot;</span> );</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;    smenu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160; </div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;    smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Inspect mill&quot;</span> ) );</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160; </div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;    <span class="keywordflow">if</span>( !active ) {</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 1, !empty, <span class="charliteral">&#39;r&#39;</span>,</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;                             empty ?  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove brake and start milling… insert some products for milling first&quot;</span> ) :</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove brake and start milling&quot;</span> ),</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;                             <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove brake and start milling, milling will take about %s.&quot;</span> ),</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;                                            <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( <a class="code" href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a> ) ) );</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160; </div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 2, !full, <span class="charliteral">&#39;p&#39;</span>,</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;                             full ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert products for milling… mill is full&quot;</span> ) :</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;                             <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert products for milling… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;                                            <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity ), <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() ),</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fill the mill with starchy products such as wheat, barley or oats.&quot;</span> ) );</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160; </div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;        <span class="keywordflow">if</span>( f_check ) {</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;            smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 3, f_check, <span class="charliteral">&#39;e&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove products from mill&quot;</span> ) );</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;        }</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160; </div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 4, <span class="keyword">true</span>, <span class="charliteral">&#39;x&#39;</span>,</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Apply brake to mill&quot;</span> ),</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Applying the brake will stop milling process.&quot;</span> ) );</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;    }</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160; </div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;    smenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160; </div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;    <span class="keywordflow">switch</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;        <span class="keywordflow">case</span> 0: { <span class="comment">//inspect mill</span></div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;            std::string pop;</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;                pop = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a mill here.  It is turning and milling.&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;                <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;                    pop += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It should take about %s to finish milling.&quot;</span> ),</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;                                          <a class="code" href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a>( time_left ) ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;                }</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;                pop += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a mill here.&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;            }</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;            pop += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inspect its contents and find: &quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;            <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;                pop += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;…that it is empty.&quot;</span> );</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;                    <span class="keywordflow">if</span>( it.typeId() == <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;                        pop += <span class="stringliteral">&quot;\n&quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You see some grains that are not yet milled to fine flour.&quot;</span> ),</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;                                                <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;                    }</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;                    pop += <span class="stringliteral">&quot;-&gt; &quot;</span> + it.display_name() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;                }</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;            }</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( pop, <a class="code" href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a> );</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;        }</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;            <span class="comment">//activate</span></div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is already milling.&quot;</span> ) );</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;                <a class="code" href="iexamine_8cpp.html#a82746e124cdef54374371370ef84bdcd">mill_activate</a>( you, examp );</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;            }</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;            <span class="comment">// load food</span></div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;            <a class="code" href="iexamine_8cpp.html#a2fdf298585755fa90e9262e7ae58dbd7">mill_load_food</a>( you, examp, remaining_capacity );</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;            <span class="comment">// remove food</span></div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items_here.begin(); it != items_here.end(); ) {</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;                <span class="keywordflow">if</span>( it-&gt;typeId() != <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;                    <span class="comment">// get handling cost before the item reference is invalidated</span></div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> handling_cost = -you.<a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( *it );</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160; </div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove %s from the mill.&quot;</span> ), it-&gt;tname() );</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *it );</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;                    it = items_here.erase( it );</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;                    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( handling_cost );</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;                    ++it;</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;                }</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;            }</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;                <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;                    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a> );</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> ) {</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;                    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a> );</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;                }</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the milling process.&quot;</span> ) );</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;            }</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a> ) {</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a> );</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a> ) {</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a> );</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;            }</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items_here.begin(); it != items_here.end(); ) {</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;                <span class="keywordflow">if</span>( it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a> ) {</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;                    it = items_here.erase( it );</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;                    ++it;</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;                }</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;            }</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the milling process.&quot;</span> ) );</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;    }</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a595c4d560d7152dceb681820e7e00882"><div class="ttname"><a href="calendar_8cpp.html#a595c4d560d7152dceb681820e7e00882">to_string_clipped</a></div><div class="ttdeci">static std::string to_string_clipped(const int num, const clipped_unit type, const clipped_align align)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00427">calendar.cpp:427</a></div></div>
<div class="ttc" id="aclassCharacter_html_af5284cbdea522644fc9a677dd7e3f847"><div class="ttname"><a href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">Character::item_handling_cost</a></div><div class="ttdeci">int item_handling_cost(const item &amp;it, bool penalties=true, int base_cost=INVENTORY_HANDLING_PENALTY, int charges_in_it=-1, bool bulk_cost=false) const</div><div class="ttdoc">Calculate (but do not deduct) the number of moves required when handling (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07285">character.cpp:7285</a></div></div>
<div class="ttc" id="aclassmap_html_af9b776627d41969fbca5089c3d22162c"><div class="ttname"><a href="classmap.html#af9b776627d41969fbca5089c3d22162c">map::is_water_shallow_current</a></div><div class="ttdeci">bool is_water_shallow_current(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03383">map.cpp:3383</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00221">calendar.h:221</a></div></div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00451">ui.h:451</a></div></div>
<div class="ttc" id="aclassuilist_html_adc2a36afdfede40aa5927aa8c3b0d526"><div class="ttname"><a href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">uilist::addentry_desc</a></div><div class="ttdeci">void addentry_desc(const std::string &amp;txt, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01227">ui.cpp:1227</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a04c54905099b56bd8994d8fabb786ce2"><div class="ttname"><a href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a></div><div class="ttdeci">static const itype_id itype_fake_milling_item(&quot;fake_milling_item&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2fdf298585755fa90e9262e7ae58dbd7"><div class="ttname"><a href="iexamine_8cpp.html#a2fdf298585755fa90e9262e7ae58dbd7">mill_load_food</a></div><div class="ttdeci">static void mill_load_food(Character &amp;you, const tripoint &amp;examp, const units::volume &amp;remaining_capacity)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06600">iexamine.cpp:6600</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a82746e124cdef54374371370ef84bdcd"><div class="ttname"><a href="iexamine_8cpp.html#a82746e124cdef54374371370ef84bdcd">mill_activate</a></div><div class="ttdeci">static void mill_activate(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06098">iexamine.cpp:6098</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab52e720c1cc88c381313199ac4a3b26a"><div class="ttname"><a href="iexamine_8cpp.html#ab52e720c1cc88c381313199ac4a3b26a">milling_time</a></div><div class="ttdeci">static const time_duration milling_time</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l00301">iexamine.cpp:301</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_a36b9b01ff65b18784dbac2328d37541d"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a36b9b01ff65b18784dbac2328d37541d">anonymous_namespace{item_tname.cpp}::active</a></div><div class="ttdeci">std::string active(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00484">item_tname.cpp:484</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_a4c0565d55310ec1ac37c77821801a1fe"><div class="ttname"><a href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a></div><div class="ttdeci">static const units::volume MAX_FOOD_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06082">iexamine.cpp:6082</a></div></div>
<div class="ttc" id="aoutput_8h_html_ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3"><div class="ttname"><a href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a></div><div class="ttdeci">@ PF_NONE</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00475">output.h:475</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="ui_8cpp_source.html#l01227">uilist::addentry_desc()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="color_8h_source.html#l00020">c_green</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="ui_8h_source.html#l00451">uilist::desc_enabled</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="output_8cpp_source.html#l03231">format_volume()</a>, <a class="el" href="calendar_8h_source.html#l00221">time_duration::from_turns()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#a517d0cb6bd386ffeeab81fd020b0231c">furn_f_water_mill</a>, <a class="el" href="iexamine_8cpp.html#a49d1951d52402e972f602eb8767311f1">furn_f_water_mill_active</a>, <a class="el" href="iexamine_8cpp.html#a179865191057812d556b754c5cefab72">furn_f_wind_mill</a>, <a class="el" href="iexamine_8cpp.html#a056b7253b0c9139b80e29917b415eeb4">furn_f_wind_mill_active</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l03383">map::is_water_shallow_current()</a>, <a class="el" href="item_8h_source.html#l03142">item::item_counter</a>, <a class="el" href="character_8cpp_source.html#l07285">Character::item_handling_cost()</a>, <a class="el" href="iexamine_8cpp.html#a04c54905099b56bd8994d8fabb786ce2">itype_fake_milling_item</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l06082">sm_rack::MAX_FOOD_VOLUME</a>, <a class="el" href="iexamine_8cpp_source.html#l06098">mill_activate()</a>, <a class="el" href="iexamine_8cpp_source.html#l06600">mill_load_food()</a>, <a class="el" href="iexamine_8cpp_source.html#l00301">milling_time</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8h_source.html#l00475">PF_NONE</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item__stack_8cpp_source.html#l00014">item_stack::size()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00427">to_string_clipped()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00096">volume_units_abbr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a8076e42db14f124567108b5754caa31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8076e42db14f124567108b5754caa31a">&#9670;&nbsp;</a></span>query_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iexamine::query_seed </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="iexamine_8h.html#af451d8686f9b469b7d76b4d643773b6a">seed_tuple</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>seed_entries</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Choose seed for planting. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l02502">2502</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;{</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    smenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use which seed?&quot;</span> );</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : seed_entries ) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="keyword">const</span> std::string &amp;seed_name = std::get&lt;1&gt;( entry );</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <span class="keywordtype">int</span> seed_count = std::get&lt;2&gt;( entry );</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        std::string format = seed_count &gt; 0 ? <span class="stringliteral">&quot;%s (%d)&quot;</span> : <span class="stringliteral">&quot;%s&quot;</span>;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160; </div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( count++, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, format.c_str(),</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                        seed_name, seed_count );</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    }</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160; </div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    smenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 ) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="keywordflow">return</span> smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <span class="keywordflow">return</span> seed_entries.size();</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    }</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, and <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l02541">dirtmound()</a>, <a class="el" href="clzones_8cpp_source.html#l00304">plot_options::query_seed()</a>, and <a class="el" href="vehicle__use_8cpp_source.html#l00878">vehicle::reload_seeds()</a>.</p>

</div>
</div>
<a id="aad09594b19d42ed43aaf6cb9cdac7354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad09594b19d42ed43aaf6cb9cdac7354">&#9670;&nbsp;</a></span>reload_furniture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::reload_furniture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04863">4863</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;{</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iexamine_8cpp.html#a095f88af7715088dd1106ee4ad2615c5">reload_furniture</a>( you, examp, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a095f88af7715088dd1106ee4ad2615c5"><div class="ttname"><a href="iexamine_8cpp.html#a095f88af7715088dd1106ee4ad2615c5">reload_furniture</a></div><div class="ttdeci">static void reload_furniture(Character &amp;you, const tripoint &amp;examp, bool allow_unload)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04738">iexamine.cpp:4738</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l04738">reload_furniture()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a431b43fb7e1ea71df0686c6772bca406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a431b43fb7e1ea71df0686c6772bca406">&#9670;&nbsp;</a></span>rubble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::rubble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompt removal of rubble. </p>
<p>Select best shovel and invoke "CLEAR_RUBBLE" on tile. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01488">1488</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;{</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordtype">int</span> moves;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, 3 ) || you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a> ) ||</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac23174d2f2548a51716a75790ab8a54d">trait_BURROWLARGE</a> ) ) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        moves = to_moves&lt;int&gt;( 1_minutes );</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, 2 ) ) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        moves = to_moves&lt;int&gt;( 2_minutes );</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;If only you had a shovel…&quot;</span> ) );</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    }</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">if</span>( ( here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp ) || here.<a class="code" href="classmap.html#a2578f467596e13fb8631fd01126a9667">can_see_trap_at</a>( examp, you ) ||</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;          <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at( examp ) != <span class="keyword">nullptr</span> ) &amp;&amp;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Clear up that %s?&quot;</span> ), here.<a class="code" href="classmap.html#a20933e73f539d62c2a10bed22bb9a0c7">furnname</a>( examp ) ) ) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classclear__rubble__activity__actor.html">clear_rubble_activity_actor</a>( moves ) );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp );</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div>
<div class="ttc" id="aclassclear__rubble__activity__actor_html"><div class="ttname"><a href="classclear__rubble__activity__actor.html">clear_rubble_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01912">activity_actor_definitions.h:1913</a></div></div>
<div class="ttc" id="aclassmap_html_a2578f467596e13fb8631fd01126a9667"><div class="ttname"><a href="classmap.html#a2578f467596e13fb8631fd01126a9667">map::can_see_trap_at</a></div><div class="ttdeci">bool can_see_trap_at(const tripoint &amp;p, const Character &amp;c) const</div><div class="ttdoc">See trap::can_see, which is called for the trap here.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06208">map.cpp:6208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="map_8cpp_source.html#l06208">map::can_see_trap_at()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iexamine_8cpp.html#a17ec945038dd28db3e0041be27e319ad">trait_BURROW</a>, <a class="el" href="iexamine_8cpp.html#ac23174d2f2548a51716a75790ab8a54d">trait_BURROWLARGE</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a32bf9c3c07c5727daa67e7c820b9831b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32bf9c3c07c5727daa67e7c820b9831b">&#9670;&nbsp;</a></span>safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to crack safe through audio-feedback manual lock manipulation. </p>
<p>Try to unlock the safe by moving the dial and listening for the mechanism to "click into place." Time per attempt affected by perception and mechanics. 30 minutes per attempt minimum. Small chance of just guessing the combo without listening device. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01776">1776</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;{</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordtype">bool</span> has_cracking_tool = you.<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iexamine_8cpp.html#a610986b64f703130f8ed30dd7837d917">json_flag_SAFECRACK_NO_TOOL</a> );</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">// short-circuit to avoid the more expensive iteration over items</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    has_cracking_tool = has_cracking_tool || you.<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <a class="code" href="flag_8cpp.html#a8ad926ea61a27f57396d7e199151f2d0">flag_SAFECRACK</a> );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span>( !has_cracking_tool ) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="comment">// Assume a 3 digit 100-number code. Many safes allow adjacent + 1 dial locations to match,</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="comment">// so 1/20^3, or 1/8,000 odds.</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="comment">// Additionally, safes can be left-handed or right-handed, doubling the problem space.</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="comment">// The dialing procedures for safes vary, I&#39;m estimating 5 procedures.</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="comment">// See https://hoogerhydesafe.com/resources/combination-lock-dialing-procedures/</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="comment">// At the end of the day, that means a 1 / 80,000 chance per attempt.</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="comment">// If someone is interested, they can feel free to add a proficiency for</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="comment">// &quot;safe recognition&quot; to mitigate or eliminate this 2x and 5x factor.</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 80000 ) ) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You mess with the dial for a little bit… and it opens!&quot;</span> ) );</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a7642ad608b56a1b486285ad95959ccea">furn_f_safe_o</a> );</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You mess with the dial for a little bit.&quot;</span> ) );</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160; </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">is_deaf</a>() ) {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t crack a safe while deaf!&quot;</span> ) );</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a> ) ) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t crack a safe while listening to music!&quot;</span> ) );</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attempt to crack the safe?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classsafecracking__activity__actor.html">safecracking_activity_actor</a>( examp ) );</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a826c5c424fe53228582a9995a5bad7d5"><div class="ttname"><a href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">Character::cache_has_item_with</a></div><div class="ttdeci">bool cache_has_item_with(const itype_id &amp;type, const std::function&lt; bool(const item &amp;)&gt; &amp;check_func=return_true&lt; item &gt;) const</div><div class="ttdoc">Returns true if the character has an item with given flag and/or that passes the given boolean item f...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09416">character.cpp:9416</a></div></div>
<div class="ttc" id="aclassCharacter_html_aecadb13556a47d015e1a1ac7c46d56a7"><div class="ttname"><a href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">Character::is_deaf</a></div><div class="ttdeci">bool is_deaf() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04614">character.cpp:4614</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclasssafecracking__activity__actor_html"><div class="ttname"><a href="classsafecracking__activity__actor.html">safecracking_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00867">activity_actor_definitions.h:868</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a8ad926ea61a27f57396d7e199151f2d0"><div class="ttname"><a href="flag_8cpp.html#a8ad926ea61a27f57396d7e199151f2d0">flag_SAFECRACK</a></div><div class="ttdeci">const flag_id flag_SAFECRACK(&quot;SAFECRACK&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a610986b64f703130f8ed30dd7837d917"><div class="ttname"><a href="iexamine_8cpp.html#a610986b64f703130f8ed30dd7837d917">json_flag_SAFECRACK_NO_TOOL</a></div><div class="ttdeci">static const json_character_flag json_flag_SAFECRACK_NO_TOOL(&quot;SAFECRACK_NO_TOOL&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac9366c6b0a0c6068675bf92321130b46"><div class="ttname"><a href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a></div><div class="ttdeci">static const efftype_id effect_earphones(&quot;earphones&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l09416">Character::cache_has_item_with()</a>, <a class="el" href="iexamine_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a>, <a class="el" href="flag_8cpp.html#a8ad926ea61a27f57396d7e199151f2d0">flag_SAFECRACK</a>, <a class="el" href="iexamine_8cpp.html#a7642ad608b56a1b486285ad95959ccea">furn_f_safe_o</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l04614">Character::is_deaf()</a>, <a class="el" href="iexamine_8cpp.html#a610986b64f703130f8ed30dd7837d917">json_flag_SAFECRACK_NO_TOOL</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l03251">Character::can_pickWeight()</a>, <a class="el" href="character_8cpp_source.html#l03261">Character::can_pickWeight_partial()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="vehicle_8cpp_source.html#l04366">vehicle::lift_thrust_of_rotorcraft()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00148">spell_effect::short_range_teleport()</a>, <a class="el" href="trapfunc_8cpp_source.html#l01115">sinkhole_safety_roll()</a>, <a class="el" href="mutation_8cpp_source.html#l00320">Character::switch_mutations()</a>, <a class="el" href="teleport_8cpp_source.html#l00034">teleport::teleport()</a>, <a class="el" href="teleport_8cpp_source.html#l00055">teleport::teleport_to_point()</a>, and <a class="el" href="vehicle_8cpp_source.html#l03697">vehicle::total_power()</a>.</p>

</div>
</div>
<a id="ad6acc71566db7034036df3bda99752c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6acc71566db7034036df3bda99752c0">&#9670;&nbsp;</a></span>shrub_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::shrub_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04477">4477</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;{</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        <a class="code" href="iexamine_8cpp.html#a3453f73927d5dcc965b7901faf3f9e8a">pick_plant</a>( you, examp, <a class="code" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="code" href="iexamine_8cpp.html#ae32b6e1c7421a1d00aa1ae105c1ef59c">ter_t_shrub_fungal</a> );</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ) {</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, 1, 0, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a6a20457a9e204d71506ceb6c60448b04">ter_t_fungus</a> );</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The shrub offers up a fruit, then crumbles into a fungal bed.&quot;</span> ) );</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;        <a class="code" href="iexamine_8cpp.html#a3453f73927d5dcc965b7901faf3f9e8a">pick_plant</a>( you, examp, <a class="code" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="code" href="iexamine_8cpp.html#ae32b6e1c7421a1d00aa1ae105c1ef59c">ter_t_shrub_fungal</a> );</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    }</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a022d3e979db490c63a348af7ac50cffd"><div class="ttname"><a href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a></div><div class="ttdeci">static const itype_id itype_mycus_fruit(&quot;mycus_fruit&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0d7873e243723a1ba7390f11e934f61f"><div class="ttname"><a href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MARLOSS(&quot;THRESH_MARLOSS&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3453f73927d5dcc965b7901faf3f9e8a"><div class="ttname"><a href="iexamine_8cpp.html#a3453f73927d5dcc965b7901faf3f9e8a">pick_plant</a></div><div class="ttdeci">static void pick_plant(Character &amp;you, const tripoint &amp;examp, const itype_id &amp;itemType, ter_id new_ter, bool seeds=false)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04253">iexamine.cpp:4253</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a6a20457a9e204d71506ceb6c60448b04"><div class="ttname"><a href="iexamine_8cpp.html#a6a20457a9e204d71506ceb6c60448b04">ter_t_fungus</a></div><div class="ttdeci">static const ter_str_id ter_t_fungus(&quot;t_fungus&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a887b627a1c6aa9a02e110fe43e1ef025"><div class="ttname"><a href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a></div><div class="ttdeci">static const itype_id itype_marloss_berry(&quot;marloss_berry&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae32b6e1c7421a1d00aa1ae105c1ef59c"><div class="ttname"><a href="iexamine_8cpp.html#ae32b6e1c7421a1d00aa1ae105c1ef59c">ter_t_shrub_fungal</a></div><div class="ttdeci">static const ter_str_id ter_t_shrub_fungal(&quot;t_shrub_fungal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="el" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l04253">pick_plant()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a6a20457a9e204d71506ceb6c60448b04">ter_t_fungus</a>, <a class="el" href="iexamine_8cpp.html#ae32b6e1c7421a1d00aa1ae105c1ef59c">ter_t_shrub_fungal</a>, <a class="el" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="a1ab037943e4ced1f457f6bd7e3ab6ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab037943e4ced1f457f6bd7e3ab6ed8">&#9670;&nbsp;</a></span>shrub_wildveggies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::shrub_wildveggies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Survival speeds up foraging Perception randomly speeds up foraging 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04512">4512</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;{</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;    <span class="comment">// Ask if there&#39;s something possibly more interesting than this shrub here</span></div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    <span class="keywordflow">if</span>( ( !here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp ).<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ||</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;          here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( examp ) ||</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;          here.<a class="code" href="classmap.html#a2578f467596e13fb8631fd01126a9667">can_see_trap_at</a>( examp, you ) ||</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;          <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at( examp ) != <span class="keyword">nullptr</span> ) &amp;&amp;</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;        !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Forage through %s?&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    }</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160; </div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You forage through the %s.&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) );<span class="comment"></span></div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;<span class="comment">    ///\EFFECT_SURVIVAL speeds up foraging</span></div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 100000 / ( 2 * you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) + 5 );<span class="comment"></span></div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;<span class="comment">    ///\EFFECT_PER randomly speeds up foraging</span></div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;<span class="comment"></span>    <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> /= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 4, you.<a class="code" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> ), 4 + you.<a class="code" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> * 2 );</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classforage__activity__actor.html">forage_activity_actor</a>( move_cost ) );</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp );</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a7009e282d5300da78140ba918c5bca18">auto_resume</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ad8a2bb942a756787aced3b83319176ff"><div class="ttname"><a href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">Character::per_cur</a></div><div class="ttdeci">int per_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00580">character.h:580</a></div></div>
<div class="ttc" id="aclassforage__activity__actor_html"><div class="ttname"><a href="classforage__activity__actor.html">forage_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01998">activity_actor_definitions.h:1999</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a7009e282d5300da78140ba918c5bca18"><div class="ttname"><a href="classplayer__activity.html#a7009e282d5300da78140ba918c5bca18">player_activity::auto_resume</a></div><div class="ttdeci">bool auto_resume</div><div class="ttdoc">If true, the activity will be auto-resumed next time the player attempts an identical activity.</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00078">player_activity.h:78</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="player__activity_8h_source.html#l00078">player_activity::auto_resume</a>, <a class="el" href="map_8cpp_source.html#l06208">map::can_see_trap_at()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, <a class="el" href="character_8h_source.html#l00580">Character::per_cur</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="a7e000c896229f98b834e4cdb08836d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e000c896229f98b834e4cdb08836d63">&#9670;&nbsp;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::sign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04912">4912</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;{</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;    std::string existing_signage = here.<a class="code" href="classmap.html#a5c968c93ff5170d9901823f7b25bb557">get_signage</a>( examp );</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    <span class="keywordtype">bool</span> previous_signage_exists = !existing_signage.empty();</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;    <span class="comment">// Display existing message, or lack thereof.</span></div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp )-&gt;<a class="code" href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a5a176a4cfa9645154848fa2a683ba045">ter_furn_flag::TFLAG_SIGN_ALWAYS</a> ) || previous_signage_exists ) {</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re illiterate, and can&#39;t read the message on the sign.&quot;</span> ) );</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( previous_signage_exists ) {</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( existing_signage );</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;            you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nothing legible on the sign.&quot;</span> ) );</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;        }</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160; </div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;        <span class="comment">// Allow chance to modify message.</span></div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        std::vector&lt;tool_comp&gt; tools;</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        std::vector&lt;const item *&gt; <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;            <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a> ) &amp;&amp; it.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; 0;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;        } );</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        tools.reserve( <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>.size() );</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *writing_item : filter ) {</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;            tools.emplace_back( writing_item-&gt;typeId(), 1 );</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;        }</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;        <span class="keywordflow">if</span>( !tools.empty() ) {</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;            <span class="comment">// Different messages if the sign already has writing associated with it.</span></div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;            std::string query_message = previous_signage_exists ?</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Overwrite the existing message on the sign?&quot;</span> ) :</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Add a message to the sign?&quot;</span> );</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;            std::string ignore_message = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You leave the sign alone.&quot;</span> );</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( query_message ) ) {</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;                std::string signage = <a class="code" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;                                      .<a class="code" href="classstring__input__popup.html#aa96aa0184abb3c9740c2a48f098eeb8b">title</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Write what?&quot;</span> ) )</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;                                      .<a class="code" href="classstring__input__popup.html#a1362802e2c62e8ecd7e4a9a3ad679b5e">identifier</a>( <span class="stringliteral">&quot;signage&quot;</span> )</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;                                      .<a class="code" href="classstring__input__popup.html#acd7eba6664e8c473cc2b754f5d8d2cde">query_string</a>();</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;                <span class="keywordflow">if</span>( signage.empty() ) {</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;                    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, ignore_message );</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;                    std::string spray_painted_message = previous_signage_exists ?</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;                                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You overwrite the previous message on the sign with your graffiti.&quot;</span> ) :</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;                                                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You graffiti a message onto the sign.&quot;</span> );</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;                    here.<a class="code" href="classmap.html#a20566d1cddeef8fe7b4198c1af28efa3">set_signage</a>( examp, signage );</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;                    you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, spray_painted_message );</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;                    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( - 20 * signage.length() );</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;                    you.<a class="code" href="classCharacter.html#a33d0aa99b607cfbe38b910d4dd6b0b1b">consume_tools</a>( tools, 1 );</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;                }</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, ignore_message );</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;            }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;        }</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    }</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a20566d1cddeef8fe7b4198c1af28efa3"><div class="ttname"><a href="classmap.html#a20566d1cddeef8fe7b4198c1af28efa3">map::set_signage</a></div><div class="ttdeci">void set_signage(const tripoint &amp;p, const std::string &amp;message)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04864">map.cpp:4864</a></div></div>
<div class="ttc" id="aclassmap_html_a5c968c93ff5170d9901823f7b25bb557"><div class="ttname"><a href="classmap.html#a5c968c93ff5170d9901823f7b25bb557">map::get_signage</a></div><div class="ttdeci">std::string get_signage(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04849">map.cpp:4849</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_a1362802e2c62e8ecd7e4a9a3ad679b5e"><div class="ttname"><a href="classstring__input__popup.html#a1362802e2c62e8ecd7e4a9a3ad679b5e">string_input_popup::identifier</a></div><div class="ttdeci">string_input_popup &amp; identifier(const std::string &amp;value)</div><div class="ttdoc">An identifier to be used to store / get the input history.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00144">string_input_popup.h:144</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_acd7eba6664e8c473cc2b754f5d8d2cde"><div class="ttname"><a href="classstring__input__popup.html#acd7eba6664e8c473cc2b754f5d8d2cde">string_input_popup::query_string</a></div><div class="ttdeci">const std::string &amp; query_string(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00371">string_input_popup.cpp:371</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a969363fa9d77d33f00efed259dc98322"><div class="ttname"><a href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a></div><div class="ttdeci">const flag_id flag_WRITE_MESSAGE(&quot;WRITE_MESSAGE&quot;)</div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a5a176a4cfa9645154848fa2a683ba045"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a5a176a4cfa9645154848fa2a683ba045">ter_furn_flag::TFLAG_SIGN_ALWAYS</a></div><div class="ttdeci">@ TFLAG_SIGN_ALWAYS</div></div>
<div class="ttc" id="astructmap__data__common__t_html_a630778707744fb147436b9aa0c370a7e"><div class="ttname"><a href="structmap__data__common__t.html#a630778707744fb147436b9aa0c370a7e">map_data_common_t::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00534">mapdata.h:534</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="crafting_8cpp_source.html#l02400">Character::consume_tools()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04849">map::get_signage()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="mapdata_8h_source.html#l00534">map_data_common_t::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="string__input__popup_8h_source.html#l00144">string_input_popup::identifier()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="string__input__popup_8cpp_source.html#l00371">string_input_popup::query_string()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="map_8cpp_source.html#l04864">map::set_signage()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a5a176a4cfa9645154848fa2a683ba045">TFLAG_SIGN_ALWAYS</a>, <a class="el" href="string__input__popup_8h_source.html#l00113">string_input_popup::title()</a>, and <a class="el" href="iexamine_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="mutation_8cpp_source.html#l00402">Character::apply_mods()</a>, <a class="el" href="trade__ui_8cpp_source.html#l00216">trade_ui::autobalance()</a>, <a class="el" href="vehicle__autodrive_8cpp_source.html#l01000">vehicle::autodrive_controller::compute_next_nodes()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00982">spell_effect::directed_push()</a>, <a class="el" href="widget_8cpp_source.html#l00739">widget::get_var_value()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, <a class="el" href="morale_8cpp_source.html#l00979">player_morale::set_worn()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l02126">musical_instrument_actor::use()</a>.</p>

</div>
</div>
<a id="a825e4f2b208de22af31d956cef304935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a825e4f2b208de22af31d956cef304935">&#9670;&nbsp;</a></span>smoker_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::smoker_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l06921">6921</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;{</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#a36b9b01ff65b18784dbac2328d37541d">active</a> = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a> ||</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;                        here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a>;</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> portable = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> ||</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;                          here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ) == <a class="code" href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a>;</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items_here = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160; </div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;    <span class="keywordflow">if</span>( portable &amp;&amp; items_here.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active was empty!&quot;</span> );</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> );</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() &amp;&amp; active ) {</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_smoking_rack_active was empty!&quot;</span> );</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a> );</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    }</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;    <span class="keywordflow">if</span>( portable &amp;&amp; items_here.<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_metal_smoking_rack_active was empty, and had fake_smoke_plume!&quot;</span> );</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> );</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;        items_here.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( items_here.<a class="code" href="classitem__stack.html#a09718022e82be5bc5dd6d84463521751">size</a>() == 1 &amp;&amp; items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>()-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;f_smoking_rack_active was empty, and had fake_smoke_plume!&quot;</span> );</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a> );</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;        items_here.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( items_here.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>() );</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;    }</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160; </div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;    <span class="keywordtype">bool</span> rem_f_opt = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> time_left = 0_turns;</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;    <span class="keywordtype">int</span> hours_left = 0;</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;    <span class="keywordtype">int</span> minutes_left = 0;</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> f_volume = 0_ml;</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;    <span class="keywordtype">bool</span> f_check = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160; </div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;        <span class="keywordflow">if</span>( it.is_food() ) {</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;            f_check = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;            f_volume += it.volume();</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;        }</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;        <span class="keywordflow">if</span>( active &amp;&amp; it.typeId() == <a class="code" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;            time_left = <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( it.item_counter );</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;            hours_left = to_hours&lt;int&gt;( time_left );</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;            minutes_left = to_minutes&lt;int&gt;( time_left ) + 1;</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;        }</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    }</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160; </div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfurn__t.html">furn_t</a> &amp;f = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;    <span class="keyword">const</span> <a class="code" href="structitype.html">itype</a> *<a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a> = f.<a class="code" href="structfurn__t.html#aca23d59d0fb4b19be78fcdf07280b00f">crafting_pseudo_item_type</a>();</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;    std::vector&lt;const itype *&gt; ammo_list = f.<a class="code" href="structfurn__t.html#a5fd0a85be4c0336196a1c4c173513ff4">crafting_ammo_item_types</a>();</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> empty = f_volume == 0_ml;</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> full = f_volume &gt;= <a class="code" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a>;</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> full_portable = f_volume &gt;= <a class="code" href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a>;</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity = <a class="code" href="namespacesm__rack.html#a4c0565d55310ec1ac37c77821801a1fe">sm_rack::MAX_FOOD_VOLUME</a> - f_volume;</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> remaining_capacity_portable = <a class="code" href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a> - f_volume;</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_coal_in_inventory = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) &gt; 0;</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> coal_charges = <a class="code" href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a>( <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ), items_here );</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> need_charges = <a class="code" href="iexamine_8cpp.html#a3ce49e4006756f57b68e826659d477db">get_charcoal_charges</a>( f_volume );</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> max_charges = <a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a> == <span class="keyword">nullptr</span> || ammo_list.empty() ||</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;                            !ammo_list[0]-&gt;ammo ? 0 : <a class="code" href="classitem.html">item</a>( type ).<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( ammo_list[0]-&gt;ammo-&gt;type );</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_coal = coal_charges &gt; 0;</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_enough_coal = coal_charges &gt;= need_charges;</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160; </div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;    <a class="code" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;    smenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with the smoking rack:&quot;</span> );</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;    smenu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160; </div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;    smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, <span class="charliteral">&#39;i&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Inspect smoking rack&quot;</span> ) );</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160; </div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;    <span class="keywordflow">if</span>( !active ) {</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 1, !empty &amp;&amp; has_enough_coal, <span class="charliteral">&#39;l&#39;</span>,</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;                             empty ?  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Light up and smoke food… insert some food for smoking first&quot;</span> ) :</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;                             !has_enough_coal ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Light up and smoke food… need extra %d charges of charcoal&quot;</span> ),</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;                                 need_charges - coal_charges ) :</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Light up and smoke food&quot;</span> ),</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Light up the smoking rack and start smoking.  Smoking will take about 6 hours.&quot;</span> ) );</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;        <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;            smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 2, !full_portable, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;                                 full_portable ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert food for smoking… smoking rack is full&quot;</span> ) :</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;                                 <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert food for smoking… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;                                                <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity_portable ), <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() ),</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fill the smoking rack with raw meat, fish or sausages for smoking or fruit or vegetable or smoked meat for drying.&quot;</span> ) );</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160; </div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;            smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 8, !active, <span class="charliteral">&#39;z&#39;</span>,</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;                                 active ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cannot disassemble this smoking rack while it is active!&quot;</span> ) :</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disassemble the smoking rack&quot;</span> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160; </div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;            smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 2, !full, <span class="charliteral">&#39;f&#39;</span>,</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;                                 full ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert food for smoking… smoking rack is full&quot;</span> ) :</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;                                 <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert food for smoking… remaining capacity is %s %s&quot;</span> ),</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;                                                <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( remaining_capacity ), <a class="code" href="units__utility_8cpp.html#a5d1afc8428beadaac75fb68c5a2bfcd7">volume_units_abbr</a>() ),</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fill the smoking rack with raw meat, fish or sausages for smoking or fruit or vegetable or smoked meat for drying.&quot;</span> ) );</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;        }</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160; </div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;        <span class="keywordflow">if</span>( f_check ) {</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;            smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 4, f_check, <span class="charliteral">&#39;e&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove food from smoking rack&quot;</span> ) );</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;        }</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160; </div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 3, has_coal_in_inventory &amp;&amp; coal_charges &lt; max_charges, <span class="charliteral">&#39;r&#39;</span>,</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;                             !has_coal_in_inventory ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload with charcoal… you don&#39;t have any&quot;</span> ) :</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;                             ( coal_charges &gt;= max_charges ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload with charcoal… at maximum capacity&quot;</span> ) :</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Reload with charcoal&quot;</span> ) ),</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;                             <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need %d charges of charcoal for %s %s of food.  Minimal amount of charcoal is %d charges.&quot;</span> ),</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;                                 <a class="code" href="namespacesm__rack.html#a7cc090f68ea6ea6075047237c58e107a">sm_rack::CHARCOAL_PER_LITER</a>, <a class="code" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( 1_liter ), <a class="code" href="units__utility_8cpp.html#a0a9530aa2dc0dc113a70189ee01fcb78">volume_units_long</a>(),</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;                                 <a class="code" href="namespacesm__rack.html#aa933e8a2fbed5b7cad98eab58a025384">sm_rack::MIN_CHARCOAL</a> ) );</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160; </div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;        smenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( 7, <span class="keyword">true</span>, <span class="charliteral">&#39;x&#39;</span>,</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Quench burning charcoal&quot;</span> ),</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;                             <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Quenching will stop smoking process, but also destroy all used charcoal.&quot;</span> ) );</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;    }</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160; </div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;    <span class="keywordflow">if</span>( has_coal ) {</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;        smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 5, <span class="keyword">true</span>, <span class="charliteral">&#39;c&#39;</span>,</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;                        active ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Rake out %d excess charges of charcoal from smoking rack&quot;</span> ),</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;                                                coal_charges ) :</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;                        <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove %d charges of charcoal from smoking rack&quot;</span> ), coal_charges ) );</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;    }</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160; </div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;    smenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160; </div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;    <span class="keywordflow">switch</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;        <span class="keywordflow">case</span> 0: { <span class="comment">//inspect smoking rack</span></div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;            std::string pop;</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;                pop += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a smoking rack here.  It is lit and smoking.&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;                <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;                    <span class="keywordflow">if</span>( minutes_left &gt; 60 ) {</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;                        pop += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It will finish smoking in about %d hour.&quot;</span>,</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;                                                         <span class="stringliteral">&quot;It will finish smoking in about %d hours.&quot;</span>,</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;                                                         hours_left ), hours_left ) + <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( minutes_left &gt; 30 ) {</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;                        pop += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It will finish smoking in less than an hour.&quot;</span> ) + std::string( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;                        pop += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;It should take about %d minute to finish smoking.&quot;</span>,</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;                                                         <span class="stringliteral">&quot;It should take about %d minutes to finish smoking.&quot;</span>,</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;                                                         minutes_left ), minutes_left ) + <span class="stringliteral">&quot;\n &quot;</span>;</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;                    }</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;                }</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;                pop += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a smoking rack here.&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;            }</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;            pop += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inspect its contents and find: &quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;            <span class="keywordflow">if</span>( items_here.empty() ) {</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;                pop += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;…that it is empty.&quot;</span> );</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;it : items_here ) {</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;                    <span class="keywordflow">if</span>( it.typeId() == <a class="code" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a> ) {</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;                        pop += <span class="stringliteral">&quot;\n&quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You see some smoldering embers there.&quot;</span> ), <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;                    }</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;                    pop += <span class="stringliteral">&quot;-&gt; &quot;</span> + it.display_name() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;                }</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;            }</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( pop, <a class="code" href="output_8h.html#ab214b85345aeab978acdcea0250f27f5aad1f68b93664b1917fafc7cf9b7537d3">PF_NONE</a> );</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;        }</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;            <span class="comment">//activate</span></div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;            <span class="keywordflow">if</span>( active ) {</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is already lit and smoking.&quot;</span> ) );</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;                <a class="code" href="iexamine_8cpp.html#af05b4636a2de4ce0642879e465c1522a">smoker_activate</a>( you, examp );</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;            }</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;            <span class="comment">// load food</span></div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;            <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;                <a class="code" href="iexamine_8cpp.html#a5524137bf4f46e9037780757e97217c1">smoker_load_food</a>( you, examp, remaining_capacity_portable );</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;                <a class="code" href="iexamine_8cpp.html#a5524137bf4f46e9037780757e97217c1">smoker_load_food</a>( you, examp, remaining_capacity );</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;            }</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;            <span class="comment">// load charcoal</span></div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;            <a class="code" href="iexamine_8cpp.html#a095f88af7715088dd1106ee4ad2615c5">reload_furniture</a>( you, examp, <span class="keyword">false</span> );</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;            <span class="comment">// remove food</span></div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;            rem_f_opt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;        <span class="comment">/* fallthrough */</span></div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;        <span class="keywordflow">case</span> 5: {</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;            <span class="comment">//remove charcoal</span></div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classcata_1_1colony_1_1colony__iterator.html">map_stack::iterator</a> it = items_here.begin(); it != items_here.end(); ) {</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;                <span class="keywordflow">if</span>( ( rem_f_opt &amp;&amp; it-&gt;is_food() ) || ( !rem_f_opt &amp;&amp; ( it-&gt;typeId() == <a class="code" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a> ) ) ) {</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;                    <span class="comment">// get handling cost before the item reference is invalidated</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> handling_cost = -you.<a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( *it );</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160; </div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove %s from the rack.&quot;</span> ), it-&gt;tname() );</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *it );</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;                    it = items_here.erase( it );</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;                    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( handling_cost );</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;                    ++it;</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;                }</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;            }</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;            <span class="keywordflow">if</span>( portable &amp;&amp; active &amp;&amp; rem_f_opt ) {</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> );</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( active &amp;&amp; rem_f_opt ) {</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a> );</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;            }</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;        }</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;        <span class="keywordflow">case</span> 7:</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;            <span class="keywordflow">if</span>( portable ) {</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> );</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;                here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a> );</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop the smoking process.&quot;</span> ) );</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;            }</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;        <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;            here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, <a class="code" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a> );</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;            <a class="code" href="namespaceiexamine.html#ad140e70f3803795e1c50a8a643b668ae">deployed_furniture</a>( you, examp );</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;    }</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;}</div>
<div class="ttc" id="aclassinventory_html_a5702debf38c9bd88deab93d7979c2511"><div class="ttname"><a href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0270df10fe59879068e7fde158e3fe0b"><div class="ttname"><a href="iexamine_8cpp.html#a0270df10fe59879068e7fde158e3fe0b">count_charges_in_list</a></div><div class="ttdeci">static int count_charges_in_list(const itype *type, const map_stack &amp;items)</div><div class="ttdoc">Finds the number of charges of the first item that matches type.</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04707">iexamine.cpp:4707</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a3ce49e4006756f57b68e826659d477db"><div class="ttname"><a href="iexamine_8cpp.html#a3ce49e4006756f57b68e826659d477db">get_charcoal_charges</a></div><div class="ttdeci">static int get_charcoal_charges(units::volume food)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06086">iexamine.cpp:6086</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a45ff89d042bbbf58ef37ec47e791b58c"><div class="ttname"><a href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a></div><div class="ttdeci">static const itype_id itype_fake_smoke_plume(&quot;fake_smoke_plume&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a5524137bf4f46e9037780757e97217c1"><div class="ttname"><a href="iexamine_8cpp.html#a5524137bf4f46e9037780757e97217c1">smoker_load_food</a></div><div class="ttdeci">static void smoker_load_food(Character &amp;you, const tripoint &amp;examp, const units::volume &amp;remaining_capacity)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06554">iexamine.cpp:6554</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_acd5e348925634a4a9b1bdbd9c199602e"><div class="ttname"><a href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a></div><div class="ttdeci">static const furn_str_id furn_f_metal_smoking_rack(&quot;f_metal_smoking_rack&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_af05b4636a2de4ce0642879e465c1522a"><div class="ttname"><a href="iexamine_8cpp.html#af05b4636a2de4ce0642879e465c1522a">smoker_activate</a></div><div class="ttdeci">static void smoker_activate(Character &amp;you, const tripoint &amp;examp)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06265">iexamine.cpp:6265</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_aff8a1c620d868c0c50ac2adee6fcf268"><div class="ttname"><a href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a></div><div class="ttdeci">static const furn_str_id furn_f_smoking_rack(&quot;f_smoking_rack&quot;)</div></div>
<div class="ttc" id="anamespaceiexamine_html_ad140e70f3803795e1c50a8a643b668ae"><div class="ttname"><a href="namespaceiexamine.html#ad140e70f3803795e1c50a8a643b668ae">iexamine::deployed_furniture</a></div><div class="ttdeci">void deployed_furniture(Character &amp;you, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l01625">iexamine.cpp:1625</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_a3bcab501bf1cf7fe8b9243df1c37f320"><div class="ttname"><a href="namespacesm__rack.html#a3bcab501bf1cf7fe8b9243df1c37f320">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a></div><div class="ttdeci">static const units::volume MAX_FOOD_VOLUME_PORTABLE</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06083">iexamine.cpp:6083</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_a7cc090f68ea6ea6075047237c58e107a"><div class="ttname"><a href="namespacesm__rack.html#a7cc090f68ea6ea6075047237c58e107a">sm_rack::CHARCOAL_PER_LITER</a></div><div class="ttdeci">static const int CHARCOAL_PER_LITER</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06081">iexamine.cpp:6081</a></div></div>
<div class="ttc" id="anamespacesm__rack_html_aa933e8a2fbed5b7cad98eab58a025384"><div class="ttname"><a href="namespacesm__rack.html#aa933e8a2fbed5b7cad98eab58a025384">sm_rack::MIN_CHARCOAL</a></div><div class="ttdeci">static const int MIN_CHARCOAL</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l06080">iexamine.cpp:6080</a></div></div>
<div class="ttc" id="astructfurn__t_html"><div class="ttname"><a href="structfurn__t.html">furn_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00641">mapdata.h:641</a></div></div>
<div class="ttc" id="astructfurn__t_html_a5fd0a85be4c0336196a1c4c173513ff4"><div class="ttname"><a href="structfurn__t.html#a5fd0a85be4c0336196a1c4c173513ff4">furn_t::crafting_ammo_item_types</a></div><div class="ttdeci">std::vector&lt; const itype * &gt; crafting_ammo_item_types() const</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04684">iexamine.cpp:4684</a></div></div>
<div class="ttc" id="astructfurn__t_html_aca23d59d0fb4b19be78fcdf07280b00f"><div class="ttname"><a href="structfurn__t.html#aca23d59d0fb4b19be78fcdf07280b00f">furn_t::crafting_pseudo_item_type</a></div><div class="ttdeci">const itype * crafting_pseudo_item_type() const</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04676">iexamine.cpp:4676</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a0a9530aa2dc0dc113a70189ee01fcb78"><div class="ttname"><a href="units__utility_8cpp.html#a0a9530aa2dc0dc113a70189ee01fcb78">volume_units_long</a></div><div class="ttdeci">const char * volume_units_long()</div><div class="ttdoc">Create a units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00108">units_utility.cpp:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="ui_8cpp_source.html#l01227">uilist::addentry_desc()</a>, <a class="el" href="item_8cpp_source.html#l10801">item::ammo_capacity()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="color_8h_source.html#l00020">c_green</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="iexamine_8cpp_source.html#l06081">sm_rack::CHARCOAL_PER_LITER</a>, <a class="el" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="iexamine_8cpp_source.html#l04707">count_charges_in_list()</a>, <a class="el" href="iexamine_8cpp_source.html#l04684">furn_t::crafting_ammo_item_types()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="iexamine_8cpp_source.html#l04676">furn_t::crafting_pseudo_item_type()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iexamine_8cpp_source.html#l01625">deployed_furniture()</a>, <a class="el" href="ui_8h_source.html#l00451">uilist::desc_enabled</a>, <a class="el" href="item_8cpp_source.html#l06855">item::display_name()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="output_8cpp_source.html#l03231">format_volume()</a>, <a class="el" href="calendar_8h_source.html#l00221">time_duration::from_turns()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#acd5e348925634a4a9b1bdbd9c199602e">furn_f_metal_smoking_rack</a>, <a class="el" href="iexamine_8cpp.html#a66869ec3b1397247d8a2edab98aeb833">furn_f_metal_smoking_rack_active</a>, <a class="el" href="iexamine_8cpp.html#aff8a1c620d868c0c50ac2adee6fcf268">furn_f_smoking_rack</a>, <a class="el" href="iexamine_8cpp.html#a5d99eb66dbdc62edf33d93a7da3dd369">furn_f_smoking_rack_active</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="iexamine_8cpp_source.html#l06086">get_charcoal_charges()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l09480">item::is_food()</a>, <a class="el" href="item_8h_source.html#l03142">item::item_counter</a>, <a class="el" href="character_8cpp_source.html#l07285">Character::item_handling_cost()</a>, <a class="el" href="iexamine_8cpp.html#ab59a154650bd3771bb30915bd559c7b6">itype_charcoal</a>, <a class="el" href="iexamine_8cpp.html#a45ff89d042bbbf58ef37ec47e791b58c">itype_fake_smoke_plume</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l06082">sm_rack::MAX_FOOD_VOLUME</a>, <a class="el" href="iexamine_8cpp_source.html#l06083">sm_rack::MAX_FOOD_VOLUME_PORTABLE</a>, <a class="el" href="iexamine_8cpp_source.html#l06080">sm_rack::MIN_CHARCOAL</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="output_8h_source.html#l00475">PF_NONE</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="iexamine_8cpp_source.html#l04738">reload_furniture()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item__stack_8cpp_source.html#l00014">item_stack::size()</a>, <a class="el" href="iexamine_8cpp_source.html#l06265">smoker_activate()</a>, <a class="el" href="iexamine_8cpp_source.html#l06554">smoker_load_food()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>, <a class="el" href="units__utility_8cpp_source.html#l00096">volume_units_abbr()</a>, and <a class="el" href="units__utility_8cpp_source.html#l00108">volume_units_long()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a2323a53368ac4c9aedc585b46a4215ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2323a53368ac4c9aedc585b46a4215ae">&#9670;&nbsp;</a></span>stook_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::stook_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03168">3168</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;{</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_stook_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_stook_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="keywordflow">if</span>( cur_stook_type == <a class="code" href="iexamine_8cpp.html#aa93021dabed4ce7713c4971fceca120b">furn_f_stook_empty</a> ) {</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        next_stook_type = <a class="code" href="iexamine_8cpp.html#ac41bbbcd1eb7165e40428f231b0d8545">furn_f_stook_full</a>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action stook_empty, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160; </div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="keywordtype">bool</span> grain_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;i : items ) {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        <span class="keywordflow">if</span>( i.has_flag( <a class="code" href="flag_8cpp.html#aff778894f0485f3bb7d88b4f6951d867">flag_FRESH_GRAIN</a> ) &amp;&amp; !i.rotten() ) {</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            grain_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This pile contains %s, which can&#39;t be dried here!&quot;</span> ), i.tname( 1,</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;                     <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        }</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    }</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160; </div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span>( !grain_present ) {</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Place some fresh grain here and try again.&quot;</span> ) );</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( examp ) ) {</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The stook will need to be set up outside to dry.&quot;</span> ) );</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This pile contains grain that is ready to be left out for drying.&quot;</span> ) );</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stand the grain up to dry?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        }</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    }</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160; </div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_stook_type );</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You set up the stook and leave it to dry.&quot;</span> ) );</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_aff778894f0485f3bb7d88b4f6951d867"><div class="ttname"><a href="flag_8cpp.html#aff778894f0485f3bb7d88b4f6951d867">flag_FRESH_GRAIN</a></div><div class="ttdeci">const flag_id flag_FRESH_GRAIN(&quot;FRESH_GRAIN&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_aa93021dabed4ce7713c4971fceca120b"><div class="ttname"><a href="iexamine_8cpp.html#aa93021dabed4ce7713c4971fceca120b">furn_f_stook_empty</a></div><div class="ttdeci">static const furn_str_id furn_f_stook_empty(&quot;f_stook_empty&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac41bbbcd1eb7165e40428f231b0d8545"><div class="ttname"><a href="iexamine_8cpp.html#ac41bbbcd1eb7165e40428f231b0d8545">furn_f_stook_full</a></div><div class="ttdeci">static const furn_str_id furn_f_stook_full(&quot;f_stook_full&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flag_8cpp.html#aff778894f0485f3bb7d88b4f6951d867">flag_FRESH_GRAIN</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#aa93021dabed4ce7713c4971fceca120b">furn_f_stook_empty</a>, <a class="el" href="iexamine_8cpp.html#ac41bbbcd1eb7165e40428f231b0d8545">furn_f_stook_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="map_8cpp_source.html#l03395">map::is_outside()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a624ebca81ee19128287dbc641cadec86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a624ebca81ee19128287dbc641cadec86">&#9670;&nbsp;</a></span>stook_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::stook_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l03210">3210</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;{</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> cur_stook_type = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp );</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <a class="code" href="classint__id.html">furn_id</a> next_stook_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">if</span>( cur_stook_type == <a class="code" href="iexamine_8cpp.html#ac41bbbcd1eb7165e40428f231b0d8545">furn_f_stook_full</a> ) {</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        next_stook_type = <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Examined furniture has action stook_full, but is of type %s&quot;</span>,</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                  here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="keywordflow">if</span>( items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Examined furniture is stook_full but doesn&#39;t contain any grain.&quot;</span> ) );</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_stook_type );</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    }</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s a grain stook there.&quot;</span> ) );</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp;clock = *items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> drying_time = 336_hours;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> time_left = drying_time - clock.<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>();</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160; </div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <span class="keywordflow">if</span>( time_left &gt; 0_turns ) {</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The stook will finish drying in %s.&quot;</span> ), <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( time_left ) );</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    }</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        <span class="keywordflow">if</span>( it.has_flag( <a class="code" href="flag_8cpp.html#a296699c41720320277821a51100023b5">flag_SMOKABLE</a> ) &amp;&amp; it.get_comestible() ) {</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;            <a class="code" href="classitem.html">item</a> result( it.get_comestible()-&gt;smoking_result, it.birthday() );</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;            <a class="code" href="classrecipe.html">recipe</a> rec;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;            result.inherit_flags( it, rec );</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;            <span class="keywordflow">if</span>( !result.has_flag( <a class="code" href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a> ) ) {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                <span class="comment">// If the item has &quot;cooks_like&quot; it will be replaced by that item as a component.</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;                <span class="keywordflow">if</span>( !it.get_comestible()-&gt;cooks_like.is_empty() ) {</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                    <span class="comment">// Set charges to 1 for stacking purposes.</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                    it = <a class="code" href="classitem.html">item</a>( it.get_comestible()-&gt;cooks_like, it.birthday(), 1 );</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;                }</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;                result.components.add( it );</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            }</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take down the stook as the drying process is now finished.&quot;</span> ) );</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            it = result;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    }</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( examp, next_stook_type );</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a296699c41720320277821a51100023b5"><div class="ttname"><a href="flag_8cpp.html#a296699c41720320277821a51100023b5">flag_SMOKABLE</a></div><div class="ttdeci">const flag_id flag_SMOKABLE(&quot;SMOKABLE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4b8e4f0bba6610707d99ff84051bd622"><div class="ttname"><a href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a></div><div class="ttdeci">const flag_id flag_NUTRIENT_OVERRIDE(&quot;NUTRIENT_OVERRIDE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item__components_8cpp_source.html#l00072">item_components::add()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="item_8h_source.html#l03075">item::components</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="flag_8cpp.html#a4b8e4f0bba6610707d99ff84051bd622">flag_NUTRIENT_OVERRIDE</a>, <a class="el" href="flag_8cpp.html#a296699c41720320277821a51100023b5">flag_SMOKABLE</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="iexamine_8cpp.html#ac41bbbcd1eb7165e40428f231b0d8545">furn_f_stook_full</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00033">int_id&lt; T &gt;::id()</a>, <a class="el" href="crafting_8cpp_source.html#l01392">item::inherit_flags()</a>, <a class="el" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID()</a>, and <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a6987b7ccb6bfbaa1be3d45360eb106f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6987b7ccb6bfbaa1be3d45360eb106f6">&#9670;&nbsp;</a></span>toPumpFuel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::toPumpFuel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l05105">5105</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;{</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( src );</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> item_it = items.<a class="code" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); item_it != items.<a class="code" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>(); ++item_it ) {</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;        <span class="keywordflow">if</span>( item_it-&gt;made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;            <span class="keywordflow">if</span>( item_it-&gt;charges &lt; <a class="code" href="namespaceunits.html">units</a> ) {</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;            }</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160; </div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;            item_it-&gt;charges -= <a class="code" href="namespaceunits.html">units</a>;</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160; </div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;            <a class="code" href="classitem.html">item</a> liq_d( item_it-&gt;type, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code" href="namespaceunits.html">units</a> );</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160; </div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( dst, liq_d );</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160; </div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;            <span class="keywordflow">if</span>( item_it-&gt;charges &lt; 1 ) {</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( item_it );</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;            }</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160; </div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;        }</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;    }</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160; </div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;}</div>
<div class="ttc" id="anamespaceunits_html"><div class="ttname"><a href="namespaceunits.html">units</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8cpp_source.html#l00008">units.cpp:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="item__stack_8cpp_source.html#l00032">item_stack::begin()</a>, <a class="el" href="item__stack_8cpp_source.html#l00037">item_stack::end()</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__actor_8cpp_source.html#l00808">hacking_activity_actor::finish()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05185">pay_gas()</a>.</p>

</div>
</div>
<a id="ab708f67bb8e2bad48fd8c3a294e35422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab708f67bb8e2bad48fd8c3a294e35422">&#9670;&nbsp;</a></span>translocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::translocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>fix point types </dd></dl>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l00654">654</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">    /// @todo fix point types</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> omt_loc( <a class="code" href="coordinate__conversions_8cpp.html#a82aec5e351a3d6ef948536834dc1bbd0">ms_to_omt_copy</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getabs( examp ) ) );</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> activated = player_character.<a class="code" href="classavatar.html#af219c3f57aa9cfd82c9f3d262edf82b0">translocators</a>.<a class="code" href="classteleporter__list.html#aaacf09a873f9e32659be4b38de573db9">knows_translocator</a>( omt_loc );</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span>( !activated ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        player_character.<a class="code" href="classavatar.html#af219c3f57aa9cfd82c9f3d262edf82b0">translocators</a>.<a class="code" href="classteleporter__list.html#aba53cf14b2e017cb580b76eb19673f46">activate_teleporter</a>( omt_loc, examp );</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Translocator gate active.&quot;</span> ) );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Do you want to deactivate this active Translocator?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            player_character.<a class="code" href="classavatar.html#af219c3f57aa9cfd82c9f3d262edf82b0">translocators</a>.<a class="code" href="classteleporter__list.html#a06ff1ab950d5dd5490dc593cc34e45f5">deactivate_teleporter</a>( omt_loc, examp );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="ttc" id="aclassavatar_html_af219c3f57aa9cfd82c9f3d262edf82b0"><div class="ttname"><a href="classavatar.html#af219c3f57aa9cfd82c9f3d262edf82b0">avatar::translocators</a></div><div class="ttdeci">teleporter_list translocators</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00266">avatar.h:266</a></div></div>
<div class="ttc" id="aclassteleporter__list_html_a06ff1ab950d5dd5490dc593cc34e45f5"><div class="ttname"><a href="classteleporter__list.html#a06ff1ab950d5dd5490dc593cc34e45f5">teleporter_list::deactivate_teleporter</a></div><div class="ttdeci">void deactivate_teleporter(const tripoint_abs_omt &amp;omt_pt, const tripoint &amp;local_pt)</div><div class="ttdef"><b>Definition:</b> <a href="magic__teleporter__list_8cpp_source.html#l00057">magic_teleporter_list.cpp:57</a></div></div>
<div class="ttc" id="aclassteleporter__list_html_aaacf09a873f9e32659be4b38de573db9"><div class="ttname"><a href="classteleporter__list.html#aaacf09a873f9e32659be4b38de573db9">teleporter_list::knows_translocator</a></div><div class="ttdeci">bool knows_translocator(const tripoint_abs_omt &amp;omt_pos) const</div><div class="ttdef"><b>Definition:</b> <a href="magic__teleporter__list_8cpp_source.html#l00125">magic_teleporter_list.cpp:125</a></div></div>
<div class="ttc" id="aclassteleporter__list_html_aba53cf14b2e017cb580b76eb19673f46"><div class="ttname"><a href="classteleporter__list.html#aba53cf14b2e017cb580b76eb19673f46">teleporter_list::activate_teleporter</a></div><div class="ttdeci">bool activate_teleporter(const tripoint_abs_omt &amp;omt_pt, const tripoint &amp;local_pt)</div><div class="ttdef"><b>Definition:</b> <a href="magic__teleporter__list_8cpp_source.html#l00049">magic_teleporter_list.cpp:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic__teleporter__list_8cpp_source.html#l00049">teleporter_list::activate_teleporter()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="magic__teleporter__list_8cpp_source.html#l00057">teleporter_list::deactivate_teleporter()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="magic__teleporter__list_8cpp_source.html#l00125">teleporter_list::knows_translocator()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00152">ms_to_omt_copy()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="avatar_8h_source.html#l00266">avatar::translocators</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a85b84afb4c41e21b026c2528e7427910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b84afb4c41e21b026c2528e7427910">&#9670;&nbsp;</a></span>tree_hickory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_hickory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Survival increases hickory root number per tree Survival speeds up hickory root digging 
<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04284">4284</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;{</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <span class="keywordtype">bool</span> auto_forage = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AUTO_FEATURES&quot;</span> ) &amp;&amp;</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;                       ( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;all&quot;</span> ||</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;                         get_option&lt;std::string&gt;( <span class="stringliteral">&quot;AUTO_FORAGING&quot;</span> ) == <span class="stringliteral">&quot;trees&quot;</span> );</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160; </div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    <span class="keywordtype">bool</span> digging_up = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160; </div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; you.<a class="code" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a> ) &amp;&amp;</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;        <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Dig up %s?  This kills the tree!&quot;</span> ), here.<a class="code" href="classmap.html#a51e32639c8df0c90e0743f929bcf2111">tername</a>( examp ) ) ) {</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;        digging_up = <span class="keyword">true</span>;<span class="comment"></span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;<span class="comment">        /** @EFFECT_SURVIVAL increases hickory root number per tree */</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1,</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;                         <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a>( 3 + you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) ) ),</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;                         0,</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;                         <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#ab1913be00f16d0d0c48f44dd8fb5c3b2">ter_t_tree_hickory_dead</a> );<span class="comment"></span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;<span class="comment">        /** @EFFECT_SURVIVAL speeds up hickory root digging */</span></div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;        you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) / ( you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) + 1 ) + 100 );</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    }</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160; </div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !digging_up &amp;&amp; you.<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You could dig this tree up for roots…&quot;</span> ) );</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    }</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    <span class="keywordflow">if</span>( !auto_forage &amp;&amp; !<a class="code" href="iexamine_8cpp.html#ab4a39f87ea9e6cfa4218ce017300bd75">query_pick</a>( you, examp ) ) {</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    }</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160; </div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classharvest__activity__actor.html">harvest_activity_actor</a>( examp, auto_forage ) );</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a4f9ea60e4ca2b958b45699b4bbdb6771"><div class="ttname"><a href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a></div><div class="ttdeci">static const itype_id itype_hickory_root(&quot;hickory_root&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ab1913be00f16d0d0c48f44dd8fb5c3b2"><div class="ttname"><a href="iexamine_8cpp.html#ab1913be00f16d0d0c48f44dd8fb5c3b2">ter_t_tree_hickory_dead</a></div><div class="ttdeci">static const ter_str_id ter_t_tree_hickory_dead(&quot;t_tree_hickory_dead&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="iexamine_8cpp.html#a4f9ea60e4ca2b958b45699b4bbdb6771">itype_hickory_root</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="iexamine_8cpp.html#a73439c0a480cbe825af2284e8134349c">qual_DIG</a>, <a class="el" href="iexamine_8cpp_source.html#l02353">query_pick()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="iexamine_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#ab1913be00f16d0d0c48f44dd8fb5c3b2">ter_t_tree_hickory_dead</a>, <a class="el" href="map_8cpp_source.html#l02340">map::tername()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a3e7ddf36c220547c01f20b13e6ff1504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7ddf36c220547c01f20b13e6ff1504">&#9670;&nbsp;</a></span>tree_maple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_maple </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04326">4326</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;{</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;    <span class="keywordflow">if</span>( !crafting_inv.<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="iexamine_8cpp.html#ac56fd6d4b6125fb12082334eddd1876d">qual_DRILL</a> ) ) {</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a tool to drill the crust to tap this maple tree.&quot;</span> ) );</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    }</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160; </div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    <span class="keywordflow">if</span>( !crafting_inv.<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a1a760ceae580156080aabebef786fc8c">qual_HAMMER</a> ) ) {</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a tool to hammer the spile into the crust to tap this maple tree.&quot;</span> ) );</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    }</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160; </div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> spile_loc = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( [&amp;here]( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp; it ) {</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        <span class="keywordflow">return</span> it-&gt;<a class="code" href="classitem.html#a713d080573a79762924441b2b7350909">get_quality_nonrecursive</a>( <a class="code" href="iexamine_8cpp.html#abc49e9d18b9060efba2592b96b1b0c60">qual_TREE_TAP</a> ) &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;               !( here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( it.<a class="code" href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">position</a>() ) == <a class="code" href="iexamine_8cpp.html#a2e35c0b63e7ff30afdad09484129992e">ter_t_tree_maple_tapped</a> );</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use which tapping tool?&quot;</span> ), <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have a tapping tool at hand.&quot;</span> ) );</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160; </div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;    <a class="code" href="classitem.html">item</a> *spile = spile_loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <span class="keywordflow">if</span>( !spile ) {</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    }</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;    std::string spile_name = spile-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160; </div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;    here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a2e35c0b63e7ff30afdad09484129992e">ter_t_tree_maple_tapped</a> );</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, *spile, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;    spile_loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drill the maple tree crust and tap a %s into the prepared hole.&quot;</span> ),</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;             spile_name );</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160; </div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> cont_loc = <a class="code" href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a>();</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160; </div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <a class="code" href="classitem.html">item</a> *container = cont_loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, *container, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You hang the %s under the %s to collect sap.&quot;</span> ), container-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                 spile_name );</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;        cont_loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No container added.  The sap will just spill on the ground.&quot;</span> ) );</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    }</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;}</div>
<div class="ttc" id="aclassitem__location_html_a350bb267073f30205f780b394324a32c"><div class="ttname"><a href="classitem__location.html#a350bb267073f30205f780b394324a32c">item_location::get_item</a></div><div class="ttdeci">item * get_item()</div><div class="ttdoc">Gets the selected item or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01087">item_location.cpp:1087</a></div></div>
<div class="ttc" id="aclassitem__location_html_a7c2a92227d0946b673eb95b0a53c766c"><div class="ttname"><a href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">item_location::position</a></div><div class="ttdeci">tripoint position() const</div><div class="ttdoc">Returns the position where the item is found.</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8cpp_source.html#l01011">item_location.cpp:1011</a></div></div>
<div class="ttc" id="aclassitem_html_a713d080573a79762924441b2b7350909"><div class="ttname"><a href="classitem.html#a713d080573a79762924441b2b7350909">item::get_quality_nonrecursive</a></div><div class="ttdeci">int get_quality_nonrecursive(const quality_id &amp;id, bool strict_boiling=true) const</div><div class="ttdoc">Return the level of a given quality the tool may have, or INT_MIN if it does not have that quality,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07705">item.cpp:7705</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a1a760ceae580156080aabebef786fc8c"><div class="ttname"><a href="iexamine_8cpp.html#a1a760ceae580156080aabebef786fc8c">qual_HAMMER</a></div><div class="ttdeci">static const quality_id qual_HAMMER(&quot;HAMMER&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a2e35c0b63e7ff30afdad09484129992e"><div class="ttname"><a href="iexamine_8cpp.html#a2e35c0b63e7ff30afdad09484129992e">ter_t_tree_maple_tapped</a></div><div class="ttdeci">static const ter_str_id ter_t_tree_maple_tapped(&quot;t_tree_maple_tapped&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a7a6988f567c168dd00257f3dd3340aee"><div class="ttname"><a href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a></div><div class="ttdeci">static item_location maple_tree_sap_container()</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l04317">iexamine.cpp:4317</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_abc49e9d18b9060efba2592b96b1b0c60"><div class="ttname"><a href="iexamine_8cpp.html#abc49e9d18b9060efba2592b96b1b0c60">qual_TREE_TAP</a></div><div class="ttdeci">static const quality_id qual_TREE_TAP(&quot;TREE_TAP&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ac56fd6d4b6125fb12082334eddd1876d"><div class="ttname"><a href="iexamine_8cpp.html#ac56fd6d4b6125fb12082334eddd1876d">qual_DRILL</a></div><div class="ttdeci">static const quality_id qual_DRILL(&quot;DRILL&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l07705">item::get_quality_nonrecursive()</a>, <a class="el" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l04317">maple_tree_sap_container()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="item__location_8cpp_source.html#l01011">item_location::position()</a>, <a class="el" href="iexamine_8cpp.html#ac56fd6d4b6125fb12082334eddd1876d">qual_DRILL</a>, <a class="el" href="iexamine_8cpp.html#a1a760ceae580156080aabebef786fc8c">qual_HAMMER</a>, <a class="el" href="iexamine_8cpp.html#abc49e9d18b9060efba2592b96b1b0c60">qual_TREE_TAP</a>, <a class="el" href="item__location_8cpp_source.html#l01041">item_location::remove_item()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a2e35c0b63e7ff30afdad09484129992e">ter_t_tree_maple_tapped</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="ab2f638eb41ad7ec2f5c1e4f4cdbef14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2f638eb41ad7ec2f5c1e4f4cdbef14e">&#9670;&nbsp;</a></span>tree_maple_tapped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_maple_tapped </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04372">4372</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;{</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    <span class="keywordtype">bool</span> has_sap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <a class="code" href="classitem.html">item</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    <a class="code" href="classitem.html">item</a> *spile = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordtype">int</span> charges = 0;</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160; </div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    <span class="keyword">const</span> std::string maple_sap_name = <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a> );</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160; </div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> items = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items ) {</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        <span class="keywordflow">if</span>( it.will_spill() || it.is_watertight_container() ) {</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;            container = &amp;it;</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160; </div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;            it.<a class="code" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">visit_items</a>( [&amp;charges, &amp;has_sap]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> * it, <a class="code" href="classitem.html">item</a> * ) {</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;                <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a> ) {</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;                    has_sap = true;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;                    charges = it-&gt;charges;</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;                    return VisitResponse::ABORT;</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;                }</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;            } );</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;        }</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;        <span class="keywordflow">if</span>( it.<a class="code" href="classitem.html#a713d080573a79762924441b2b7350909">get_quality_nonrecursive</a>( <a class="code" href="iexamine_8cpp.html#abc49e9d18b9060efba2592b96b1b0c60">qual_TREE_TAP</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;            spile = &amp;it;</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;        }</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;    }</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160; </div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;    <span class="keywordflow">if</span>( !spile ) {</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    }</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160; </div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> {</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;        REMOVE_TAP,</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;        ADD_CONTAINER,</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;        HARVEST_SAP,</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;        REMOVE_CONTAINER,</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;    };</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <a class="code" href="classuilist.html">uilist</a> selectmenu;</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( REMOVE_TAP, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove tap&quot;</span> ) );</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ADD_CONTAINER, !container, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>,</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;                         <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Add a container to receive the %s&quot;</span> ), maple_sap_name );</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( HARVEST_SAP, has_sap, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Harvest current %s (%d)&quot;</span> ),</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;                         maple_sap_name, charges );</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    selectmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( REMOVE_CONTAINER, container, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove container&quot;</span> ) );</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160; </div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    selectmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select an action&quot;</span> );</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;    selectmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160; </div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;    <span class="keywordflow">switch</span>( selectmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;        <span class="keywordflow">case</span> REMOVE_TAP: {</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;            <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>().<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="iexamine_8cpp.html#a1a760ceae580156080aabebef786fc8c">qual_HAMMER</a> ) ) {</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a hammering tool to remove the %s from the crust.&quot;</span> ),</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                         spile-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;            }</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160; </div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove the %s.&quot;</span> ), spile-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *spile );</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160; </div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;            <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;                here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *container );</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;            }</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;            here.<a class="code" href="classmap.html#a9b1c092685c43287d5db23156f3f337e">i_clear</a>( examp );</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160; </div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 20_seconds ) );</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a0cfaefe95b4c080213d01afc7648c627">ter_t_tree_maple</a> );</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160; </div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;        }</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160; </div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;        <span class="keywordflow">case</span> ADD_CONTAINER: {</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> cont_loc = <a class="code" href="iexamine_8cpp.html#a7a6988f567c168dd00257f3dd3340aee">maple_tree_sap_container</a>();</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160; </div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;            container = cont_loc.<a class="code" href="classitem__location.html#a350bb267073f30205f780b394324a32c">get_item</a>();</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;            <span class="keywordflow">if</span>( container ) {</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;                here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( examp, *container, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( *container ) );</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You hang the %s under the spile to collect sap.&quot;</span> ), container-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;                cont_loc.<a class="code" href="classitem__location.html#a41e90133672d99aa1cecde670e37c23c">remove_item</a>();</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No container added.  The sap will just spill on the ground.&quot;</span> ) );</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            }</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160; </div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;        }</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160; </div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;        <span class="keywordflow">case</span> HARVEST_SAP: {</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;            <a class="code" href="namespaceliquid__handler.html#a9df963755dc50d58f0c5fcbd704791c4">liquid_handler::handle_liquid_from_container</a>( *container, <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> );</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;        }</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;        <span class="keywordflow">case</span> REMOVE_CONTAINER: {</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;            here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), *container );</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;            you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -you.<a class="code" href="classCharacter.html#af5284cbdea522644fc9a677dd7e3f847">item_handling_cost</a>( *container ) );</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;            here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( examp, container );</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;        }</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160; </div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    }</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a6ba542e70d1c20032e51d3196f035a0d"><div class="ttname"><a href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">item::visit_items</a></div><div class="ttdeci">VisitResponse visit_items(const std::function&lt; VisitResponse(item *, item *)&gt; &amp;func) const override</div><div class="ttdoc">Traverses this object and any child items contained using a visitor pattern.</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a0cfaefe95b4c080213d01afc7648c627"><div class="ttname"><a href="iexamine_8cpp.html#a0cfaefe95b4c080213d01afc7648c627">ter_t_tree_maple</a></div><div class="ttdeci">static const ter_str_id ter_t_tree_maple(&quot;t_tree_maple&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ae32c47387b792bb03fa0e569bff713f2"><div class="ttname"><a href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a></div><div class="ttdeci">static const itype_id itype_maple_sap(&quot;maple_sap&quot;)</div></div>
<div class="ttc" id="anamespaceliquid__handler_html_a9df963755dc50d58f0c5fcbd704791c4"><div class="ttname"><a href="namespaceliquid__handler.html#a9df963755dc50d58f0c5fcbd704791c4">liquid_handler::handle_liquid_from_container</a></div><div class="ttdeci">bool handle_liquid_from_container(item *in_container, item &amp;container, int radius)</div><div class="ttdoc">Handle liquid from inside a container item.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00139">handle_liquid.cpp:139</a></div></div>
<div class="ttc" id="avisitable_8h_html_ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6"><div class="ttname"><a href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a></div><div class="ttdeci">@ NEXT</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="item__location_8cpp_source.html#l01087">item_location::get_item()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00139">liquid_handler::handle_liquid_from_container()</a>, <a class="el" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="map_8cpp_source.html#l05030">map::i_clear()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="character_8cpp_source.html#l07285">Character::item_handling_cost()</a>, <a class="el" href="iexamine_8cpp.html#ae32c47387b792bb03fa0e569bff713f2">itype_maple_sap</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iexamine_8cpp_source.html#l04317">maple_tree_sap_container()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="visitable_8h.html#ab73f6da193541e8dc1a3ebdb5f37fabea47559fb833ff58321570e5e877b467f6">NEXT</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="iexamine_8cpp.html#a1a760ceae580156080aabebef786fc8c">qual_HAMMER</a>, <a class="el" href="iexamine_8cpp.html#abc49e9d18b9060efba2592b96b1b0c60">qual_TREE_TAP</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="item__location_8cpp_source.html#l01041">item_location::remove_item()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a0cfaefe95b4c080213d01afc7648c627">ter_t_tree_maple</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="classitem.html#a6ba542e70d1c20032e51d3196f035a0d">item::visit_items()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a2ec5b984bb66397465ff02ff4f415c62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ec5b984bb66397465ff02ff4f415c62">&#9670;&nbsp;</a></span>tree_marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::tree_marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04491">4491</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;{</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        <a class="code" href="iexamine_8cpp.html#a3453f73927d5dcc965b7901faf3f9e8a">pick_plant</a>( you, examp, <a class="code" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="code" href="iexamine_8cpp.html#a74b0a74d0c8e26f76954c2d11eb10154">ter_t_tree_fungal</a> );</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;        <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;            <span class="comment">// Folks have a better shot at keeping fed.</span></div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;We have located a particularly vital nutrient deposit underneath this location.&quot;</span> ) );</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Additional nourishment is available.&quot;</span> ) );</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;            here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a4f65b501b7e9b70182c3fbaae7f53a96">ter_t_marloss_tree</a> );</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;        }</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ) {</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, 1, 0, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;        here.<a class="code" href="classmap.html#a59bdb65280e5e1461469b0e1275c402e">ter_set</a>( examp, <a class="code" href="iexamine_8cpp.html#a74b0a74d0c8e26f76954c2d11eb10154">ter_t_tree_fungal</a> );</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The tree offers up a fruit, then shrivels into a fungal tree.&quot;</span> ) );</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        <a class="code" href="iexamine_8cpp.html#a3453f73927d5dcc965b7901faf3f9e8a">pick_plant</a>( you, examp, <a class="code" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="code" href="iexamine_8cpp.html#a74b0a74d0c8e26f76954c2d11eb10154">ter_t_tree_fungal</a> );</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    }</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;}</div>
<div class="ttc" id="aiexamine_8cpp_html_a4f65b501b7e9b70182c3fbaae7f53a96"><div class="ttname"><a href="iexamine_8cpp.html#a4f65b501b7e9b70182c3fbaae7f53a96">ter_t_marloss_tree</a></div><div class="ttdeci">static const ter_str_id ter_t_marloss_tree(&quot;t_marloss_tree&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a74b0a74d0c8e26f76954c2d11eb10154"><div class="ttname"><a href="iexamine_8cpp.html#a74b0a74d0c8e26f76954c2d11eb10154">ter_t_tree_fungal</a></div><div class="ttdeci">static const ter_str_id ter_t_tree_fungal(&quot;t_tree_fungal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="iexamine_8cpp.html#a887b627a1c6aa9a02e110fe43e1ef025">itype_marloss_berry</a>, <a class="el" href="iexamine_8cpp.html#a022d3e979db490c63a348af7ac50cffd">itype_mycus_fruit</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="iexamine_8cpp_source.html#l04253">pick_plant()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, <a class="el" href="map_8cpp_source.html#l02226">map::ter_set()</a>, <a class="el" href="iexamine_8cpp.html#a4f65b501b7e9b70182c3fbaae7f53a96">ter_t_marloss_tree</a>, <a class="el" href="iexamine_8cpp.html#a74b0a74d0c8e26f76954c2d11eb10154">ter_t_tree_fungal</a>, <a class="el" href="iexamine_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>, <a class="el" href="iexamine_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="iexamine_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="game_8cpp_source.html#l10870">game::place_player()</a>.</p>

</div>
</div>
<a id="a8f535acef0246f6278825d8b8e99b221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f535acef0246f6278825d8b8e99b221">&#9670;&nbsp;</a></span>try_start_hacking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iexamine::try_start_hacking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01397">1397</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;{</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceiexamine.html#a44996bde1bc157e453fa64ec3b6aba34">can_hack</a>( you ) ) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> hacking_tool = <a class="code" href="classitem__location.html">item_location</a>{you, &amp;you.<a class="code" href="classCharacter.html#a201bedaf0d4d679b34fea2160434760f">best_item_with_quality</a>( <a class="code" href="iexamine_8cpp.html#a0e93b821c731e5a0e2504212605cfcd2">qual_HACK</a> )};</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        hacking_tool-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( hacking_tool-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>(), hacking_tool.<a class="code" href="classitem__location.html#a7c2a92227d0946b673eb95b0a53c766c">position</a>(), &amp;you );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classhacking__activity__actor.html">hacking_activity_actor</a>( hacking_tool ) );</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        you.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( examp );</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div>
<div class="ttc" id="aclasshacking__activity__actor_html"><div class="ttname"><a href="classhacking__activity__actor.html">hacking_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00210">activity_actor_definitions.h:211</a></div></div>
<div class="ttc" id="aclassitem_html_a57b10fc9db286a3449ddc92ab3d896f5"><div class="ttname"><a href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo (if available) and return the amount of ammo that was consumed Consume order: loaded ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10878">item.cpp:10878</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l10226">Character::best_item_with_quality()</a>, <a class="el" href="iexamine_8cpp_source.html#l01383">can_hack()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="item__location_8cpp_source.html#l01011">item_location::position()</a>, and <a class="el" href="iexamine_8cpp.html#a0e93b821c731e5a0e2504212605cfcd2">qual_HACK</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine__actors_8cpp_source.html#l00163">cardreader_examine_actor::call()</a>, <a class="el" href="iexamine_8cpp_source.html#l01424">cardreader_foodplace()</a>, <a class="el" href="iexamine_8cpp_source.html#l01816">gunsafe_el()</a>, and <a class="el" href="iexamine_8cpp_source.html#l05185">pay_gas()</a>.</p>

</div>
</div>
<a id="a49b6859bad7428ebea265e73982b8db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b6859bad7428ebea265e73982b8db9">&#9670;&nbsp;</a></span>vending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::vending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates vending machine UI and allows players to purchase contained items with a cash card. </p>

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l01024">1024</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;{</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    constexpr <span class="keywordtype">int</span> moves_cost = to_moves&lt;int&gt;( 5_seconds );</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> = you.<a class="code" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">charges_of</a>( <a class="code" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a> );</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="classmap__stack.html">map_stack</a> vend_items = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span>( vend_items.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The vending machine is empty.&quot;</span> ) );</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need some money on a cash card to buy things.&quot;</span> ) );</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordtype">int</span> w_items_w = 0;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordtype">int</span> w_info_w = 0;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordtype">int</span> list_lines = 0;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordtype">int</span> lines_above = 0;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordtype">int</span> lines_below = 0;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    constexpr <span class="keywordtype">int</span> first_item_offset = 3; <span class="comment">// header size</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classcatacurses_1_1window.html">catacurses::window</a> w_item_info;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> <a class="code" href="namespaceui.html">ui</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_screen_resize( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> padding( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - <a class="code" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> ) / 4, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0,</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                             <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> - <a class="code" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> ) / 6 );</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> window_h   = <a class="code" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> + <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> - <a class="code" href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a> ) * 2 / 3;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> window_w   = <a class="code" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> + <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, <a class="code" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - <a class="code" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a> ) / 2;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        w_items_w  = window_w / 2;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        w_info_w   = window_w - w_items_w;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        list_lines = window_h - 4; <span class="comment">// minus for header and footer</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        lines_above = list_lines / 2;                  <span class="comment">// lines above the selector</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        lines_below = list_lines / 2 + list_lines % 2; <span class="comment">// lines below the selector</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        w = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( window_h, w_items_w,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                                padding );</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        w_item_info = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( window_h, w_info_w,</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                          padding + <a class="code" href="structpoint.html">point</a>( w_items_w, 0 ) );</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position( padding, <a class="code" href="structpoint.html">point</a>( window_w, window_h ) );</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    } );</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.mark_resize();</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordtype">bool</span> used_machine = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;VENDING_MACHINE&quot;</span> );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    ctxt.register_navigate_ui_list();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;SCROLL_ITEM_INFO_UP&quot;</span> );</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;SCROLL_ITEM_INFO_DOWN&quot;</span> );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;CONFIRM&quot;</span> );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    ctxt.register_action( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// Collate identical items.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// First, build a map {item::tname} =&gt; {item_it, item_it, item_it...}</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keyword">using</span> iterator_t = decltype( std::begin( vend_items ) ); <span class="comment">// map_stack::iterator doesn&#39;t exist.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    std::map&lt;std::string, std::vector&lt;iterator_t&gt;&gt; item_map;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = std::begin( vend_items ); it != <a class="code" href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">std::end</a>( vend_items ); ++it ) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="comment">// |# {name}|</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="comment">// 123      4</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        std::string suffix = it-&gt;count() &gt; 1 ? <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; (%d)&quot;</span>, it-&gt;count() ) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        item_map[it-&gt;tname() + suffix].push_back( it );</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// Next, put pointers to the pairs in the map in a vector to allow indexing.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    std::vector&lt;std::map&lt;std::string, std::vector&lt;iterator_t&gt;&gt;::value_type *&gt; item_list;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    item_list.reserve( item_map.size() );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;pair : item_map ) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        item_list.emplace_back( &amp;pair );</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordtype">int</span> cur_pos = 0;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordtype">int</span> item_info_scroll_pos = 0;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;item_info_scroll_delta = list_lines;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> num_items = item_list.size();</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> page_size = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( num_items, list_lines );</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <a class="code" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w );</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="namespacecatacurses.html#a4b4f58d631572c4763be9efe9af6c6bc">wborder</a>( w, <a class="code" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code" href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a>, <a class="code" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>, <a class="code" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                 <a class="code" href="output_8h.html#a6405dcdb708433c3c3dde836aa8a15cc">LINE_OXXO</a>, <a class="code" href="output_8h.html#a479e8a9ad84c68ed5f8609d4b536a8bb">LINE_OOXX</a>, <a class="code" href="output_8h.html#af6d239f277e1b763f690b94efa469792">LINE_XXOO</a>, <a class="code" href="output_8h.html#ad3a54f998264087befce6de30cb787b0">LINE_XOOX</a> );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <a class="code" href="namespacecatacurses.html#a378d993a574b6bf30ea509fa46de2142">mvwhline</a>( w, <a class="code" href="structpoint.html">point</a>( 1, first_item_offset - 1 ), <a class="code" href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a>, w_items_w - 2 );</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="namespacecatacurses.html#a1687642ac64126135cb717de36e9e087">mvwaddch</a>( w, <a class="code" href="structpoint.html">point</a>( 0, first_item_offset - 1 ), <a class="code" href="output_8h.html#a4b80f0039259ebe61dc2e58ca4b31043">LINE_XXXO</a> ); <span class="comment">// |-</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="namespacecatacurses.html#a1687642ac64126135cb717de36e9e087">mvwaddch</a>( w, <a class="code" href="structpoint.html">point</a>( w_items_w - 1, first_item_offset - 1 ), <a class="code" href="output_8h.html#a0803e4570f3cd69d38952bc2b4555c24">LINE_XOXX</a> ); <span class="comment">// -|</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <a class="code" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w, <a class="code" href="structpoint.html">point</a>( 2, 1 ), w_items_w - 3, <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Money left: %s&quot;</span> ), <a class="code" href="output_8h.html#afc5db1b09e0b37fa89eda5966c61b1f5">format_money</a>( <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) );</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="comment">// Keep the item selector centered in the page.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordtype">int</span> page_beg;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">if</span>( cur_pos &lt; num_items - cur_pos ) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            page_beg = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, cur_pos - lines_above );</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="keywordtype">int</span> page_end = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( num_items, cur_pos + lines_below );</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            page_beg = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0, page_end - list_lines );</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> <a class="code" href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a> = 0; <a class="code" href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a> &lt; page_size; ++<a class="code" href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a> ) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> i = page_beg + <a class="code" href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keyword">const</span> <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = ( i == cur_pos ) ? <a class="code" href="color_8h.html#ab13a4a0b8847d4df7c32c9453a2670e6">h_light_gray</a> : <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem = item_list[i];</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> count = elem-&gt;second.size();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = ( count &lt; 10 ) ? ( <span class="charliteral">&#39;0&#39;</span> + count ) : <span class="charliteral">&#39;*&#39;</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <a class="code" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w, <a class="code" href="structpoint.html">point</a>( 1, first_item_offset + <a class="code" href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a> ), w_items_w - 3, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="stringliteral">&quot;%c %s&quot;</span>, <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>,</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                            elem-&gt;first.c_str() );</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <a class="code" href="output_8cpp.html#a37db5c581b2a20faa11b14164de305df">draw_scrollbar</a>( w, cur_pos, list_lines, num_items, <a class="code" href="structpoint.html">point</a>( 0, first_item_offset ) );</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w );</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="comment">// Item info</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keyword">auto</span> &amp;cur_items = item_list[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( cur_pos )]-&gt;second;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keyword">auto</span> &amp;cur_item  = cur_items.back();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        std::vector&lt;iteminfo&gt; cur_item_info;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        cur_item-&gt;info( <span class="keyword">true</span>, cur_item_info );</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <a class="code" href="structitem__info__data.html">item_info_data</a> data( cur_item-&gt;display_name(), <span class="stringliteral">&quot;&quot;</span>, cur_item_info, {}, item_info_scroll_pos );</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        data.without_getch = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="output_8cpp.html#ae94727a9102271cfed214e5988c8f440">draw_item_info</a>( w_item_info, data );</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    } );</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">for</span>( ;; ) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> num_items = item_list.size();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// Item info</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keyword">auto</span> &amp;cur_items = item_list[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( cur_pos )]-&gt;second;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keyword">auto</span> &amp;cur_item  = cur_items.back();</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keyword">const</span> std::string &amp;<a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = ctxt.handle_input();</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="ui_8cpp.html#a30f314df91df066807f8f0e735ada959">navigate_ui_list</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, cur_pos, 3, num_items, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            item_info_scroll_pos = 0;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SCROLL_ITEM_INFO_UP&quot;</span> ) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">// clamping to min/max is done in draw_item_info</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            item_info_scroll_pos -= item_info_scroll_delta;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SCROLL_ITEM_INFO_DOWN&quot;</span> ) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            item_info_scroll_pos += item_info_scroll_delta;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CONFIRM&quot;</span> ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> iprice = cur_item-&gt;price( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">if</span>( iprice &gt; <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> ) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t afford that item.&quot;</span> ) );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <span class="keywordflow">if</span>( !used_machine ) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                used_machine = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                you.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -moves_cost );</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <a class="code" href="namespaceunits.html#a6bbf7141fbe187ada34446a4d1ed1b4e">money</a> -= iprice;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            you.<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, iprice );</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            you.<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( *cur_item );</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            vend_items.<a class="code" href="classmap__stack.html#ab58ec66a7ca2e476c6d90967dccc8062">erase</a>( cur_item );</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            cur_items.pop_back();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordflow">if</span>( !cur_items.empty() ) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            item_info_scroll_pos = 0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            item_list.erase( std::begin( item_list ) + cur_pos );</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="keywordflow">if</span>( item_list.empty() ) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;With a beep, the empty vending machine shuts down.&quot;</span> ) );</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_pos == num_items - 1 ) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                cur_pos--;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="ttc" id="aclasscatacurses_1_1window_html"><div class="ttname"><a href="classcatacurses_1_1window.html">catacurses::window</a></div><div class="ttdoc">A wrapper over a pointer to a curses window.</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00054">cursesdef.h:55</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8h_source.html#l00039">input_context.h:40</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00074">ui_manager.h:75</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_ab13a4a0b8847d4df7c32c9453a2670e6"><div class="ttname"><a href="color_8h.html#ab13a4a0b8847d4df7c32c9453a2670e6">h_light_gray</a></div><div class="ttdeci">#define h_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00034">color.h:34</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_a4f3a5fd278254d867d914ad5953679e2"><div class="ttname"><a href="mapgen_8cpp.html#a4f3a5fd278254d867d914ad5953679e2">line</a></div><div class="ttdeci">void line(map *m, const ter_id &amp;type, const point &amp;p1, const point &amp;p2, int z)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l07721">mapgen.cpp:7721</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a1687642ac64126135cb717de36e9e087"><div class="ttname"><a href="namespacecatacurses.html#a1687642ac64126135cb717de36e9e087">catacurses::mvwaddch</a></div><div class="ttdeci">void mvwaddch(const window &amp;win, const point &amp;p, chtype ch)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00239">ncurses_def.cpp:239</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a378d993a574b6bf30ea509fa46de2142"><div class="ttname"><a href="namespacecatacurses.html#a378d993a574b6bf30ea509fa46de2142">catacurses::mvwhline</a></div><div class="ttdeci">void mvwhline(const window &amp;win, const point &amp;p, chtype ch, int n)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00221">ncurses_def.cpp:221</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a4b4f58d631572c4763be9efe9af6c6bc"><div class="ttname"><a href="namespacecatacurses.html#a4b4f58d631572c4763be9efe9af6c6bc">catacurses::wborder</a></div><div class="ttdeci">void wborder(const window &amp;win, chtype ls, chtype rs, chtype ts, chtype bs, chtype tl, chtype tr, chtype bl, chtype br)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00211">ncurses_def.cpp:211</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a576fd20080b8f49e27acf97af45b374b"><div class="ttname"><a href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, const point &amp;begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00067">ncurses_def.cpp:67</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ace2ce3990cb812fb83adf6e4ea1f9e8e"><div class="ttname"><a href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">catacurses::werase</a></div><div class="ttdeci">void werase(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00083">ncurses_def.cpp:83</a></div></div>
<div class="ttc" id="anamespacekeycode_html_a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac"><div class="ttname"><a href="namespacekeycode.html#a16ca776f0df120afb4f1b16a92e2d7f7aa6efe66b8fc51ca203d5f0015d983eac">keycode::end</a></div><div class="ttdeci">@ end</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00095">input.h:95</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00504">ui_manager.cpp:504</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00024">overmap_ui.h:25</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00049">output.cpp:49</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a32bc92e8282b63d800068ce8e182b269"><div class="ttname"><a href="output_8cpp.html#a32bc92e8282b63d800068ce8e182b269">FULL_SCREEN_HEIGHT</a></div><div class="ttdeci">int FULL_SCREEN_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00058">output.cpp:58</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a37db5c581b2a20faa11b14164de305df"><div class="ttname"><a href="output_8cpp.html#a37db5c581b2a20faa11b14164de305df">draw_scrollbar</a></div><div class="ttdeci">void draw_scrollbar(const catacurses::window &amp;window, const int iCurrentLine, const int iContentHeight, const int iNumLines, const point &amp;offset, nc_color bar_color, const bool bDoNotScrollToEnd)</div><div class="ttdoc">Draw a scrollbar (Legacy function, use class scrollbar instead!)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01704">output.cpp:1704</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00050">output.cpp:50</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00268">output.cpp:268</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ae94727a9102271cfed214e5988c8f440"><div class="ttname"><a href="output_8cpp.html#ae94727a9102271cfed214e5988c8f440">draw_item_info</a></div><div class="ttdeci">input_event draw_item_info(const int iLeft, const int iWidth, const int iTop, const int iHeight, item_info_data &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00962">output.cpp:962</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_af24921c70e875c1d0888315b9452b562"><div class="ttname"><a href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a></div><div class="ttdeci">int FULL_SCREEN_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00057">output.cpp:57</a></div></div>
<div class="ttc" id="aoutput_8h_html_a0803e4570f3cd69d38952bc2b4555c24"><div class="ttname"><a href="output_8h.html#a0803e4570f3cd69d38952bc2b4555c24">LINE_XOXX</a></div><div class="ttdeci">#define LINE_XOXX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00054">output.h:54</a></div></div>
<div class="ttc" id="aoutput_8h_html_a33ab4e0193402fed8f74590a30fadc3c"><div class="ttname"><a href="output_8h.html#a33ab4e0193402fed8f74590a30fadc3c">LINE_XOXO</a></div><div class="ttdeci">#define LINE_XOXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00046">output.h:46</a></div></div>
<div class="ttc" id="aoutput_8h_html_a435355aeca1be3844e79fc4db8e691e1"><div class="ttname"><a href="output_8h.html#a435355aeca1be3844e79fc4db8e691e1">LINE_OXOX</a></div><div class="ttdeci">#define LINE_OXOX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00047">output.h:47</a></div></div>
<div class="ttc" id="aoutput_8h_html_a479e8a9ad84c68ed5f8609d4b536a8bb"><div class="ttname"><a href="output_8h.html#a479e8a9ad84c68ed5f8609d4b536a8bb">LINE_OOXX</a></div><div class="ttdeci">#define LINE_OOXX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00050">output.h:50</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4b80f0039259ebe61dc2e58ca4b31043"><div class="ttname"><a href="output_8h.html#a4b80f0039259ebe61dc2e58ca4b31043">LINE_XXXO</a></div><div class="ttdeci">#define LINE_XXXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00052">output.h:52</a></div></div>
<div class="ttc" id="aoutput_8h_html_a6405dcdb708433c3c3dde836aa8a15cc"><div class="ttname"><a href="output_8h.html#a6405dcdb708433c3c3dde836aa8a15cc">LINE_OXXO</a></div><div class="ttdeci">#define LINE_OXXO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00049">output.h:49</a></div></div>
<div class="ttc" id="aoutput_8h_html_ad3a54f998264087befce6de30cb787b0"><div class="ttname"><a href="output_8h.html#ad3a54f998264087befce6de30cb787b0">LINE_XOOX</a></div><div class="ttdeci">#define LINE_XOOX</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00051">output.h:51</a></div></div>
<div class="ttc" id="aoutput_8h_html_af6d239f277e1b763f690b94efa469792"><div class="ttname"><a href="output_8h.html#af6d239f277e1b763f690b94efa469792">LINE_XXOO</a></div><div class="ttdeci">#define LINE_XXOO</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00048">output.h:48</a></div></div>
<div class="ttc" id="astructitem__info__data_html"><div class="ttname"><a href="structitem__info__data.html">item_info_data</a></div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00508">output.h:508</a></div></div>
<div class="ttc" id="aui_8cpp_html_a30f314df91df066807f8f0e735ada959"><div class="ttname"><a href="ui_8cpp.html#a30f314df91df066807f8f0e735ada959">navigate_ui_list</a></div><div class="ttdeci">bool navigate_ui_list(const std::string &amp;action, V &amp;val, int page_delta, S size, bool wrap)</div><div class="ttdoc">Helper for typical UI list navigation with wrap-around Handles up, down, scroll_up and _down,...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01421">ui.cpp:1421</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="classCharacter.html#a27276eed63fa4e431519d2b805735e0d">Character::charges_of()</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="output_8cpp_source.html#l00962">draw_item_info()</a>, <a class="el" href="output_8cpp_source.html#l01704">draw_scrollbar()</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="input_8h_source.html#l00095">keycode::end</a>, <a class="el" href="map_8cpp_source.html#l00219">map_stack::erase()</a>, <a class="el" href="output_8h_source.html#l01141">format_money()</a>, <a class="el" href="output_8cpp_source.html#l00058">FULL_SCREEN_HEIGHT</a>, <a class="el" href="output_8cpp_source.html#l00057">FULL_SCREEN_WIDTH</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="color_8h_source.html#l00034">h_light_gray</a>, <a class="el" href="input__context_8cpp_source.html#l00427">input_context::handle_input()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00451">Character::i_add_or_drop()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="iexamine_8cpp.html#ac2c5780a50f6dc653232de1aeffc85ab">itype_cash_card</a>, <a class="el" href="mapgen_8cpp_source.html#l07721">line()</a>, <a class="el" href="output_8h_source.html#l00050">LINE_OOXX</a>, <a class="el" href="output_8h_source.html#l00047">LINE_OXOX</a>, <a class="el" href="output_8h_source.html#l00049">LINE_OXXO</a>, <a class="el" href="output_8h_source.html#l00051">LINE_XOOX</a>, <a class="el" href="output_8h_source.html#l00046">LINE_XOXO</a>, <a class="el" href="output_8h_source.html#l00054">LINE_XOXX</a>, <a class="el" href="output_8h_source.html#l00048">LINE_XXOO</a>, <a class="el" href="output_8h_source.html#l00052">LINE_XXXO</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00239">catacurses::mvwaddch()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00221">catacurses::mvwhline()</a>, <a class="el" href="ui_8cpp_source.html#l01421">navigate_ui_list()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::newwin()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00504">ui_manager::redraw()</a>, <a class="el" href="input__context_8cpp_source.html#l00180">input_context::register_action()</a>, <a class="el" href="input__context_8cpp_source.html#l00519">input_context::register_navigate_ui_list()</a>, <a class="el" href="calendar_8h.html#a30acaac03fb0c3f8f4e2792f24a187c2aa9f0e61a137d86aa9db53465e0801612">second</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="output_8cpp_source.html#l00049">TERMX</a>, <a class="el" href="output_8cpp_source.html#l00050">TERMY</a>, <a class="el" href="output_8cpp_source.html#l00268">trim_and_print()</a>, <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00211">catacurses::wborder()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00083">catacurses::werase()</a>, <a class="el" href="output_8h_source.html#l00546">item_info_data::without_getch</a>, and <a class="el" href="ncurses__def_8cpp_source.html#l00067">catacurses::wnoutrefresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
<a id="a132428ef2cdc394ec957b7d3620696da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132428ef2cdc394ec957b7d3620696da">&#9670;&nbsp;</a></span>water_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::water_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l04658">4658</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;{</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    <a class="code" href="classitem.html">item</a> <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a> = here.<a class="code" href="classmap.html#a3fea339e0cf553409e982fd0fb385d84">water_from</a>( examp );</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    <a class="code" href="namespaceliquid__handler.html#ae1d5d63f7372f4fb16a24624d0434fcd">liquid_handler::handle_liquid</a>( water, <span class="keyword">nullptr</span>, 0, &amp;examp );</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a3fea339e0cf553409e982fd0fb385d84"><div class="ttname"><a href="classmap.html#a3fea339e0cf553409e982fd0fb385d84">map::water_from</a></div><div class="ttdeci">item water_from(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05415">map.cpp:5415</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_ae1d5d63f7372f4fb16a24624d0434fcd"><div class="ttname"><a href="namespaceliquid__handler.html#ae1d5d63f7372f4fb16a24624d0434fcd">liquid_handler::handle_liquid</a></div><div class="ttdeci">bool handle_liquid(item &amp;liquid, const item *const source, const int radius, const tripoint *const source_pos, const vehicle *const source_veh, const int part_num, const monster *const source_mon)</div><div class="ttdoc">This may start a player activity if either source_pos or source_veh is not null.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00459">handle_liquid.cpp:459</a></div></div>
<div class="ttc" id="aomdata_8h_html_ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c"><div class="ttname"><a href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">oter_flags::water</a></div><div class="ttdeci">@ water</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00459">liquid_handler::handle_liquid()</a>, <a class="el" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a>, and <a class="el" href="map_8cpp_source.html#l05415">map::water_from()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l05778">colorized_ter_name_flags_at()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="map_8cpp_source.html#l05415">map::water_from()</a>.</p>

</div>
</div>
<a id="a23a29c7f85f654d3e9b1e97ed92800c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a29c7f85f654d3e9b1e97ed92800c9">&#9670;&nbsp;</a></span>workbench()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::workbench </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07156">7156</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;{</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;    <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;WORKBENCH_ALL_OPTIONS&quot;</span> ) ) {</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;        <a class="code" href="namespaceiexamine.html#a9bc39070b625f5b003d3401d46bf2a0c">workbench_internal</a>( you, examp, std::nullopt );</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().i_at( examp ).empty() ) {</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;pickup( examp );</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;        }</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().furn( examp ).<a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>().deployed_item ) ) {</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;            <a class="code" href="namespaceiexamine.html#ad140e70f3803795e1c50a8a643b668ae">deployed_furniture</a>( you, examp );</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;        }</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;    }</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;}</div>
<div class="ttc" id="aclassint__id_html_a315169d32cce4267b7c8dceff4b0d1d7"><div class="ttname"><a href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">int_id::obj</a></div><div class="ttdeci">const ammo_effect &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="anamespaceiexamine_html_a9bc39070b625f5b003d3401d46bf2a0c"><div class="ttname"><a href="namespaceiexamine.html#a9bc39070b625f5b003d3401d46bf2a0c">iexamine::workbench_internal</a></div><div class="ttdeci">void workbench_internal(Character &amp;you, const tripoint &amp;examp, const std::optional&lt; vpart_reference &gt; &amp;part)</div><div class="ttdef"><b>Definition:</b> <a href="iexamine_8cpp_source.html#l07170">iexamine.cpp:7170</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iexamine_8cpp_source.html#l01625">deployed_furniture()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="item_8cpp_source.html#l14576">item::type_is_defined()</a>, and <a class="el" href="iexamine_8cpp_source.html#l07170">workbench_internal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l06188">game::examine()</a>, <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>, and <a class="el" href="crafting_8cpp_source.html#l00779">set_item_map_or_vehicle()</a>.</p>

</div>
</div>
<a id="a9bc39070b625f5b003d3401d46bf2a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc39070b625f5b003d3401d46bf2a0c">&#9670;&nbsp;</a></span>workbench_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::workbench_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; <a class="el" href="classvpart__reference.html">vpart_reference</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07170">7170</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;{</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;    std::vector&lt;item_location&gt; crafts;</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>;</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;    <span class="keywordtype">bool</span> is_undeployable = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;    <span class="keywordtype">bool</span> items_at_loc = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160; </div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;    <span class="keywordflow">if</span>( part ) {</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;        <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = part-&gt;part().name();</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : part-&gt;items() ) {</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;            <span class="keywordflow">if</span>( it.is_craft() ) {</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;                crafts.emplace_back( <a class="code" href="classvehicle__cursor.html">vehicle_cursor</a>( part-&gt;vehicle(), part-&gt;part_index() ), &amp;it );</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;            }</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;        }</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;        <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>();</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( examp ).<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structfurn__t.html#a57b74b8dc09a89bb25ec33315c22178e">deployed_item</a> ) ) {</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;            is_undeployable = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;        }</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160; </div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items_at_furn = here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( examp );</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;        items_at_loc = !items_at_furn.<a class="code" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>();</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160; </div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;it : items_at_furn ) {</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;            <span class="keywordflow">if</span>( it.is_craft() ) {</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;                crafts.emplace_back( <a class="code" href="classmap__cursor.html">map_cursor</a>( examp ), &amp;it );</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;            }</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        }</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    }</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160; </div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160; </div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;    <span class="keyword">enum</span> option : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;        start_craft = 0,</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;        repeat_craft,</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;        start_long_craft,</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;        work_on_craft,</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;        get_items,</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;        undeploy</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    };</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160; </div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;    amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;furniture&quot;</span>, <span class="stringliteral">&quot;What to do at the %s?&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( start_craft,      <span class="keyword">true</span>,            <span class="charliteral">&#39;1&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Craft items&quot;</span> ) );</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( repeat_craft,     <span class="keyword">true</span>,            <span class="charliteral">&#39;2&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Recraft last recipe&quot;</span> ) );</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( start_long_craft, <span class="keyword">true</span>,            <span class="charliteral">&#39;3&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Craft as long as possible&quot;</span> ) );</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( work_on_craft,    !crafts.empty(), <span class="charliteral">&#39;4&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Work on craft or disassembly&quot;</span> ) );</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;    <span class="keywordflow">if</span>( !part &amp;&amp; here.<a class="code" href="classmap.html#aa904e9f61ca568d8ed985cf22193b8ed">has_items</a>( examp ) ) {</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( get_items,    items_at_loc,    <span class="charliteral">&#39;g&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Get items&quot;</span> ) );</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;    }</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;    <span class="keywordflow">if</span>( is_undeployable ) {</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( undeploy,     <span class="keyword">true</span>,            <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take down the %s&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;    }</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160; </div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160; </div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;    <span class="keyword">const</span> option choice = <span class="keyword">static_cast&lt;</span>option<span class="keyword">&gt;</span>( amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> );</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;    <span class="keywordtype">bool</span> in_shell = you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="iexamine_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> ) ||</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;                    you.<a class="code" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code" href="iexamine_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a> );</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;        <span class="keywordflow">case</span> start_craft: {</div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;            <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t craft while you&#39;re in your shell.&quot;</span> ) );</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iexamine_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lack the substance to affect anything.&quot;</span> ) );</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;                you.<a class="code" href="classCharacter.html#af76464c8a79ca18699db7c12a62fecd0">craft</a>( examp );</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;            }</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;        }</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;        <span class="keywordflow">case</span> repeat_craft: {</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;            <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t craft while you&#39;re in your shell.&quot;</span> ) );</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iexamine_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lack the substance to affect anything.&quot;</span> ) );</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;                you.<a class="code" href="classCharacter.html#aebf83a677b0224a7c07f60cb381e5666">recraft</a>( examp );</div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;            }</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;        }</div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;        <span class="keywordflow">case</span> start_long_craft: {</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;            <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;                you.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t craft while you&#39;re in your shell.&quot;</span> ) );</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( you.<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iexamine_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a> ) ) {</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You lack the substance to affect anything.&quot;</span> ) );</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;                you.<a class="code" href="classCharacter.html#a476c5c68767f3b4b7c2760531c86aac4">long_craft</a>( examp );</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;            }</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;        }</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;        <span class="keywordflow">case</span> work_on_craft: {</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;            std::vector&lt;std::string&gt; item_names;</div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classitem__location.html">item_location</a> &amp;it : crafts ) {</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;                <span class="keywordflow">if</span>( it ) {</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;                    item_names.emplace_back( it.get_item()-&gt;tname() );</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;                }</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;            }</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;            <a class="code" href="classuilist.html">uilist</a> amenu2( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Which craft or disassembly to work on?&quot;</span> ), item_names );</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160; </div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;            <span class="keywordflow">if</span>( amenu2.ret == <a class="code" href="ui_8h.html#ae8a811731dd950d56e478c3ddc17e725">UILIST_CANCEL</a> ) {</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;            }</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160; </div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;            <a class="code" href="classitem.html">item</a> *selected_craft = crafts[amenu2.ret].get_item();</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160; </div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;            <span class="keywordflow">if</span>( !selected_craft ) {</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;            }</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160; </div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;            <span class="keywordflow">if</span>( selected_craft-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iexamine_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a> ) {</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;                you.<a class="code" href="classCharacter.html#a5a8618d4d772b5b84a09d5357a6cd5cc">disassemble</a>( crafts[amenu2.ret], <span class="keyword">true</span> );</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;                <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a9f0a75ae7afe2a19dcb4415262df12f5">can_continue_craft</a>( *selected_craft ) ) {</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;                }</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;                <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;rec = selected_craft-&gt;<a class="code" href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">get_making</a>();</div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;                <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#a535167f4db9b14541d3f26268cb7c4d0">has_recipe</a>( &amp;rec ) ) {</div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;                    you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t know the recipe for the %s and can&#39;t continue crafting.&quot;</span> ),</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;                        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t know the recipe for the %s and can&#39;t continue crafting.&quot;</span> ),</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;                        rec.<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() );</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;                }</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;                you.<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;                    <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;in progress craft&quot;</span>, <span class="stringliteral">&quot;You start working on the %s.&quot;</span> ),</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;                    <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;in progress craft&quot;</span>, <span class="stringliteral">&quot;&lt;npcname&gt; starts working on the %s.&quot;</span> ),</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;                    selected_craft-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;                you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classcraft__activity__actor.html">craft_activity_actor</a>( crafts[amenu2.ret], <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;            }</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;        }</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;        <span class="keywordflow">case</span> get_items: {</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;pickup( examp );</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;        }</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;        <span class="keywordflow">case</span> undeploy: {</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;            <a class="code" href="namespaceiexamine.html#ad140e70f3803795e1c50a8a643b668ae">deployed_furniture</a>( you, examp );</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;        }</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;    }</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a225de862f8875f9ff96ec8a303213404"><div class="ttname"><a href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">Character::has_active_mutation</a></div><div class="ttdeci">bool has_active_mutation(const trait_id &amp;b) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00613">mutation.cpp:613</a></div></div>
<div class="ttc" id="aclassCharacter_html_a476c5c68767f3b4b7c2760531c86aac4"><div class="ttname"><a href="classCharacter.html#a476c5c68767f3b4b7c2760531c86aac4">Character::long_craft</a></div><div class="ttdeci">void long_craft(const std::optional&lt; tripoint &gt; &amp;loc=std::nullopt, const recipe_id &amp;goto_recipe=recipe_id())</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00421">crafting.cpp:421</a></div></div>
<div class="ttc" id="aclassCharacter_html_a535167f4db9b14541d3f26268cb7c4d0"><div class="ttname"><a href="classCharacter.html#a535167f4db9b14541d3f26268cb7c4d0">Character::has_recipe</a></div><div class="ttdeci">bool has_recipe(const recipe *r) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00021">character_crafting.cpp:21</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5a8618d4d772b5b84a09d5357a6cd5cc"><div class="ttname"><a href="classCharacter.html#a5a8618d4d772b5b84a09d5357a6cd5cc">Character::disassemble</a></div><div class="ttdeci">bool disassemble()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02577">crafting.cpp:2577</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9f0a75ae7afe2a19dcb4415262df12f5"><div class="ttname"><a href="classCharacter.html#a9f0a75ae7afe2a19dcb4415262df12f5">Character::can_continue_craft</a></div><div class="ttdeci">bool can_continue_craft(item &amp;craft)</div><div class="ttdoc">Check if the player meets the requirements to continue the in progress craft and if unable to continu...</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01553">crafting.cpp:1553</a></div></div>
<div class="ttc" id="aclassCharacter_html_aebf83a677b0224a7c07f60cb381e5666"><div class="ttname"><a href="classCharacter.html#aebf83a677b0224a7c07f60cb381e5666">Character::recraft</a></div><div class="ttdeci">void recraft(const std::optional&lt; tripoint &gt; &amp;loc=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00412">crafting.cpp:412</a></div></div>
<div class="ttc" id="aclassCharacter_html_af76464c8a79ca18699db7c12a62fecd0"><div class="ttname"><a href="classCharacter.html#af76464c8a79ca18699db7c12a62fecd0">Character::craft</a></div><div class="ttdeci">void craft(const std::optional&lt; tripoint &gt; &amp;loc=std::nullopt, const recipe_id &amp;goto_recipe=recipe_id(), const std::string &amp;filterstring=&quot;&quot;)</div><div class="ttdoc">Start various types of crafts.</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00394">crafting.cpp:394</a></div></div>
<div class="ttc" id="aclasscraft__activity__actor_html"><div class="ttname"><a href="classcraft__activity__actor.html">craft_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00933">activity_actor_definitions.h:934</a></div></div>
<div class="ttc" id="aclassitem_html_a685baa0530bf9e4cb57c2cea27ed332b"><div class="ttname"><a href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">item::get_making</a></div><div class="ttdeci">const recipe &amp; get_making() const</div><div class="ttdoc">Get the stored recipe for in progress crafts.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14758">item.cpp:14758</a></div></div>
<div class="ttc" id="aclassrecipe_html_a7aab303fc95f1e765db693bc59823ed6"><div class="ttname"><a href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">recipe::result_name</a></div><div class="ttdeci">std::string result_name(bool decorated=false) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01216">recipe.cpp:1216</a></div></div>
<div class="ttc" id="aclassvehicle__cursor_html"><div class="ttname"><a href="classvehicle__cursor.html">vehicle_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__selector_8h_source.html#l00018">vehicle_selector.h:19</a></div></div>
<div class="ttc" id="aiexamine_8cpp_html_a014382a6bdb54f1671651435c6be043f"><div class="ttname"><a href="iexamine_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a></div><div class="ttdeci">static const itype_id itype_disassembly(&quot;disassembly&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a738d6878919b43681d80ad9c05dfb9ba"><div class="ttname"><a href="iexamine_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a></div><div class="ttdeci">static const trait_id trait_SHELL3(&quot;SHELL3&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_a930a7d3aa631d14eb81c3f2fa9a6863e"><div class="ttname"><a href="iexamine_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a></div><div class="ttdeci">static const trait_id trait_SHELL2(&quot;SHELL2&quot;)</div></div>
<div class="ttc" id="aiexamine_8cpp_html_ad4dff5f85ae2547eaf44f2f058f984d1"><div class="ttname"><a href="iexamine_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a></div><div class="ttdeci">static const efftype_id effect_incorporeal(&quot;incorporeal&quot;)</div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="crafting_8cpp_source.html#l01553">Character::can_continue_craft()</a>, <a class="el" href="crafting_8cpp_source.html#l00394">Character::craft()</a>, <a class="el" href="iexamine_8cpp_source.html#l01625">deployed_furniture()</a>, <a class="el" href="mapdata_8h_source.html#l00656">furn_t::deployed_item</a>, <a class="el" href="crafting_8cpp_source.html#l02577">Character::disassemble()</a>, <a class="el" href="iexamine_8cpp.html#ad4dff5f85ae2547eaf44f2f058f984d1">effect_incorporeal</a>, <a class="el" href="item__stack_8cpp_source.html#l00019">item_stack::empty()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item_8cpp_source.html#l14758">item::get_making()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mutation_8cpp_source.html#l00613">Character::has_active_mutation()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="map_8cpp_source.html#l05890">map::has_items()</a>, <a class="el" href="character__crafting_8cpp_source.html#l00021">Character::has_recipe()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="item_8cpp_source.html#l09930">item::is_craft()</a>, <a class="el" href="iexamine_8cpp.html#a014382a6bdb54f1671651435c6be043f">itype_disassembly</a>, <a class="el" href="crafting_8cpp_source.html#l00421">Character::long_craft()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mapdata_8cpp_source.html#l00563">map_data_common_t::name()</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="crafting_8cpp_source.html#l00412">Character::recraft()</a>, <a class="el" href="recipe_8cpp_source.html#l01216">recipe::result_name()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iexamine_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a>, <a class="el" href="iexamine_8cpp.html#a738d6878919b43681d80ad9c05dfb9ba">trait_SHELL3</a>, <a class="el" href="item_8cpp_source.html#l14576">item::type_is_defined()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="ui_8h_source.html#l00035">UILIST_CANCEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07156">workbench()</a>.</p>

</div>
</div>
<a id="acc40e68ee855b17b5c9a3238acd39c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc40e68ee855b17b5c9a3238acd39c85">&#9670;&nbsp;</a></span>workout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iexamine::workout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>examp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iexamine_8cpp_source.html#l07313">7313</a> of file <a class="el" href="iexamine_8cpp_source.html">iexamine.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;{</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use the %s to exercise?&quot;</span> ), <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().furnname( examp ) ) ) {</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71ab7e4e0120a041dbe6528b050c04269e0">none</a>( you, examp );</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    }</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classworkout__activity__actor.html">workout_activity_actor</a>( examp ) );</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;}</div>
<div class="ttc" id="aclassworkout__activity__actor_html"><div class="ttname"><a href="classworkout__activity__actor.html">workout_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00974">activity_actor_definitions.h:975</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="dialogue_8h_source.html#l00040">none</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iexamine_8cpp_source.html#l07334">iexamine_functions_from_string()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:47 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
