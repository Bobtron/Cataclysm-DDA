<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: Map Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Map Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cataclysm DDA uses a shifting coordinate system.</p>
<p>This means that when the player moves to a new submap, the (0, 0) coordinate moves from one submap to another, and the coordinates of all entities on the map are shifted to accommodate this.</p>
<p>Furthermore, the map is split into a hierarchical structure. At the top-level there are "overmaps", which are very large chunks of the gameworld. The overmap is split into overmap tiles. When you use 'm' to view the map in-game, what you see are overmap tiles. Each overmap tile is then again split into four submaps (2x2). See <a class="el" href="classovermap.html">overmap</a> and <a class="el" href="classsubmap.html">submap</a>.</p>
<p>Parallel to this, there is the <a class="el" href="classmapbuffer.html">mapbuffer</a>. The mapbuffer manages and stores all submaps. Note that this is separate to the overmap, which stores overmap tiles. The mapbuffer simply loads all submaps that have ever been created into memory and keeps them there in a list. It does not "sort" them into overmaps or anything like that.</p>
<p>Again parallel to this, there is <a class="el" href="classmap.html">map</a> and <code>g-&gt;m</code>. A map contains a 2D pointer-array of submaps, for instance 11x11 submaps. These are usually centered around the player, which is the reason the coordinate system shifts. For all these submaps, it also caches additional data, such as lighting, scent, etc. This is basically where all the "on-screen" processing happens. Most of the source code modifies terrain, monsters and so on only by creating a map instance and using its methods.</p>
<h1><a class="anchor" id="related_classes"></a>
Related Classes</h1>
<p><a class="el" href="classmapbuffer.html">mapbuffer</a> <a class="el" href="classmap.html">map</a> <a class="el" href="classsubmap.html">submap</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:34 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
