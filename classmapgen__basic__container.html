<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: mapgen_basic_container Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmapgen__basic__container-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mapgen_basic_container Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a85eea3365c2561bd908165043a5cbfff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a85eea3365c2561bd908165043a5cbfff">add</a> (const std::shared_ptr&lt; <a class="el" href="classmapgen__function.html">mapgen_function</a> &gt; &amp;ptr)</td></tr>
<tr class="separator:a85eea3365c2561bd908165043a5cbfff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ebf042ab2fb00e1e23a9d58ed672367"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a2ebf042ab2fb00e1e23a9d58ed672367">generate</a> (<a class="el" href="classmapgendata.html">mapgendata</a> &amp;dat, const int hardcoded_weight)</td></tr>
<tr class="memdesc:a2ebf042ab2fb00e1e23a9d58ed672367"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick a mapgen function randomly and call its generate function.  <a href="classmapgen__basic__container.html#a2ebf042ab2fb00e1e23a9d58ed672367">More...</a><br /></td></tr>
<tr class="separator:a2ebf042ab2fb00e1e23a9d58ed672367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2665943964afc4bb0389e1467a8763a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#ad2665943964afc4bb0389e1467a8763a">setup</a> ()</td></tr>
<tr class="memdesc:ad2665943964afc4bb0389e1467a8763a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="classmapgen__function.html#addbbd9ff5f862ecb6cd082bc619a1eac">mapgen_function::setup</a> and sets up the internal weighted list using the <b>current</b> value of <a class="el" href="classmapgen__function.html#ad4487b7d78807aaf3d564ea6688e3392">mapgen_function::weight</a>.  <a href="classmapgen__basic__container.html#ad2665943964afc4bb0389e1467a8763a">More...</a><br /></td></tr>
<tr class="separator:ad2665943964afc4bb0389e1467a8763a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff4ba5df6fdec8030c9f61495fe05778"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#aff4ba5df6fdec8030c9f61495fe05778">finalize_parameters</a> ()</td></tr>
<tr class="separator:aff4ba5df6fdec8030c9f61495fe05778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503666d33c475b41e2a76ebe3b42588e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a503666d33c475b41e2a76ebe3b42588e">check_consistency</a> () const</td></tr>
<tr class="separator:a503666d33c475b41e2a76ebe3b42588e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceec056aa178f1918efa54d3bd705601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#aceec056aa178f1918efa54d3bd705601">check_consistency_with</a> (const <a class="el" href="structoter__t.html">oter_t</a> &amp;ter) const</td></tr>
<tr class="separator:aceec056aa178f1918efa54d3bd705601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341f6fd6177e8c6806d33a93601e3dc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmapgen__parameters.html">mapgen_parameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a341f6fd6177e8c6806d33a93601e3dc7">get_mapgen_params</a> (<a class="el" href="mapgen__parameter_8h.html#a3ae906f0a8bbbef8d2b0fc9fb7f7c2f0">mapgen_parameter_scope</a> scope, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const</td></tr>
<tr class="separator:a341f6fd6177e8c6806d33a93601e3dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a06ec01b4dd9194a2d18cf282e4719630"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::shared_ptr&lt; <a class="el" href="classmapgen__function.html">mapgen_function</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a></td></tr>
<tr class="separator:a06ec01b4dd9194a2d18cf282e4719630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c25bfa8d6d0b842ae39a2ce0516e2e2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::shared_ptr&lt; <a class="el" href="classmapgen__function.html">mapgen_function</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a0c25bfa8d6d0b842ae39a2ce0516e2e2">mapgens_to_recalc_</a></td></tr>
<tr class="separator:a0c25bfa8d6d0b842ae39a2ce0516e2e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e8874d7e6e21ee24d31571d5e1af66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structweighted__int__list.html">weighted_int_list</a>&lt; std::shared_ptr&lt; <a class="el" href="classmapgen__function.html">mapgen_function</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a></td></tr>
<tr class="separator:a14e8874d7e6e21ee24d31571d5e1af66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00334">334</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a85eea3365c2561bd908165043a5cbfff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85eea3365c2561bd908165043a5cbfff">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mapgen_basic_container::add </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classmapgen__function.html">mapgen_function</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00343">343</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                                             {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( ptr );</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span>( std::find( <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.begin(), <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.end(), ptr ) != <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.end() ) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Adding duplicate mapgen to container!&quot;</span> );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.push_back( ptr );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.size() - 1;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="aclassmapgen__basic__container_html_a06ec01b4dd9194a2d18cf282e4719630"><div class="ttname"><a href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgen_basic_container::mapgens_</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; mapgen_function &gt; &gt; mapgens_</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00337">mapgen.cpp:337</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, and <a class="el" href="mapgen_8cpp_source.html#l00337">mapgens_</a>.</p>

</div>
</div>
<a id="a503666d33c475b41e2a76ebe3b42588e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503666d33c475b41e2a76ebe3b42588e">&#9670;&nbsp;</a></span>check_consistency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mapgen_basic_container::check_consistency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00411">411</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                       {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mapgen_function_ptr : <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a> ) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                mapgen_function_ptr.obj-&gt;check();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="ttc" id="aclassmapgen__basic__container_html_a14e8874d7e6e21ee24d31571d5e1af66"><div class="ttname"><a href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">mapgen_basic_container::weights_</a></div><div class="ttdeci">weighted_int_list&lt; std::shared_ptr&lt; mapgen_function &gt; &gt; weights_</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00340">mapgen.cpp:340</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<a id="aceec056aa178f1918efa54d3bd705601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceec056aa178f1918efa54d3bd705601">&#9670;&nbsp;</a></span>check_consistency_with()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mapgen_basic_container::check_consistency_with </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoter__t.html">oter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>ter</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00416">416</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                               {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;mapgen_function_ptr : <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a> ) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                mapgen_function_ptr.obj-&gt;check_consistent_with( ter );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<a id="aff4ba5df6fdec8030c9f61495fe05778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff4ba5df6fdec8030c9f61495fe05778">&#9670;&nbsp;</a></span>finalize_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mapgen_basic_container::finalize_parameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00406">406</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                   {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;mapgen_function_ptr : <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a> ) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                mapgen_function_ptr.obj-&gt;finalize_parameters();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<a id="a2ebf042ab2fb00e1e23a9d58ed672367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ebf042ab2fb00e1e23a9d58ed672367">&#9670;&nbsp;</a></span>generate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mapgen_basic_container::generate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmapgendata.html">mapgendata</a> &amp;&#160;</td>
          <td class="paramname"><em>dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>hardcoded_weight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pick a mapgen function randomly and call its generate function. </p>
<p>This basically runs the mapgen functions with the given <a class="el" href="classmapgendata.html">mapgendata</a> as argument. </p><dl class="section return"><dt>Returns</dt><dd>Whether the mapgen function has been run. It may not get run if the list of mapgen functions is effectively empty. <code>hardcoded_weight</code> Weight for an additional entry. If that entry is chosen, false is returned. If unsure, just use 0 for it. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00360">360</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                                                     {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::shared_ptr&lt;mapgen_function&gt; &amp;ptr : <a class="code" href="classmapgen__basic__container.html#a0c25bfa8d6d0b842ae39a2ce0516e2e2">mapgens_to_recalc_</a> ) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <a class="code" href="structdialogue.html">dialogue</a> d( <a class="code" href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a>( <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>() ), std::make_unique&lt;talker&gt;() );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="keywordtype">int</span> <span class="keyword">const</span> weight = ptr-&gt;weight.evaluate( d );</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">if</span>( weight &gt;= 1 ) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#a29113e0452328c48711c1b83280bfe5e">add_or_replace</a>( ptr, weight );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#ade18f4ca76ee76f0d1d741808dd573e5">remove</a>( ptr );</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">if</span>( hardcoded_weight &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#a23a0eb0640d5aacb0fae74940d2864bd">get_weight</a>() + hardcoded_weight ) &gt; <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#a23a0eb0640d5aacb0fae74940d2864bd">get_weight</a>() ) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keyword">const</span> std::shared_ptr&lt;mapgen_function&gt; *<span class="keyword">const</span> ptr = <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#aa2eb002d2ec795a0aab91178a93d05ba">pick</a>();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span>( !ptr ) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( *ptr );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            ( *ptr )-&gt;generate( dat );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="ttc" id="aavatar_8cpp_html_a75dcf1534079311161f26d7250306379"><div class="ttname"><a href="avatar_8cpp.html#a75dcf1534079311161f26d7250306379">get_talker_for</a></div><div class="ttdeci">std::unique_ptr&lt; talker &gt; get_talker_for(avatar &amp;me)</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01795">avatar.cpp:1795</a></div></div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassmapgen__basic__container_html_a0c25bfa8d6d0b842ae39a2ce0516e2e2"><div class="ttname"><a href="classmapgen__basic__container.html#a0c25bfa8d6d0b842ae39a2ce0516e2e2">mapgen_basic_container::mapgens_to_recalc_</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; mapgen_function &gt; &gt; mapgens_to_recalc_</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00339">mapgen.cpp:339</a></div></div>
<div class="ttc" id="astructdialogue_html"><div class="ttname"><a href="structdialogue.html">dialogue</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00184">dialogue.h:184</a></div></div>
<div class="ttc" id="astructweighted__list_html_a23a0eb0640d5aacb0fae74940d2864bd"><div class="ttname"><a href="structweighted__list.html#a23a0eb0640d5aacb0fae74940d2864bd">weighted_list::get_weight</a></div><div class="ttdeci">W get_weight() const</div><div class="ttdoc">This will return the sum of all the object's weights in the list.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00166">weighted_list.h:166</a></div></div>
<div class="ttc" id="astructweighted__list_html_a29113e0452328c48711c1b83280bfe5e"><div class="ttname"><a href="structweighted__list.html#a29113e0452328c48711c1b83280bfe5e">weighted_list::add_or_replace</a></div><div class="ttdeci">T * add_or_replace(const T &amp;obj, const W &amp;weight)</div><div class="ttdoc">This will check to see if the given object is already in the weighted list.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00070">weighted_list.h:70</a></div></div>
<div class="ttc" id="astructweighted__list_html_aa2eb002d2ec795a0aab91178a93d05ba"><div class="ttname"><a href="structweighted__list.html#aa2eb002d2ec795a0aab91178a93d05ba">weighted_list::pick</a></div><div class="ttdeci">const T * pick(unsigned int randi) const</div><div class="ttdoc">This will return a pointer to an object from the list randomly selected and biased by weight.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00113">weighted_list.h:113</a></div></div>
<div class="ttc" id="astructweighted__list_html_ade18f4ca76ee76f0d1d741808dd573e5"><div class="ttname"><a href="structweighted__list.html#ade18f4ca76ee76f0d1d741808dd573e5">weighted_list::remove</a></div><div class="ttdeci">void remove(const T &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00050">weighted_list.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weighted__list_8h_source.html#l00070">weighted_list&lt; W, T &gt;::add_or_replace()</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="avatar_8cpp_source.html#l01795">get_talker_for()</a>, <a class="el" href="weighted__list_8h_source.html#l00166">weighted_list&lt; W, T &gt;::get_weight()</a>, <a class="el" href="mapgen_8cpp_source.html#l00339">mapgens_to_recalc_</a>, <a class="el" href="weighted__list_8h_source.html#l00113">weighted_list&lt; W, T &gt;::pick()</a>, <a class="el" href="weighted__list_8h_source.html#l00050">weighted_list&lt; W, T &gt;::remove()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<a id="a341f6fd6177e8c6806d33a93601e3dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341f6fd6177e8c6806d33a93601e3dc7">&#9670;&nbsp;</a></span>get_mapgen_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> mapgen_basic_container::get_mapgen_params </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mapgen__parameter_8h.html#a3ae906f0a8bbbef8d2b0fc9fb7f7c2f0">mapgen_parameter_scope</a>&#160;</td>
          <td class="paramname"><em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00422">422</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                                                              {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="structmapgen__parameters.html">mapgen_parameters</a> result;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structweighted__object.html">weighted_object</a>&lt;<span class="keywordtype">int</span>, std::shared_ptr&lt;mapgen_function&gt;&gt; &amp;p : <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a> ) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                result.<a class="code" href="structmapgen__parameters.html#af4fa4b971b74880bf290b78a179cd2cd">check_and_merge</a>( p.obj-&gt;get_mapgen_params( scope ), <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
<div class="ttc" id="astructmapgen__parameters_html"><div class="ttname"><a href="structmapgen__parameters.html">mapgen_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="mapgen__parameter_8h_source.html#l00056">mapgen_parameter.h:56</a></div></div>
<div class="ttc" id="astructmapgen__parameters_html_af4fa4b971b74880bf290b78a179cd2cd"><div class="ttname"><a href="structmapgen__parameters.html#af4fa4b971b74880bf290b78a179cd2cd">mapgen_parameters::check_and_merge</a></div><div class="ttdeci">void check_and_merge(const mapgen_parameters &amp;, const std::string &amp;context, mapgen_parameter_scope up_to_scope=mapgen_parameter_scope::last)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l01719">mapgen.cpp:1719</a></div></div>
<div class="ttc" id="astructweighted__object_html"><div class="ttname"><a href="structweighted__object.html">weighted_object</a></div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00014">weighted_list.h:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l01719">mapgen_parameters::check_and_merge()</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, and <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<a id="ad2665943964afc4bb0389e1467a8763a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2665943964afc4bb0389e1467a8763a">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mapgen_basic_container::setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls <a class="el" href="classmapgen__function.html#addbbd9ff5f862ecb6cd082bc619a1eac">mapgen_function::setup</a> and sets up the internal weighted list using the <b>current</b> value of <a class="el" href="classmapgen__function.html#ad4487b7d78807aaf3d564ea6688e3392">mapgen_function::weight</a>. </p>
<p>This value may have changed since it was first added, so this is needed to recalculate the weighted list. </p>

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00388">388</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                     {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> std::shared_ptr&lt;mapgen_function&gt; &amp;ptr : <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a> ) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( ptr-&gt;weight );</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordflow">if</span>( ptr-&gt;weight.is_constant() ) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    <span class="keywordtype">int</span> <span class="keyword">const</span> weight = ptr-&gt;weight.constant();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    <span class="keywordflow">if</span>( weight &lt; 1 ) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        <span class="keywordflow">continue</span>; <span class="comment">// rejected!</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    <a class="code" href="classmapgen__basic__container.html#a14e8874d7e6e21ee24d31571d5e1af66">weights_</a>.<a class="code" href="structweighted__list.html#ad960be5e22f6aaa4eb01af592a9476f5">add</a>( ptr, weight );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <a class="code" href="classmapgen__basic__container.html#a0c25bfa8d6d0b842ae39a2ce0516e2e2">mapgens_to_recalc_</a>.push_back( ptr );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                ptr-&gt;setup();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment">// Not needed anymore, pointers are now stored in weights_ (or not used at all)</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="classmapgen__basic__container.html#a06ec01b4dd9194a2d18cf282e4719630">mapgens_</a>.clear();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="ttc" id="astructweighted__list_html_ad960be5e22f6aaa4eb01af592a9476f5"><div class="ttname"><a href="structweighted__list.html#ad960be5e22f6aaa4eb01af592a9476f5">weighted_list::add</a></div><div class="ttdeci">T * add(const T &amp;obj, const W &amp;weight)</div><div class="ttdoc">This will add a new object to the weighted list.</div><div class="ttdef"><b>Definition:</b> <a href="weighted__list_8h_source.html#l00040">weighted_list.h:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weighted__list_8h_source.html#l00040">weighted_list&lt; W, T &gt;::add()</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="mapgen_8cpp_source.html#l00337">mapgens_</a>, <a class="el" href="mapgen_8cpp_source.html#l00339">mapgens_to_recalc_</a>, and <a class="el" href="mapgen_8cpp_source.html#l00340">weights_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a06ec01b4dd9194a2d18cf282e4719630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ec01b4dd9194a2d18cf282e4719630">&#9670;&nbsp;</a></span>mapgens_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::shared_ptr&lt;<a class="el" href="classmapgen__function.html">mapgen_function</a>&gt; &gt; mapgen_basic_container::mapgens_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00337">337</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l00343">add()</a>, and <a class="el" href="mapgen_8cpp_source.html#l00388">setup()</a>.</p>

</div>
</div>
<a id="a0c25bfa8d6d0b842ae39a2ce0516e2e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c25bfa8d6d0b842ae39a2ce0516e2e2">&#9670;&nbsp;</a></span>mapgens_to_recalc_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::shared_ptr&lt;<a class="el" href="classmapgen__function.html">mapgen_function</a>&gt; &gt; mapgen_basic_container::mapgens_to_recalc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00339">339</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l00360">generate()</a>, and <a class="el" href="mapgen_8cpp_source.html#l00388">setup()</a>.</p>

</div>
</div>
<a id="a14e8874d7e6e21ee24d31571d5e1af66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14e8874d7e6e21ee24d31571d5e1af66">&#9670;&nbsp;</a></span>weights_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structweighted__int__list.html">weighted_int_list</a>&lt;std::shared_ptr&lt;<a class="el" href="classmapgen__function.html">mapgen_function</a>&gt; &gt; mapgen_basic_container::weights_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l00340">340</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l00411">check_consistency()</a>, <a class="el" href="mapgen_8cpp_source.html#l00416">check_consistency_with()</a>, <a class="el" href="mapgen_8cpp_source.html#l00406">finalize_parameters()</a>, <a class="el" href="mapgen_8cpp_source.html#l00360">generate()</a>, <a class="el" href="mapgen_8cpp_source.html#l00422">get_mapgen_params()</a>, and <a class="el" href="mapgen_8cpp_source.html#l00388">setup()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:41 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
