<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: jmapgen_objects Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="structjmapgen__objects-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">jmapgen_objects Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mapgen_8h_source.html">mapgen.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a19938117f35081ba5a24400404b9d3c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a19938117f35081ba5a24400404b9d3c9">jmapgen_objects</a> (const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;offset, const <a class="el" href="structpoint.html">point</a> &amp;mapsize, const <a class="el" href="structpoint.html">point</a> &amp;tot_size)</td></tr>
<tr class="separator:a19938117f35081ba5a24400404b9d3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c55acb74b0b002b642ba0f25c76984"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a41c55acb74b0b002b642ba0f25c76984">check_bounds</a> (const <a class="el" href="classjmapgen__place.html">jmapgen_place</a> &amp;place, const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jso)</td></tr>
<tr class="separator:a41c55acb74b0b002b642ba0f25c76984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb2ab4770da8a07cd1b09435de581862"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#acb2ab4770da8a07cd1b09435de581862">add</a> (const <a class="el" href="classjmapgen__place.html">jmapgen_place</a> &amp;place, const <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; const <a class="el" href="classjmapgen__piece.html">jmapgen_piece</a> &gt; &amp;piece)</td></tr>
<tr class="separator:acb2ab4770da8a07cd1b09435de581862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5399c9acf27b286dea1b01a0d6de176"><td class="memTemplParams" colspan="2">template&lt;typename PieceType &gt; </td></tr>
<tr class="memitem:ac5399c9acf27b286dea1b01a0d6de176"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#ac5399c9acf27b286dea1b01a0d6de176">load_objects</a> (const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;parray, std::string_view <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>)</td></tr>
<tr class="memdesc:ac5399c9acf27b286dea1b01a0d6de176"><td class="mdescLeft">&#160;</td><td class="mdescRight">PieceType must be inheriting from <a class="el" href="classjmapgen__piece.html" title="Basic mapgen object.">jmapgen_piece</a>.  <a href="structjmapgen__objects.html#ac5399c9acf27b286dea1b01a0d6de176">More...</a><br /></td></tr>
<tr class="separator:ac5399c9acf27b286dea1b01a0d6de176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a510911f272fb431cc506bc1f4a69e2"><td class="memTemplParams" colspan="2">template&lt;typename PieceType &gt; </td></tr>
<tr class="memitem:a3a510911f272fb431cc506bc1f4a69e2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a3a510911f272fb431cc506bc1f4a69e2">load_objects</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jsi, const std::string &amp;member_name, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>)</td></tr>
<tr class="memdesc:a3a510911f272fb431cc506bc1f4a69e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the mapgen objects from the array inside of jsi.  <a href="structjmapgen__objects.html#a3a510911f272fb431cc506bc1f4a69e2">More...</a><br /></td></tr>
<tr class="separator:a3a510911f272fb431cc506bc1f4a69e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50162a45039265d5b4c6ba0434862ef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a50162a45039265d5b4c6ba0434862ef5">finalize</a> ()</td></tr>
<tr class="separator:a50162a45039265d5b4c6ba0434862ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ea0e6e6045adc875c4d33b739dd4eba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a2ea0e6e6045adc875c4d33b739dd4eba">check</a> (const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, const <a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;) const</td></tr>
<tr class="separator:a2ea0e6e6045adc875c4d33b739dd4eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ceb4b3a9e5fc18fc3bc994a7990ee1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a20ceb4b3a9e5fc18fc3bc994a7990ee1">merge_parameters_into</a> (<a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;, const std::string &amp;outer_context) const</td></tr>
<tr class="separator:a20ceb4b3a9e5fc18fc3bc994a7990ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a089236574acafdfff305bde6ee591403"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a089236574acafdfff305bde6ee591403">add_placement_coords_to</a> (std::unordered_set&lt; <a class="el" href="structpoint.html">point</a> &gt; &amp;) const</td></tr>
<tr class="separator:a089236574acafdfff305bde6ee591403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3921d88520d5eec73be24aa271613c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#ae3921d88520d5eec73be24aa271613c5">apply</a> (const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;dat, <a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06e">mapgen_phase</a>, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const</td></tr>
<tr class="separator:ae3921d88520d5eec73be24aa271613c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca85b950a78f4ca13fc717affd6c89b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#aca85b950a78f4ca13fc717affd6c89b6">apply</a> (const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;dat, <a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06e">mapgen_phase</a>, const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;offset, const std::string &amp;<a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>) const</td></tr>
<tr class="separator:aca85b950a78f4ca13fc717affd6c89b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f61789e4a7cc587b2dcd5883327dc3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#ad3f61789e4a7cc587b2dcd5883327dc3">has_vehicle_collision</a> (const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;dat, const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;offset) const</td></tr>
<tr class="memdesc:ad3f61789e4a7cc587b2dcd5883327dc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks if applying these objects to data would cause cause a collision with vehicles on the same map  <a href="structjmapgen__objects.html#ad3f61789e4a7cc587b2dcd5883327dc3">More...</a><br /></td></tr>
<tr class="separator:ad3f61789e4a7cc587b2dcd5883327dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa191b0cc9ec76f2a3b3f262bc4b637c3"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:aa191b0cc9ec76f2a3b3f262bc4b637c3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#aa191b0cc9ec76f2a3b3f262bc4b637c3">load_objects</a> (const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;parray, const std::string_view)</td></tr>
<tr class="separator:aa191b0cc9ec76f2a3b3f262bc4b637c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a573a70a619220b128f5221b14b0eb948"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> = std::pair&lt; <a class="el" href="classjmapgen__place.html">jmapgen_place</a>, <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; const <a class="el" href="classjmapgen__piece.html">jmapgen_piece</a> &gt; &gt;</td></tr>
<tr class="memdesc:a573a70a619220b128f5221b14b0eb948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combination of where to place something and what to place.  <a href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">More...</a><br /></td></tr>
<tr class="separator:a573a70a619220b128f5221b14b0eb948"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4a4094ff1cca9a9ad0518b9667a30182"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a></td></tr>
<tr class="separator:a4a4094ff1cca9a9ad0518b9667a30182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acecccbe44017608de6f25ee426a0e0d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#acecccbe44017608de6f25ee426a0e0d3">m_offset</a></td></tr>
<tr class="separator:acecccbe44017608de6f25ee426a0e0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7ded54fb321fb2b7c2b5c0a292fb13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#adf7ded54fb321fb2b7c2b5c0a292fb13">mapgensize</a></td></tr>
<tr class="separator:adf7ded54fb321fb2b7c2b5c0a292fb13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176c4148cde57e54022046595daa46f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpoint.html">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjmapgen__objects.html#a176c4148cde57e54022046595daa46f7">total_size</a></td></tr>
<tr class="separator:a176c4148cde57e54022046595daa46f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00390">390</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a573a70a619220b128f5221b14b0eb948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a573a70a619220b128f5221b14b0eb948">&#9670;&nbsp;</a></span>jmapgen_obj</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_objects::jmapgen_obj</a> =  std::pair&lt;<a class="el" href="classjmapgen__place.html">jmapgen_place</a>, <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt;const <a class="el" href="classjmapgen__piece.html">jmapgen_piece</a>&gt; &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Combination of where to place something and what to place. </p>

<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00435">435</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a19938117f35081ba5a24400404b9d3c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19938117f35081ba5a24400404b9d3c9">&#9670;&nbsp;</a></span>jmapgen_objects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jmapgen_objects::jmapgen_objects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>mapsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>tot_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03919">3919</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    : <a class="code" href="structjmapgen__objects.html#acecccbe44017608de6f25ee426a0e0d3">m_offset</a>( offset )</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    , <a class="code" href="structjmapgen__objects.html#adf7ded54fb321fb2b7c2b5c0a292fb13">mapgensize</a>( mapsize )</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    , <a class="code" href="structjmapgen__objects.html#a176c4148cde57e54022046595daa46f7">total_size</a>( tot_size )</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;{}</div>
<div class="ttc" id="astructjmapgen__objects_html_a176c4148cde57e54022046595daa46f7"><div class="ttname"><a href="structjmapgen__objects.html#a176c4148cde57e54022046595daa46f7">jmapgen_objects::total_size</a></div><div class="ttdeci">point total_size</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00439">mapgen.h:439</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_acecccbe44017608de6f25ee426a0e0d3"><div class="ttname"><a href="structjmapgen__objects.html#acecccbe44017608de6f25ee426a0e0d3">jmapgen_objects::m_offset</a></div><div class="ttdeci">tripoint_rel_ms m_offset</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00437">mapgen.h:437</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_adf7ded54fb321fb2b7c2b5c0a292fb13"><div class="ttname"><a href="structjmapgen__objects.html#adf7ded54fb321fb2b7c2b5c0a292fb13">jmapgen_objects::mapgensize</a></div><div class="ttdeci">point mapgensize</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00438">mapgen.h:438</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acb2ab4770da8a07cd1b09435de581862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb2ab4770da8a07cd1b09435de581862">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classjmapgen__place.html">jmapgen_place</a> &amp;&#160;</td>
          <td class="paramname"><em>place</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a>&lt; const <a class="el" href="classjmapgen__piece.html">jmapgen_piece</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>piece</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03931">3931</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;{</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.emplace_back( place, piece );</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div>
<div class="ttc" id="astructjmapgen__objects_html_a4a4094ff1cca9a9ad0518b9667a30182"><div class="ttname"><a href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">jmapgen_objects::objects</a></div><div class="ttdeci">std::vector&lt; jmapgen_obj &gt; objects</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00436">mapgen.h:436</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8h_source.html#l00436">objects</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l03938">load_objects()</a>.</p>

</div>
</div>
<a id="a089236574acafdfff305bde6ee591403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a089236574acafdfff305bde6ee591403">&#9670;&nbsp;</a></span>add_placement_coords_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::add_placement_coords_to </td>
          <td>(</td>
          <td class="paramtype">std::unordered_set&lt; <a class="el" href="structpoint.html">point</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l04799">4799</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;{</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &amp;obj : <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a> ) {</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;        <span class="keyword">const</span> <a class="code" href="classjmapgen__place.html">jmapgen_place</a> &amp;where = obj.first;</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = where.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>.<a class="code" href="structjmapgen__int.html#a0bd83a940be1397e4c670db16d88284f">val</a>; x &lt;= where.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>.<a class="code" href="structjmapgen__int.html#ae8b8ab7ad1dd3c67810f0278103fb01e">valmax</a>; ++x ) {</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = where.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>.<a class="code" href="structjmapgen__int.html#a0bd83a940be1397e4c670db16d88284f">val</a>; y &lt;= where.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>.<a class="code" href="structjmapgen__int.html#ae8b8ab7ad1dd3c67810f0278103fb01e">valmax</a>; ++y ) {</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;                result.emplace( x, y );</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;            }</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;        }</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;    }</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;}</div>
<div class="ttc" id="aclassjmapgen__place_html"><div class="ttname"><a href="classjmapgen__place.html">jmapgen_place</a></div><div class="ttdoc">Where to place something on a map.</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00255">mapgen.h:256</a></div></div>
<div class="ttc" id="aclassjmapgen__place_html_ac7cfc4c55f6037c27f8eacd0af53cd16"><div class="ttname"><a href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">jmapgen_place::x</a></div><div class="ttdeci">jmapgen_int x</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00263">mapgen.h:263</a></div></div>
<div class="ttc" id="aclassjmapgen__place_html_ae43f6354ec5c50f8f39bf4aefa0ce161"><div class="ttname"><a href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">jmapgen_place::y</a></div><div class="ttdeci">jmapgen_int y</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00264">mapgen.h:264</a></div></div>
<div class="ttc" id="astructjmapgen__int_html_a0bd83a940be1397e4c670db16d88284f"><div class="ttname"><a href="structjmapgen__int.html#a0bd83a940be1397e4c670db16d88284f">jmapgen_int::val</a></div><div class="ttdeci">int16_t val</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00082">mapgen.h:82</a></div></div>
<div class="ttc" id="astructjmapgen__int_html_ae8b8ab7ad1dd3c67810f0278103fb01e"><div class="ttname"><a href="structjmapgen__int.html#ae8b8ab7ad1dd3c67810f0278103fb01e">jmapgen_int::valmax</a></div><div class="ttdeci">int16_t valmax</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00083">mapgen.h:83</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_a573a70a619220b128f5221b14b0eb948"><div class="ttname"><a href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_objects::jmapgen_obj</a></div><div class="ttdeci">std::pair&lt; jmapgen_place, shared_ptr_fast&lt; const jmapgen_piece &gt; &gt; jmapgen_obj</div><div class="ttdoc">Combination of where to place something and what to place.</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00435">mapgen.h:435</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8h_source.html#l00082">jmapgen_int::val</a>, <a class="el" href="mapgen_8h_source.html#l00083">jmapgen_int::valmax</a>, <a class="el" href="mapgen_8h_source.html#l00263">jmapgen_place::x</a>, and <a class="el" href="mapgen_8h_source.html#l00264">jmapgen_place::y</a>.</p>

</div>
</div>
<a id="ae3921d88520d5eec73be24aa271613c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3921d88520d5eec73be24aa271613c5">&#9670;&nbsp;</a></span>apply() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;&#160;</td>
          <td class="paramname"><em>dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06e">mapgen_phase</a>&#160;</td>
          <td class="paramname"><em>phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l05299">5299</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;{</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;    <a class="code" href="structjmapgen__objects.html#ae3921d88520d5eec73be24aa271613c5">apply</a>( dat, phase, <a class="code" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a>( <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ), <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;}</div>
<div class="ttc" id="acoordinates_8h_html_a9b033e645beea804e02a982600b4a7ae"><div class="ttname"><a href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::relative, coords::ms &gt; tripoint_rel_ms</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00711">coordinates.h:711</a></div></div>
<div class="ttc" id="aglobal__vars_8h_html_a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab"><div class="ttname"><a href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">var_type::context</a></div><div class="ttdeci">@ context</div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00250">point.h:250</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_ae3921d88520d5eec73be24aa271613c5"><div class="ttname"><a href="structjmapgen__objects.html#ae3921d88520d5eec73be24aa271613c5">jmapgen_objects::apply</a></div><div class="ttdeci">void apply(const mapgendata &amp;dat, mapgen_phase, const std::string &amp;context) const</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l05299">mapgen.cpp:5299</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="editmap_8cpp.html#a72802814692d37fcc7aa5e915e011996">apply()</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, and <a class="el" href="point_8h_source.html#l00250">tripoint_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05174">apply_mapgen_in_phases()</a>.</p>

</div>
</div>
<a id="aca85b950a78f4ca13fc717affd6c89b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca85b950a78f4ca13fc717affd6c89b6">&#9670;&nbsp;</a></span>apply() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;&#160;</td>
          <td class="paramname"><em>dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mapgen_8h.html#afdd0a1598dc015b56a1b46d51da2b06e">mapgen_phase</a>&#160;</td>
          <td class="paramname"><em>phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l05305">5305</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;{</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;    <span class="keywordtype">bool</span> terrain_resolved = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160; </div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;    <span class="keyword">auto</span> range_at_phase = std::equal_range( <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.begin(), <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.end(), phase, <a class="code" href="mapgen_8cpp.html#aaa87dd76f54fd6414408449beee39d92">compare_phases</a> );</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160; </div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = range_at_phase.first; it != range_at_phase.second; ++it ) {</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;        <span class="keyword">const</span> <a class="code" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &amp;obj = *it;</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;        <a class="code" href="classjmapgen__place.html">jmapgen_place</a> where = obj.first;</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;        where.<a class="code" href="classjmapgen__place.html#a2ff117637b2d28889fad198e27867a67">offset</a>( <a class="code" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a>( -offset.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() ) );</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;        <span class="keyword">const</span> <a class="code" href="classjmapgen__piece.html">jmapgen_piece</a> &amp;what = *obj.second;</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160; </div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;        <a class="code" href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a>( what.<a class="code" href="classjmapgen__piece.html#aa6c0587212ff7c2e605261559e5872d3">phase</a>() == phase );</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160; </div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;        <span class="keywordflow">if</span>( !terrain_resolved &amp;&amp; <span class="keyword">typeid</span>( what ) == <span class="keyword">typeid</span>( <a class="code" href="classjmapgen__vehicle.html">jmapgen_vehicle</a> ) ) {</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;            <span class="comment">// In order to determine collisions between vehicles and local &quot;terrain&quot; the terrain has to be resolved</span></div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;            <span class="comment">// This code is based on two assumptions:</span></div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;            <span class="comment">// 1. The terrain part of a definition is always placed first.</span></div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;            <span class="comment">// 2. Only vehicles require the terrain to be resolved. The general solution is to use a virtual function.</span></div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;            <a class="code" href="mapgen__functions_8cpp.html#a5aee6c75824502694d57dbf8487d35f1">resolve_regional_terrain_and_furniture</a>( dat );</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;            terrain_resolved = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;        }</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160; </div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;        <span class="comment">// The user will only specify repeat once in JSON, but it may get loaded both</span></div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;        <span class="comment">// into the what and where in some cases--we just need the greater value of the two.</span></div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> repeat = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( where.<a class="code" href="classjmapgen__place.html#ab6f9ea620e591b93271716d06cbdd22a">repeat</a>.<a class="code" href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">get</a>(), what.<a class="code" href="classjmapgen__piece.html#a24689120105acbefe3d831f568ab6bff">repeat</a>.<a class="code" href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">get</a>() );</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; repeat; i++ ) {</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;            what.<a class="code" href="classjmapgen__piece.html#ad5618cfbefc398df74c263a9e9588565">apply</a>( dat, where.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>, where.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>, where.<a class="code" href="classjmapgen__place.html#a00b659db28e5e3c7192d9fe8e2b7cf79">z</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;        }</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    }</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;}</div>
<div class="ttc" id="acata__assert_8h_html_abb2ca9fce6a171932c05748ecc5df5bb"><div class="ttname"><a href="cata__assert_8h.html#abb2ca9fce6a171932c05748ecc5df5bb">cata_assert</a></div><div class="ttdeci">#define cata_assert(expression)</div><div class="ttdef"><b>Definition:</b> <a href="cata__assert_8h_source.html#l00036">cata_assert.h:36</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a5a5454f4ce144b5b3a84c2698a54ab8c"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">coords::coord_point_mut::raw</a></div><div class="ttdeci">constexpr const Point &amp; raw() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00157">coordinates.h:157</a></div></div>
<div class="ttc" id="aclassjmapgen__piece_html"><div class="ttname"><a href="classjmapgen__piece.html">jmapgen_piece</a></div><div class="ttdoc">Basic mapgen object.</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00223">mapgen.h:224</a></div></div>
<div class="ttc" id="aclassjmapgen__piece_html_a24689120105acbefe3d831f568ab6bff"><div class="ttname"><a href="classjmapgen__piece.html#a24689120105acbefe3d831f568ab6bff">jmapgen_piece::repeat</a></div><div class="ttdeci">jmapgen_int repeat</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00246">mapgen.h:246</a></div></div>
<div class="ttc" id="aclassjmapgen__piece_html_aa6c0587212ff7c2e605261559e5872d3"><div class="ttname"><a href="classjmapgen__piece.html#aa6c0587212ff7c2e605261559e5872d3">jmapgen_piece::phase</a></div><div class="ttdeci">virtual mapgen_phase phase() const</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00231">mapgen.h:231</a></div></div>
<div class="ttc" id="aclassjmapgen__piece_html_ad5618cfbefc398df74c263a9e9588565"><div class="ttname"><a href="classjmapgen__piece.html#ad5618cfbefc398df74c263a9e9588565">jmapgen_piece::apply</a></div><div class="ttdeci">virtual void apply(const mapgendata &amp;dat, const jmapgen_int &amp;x, const jmapgen_int &amp;y, const jmapgen_int &amp;z, const std::string &amp;context) const =0</div><div class="ttdoc">Place something on the map from mapgendata &amp;dat, at (x,y).</div></div>
<div class="ttc" id="aclassjmapgen__place_html_a00b659db28e5e3c7192d9fe8e2b7cf79"><div class="ttname"><a href="classjmapgen__place.html#a00b659db28e5e3c7192d9fe8e2b7cf79">jmapgen_place::z</a></div><div class="ttdeci">jmapgen_int z</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00265">mapgen.h:265</a></div></div>
<div class="ttc" id="aclassjmapgen__place_html_a2ff117637b2d28889fad198e27867a67"><div class="ttname"><a href="classjmapgen__place.html#a2ff117637b2d28889fad198e27867a67">jmapgen_place::offset</a></div><div class="ttdeci">void offset(const tripoint_rel_ms &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l01101">mapgen.cpp:1101</a></div></div>
<div class="ttc" id="aclassjmapgen__place_html_ab6f9ea620e591b93271716d06cbdd22a"><div class="ttname"><a href="classjmapgen__place.html#ab6f9ea620e591b93271716d06cbdd22a">jmapgen_place::repeat</a></div><div class="ttdeci">jmapgen_int repeat</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00266">mapgen.h:266</a></div></div>
<div class="ttc" id="aclassjmapgen__vehicle_html"><div class="ttname"><a href="classjmapgen__vehicle.html">jmapgen_vehicle</a></div><div class="ttdoc">Place a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l02581">mapgen.cpp:2582</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_aaa87dd76f54fd6414408449beee39d92"><div class="ttname"><a href="mapgen_8cpp.html#aaa87dd76f54fd6414408449beee39d92">compare_phases</a></div><div class="ttdeci">static const phase_comparator compare_phases</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l04509">mapgen.cpp:4509</a></div></div>
<div class="ttc" id="amapgen__functions_8cpp_html_a5aee6c75824502694d57dbf8487d35f1"><div class="ttname"><a href="mapgen__functions_8cpp.html#a5aee6c75824502694d57dbf8487d35f1">resolve_regional_terrain_and_furniture</a></div><div class="ttdeci">void resolve_regional_terrain_and_furniture(const mapgendata &amp;dat)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen__functions_8cpp_source.html#l02208">mapgen_functions.cpp:2208</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="astructjmapgen__int_html_af91db998b4c873453177d97ad575d138"><div class="ttname"><a href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">jmapgen_int::get</a></div><div class="ttdeci">int get() const</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00947">mapgen.cpp:947</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classjmapgen__piece.html#ad5618cfbefc398df74c263a9e9588565">jmapgen_piece::apply()</a>, <a class="el" href="cata__assert_8h_source.html#l00036">cata_assert</a>, <a class="el" href="mapgen_8cpp_source.html#l04509">compare_phases</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="mapgen_8cpp_source.html#l00947">jmapgen_int::get()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="mapgen_8cpp_source.html#l01101">jmapgen_place::offset()</a>, <a class="el" href="mapgen_8h_source.html#l00231">jmapgen_piece::phase()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, <a class="el" href="mapgen_8h_source.html#l00246">jmapgen_piece::repeat</a>, <a class="el" href="mapgen_8h_source.html#l00266">jmapgen_place::repeat</a>, <a class="el" href="mapgen__functions_8cpp_source.html#l02208">resolve_regional_terrain_and_furniture()</a>, <a class="el" href="mapgen_8h_source.html#l00263">jmapgen_place::x</a>, <a class="el" href="mapgen_8h_source.html#l00264">jmapgen_place::y</a>, and <a class="el" href="mapgen_8h_source.html#l00265">jmapgen_place::z</a>.</p>

</div>
</div>
<a id="a2ea0e6e6045adc875c4d33b739dd4eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ea0e6e6045adc875c4d33b739dd4eba">&#9670;&nbsp;</a></span>check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::check </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l04782">4782</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;{</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &amp;obj : <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a> ) {</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;        <span class="keyword">const</span> <a class="code" href="classjmapgen__place.html">jmapgen_place</a> &amp;where = obj.first;</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;        <span class="keyword">const</span> <a class="code" href="classjmapgen__piece.html">jmapgen_piece</a> &amp;what = *obj.second;</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;        what.<a class="code" href="classjmapgen__piece.html#ac31138f83965119e5c25ebafe807106a">check</a>( <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, parameters, where.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>, where.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>, where.<a class="code" href="classjmapgen__place.html#a00b659db28e5e3c7192d9fe8e2b7cf79">z</a> );</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    }</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;}</div>
<div class="ttc" id="aclassjmapgen__piece_html_ac31138f83965119e5c25ebafe807106a"><div class="ttname"><a href="classjmapgen__piece.html#ac31138f83965119e5c25ebafe807106a">jmapgen_piece::check</a></div><div class="ttdeci">virtual void check(const std::string &amp;, const mapgen_parameters &amp;, const jmapgen_int &amp;, const jmapgen_int &amp;, const jmapgen_int &amp;) const</div><div class="ttdoc">Sanity-check this piece.</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8h_source.html#l00235">mapgen.h:235</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8h_source.html#l00235">jmapgen_piece::check()</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="mapgen_8h_source.html#l00356">mapgen_palette::parameters</a>, <a class="el" href="mapgen_8h_source.html#l00263">jmapgen_place::x</a>, <a class="el" href="mapgen_8h_source.html#l00264">jmapgen_place::y</a>, and <a class="el" href="mapgen_8h_source.html#l00265">jmapgen_place::z</a>.</p>

</div>
</div>
<a id="a41c55acb74b0b002b642ba0f25c76984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c55acb74b0b002b642ba0f25c76984">&#9670;&nbsp;</a></span>check_bounds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool jmapgen_objects::check_bounds </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classjmapgen__place.html">jmapgen_place</a> &amp;&#160;</td>
          <td class="paramname"><em>place</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jso</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03926">3926</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;{</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mapgen_8cpp.html#a5e0a1bc6159f7f2a4ea301079817e466">common_check_bounds</a>( place.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>, place.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>, place.<a class="code" href="classjmapgen__place.html#a00b659db28e5e3c7192d9fe8e2b7cf79">z</a>, <a class="code" href="structjmapgen__objects.html#adf7ded54fb321fb2b7c2b5c0a292fb13">mapgensize</a>, jso );</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;}</div>
<div class="ttc" id="amapgen_8cpp_html_a5e0a1bc6159f7f2a4ea301079817e466"><div class="ttname"><a href="mapgen_8cpp.html#a5e0a1bc6159f7f2a4ea301079817e466">common_check_bounds</a></div><div class="ttdeci">static bool common_check_bounds(const jmapgen_int &amp;x, const jmapgen_int &amp;y, const jmapgen_int &amp;z, const point &amp;mapgensize, const JsonObject &amp;jso)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00799">mapgen.cpp:799</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00799">common_check_bounds()</a>, <a class="el" href="mapgen_8h_source.html#l00438">mapgensize</a>, <a class="el" href="mapgen_8h_source.html#l00263">jmapgen_place::x</a>, <a class="el" href="mapgen_8h_source.html#l00264">jmapgen_place::y</a>, and <a class="el" href="mapgen_8h_source.html#l00265">jmapgen_place::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l03938">load_objects()</a>.</p>

</div>
</div>
<a id="a50162a45039265d5b4c6ba0434862ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50162a45039265d5b4c6ba0434862ef5">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l04776">4776</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;{</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    std::stable_sort( <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.begin(), <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.end(), <a class="code" href="mapgen_8cpp.html#aaa87dd76f54fd6414408449beee39d92">compare_phases</a> );</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;    <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>.shrink_to_fit();</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l04509">compare_phases</a>.</p>

</div>
</div>
<a id="ad3f61789e4a7cc587b2dcd5883327dc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3f61789e4a7cc587b2dcd5883327dc3">&#9670;&nbsp;</a></span>has_vehicle_collision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool jmapgen_objects::has_vehicle_collision </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmapgendata.html">mapgendata</a> &amp;&#160;</td>
          <td class="paramname"><em>dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> &amp;&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks if applying these objects to data would cause cause a collision with vehicles on the same map </p>

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l05339">5339</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;{</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &amp;obj : <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a> ) {</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;        <a class="code" href="classjmapgen__place.html">jmapgen_place</a> where = obj.first;</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;        where.<a class="code" href="classjmapgen__place.html#a2ff117637b2d28889fad198e27867a67">offset</a>( <a class="code" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a>( - offset.<a class="code" href="classcoords_1_1coord__point__mut.html#a5a5454f4ce144b5b3a84c2698a54ab8c">raw</a>() ) );</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;what = *obj.second;</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;        <span class="keywordflow">if</span>( what.has_vehicle_collision( dat, <a class="code" href="classcoords_1_1coord__point.html">tripoint_rel_ms</a>( where.<a class="code" href="classjmapgen__place.html#ac7cfc4c55f6037c27f8eacd0af53cd16">x</a>.<a class="code" href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">get</a>(), where.<a class="code" href="classjmapgen__place.html#ae43f6354ec5c50f8f39bf4aefa0ce161">y</a>.<a class="code" href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">get</a>(),</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;                                        where.<a class="code" href="classjmapgen__place.html#a00b659db28e5e3c7192d9fe8e2b7cf79">z</a>.<a class="code" href="structjmapgen__int.html#af91db998b4c873453177d97ad575d138">get</a>() ) ) ) {</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;        }</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    }</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;}</div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::relative, coords::ms &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00947">jmapgen_int::get()</a>, <a class="el" href="mapgen_8cpp_source.html#l01101">jmapgen_place::offset()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, <a class="el" href="mapgen_8h_source.html#l00263">jmapgen_place::x</a>, <a class="el" href="mapgen_8h_source.html#l00264">jmapgen_place::y</a>, and <a class="el" href="mapgen_8h_source.html#l00265">jmapgen_place::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l05174">apply_mapgen_in_phases()</a>.</p>

</div>
</div>
<a id="aa191b0cc9ec76f2a3b3f262bc4b637c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa191b0cc9ec76f2a3b3f262bc4b637c3">&#9670;&nbsp;</a></span>load_objects() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::load_objects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;&#160;</td>
          <td class="paramname"><em>parray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string_view&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03953">3953</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;{</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> : parray ) {</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;        <a class="code" href="classjmapgen__place.html">jmapgen_place</a> where( <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> );</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;        where.offset( <a class="code" href="structjmapgen__objects.html#acecccbe44017608de6f25ee426a0e0d3">m_offset</a> );</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160; </div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="structjmapgen__objects.html#a41c55acb74b0b002b642ba0f25c76984">check_bounds</a>( where, <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> ) ) {</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;            <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a>.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        }</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160; </div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;        <span class="keyword">auto</span> <a class="code" href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a> = make_shared_fast&lt;jmapgen_loot&gt;( <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> );</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;        <span class="comment">// spawn rates &lt; 1 are handled in item_group</span></div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> rate = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( get_option&lt;float&gt;( <span class="stringliteral">&quot;ITEM_SPAWNRATE&quot;</span> ), 1.0f );</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160; </div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        <span class="keywordflow">if</span>( where.repeat.valmax != 1 ) {</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;            <span class="comment">// if loot can repeat scale according to rate</span></div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;            where.repeat.val = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( where.repeat.val * rate ), 1 );</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;            where.repeat.valmax = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( where.repeat.valmax * rate ), 1 );</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a>-&gt;chance != 100 ) {</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;            <span class="comment">// otherwise except where chance is 100% scale probability</span></div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;            <a class="code" href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a>-&gt;chance = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a>-&gt;chance * rate ), 100 ), 1 );</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        }</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160; </div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;        <a class="code" href="structjmapgen__objects.html#acb2ab4770da8a07cd1b09435de581862">add</a>( where, <a class="code" href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a> );</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;    }</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00526">flexbuffer_json.h:527</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00662">flexbuffer_json.h:662</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_ad1e0c3e151dc3164eb4b30bac94cf0ab"><div class="ttname"><a href="handle__action_8cpp.html#ad1e0c3e151dc3164eb4b30bac94cf0ab">loot</a></div><div class="ttdeci">static void loot()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l01358">handle_action.cpp:1358</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_ac7abbde97374a05af2e7077ba9955ed1"><div class="ttname"><a href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">mapgen_defer::jsi</a></div><div class="ttdeci">static JsonObject jsi</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00634">mapgen.cpp:634</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_a41c55acb74b0b002b642ba0f25c76984"><div class="ttname"><a href="structjmapgen__objects.html#a41c55acb74b0b002b642ba0f25c76984">jmapgen_objects::check_bounds</a></div><div class="ttdeci">bool check_bounds(const jmapgen_place &amp;place, const JsonObject &amp;jso)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l03926">mapgen.cpp:3926</a></div></div>
<div class="ttc" id="astructjmapgen__objects_html_acb2ab4770da8a07cd1b09435de581862"><div class="ttname"><a href="structjmapgen__objects.html#acb2ab4770da8a07cd1b09435de581862">jmapgen_objects::add</a></div><div class="ttdeci">void add(const jmapgen_place &amp;place, const shared_ptr_fast&lt; const jmapgen_piece &gt; &amp;piece)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l03931">mapgen.cpp:3931</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l03931">add()</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="mapgen_8cpp_source.html#l03926">check_bounds()</a>, <a class="el" href="mapgen_8cpp_source.html#l00634">mapgen_defer::jsi</a>, <a class="el" href="handle__action_8cpp_source.html#l01358">loot()</a>, <a class="el" href="mapgen_8h_source.html#l00437">m_offset</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="mapgen_8cpp_source.html#l01101">jmapgen_place::offset()</a>, <a class="el" href="mapgen_8h_source.html#l00266">jmapgen_place::repeat</a>, <a class="el" href="mapgen_8h_source.html#l00082">jmapgen_int::val</a>, and <a class="el" href="mapgen_8h_source.html#l00083">jmapgen_int::valmax</a>.</p>

</div>
</div>
<a id="ac5399c9acf27b286dea1b01a0d6de176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5399c9acf27b286dea1b01a0d6de176">&#9670;&nbsp;</a></span>load_objects() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PieceType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::load_objects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonArray.html">JsonArray</a> &amp;&#160;</td>
          <td class="paramname"><em>parray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PieceType must be inheriting from <a class="el" href="classjmapgen__piece.html" title="Basic mapgen object.">jmapgen_piece</a>. </p>
<p>It must have constructor that accepts a const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;as parameter. The function loads all objects from the json array and stores them in <a class="el" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a>. </p>

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03938">3938</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;{</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classJsonObject.html">JsonObject</a> <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> : parray ) {</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;        <a class="code" href="classjmapgen__place.html">jmapgen_place</a> where( <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> );</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        where.offset( <a class="code" href="structjmapgen__objects.html#acecccbe44017608de6f25ee426a0e0d3">m_offset</a> );</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160; </div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="structjmapgen__objects.html#a41c55acb74b0b002b642ba0f25c76984">check_bounds</a>( where, <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a> ) ) {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;            <a class="code" href="structjmapgen__objects.html#acb2ab4770da8a07cd1b09435de581862">add</a>( where, make_shared_fast&lt;PieceType&gt;( <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a>, <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> ) );</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;            <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a>.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;        }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    }</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l03931">add()</a>, <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="mapgen_8cpp_source.html#l03926">check_bounds()</a>, <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="mapgen_8cpp_source.html#l00634">mapgen_defer::jsi</a>, <a class="el" href="mapgen_8h_source.html#l00437">m_offset</a>, and <a class="el" href="mapgen_8cpp_source.html#l01101">jmapgen_place::offset()</a>.</p>

</div>
</div>
<a id="a3a510911f272fb431cc506bc1f4a69e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a510911f272fb431cc506bc1f4a69e2">&#9670;&nbsp;</a></span>load_objects() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PieceType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::load_objects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>member_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the mapgen objects from the array inside of jsi. </p>
<p>If jsi has no member of that name, nothing is loaded and the function just returns. </p>

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l03984">3984</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;{</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a>.<a class="code" href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">has_member</a>( member_name ) ) {</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    }</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    load_objects&lt;PieceType&gt;( <a class="code" href="namespacemapgen__defer.html#ac7abbde97374a05af2e7077ba9955ed1">jsi</a>.<a class="code" href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">get_array</a>( member_name ), member_name + <span class="stringliteral">&quot; in &quot;</span> + <a class="code" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a> );</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html_a619cb4eae7922f357db47479fc71cf9b"><div class="ttname"><a href="classJsonObject.html#a619cb4eae7922f357db47479fc71cf9b">JsonObject::has_member</a></div><div class="ttdeci">bool has_member(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00944">flexbuffer_json-inl.h:944</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a88142edb1dd9ea1e7a96c7a99cd70896"><div class="ttname"><a href="classJsonObject.html#a88142edb1dd9ea1e7a96c7a99cd70896">JsonObject::get_array</a></div><div class="ttdeci">JsonArray get_array(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00855">flexbuffer_json-inl.h:855</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="global__vars_8h.html#a54b344f3b76633f42ae19af82cc1cc89a5c18ef72771564b7f43c497dc507aeab">context</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00855">JsonObject::get_array()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00944">JsonObject::has_member()</a>, and <a class="el" href="mapgen_8cpp_source.html#l00634">mapgen_defer::jsi</a>.</p>

</div>
</div>
<a id="a20ceb4b3a9e5fc18fc3bc994a7990ee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ceb4b3a9e5fc18fc3bc994a7990ee1">&#9670;&nbsp;</a></span>merge_parameters_into()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jmapgen_objects::merge_parameters_into </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmapgen__parameters.html">mapgen_parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outer_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8cpp_source.html#l04791">4791</a> of file <a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;{</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a> &amp;obj : <a class="code" href="structjmapgen__objects.html#a4a4094ff1cca9a9ad0518b9667a30182">objects</a> ) {</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;        obj.second-&gt;merge_parameters_into( params, outer_context );</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    }</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l01082">mapgen_function_json_base::finalize_parameters_common()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="acecccbe44017608de6f25ee426a0e0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acecccbe44017608de6f25ee426a0e0d3">&#9670;&nbsp;</a></span>m_offset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="coordinates_8h.html#a9b033e645beea804e02a982600b4a7ae">tripoint_rel_ms</a> jmapgen_objects::m_offset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00437">437</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l03938">load_objects()</a>.</p>

</div>
</div>
<a id="adf7ded54fb321fb2b7c2b5c0a292fb13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf7ded54fb321fb2b7c2b5c0a292fb13">&#9670;&nbsp;</a></span>mapgensize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> jmapgen_objects::mapgensize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00438">438</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l03926">check_bounds()</a>.</p>

</div>
</div>
<a id="a4a4094ff1cca9a9ad0518b9667a30182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a4094ff1cca9a9ad0518b9667a30182">&#9670;&nbsp;</a></span>objects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structjmapgen__objects.html#a573a70a619220b128f5221b14b0eb948">jmapgen_obj</a>&gt; jmapgen_objects::objects</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00436">436</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mapgen_8cpp_source.html#l03931">add()</a>.</p>

</div>
</div>
<a id="a176c4148cde57e54022046595daa46f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176c4148cde57e54022046595daa46f7">&#9670;&nbsp;</a></span>total_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpoint.html">point</a> jmapgen_objects::total_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapgen_8h_source.html#l00439">439</a> of file <a class="el" href="mapgen_8h_source.html">mapgen.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>src/<a class="el" href="mapgen_8h_source.html">mapgen.h</a></li>
<li>src/<a class="el" href="mapgen_8cpp_source.html">mapgen.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:40 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
