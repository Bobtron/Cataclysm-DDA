<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: target_ui Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtarget__ui-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">target_ui Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae0dd055ba040ba97125cbf165a33c997"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a> : int { <br />
&#160;&#160;<a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>
, <br />
&#160;&#160;<a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e">SelectOnly</a>
<br />
 }</td></tr>
<tr class="separator:ae0dd055ba040ba97125cbf165a33c997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa98e28471bb023e99404674ad6331ad6"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">ExitCode</a> : int { <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">Abort</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">Timeout</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">Reload</a>
 }</td></tr>
<tr class="separator:aa98e28471bb023e99404674ad6331ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a11be420f4d6ffd6128dd23d01be6c310"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a11be420f4d6ffd6128dd23d01be6c310">run</a> ()</td></tr>
<tr class="separator:a11be420f4d6ffd6128dd23d01be6c310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5898f18e796130f0a4aa0b5099c7a4a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structaim__type.html">aim_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a5898f18e796130f0a4aa0b5099c7a4a0">get_selected_aim_type</a> () const</td></tr>
<tr class="separator:a5898f18e796130f0a4aa0b5099c7a4a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8606ff468dc8ac0fab74c239c455e2f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a8606ff468dc8ac0fab74c239c455e2f7">get_sight_dispersion</a> () const</td></tr>
<tr class="separator:a8606ff468dc8ac0fab74c239c455e2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a83609daab209a1d8e462919182014d33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classavatar.html">avatar</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a></td></tr>
<tr class="separator:a83609daab209a1d8e462919182014d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee1b122468e838a1f62691b2cd43396"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> = <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a></td></tr>
<tr class="separator:aeee1b122468e838a1f62691b2cd43396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190a8193e6454bb636bc8f5288b4a27b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem.html">item</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> = nullptr</td></tr>
<tr class="separator:a190a8193e6454bb636bc8f5288b4a27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c8602522a1638d3af42b10f1750e26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = 0</td></tr>
<tr class="separator:aa3c8602522a1638d3af42b10f1750e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ae79a739fcab56301077b8802355ce"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structitype.html">itype</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = nullptr</td></tr>
<tr class="separator:ae5ae79a739fcab56301077b8802355ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a> = nullptr</td></tr>
<tr class="separator:ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a7446b4088911709b2eb6a1d3973e5"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a> = nullptr</td></tr>
<tr class="separator:ae7a7446b4088911709b2eb6a1d3973e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2200f3f97047dbc1e1cf14bae201c34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle.html">vehicle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a> = nullptr</td></tr>
<tr class="separator:ac2200f3f97047dbc1e1cf14bae201c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af184a9cc7c52521c129182e2cc643375"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classspell.html">spell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a> = nullptr</td></tr>
<tr class="separator:af184a9cc7c52521c129182e2cc643375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146d794c8cb9c23e6ba71727c9a25852"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">no_fail</a> = false</td></tr>
<tr class="separator:a146d794c8cb9c23e6ba71727c9a25852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b01fafb341eaec6c8f85582fd7f32f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> = false</td></tr>
<tr class="separator:ac9b01fafb341eaec6c8f85582fd7f32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1dc50e9e2195f48ffdb87a1daacc178"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classaim__activity__actor.html">aim_activity_actor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a> = nullptr</td></tr>
<tr class="separator:af1dc50e9e2195f48ffdb87a1daacc178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a3594a3a61aa50c8a0ce8c7ea20796202"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a> : int { <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">BadTarget</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>
 }</td></tr>
<tr class="separator:a3594a3a61aa50c8a0ce8c7ea20796202"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af3857720f2059a0a2f23896bc7e808c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">init_window_and_input</a> ()</td></tr>
<tr class="separator:af3857720f2059a0a2f23896bc7e808c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab290e475e7cd308b447788ec369053b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">handle_cursor_movement</a> (const std::string &amp;<a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, bool &amp;skip_redraw)</td></tr>
<tr class="separator:ab290e475e7cd308b447788ec369053b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ead422f4a78394c13bc3f4c6c953f42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;new_pos)</td></tr>
<tr class="separator:a3ead422f4a78394c13bc3f4c6c953f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf459ec49ad96c44eddeb94d0c22fb36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a> ()</td></tr>
<tr class="separator:aaf459ec49ad96c44eddeb94d0c22fb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17fecf6fc24afc0a1af11ee1447b39a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a> ()</td></tr>
<tr class="separator:af17fecf6fc24afc0a1af11ee1447b39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1591b490e9f8d48547b108ae481f982e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">choose_initial_target</a> ()</td></tr>
<tr class="separator:a1591b490e9f8d48547b108ae481f982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c885fc69abc2190e1850b7f23601ac2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">try_reacquire_target</a> (bool critter, <a class="el" href="structtripoint.html">tripoint</a> &amp;new_dst)</td></tr>
<tr class="memdesc:a5c885fc69abc2190e1850b7f23601ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to re-acquire target for aim-and-fire.  <a href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">More...</a><br /></td></tr>
<tr class="separator:a5c885fc69abc2190e1850b7f23601ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e40f0212d403109c8969d7308e493f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a> ()</td></tr>
<tr class="separator:ad1e40f0212d403109c8969d7308e493f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab236848678058afb7605e6d82a5c8fa9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="separator:ab236848678058afb7605e6d82a5c8fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53ba52da62f64baa29130908cf8637b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a> ()</td></tr>
<tr class="separator:aa53ba52da62f64baa29130908cf8637b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d244cde8cae12d0266daf6fc083014"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a> ()</td></tr>
<tr class="separator:a97d244cde8cae12d0266daf6fc083014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ca7887fd647df92c825e8ee153ff84"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">prompt_friendlies_in_lof</a> ()</td></tr>
<tr class="separator:ad2ca7887fd647df92c825e8ee153ff84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac352f6aae1cb28945f8115b76fea2eb6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a>&lt; <a class="el" href="classCreature.html">Creature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a> ()</td></tr>
<tr class="separator:ac352f6aae1cb28945f8115b76fea2eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779bc721417ab8ee4a6b103d8a1030f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a> ()</td></tr>
<tr class="separator:a779bc721417ab8ee4a6b103d8a1030f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af007dd5fcc266ee10d673299ca90c29c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a> (int <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a>)</td></tr>
<tr class="separator:af007dd5fcc266ee10d673299ca90c29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc208237a3fd537eb7f50022e4e1b74d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;new_offset) const</td></tr>
<tr class="separator:adc208237a3fd537eb7f50022e4e1b74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa955ab0c7cfbd2c8c5d439f5aed608ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">update_turrets_in_range</a> ()</td></tr>
<tr class="separator:aa955ab0c7cfbd2c8c5d439f5aed608ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1403890979533cd6ea29897e3ee81ab5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a> ()</td></tr>
<tr class="separator:a1403890979533cd6ea29897e3ee81ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa81de937ba74331a08f3ef8e049a3c28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa81de937ba74331a08f3ef8e049a3c28">apply_aim_turning_penalty</a> () const</td></tr>
<tr class="separator:aa81de937ba74331a08f3ef8e049a3c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1178602a3d2f7e37c9dbebf22dd29a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af1178602a3d2f7e37c9dbebf22dd29a3">action_switch_mode</a> ()</td></tr>
<tr class="separator:af1178602a3d2f7e37c9dbebf22dd29a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbdcdc8f41dd8bcbf887b12d96c9948d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">action_switch_ammo</a> ()</td></tr>
<tr class="separator:acbdcdc8f41dd8bcbf887b12d96c9948d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0468c35f79fb501be1a3a50b4081d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">action_aim</a> ()</td></tr>
<tr class="separator:a6c0468c35f79fb501be1a3a50b4081d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4924621b242d0938e9a03fcefdfa6a9d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4924621b242d0938e9a03fcefdfa6a9d">action_drop_aim</a> ()</td></tr>
<tr class="separator:a4924621b242d0938e9a03fcefdfa6a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21275763803a2ce0d00e02dc0076a36c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">action_aim_and_shoot</a> (const std::string &amp;<a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>)</td></tr>
<tr class="separator:a21275763803a2ce0d00e02dc0076a36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d523ae27fc66cbff7adac5e9fa91dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">draw_terrain_overlay</a> ()</td></tr>
<tr class="separator:a15d523ae27fc66cbff7adac5e9fa91dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a478e95d201324548329f39a087208"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a93a478e95d201324548329f39a087208">draw_ui_window</a> ()</td></tr>
<tr class="separator:a93a478e95d201324548329f39a087208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac34aeff88a5103d4af19a2ad067a677"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aac34aeff88a5103d4af19a2ad067a677">uitext_title</a> () const</td></tr>
<tr class="separator:aac34aeff88a5103d4af19a2ad067a677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3d575ebc23cdd3a199a8c17579a225"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a7f3d575ebc23cdd3a199a8c17579a225">uitext_fire</a> () const</td></tr>
<tr class="separator:a7f3d575ebc23cdd3a199a8c17579a225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62889056a10382de6835688498cf20e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">draw_window_title</a> ()</td></tr>
<tr class="separator:ad62889056a10382de6835688498cf20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5b1b952d220d0cd766f9c32ab5eb38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">draw_help_notice</a> ()</td></tr>
<tr class="separator:acc5b1b952d220d0cd766f9c32ab5eb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d5114b61c688d3810c108986ddc8bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">draw_controls_list</a> (int text_y)</td></tr>
<tr class="separator:a7d5114b61c688d3810c108986ddc8bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86966228ce7aad77c233058bf1285962"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">panel_cursor_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a86966228ce7aad77c233058bf1285962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545580558b81b3d44c43b52fc5ff1b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">panel_gun_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a545580558b81b3d44c43b52fc5ff1b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f08c10cac1401587f330fb97f5c2183"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">panel_recoil</a> (int &amp;text_y)</td></tr>
<tr class="separator:a9f08c10cac1401587f330fb97f5c2183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b8ebef108aaa7ad8c5176a04f600bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">panel_spell_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a14b8ebef108aaa7ad8c5176a04f600bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb70bd52ece44447bec77880106009d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">panel_target_info</a> (int &amp;text_y, bool fill_with_blank_if_no_target)</td></tr>
<tr class="separator:a4bb70bd52ece44447bec77880106009d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4a9c004a4c4cf26ad705174612584ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">panel_turret_list</a> (int &amp;text_y)</td></tr>
<tr class="separator:ad4a9c004a4c4cf26ad705174612584ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ee1e0b8e7d1141e4d6c2019fe6df39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a50ee1e0b8e7d1141e4d6c2019fe6df39">on_target_accepted</a> (bool harmful) const</td></tr>
<tr class="separator:a50ee1e0b8e7d1141e4d6c2019fe6df39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abb6df512b8b794227dc5f1d9afe17bf1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a></td></tr>
<tr class="separator:abb6df512b8b794227dc5f1d9afe17bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542ba80f542b41ea6a81f1ab8b14b521"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a></td></tr>
<tr class="separator:a542ba80f542b41ea6a81f1ab8b14b521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4c97cc5abb0ce402bd9e89411e1778"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a></td></tr>
<tr class="separator:afe4c97cc5abb0ce402bd9e89411e1778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954878eb50877ad7fc1902a28beb2539"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a></td></tr>
<tr class="separator:a954878eb50877ad7fc1902a28beb2539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a362df365f84b306e2ff14edf099a1000"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCreature.html">Creature</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = nullptr</td></tr>
<tr class="separator:a362df365f84b306e2ff14edf099a1000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281f9ea6ae900ff7991e457f1d34b8f6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCreature.html">Creature</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a></td></tr>
<tr class="separator:a281f9ea6ae900ff7991e457f1d34b8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a246e6aa2bb08bb724c44571e8451ac30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcatacurses_1_1window.html">catacurses::window</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a></td></tr>
<tr class="separator:a246e6aa2bb08bb724c44571e8451ac30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5479e5dd0b2883bbf2927c489ddb6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinput__context.html">input_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a></td></tr>
<tr class="separator:a4e5479e5dd0b2883bbf2927c489ddb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e6f4c9c827b91ce215a1a7b32a4affb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> = 0</td></tr>
<tr class="separator:a2e6f4c9c827b91ce215a1a7b32a4affb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c42cdc72ea5432ee63a1d2ba3f6967"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structaim__type.html">aim_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a></td></tr>
<tr class="separator:af8c42cdc72ea5432ee63a1d2ba3f6967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607a068ce45aeed17810fd8ca433e5a3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structaim__type.html">aim_type</a> &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a></td></tr>
<tr class="separator:a607a068ce45aeed17810fd8ca433e5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a5aad7e60b30082e7ec2ff97f8f6d4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = 0</td></tr>
<tr class="separator:ac0a5aad7e60b30082e7ec2ff97f8f6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab855722580bd112ef0590b5a9b4f3556"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a></td></tr>
<tr class="separator:ab855722580bd112ef0590b5a9b4f3556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a></td></tr>
<tr class="separator:ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ac73585a9794e93d181362f7473b50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = false</td></tr>
<tr class="separator:a63ac73585a9794e93d181362f7473b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270f72c5bfef55a533d3cd9b3cf57ea0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = false</td></tr>
<tr class="separator:a270f72c5bfef55a533d3cd9b3cf57ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122323ec4c1e72c291e76643ccfd3fde"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = false</td></tr>
<tr class="separator:a122323ec4c1e72c291e76643ccfd3fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b69263e28fa4472b51104ec1d2e6f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = false</td></tr>
<tr class="separator:a34b69263e28fa4472b51104ec1d2e6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6534092ef1b213639575c914030eb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a> = false</td></tr>
<tr class="separator:a1e6534092ef1b213639575c914030eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b525b1e2a39f4748409b97e8984947b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> = false</td></tr>
<tr class="separator:a4b525b1e2a39f4748409b97e8984947b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00168">168</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa98e28471bb023e99404674ad6331ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98e28471bb023e99404674ad6331ad6">&#9670;&nbsp;</a></span>ExitCode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">target_ui::ExitCode</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2"></a>Abort&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb"></a>Fire&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398"></a>Timeout&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006"></a>Reload&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00209">209</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            Abort,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            Fire,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            Timeout,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            Reload</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3594a3a61aa50c8a0ce8c7ea20796202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3594a3a61aa50c8a0ce8c7ea20796202">&#9670;&nbsp;</a></span>Status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">target_ui::Status</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc"></a>Good&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408"></a>BadTarget&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773"></a>OutOfAmmo&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f"></a>OutOfRange&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00225">225</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                          : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            Good, <span class="comment">// All UI elements are enabled</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            BadTarget, <span class="comment">// Bad &#39;dst&#39; selected; forbid aiming/firing</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            OutOfAmmo, <span class="comment">// Selected gun mode is out of ammo; forbid moving cursor,aiming and firing</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            OutOfRange <span class="comment">// Selected target is out of range of current gun mode; forbid aiming/firing</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        };</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0dd055ba040ba97125cbf165a33c997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0dd055ba040ba97125cbf165a33c997">&#9670;&nbsp;</a></span>TargetMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">target_ui::TargetMode</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb"></a>Fire&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f"></a>Throw&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86"></a>ThrowBlind&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb"></a>Turrets&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70"></a>TurretManual&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae"></a>Reach&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd"></a>Spell&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e"></a>SelectOnly&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00173">173</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                              : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            Fire,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            Throw,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            ThrowBlind,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            Turrets,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            TurretManual,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            Reach,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            Spell,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            SelectOnly</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6c0468c35f79fb501be1a3a50b4081d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0468c35f79fb501be1a3a50b4081d4">&#9670;&nbsp;</a></span>action_aim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_aim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03421">3421</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;{</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <a class="code" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <a class="code" href="classtarget__ui.html#aa81de937ba74331a08f3ef8e049a3c28">apply_aim_turning_penalty</a>();</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> min_recoil = <a class="code" href="ranged_8cpp.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 10; ++i ) {</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;        <a class="code" href="ranged_8cpp.html#ae6e2f802cc8fb025d3dd4ada3da65c55">do_aim</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>, min_recoil );</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    }</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160; </div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="comment">// We&#39;ve changed pc.recoil, update penalty</span></div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <a class="code" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a>();</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160; </div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &gt; 0;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_af3d3fb7cfb98cf3c36f0f0681414274a"><div class="ttname"><a href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">Creature::get_moves</a></div><div class="ttdeci">int get_moves() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02004">creature.cpp:2004</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1403890979533cd6ea29897e3ee81ab5"><div class="ttname"><a href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">target_ui::recalc_aim_turning_penalty</a></div><div class="ttdeci">void recalc_aim_turning_penalty()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03255">ranged.cpp:3255</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a190a8193e6454bb636bc8f5288b4a27b"><div class="ttname"><a href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">target_ui::relevant</a></div><div class="ttdeci">item * relevant</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00189">ranged.cpp:189</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a83609daab209a1d8e462919182014d33"><div class="ttname"><a href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">target_ui::you</a></div><div class="ttdeci">avatar * you</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00185">ranged.cpp:185</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a954878eb50877ad7fc1902a28beb2539"><div class="ttname"><a href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">target_ui::dst</a></div><div class="ttdeci">tripoint dst</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00241">ranged.cpp:241</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa53ba52da62f64baa29130908cf8637b"><div class="ttname"><a href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">target_ui::set_last_target</a></div><div class="ttdeci">void set_last_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03102">ranged.cpp:3102</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa81de937ba74331a08f3ef8e049a3c28"><div class="ttname"><a href="classtarget__ui.html#aa81de937ba74331a08f3ef8e049a3c28">target_ui::apply_aim_turning_penalty</a></div><div class="ttdeci">void apply_aim_turning_penalty() const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03299">ranged.cpp:3299</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a7ff8232af89fc85c44dee1cd0525f655"><div class="ttname"><a href="ranged_8cpp.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a></div><div class="ttdeci">double calculate_aim_cap(const Character &amp;you, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01140">ranged.cpp:1140</a></div></div>
<div class="ttc" id="aranged_8cpp_html_ae6e2f802cc8fb025d3dd4ada3da65c55"><div class="ttname"><a href="ranged_8cpp.html#ae6e2f802cc8fb025d3dd4ada3da65c55">do_aim</a></div><div class="ttdeci">static void do_aim(Character &amp;you, const item &amp;relevant, const double min_recoil)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01516">ranged.cpp:1516</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l03299">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l01140">calculate_aim_cap()</a>, <a class="el" href="ranged_8cpp_source.html#l01516">do_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a21275763803a2ce0d00e02dc0076a36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21275763803a2ce0d00e02dc0076a36c">&#9670;&nbsp;</a></span>action_aim_and_shoot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_aim_and_shoot </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03446">3446</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;{</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    std::vector&lt;aim_type&gt;::iterator it;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="keywordflow">for</span>( it = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin(); it != <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.end(); it++ ) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == it-&gt;action ) {</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        }</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    }</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="keywordflow">if</span>( it == <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.end() ) {</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Could not find a valid aim_type for %s&quot;</span>, <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.c_str() );</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;        <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin();</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    }</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    <span class="keywordtype">int</span> aim_threshold = it-&gt;threshold;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <a class="code" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    <a class="code" href="classtarget__ui.html#aa81de937ba74331a08f3ef8e049a3c28">apply_aim_turning_penalty</a>();</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> min_recoil = <a class="code" href="ranged_8cpp.html#a7ff8232af89fc85c44dee1cd0525f655">calculate_aim_cap</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <a class="code" href="ranged_8cpp.html#ae6e2f802cc8fb025d3dd4ada3da65c55">do_aim</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> ? *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> : <a class="code" href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a>(), min_recoil );</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    } <span class="keywordflow">while</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#af3d3fb7cfb98cf3c36f0f0681414274a">get_moves</a>() &gt; 0 &amp;&amp; <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> &gt; aim_threshold &amp;&amp;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;             <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> - <a class="code" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> &gt; min_recoil );</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160; </div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="comment">// If we made it under the aim threshold, go ahead and fire.</span></div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="comment">// Also fire if we&#39;re at our best aim level already.</span></div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <span class="comment">// If no critter is at dst then sight dispersion does not apply,</span></div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="comment">// so it would lock into an infinite loop.</span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <span class="keywordtype">bool</span> done_aiming = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> &lt;= aim_threshold || <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> - <a class="code" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> &lt;= min_recoil ||</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;                       ( !<a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &amp;&amp; <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> &lt;= min_recoil );</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    <span class="keywordflow">return</span> done_aiming;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01117">character.h:1117</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a2e6f4c9c827b91ce215a1a7b32a4affb"><div class="ttname"><a href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">target_ui::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00255">ranged.cpp:255</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a607a068ce45aeed17810fd8ca433e5a3"><div class="ttname"><a href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">target_ui::aim_mode</a></div><div class="ttdeci">std::vector&lt; aim_type &gt;::iterator aim_mode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00259">ranged.cpp:259</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af8c42cdc72ea5432ee63a1d2ba3f6967"><div class="ttname"><a href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">target_ui::aim_types</a></div><div class="ttdeci">std::vector&lt; aim_type &gt; aim_types</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00257">ranged.cpp:257</a></div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00044">dialogue.h:43</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a69e37326c7c5f142d13f8ac8e070b728"><div class="ttname"><a href="item_8cpp.html#a69e37326c7c5f142d13f8ac8e070b728">null_item_reference</a></div><div class="ttdeci">item &amp; null_item_reference()</div><div class="ttdoc">Returns a reference to a null item (see item::is_null).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00248">item.cpp:248</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="ranged_8cpp_source.html#l00259">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00257">aim_types</a>, <a class="el" href="ranged_8cpp_source.html#l03299">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l01140">calculate_aim_cap()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l01516">do_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="creature_8cpp_source.html#l02004">Creature::get_moves()</a>, <a class="el" href="item_8cpp_source.html#l00248">null_item_reference()</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00255">sight_dispersion</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a4924621b242d0938e9a03fcefdfa6a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4924621b242d0938e9a03fcefdfa6a9d">&#9670;&nbsp;</a></span>action_drop_aim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_drop_aim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03436">3436</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;{</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160; </div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    <span class="comment">// We&#39;ve changed pc.recoil, update penalty</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <a class="code" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a>();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160; </div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;}</div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00137">game_constants.h:137</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="acbdcdc8f41dd8bcbf887b12d96c9948d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbdcdc8f41dd8bcbf887b12d96c9948d">&#9670;&nbsp;</a></span>action_switch_ammo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_switch_ammo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03401">3401</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;{</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;        <span class="comment">// For turrets that use vehicle tanks &amp; can fire multiple liquids</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">ammo_options</a>().size() &gt; 1 ) {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> opts = <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">ammo_options</a>();</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            <span class="keyword">auto</span> iter = opts.find( <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>() );</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#a21fc6c32651797ffe152775d1b51687b">ammo_select</a>( ++iter != opts.end() ? *iter : *opts.begin() );</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>() );</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">range</a>();</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        }</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;        <span class="comment">// Leave aiming UI and open reloading UI since</span></div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        <span class="comment">// reloading annihilates our aim anyway</span></div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    }</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <a class="code" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a>();</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa3c8602522a1638d3af42b10f1750e26"><div class="ttname"><a href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">target_ui::range</a></div><div class="ttdeci">int range</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00191">ranged.cpp:191</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aaf459ec49ad96c44eddeb94d0c22fb36"><div class="ttname"><a href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">target_ui::on_range_ammo_changed</a></div><div class="ttdeci">void on_range_ammo_changed()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02991">ranged.cpp:2991</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">target_ui::TargetMode::TurretManual</a></div><div class="ttdeci">@ TurretManual</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae5ae79a739fcab56301077b8802355ce"><div class="ttname"><a href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">target_ui::ammo</a></div><div class="ttdeci">const itype * ammo</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00193">ranged.cpp:193</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><div class="ttname"><a href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">target_ui::turret</a></div><div class="ttdeci">turret_data * turret</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00195">ranged.cpp:195</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aeee1b122468e838a1f62691b2cd43396"><div class="ttname"><a href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">target_ui::mode</a></div><div class="ttdeci">TargetMode mode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00187">ranged.cpp:187</a></div></div>
<div class="ttc" id="aclassturret__data_html_a21fc6c32651797ffe152775d1b51687b"><div class="ttname"><a href="classturret__data.html#a21fc6c32651797ffe152775d1b51687b">turret_data::ammo_select</a></div><div class="ttdeci">bool ammo_select(const itype_id &amp;ammo)</div><div class="ttdoc">Attempts selecting ammo type and returns true if selection was valid.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00168">turret.cpp:168</a></div></div>
<div class="ttc" id="aclassturret__data_html_a78df34a41feb7bf25a677dba1e8181d5"><div class="ttname"><a href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">turret_data::range</a></div><div class="ttdeci">int range() const</div><div class="ttdoc">Maximum range considering current ammo (if any)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00190">turret.cpp:190</a></div></div>
<div class="ttc" id="aclassturret__data_html_aee56a3a0b07255f5b008cd16898b75e0"><div class="ttname"><a href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">turret_data::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type or returns &quot;null&quot; if no ammo available.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00126">turret.cpp:126</a></div></div>
<div class="ttc" id="aclassturret__data_html_af1938c9e7db9350ae08fef7a921f19c6"><div class="ttname"><a href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">turret_data::ammo_options</a></div><div class="ttdeci">std::set&lt; itype_id &gt; ammo_options() const</div><div class="ttdoc">What ammo is available for this turret (may be multiple if uses tanks)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00141">turret.cpp:141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00193">ammo</a>, <a class="el" href="turret_8cpp_source.html#l00126">turret_data::ammo_current()</a>, <a class="el" href="turret_8cpp_source.html#l00141">turret_data::ammo_options()</a>, <a class="el" href="turret_8cpp_source.html#l00168">turret_data::ammo_select()</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="ranged_8cpp_source.html#l02991">on_range_ammo_changed()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="turret_8cpp_source.html#l00190">turret_data::range()</a>, <a class="el" href="ranged_8cpp_source.html#l00195">turret</a>, and <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="af1178602a3d2f7e37c9dbebf22dd29a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1178602a3d2f7e37c9dbebf22dd29a3">&#9670;&nbsp;</a></span>action_switch_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_switch_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03304">3304</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;{</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    menu.<a class="code" href="classuilist.html#a5ed3c6e3829c033040fa9f11f1a7d0aa">settext</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select preferences&quot;</span> ) );</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keyword">const</span> std::pair&lt;int, int&gt; aim_modes_range = std::make_pair( 0, 100 );</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <span class="keyword">const</span> std::pair&lt;int, int&gt; firing_modes_range = std::make_pair( 100, 200 );</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160; </div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.empty() ) {</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( -1, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;  &quot;</span> + std::string( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Default aiming mode&quot;</span> ) ) );</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().force_color = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin(); it != <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.end(); ++it ) {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_active_aim_mode = <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> == it;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;            <span class="keyword">const</span> std::string text = ( it-&gt;name.empty() ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Immediate&quot;</span> ) : it-&gt;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) +</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;                                     ( is_active_aim_mode ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (active)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;            menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( aim_modes_range.first + std::distance( <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin(), it ),</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                           <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, text );</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <span class="keywordflow">if</span>( is_active_aim_mode ) {</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        }</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    }</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="keyword">const</span> std::map&lt;gun_mode_id, gun_mode&gt; gun_modes = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>();</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <span class="keywordflow">if</span>( !gun_modes.empty() ) {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( -1, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;  &quot;</span> + std::string( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Firing mode&quot;</span> ) ) );</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().force_color = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160; </div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = gun_modes.begin(); it != gun_modes.end(); ++it ) {</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> active_gun_mode = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a3b83c2e0d1313b542801169382be1605">gun_get_mode_id</a>() == it-&gt;first;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160; </div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;            <span class="comment">// If gun mode is from a gunmod use gunmod&#39;s name, pay attention to the &quot;-&gt;&quot; on tname</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            std::string text = ( it-&gt;second.target == <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> )</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                               ? it-&gt;second.tname()</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                               : it-&gt;second-&gt;tname() + <span class="stringliteral">&quot; (&quot;</span> + <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( it-&gt;second.qty ) + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160; </div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            text += ( active_gun_mode ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (active)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160; </div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( firing_modes_range.first + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( std::distance(</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                                           gun_modes.begin(), it ) ),</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                                       <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, text );</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;            <span class="keywordflow">if</span>( active_gun_mode ) {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> == 0 ) {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                    menu.<a class="code" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.size() - 1;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                }</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            }</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;        }</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    }</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160; </div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacecatacurses.html#a7407bbe97af63fd80e0a4d26bf0274ab">refresh</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= firing_modes_range.first &amp;&amp; menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; firing_modes_range.second ) {</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;        <span class="comment">// gun mode select</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        <span class="keyword">const</span> std::map&lt;gun_mode_id, gun_mode&gt; all_gun_modes = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>();</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;        <span class="keywordtype">int</span> skip = menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> - firing_modes_range.first;</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const gun_mode_id, gun_mode&gt; &amp;it : all_gun_modes ) {</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;            <span class="keywordflow">if</span>( skip-- == 0 ) {</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#a29fb11a5199f83a9c5801bf2af6d99e9">melee</a>() ) {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                    <a class="code" href="namespacecatacurses.html#a7407bbe97af63fd80e0a4d26bf0274ab">refresh</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;                }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">gun_set_mode</a>( it.first );</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;            }</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= aim_modes_range.first &amp;&amp; menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; aim_modes_range.second ) {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        <span class="comment">// aiming mode select</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin();</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        std::advance( <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a>, menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> - aim_modes_range.first );</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">preferred_aiming_mode</a> = <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a>-&gt;action;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    } <span class="comment">// else - just refresh</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160; </div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        <a class="code" href="classstring__id.html">itype_id</a> ammo_current = <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>();</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keywordflow">if</span>( ammo_current.<a class="code" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;            <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = 0;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( ammo_current );</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">range</a>();</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;        }</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#a29fb11a5199f83a9c5801bf2af6d99e9">melee</a>() ) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;            <a class="code" href="namespacecatacurses.html#a7407bbe97af63fd80e0a4d26bf0274ab">refresh</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#adb2ea39327f1a8da37740b4bfb171a5d">current_reach_range</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;            <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a>-&gt;<a class="code" href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">gun_range</a>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a>-&gt;<a class="code" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        }</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160; </div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <a class="code" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a>();</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecatacurses.html#a7407bbe97af63fd80e0a4d26bf0274ab">refresh</a>;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_abf1cdb8f4662bf96c8d762e9229df8d9"><div class="ttname"><a href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d, const bool compact)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00546">calendar.cpp:546</a></div></div>
<div class="ttc" id="aclassavatar_html_a98553758b9d158c58dd11c77d97ff55e"><div class="ttname"><a href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">avatar::preferred_aiming_mode</a></div><div class="ttdeci">std::string preferred_aiming_mode</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00283">avatar.h:283</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a29fb11a5199f83a9c5801bf2af6d99e9"><div class="ttname"><a href="classgun__mode.html#a29fb11a5199f83a9c5801bf2af6d99e9">gun_mode::melee</a></div><div class="ttdeci">bool melee() const</div><div class="ttdoc">if true perform a melee attach as opposed to shooting</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00033">gun_mode.h:33</a></div></div>
<div class="ttc" id="aclassgun__mode_html_aadaa36507ace08fc621348ae1052647e"><div class="ttname"><a href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">gun_mode::target</a></div><div class="ttdeci">item * target</div><div class="ttdoc">pointer to item providing this mode - base gun or attached gunmod</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00019">gun_mode.h:19</a></div></div>
<div class="ttc" id="aclassitem_html_a1a94ea108d695febf7f2bcf090f097fa"><div class="ttname"><a href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">item::gun_current_mode</a></div><div class="ttdeci">gun_mode gun_current_mode() const</div><div class="ttdoc">Get the current mode for this gun (or an invalid mode if item is not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11420">item.cpp:11420</a></div></div>
<div class="ttc" id="aclassitem_html_a3b83c2e0d1313b542801169382be1605"><div class="ttname"><a href="classitem.html#a3b83c2e0d1313b542801169382be1605">item::gun_get_mode_id</a></div><div class="ttdeci">gun_mode_id gun_get_mode_id() const</div><div class="ttdoc">Get id of mode a gun is currently set to, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11425">item.cpp:11425</a></div></div>
<div class="ttc" id="aclassitem_html_a4adcc4a3a5f5fb20a4d245d79109640a"><div class="ttname"><a href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">item::ammo_data</a></div><div class="ttdeci">const itype * ammo_data() const</div><div class="ttdoc">Specific ammo data, returns nullptr if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10995">item.cpp:10995</a></div></div>
<div class="ttc" id="aclassitem_html_a77cad1ee17273a24e50fe42e03eea269"><div class="ttname"><a href="classitem.html#a77cad1ee17273a24e50fe42e03eea269">item::gun_range</a></div><div class="ttdeci">int gun_range(const Character *p) const</div><div class="ttdoc">The weapons range in map squares.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10648">item.cpp:10648</a></div></div>
<div class="ttc" id="aclassitem_html_aa1a2ecb3e9ebf95dc7fedac4c1de32b4"><div class="ttname"><a href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">item::gun_all_modes</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_mode &gt; gun_all_modes() const</div><div class="ttdoc">Get all possible modes for this gun inclusive of any attached gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11361">item.cpp:11361</a></div></div>
<div class="ttc" id="aclassitem_html_adb2ea39327f1a8da37740b4bfb171a5d"><div class="ttname"><a href="classitem.html#adb2ea39327f1a8da37740b4bfb171a5d">item::current_reach_range</a></div><div class="ttdeci">int current_reach_range(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07532">item.cpp:7532</a></div></div>
<div class="ttc" id="aclassitem_html_afcc181d2e2fe380ac28dd70f814798c2"><div class="ttname"><a href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">item::gun_set_mode</a></div><div class="ttdeci">bool gun_set_mode(const gun_mode_id &amp;mode)</div><div class="ttdoc">Try to set the mode for a gun, returning false if no such mode is possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11433">item.cpp:11433</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00322">string_id.h:322</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_a5ed3c6e3829c033040fa9f11f1a7d0aa"><div class="ttname"><a href="classuilist.html#a5ed3c6e3829c033040fa9f11f1a7d0aa">uilist::settext</a></div><div class="ttdeci">void settext(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01259">ui.cpp:1259</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00526">ui.h:526</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00422">ui.h:422</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00026">color.h:26</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00022">color.h:22</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a7407bbe97af63fd80e0a4d26bf0274ab"><div class="ttname"><a href="namespacecatacurses.html#a7407bbe97af63fd80e0a4d26bf0274ab">catacurses::refresh</a></div><div class="ttdeci">void refresh()</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00181">ncurses_def.cpp:181</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00038">ui.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="ranged_8cpp_source.html#l00259">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00257">aim_types</a>, <a class="el" href="ranged_8cpp_source.html#l00193">ammo</a>, <a class="el" href="turret_8cpp_source.html#l00126">turret_data::ammo_current()</a>, <a class="el" href="item_8cpp_source.html#l10995">item::ammo_data()</a>, <a class="el" href="color_8h_source.html#l00022">c_cyan</a>, <a class="el" href="color_8h_source.html#l00026">c_light_green</a>, <a class="el" href="item_8cpp_source.html#l07532">item::current_reach_range()</a>, <a class="el" href="ui_8h_source.html#l00422">uilist::entries</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="item_8cpp_source.html#l11361">item::gun_all_modes()</a>, <a class="el" href="item_8cpp_source.html#l11420">item::gun_current_mode()</a>, <a class="el" href="item_8cpp_source.html#l11425">item::gun_get_mode_id()</a>, <a class="el" href="item_8cpp_source.html#l10648">item::gun_range()</a>, <a class="el" href="item_8cpp_source.html#l11433">item::gun_set_mode()</a>, <a class="el" href="string__id_8h_source.html#l00322">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="gun__mode_8h_source.html#l00033">gun_mode::melee()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="ranged_8cpp_source.html#l02991">on_range_ammo_changed()</a>, <a class="el" href="avatar_8h_source.html#l00283">avatar::preferred_aiming_mode</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="turret_8cpp_source.html#l00190">turret_data::range()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00181">catacurses::refresh()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00526">uilist::selected</a>, <a class="el" href="ui_8cpp_source.html#l01259">uilist::settext()</a>, <a class="el" href="gun__mode_8h_source.html#l00019">gun_mode::target</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="ranged_8cpp_source.html#l00195">turret</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="aa81de937ba74331a08f3ef8e049a3c28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa81de937ba74331a08f3ef8e049a3c28">&#9670;&nbsp;</a></span>apply_aim_turning_penalty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::apply_aim_turning_penalty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03299">3299</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;{</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a>;</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_ac0a5aad7e60b30082e7ec2ff97f8f6d4"><div class="ttname"><a href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">target_ui::predicted_recoil</a></div><div class="ttdeci">double predicted_recoil</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00265">ranged.cpp:265</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00265">predicted_recoil</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>.</p>

</div>
</div>
<a id="a1591b490e9f8d48547b108ae481f982e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1591b490e9f8d48547b108ae481f982e">&#9670;&nbsp;</a></span>choose_initial_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::choose_initial_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03011">3011</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;{</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <span class="comment">// Try previously targeted creature</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> cr = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.lock();</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) &amp;&amp; <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( cr-&gt;pos() ) &lt;= <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <span class="keywordflow">return</span> cr-&gt;pos();</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    }</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    <span class="comment">// Try closest creature</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.empty() ) {</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>[0]-&gt;pos();</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    }</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="comment">// Try closest practice target</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    <span class="keyword">const</span> std::vector&lt;tripoint&gt; nearby = <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> target_spot = std::find_if( nearby.begin(), nearby.end(),</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    [<span class="keyword">this</span>, &amp;here]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pt ) {</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        return here.tr_at( pt ).id == tr_practice_target &amp;&amp; this-&gt;you-&gt;sees( pt );</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    } );</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <span class="keywordflow">if</span>( target_spot != nearby.end() ) {</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        <span class="keywordflow">return</span> *target_spot;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    }</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160; </div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <span class="comment">// We&#39;ve got nothing.</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a15520bb61b6da84f9bd753fa43dcbabc"><div class="ttname"><a href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">Character::last_target</a></div><div class="ttdeci">weak_ptr_fast&lt; Creature &gt; last_target</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02761">character.h:2761</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a281f9ea6ae900ff7991e457f1d34b8f6"><div class="ttname"><a href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">target_ui::targets</a></div><div class="ttdeci">std::vector&lt; Creature * &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00246">ranged.cpp:246</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ab236848678058afb7605e6d82a5c8fa9"><div class="ttname"><a href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">target_ui::dist_fn</a></div><div class="ttdeci">int dist_fn(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03097">ranged.cpp:3097</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_afe4c97cc5abb0ce402bd9e89411e1778"><div class="ttname"><a href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">target_ui::src</a></div><div class="ttdeci">tripoint src</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00238">ranged.cpp:238</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a560abf1cd341e88e2f13f454ec2ecc99"><div class="ttname"><a href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00848">coordinates.h:848</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ada897699f31fc8b37c5af09d95d45840"><div class="ttname"><a href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00016">memory_fast.h:16</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a7c4d782d03c3f30e5b3332260ded8951"><div class="ttname"><a href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a></div><div class="ttdeci">static bool pl_sees(const Creature &amp;cr)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01935">ranged.cpp:1935</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, <a class="el" href="ranged_8cpp_source.html#l01935">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00246">targets</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a97d244cde8cae12d0266daf6fc083014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d244cde8cae12d0266daf6fc083014">&#9670;&nbsp;</a></span>confirm_non_enemy_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::confirm_non_enemy_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03115">3115</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;{</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <span class="comment">// Check if you are casting a spell at yourself.</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; ( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> == <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> || <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a>.count( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) == 1 ) ) {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Really attack yourself?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;        }</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    }</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> who = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="keywordflow">if</span>( who &amp;&amp; !who-&gt;<a class="code" href="classnpc.html#adc0b90f197e58b09eb6eb92132d432f0">guaranteed_hostile</a>() ) {</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Really attack %s?&quot;</span> ), who-&gt;<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>().c_str() );</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    }</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclassnpc_html_adc0b90f197e58b09eb6eb92132d432f0"><div class="ttname"><a href="classnpc.html#adc0b90f197e58b09eb6eb92132d432f0">npc::guaranteed_hostile</a></div><div class="ttdeci">bool guaranteed_hostile() const</div><div class="ttdoc">Is enemy or will turn into one (can't be convinced not to attack).</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02312">npc.cpp:2312</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a362df365f84b306e2ff14edf099a1000"><div class="ttname"><a href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">target_ui::dst_critter</a></div><div class="ttdeci">Creature * dst_critter</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00244">ranged.cpp:244</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ab855722580bd112ef0590b5a9b4f3556"><div class="ttname"><a href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">target_ui::spell_aoe</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_aoe</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00269">ranged.cpp:269</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">target_ui::TargetMode::Spell</a></div><div class="ttdeci">@ Spell</div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="character_8cpp_source.html#l05731">Character::get_name()</a>, <a class="el" href="npc_8cpp_source.html#l02312">npc::guaranteed_hostile()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00269">spell_aoe</a>, and <a class="el" href="ranged_8cpp_source.html#l00238">src</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="af007dd5fcc266ee10d673299ca90c29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af007dd5fcc266ee10d673299ca90c29c">&#9670;&nbsp;</a></span>cycle_targets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::cycle_targets </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03202">3202</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;{</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.empty() ) {</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <span class="comment">// Nothing to cycle</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    }</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160; </div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        <span class="keyword">auto</span> t = std::find( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end(), <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        <span class="keywordtype">size_t</span> new_target = 0;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <span class="keywordflow">if</span>( t != <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end() ) {</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            <span class="keywordtype">size_t</span> idx = std::distance( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), t );</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            new_target = ( idx + <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size() + <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> ) % <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size();</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>[new_target]-&gt;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>() );</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;        }</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    }</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160; </div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="comment">// There is either no creature under the cursor or the player can&#39;t see it.</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <span class="comment">// Use the closest/farthest target in this case</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> == 1 ) {</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;        <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.front()-&gt;pos() );</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.back()-&gt;pos() );</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    }</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_a3ead422f4a78394c13bc3f4c6c953f42"><div class="ttname"><a href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">target_ui::set_cursor_pos</a></div><div class="ttdeci">bool set_cursor_pos(const tripoint &amp;new_pos)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02857">ranged.cpp:2857</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l00246">targets</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>.</p>

</div>
</div>
<a id="ab236848678058afb7605e6d82a5c8fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab236848678058afb7605e6d82a5c8fa9">&#9670;&nbsp;</a></span>dist_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::dist_fn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03097">3097</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;{</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">std::round</a>( <a class="code" href="line_8cpp.html#a2d906c9af0b0586f48bc34cff0838817">rl_dist_exact</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, p ) ) );</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;}</div>
<div class="ttc" id="aline_8cpp_html_a2d906c9af0b0586f48bc34cff0838817"><div class="ttname"><a href="line_8cpp.html#a2d906c9af0b0586f48bc34cff0838817">rl_dist_exact</a></div><div class="ttdeci">float rl_dist_exact(const tripoint &amp;loc1, const tripoint &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00259">line.cpp:259</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="line_8cpp_source.html#l00259">rl_dist_exact()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, and <a class="el" href="ranged_8cpp_source.html#l00238">src</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03039">try_reacquire_target()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>.</p>

</div>
</div>
<a id="a7d5114b61c688d3810c108986ddc8bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d5114b61c688d3810c108986ddc8bf7">&#9670;&nbsp;</a></span>draw_controls_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_controls_list </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03662">3662</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;{</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <span class="comment">// Change UI colors for visual feedback</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;    <span class="comment">// TODO: Colorize keys inside brackets to be consistent with other UI windows</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> col_enabled = <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> col_disabled = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> col_move = ( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> ? col_enabled : col_disabled );</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> col_fire = ( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ? col_enabled : col_disabled );</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <span class="comment">// Get first key bound to given action OR &#39; &#39; if there are none.</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> bound_key = [<span class="keyword">this</span>]( <span class="keyword">const</span> std::string &amp; s ) {</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="keyword">const</span> std::vector&lt;input_event&gt; keys = this-&gt;<a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#a1cd0c2537bc31a2c039e1178efb2ffdc">keys_bound_to</a>( s, <span class="comment">/*maximum_modifier_count=*/</span>1 );</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        <span class="keywordflow">return</span> keys.empty() ? <a class="code" href="structinput__event.html">input_event</a>() : keys.front();</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    };</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> colored = [col_enabled]( <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="keyword">const</span> std::string &amp; s ) {</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> == col_enabled ) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            <span class="comment">// col_enabled is the default one when printing</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( s, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> );</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        }</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    };</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160; </div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    <span class="keyword">struct </span><a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7">order</a>; <span class="comment">// Lines with highest &#39;order&#39; are removed first</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        std::string str;</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    };</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    std::vector&lt;line&gt; lines;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="comment">// Compile full list</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;        lines.push_back( {8, colored( col_move, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Shift view with directional keys&quot;</span> ) )} );</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        lines.push_back( {8, colored( col_move, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Move cursor with directional keys&quot;</span> ) )} );</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    }</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="input_8cpp.html#aceedd903724817bad81fbc03216ff125">is_mouse_enabled</a>() ) {</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;        std::string <a class="code" href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983fa3734a903022249b3010be1897042568e">move</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mouse: LMB: Target, Wheel: Cycle,&quot;</span> );</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;        std::string <a class="code" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;RMB: Fire&quot;</span> );</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;        lines.push_back( {7, colored( col_move, <a class="code" href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983fa3734a903022249b3010be1897042568e">move</a> ) + <span class="stringliteral">&quot; &quot;</span> + colored( col_fire, <a class="code" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> )} );</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    }</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    {</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;        std::string cycle = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] Cycle targets;&quot;</span> ), <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;NEXT_TARGET&quot;</span>, 1 ) );</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;        std::string <a class="code" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] %s.&quot;</span> ), bound_key( <span class="stringliteral">&quot;FIRE&quot;</span> ).short_description(),</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                                          <a class="code" href="classtarget__ui.html#a7f3d575ebc23cdd3a199a8c17579a225">uitext_fire</a>() );</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;        lines.push_back( {0, colored( col_move, cycle ) + <span class="stringliteral">&quot; &quot;</span> + colored( col_fire, <a class="code" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> )} );</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;    }</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        std::string text = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] target self; [%s] toggle snap-to-target&quot;</span> ),</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                                          bound_key( <span class="stringliteral">&quot;CENTER&quot;</span> ).short_description(),</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;                                          bound_key( <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> ).short_description() );</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        lines.push_back( {3, colored( col_enabled, text )} );</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    }</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;        std::string aim_and_fire;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structaim__type.html">aim_type</a> &amp;e : <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a> ) {</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <span class="keywordflow">if</span>( e.has_threshold ) {</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                aim_and_fire += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;[%s] &quot;</span>, bound_key( e.action ).short_description() );</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            }</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        }</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        aim_and_fire += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;to aim and fire.&quot;</span> );</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160; </div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        std::string aim = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] to steady your aim.  (10 moves)&quot;</span> ),</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                                         bound_key( <span class="stringliteral">&quot;AIM&quot;</span> ).short_description() );</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160; </div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;        std::string dropaim = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] to stop aiming.&quot;</span> ),</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                                             bound_key( <span class="stringliteral">&quot;STOPAIM&quot;</span> ).short_description() );</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160; </div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;        lines.push_back( {2, colored( col_fire, aim )} );</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;        lines.push_back( { 2, colored( col_fire, dropaim ) } );</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        lines.push_back( {4, colored( col_fire, aim_and_fire )} );</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> || ( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> &amp;&amp;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">get_aim_types</a>( *relevant ).size() &gt; 1 ) ) {</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        lines.push_back( {5, colored( col_enabled, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] to switch firing modes.&quot;</span> ),</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;                                      bound_key( <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> ).short_description() ) )</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;                         } );</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;            lines.push_back( { 6, colored( col_enabled, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] to reload/switch ammo.&quot;</span> ),</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;                                           bound_key( <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> ).short_description() ) )</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;                             } );</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;        }</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    }</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="structlabel.html">label</a> = <a class="code" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a></div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;                                  ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] Hide lines of fire&quot;</span> )</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;                                  : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] Show lines of fire&quot;</span> );</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        lines.push_back( {1, colored( col_enabled, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="structlabel.html">label</a>, bound_key( <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> ).short_description() ) )} );</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    }</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="comment">// Shrink the list until it fits</span></div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    <span class="keywordtype">int</span> height = <a class="code" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="keywordtype">int</span> available_lines = height - text_y - 1; <span class="comment">// 1 for bottom border</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <span class="keywordflow">if</span>( available_lines &lt;= 0 ) {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    }</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="keywordflow">while</span>( lines.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( available_lines ) ) {</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        lines.erase( std::max_element( lines.begin(), lines.end(), []( <span class="keyword">const</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> &amp; l1, <span class="keyword">const</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> &amp; l2 ) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;            return l1.order &lt; l2.order;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        } ) );</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    text_y = height - lines.size() - 1;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a> &amp;l : lines ) {</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;        <a class="code" href="classnc__color.html">nc_color</a> col = col_enabled;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), col, col, l.str );</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    }</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">cata_variant_type::point</a></div><div class="ttdeci">@ point</div></div>
<div class="ttc" id="aclassCharacter_html_a7a8f9ffd035435c9f2777e007059e68d"><div class="ttname"><a href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">Character::get_aim_types</a></div><div class="ttdeci">std::vector&lt; aim_type &gt; get_aim_types(const item &amp;gun) const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02006">ranged.cpp:2006</a></div></div>
<div class="ttc" id="aclassinput__context_html_a1cd0c2537bc31a2c039e1178efb2ffdc"><div class="ttname"><a href="classinput__context.html#a1cd0c2537bc31a2c039e1178efb2ffdc">input_context::keys_bound_to</a></div><div class="ttdeci">std::vector&lt; input_event &gt; keys_bound_to(const std::string &amp;action_descriptor, int maximum_modifier_count=-1, bool restrict_to_printable=true, bool restrict_to_keyboard=true) const</div><div class="ttdoc">Keys (and only keys, other input types are not included) that trigger the given action.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00203">input_context.cpp:203</a></div></div>
<div class="ttc" id="aclassinput__context_html_abe76d2c284f2a277cbd2f367963fa9ab"><div class="ttname"><a href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">input_context::get_desc</a></div><div class="ttdeci">std::string get_desc(const std::string &amp;action_descriptor, unsigned int max_limit=0, const input_event_filter &amp;evt_filter=allow_all_keys) const</div><div class="ttdoc">Get a description text for the key/other input method associated with the given action.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00269">input_context.cpp:269</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09297">item.cpp:9297</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a122323ec4c1e72c291e76643ccfd3fde"><div class="ttname"><a href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">target_ui::shifting_view</a></div><div class="ttdeci">bool shifting_view</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00288">ranged.cpp:288</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a246e6aa2bb08bb724c44571e8451ac30"><div class="ttname"><a href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">target_ui::w_target</a></div><div class="ttdeci">catacurses::window w_target</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00249">ranged.cpp:249</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">target_ui::Status::Good</a></div><div class="ttdeci">@ Good</div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">target_ui::Status::OutOfAmmo</a></div><div class="ttdeci">@ OutOfAmmo</div></div>
<div class="ttc" id="aclasstarget__ui_html_a4e5479e5dd0b2883bbf2927c489ddb6a"><div class="ttname"><a href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">target_ui::ctxt</a></div><div class="ttdeci">input_context ctxt</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00251">ranged.cpp:251</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a63ac73585a9794e93d181362f7473b50"><div class="ttname"><a href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">target_ui::draw_turret_lines</a></div><div class="ttdeci">bool draw_turret_lines</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00282">ranged.cpp:282</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a7f3d575ebc23cdd3a199a8c17579a225"><div class="ttname"><a href="classtarget__ui.html#a7f3d575ebc23cdd3a199a8c17579a225">target_ui::uitext_fire</a></div><div class="ttdeci">std::string uitext_fire() const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03628">ranged.cpp:3628</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_abb6df512b8b794227dc5f1d9afe17bf1"><div class="ttname"><a href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">target_ui::status</a></div><div class="ttdeci">Status status</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00233">ranged.cpp:233</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">target_ui::TargetMode::Turrets</a></div><div class="ttdeci">@ Turrets</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">target_ui::TargetMode::Reach</a></div><div class="ttdeci">@ Reach</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">target_ui::TargetMode::Fire</a></div><div class="ttdeci">@ Fire</div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00016">color.h:16</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="ahandle__action_8cpp_html_ad56544ec96a0f79ea4e47ae8f8754d10"><div class="ttname"><a href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a></div><div class="ttdeci">static void fire()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l01635">handle_action.cpp:1635</a></div></div>
<div class="ttc" id="ainput_8cpp_html_aceedd903724817bad81fbc03216ff125"><div class="ttname"><a href="input_8cpp.html#aceedd903724817bad81fbc03216ff125">is_mouse_enabled</a></div><div class="ttdeci">bool is_mouse_enabled()</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00054">input.cpp:54</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a></div><div class="ttdeci">@ line</div></div>
<div class="ttc" id="anamespacecatacurses_html_adc81ca40445dc062af12fb6d7a4793d0"><div class="ttname"><a href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">catacurses::getmaxy</a></div><div class="ttdeci">int getmaxy(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00099">ncurses_def.cpp:99</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7">sounds::sound_t::order</a></div><div class="ttdeci">@ order</div></div>
<div class="ttc" id="aoutput_8cpp_html_a64a769083b78bb93dbb99935b959f3f5"><div class="ttname"><a href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a></div><div class="ttdeci">void print_colored_text(const catacurses::window &amp;w, const point &amp;p, nc_color &amp;color, const nc_color &amp;base_color, const std::string_view text, const report_color_error color_error)</div><div class="ttdoc">Print text with embedded color_tags, x, y are in curses system.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00239">output.cpp:239</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructaim__type_html"><div class="ttname"><a href="structaim__type.html">aim_type</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00371">character.h:371</a></div></div>
<div class="ttc" id="astructinput__event_html"><div class="ttname"><a href="structinput__event.html">input_event</a></div><div class="ttdoc">An instance of an input, like a keypress etc.</div><div class="ttdef"><b>Definition:</b> <a href="input__enums_8h_source.html#l00063">input_enums.h:63</a></div></div>
<div class="ttc" id="astructlabel_html"><div class="ttname"><a href="structlabel.html">label</a></div><div class="ttdoc">Struct used for storing labels (easier to json opposed to a std::map&lt;point, std::string&gt;)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00687">vehicle.h:687</a></div></div>
<div class="ttc" id="awidget_8h_html_ac9c40e0d5ffae2a9e10019da79b7983fa3734a903022249b3010be1897042568e"><div class="ttname"><a href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983fa3734a903022249b3010be1897042568e">widget_var::move</a></div><div class="ttdeci">@ move</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="ranged_8cpp_source.html#l00257">aim_types</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="ranged_8cpp_source.html#l00282">draw_turret_lines</a>, <a class="el" href="handle__action_8cpp_source.html#l01635">fire()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp_source.html#l02006">Character::get_aim_types()</a>, <a class="el" href="input__context_8cpp_source.html#l00269">input_context::get_desc()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00099">catacurses::getmaxy()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="input_8cpp_source.html#l00054">is_mouse_enabled()</a>, <a class="el" href="input__context_8cpp_source.html#l00203">input_context::keys_bound_to()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="widget_8h.html#ac9c40e0d5ffae2a9e10019da79b7983fa3734a903022249b3010be1897042568e">move</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l00288">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l03628">uitext_fire()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="acc5b1b952d220d0cd766f9c32ab5eb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5b1b952d220d0cd766f9c32ab5eb38">&#9670;&nbsp;</a></span>draw_help_notice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_help_notice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03648">3648</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;{</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    <span class="keywordtype">int</span> text_y = <a class="code" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 1;</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    <span class="keywordtype">int</span> width = <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    <span class="keyword">const</span> std::string label_help = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                                       <a class="code" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] show help&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;[%s] show all controls&quot;</span> ),</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;                                       <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span>, 1 ) );</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <span class="keywordtype">int</span> label_width = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( label_help ), width - 6 ); <span class="comment">// 6 for borders and &quot;&lt; &quot; + &quot; &gt;&quot;</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordtype">int</span> text_x = width - label_width - 6;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <a class="code" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( text_x + 1, text_y ), <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot;&lt; &quot;</span> );</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    <a class="code" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( text_x + 3, text_y ), label_width, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, label_help );</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    <a class="code" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot; &gt;&quot;</span> );</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;}</div>
<div class="ttc" id="acatacharset_8cpp_html_af20ee33da59ccceb9f4c14005c0bbe80"><div class="ttname"><a href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a></div><div class="ttdeci">int utf8_width(const std::string_view s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00104">catacharset.cpp:104</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a4b525b1e2a39f4748409b97e8984947b"><div class="ttname"><a href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">target_ui::narrow</a></div><div class="ttdeci">bool narrow</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00296">ranged.cpp:296</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00091">ncurses_def.cpp:91</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1184e3eda011b110d09bf2dcf08228f5"><div class="ttname"><a href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a></div><div class="ttdeci">void mvwprintz(const catacurses::window &amp;w, const point &amp;p, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l03290">output.cpp:3290</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00268">output.cpp:268</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aedec608a42edd33ec812f7769a9ed0c9"><div class="ttname"><a href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a></div><div class="ttdeci">void wprintz(const catacurses::window &amp;w, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l03298">output.cpp:3298</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="input__context_8cpp_source.html#l00269">input_context::get_desc()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00099">catacurses::getmaxy()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="output_8cpp_source.html#l03290">mvwprintz()</a>, <a class="el" href="ranged_8cpp_source.html#l00296">narrow</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="output_8cpp_source.html#l00268">trim_and_print()</a>, <a class="el" href="catacharset_8cpp_source.html#l00104">utf8_width()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="output_8cpp_source.html#l03298">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a15d523ae27fc66cbff7adac5e9fa91dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d523ae27fc66cbff7adac5e9fa91dd">&#9670;&nbsp;</a></span>draw_terrain_overlay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_terrain_overlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03476">3476</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;{</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() + <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160; </div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    <span class="comment">// Removes parts that don&#39;t belong to currently visible Z level</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> filter_this_z = [&amp;<a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>]( <span class="keyword">const</span> std::vector&lt;tripoint&gt; &amp;<a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> ) {</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;        std::vector&lt;tripoint&gt; this_z = <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        this_z.erase( std::remove_if( this_z.begin(), this_z.end(),</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;        [&amp;<a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; p ) {</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;            return p.z != center.z;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;        } ), this_z.end() );</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;        <span class="keywordflow">return</span> this_z;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    };</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160; </div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="comment">// FIXME: TILES version of g-&gt;draw_line helpfully draws a cursor at last point.</span></div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="comment">//        This creates a fake cursor if &#39;dst&#39; is on a z-level we cannot see.</span></div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160; </div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="comment">// Draw approximate line of fire for each turret in range</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> ) {</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;        <span class="comment">// TODO: TILES version doesn&#39;t know how to draw more than 1 line at a time.</span></div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;        <span class="comment">//       We merge all lines together and draw them as a big malformed one</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        std::set&lt;tripoint&gt; points;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> turret_with_lof &amp;it : <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a> ) {</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;            std::vector&lt;tripoint&gt; this_z = filter_this_z( it.line );</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p : this_z ) {</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                points.insert( p );</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;            }</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;        }</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;        <span class="comment">// Since &quot;trajectory&quot; for each turret is just a straight line,</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;        <span class="comment">// we can draw it even if the player can&#39;t see some parts</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;        points.erase( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ); <span class="comment">// Workaround for fake cursor on TILES</span></div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;        std::vector&lt;tripoint&gt; l( points.begin(), points.end() );</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;            <span class="comment">// Workaround for fake cursor bug on TILES</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;            l.push_back( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        }</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_line( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, l, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    }</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160; </div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="comment">// Draw trajectory</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> != <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        std::vector&lt;tripoint&gt; this_z = filter_this_z( <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> );</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160; </div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        <span class="comment">// Draw a highlighted trajectory only if we can see the endpoint.</span></div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;        <span class="comment">// Provides feedback to the player, but avoids leaking information</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        <span class="comment">// about tiles they can&#39;t see.</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_line( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, this_z );</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    }</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    <span class="comment">// Since draw_line does nothing if destination is not visible,</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    <span class="comment">// cursor also disappears. Draw it explicitly.</span></div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_cursor( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    }</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160; </div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <span class="comment">// Draw spell AOE</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        <a class="code" href="structdrawsq__params.html">drawsq_params</a> params = <a class="code" href="structdrawsq__params.html">drawsq_params</a>().<a class="code" href="structdrawsq__params.html#ae80016e06fb7c6696a44fcf775374e3d">highlight</a>( <span class="keyword">true</span> ).<a class="code" href="structdrawsq__params.html#a85d5bbbff2bde51a2fdb0ac52036b1d1">center</a>( <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> );</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tile : <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> ) {</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;            <span class="keywordflow">if</span>( tile.z != <a class="code" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;            }</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;<span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a> ) {</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_highlight( tile );</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ad189f4216a9eaacbf9c5aa0ceedaea18">drawsq</a>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;w_terrain, tile, params );</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;<span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            }</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;        }</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    }</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;}</div>
<div class="ttc" id="acached__options_8cpp_html_a9b72c9314ac0439a25820b3abf2229f3"><div class="ttname"><a href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a></div><div class="ttdeci">bool use_tiles</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00014">cached_options.cpp:14</a></div></div>
<div class="ttc" id="acata__tiles_8h_html_affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667"><div class="ttname"><a href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">text_alignment::center</a></div><div class="ttdeci">@ center</div></div>
<div class="ttc" id="aclassCharacter_html_ad142b103f316b95f28681bd5502e79ef"><div class="ttname"><a href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">Character::view_offset</a></div><div class="ttdeci">tripoint view_offset</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02705">character.h:2705</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassmap_html_ad189f4216a9eaacbf9c5aa0ceedaea18"><div class="ttname"><a href="classmap.html#ad189f4216a9eaacbf9c5aa0ceedaea18">map::drawsq</a></div><div class="ttdeci">void drawsq(const catacurses::window &amp;w, const tripoint &amp;p, const drawsq_params &amp;params) const</div><div class="ttdoc">Draw the map tile at the given coordinate.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l07059">map.cpp:7059</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a542ba80f542b41ea6a81f1ab8b14b521"><div class="ttname"><a href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">target_ui::traj</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; traj</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00236">ranged.cpp:236</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><div class="ttname"><a href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">target_ui::turrets_in_range</a></div><div class="ttdeci">std::vector&lt; turret_with_lof &gt; turrets_in_range</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00278">ranged.cpp:278</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="astructdrawsq__params_html"><div class="ttname"><a href="structdrawsq__params.html">drawsq_params</a></div><div class="ttdoc">Draw parameters used by map::drawsq() and similar methods.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00168">map.h:168</a></div></div>
<div class="ttc" id="astructdrawsq__params_html_a85d5bbbff2bde51a2fdb0ac52036b1d1"><div class="ttname"><a href="structdrawsq__params.html#a85d5bbbff2bde51a2fdb0ac52036b1d1">drawsq_params::center</a></div><div class="ttdeci">constexpr drawsq_params &amp; center(const tripoint &amp;p)</div><div class="ttdoc">Set view center.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00271">map.h:271</a></div></div>
<div class="ttc" id="astructdrawsq__params_html_ae80016e06fb7c6696a44fcf775374e3d"><div class="ttname"><a href="structdrawsq__params.html#ae80016e06fb7c6696a44fcf775374e3d">drawsq_params::highlight</a></div><div class="ttdeci">constexpr drawsq_params &amp; highlight(bool v)</div><div class="ttdoc">Highlight the tile.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00186">map.h:186</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, <a class="el" href="map_8h_source.html#l00271">drawsq_params::center()</a>, <a class="el" href="ranged_8cpp_source.html#l00282">draw_turret_lines</a>, <a class="el" href="map_8cpp_source.html#l07059">map::drawsq()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8h_source.html#l00186">drawsq_params::highlight()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00269">spell_aoe</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00236">traj</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00278">turrets_in_range</a>, <a class="el" href="cached__options_8cpp_source.html#l00014">use_tiles</a>, <a class="el" href="character_8h_source.html#l02705">Character::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00185">you</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a93a478e95d201324548329f39a087208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93a478e95d201324548329f39a087208">&#9670;&nbsp;</a></span>draw_ui_window()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_ui_window </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03551">3551</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;{</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    <span class="comment">// Clear target window and make it non-transparent.</span></div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <span class="keywordtype">int</span> width = <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    <span class="keywordtype">int</span> height = <a class="code" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = 0; y &lt; height; y++ ) {</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = 0; x &lt; width; x++ ) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            <a class="code" href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( x, y ), <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="charliteral">&#39; &#39;</span> );</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;        }</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    }</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160; </div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    <a class="code" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <a class="code" href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">draw_window_title</a>();</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <a class="code" href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">draw_help_notice</a>();</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160; </div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="keywordtype">int</span> text_y = 1; <span class="comment">// Skip top border</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    <a class="code" href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">panel_cursor_info</a>( text_y );</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    text_y += <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <a class="code" href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">panel_gun_info</a>( text_y );</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <a class="code" href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">panel_recoil</a>( text_y );</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        text_y += <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <a class="code" href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">panel_spell_info</a>( text_y );</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;        text_y += <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;    <span class="keywordtype">bool</span> fill_with_blank_if_no_target = !<a class="code" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a>;</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    <a class="code" href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">panel_target_info</a>( text_y, fill_with_blank_if_no_target );</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;    text_y++;</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160; </div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <a class="code" href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">panel_turret_list</a>( text_y );</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        <span class="comment">// TODO: these are old, consider refactoring</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;            text_y = <a class="code" href="ranged_8cpp.html#a0702c7984ec8768691cb9a805616d1de">print_aim</a>( *<span class="keyword">this</span>, *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>, *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>(), <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a> ) {</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            <span class="keywordtype">bool</span> blind = <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a>;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            <a class="code" href="ranged_8cpp.html#aad8bc17f1bcf65d90738d8d06460c91a">draw_throw_aim</a>( *<span class="keyword">this</span>, *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>, *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, blind );</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        }</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    }</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160; </div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ) {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <a class="code" href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">draw_controls_list</a>( text_y );</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    }</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160; </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    <a class="code" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_a14b8ebef108aaa7ad8c5176a04f600bb"><div class="ttname"><a href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">target_ui::panel_spell_info</a></div><div class="ttdeci">void panel_spell_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03857">ranged.cpp:3857</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1e6534092ef1b213639575c914030eb1"><div class="ttname"><a href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">target_ui::tiny</a></div><div class="ttdeci">bool tiny</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00293">ranged.cpp:293</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a34b69263e28fa4472b51104ec1d2e6f0"><div class="ttname"><a href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">target_ui::compact</a></div><div class="ttdeci">bool compact</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00291">ranged.cpp:291</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a4bb70bd52ece44447bec77880106009d"><div class="ttname"><a href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">target_ui::panel_target_info</a></div><div class="ttdeci">void panel_target_info(int &amp;text_y, bool fill_with_blank_if_no_target)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03913">ranged.cpp:3913</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a545580558b81b3d44c43b52fc5ff1b77"><div class="ttname"><a href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">target_ui::panel_gun_info</a></div><div class="ttdeci">void panel_gun_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03807">ranged.cpp:3807</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a7d5114b61c688d3810c108986ddc8bf7"><div class="ttname"><a href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">target_ui::draw_controls_list</a></div><div class="ttdeci">void draw_controls_list(int text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03662">ranged.cpp:3662</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a86966228ce7aad77c233058bf1285962"><div class="ttname"><a href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">target_ui::panel_cursor_info</a></div><div class="ttdeci">void panel_cursor_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03770">ranged.cpp:3770</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a9f08c10cac1401587f330fb97f5c2183"><div class="ttname"><a href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">target_ui::panel_recoil</a></div><div class="ttdeci">void panel_recoil(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03837">ranged.cpp:3837</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_acc5b1b952d220d0cd766f9c32ab5eb38"><div class="ttname"><a href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">target_ui::draw_help_notice</a></div><div class="ttdeci">void draw_help_notice()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03648">ranged.cpp:3648</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad4a9c004a4c4cf26ad705174612584ea"><div class="ttname"><a href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">target_ui::panel_turret_list</a></div><div class="ttdeci">void panel_turret_list(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03947">ranged.cpp:3947</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad62889056a10382de6835688498cf20e"><div class="ttname"><a href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">target_ui::draw_window_title</a></div><div class="ttdeci">void draw_window_title()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03641">ranged.cpp:3641</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">target_ui::TargetMode::Throw</a></div><div class="ttdeci">@ Throw</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">target_ui::TargetMode::ThrowBlind</a></div><div class="ttdeci">@ ThrowBlind</div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00067">ncurses_def.cpp:67</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afb5597c87a5847c7d64b878ab3a77d5b"><div class="ttname"><a href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a></div><div class="ttdeci">void mvwputch(const catacurses::window &amp;w, const point &amp;p, nc_color FG, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00590">output.cpp:590</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afea9968fcee47ebca0e45d27099d1c22"><div class="ttname"><a href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a></div><div class="ttdeci">void draw_border(const catacurses::window &amp;w, nc_color border_color, const std::string &amp;title, nc_color title_color)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00688">output.cpp:688</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a0702c7984ec8768691cb9a805616d1de"><div class="ttname"><a href="ranged_8cpp.html#a0702c7984ec8768691cb9a805616d1de">print_aim</a></div><div class="ttdeci">static int print_aim(const target_ui &amp;ui, Character &amp;you, const catacurses::window &amp;w, int line_number, input_context &amp;ctxt, const item &amp;weapon, const tripoint &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01941">ranged.cpp:1941</a></div></div>
<div class="ttc" id="aranged_8cpp_html_aad8bc17f1bcf65d90738d8d06460c91a"><div class="ttname"><a href="ranged_8cpp.html#aad8bc17f1bcf65d90738d8d06460c91a">draw_throw_aim</a></div><div class="ttdeci">static void draw_throw_aim(const target_ui &amp;ui, const Character &amp;you, const catacurses::window &amp;w, int &amp;text_y, input_context &amp;ctxt, const item &amp;weapon, const tripoint &amp;target_pos, bool is_blind_throw)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01967">ranged.cpp:1967</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="ranged_8cpp_source.html#l00291">compact</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="output_8cpp_source.html#l00688">draw_border()</a>, <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03648">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l01967">draw_throw_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03641">draw_window_title()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00099">catacurses::getmaxy()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="item_8cpp_source.html#l11420">item::gun_current_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="output_8cpp_source.html#l00590">mvwputch()</a>, <a class="el" href="ranged_8cpp_source.html#l00296">narrow</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03807">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03837">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03913">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03947">panel_turret_list()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="ranged_8cpp_source.html#l01941">print_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="ranged_8cpp_source.html#l00293">tiny</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00067">catacurses::wnoutrefresh()</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="ad62889056a10382de6835688498cf20e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62889056a10382de6835688498cf20e">&#9670;&nbsp;</a></span>draw_window_title()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_window_title </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03641">3641</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;{</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;    <a class="code" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 2, 0 ), <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot;&lt; &quot;</span> );</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;    <a class="code" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 4, 0 ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 7, <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>, <a class="code" href="classtarget__ui.html#aac34aeff88a5103d4af19a2ad067a677">uitext_title</a>() );</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <a class="code" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot; &gt;&quot;</span> );</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_aac34aeff88a5103d4af19a2ad067a677"><div class="ttname"><a href="classtarget__ui.html#aac34aeff88a5103d4af19a2ad067a677">target_ui::uitext_title</a></div><div class="ttdeci">std::string uitext_title() const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03613">ranged.cpp:3613</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="output_8cpp_source.html#l03290">mvwprintz()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00268">trim_and_print()</a>, <a class="el" href="ranged_8cpp_source.html#l03613">uitext_title()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="output_8cpp_source.html#l03298">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a5898f18e796130f0a4aa0b5099c7a4a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5898f18e796130f0a4aa0b5099c7a4a0">&#9670;&nbsp;</a></span>get_selected_aim_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structaim__type.html">aim_type</a> target_ui::get_selected_aim_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03603">3603</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;{</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> != this-&gt;<a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.cend() ? *( this-&gt;<a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> ) : <a class="code" href="ranged_8cpp.html#aa68fa53ae2a9bc0bb461af10bec001fe">get_default_aim_type</a>();</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;}</div>
<div class="ttc" id="aranged_8cpp_html_aa68fa53ae2a9bc0bb461af10bec001fe"><div class="ttname"><a href="ranged_8cpp.html#aa68fa53ae2a9bc0bb461af10bec001fe">get_default_aim_type</a></div><div class="ttdeci">static aim_type get_default_aim_type()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01578">ranged.cpp:1578</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00259">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00257">aim_types</a>, and <a class="el" href="ranged_8cpp_source.html#l01578">get_default_aim_type()</a>.</p>

</div>
</div>
<a id="a8606ff468dc8ac0fab74c239c455e2f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8606ff468dc8ac0fab74c239c455e2f7">&#9670;&nbsp;</a></span>get_sight_dispersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::get_sight_dispersion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03608">3608</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;{</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a>;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00255">sight_dispersion</a>.</p>

</div>
</div>
<a id="ab290e475e7cd308b447788ec369053b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab290e475e7cd308b447788ec369053b0">&#9670;&nbsp;</a></span>handle_cursor_movement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::handle_cursor_movement </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>skip_redraw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02798">2798</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;{</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    std::optional&lt;tripoint&gt; mouse_pos;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> shift_view_or_cursor = [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; delta ) {</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="keywordflow">if</span>( this-&gt;<a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            this-&gt;<a class="code" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a>( this-&gt;<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a> + delta );</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;            this-&gt;<a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> + delta );</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    };</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160; </div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TIMEOUT&quot;</span> ) {</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;        <span class="comment">// Shift pos and/or view via edge scrolling</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> edge_scroll = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mouse_edge_scrolling_terrain( <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a> );</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <span class="keywordflow">if</span>( edge_scroll == <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            skip_redraw = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> ) {</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                edge_scroll *= 2;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;            }</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;                <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> + edge_scroll );</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                <a class="code" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a> + edge_scroll );</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;            }</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        }</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">const</span> std::optional&lt;tripoint&gt; delta = <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#a0acd9546d02155a0b3a270560f20713a">get_direction</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) ) {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="comment">// Shift view/cursor with directional keys</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        shift_view_or_cursor( *delta );</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SELECT&quot;</span> &amp;&amp;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;               ( mouse_pos = <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#a78a04063aa3ae17a4597ee7dcc584bfa">get_coordinates</a>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;w_terrain, <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;ter_view_p.xy() ) ) ) {</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="comment">// Set pos by clicking with mouse</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        mouse_pos-&gt;z = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( *mouse_pos );</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_UP&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_DOWN&quot;</span> ) {</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <span class="comment">// Shift view/cursor up/down one z level</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> delta = <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>(</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                             0,</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                             0,</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                             <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_UP&quot;</span> ? 1 : -1</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                         );</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        shift_view_or_cursor( delta );</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;NEXT_TARGET&quot;</span> ) {</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        <a class="code" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a>( 1 );</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PREV_TARGET&quot;</span> ) {</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        <a class="code" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a>( -1 );</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CENTER&quot;</span> ) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <a class="code" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a>( <a class="code" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> );</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;            <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        }</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160; </div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">cata_variant_type::tripoint</a></div><div class="ttdeci">@ tripoint</div></div>
<div class="ttc" id="aclassinput__context_html_a0acd9546d02155a0b3a270560f20713a"><div class="ttname"><a href="classinput__context.html#a0acd9546d02155a0b3a270560f20713a">input_context::get_direction</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; get_direction(const std::string &amp;action) const</div><div class="ttdoc">Convert a direction action (UP, DOWN etc) to a delta vector.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00551">input_context.cpp:551</a></div></div>
<div class="ttc" id="aclassinput__context_html_a78a04063aa3ae17a4597ee7dcc584bfa"><div class="ttname"><a href="classinput__context.html#a78a04063aa3ae17a4597ee7dcc584bfa">input_context::get_coordinates</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; get_coordinates(const catacurses::window &amp;capture_win_, const point &amp;offset=point_zero, bool center_cursor=false) const</div><div class="ttdoc">Get the coordinates associated with the last mouse click (if any).</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l01144">input_context.cpp:1144</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a270f72c5bfef55a533d3cd9b3cf57ea0"><div class="ttname"><a href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">target_ui::snap_to_target</a></div><div class="ttdeci">bool snap_to_target</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00285">ranged.cpp:285</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_adc208237a3fd537eb7f50022e4e1b74d"><div class="ttname"><a href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">target_ui::set_view_offset</a></div><div class="ttdeci">void set_view_offset(const tripoint &amp;new_offset) const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03229">ranged.cpp:3229</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af007dd5fcc266ee10d673299ca90c29c"><div class="ttname"><a href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">target_ui::cycle_targets</a></div><div class="ttdeci">void cycle_targets(int direction)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03202">ranged.cpp:3202</a></div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00250">point.h:250</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="ranged_8cpp_source.html#l03202">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="input__context_8cpp_source.html#l01144">input_context::get_coordinates()</a>, <a class="el" href="input__context_8cpp_source.html#l00551">input_context::get_direction()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l00288">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00285">snap_to_target</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>, <a class="el" href="point_8h_source.html#l00250">tripoint_zero</a>, <a class="el" href="character_8h_source.html#l02705">Character::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00185">you</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="af3857720f2059a0a2f23896bc7e808c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3857720f2059a0a2f23896bc7e808c7">&#9670;&nbsp;</a></span>init_window_and_input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::init_window_and_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02716">2716</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;{</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    std::string panel_type = <a class="code" href="classpanel__manager.html#a5acbe61fa6ec7eaf06ea15c80f14ebc6">panel_manager::get_manager</a>().<a class="code" href="classpanel__manager.html#a3f6290efcd5bca21c3cf44762bca2a91">get_current_layout_id</a>();</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <a class="code" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> = ( panel_type == <span class="stringliteral">&quot;compact&quot;</span> || panel_type == <span class="stringliteral">&quot;labels-narrow&quot;</span> );</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160; </div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordtype">int</span> top = 0;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordtype">int</span> width;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="keywordtype">int</span> height;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ) {</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        <span class="comment">// Narrow layout removes the list of controls. This allows us</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        <span class="comment">// to have small window size and not suffer from it.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        width = 34;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        height = 24;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        width = 55;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 41;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;        <a class="code" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a> = <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 28;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        <span class="keywordtype">bool</span> use_whole_sidebar = <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 32;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        <span class="keywordflow">if</span>( use_whole_sidebar ) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <span class="comment">// If we&#39;re extremely short on space, use the whole sidebar.</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            height = <a class="code" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a>;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ) {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            <span class="comment">// Cover up more low-value ui elements if we&#39;re tight on space.</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            height = 28;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;            <span class="comment">// Go all out</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            height = 33;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        }</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    }</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160; </div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> = <a class="code" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( height, width, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( <a class="code" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - width, top ) );</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a> = <a class="code" href="classinput__context.html">input_context</a>( <span class="stringliteral">&quot;TARGET&quot;</span> );</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#aec8e809c4ee9afcde858709e07b5f64b">set_iso</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#a26d796fbe876b21a2d8b85eb5d59195f">register_directions</a>();</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;COORDINATE&quot;</span> );</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SELECT&quot;</span> );</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;FIRE&quot;</span> );</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;NEXT_TARGET&quot;</span> );</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;PREV_TARGET&quot;</span> );</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;CENTER&quot;</span> );</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> );</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> );</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;zoom_out&quot;</span> );</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;zoom_in&quot;</span> );</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_MOVE_CURSOR_VIEW&quot;</span> );</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> &gt; 0 ) {</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;LEVEL_UP&quot;</span> );</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;LEVEL_DOWN&quot;</span> );</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    }</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> || ( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> &amp;&amp;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;            <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() &amp;&amp; <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">get_aim_types</a>( *relevant ).size() &gt; 1 ) ) {</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> );</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;            <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> );</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        }</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    }</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;AIM&quot;</span> );</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;STOPAIM&quot;</span> );</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160; </div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;        <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a> = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a7a8f9ffd035435c9f2777e007059e68d">get_aim_types</a>( *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> );</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structaim__type.html">aim_type</a> &amp;<a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a> : <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a> ) {</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.has_threshold ) {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.action );</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            }</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        }</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin();</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.begin(); it != <a class="code" href="classtarget__ui.html#af8c42cdc72ea5432ee63a1d2ba3f6967">aim_types</a>.end(); ++it ) {</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">preferred_aiming_mode</a> == it-&gt;action ) {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a> = it; <span class="comment">// default to persisted mode if possible</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;            }</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        }</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    }</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> );</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    }</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;}</div>
<div class="ttc" id="acached__options_8cpp_html_a0cb65464a3fa34c1ed5474f5d2d853a7"><div class="ttname"><a href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a></div><div class="ttdeci">int fov_3d_z_range</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00003">cached_options.cpp:3</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8h_source.html#l00039">input_context.h:40</a></div></div>
<div class="ttc" id="aclassinput__context_html_a26d796fbe876b21a2d8b85eb5d59195f"><div class="ttname"><a href="classinput__context.html#a26d796fbe876b21a2d8b85eb5d59195f">input_context::register_directions</a></div><div class="ttdeci">void register_directions()</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00492">input_context.cpp:492</a></div></div>
<div class="ttc" id="aclassinput__context_html_ac66ac124d5c0ac5637b5806f124d428f"><div class="ttname"><a href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">input_context::register_action</a></div><div class="ttdeci">void register_action(const std::string &amp;action_descriptor)</div><div class="ttdoc">Register an action with this input context.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00180">input_context.cpp:180</a></div></div>
<div class="ttc" id="aclassinput__context_html_aec8e809c4ee9afcde858709e07b5f64b"><div class="ttname"><a href="classinput__context.html#aec8e809c4ee9afcde858709e07b5f64b">input_context::set_iso</a></div><div class="ttdeci">void set_iso(bool mode=true)</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l01268">input_context.cpp:1268</a></div></div>
<div class="ttc" id="aclasspanel__manager_html_a3f6290efcd5bca21c3cf44762bca2a91"><div class="ttname"><a href="classpanel__manager.html#a3f6290efcd5bca21c3cf44762bca2a91">panel_manager::get_current_layout_id</a></div><div class="ttdeci">std::string get_current_layout_id() const</div><div class="ttdef"><b>Definition:</b> <a href="panels_8cpp_source.html#l00385">panels.cpp:385</a></div></div>
<div class="ttc" id="aclasspanel__manager_html_a5acbe61fa6ec7eaf06ea15c80f14ebc6"><div class="ttname"><a href="classpanel__manager.html#a5acbe61fa6ec7eaf06ea15c80f14ebc6">panel_manager::get_manager</a></div><div class="ttdeci">static panel_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="panels_8h_source.html#l00132">panels.h:132</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">ot_match_type::type</a></div><div class="ttdeci">@ type</div></div>
<div class="ttc" id="anamespacecatacurses_html_a576fd20080b8f49e27acf97af45b374b"><div class="ttname"><a href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, const point &amp;begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00049">output.cpp:49</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00050">output.cpp:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00259">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00257">aim_types</a>, <a class="el" href="ranged_8cpp_source.html#l00291">compact</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="cached__options_8cpp_source.html#l00003">fov_3d_z_range</a>, <a class="el" href="ranged_8cpp_source.html#l02006">Character::get_aim_types()</a>, <a class="el" href="panels_8cpp_source.html#l00385">panel_manager::get_current_layout_id()</a>, <a class="el" href="panels_8h_source.html#l00132">panel_manager::get_manager()</a>, <a class="el" href="item_8cpp_source.html#l09297">item::is_gun()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00296">narrow</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::newwin()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="avatar_8h_source.html#l00283">avatar::preferred_aiming_mode</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="input__context_8cpp_source.html#l00180">input_context::register_action()</a>, <a class="el" href="input__context_8cpp_source.html#l00492">input_context::register_directions()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="input__context_8cpp_source.html#l01268">input_context::set_iso()</a>, <a class="el" href="output_8cpp_source.html#l00049">TERMX</a>, <a class="el" href="output_8cpp_source.html#l00050">TERMY</a>, <a class="el" href="ranged_8cpp_source.html#l00293">tiny</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="ac352f6aae1cb28945f8115b76fea2eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac352f6aae1cb28945f8115b76fea2eb6">&#9670;&nbsp;</a></span>list_friendlies_in_lof()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a>&lt; <a class="el" href="classCreature.html">Creature</a> &gt; &gt; target_ui::list_friendlies_in_lof </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03166">3166</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;{</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    std::vector&lt;weak_ptr_fast&lt;Creature&gt;&gt; <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Not implemented&quot;</span> );</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    }</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;p : <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> ) {</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        <span class="keywordflow">if</span>( p != <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> &amp;&amp; p != <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            <a class="code" href="classCreature.html">Creature</a> *cr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( p, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( *cr ) ) {</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a> <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = cr-&gt;<a class="code" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">attitude_to</a>( *this-&gt;<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                <span class="keywordflow">if</span>(</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                    ( cr-&gt;<a class="code" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> != <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::Attitude::HOSTILE</a> ) ||</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                    ( !cr-&gt;<a class="code" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> == <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::Attitude::FRIENDLY</a> )</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;                ) {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                    <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.emplace_back( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( *cr ) );</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            }</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        }</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    }</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a906192bd3a5f29a61ee12695e18d2eb5"><div class="ttname"><a href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_avatar=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11397">character.cpp:11397</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a5698402eb4d7bbb013213f11f5768c92"><div class="ttname"><a href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to</a></div><div class="ttdeci">virtual Attitude attitude_to(const Creature &amp;other) const =0</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a></div><div class="ttdeci">Attitude</div><div class="ttdoc">Simplified attitude towards any creature: hostile - hate, want to kill, etc.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00352">creature.h:352</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::Attitude::HOSTILE</a></div><div class="ttdeci">@ HOSTILE</div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::Attitude::FRIENDLY</a></div><div class="ttdeci">@ FRIENDLY</div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00268">creature.h:268</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">static constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01566">magic.cpp:1566</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01566">a</a>, <a class="el" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="classCreature.html#a8a475630b3289c468bd06cf114008217af6a34a956d1ce0a552bf4731b9f9d9c0">Creature::FRIENDLY</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::HOSTILE</a>, <a class="el" href="creature_8h_source.html#l00268">Creature::is_npc()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00236">traj</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03130">prompt_friendlies_in_lof()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="aaf459ec49ad96c44eddeb94d0c22fb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf459ec49ad96c44eddeb94d0c22fb36">&#9670;&nbsp;</a></span>on_range_ammo_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::on_range_ammo_changed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02991">2991</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;{</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a>();</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <a class="code" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a>();</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_ad1e40f0212d403109c8969d7308e493f"><div class="ttname"><a href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">target_ui::update_status</a></div><div class="ttdeci">void update_status()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03067">ranged.cpp:3067</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af17fecf6fc24afc0a1af11ee1447b39a"><div class="ttname"><a href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">target_ui::update_target_list</a></div><div class="ttdeci">void update_target_list()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02997">ranged.cpp:2997</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, and <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>.</p>

</div>
</div>
<a id="a50ee1e0b8e7d1141e4d6c2019fe6df39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ee1e0b8e7d1141e4d6c2019fe6df39">&#9670;&nbsp;</a></span>on_target_accepted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::on_target_accepted </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>harmful</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03959">3959</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;{</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <span class="comment">// TODO: all of this should be moved into on-hit code</span></div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> lt_ptr = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.lock();</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> guy = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( lt_ptr.get() ) ) {</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;        <span class="keywordflow">if</span>( harmful ) {</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;            <span class="keywordflow">if</span>( !guy-&gt;guaranteed_hostile() ) {</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;                <span class="comment">// TODO: get rid of this. Or combine it with effect_hit_by_player</span></div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;                guy-&gt;hit_by_player = <span class="keyword">true</span>; <span class="comment">// used for morale penalty</span></div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;            }</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        }</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( lt_ptr.get() ) ) {</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;        mon-&gt;add_effect( <a class="code" href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a>, 10_minutes );</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    }</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;}</div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a4de2ef4c2e145815427b09adfaa0def5"><div class="ttname"><a href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a></div><div class="ttdeci">static const efftype_id effect_hit_by_player(&quot;hit_by_player&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a86966228ce7aad77c233058bf1285962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86966228ce7aad77c233058bf1285962">&#9670;&nbsp;</a></span>panel_cursor_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_cursor_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03770">3770</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;{</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    std::string label_range;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> == <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        label_range = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range: %d&quot;</span> ), <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;        label_range = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Range: %d/%d&quot;</span> ), <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ), <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    }</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a> &amp;&amp; <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;        <span class="comment">// Since each turret has its own range, highlighting cursor</span></div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;        <span class="comment">// range with red would be misleading</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;        label_range = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( label_range, <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    }</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160; </div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    std::vector&lt;std::string&gt; labels;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    labels.push_back( label_range );</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> &gt; 0 ) {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        labels.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Elevation: %d&quot;</span> ), <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) );</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    }</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    labels.push_back( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Targets: %d&quot;</span> ), <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size() ) );</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160; </div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> col = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <span class="keywordtype">int</span> width = <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordtype">int</span> text_x = 1;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;s : labels ) {</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        <span class="keywordtype">int</span> x_left = width - text_x - 1;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;        <span class="keywordtype">int</span> len = <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( s, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;        <span class="keywordflow">if</span>( len &gt; x_left ) {</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;            text_x = 1;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;            text_y++;</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        }</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( text_x, text_y ), col, col, s );</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        text_x += len + 1; <span class="comment">// 1 for space</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    }</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    text_y++;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">target_ui::Status::OutOfRange</a></div><div class="ttdeci">@ OutOfRange</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="cached__options_8cpp_source.html#l00003">fov_3d_z_range</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00246">targets</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="catacharset_8cpp_source.html#l00104">utf8_width()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a545580558b81b3d44c43b52fc5ff1b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545580558b81b3d44c43b52fc5ff1b77">&#9670;&nbsp;</a></span>panel_gun_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_gun_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03807">3807</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;{</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;    <a class="code" href="classgun__mode.html">gun_mode</a> m = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>();</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    std::string mode_name = m.<a class="code" href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">tname</a>();</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    std::string gunmod_name;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    <span class="keywordflow">if</span>( m.<a class="code" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a> != <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> ) {</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;        <span class="comment">// Gun mode comes from a gunmod, not base gun. Add gunmod&#39;s name</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;        gunmod_name = m-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    }</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    std::string str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Firing mode: &lt;color_cyan&gt;%s%s (%d)&lt;/color&gt;&quot;</span> ),</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;                                     gunmod_name, mode_name, m.<a class="code" href="classgun__mode.html#a0b58020ecc1a637010d13f0ee7c40ef8">qty</a></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;                                   );</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> clr = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> ) {</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        <a class="code" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;OUT OF AMMO&quot;</span> ) );</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> ) {</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;        <span class="keywordtype">bool</span> is_favorite = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a187a2679361c6546be613657dbad3b3f">is_ammo_container</a>() &amp;&amp; <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">first_ammo</a>().<a class="code" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a>;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;        str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( m-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ammo: %s%s (%d/%d)&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ammo: %s%s&quot;</span> ),</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;                             <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( m-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>(), 1 ) ), <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> ),</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                             <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( is_favorite ? <span class="stringliteral">&quot; *&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> ), m-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>(),</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;                             m-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>-&gt;type ) );</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;        <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;        <span class="comment">// Weapon doesn&#39;t use ammunition</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;        text_y++;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;    }</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;}</div>
<div class="ttc" id="aclassgun__mode_html"><div class="ttname"><a href="classgun__mode.html">gun_mode</a></div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00012">gun_mode.h:13</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a0b58020ecc1a637010d13f0ee7c40ef8"><div class="ttname"><a href="classgun__mode.html#a0b58020ecc1a637010d13f0ee7c40ef8">gun_mode::qty</a></div><div class="ttdeci">int qty</div><div class="ttdoc">burst size for is_gun() firearms, or melee range for is_melee() weapons</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00021">gun_mode.h:21</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a583a586a605731dbd36af20553c0e51d"><div class="ttname"><a href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">gun_mode::tname</a></div><div class="ttdeci">std::string tname() const</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00057">gun_mode.h:57</a></div></div>
<div class="ttc" id="aclassitem_html_a05c24ca1052a7a8cb9fd314acdb49f40"><div class="ttname"><a href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">item::is_favorite</a></div><div class="ttdeci">bool is_favorite</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03213">item.h:3213</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aclassitem_html_a187a2679361c6546be613657dbad3b3f"><div class="ttname"><a href="classitem.html#a187a2679361c6546be613657dbad3b3f">item::is_ammo_container</a></div><div class="ttdeci">bool is_ammo_container() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09578">item.cpp:9578</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_ae92e7a0bc79eedb9b113fd7cbda37b57"><div class="ttname"><a href="classitem.html#ae92e7a0bc79eedb9b113fd7cbda37b57">item::first_ammo</a></div><div class="ttdeci">item &amp; first_ammo()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10840">item.cpp:10840</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="astructitype_html_a7cb80d77696cefb42ac6e75756b47e60"><div class="ttname"><a href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">itype::ammo</a></div><div class="ttdeci">cata::value_ptr&lt; islot_ammo &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01212">itype.h:1212</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01420">itype.h:1420</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="itype_8h_source.html#l01212">itype::ammo</a>, <a class="el" href="ranged_8cpp_source.html#l00193">ammo</a>, <a class="el" href="item_8cpp_source.html#l10801">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="itype_8h_source.html#l01420">itype::color</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="item_8cpp_source.html#l10840">item::first_ammo()</a>, <a class="el" href="item_8cpp_source.html#l11420">item::gun_current_mode()</a>, <a class="el" href="item_8cpp_source.html#l09578">item::is_ammo_container()</a>, <a class="el" href="item_8h_source.html#l03213">item::is_favorite</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="output_8cpp_source.html#l03290">mvwprintz()</a>, <a class="el" href="itype_8cpp_source.html#l00095">itype::nname()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="gun__mode_8h_source.html#l00021">gun_mode::qty</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="gun__mode_8h_source.html#l00019">gun_mode::target</a>, <a class="el" href="gun__mode_8h_source.html#l00057">gun_mode::tname()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a9f08c10cac1401587f330fb97f5c2183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f08c10cac1401587f330fb97f5c2183">&#9670;&nbsp;</a></span>panel_recoil()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_recoil </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03837">3837</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;{</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> val = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#aec46a4b513360ef60f6143830bbb711d">recoil_total</a>();</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> min_recoil = <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#afb76ea7bd94d06815e5ab68b520b2a19">sight_dispersion</a>( *you ).second;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> recoil_range = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> - min_recoil;</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    std::string str;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range * 2 / 3 ) ) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;        str = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_red&gt;High&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range / 2 ) ) {</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        str = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_yellow&gt;Medium&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range / 4 ) ) {</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        str = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_light_green&gt;Low&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        str = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_cyan&gt;None&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    }</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Recoil: %s&quot;</span> ), str );</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> clr = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aec46a4b513360ef60f6143830bbb711d"><div class="ttname"><a href="classCharacter.html#aec46a4b513360ef60f6143830bbb711d">Character::recoil_total</a></div><div class="ttdeci">double recoil_total() const</div><div class="ttdoc">Current total maximum recoil penalty from all sources.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12360">character.cpp:12360</a></div></div>
<div class="ttc" id="aclassitem_html_afb76ea7bd94d06815e5ab68b520b2a19"><div class="ttname"><a href="classitem.html#afb76ea7bd94d06815e5ab68b520b2a19">item::sight_dispersion</a></div><div class="ttdeci">std::pair&lt; int, int &gt; sight_dispersion(const Character &amp;character) const</div><div class="ttdoc">Get lowest actual and effective dispersion of either integral or any attached sights for specific cha...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10483">item.cpp:10483</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="character_8cpp_source.html#l12360">Character::recoil_total()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="item_8cpp_source.html#l10483">item::sight_dispersion()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a14b8ebef108aaa7ad8c5176a04f600bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b8ebef108aaa7ad8c5176a04f600bb">&#9670;&nbsp;</a></span>panel_spell_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_spell_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03857">3857</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;{</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    <a class="code" href="classnc__color.html">nc_color</a> clr = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160; </div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    <a class="code" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Casting: %s (Level %u)&quot;</span> ),</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;               <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>(),</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;               <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() );</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> || <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">magic_energy_type::none</a> ) {</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a593232b1e5fc4c81d536724d40322efd">energy_source</a>() == <a class="code" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a> ) {</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;            text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2,</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;                                      clr,</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cost: %s %s&quot;</span> ), <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">energy_cost_string</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ), <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>() );</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;            text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2,</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;                                      clr,</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cost: %s %s (Current: %s)&quot;</span> ), <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">energy_cost_string</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ), <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>(),</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                                      <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a1dc2bd4fd1f177c091237236627bd993">energy_cur_string</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ) );</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        }</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    }</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160; </div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    std::string fail_str;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">no_fail</a> ) {</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        fail_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;0.0 % Failure Chance&quot;</span> ), <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> );</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        fail_str = <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#afe11a0854d38e947a10d02e29f7fd84c">colorized_fail_percent</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    }</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), clr, clr, fail_str );</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160; </div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">aoe</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) &gt; 0 ) {</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        <a class="code" href="classnc__color.html">nc_color</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;        <span class="keyword">const</span> std::string fx = <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>();</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;        <span class="keyword">const</span> std::string aoes = <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a335dc296fd7e166be557e69dc6d9f147">aoe_string</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() );</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;attack&quot;</span> || fx == <span class="stringliteral">&quot;area_pull&quot;</span> || fx == <span class="stringliteral">&quot;area_push&quot;</span> || fx == <span class="stringliteral">&quot;ter_transform&quot;</span> ) {</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160; </div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ab26955ff4600c3a2855e6fe02dc0d216">shape</a>() == <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f">spell_shape::cone</a> ) {</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;                text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;                                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cone Arc: %s degrees&quot;</span> ), aoes );</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ab26955ff4600c3a2855e6fe02dc0d216">shape</a>() == <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a> ) {</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;                                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Line width: %s&quot;</span> ), aoes );</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;                text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Effective Spell Radius: %s%s&quot;</span> ), aoes,</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                                          <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a4bee370b3c3d69be45411856fb2f333f">in_aoe</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) ? <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; WARNING!  IN RANGE&quot;</span> ),</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                                                  <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;            }</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;        }</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    }</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <a class="code" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Damage: %s&quot;</span> ),</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;               <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">damage_string</a>( <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ) );</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160; </div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    text_y += <a class="code" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), <a class="code" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, clr,</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;                              <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a>() );</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassspell_html_a006cfd33c15f732b2463eda1ae0686cc"><div class="ttname"><a href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">spell::get_level</a></div><div class="ttdeci">int get_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01570">magic.cpp:1570</a></div></div>
<div class="ttc" id="aclassspell_html_a0d3f68783edb1af2e111e85f7a1715fa"><div class="ttname"><a href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">spell::energy_cost_string</a></div><div class="ttdeci">std::string energy_cost_string(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01353">magic.cpp:1353</a></div></div>
<div class="ttc" id="aclassspell_html_a1dc2bd4fd1f177c091237236627bd993"><div class="ttname"><a href="classspell.html#a1dc2bd4fd1f177c091237236627bd993">spell::energy_cur_string</a></div><div class="ttdeci">std::string energy_cur_string(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01373">magic.cpp:1373</a></div></div>
<div class="ttc" id="aclassspell_html_a335dc296fd7e166be557e69dc6d9f147"><div class="ttname"><a href="classspell.html#a335dc296fd7e166be557e69dc6d9f147">spell::aoe_string</a></div><div class="ttdeci">std::string aoe_string(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00895">magic.cpp:895</a></div></div>
<div class="ttc" id="aclassspell_html_a4bee370b3c3d69be45411856fb2f333f"><div class="ttname"><a href="classspell.html#a4bee370b3c3d69be45411856fb2f333f">spell::in_aoe</a></div><div class="ttdeci">bool in_aoe(const tripoint &amp;source, const tripoint &amp;target, const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00885">magic.cpp:885</a></div></div>
<div class="ttc" id="aclassspell_html_a593232b1e5fc4c81d536724d40322efd"><div class="ttname"><a href="classspell.html#a593232b1e5fc4c81d536724d40322efd">spell::energy_source</a></div><div class="ttdeci">magic_energy_type energy_source() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01459">magic.cpp:1459</a></div></div>
<div class="ttc" id="aclassspell_html_a63f22c8f5a1730ab6651342e9becbfdc"><div class="ttname"><a href="classspell.html#a63f22c8f5a1730ab6651342e9becbfdc">spell::aoe</a></div><div class="ttdeci">int aoe(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00854">magic.cpp:854</a></div></div>
<div class="ttc" id="aclassspell_html_a731bc4db74246a1e9265ea6f25abd7ad"><div class="ttname"><a href="classspell.html#a731bc4db74246a1e9265ea6f25abd7ad">spell::damage_string</a></div><div class="ttdeci">std::string damage_string(const Character &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00773">magic.cpp:773</a></div></div>
<div class="ttc" id="aclassspell_html_aa34fc8ebf8b820ac055f4b4dd9d78c35"><div class="ttname"><a href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">spell::effect</a></div><div class="ttdeci">std::string effect() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01454">magic.cpp:1454</a></div></div>
<div class="ttc" id="aclassspell_html_ab26955ff4600c3a2855e6fe02dc0d216"><div class="ttname"><a href="classspell.html#ab26955ff4600c3a2855e6fe02dc0d216">spell::shape</a></div><div class="ttdeci">spell_shape shape() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01312">magic.cpp:1312</a></div></div>
<div class="ttc" id="aclassspell_html_abdf34d5415c3fdafcd84fe3a7101bddb"><div class="ttname"><a href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">spell::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01207">magic.cpp:1207</a></div></div>
<div class="ttc" id="aclassspell_html_acc66691f05cd20a085370d79df52bafa"><div class="ttname"><a href="classspell.html#acc66691f05cd20a085370d79df52bafa">spell::description</a></div><div class="ttdeci">std::string description() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01543">magic.cpp:1543</a></div></div>
<div class="ttc" id="aclassspell_html_aeb55e6084337fb199e3cab09260ad916"><div class="ttname"><a href="classspell.html#aeb55e6084337fb199e3cab09260ad916">spell::energy_string</a></div><div class="ttdeci">std::string energy_string() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01337">magic.cpp:1337</a></div></div>
<div class="ttc" id="aclassspell_html_afe11a0854d38e947a10d02e29f7fd84c"><div class="ttname"><a href="classspell.html#afe11a0854d38e947a10d02e29f7fd84c">spell::colorized_fail_percent</a></div><div class="ttdeci">std::string colorized_fail_percent(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01289">magic.cpp:1289</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a146d794c8cb9c23e6ba71727c9a25852"><div class="ttname"><a href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">target_ui::no_fail</a></div><div class="ttdeci">bool no_fail</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00203">ranged.cpp:203</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ac9b01fafb341eaec6c8f85582fd7f32f"><div class="ttname"><a href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">target_ui::no_mana</a></div><div class="ttdeci">bool no_mana</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00205">ranged.cpp:205</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af184a9cc7c52521c129182e2cc643375"><div class="ttname"><a href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">target_ui::casting</a></div><div class="ttdeci">spell * casting</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00201">ranged.cpp:201</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00025">color.h:25</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f">spell_shape::cone</a></div><div class="ttdeci">@ cone</div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">magic_energy_type::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="amagic_8h_html_aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025"><div class="ttname"><a href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">magic_energy_type::hp</a></div><div class="ttdeci">@ hp</div></div>
<div class="ttc" id="aoutput_8cpp_html_ab9659cbe9ec23a2efd813f795cb7fb73"><div class="ttname"><a href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, const point &amp;begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00379">output.cpp:379</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="magic_8cpp_source.html#l00854">spell::aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00895">spell::aoe_string()</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00026">c_light_green</a>, <a class="el" href="color_8h_source.html#l00025">c_light_red</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="ranged_8cpp_source.html#l00201">casting</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="magic_8cpp_source.html#l01289">spell::colorized_fail_percent()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f">cone</a>, <a class="el" href="magic_8cpp_source.html#l00773">spell::damage_string()</a>, <a class="el" href="magic_8cpp_source.html#l01543">spell::description()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="magic_8cpp_source.html#l01454">spell::effect()</a>, <a class="el" href="magic_8cpp_source.html#l01353">spell::energy_cost_string()</a>, <a class="el" href="magic_8cpp_source.html#l01373">spell::energy_cur_string()</a>, <a class="el" href="magic_8cpp_source.html#l01459">spell::energy_source()</a>, <a class="el" href="magic_8cpp_source.html#l01337">spell::energy_string()</a>, <a class="el" href="output_8cpp_source.html#l00379">fold_and_print()</a>, <a class="el" href="magic_8cpp_source.html#l01570">spell::get_level()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00091">catacurses::getmaxx()</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1ad2ccda10db94c2b5d51beed10484c025">hp</a>, <a class="el" href="magic_8cpp_source.html#l00885">spell::in_aoe()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="output_8cpp_source.html#l03290">mvwprintz()</a>, <a class="el" href="magic_8cpp_source.html#l01207">spell::name()</a>, <a class="el" href="ranged_8cpp_source.html#l00203">no_fail</a>, <a class="el" href="ranged_8cpp_source.html#l00205">no_mana</a>, <a class="el" href="magic_8h.html#aecee704c18d07f266d2b907c070bd7a1a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="magic_8cpp_source.html#l01312">spell::shape()</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a4bb70bd52ece44447bec77880106009d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bb70bd52ece44447bec77880106009d">&#9670;&nbsp;</a></span>panel_target_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_target_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fill_with_blank_if_no_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03913">3913</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;{</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <span class="keywordtype">int</span> max_lines = 6;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( *<a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;            <span class="comment">// FIXME: print_info doesn&#39;t really care about line limit</span></div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;            <span class="comment">//        and can always occupy up to 4 of them (or even more?).</span></div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;            <span class="comment">//        To make things consistent, we ask it for 2 lines</span></div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;            <span class="comment">//        and somewhat reliably get 4.</span></div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;            <span class="keywordtype">int</span> fix_for_print_info = max_lines - 2;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;            <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code" href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">print_info</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, fix_for_print_info, 1 );</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            text_y += max_lines;</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;            std::vector&lt;std::string&gt; buf;</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">sees_with_infrared</a>( *<a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code" href="classCreature.html#a1eadbc3e5891d1ff578ac49291e12b66">describe_infrared</a>( buf );</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a9333ab3cffa25b588ec5aa932db8d73d">sees_with_specials</a>( *<a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;                <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code" href="classCreature.html#a6293c17885ef44d613618b4953a1be17">describe_specials</a>( buf );</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;            }</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; static_cast&lt;size_t&gt;( max_lines ); i++, text_y++ ) {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;                <span class="keywordflow">if</span>( i &gt;= buf.size() ) {</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;                }</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;                <a class="code" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y ), buf[i] );</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;            }</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        }</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fill_with_blank_if_no_target ) {</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;        <span class="comment">// Fill with blank lines to prevent other panels from jumping around</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;        <span class="comment">// when the cursor moves.</span></div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        text_y += max_lines;</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;        <span class="comment">// TODO: print info about tile?</span></div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    }</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a9333ab3cffa25b588ec5aa932db8d73d"><div class="ttname"><a href="classCharacter.html#a9333ab3cffa25b588ec5aa932db8d73d">Character::sees_with_specials</a></div><div class="ttdeci">bool sees_with_specials(const Creature &amp;critter) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06064">character.cpp:6064</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9976ba9d9bccdaff264bd834628b97ec"><div class="ttname"><a href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">Character::sees_with_infrared</a></div><div class="ttdeci">bool sees_with_infrared(const Creature &amp;critter) const</div><div class="ttdoc">Check whether the this player can see the other creature with infrared.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10481">character.cpp:10481</a></div></div>
<div class="ttc" id="aclassCreature_html_a1eadbc3e5891d1ff578ac49291e12b66"><div class="ttname"><a href="classCreature.html#a1eadbc3e5891d1ff578ac49291e12b66">Creature::describe_infrared</a></div><div class="ttdeci">void describe_infrared(std::vector&lt; std::string &gt; &amp;buf) const</div><div class="ttdoc">Describe this creature as seen by the avatar via infrared vision.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03199">creature.cpp:3199</a></div></div>
<div class="ttc" id="aclassCreature_html_a6293c17885ef44d613618b4953a1be17"><div class="ttname"><a href="classCreature.html#a6293c17885ef44d613618b4953a1be17">Creature::describe_specials</a></div><div class="ttdeci">void describe_specials(std::vector&lt; std::string &gt; &amp;buf) const</div><div class="ttdoc">Describe this creature as detected by the avatar's special senses.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03227">creature.cpp:3227</a></div></div>
<div class="ttc" id="aclassCreature_html_ab0d27ad3c2c730a3c88ee897e55f344f"><div class="ttname"><a href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">Creature::print_info</a></div><div class="ttdeci">virtual int print_info(const catacurses::window &amp;w, int vStart, int vLines, int column) const =0</div><div class="ttdoc">Write information about this creature.</div></div>
<div class="ttc" id="anamespacecatacurses_html_abde9c157650e464f0a27441d81c84644"><div class="ttname"><a href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">catacurses::mvwprintw</a></div><div class="ttdeci">void mvwprintw(const window &amp;win, const point &amp;p, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00163">ncurses_def.cpp:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l03199">Creature::describe_infrared()</a>, <a class="el" href="creature_8cpp_source.html#l03227">Creature::describe_specials()</a>, <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00163">catacurses::mvwprintw()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">Creature::print_info()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="character_8cpp_source.html#l10481">Character::sees_with_infrared()</a>, <a class="el" href="character_8cpp_source.html#l06064">Character::sees_with_specials()</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="ad4a9c004a4c4cf26ad705174612584ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4a9c004a4c4cf26ad705174612584ea">&#9670;&nbsp;</a></span>panel_turret_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_turret_list </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03947">3947</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;{</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    <a class="code" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turrets in range: %d/%d&quot;</span> ), <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.size(),</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;               <a class="code" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a>-&gt;size() );</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160; </div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> turret_with_lof &amp;it : <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a> ) {</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;        std::string str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, it.turret-&gt;name() );</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        <a class="code" href="classnc__color.html">nc_color</a> clr = <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;        <a class="code" href="output_8cpp.html#a64a769083b78bb93dbb99935b959f3f5">print_colored_text</a>( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    }</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_ae7a7446b4088911709b2eb6a1d3973e5"><div class="ttname"><a href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">target_ui::vturrets</a></div><div class="ttdeci">const std::vector&lt; vehicle_part * &gt; * vturrets</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00197">ranged.cpp:197</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="color_8h_source.html#l00016">c_white</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00163">catacurses::mvwprintw()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a78ee54aa8f813885fe2fe20d232518b9">point</a>, <a class="el" href="output_8cpp_source.html#l00239">print_colored_text()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00278">turrets_in_range</a>, <a class="el" href="ranged_8cpp_source.html#l00197">vturrets</a>, and <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>.</p>

</div>
</div>
<a id="ad2ca7887fd647df92c825e8ee153ff84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ca7887fd647df92c825e8ee153ff84">&#9670;&nbsp;</a></span>prompt_friendlies_in_lof()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::prompt_friendlies_in_lof </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03130">3130</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;{</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Not implemented&quot;</span> );</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    }</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160; </div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    std::vector&lt;weak_ptr_fast&lt;Creature&gt;&gt; in_lof = <a class="code" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a>();</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    std::vector&lt;Creature *&gt; new_in_lof;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast&lt;Creature&gt;</a> &amp;cr_ptr : in_lof ) {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        <a class="code" href="classCreature.html">Creature</a> *cr = cr_ptr.lock().get();</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast&lt;Creature&gt;</a> &amp;cr2_ptr : <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a> ) {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <a class="code" href="classCreature.html">Creature</a> *cr2 = cr2_ptr.lock().get();</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            <span class="keywordflow">if</span>( cr == cr2 ) {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        }</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            new_in_lof.push_back( cr );</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    }</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160; </div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    <span class="keywordflow">if</span>( new_in_lof.empty() ) {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    }</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160; </div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    std::string msg = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There are friendly creatures in line of fire:\n&quot;</span> );</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classCreature.html">Creature</a> *cr : new_in_lof ) {</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        msg += <span class="stringliteral">&quot;  &quot;</span> + cr-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    }</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    msg += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Proceed with the attack?&quot;</span> );</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( msg );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a9835661ff059c7c690bf26075417b9b9"><div class="ttname"><a href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">aim_activity_actor::acceptable_losses</a></div><div class="ttdeci">std::vector&lt; weak_ptr_fast&lt; Creature &gt; &gt; acceptable_losses</div><div class="ttdoc">A friendly creature may enter line of fire during aim-and-shoot, and that generates a warning to proc...</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00075">activity_actor_definitions.h:75</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ac352f6aae1cb28945f8115b76fea2eb6"><div class="ttname"><a href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">target_ui::list_friendlies_in_lof</a></div><div class="ttdeci">std::vector&lt; weak_ptr_fast&lt; Creature &gt; &gt; list_friendlies_in_lof()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03166">ranged.cpp:3166</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af1dc50e9e2195f48ffdb87a1daacc178"><div class="ttname"><a href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">target_ui::activity</a></div><div class="ttdeci">aim_activity_actor * activity</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00207">ranged.cpp:207</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ab8afe5baa726add2054cce385cad8855"><div class="ttname"><a href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a></div><div class="ttdeci">std::weak_ptr&lt; T &gt; weak_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00017">memory_fast.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00075">aim_activity_actor::acceptable_losses</a>, <a class="el" href="ranged_8cpp_source.html#l00207">activity</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, and <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a1403890979533cd6ea29897e3ee81ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1403890979533cd6ea29897e3ee81ab5">&#9670;&nbsp;</a></span>recalc_aim_turning_penalty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::recalc_aim_turning_penalty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
Gun increases the penalty for reorienting aim while below 5 
<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03255">3255</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;{</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <span class="comment">// since we are recalcing recoil dirty the aimm cache</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">aim_cache_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160; </div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        <span class="comment">// We don&#39;t care about invalid situations</span></div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        <a class="code" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    }</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160; </div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keywordtype">double</span> curr_recoil = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a>;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> curr_recoil_pos;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> *lt_ptr = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.lock().get();</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keywordflow">if</span>( lt_ptr ) {</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        curr_recoil_pos = lt_ptr-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a> ) {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        curr_recoil_pos = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a> );</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        curr_recoil_pos = <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    }</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160; </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="keywordflow">if</span>( curr_recoil_pos == <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="comment">// We&#39;re aiming at that point right now, no penalty</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        <a class="code" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = curr_recoil;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( curr_recoil_pos == <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;        <span class="comment">// The player wasn&#39;t aiming anywhere, max it out</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        <a class="code" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        <span class="comment">// Raise it proportionally to how much</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        <span class="comment">// the player has to turn from previous aiming point</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        <span class="comment">// the player loses their aim more quickly if less skilled, normalizing at 5 skill.</span><span class="comment"></span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">        /** @EFFECT_GUN increases the penalty for reorienting aim while below 5 */</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> skill_penalty = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0, 5.0 - <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="ranged_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a> ) );</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> recoil_per_degree = skill_penalty * <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> / 180.0;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::angle</a> angle_curr = <a class="code" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, curr_recoil_pos );</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::angle</a> angle_desired = <a class="code" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::angle</a> phi = <a class="code" href="units__utility_8cpp.html#a1e30191582247e71dd6bca985f5fba36">normalize</a>( angle_curr - angle_desired );</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::angle</a> <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( phi, 360.0_degrees - phi );</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <a class="code" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> =</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;            <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>, curr_recoil + <a class="code" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> ) * recoil_per_degree );</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    }</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6b1320339a403e092d041e141e62e6ba"><div class="ttname"><a href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">Character::last_target_pos</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; last_target_pos</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02762">character.h:2762</a></div></div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassavatar_html_a8344dc1c4b8cd02a9633f3275cc69a2d"><div class="ttname"><a href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">avatar::aim_cache_dirty</a></div><div class="ttdeci">bool aim_cache_dirty</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00381">avatar.h:381</a></div></div>
<div class="ttc" id="aclassmap_html_a426c21f7244ff80a61685a89e9146fec"><div class="ttname"><a href="classmap.html#a426c21f7244ff80a61685a89e9146fec">map::getlocal</a></div><div class="ttdeci">tripoint getlocal(const tripoint &amp;p) const</div><div class="ttdoc">Inverse of getabs.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09635">map.cpp:9635</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aline_8cpp_html_a22f984836636053038f43340f9c50149"><div class="ttname"><a href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a></div><div class="ttdeci">units::angle coord_to_angle(const tripoint &amp;a, const tripoint &amp;b)</div><div class="ttdoc">Calculates the horizontal angle between the lines from (0,0,0) to a and the line from (0,...</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00940">line.cpp:940</a></div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00075">units_fwd.h:75</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9ce2bc1618fa4acf9f9e98effd9f1ae0"><div class="ttname"><a href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">units::to_degrees</a></div><div class="ttdeci">constexpr double to_degrees(const units::angle v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00757">units.h:757</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a3eadead4a9aa7fee079c0b1acce7965e"><div class="ttname"><a href="ranged_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a></div><div class="ttdeci">static const skill_id skill_gun(&quot;gun&quot;)</div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a1e30191582247e71dd6bca985f5fba36"><div class="ttname"><a href="units__utility_8cpp.html#a1e30191582247e71dd6bca985f5fba36">normalize</a></div><div class="ttdeci">units::angle normalize(units::angle a, units::angle mod)</div><div class="ttdoc">Given an angle, add or subtract multiples of 360_degrees until it's in the range [0,...</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00010">units_utility.cpp:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="avatar_8h_source.html#l00381">avatar::aim_cache_dirty</a>, <a class="el" href="line_8cpp_source.html#l00940">coord_to_angle()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="map_8cpp_source.html#l09635">map::getlocal()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, <a class="el" href="character_8h_source.html#l02762">Character::last_target_pos</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="game__constants_8h_source.html#l00137">MAX_RECOIL</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="units__utility_8cpp_source.html#l00010">normalize()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l00265">predicted_recoil</a>, <a class="el" href="character_8h_source.html#l01117">Character::recoil</a>, <a class="el" href="ranged_8cpp.html#a3eadead4a9aa7fee079c0b1acce7965e">skill_gun</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="units_8h_source.html#l00757">units::to_degrees()</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03436">action_drop_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="a11be420f4d6ffd6128dd23d01be6c310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11be420f4d6ffd6128dd23d01be6c310">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> target_ui::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02463">2463</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;{</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; !<a class="code" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> &amp;&amp; !<a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ab2631d5fc9da8a5ec04f7c3757e6c9f5">can_cast</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ) ) {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have enough %s to cast this spell&quot;</span> ),</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                                <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>() );</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <a class="code" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a2c1e0d2a430258c132cbdff827fc8e89">most_accurate_aiming_method_limit</a>( *<a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> );</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    }</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="comment">// Load settings</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = get_option&lt;bool&gt;( <span class="stringliteral">&quot;SNAP_TO_TARGET&quot;</span> );</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <span class="comment">// Due to how cluttered the display would become, disable it by default</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="comment">// unless aiming a single turret.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <a class="code" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = <a class="code" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a>-&gt;size() == 1;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    }</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <a class="code" href="classon__out__of__scope.html">on_out_of_scope</a> cleanup( [&amp;here, &amp;player_character]() {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        here.<a class="code" href="classmap.html#a7481e86917674a912940956719d2eaa3">invalidate_map_cache</a>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>().<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + player_character.<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    } );</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;game::draw_callback_t&gt;</a> target_ui_cb = make_shared_fast&lt;game::draw_callback_t&gt;(</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    [&amp;]() {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <a class="code" href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">draw_terrain_overlay</a>();</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    } );</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;add_draw_callback( target_ui_cb );</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <a class="code" href="classui__adaptor.html">ui_adaptor</a> <a class="code" href="namespaceui.html">ui</a>;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_screen_resize( [&amp;]( <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        <a class="code" href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">init_window_and_input</a>();</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <a class="code" href="namespaceui.html">ui</a>.position_from_window( <a class="code" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    } );</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.mark_resize();</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="namespaceui.html">ui</a>.on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <a class="code" href="classtarget__ui.html#a93a478e95d201324548329f39a087208">draw_ui_window</a>();</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    } );</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="comment">// Handle multi-turn aiming</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    std::string <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordtype">bool</span> attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordtype">bool</span> reentered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="keywordtype">bool</span> resume_critter = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp; !<a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">first_turn</a> ) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="comment">// We were in this UI during previous turn...</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        reentered = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        std::string act_data = <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">action</a>;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="keywordflow">if</span>( act_data == <span class="stringliteral">&quot;AIM&quot;</span> ) {</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="comment">// ...and ran out of moves while aiming.</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            <span class="comment">// ...and selected &#39;aim and shoot&#39;, but ran out of moves.</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            <span class="comment">// So, skip retrieving input and go straight to the action.</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = act_data;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            attack_was_confirmed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="comment">// Load state to keep the ui consistent across turns</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">snap_to_target</a>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">shifting_view</a>;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        resume_critter = <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aiming_at_critter</a>;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    }</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">// Initialize cursor position</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <a class="code" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a>();</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a> &amp;&amp; <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a14fa61e3a66db776b55f75a6dba7f67d">abort_if_no_targets</a> &amp;&amp; <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.empty() ) {</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="comment">// this branch is taken when already shot once and re-entered</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <span class="comment">// aiming, if no targets are available we want to abort so</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        <span class="comment">// players don&#39;t arrive at aiming ui with nothing to shoot at.</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aborted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    }</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> initial_dst = <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordflow">if</span>( reentered ) {</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">try_reacquire_target</a>( resume_critter, initial_dst ) ) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            <span class="comment">// Target lost</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        }</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        initial_dst = <a class="code" href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">choose_initial_target</a>();</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <a class="code" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( initial_dst );</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> != initial_dst ) {</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <span class="comment">// Our target moved out of range</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> &gt; <a class="code" href="ranged_8cpp.html#ae134db696195500e4ff1835e6f784aca">AIF_DURATION_LIMIT</a> ) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="comment">// Break long (potentially infinite) aim-and-fire loop.</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            <span class="comment">// May happen if e.g. avatar tries to get &#39;precise&#39; shot while being</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            <span class="comment">// attacked by multiple zombies, which triggers dodges and corresponding aim loss.</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">first_turn</a> &amp;&amp; !<a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() &amp;&amp; !<a class="code" href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">prompt_friendlies_in_lof</a>() ) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <span class="comment">// A friendly creature moved into line of fire during aim-and-shoot,</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <span class="comment">// and player decided to stop aiming</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a>.clear();</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() ) {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> = 0;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> += 1;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        }</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    }</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160; </div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <span class="comment">// Event loop!</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">ExitCode</a> loop_exit_code;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    std::string timed_out_action;</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="keywordtype">bool</span> skip_redraw = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keywordflow">for</span>( ;; <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear() ) {</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <span class="keywordflow">if</span>( !skip_redraw ) {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;            <a class="code" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        }</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        skip_redraw = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160; </div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        <span class="comment">// Wait for user input (or use value retrieved from activity)</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() ) {</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1a90272dda245ae1fb3cf197e91a8689dc">timeout</a> = get_option&lt;int&gt;( <span class="stringliteral">&quot;EDGE_SCROLL&quot;</span> );</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code" href="classinput__context.html#a43aa2fcd42cabfd04056def8986bc927">handle_input</a>( <a class="code" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1a90272dda245ae1fb3cf197e91a8689dc">timeout</a> );</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        }</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160; </div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        <span class="comment">// If an aiming mode is selected, use &quot;*_SHOT&quot; instead of &quot;FIRE&quot;</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp; <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;FIRE&quot;</span> &amp;&amp; <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a>-&gt;has_threshold ) {</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code" href="classtarget__ui.html#a607a068ce45aeed17810fd8ca433e5a3">aim_mode</a>-&gt;action;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        }</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        <span class="comment">// Handle received input</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">handle_cursor_movement</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, skip_redraw ) ) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> ) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            <a class="code" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a>();</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> ) {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;            <a class="code" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = !<a class="code" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a>;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_MOVE_CURSOR_VIEW&quot;</span> ) {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                <a class="code" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a>();</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = !<a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;zoom_in&quot;</span> ) {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zoom_in();</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mark_main_ui_adaptor_resize();</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;zoom_out&quot;</span> ) {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zoom_out();</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mark_main_ui_adaptor_resize();</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;            loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">ExitCode::Abort</a>;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> ) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#af1178602a3d2f7e37c9dbebf22dd29a3">action_switch_mode</a>() ) {</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">ExitCode::Abort</a>;</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> ) {</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">action_switch_ammo</a>() ) {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">ExitCode::Reload</a>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            }</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;FIRE&quot;</span> ) {</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;            }</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            <span class="keywordtype">bool</span> can_skip_confirm = <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( player_character ) &lt;= 0;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;            <span class="keywordflow">if</span>( !can_skip_confirm &amp;&amp; !<a class="code" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a>() ) {</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            }</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            <a class="code" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;AIM&quot;</span> ) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            }</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            <span class="comment">// No confirm_non_enemy_target here because we have not initiated the firing.</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            <span class="comment">// Aiming can be stopped / aborted at any time.</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160; </div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">action_aim</a>() ) {</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                timed_out_action = <span class="stringliteral">&quot;AIM&quot;</span>;</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            }</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;STOPAIM&quot;</span> ) {</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            }</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160; </div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            <a class="code" href="classtarget__ui.html#a4924621b242d0938e9a03fcefdfa6a9d">action_drop_aim</a>();</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;AIMED_SHOT&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CAREFUL_SHOT&quot;</span> || <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PRECISE_SHOT&quot;</span> ) {</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            }</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            <span class="comment">// This action basically means &quot;Fire&quot; as well; the actual firing may be delayed</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;            <span class="comment">// through aiming, but there is usually no means to abort it. Therefore we query now</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            <span class="keywordflow">if</span>( !attack_was_confirmed &amp;&amp; !<a class="code" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a>() ) {</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            }</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">action_aim_and_shoot</a>( <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) ) {</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                timed_out_action = <a class="code" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                loop_exit_code = <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>;</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    } <span class="comment">// for(;;)</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160; </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <span class="keywordflow">switch</span>( loop_exit_code ) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">ExitCode::Abort</a>: {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || ( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> &amp;&amp; <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a> ) ) {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aborted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            }</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        }</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>: {</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e">TargetMode::SelectOnly</a> ) {</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                <span class="keywordtype">bool</span> harmful = !( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">damage</a>( player_character ) &lt;= 0 );</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                <a class="code" href="classtarget__ui.html#a50ee1e0b8e7d1141e4d6c2019fe6df39">on_target_accepted</a>( harmful );</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            }</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>: {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;            <span class="comment">// We&#39;ve ran out of moves, save UI state</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a> = <a class="code" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a>();</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">action</a> = timed_out_action;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">snap_to_target</a> = <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a>;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">shifting_view</a> = <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a>;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aiming_at_critter</a> = !!<a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        }</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">ExitCode::Reload</a>: {</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aborted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            <a class="code" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code" href="classaim__activity__actor.html#a5a65a1ad1452654bdf0ce924ba8dcf53">reload_requested</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        }</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    }</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2c1e0d2a430258c132cbdff827fc8e89"><div class="ttname"><a href="classCharacter.html#a2c1e0d2a430258c132cbdff827fc8e89">Character::most_accurate_aiming_method_limit</a></div><div class="ttdeci">int most_accurate_aiming_method_limit(const item &amp;gun) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01017">character.cpp:1017</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a064e415f122aefc25c29b9d3eee4fa4e"><div class="ttname"><a href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aim_activity_actor::aborted</a></div><div class="ttdeci">bool aborted</div><div class="ttdoc">Target UI requested to abort aiming.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00061">activity_actor_definitions.h:61</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a14fa61e3a66db776b55f75a6dba7f67d"><div class="ttname"><a href="classaim__activity__actor.html#a14fa61e3a66db776b55f75a6dba7f67d">aim_activity_actor::abort_if_no_targets</a></div><div class="ttdeci">bool abort_if_no_targets</div><div class="ttdoc">if true abort if no targets are available when re-entering aiming ui after shooting</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00063">activity_actor_definitions.h:63</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a289353e8cf59d999c2e3db1db5d89f12"><div class="ttname"><a href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">aim_activity_actor::snap_to_target</a></div><div class="ttdeci">bool snap_to_target</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00055">activity_actor_definitions.h:55</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a59cdab2e147fa7c2d2d46b9440083e05"><div class="ttname"><a href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">aim_activity_actor::first_turn</a></div><div class="ttdeci">bool first_turn</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00051">activity_actor_definitions.h:51</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a5a65a1ad1452654bdf0ce924ba8dcf53"><div class="ttname"><a href="classaim__activity__actor.html#a5a65a1ad1452654bdf0ce924ba8dcf53">aim_activity_actor::reload_requested</a></div><div class="ttdeci">bool reload_requested</div><div class="ttdoc">Target UI requested to abort aiming and reload weapon Implies aborted = true.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00068">activity_actor_definitions.h:68</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a5e4630c6a7a1630c7d93714d221ed78e"><div class="ttname"><a href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aim_activity_actor::aif_duration</a></div><div class="ttdeci">int aif_duration</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00053">activity_actor_definitions.h:53</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a8f9b4001d182a0fc1ab4fdd8bd5b1507"><div class="ttname"><a href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aim_activity_actor::aiming_at_critter</a></div><div class="ttdeci">bool aiming_at_critter</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00054">activity_actor_definitions.h:54</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_ab7b696d1eb458e907dbccf99a5dd54aa"><div class="ttname"><a href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">aim_activity_actor::shifting_view</a></div><div class="ttdeci">bool shifting_view</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00058">activity_actor_definitions.h:58</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_ae287f1e168ac9ea8cfc16f0f55d323ef"><div class="ttname"><a href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">aim_activity_actor::action</a></div><div class="ttdeci">std::string action</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00052">activity_actor_definitions.h:52</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclassinput__context_html_a43aa2fcd42cabfd04056def8986bc927"><div class="ttname"><a href="classinput__context.html#a43aa2fcd42cabfd04056def8986bc927">input_context::handle_input</a></div><div class="ttdeci">const std::string &amp; handle_input()</div><div class="ttdoc">Handles input and returns the next action in the queue.</div><div class="ttdef"><b>Definition:</b> <a href="input__context_8cpp_source.html#l00427">input_context.cpp:427</a></div></div>
<div class="ttc" id="aclassmap_html_a7481e86917674a912940956719d2eaa3"><div class="ttname"><a href="classmap.html#a7481e86917674a912940956719d2eaa3">map::invalidate_map_cache</a></div><div class="ttdeci">void invalidate_map_cache(int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00375">map.cpp:375</a></div></div>
<div class="ttc" id="aclasson__out__of__scope_html"><div class="ttname"><a href="classon__out__of__scope.html">on_out_of_scope</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__scope__helpers_8h_source.html#l00007">cata_scope_helpers.h:8</a></div></div>
<div class="ttc" id="aclassspell_html_ab2631d5fc9da8a5ec04f7c3757e6c9f5"><div class="ttname"><a href="classspell.html#ab2631d5fc9da8a5ec04f7c3757e6c9f5">spell::can_cast</a></div><div class="ttdeci">bool can_cast(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01093">magic.cpp:1093</a></div></div>
<div class="ttc" id="aclassspell_html_ad572a7c2376afa1bd84ca8ab9603ed2a"><div class="ttname"><a href="classspell.html#ad572a7c2376afa1bd84ca8ab9603ed2a">spell::damage</a></div><div class="ttdeci">int damage(const Creature &amp;caster) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00705">magic.cpp:705</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1591b490e9f8d48547b108ae481f982e"><div class="ttname"><a href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">target_ui::choose_initial_target</a></div><div class="ttdeci">tripoint choose_initial_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03011">ranged.cpp:3011</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a15d523ae27fc66cbff7adac5e9fa91dd"><div class="ttname"><a href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">target_ui::draw_terrain_overlay</a></div><div class="ttdeci">void draw_terrain_overlay()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03476">ranged.cpp:3476</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a21275763803a2ce0d00e02dc0076a36c"><div class="ttname"><a href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">target_ui::action_aim_and_shoot</a></div><div class="ttdeci">bool action_aim_and_shoot(const std::string &amp;action)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03446">ranged.cpp:3446</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a4924621b242d0938e9a03fcefdfa6a9d"><div class="ttname"><a href="classtarget__ui.html#a4924621b242d0938e9a03fcefdfa6a9d">target_ui::action_drop_aim</a></div><div class="ttdeci">bool action_drop_aim()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03436">ranged.cpp:3436</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a50ee1e0b8e7d1141e4d6c2019fe6df39"><div class="ttname"><a href="classtarget__ui.html#a50ee1e0b8e7d1141e4d6c2019fe6df39">target_ui::on_target_accepted</a></div><div class="ttdeci">void on_target_accepted(bool harmful) const</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03959">ranged.cpp:3959</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a5c885fc69abc2190e1850b7f23601ac2"><div class="ttname"><a href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">target_ui::try_reacquire_target</a></div><div class="ttdeci">bool try_reacquire_target(bool critter, tripoint &amp;new_dst)</div><div class="ttdoc">Try to re-acquire target for aim-and-fire.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03039">ranged.cpp:3039</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a6c0468c35f79fb501be1a3a50b4081d4"><div class="ttname"><a href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">target_ui::action_aim</a></div><div class="ttdeci">bool action_aim()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03421">ranged.cpp:3421</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a779bc721417ab8ee4a6b103d8a1030f5"><div class="ttname"><a href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">target_ui::toggle_snap_to_target</a></div><div class="ttdeci">void toggle_snap_to_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03191">ranged.cpp:3191</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a93a478e95d201324548329f39a087208"><div class="ttname"><a href="classtarget__ui.html#a93a478e95d201324548329f39a087208">target_ui::draw_ui_window</a></div><div class="ttdeci">void draw_ui_window()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03551">ranged.cpp:3551</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a97d244cde8cae12d0266daf6fc083014"><div class="ttname"><a href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">target_ui::confirm_non_enemy_target</a></div><div class="ttdeci">bool confirm_non_enemy_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03115">ranged.cpp:3115</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">target_ui::ExitCode</a></div><div class="ttdeci">ExitCode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00209">ranged.cpp:209</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">target_ui::ExitCode::Reload</a></div><div class="ttdeci">@ Reload</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">target_ui::ExitCode::Abort</a></div><div class="ttdeci">@ Abort</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">target_ui::ExitCode::Fire</a></div><div class="ttdeci">@ Fire</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">target_ui::ExitCode::Timeout</a></div><div class="ttdeci">@ Timeout</div></div>
<div class="ttc" id="aclasstarget__ui_html_ab290e475e7cd308b447788ec369053b0"><div class="ttname"><a href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">target_ui::handle_cursor_movement</a></div><div class="ttdeci">bool handle_cursor_movement(const std::string &amp;action, bool &amp;skip_redraw)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02798">ranged.cpp:2798</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_acbdcdc8f41dd8bcbf887b12d96c9948d"><div class="ttname"><a href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">target_ui::action_switch_ammo</a></div><div class="ttdeci">bool action_switch_ammo()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03401">ranged.cpp:3401</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad2ca7887fd647df92c825e8ee153ff84"><div class="ttname"><a href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">target_ui::prompt_friendlies_in_lof</a></div><div class="ttdeci">bool prompt_friendlies_in_lof()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03130">ranged.cpp:3130</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e">target_ui::TargetMode::SelectOnly</a></div><div class="ttdeci">@ SelectOnly</div></div>
<div class="ttc" id="aclasstarget__ui_html_af1178602a3d2f7e37c9dbebf22dd29a3"><div class="ttname"><a href="classtarget__ui.html#af1178602a3d2f7e37c9dbebf22dd29a3">target_ui::action_switch_mode</a></div><div class="ttdeci">bool action_switch_mode()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03304">ranged.cpp:3304</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af3857720f2059a0a2f23896bc7e808c7"><div class="ttname"><a href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">target_ui::init_window_and_input</a></div><div class="ttdeci">void init_window_and_input()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02716">ranged.cpp:2716</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00074">ui_manager.h:75</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="ainput__enums_8h_html_af2ddbd916f900586e2430bb9e0bb9ea1a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1a90272dda245ae1fb3cf197e91a8689dc">input_event_t::timeout</a></div><div class="ttdeci">@ timeout</div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00504">ui_manager.cpp:504</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00024">overmap_ui.h:25</a></div></div>
<div class="ttc" id="aranged_8cpp_html_ae134db696195500e4ff1835e6f784aca"><div class="ttname"><a href="ranged_8cpp.html#ae134db696195500e4ff1835e6f784aca">AIF_DURATION_LIMIT</a></div><div class="ttdeci">static constexpr int AIF_DURATION_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00155">ranged.cpp:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">Abort</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00063">aim_activity_actor::abort_if_no_targets</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00061">aim_activity_actor::aborted</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00075">aim_activity_actor::acceptable_losses</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00052">aim_activity_actor::action</a>, <a class="el" href="dialogue_8h_source.html#l00043">action</a>, <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03436">action_drop_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l00207">activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00053">aim_activity_actor::aif_duration</a>, <a class="el" href="ranged_8cpp_source.html#l00155">AIF_DURATION_LIMIT</a>, <a class="el" href="ranged_8cpp_source.html#l00259">aim_mode</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00054">aim_activity_actor::aiming_at_critter</a>, <a class="el" href="magic_8cpp_source.html#l01093">spell::can_cast()</a>, <a class="el" href="ranged_8cpp_source.html#l00201">casting</a>, <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00251">ctxt</a>, <a class="el" href="magic_8cpp_source.html#l00705">spell::damage()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l00282">draw_turret_lines</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="magic_8cpp_source.html#l01337">spell::energy_string()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00051">aim_activity_actor::first_turn</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="input__context_8cpp_source.html#l00427">input_context::handle_input()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, <a class="el" href="map_8cpp_source.html#l00375">map::invalidate_map_cache()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="character_8cpp_source.html#l01017">Character::most_accurate_aiming_method_limit()</a>, <a class="el" href="ranged_8cpp_source.html#l00205">no_mana</a>, <a class="el" href="ranged_8cpp_source.html#l03959">on_target_accepted()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03130">prompt_friendlies_in_lof()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="ui__manager_8cpp_source.html#l00504">ui_manager::redraw()</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">Reload</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00068">aim_activity_actor::reload_requested</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997afd3508f354d330de0aaa9207ba65bf4e">SelectOnly</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00058">aim_activity_actor::shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00288">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00255">sight_dispersion</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00055">aim_activity_actor::snap_to_target</a>, <a class="el" href="ranged_8cpp_source.html#l00285">snap_to_target</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="ranged_8cpp_source.html#l00246">targets</a>, <a class="el" href="input__enums_8h.html#af2ddbd916f900586e2430bb9e0bb9ea1a90272dda245ae1fb3cf197e91a8689dc">timeout</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">Timeout</a>, <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00236">traj</a>, <a class="el" href="ranged_8cpp_source.html#l03039">try_reacquire_target()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>, <a class="el" href="character_8h_source.html#l02705">Character::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00197">vturrets</a>, <a class="el" href="ranged_8cpp_source.html#l00249">w_target</a>, <a class="el" href="ranged_8cpp_source.html#l00185">you</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

</div>
</div>
<a id="a3ead422f4a78394c13bc3f4c6c953f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ead422f4a78394c13bc3f4c6c953f42">&#9670;&nbsp;</a></span>set_cursor_pos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::set_cursor_pos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02857">2857</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;{</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> == new_pos ) {</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    }</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> &amp;&amp; new_pos != <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        <span class="comment">// range == 0, no sense in moving cursor</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    }</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160; </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="comment">// Make sure new position is valid or find a closest valid position</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    std::vector&lt;tripoint&gt; new_traj;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> valid_pos = new_pos;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">if</span>( new_pos != <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        <span class="comment">// On Z axis, make sure we do not exceed map boundaries</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        valid_pos.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( valid_pos.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>, <a class="code" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> );</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <span class="comment">// Or current view range</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        valid_pos.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( valid_pos.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a>, <a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> ) + <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160; </div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        new_traj = here.<a class="code" href="classmap.html#a0f73359be972a030063b4e84f770275e">find_clear_path</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, valid_pos );</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> == 1 ) {</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            <span class="comment">// We should always be able to hit adjacent squares</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, valid_pos ) &gt; 1 ) {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                valid_pos = new_traj[0];</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;            }</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="line_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a> ) {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( valid_pos ) &gt; <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                <span class="comment">// Find the farthest point that is still in range</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = new_traj.size(); i &gt; 0; i-- ) {</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( new_traj[i - 1] ) &lt;= <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                        valid_pos = new_traj[i - 1];</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                    }</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160; </div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                <span class="comment">// FIXME: due to a bug in map::find_clear_path (#39693),</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                <span class="comment">//        returned trajectory is invalid in some cases.</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                <span class="comment">//        This bandaid stops us from exceeding range,</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                <span class="comment">//        but does not fix the issue.</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( valid_pos ) &gt; <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Exceeded allowed range!&quot;</span> );</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                    valid_pos = <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                }</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;            }</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> delta = valid_pos - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            valid_pos = <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> + <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>(</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                            <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, -<a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ),</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                            <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, -<a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ),</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                            <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> )</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                        );</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        }</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        new_traj.push_back( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">if</span>( valid_pos == <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="comment">// We don&#39;t need to move the cursor after all</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_pos == valid_pos ) {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="comment">// We can reuse new_traj</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> = valid_pos;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> = new_traj;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> = valid_pos;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <a class="code" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> = here.<a class="code" href="classmap.html#a0f73359be972a030063b4e84f770275e">find_clear_path</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    }</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160; </div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <a class="code" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    }</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160; </div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="comment">// Make player&#39;s sprite flip to face the current target</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <a class="code" href="structpoint.html">point</a> d( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() );</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_tileset_isometric() ) {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <span class="keywordflow">if</span>( d.x &gt; 0 ) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;            <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d.x &lt; 0 ) {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        }</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordflow">if</span>( d.x &gt;= 0 &amp;&amp; d.y &gt;= 0 ) {</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;            <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a>;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <span class="keywordflow">if</span>( d.y &lt;= 0 &amp;&amp; d.x &lt;= 0 ) {</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;            <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a>;</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        }</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160; </div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="comment">// Cache creature under cursor</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> != <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <a class="code" href="classCreature.html">Creature</a> *cr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) ) {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;            <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = cr;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;            <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    }</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="comment">// Update mode-specific stuff</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <a class="code" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a>();</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        <span class="keywordflow">switch</span>( <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#ab26955ff4600c3a2855e6fe02dc0d216">shape</a>() ) {</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca9e1b93b20faf4a4798c106c0db299473">spell_shape::blast</a>:</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;                <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code" href="namespacespell__effect.html#a9e71032270fa0320ba243005a7b50a5f">spell_effect::spell_effect_blast</a>(</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                                <a class="code" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a>( *<a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ), <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f">spell_shape::cone</a>:</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code" href="namespacespell__effect.html#a7c43bcc07956a3d9de33c074d6507544">spell_effect::spell_effect_cone</a>(</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;                                <a class="code" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a>( *<a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ), <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">spell_shape::line</a>:</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;                <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code" href="namespacespell__effect.html#a867e7cee9db7df16c4334db9c0637501">spell_effect::spell_effect_line</a>(</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;                                <a class="code" href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a>( *<a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>() ), <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                <a class="code" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a>.clear();</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s does not have valid spell shape&quot;</span>, <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">id</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        }</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        <a class="code" href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">update_turrets_in_range</a>();</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    }</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160; </div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="comment">// Update UI controls &amp; colors</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <a class="code" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a>();</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160; </div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="aclassCreature_html_a21b8fbeb525a28615eec6a6c22beff44"><div class="ttname"><a href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">Creature::facing</a></div><div class="ttdeci">FacingDirection facing</div><div class="ttdoc">return the direction the creature is facing, for sdl horizontal flip</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00303">creature.h:303</a></div></div>
<div class="ttc" id="aclassmap_html_a0f73359be972a030063b4e84f770275e"><div class="ttname"><a href="classmap.html#a0f73359be972a030063b4e84f770275e">map::find_clear_path</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; find_clear_path(const tripoint &amp;source, const tripoint &amp;destination) const</div><div class="ttdoc">Iteratively tries Bresenham lines with different biases until it finds a clear line or decides there ...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l07616">map.cpp:7616</a></div></div>
<div class="ttc" id="aclassspell_html_a7d44bdaf4c9faff438e6b30973d68615"><div class="ttname"><a href="classspell.html#a7d44bdaf4c9faff438e6b30973d68615">spell::id</a></div><div class="ttdeci">spell_id id() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00662">magic.cpp:662</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa955ab0c7cfbd2c8c5d439f5aed608ef"><div class="ttname"><a href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">target_ui::update_turrets_in_range</a></div><div class="ttdeci">void update_turrets_in_range()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03243">ranged.cpp:3243</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a9d7b6c83d7cf9846d5f1b56e02d88268"><div class="ttname"><a href="coordinates_8h.html#a9d7b6c83d7cf9846d5f1b56e02d88268">square_dist</a></div><div class="ttdeci">int square_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00755">coordinates.h:755</a></div></div>
<div class="ttc" id="acreature_8h_html_ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403"><div class="ttname"><a href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">FacingDirection::RIGHT</a></div><div class="ttdeci">@ RIGHT</div></div>
<div class="ttc" id="acreature_8h_html_ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758"><div class="ttname"><a href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">FacingDirection::LEFT</a></div><div class="ttdeci">@ LEFT</div></div>
<div class="ttc" id="agame__constants_8h_html_a3984a9476d1edc78e4e7b886a08d4d4b"><div class="ttname"><a href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a></div><div class="ttdeci">constexpr int OVERMAP_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00075">game_constants.h:75</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00073">game_constants.h:73</a></div></div>
<div class="ttc" id="aline_8cpp_html_a40b9d88f6d95e646490329d0071ec931"><div class="ttname"><a href="line_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a></div><div class="ttdeci">bool trigdist</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00018">line.cpp:18</a></div></div>
<div class="ttc" id="amagic_8h_html_a0d790bdb16f7b815ef552e2220820e9ca9e1b93b20faf4a4798c106c0db299473"><div class="ttname"><a href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca9e1b93b20faf4a4798c106c0db299473">spell_shape::blast</a></div><div class="ttdeci">@ blast</div></div>
<div class="ttc" id="anamespacespell__effect_html_a7c43bcc07956a3d9de33c074d6507544"><div class="ttname"><a href="namespacespell__effect.html#a7c43bcc07956a3d9de33c074d6507544">spell_effect::spell_effect_cone</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_cone(const override_parameters &amp;params, const tripoint &amp;source, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00278">magic_spell_effect.cpp:278</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_a867e7cee9db7df16c4334db9c0637501"><div class="ttname"><a href="namespacespell__effect.html#a867e7cee9db7df16c4334db9c0637501">spell_effect::spell_effect_line</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_line(const override_parameters &amp;params, const tripoint &amp;source, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00295">magic_spell_effect.cpp:295</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_a9e71032270fa0320ba243005a7b50a5f"><div class="ttname"><a href="namespacespell__effect.html#a9e71032270fa0320ba243005a7b50a5f">spell_effect::spell_effect_blast</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_blast(const override_parameters &amp;params, const tripoint &amp;, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00225">magic_spell_effect.cpp:225</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="astructspell__effect_1_1override__parameters_html"><div class="ttname"><a href="structspell__effect_1_1override__parameters.html">spell_effect::override_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00738">magic.h:738</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00202">point.h:202</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca9e1b93b20faf4a4798c106c0db299473">blast</a>, <a class="el" href="ranged_8cpp_source.html#l00201">casting</a>, <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca29d6fc960c94b5a330f850284e75ab1f">cone</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="creature_8h_source.html#l00303">Creature::facing</a>, <a class="el" href="map_8cpp_source.html#l07616">map::find_clear_path()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="cached__options_8cpp_source.html#l00003">fov_3d_z_range</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="magic_8cpp_source.html#l00662">spell::id()</a>, <a class="el" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a684d325a7303f52e64011467ff5c5758">LEFT</a>, <a class="el" href="magic_8h.html#a0d790bdb16f7b815ef552e2220820e9ca6438c669e0d0de98e6929c2cc0fac474">line</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="game__constants_8h_source.html#l00073">OVERMAP_DEPTH</a>, <a class="el" href="game__constants_8h_source.html#l00075">OVERMAP_HEIGHT</a>, <a class="el" href="ranged_8cpp_source.html#l01935">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="creature_8h.html#ab97a871dbf59ff8692908611795f7642a21507b40c80068eda19865706fdc2403">RIGHT</a>, <a class="el" href="ranged_8cpp_source.html#l03229">set_view_offset()</a>, <a class="el" href="magic_8cpp_source.html#l01312">spell::shape()</a>, <a class="el" href="ranged_8cpp_source.html#l00285">snap_to_target</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00269">spell_aoe</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00225">spell_effect::spell_effect_blast()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00278">spell_effect::spell_effect_cone()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00295">spell_effect::spell_effect_line()</a>, <a class="el" href="coordinates_8h_source.html#l00755">square_dist()</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="ranged_8cpp_source.html#l00236">traj</a>, <a class="el" href="line_8cpp_source.html#l00018">trigdist</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a45a310b5cb289ed0e3a8870a1991736e">tripoint</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00024">point::y</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, <a class="el" href="ranged_8cpp_source.html#l00185">you</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03202">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="aa53ba52da62f64baa29130908cf8637b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53ba52da62f64baa29130908cf8637b">&#9670;&nbsp;</a></span>set_last_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::set_last_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03102">3102</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;{</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.has_value() || <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.value() != <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getabs( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) ) {</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classavatar.html#a8344dc1c4b8cd02a9633f3275cc69a2d">aim_cache_dirty</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    }</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a> = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( *<a class="code" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.reset();</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    }</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09614">map.cpp:9614</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="avatar_8h_source.html#l00381">avatar::aim_cache_dirty</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00244">dst_critter</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09614">map::getabs()</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, <a class="el" href="character_8h_source.html#l02762">Character::last_target_pos</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="adc208237a3fd537eb7f50022e4e1b74d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc208237a3fd537eb7f50022e4e1b74d">&#9670;&nbsp;</a></span>set_view_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::set_view_offset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_offset</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03229">3229</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> new_( new_offset.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( new_offset.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a>, <a class="code" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> ) );</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    new_.z = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( new_.z + <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>, <a class="code" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> ) - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160; </div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keywordtype">bool</span> changed_z = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != new_.z;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a> = new_;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="keywordflow">if</span>( changed_z ) {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        <span class="comment">// We need to do a bunch of cache updates since we&#39;re</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        <span class="comment">// looking at a different z-level.</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a7481e86917674a912940956719d2eaa3">invalidate_map_cache</a>( new_.z );</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    }</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00221">clamp()</a>, <a class="el" href="cached__options_8cpp_source.html#l00003">fov_3d_z_range</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l00375">map::invalidate_map_cache()</a>, <a class="el" href="game__constants_8h_source.html#l00073">OVERMAP_DEPTH</a>, <a class="el" href="game__constants_8h_source.html#l00075">OVERMAP_HEIGHT</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="character_8h_source.html#l02705">Character::view_offset</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, <a class="el" href="ranged_8cpp_source.html#l00185">you</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="a779bc721417ab8ee4a6b103d8a1030f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779bc721417ab8ee4a6b103d8a1030f5">&#9670;&nbsp;</a></span>toggle_snap_to_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::toggle_snap_to_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03191">3191</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;{</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <a class="code" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;        <span class="comment">// Keep current view offset</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;        <a class="code" href="classtarget__ui.html#adc208237a3fd537eb7f50022e4e1b74d">set_view_offset</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> - <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    }</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = !<a class="code" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a>;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="ranged_8cpp_source.html#l03229">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l00288">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00285">snap_to_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00238">src</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a5c885fc69abc2190e1850b7f23601ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c885fc69abc2190e1850b7f23601ac2">&#9670;&nbsp;</a></span>try_reacquire_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::try_reacquire_target </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>critter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to re-acquire target for aim-and-fire. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">critter</td><td>whether were aiming at a critter, or a tile </td></tr>
    <tr><td class="paramname">new_dst</td><td>where to move aim cursor (if e.g. critter moved) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03039">3039</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;{</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keywordflow">if</span>( critter ) {</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;        <span class="comment">// Try to re-acquire the creature</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;        <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> cr = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a15520bb61b6da84f9bd753fa43dcbabc">last_target</a>.lock();</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;        <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) &amp;&amp; <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( cr-&gt;pos() ) &lt;= <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;            new_dst = cr-&gt;pos();</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        }</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    }</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160; </div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a>.has_value() ) {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        <span class="comment">// This shouldn&#39;t happen</span></div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    }</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="comment">// Try to re-acquire target tile or tile where the target creature used to be</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> local_lt = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a6b1320339a403e092d041e141e62e6ba">last_target_pos</a> );</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( local_lt ) &lt;= <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        new_dst = local_lt;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        <span class="comment">// Abort aiming if a creature moved in</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        <span class="keywordflow">return</span> !critter &amp;&amp; !<a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( local_lt, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    }</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="comment">// We moved out of range</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09635">map::getlocal()</a>, <a class="el" href="character_8h_source.html#l02761">Character::last_target</a>, <a class="el" href="character_8h_source.html#l02762">Character::last_target_pos</a>, <a class="el" href="ranged_8cpp_source.html#l01935">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a7f3d575ebc23cdd3a199a8c17579a225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f3d575ebc23cdd3a199a8c17579a225">&#9670;&nbsp;</a></span>uitext_fire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string target_ui::uitext_fire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03628">3628</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;{</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a> || <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a> ) {</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to throw&quot;</span>, <span class="stringliteral">&quot;to throw&quot;</span> ).<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> ) {</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to attack&quot;</span>, <span class="stringliteral">&quot;to attack&quot;</span> ).<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to cast the spell&quot;</span>, <span class="stringliteral">&quot;to cast&quot;</span> ).<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to fire&quot;</span>, <span class="stringliteral">&quot;to fire&quot;</span> ).<a class="code" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    }</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;}</div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00294">translation.cpp:294</a></div></div>
<div class="ttc" id="atranslation_8cpp_html_a176e288c640c6506a86330cb10fbe13a"><div class="ttname"><a href="translation_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a></div><div class="ttdeci">translation to_translation(const std::string &amp;raw)</div><div class="ttdoc">Shorthands for translation::to_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8cpp_source.html#l00420">translation.cpp:420</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="translation_8cpp_source.html#l00420">to_translation()</a>, and <a class="el" href="translation_8cpp_source.html#l00294">translation::translated()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>.</p>

</div>
</div>
<a id="aac34aeff88a5103d4af19a2ad067a677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac34aeff88a5103d4af19a2ad067a677">&#9670;&nbsp;</a></span>uitext_title()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string target_ui::uitext_title </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03613">3613</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;{</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    <span class="keywordflow">switch</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> ) {</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a>:</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a>:</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Firing %s&quot;</span> ), <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a>:</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Throwing %s&quot;</span> ), <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a>:</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Blind throwing %s&quot;</span> ), <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set target&quot;</span> );</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    }</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03641">draw_window_title()</a>.</p>

</div>
</div>
<a id="ad1e40f0212d403109c8969d7308e493f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e40f0212d403109c8969d7308e493f">&#9670;&nbsp;</a></span>update_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03067">3067</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;{</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    std::vector&lt;std::string&gt; msgbuf;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.empty() ) { <span class="comment">// NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        <span class="comment">// None of the turrets are in range</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a>;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;               ( !<a class="code" href="ranged_8cpp.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), msgbuf, <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) ||</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;                 !<a class="code" href="ranged_8cpp.html#a207024a5d17769a16bfc8a7a434d72cd">gunmode_checks_weapon</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), msgbuf, <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) )</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;             ) { <span class="comment">// NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <span class="comment">// Selected gun mode is empty</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;        <span class="comment">// TODO: it might be some other error, but that&#39;s highly unlikely to happen, so a catch-all &#39;Out of ammo&#39; is fine</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> &amp;&amp; ( <a class="code" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() != <a class="code" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a> ||</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;               !<a class="code" href="ranged_8cpp.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a>( *<a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>(), msgbuf, <a class="code" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) ) ) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a>;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> == <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &amp;&amp; !( <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;                                    <a class="code" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">spell_target::self</a> ) ) ) {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <span class="comment">// TODO: consider allowing targeting yourself with turrets</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">Status::BadTarget</a>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &gt; <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        <span class="comment">// We&#39;re out of range. This can happen if we switch from long-ranged</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        <span class="comment">// gun mode to short-ranged. We can, of course, move the cursor into range automatically,</span></div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <span class="comment">// but that would be rude. Instead, wait for directional keys/etc. and *then* move the cursor.</span></div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a>;</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        <a class="code" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a>;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    }</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;}</div>
<div class="ttc" id="aclassspell_html_adc1aee8fd855fce28ebb1dcc39e37a12"><div class="ttname"><a href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">spell::is_valid_target</a></div><div class="ttdeci">bool is_valid_target(const Creature &amp;caster, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01474">magic.cpp:1474</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">target_ui::Status::BadTarget</a></div><div class="ttdeci">@ BadTarget</div></div>
<div class="ttc" id="aclassturret__data_html_a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7"><div class="ttname"><a href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a></div><div class="ttdeci">@ ready</div></div>
<div class="ttc" id="aclassturret__data_html_a585d18f2c33116bc1e9028210fccadbc"><div class="ttname"><a href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">turret_data::query</a></div><div class="ttdeci">status query() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00236">turret.cpp:236</a></div></div>
<div class="ttc" id="amagic_8h_html_a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63"><div class="ttname"><a href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">spell_target::self</a></div><div class="ttdeci">@ self</div></div>
<div class="ttc" id="aranged_8cpp_html_a18e93476c9d626924c31cf14193305b3"><div class="ttname"><a href="ranged_8cpp.html#a18e93476c9d626924c31cf14193305b3">gunmode_checks_common</a></div><div class="ttdeci">bool gunmode_checks_common(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Common checks for gunmode (when firing a weapon / manually firing turret)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03975">ranged.cpp:3975</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a207024a5d17769a16bfc8a7a434d72cd"><div class="ttname"><a href="ranged_8cpp.html#a207024a5d17769a16bfc8a7a434d72cd">gunmode_checks_weapon</a></div><div class="ttdeci">bool gunmode_checks_weapon(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Various checks for gunmode when firing a weapon.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l04010">ranged.cpp:4010</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">BadTarget</a>, <a class="el" href="ranged_8cpp_source.html#l00201">casting</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="item_8cpp_source.html#l11420">item::gun_current_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03975">gunmode_checks_common()</a>, <a class="el" href="ranged_8cpp_source.html#l04010">gunmode_checks_weapon()</a>, <a class="el" href="magic_8cpp_source.html#l01474">spell::is_valid_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>, <a class="el" href="turret_8cpp_source.html#l00236">turret_data::query()</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="classturret__data.html#a3a01d6f45d3f23cf6b5a32c5e17440b7ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>, <a class="el" href="ranged_8cpp_source.html#l00189">relevant</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a590f53e8699817c6fa498cc11a4cbe63">self</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="ranged_8cpp_source.html#l00233">status</a>, <a class="el" href="ranged_8cpp_source.html#l00195">turret</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00278">turrets_in_range</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02991">on_range_ammo_changed()</a>, and <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="af17fecf6fc24afc0a1af11ee1447b39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af17fecf6fc24afc0a1af11ee1447b39a">&#9670;&nbsp;</a></span>update_target_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_target_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02997">2997</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;{</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> == 0 ) {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.clear();</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    }</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <span class="comment">// Get targets in range and sort them by distance (targets[0] is the closest)</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a> = <a class="code" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code" href="classCharacter.html#a7a1a328276dae4040ef931b5976d04ba">get_targetable_creatures</a>( <a class="code" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> );</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    std::sort( <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), <a class="code" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end(), [&amp;]( <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * lhs, <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> * rhs ) {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        return rl_dist_exact( lhs-&gt;pos(), you-&gt;pos() ) &lt; rl_dist_exact( rhs-&gt;pos(), you-&gt;pos() );</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    } );</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7a1a328276dae4040ef931b5976d04ba"><div class="ttname"><a href="classCharacter.html#a7a1a328276dae4040ef931b5976d04ba">Character::get_targetable_creatures</a></div><div class="ttdeci">std::vector&lt; Creature * &gt; get_targetable_creatures(int range, bool melee) const</div><div class="ttdoc">As above, but includes all creatures the player can detect well enough to target with ranged weapons,...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10505">character.cpp:10505</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l10505">Character::get_targetable_creatures()</a>, <a class="el" href="ranged_8cpp_source.html#l00187">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00191">range</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="ranged_8cpp_source.html#l00246">targets</a>, and <a class="el" href="ranged_8cpp_source.html#l00185">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02991">on_range_ammo_changed()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="aa955ab0c7cfbd2c8c5d439f5aed608ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa955ab0c7cfbd2c8c5d439f5aed608ef">&#9670;&nbsp;</a></span>update_turrets_in_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_turrets_in_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03243">3243</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;{</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.clear();</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="structvehicle__part.html">vehicle_part</a> *t : *<a class="code" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a> ) {</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <a class="code" href="classturret__data.html">turret_data</a> td = <a class="code" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a>-&gt;<a class="code" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t );</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="keywordflow">if</span>( td.<a class="code" href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">in_range</a>( <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) ) {</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> = <a class="code" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a>-&gt;<a class="code" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *t );</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <a class="code" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.push_back( {t, <a class="code" href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a>( <a class="code" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> )} );</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        }</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;}</div>
<div class="ttc" id="aclasstarget__ui_html_ac2200f3f97047dbc1e1cf14bae201c34"><div class="ttname"><a href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">target_ui::veh</a></div><div class="ttdeci">vehicle * veh</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00199">ranged.cpp:199</a></div></div>
<div class="ttc" id="aclassturret__data_html"><div class="ttname"><a href="classturret__data.html">turret_data</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00583">vehicle.h:584</a></div></div>
<div class="ttc" id="aclassturret__data_html_ad8b9e08531f26de34c61d5821ca69d7c"><div class="ttname"><a href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">turret_data::in_range</a></div><div class="ttdeci">bool in_range(const tripoint &amp;target) const</div><div class="ttdoc">Check if target is in range of this turret (considers current ammo) Assumes this turret's status is '...</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00202">turret.cpp:202</a></div></div>
<div class="ttc" id="aclassvehicle_html_accfab81af66cd979bdfff4c39e5a3a8e"><div class="ttname"><a href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">vehicle::turret_query</a></div><div class="ttdeci">turret_data turret_query(vehicle_part &amp;pt)</div><div class="ttdoc">Get firing data for a turret.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00060">turret.cpp:60</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae8132c34a1ea24866889e6e599796adc"><div class="ttname"><a href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">vehicle::global_part_pos3</a></div><div class="ttdeci">tripoint global_part_pos3(const int &amp;index) const</div><div class="ttdoc">Get the coordinates of the studied part of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03442">vehicle.cpp:3442</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a31847b31c6ef002e9d16afd7fd0005e3"><div class="ttname"><a href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &amp;&amp;RhsInBounds &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00798">coordinates.h:798</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00254">vehicle.h:254</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00241">dst</a>, <a class="el" href="vehicle_8cpp_source.html#l03442">vehicle::global_part_pos3()</a>, <a class="el" href="turret_8cpp_source.html#l00202">turret_data::in_range()</a>, <a class="el" href="coordinates_8h_source.html#l00798">line_to()</a>, <a class="el" href="ranged_8cpp_source.html#l00238">src</a>, <a class="el" href="turret_8cpp_source.html#l00060">vehicle::turret_query()</a>, <a class="el" href="ranged_8cpp_source.html#l00278">turrets_in_range</a>, <a class="el" href="ranged_8cpp_source.html#l00199">veh</a>, and <a class="el" href="ranged_8cpp_source.html#l00197">vturrets</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af1dc50e9e2195f48ffdb87a1daacc178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1dc50e9e2195f48ffdb87a1daacc178">&#9670;&nbsp;</a></span>activity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classaim__activity__actor.html">aim_activity_actor</a>* target_ui::activity = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00207">207</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03130">prompt_friendlies_in_lof()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a607a068ce45aeed17810fd8ca433e5a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607a068ce45aeed17810fd8ca433e5a3">&#9670;&nbsp;</a></span>aim_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structaim__type.html">aim_type</a>&gt;::iterator target_ui::aim_mode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00259">259</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03603">get_selected_aim_type()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="af8c42cdc72ea5432ee63a1d2ba3f6967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8c42cdc72ea5432ee63a1d2ba3f6967">&#9670;&nbsp;</a></span>aim_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structaim__type.html">aim_type</a>&gt; target_ui::aim_types</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00257">257</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03603">get_selected_aim_type()</a>, and <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>.</p>

</div>
</div>
<a id="ae5ae79a739fcab56301077b8802355ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ae79a739fcab56301077b8802355ce">&#9670;&nbsp;</a></span>ammo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structitype.html">itype</a>* target_ui::ammo = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00193">193</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l03807">panel_gun_info()</a>.</p>

</div>
</div>
<a id="af184a9cc7c52521c129182e2cc643375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af184a9cc7c52521c129182e2cc643375">&#9670;&nbsp;</a></span>casting</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspell.html">spell</a>* target_ui::casting = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00201">201</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>.</p>

</div>
</div>
<a id="a34b69263e28fa4472b51104ec1d2e6f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b69263e28fa4472b51104ec1d2e6f0">&#9670;&nbsp;</a></span>compact</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::compact = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00291">291</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a4e5479e5dd0b2883bbf2927c489ddb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e5479e5dd0b2883bbf2927c489ddb6a">&#9670;&nbsp;</a></span>ctxt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinput__context.html">input_context</a> target_ui::ctxt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00251">251</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03648">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a63ac73585a9794e93d181362f7473b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ac73585a9794e93d181362f7473b50">&#9670;&nbsp;</a></span>draw_turret_lines</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::draw_turret_lines = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00282">282</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a954878eb50877ad7fc1902a28beb2539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954878eb50877ad7fc1902a28beb2539">&#9670;&nbsp;</a></span>dst</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::dst</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00241">241</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="a362df365f84b306e2ff14edf099a1000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a362df365f84b306e2ff14edf099a1000">&#9670;&nbsp;</a></span>dst_critter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCreature.html">Creature</a>* target_ui::dst_critter = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00244">244</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03202">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l03913">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>.</p>

</div>
</div>
<a id="aeee1b122468e838a1f62691b2cd43396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee1b122468e838a1f62691b2cd43396">&#9670;&nbsp;</a></span>mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a> target_ui::mode = <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00187">187</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03130">prompt_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03628">uitext_fire()</a>, <a class="el" href="ranged_8cpp_source.html#l03613">uitext_title()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>.</p>

</div>
</div>
<a id="a4b525b1e2a39f4748409b97e8984947b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b525b1e2a39f4748409b97e8984947b">&#9670;&nbsp;</a></span>narrow</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::narrow = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00296">296</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03648">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a146d794c8cb9c23e6ba71727c9a25852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146d794c8cb9c23e6ba71727c9a25852">&#9670;&nbsp;</a></span>no_fail</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::no_fail = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00203">203</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>.</p>

</div>
</div>
<a id="ac9b01fafb341eaec6c8f85582fd7f32f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b01fafb341eaec6c8f85582fd7f32f">&#9670;&nbsp;</a></span>no_mana</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::no_mana = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00205">205</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="ac0a5aad7e60b30082e7ec2ff97f8f6d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a5aad7e60b30082e7ec2ff97f8f6d4">&#9670;&nbsp;</a></span>predicted_recoil</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double target_ui::predicted_recoil = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00265">265</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03299">apply_aim_turning_penalty()</a>, and <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>.</p>

</div>
</div>
<a id="aa3c8602522a1638d3af42b10f1750e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c8602522a1638d3af42b10f1750e26">&#9670;&nbsp;</a></span>range</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::range = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00191">191</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03039">try_reacquire_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>.</p>

</div>
</div>
<a id="a190a8193e6454bb636bc8f5288b4a27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a190a8193e6454bb636bc8f5288b4a27b">&#9670;&nbsp;</a></span>relevant</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem.html">item</a>* target_ui::relevant = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00189">189</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03807">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03837">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l03613">uitext_title()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>.</p>

</div>
</div>
<a id="a122323ec4c1e72c291e76643ccfd3fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122323ec4c1e72c291e76643ccfd3fde">&#9670;&nbsp;</a></span>shifting_view</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::shifting_view = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00288">288</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="a2e6f4c9c827b91ce215a1a7b32a4affb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e6f4c9c827b91ce215a1a7b32a4affb">&#9670;&nbsp;</a></span>sight_dispersion</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::sight_dispersion = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00255">255</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03608">get_sight_dispersion()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a270f72c5bfef55a533d3cd9b3cf57ea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270f72c5bfef55a533d3cd9b3cf57ea0">&#9670;&nbsp;</a></span>snap_to_target</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::snap_to_target = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00285">285</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="ab855722580bd112ef0590b5a9b4f3556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab855722580bd112ef0590b5a9b4f3556">&#9670;&nbsp;</a></span>spell_aoe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; target_ui::spell_aoe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00269">269</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, and <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="afe4c97cc5abb0ce402bd9e89411e1778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4c97cc5abb0ce402bd9e89411e1778">&#9670;&nbsp;</a></span>src</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::src</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00238">238</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03115">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03097">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l03191">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="abb6df512b8b794227dc5f1d9afe17bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6df512b8b794227dc5f1d9afe17bf1">&#9670;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a> target_ui::status = <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00233">233</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03807">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>.</p>

</div>
</div>
<a id="a281f9ea6ae900ff7991e457f1d34b8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281f9ea6ae900ff7991e457f1d34b8f6">&#9670;&nbsp;</a></span>targets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classCreature.html">Creature</a> *&gt; target_ui::targets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00246">246</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03202">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>.</p>

</div>
</div>
<a id="a1e6534092ef1b213639575c914030eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6534092ef1b213639575c914030eb1">&#9670;&nbsp;</a></span>tiny</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::tiny = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00293">293</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a542ba80f542b41ea6a81f1ab8b14b521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a542ba80f542b41ea6a81f1ab8b14b521">&#9670;&nbsp;</a></span>traj</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; target_ui::traj</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00236">236</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="ae9e40adc2b44c3cd4cdbcc62dd8a1e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">&#9670;&nbsp;</a></span>turret</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a>* target_ui::turret = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00195">195</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03401">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>.</p>

</div>
</div>
<a id="ae8d4216fdc3f48ee8f6dd5f22c33d9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">&#9670;&nbsp;</a></span>turrets_in_range</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a>&gt; target_ui::turrets_in_range</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00278">278</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03947">panel_turret_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="ac2200f3f97047dbc1e1cf14bae201c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2200f3f97047dbc1e1cf14bae201c34">&#9670;&nbsp;</a></span>veh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a>* target_ui::veh = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00199">199</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="ae7a7446b4088911709b2eb6a1d3973e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7a7446b4088911709b2eb6a1d3973e5">&#9670;&nbsp;</a></span>vturrets</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="structvehicle__part.html">vehicle_part</a> *&gt;* target_ui::vturrets = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00197">197</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03947">panel_turret_list()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l03243">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="a246e6aa2bb08bb724c44571e8451ac30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a246e6aa2bb08bb724c44571e8451ac30">&#9670;&nbsp;</a></span>w_target</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> target_ui::w_target</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00249">249</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03648">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l03641">draw_window_title()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03770">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03807">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03837">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03913">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03947">panel_turret_list()</a>, and <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>.</p>

</div>
</div>
<a id="a83609daab209a1d8e462919182014d33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83609daab209a1d8e462919182014d33">&#9670;&nbsp;</a></span>you</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classavatar.html">avatar</a>* target_ui::you</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00185">185</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03421">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03446">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03436">action_drop_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03304">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03299">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l03011">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03662">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03476">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03551">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02798">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02716">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03166">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03959">on_target_accepted()</a>, <a class="el" href="ranged_8cpp_source.html#l03837">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03857">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03913">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03255">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02463">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02857">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03102">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l03039">try_reacquire_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03067">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02997">update_target_list()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="ranged_8cpp_source.html">ranged.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:44 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
