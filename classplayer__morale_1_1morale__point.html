<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: player_morale::morale_point Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classplayer__morale.html">player_morale</a></li><li class="navelem"><a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classplayer__morale_1_1morale__point-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">player_morale::morale_point Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acdc15b7a8bcecfdeaa5c68a002fc7840"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#acdc15b7a8bcecfdeaa5c68a002fc7840">morale_point</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;<a class="el" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>=<a class="el" href="morale__types_8h.html#a410bc3642aea9b68979f71136829df3b">MORALE_NULL</a>, const <a class="el" href="structitype.html">itype</a> *<a class="el" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a>=nullptr, int <a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>=0, int max_bonus=0, <a class="el" href="classtime__duration.html">time_duration</a> <a class="el" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>=6_minutes, <a class="el" href="classtime__duration.html">time_duration</a> <a class="el" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>=3_minutes, bool capped=false)</td></tr>
<tr class="separator:acdc15b7a8bcecfdeaa5c68a002fc7840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac87e7364881feac74b893e2cc8f91ddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ac87e7364881feac74b893e2cc8f91ddb">deserialize</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo)</td></tr>
<tr class="separator:ac87e7364881feac74b893e2cc8f91ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63c7a703db4c64e104cf511df07e746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ae63c7a703db4c64e104cf511df07e746">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;json) const</td></tr>
<tr class="separator:ae63c7a703db4c64e104cf511df07e746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67df996b30c476463cab5e8480637e7c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a67df996b30c476463cab5e8480637e7c">get_name</a> () const</td></tr>
<tr class="separator:a67df996b30c476463cab5e8480637e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a> () const</td></tr>
<tr class="separator:a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d0648bd3dbc7ab850f0b8056442bcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a67d0648bd3dbc7ab850f0b8056442bcd">get_net_bonus</a> (const <a class="el" href="structmorale__mult.html">morale_mult</a> &amp;mult) const</td></tr>
<tr class="separator:a67d0648bd3dbc7ab850f0b8056442bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab777c9c77b12098e64d09625e1f1f082"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ab777c9c77b12098e64d09625e1f1f082">is_expired</a> () const</td></tr>
<tr class="separator:ab777c9c77b12098e64d09625e1f1f082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e16ced4b22de1de4359528ac24fa06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a> () const</td></tr>
<tr class="separator:a74e16ced4b22de1de4359528ac24fa06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb75a63e2d88668655f1bf28515eab96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#adb75a63e2d88668655f1bf28515eab96">matches</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;_type, const <a class="el" href="structitype.html">itype</a> *_item_type=nullptr) const</td></tr>
<tr class="separator:adb75a63e2d88668655f1bf28515eab96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6d229f81bc75e89c7b53c90a9a6b5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#abf6d229f81bc75e89c7b53c90a9a6b5c">matches</a> (const <a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a> &amp;mp) const</td></tr>
<tr class="separator:abf6d229f81bc75e89c7b53c90a9a6b5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9122249feb7739f785fa7b4ab35dbb8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a9122249feb7739f785fa7b4ab35dbb8e">add</a> (int new_bonus, int new_max_bonus, <a class="el" href="classtime__duration.html">time_duration</a> new_duration, <a class="el" href="classtime__duration.html">time_duration</a> new_decay_start, bool new_cap)</td></tr>
<tr class="separator:a9122249feb7739f785fa7b4ab35dbb8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c641179a67888920e146a46dda5778"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a14c641179a67888920e146a46dda5778">decay</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;ticks=1_turns)</td></tr>
<tr class="separator:a14c641179a67888920e146a46dda5778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e615da345ee07df4d42a22e88a39c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a34e615da345ee07df4d42a22e88a39c8">set_percent_contribution</a> (double contribution)</td></tr>
<tr class="separator:a34e615da345ee07df4d42a22e88a39c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade62c18d4c3c5fca64a0fa4a5f2434d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ade62c18d4c3c5fca64a0fa4a5f2434d3">get_percent_contribution</a> () const</td></tr>
<tr class="separator:ade62c18d4c3c5fca64a0fa4a5f2434d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6ef866718bc7fe64a156cb6da468a38e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;current_time, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;new_time, bool same_sign) const</td></tr>
<tr class="memdesc:a6ef866718bc7fe64a156cb6da468a38e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns either new_time or remaining time (which one is greater).  <a href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">More...</a><br /></td></tr>
<tr class="separator:a6ef866718bc7fe64a156cb6da468a38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a> (int <a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>, int max_bonus, bool capped) const</td></tr>
<tr class="memdesc:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns normalized bonus if either max_bonus != 0 or capped == true.  <a href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">More...</a><br /></td></tr>
<tr class="separator:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac24a31282a48c2b42be125e3027728f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a></td></tr>
<tr class="separator:ac24a31282a48c2b42be125e3027728f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83df5d832ab48efc8e8c8be4b2fc91db"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structitype.html">itype</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a></td></tr>
<tr class="separator:a83df5d832ab48efc8e8c8be4b2fc91db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d20f5a114b00574c674f8df34869c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> = 0</td></tr>
<tr class="separator:ac5d20f5a114b00574c674f8df34869c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d34b7300cb045d9d48c21d844ddda0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = 0_turns</td></tr>
<tr class="separator:a46d34b7300cb045d9d48c21d844ddda0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23775252200fae27e8e9b50c058009b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = 0_turns</td></tr>
<tr class="separator:a23775252200fae27e8e9b50c058009b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e68a4b48ad3c60b49c93e0e72edc77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> = 0_turns</td></tr>
<tr class="separator:a99e68a4b48ad3c60b49c93e0e72edc77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab454dabbae99a91652b1e0962ac4eeab"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a> = 0</td></tr>
<tr class="memdesc:ab454dabbae99a91652b1e0962ac4eeab"><td class="mdescLeft">&#160;</td><td class="mdescRight">this point's percent contribution to the total positive or total negative morale effect  <a href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">More...</a><br /></td></tr>
<tr class="separator:ab454dabbae99a91652b1e0962ac4eeab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00077">77</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acdc15b7a8bcecfdeaa5c68a002fc7840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdc15b7a8bcecfdeaa5c68a002fc7840">&#9670;&nbsp;</a></span>morale_point()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">player_morale::morale_point::morale_point </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="morale__types_8h.html#a410bc3642aea9b68979f71136829df3b">MORALE_NULL</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> *&#160;</td>
          <td class="paramname"><em>item_type</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bonus</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_bonus</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em> = <code>6_minutes</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>decay_start</em> = <code>3_minutes</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>capped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00080">80</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                          :</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> ),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> ),</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>, max_bonus, capped ) ),</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>, 0_turns ) ),</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>, 0_turns ) ),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a>( 0_turns ) {}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a20f5a91bffc2df46c97f0a370a0e4bd5"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">player_morale::morale_point::normalize_bonus</a></div><div class="ttdeci">int normalize_bonus(int bonus, int max_bonus, bool capped) const</div><div class="ttdoc">Returns normalized bonus if either max_bonus != 0 or capped == true.</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00220">morale.cpp:220</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a23775252200fae27e8e9b50c058009b0"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">player_morale::morale_point::decay_start</a></div><div class="ttdeci">time_duration decay_start</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00121">morale.h:121</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a46d34b7300cb045d9d48c21d844ddda0"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">player_morale::morale_point::duration</a></div><div class="ttdeci">time_duration duration</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00120">morale.h:120</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a83df5d832ab48efc8e8c8be4b2fc91db"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">player_morale::morale_point::item_type</a></div><div class="ttdeci">const itype * item_type</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00117">morale.h:117</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a99e68a4b48ad3c60b49c93e0e72edc77"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">player_morale::morale_point::age</a></div><div class="ttdeci">time_duration age</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00122">morale.h:122</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ac24a31282a48c2b42be125e3027728f4"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">player_morale::morale_point::type</a></div><div class="ttdeci">morale_type type</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00116">morale.h:116</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ac5d20f5a114b00574c674f8df34869c1"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">player_morale::morale_point::bonus</a></div><div class="ttdeci">int bonus</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00119">morale.h:119</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9122249feb7739f785fa7b4ab35dbb8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9122249feb7739f785fa7b4ab35dbb8e">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_max_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>new_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>new_decay_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>new_cap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00161">161</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    new_duration = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0_turns, new_duration );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    new_decay_start = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0_turns, new_decay_start );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> same_sign = ( <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> &gt; 0 ) == ( new_max_bonus &gt; 0 );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span>( new_cap || new_duration == 0_turns ) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = new_duration;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = new_decay_start;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = <a class="code" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>, new_duration, same_sign );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = <a class="code" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>, new_decay_start, same_sign );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">int</span> sqrt_of_sum_of_squares;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span>( new_cap || !same_sign ) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">// If the morale bonus is capped apply the full bonus</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// This is because some morale types build up slowly to a cap over time (e.g. MORALE_WET)</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// If the new bonus is opposing apply the full bonus</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        sqrt_of_sum_of_squares = <a class="code" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>() + new_bonus;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">// Otherwise use the sqrt of sum of squares to nerf stacking</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        sqrt_of_sum_of_squares = std::pow( <a class="code" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>(), 2 ) + std::pow( new_bonus, 2 );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        sqrt_of_sum_of_squares = <a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>( sqrt_of_sum_of_squares );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        sqrt_of_sum_of_squares *= <a class="code" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> = <a class="code" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a>( sqrt_of_sum_of_squares, new_max_bonus, new_cap );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> = 0_turns; <span class="comment">// Brand new. The assignment should stay below get_net_bonus() and pick_time().</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">player_morale::morale_point::get_net_bonus</a></div><div class="ttdeci">int get_net_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00128">morale.cpp:128</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a6ef866718bc7fe64a156cb6da468a38e"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">player_morale::morale_point::pick_time</a></div><div class="ttdeci">time_duration pick_time(const time_duration &amp;current_time, const time_duration &amp;new_time, bool same_sign) const</div><div class="ttdoc">Returns either new_time or remaining time (which one is greater).</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00194">morale.cpp:194</a></div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00010">enums.h:10</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_aeb3bbc4ec861ea58cbfca028920e4cc6"><div class="ttname"><a href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">sqrt</a></div><div class="ttdeci">double sqrt(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00061">math_parser_func.h:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="enums_8h_source.html#l00010">sgn()</a>, and <a class="el" href="math__parser__func_8h_source.html#l00061">sqrt()</a>.</p>

</div>
</div>
<a id="a14c641179a67888920e146a46dda5778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c641179a67888920e146a46dda5778">&#9670;&nbsp;</a></span>decay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::decay </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>ticks</em> = <code>1_turns</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00210">210</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span>( ticks &lt; 0_turns ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;The function called with negative ticks %d.&quot;</span>, to_turns&lt;int&gt;( ticks ) );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> += ticks;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>.</p>

</div>
</div>
<a id="ac87e7364881feac74b893e2cc8f91ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac87e7364881feac74b893e2cc8f91ddb">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::deserialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l03873">3873</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;{</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    jo.<a class="code" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    <span class="keywordflow">if</span>( !jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> ) ) {</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> = <a class="code" href="classmorale__type__data.html#a541856da9a475c01ff975b6f75785da0">morale_type_data::convert_legacy</a>( jo.<a class="code" href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">get_int</a>( <span class="stringliteral">&quot;type_enum&quot;</span> ) );</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    }</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    <a class="code" href="classstring__id.html">itype_id</a> tmpitype;</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;    <span class="keywordflow">if</span>( jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;item_type&quot;</span>, tmpitype ) &amp;&amp; <a class="code" href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a>( tmpitype ) ) {</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> = <a class="code" href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a>( tmpitype );</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    }</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;bonus&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;duration&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> );</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;decay_start&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> );</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    jo.<a class="code" href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">read</a>( <span class="stringliteral">&quot;age&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> );</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;}</div>
<div class="ttc" id="aclassJsonObject_html_a532ea812759469d654c7fde4738d11d5"><div class="ttname"><a href="classJsonObject.html#a532ea812759469d654c7fde4738d11d5">JsonObject::get_int</a></div><div class="ttdeci">int get_int(std::string_view key) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l00840">flexbuffer_json-inl.h:840</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a8517ac783372bd0bf149ab8e5f7aae18"><div class="ttname"><a href="classJsonObject.html#a8517ac783372bd0bf149ab8e5f7aae18">JsonObject::read</a></div><div class="ttdeci">bool read(std::string_view name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json-inl_8h_source.html#l01059">flexbuffer_json-inl.h:1059</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="flexbuffer__json_8h_source.html#l00662">flexbuffer_json.h:662</a></div></div>
<div class="ttc" id="aclassitem_html_a11cf8d500b6d8106302470dce5ca9177"><div class="ttname"><a href="classitem.html#a11cf8d500b6d8106302470dce5ca9177">item::find_type</a></div><div class="ttdeci">static const itype * find_type(const itype_id &amp;type)</div><div class="ttdoc">Returns the item type of the given identifier.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14581">item.cpp:14581</a></div></div>
<div class="ttc" id="aclassitem_html_a4c54ded219374a2f5f80e8eee192dcdf"><div class="ttname"><a href="classitem.html#a4c54ded219374a2f5f80e8eee192dcdf">item::type_is_defined</a></div><div class="ttdeci">static bool type_is_defined(const itype_id &amp;id)</div><div class="ttdoc">Check whether the type id refers to a known type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14576">item.cpp:14576</a></div></div>
<div class="ttc" id="aclassmorale__type__data_html_a541856da9a475c01ff975b6f75785da0"><div class="ttname"><a href="classmorale__type__data.html#a541856da9a475c01ff975b6f75785da0">morale_type_data::convert_legacy</a></div><div class="ttdeci">static const morale_type &amp; convert_legacy(int lmt)</div><div class="ttdef"><b>Definition:</b> <a href="morale__types_8cpp_source.html#l00171">morale_types.cpp:171</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flexbuffer__json_8h_source.html#l00662">JsonObject::allow_omitted_members()</a>, <a class="el" href="morale__types_8cpp_source.html#l00171">morale_type_data::convert_legacy()</a>, <a class="el" href="item_8cpp_source.html#l14581">item::find_type()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l00840">JsonObject::get_int()</a>, <a class="el" href="flexbuffer__json-inl_8h_source.html#l01059">JsonObject::read()</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, and <a class="el" href="item_8cpp_source.html#l14576">item::type_is_defined()</a>.</p>

</div>
</div>
<a id="a67df996b30c476463cab5e8480637e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67df996b30c476463cab5e8480637e7c">&#9670;&nbsp;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string player_morale::morale_point::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00123">123</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="classmorale__type__data.html#ad3403329ce0628c426ae497f3345c3a1">describe</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="aclassmorale__type__data_html_ad3403329ce0628c426ae497f3345c3a1"><div class="ttname"><a href="classmorale__type__data.html#ad3403329ce0628c426ae497f3345c3a1">morale_type_data::describe</a></div><div class="ttdeci">std::string describe(const itype *it=nullptr) const</div><div class="ttdoc">Describes this morale type, with item type to replace wildcard with.</div><div class="ttdef"><b>Definition:</b> <a href="morale__types_8cpp_source.html#l00320">morale_types.cpp:320</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="morale__types_8cpp_source.html#l00320">morale_type_data::describe()</a>, <a class="el" href="morale_8h_source.html#l00117">item_type</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, and <a class="el" href="morale_8h_source.html#l00116">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00823">player_morale::consistent_with()</a>, and <a class="el" href="morale_8cpp_source.html#l00515">player_morale::display()</a>.</p>

</div>
</div>
<a id="a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">&#9670;&nbsp;</a></span>get_net_bonus() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::get_net_bonus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00128">128</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> * ( ( !<a class="code" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a>() &amp;&amp; <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> &gt; <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> ) ?</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                     <a class="code" href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a>( to_turns&lt;int&gt;( <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> ), to_turns&lt;int&gt;( <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> ),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                        to_turns&lt;int&gt;( <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> ) ) : 1 );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_a6a85dc6d2ab7bcb093e77d20fcf171d6"><div class="ttname"><a href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a></div><div class="ttdeci">double logarithmic_range(int min, int max, int pos)</div><div class="ttdoc">Normalized logistic function.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00166">cata_utility.cpp:166</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a74e16ced4b22de1de4359528ac24fa06"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">player_morale::morale_point::is_permanent</a></div><div class="ttdeci">bool is_permanent() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00146">morale.cpp:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00166">logarithmic_range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00823">player_morale::consistent_with()</a>.</p>

</div>
</div>
<a id="a67d0648bd3dbc7ab850f0b8056442bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d0648bd3dbc7ab850f0b8056442bcd">&#9670;&nbsp;</a></span>get_net_bonus() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::get_net_bonus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmorale__mult.html">morale_mult</a> &amp;&#160;</td>
          <td class="paramname"><em>mult</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00135">135</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>() * mult;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade62c18d4c3c5fca64a0fa4a5f2434d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade62c18d4c3c5fca64a0fa4a5f2434d3">&#9670;&nbsp;</a></span>get_percent_contribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double player_morale::morale_point::get_percent_contribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00206">206</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ab454dabbae99a91652b1e0962ac4eeab"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">player_morale::morale_point::percent_contribution</a></div><div class="ttdeci">double percent_contribution</div><div class="ttdoc">this point's percent contribution to the total positive or total negative morale effect</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00126">morale.h:126</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00515">player_morale::display()</a>.</p>

</div>
</div>
<a id="ab777c9c77b12098e64d09625e1f1f082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab777c9c77b12098e64d09625e1f1f082">&#9670;&nbsp;</a></span>is_expired()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::is_expired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00140">140</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// Zero morale bonuses will be shown occasionally anyway</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> ( !<a class="code" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a>() &amp;&amp; <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> &gt;= <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> ) || <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> == 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00322">player_morale::add()</a>, and <a class="el" href="morale_8cpp_source.html#l00389">player_morale::remove_expired()</a>.</p>

</div>
</div>
<a id="a74e16ced4b22de1de4359528ac24fa06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e16ced4b22de1de4359528ac24fa06">&#9670;&nbsp;</a></span>is_permanent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::is_permanent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00146">146</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> == 0_turns );</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00823">player_morale::consistent_with()</a>.</p>

</div>
</div>
<a id="abf6d229f81bc75e89c7b53c90a9a6b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf6d229f81bc75e89c7b53c90a9a6b5c">&#9670;&nbsp;</a></span>matches() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a> &amp;&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00156">156</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> == mp.type ) &amp;&amp; ( <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> == mp.item_type );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="morale_8h_source.html#l00117">item_type</a>, <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>, and <a class="el" href="morale_8h_source.html#l00116">type</a>.</p>

</div>
</div>
<a id="adb75a63e2d88668655f1bf28515eab96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb75a63e2d88668655f1bf28515eab96">&#9670;&nbsp;</a></span>matches() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structitype.html">itype</a> *&#160;</td>
          <td class="paramname"><em>_item_type</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00151">151</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> ( _type == <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> ) &amp;&amp; ( _item_type == <span class="keyword">nullptr</span> || _item_type == <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00381">player_morale::remove()</a>.</p>

</div>
</div>
<a id="a20f5a91bffc2df46c97f0a370a0e4bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20f5a91bffc2df46c97f0a370a0e4bd5">&#9670;&nbsp;</a></span>normalize_bonus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::normalize_bonus </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>capped</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns normalized bonus if either max_bonus != 0 or capped == true. </p>

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00220">220</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> ) &gt; <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( max_bonus ) &amp;&amp; ( max_bonus != 0 ||</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;             capped ) ) ? max_bonus : <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>.</p>

</div>
</div>
<a id="a6ef866718bc7fe64a156cb6da468a38e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef866718bc7fe64a156cb6da468a38e">&#9670;&nbsp;</a></span>pick_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::pick_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>new_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>same_sign</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns either new_time or remaining time (which one is greater). </p>
<p>Only returns new time if same_sign is true </p>

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00194">194</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> remaining_time = current_time - <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> ( remaining_time &lt;= new_time &amp;&amp; same_sign ) ? new_time : remaining_time;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae63c7a703db4c64e104cf511df07e746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63c7a703db4c64e104cf511df07e746">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l03889">3889</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;{</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    json.<a class="code" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> );</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        <span class="comment">// TODO: refactor player_morale to not require this hack</span></div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;        json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;item_type&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a83df5d832ab48efc8e8c8be4b2fc91db">item_type</a>-&gt;<a class="code" href="structitype.html#a291870408701f0174d8c46b7f770fbaf">get_id</a>() );</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    }</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;bonus&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;duration&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> );</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;decay_start&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> );</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    json.<a class="code" href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">member</a>( <span class="stringliteral">&quot;age&quot;</span>, <a class="code" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> );</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    json.<a class="code" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;}</div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02316">json.cpp:2316</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02327">json.cpp:2327</a></div></div>
<div class="ttc" id="aclassJsonOut_html_afb935698620b87ff71b01e7763004de1"><div class="ttname"><a href="classJsonOut.html#afb935698620b87ff71b01e7763004de1">JsonOut::member</a></div><div class="ttdeci">void member(std::string_view name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02422">json.cpp:2422</a></div></div>
<div class="ttc" id="astructitype_html_a291870408701f0174d8c46b7f770fbaf"><div class="ttname"><a href="structitype.html#a291870408701f0174d8c46b7f770fbaf">itype::get_id</a></div><div class="ttdeci">itype_id get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01497">itype.h:1497</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l02327">JsonOut::end_object()</a>, <a class="el" href="json_8cpp_source.html#l02422">JsonOut::member()</a>, <a class="el" href="json_8cpp_source.html#l02316">JsonOut::start_object()</a>, and <a class="el" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a599dcce2998a6b40b1e38e8c6006cb0a">type</a>.</p>

</div>
</div>
<a id="a34e615da345ee07df4d42a22e88a39c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34e615da345ee07df4d42a22e88a39c8">&#9670;&nbsp;</a></span>set_percent_contribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::set_percent_contribution </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>contribution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00201">201</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a> = contribution;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a99e68a4b48ad3c60b49c93e0e72edc77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99e68a4b48ad3c60b49c93e0e72edc77">&#9670;&nbsp;</a></span>age</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::age = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00122">122</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="ac5d20f5a114b00574c674f8df34869c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d20f5a114b00574c674f8df34869c1">&#9670;&nbsp;</a></span>bonus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::bonus = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00119">119</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="a23775252200fae27e8e9b50c058009b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23775252200fae27e8e9b50c058009b0">&#9670;&nbsp;</a></span>decay_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::decay_start = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00121">121</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="a46d34b7300cb045d9d48c21d844ddda0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d34b7300cb045d9d48c21d844ddda0">&#9670;&nbsp;</a></span>duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::duration = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00120">120</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="a83df5d832ab48efc8e8c8be4b2fc91db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83df5d832ab48efc8e8c8be4b2fc91db">&#9670;&nbsp;</a></span>item_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structitype.html">itype</a>* player_morale::morale_point::item_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00117">117</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00123">get_name()</a>, and <a class="el" href="morale_8cpp_source.html#l00156">matches()</a>.</p>

</div>
</div>
<a id="ab454dabbae99a91652b1e0962ac4eeab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab454dabbae99a91652b1e0962ac4eeab">&#9670;&nbsp;</a></span>percent_contribution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double player_morale::morale_point::percent_contribution = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this point's percent contribution to the total positive or total negative morale effect </p>

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00126">126</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="ac24a31282a48c2b42be125e3027728f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24a31282a48c2b42be125e3027728f4">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> player_morale::morale_point::type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00116">116</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00123">get_name()</a>, and <a class="el" href="morale_8cpp_source.html#l00156">matches()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="morale_8h_source.html">morale.h</a></li>
<li>src/<a class="el" href="morale_8cpp_source.html">morale.cpp</a></li>
<li>src/<a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:43 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
