<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: iuse Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">iuse Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ae5807d1dda88ee994942c17a4f1069"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a0ae5807d1dda88ee994942c17a4f1069">alcohol_medium</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a0ae5807d1dda88ee994942c17a4f1069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb97792608dbdf6bbfd9ab52fdc2419"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9eb97792608dbdf6bbfd9ab52fdc2419">alcohol_strong</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9eb97792608dbdf6bbfd9ab52fdc2419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98aedd1967c366bd4ec8320abbc3b342"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a98aedd1967c366bd4ec8320abbc3b342">alcohol_weak</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a98aedd1967c366bd4ec8320abbc3b342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb85440abeae511cd6dc0745866600e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3cb85440abeae511cd6dc0745866600e">antibiotic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3cb85440abeae511cd6dc0745866600e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f90f434f43a8404e071731dd9ad64b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a13f90f434f43a8404e071731dd9ad64b">anticonvulsant</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a13f90f434f43a8404e071731dd9ad64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6276358c59abd658c4798e1e6ecfd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5c6276358c59abd658c4798e1e6ecfd4">antifungal</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5c6276358c59abd658c4798e1e6ecfd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a878655c7093b227b1b388247bef69fb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a878655c7093b227b1b388247bef69fb4">antiparasitic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a878655c7093b227b1b388247bef69fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b9bfd559e1dfec2838f3b48f63e17c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a0b9bfd559e1dfec2838f3b48f63e17c8">blech</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a0b9bfd559e1dfec2838f3b48f63e17c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281d73413ffa3a2a01fc89190e132bcd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a281d73413ffa3a2a01fc89190e132bcd">blech_because_unclean</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a281d73413ffa3a2a01fc89190e132bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417111224f79dd3394e544f94be5cd84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a417111224f79dd3394e544f94be5cd84">chew</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a417111224f79dd3394e544f94be5cd84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3f77bc1e845d285caf3f49d6e370733"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae3f77bc1e845d285caf3f49d6e370733">coke</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae3f77bc1e845d285caf3f49d6e370733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3433902868365f40cf8698f711b20ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af3433902868365f40cf8698f711b20ab">datura</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af3433902868365f40cf8698f711b20ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1b39affe1c38fac4396785bbe81255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2d1b39affe1c38fac4396785bbe81255">ecig</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2d1b39affe1c38fac4396785bbe81255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc505d2082da6d8adcd7b96e12c933b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#acc505d2082da6d8adcd7b96e12c933b8">eyedrops</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:acc505d2082da6d8adcd7b96e12c933b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93a7a8252fcd7d5ce9c245b43a9b33d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa93a7a8252fcd7d5ce9c245b43a9b33d">flu_vaccine</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa93a7a8252fcd7d5ce9c245b43a9b33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ba2f4a41e8a170d9aa4609c7f0298e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae6ba2f4a41e8a170d9aa4609c7f0298e">flumed</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae6ba2f4a41e8a170d9aa4609c7f0298e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c8ef7491ae4a0f3274ebc563f44aae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa9c8ef7491ae4a0f3274ebc563f44aae">flusleep</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa9c8ef7491ae4a0f3274ebc563f44aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3f1721b816cf46af6c28c73f61eb14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#add3f1721b816cf46af6c28c73f61eb14">fungicide</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:add3f1721b816cf46af6c28c73f61eb14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52056abc483314816045ccf43bb5c1db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a52056abc483314816045ccf43bb5c1db">honeycomb</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a52056abc483314816045ccf43bb5c1db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56237a295cef407df0c5d042a7f10ea9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a56237a295cef407df0c5d042a7f10ea9">inhaler</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a56237a295cef407df0c5d042a7f10ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541feee13557661664abb151898dd8dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a541feee13557661664abb151898dd8dd">marloss</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a541feee13557661664abb151898dd8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5fe1d8d9efeb8329b859fa8271327d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7b5fe1d8d9efeb8329b859fa8271327d">marloss_gel</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7b5fe1d8d9efeb8329b859fa8271327d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc44b17e87ebda604c17412017ec34de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abc44b17e87ebda604c17412017ec34de">marloss_seed</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abc44b17e87ebda604c17412017ec34de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a8b1f1817669ffe1b630a978e890b5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5a8b1f1817669ffe1b630a978e890b5a">meditate</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5a8b1f1817669ffe1b630a978e890b5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ddca8d934da5ae1ffbf496ea2b02f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af8ddca8d934da5ae1ffbf496ea2b02f5">meth</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af8ddca8d934da5ae1ffbf496ea2b02f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87919f860221208970b40d2ec859fd55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">mycus</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a87919f860221208970b40d2ec859fd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590535dd168a4ef6c8c762a2e812c104"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">petfood</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *it, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a590535dd168a4ef6c8c762a2e812c104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef8a452a30b8f27ed576260caaa33ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7ef8a452a30b8f27ed576260caaa33ec">plantblech</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7ef8a452a30b8f27ed576260caaa33ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c2604cb18e59b64c1e993b52bcb49f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a58c2604cb18e59b64c1e993b52bcb49f">poison</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a58c2604cb18e59b64c1e993b52bcb49f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f3c19d61836eb7b474eae278b603ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ab0f3c19d61836eb7b474eae278b603ca">prozac</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ab0f3c19d61836eb7b474eae278b603ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab170ea3231e8cb4e0957cef21d8921c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ab170ea3231e8cb4e0957cef21d8921c8">purify_smart</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ab170ea3231e8cb4e0957cef21d8921c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0901bfdb67b0753239b54a545f76f92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa0901bfdb67b0753239b54a545f76f92">sewage</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa0901bfdb67b0753239b54a545f76f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9979793768905336b3047886fa5282"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#acc9979793768905336b3047886fa5282">smoking</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="memdesc:acc9979793768905336b3047886fa5282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point for intentional bodily intake of smoke via paper wrapped one time use items: cigars, cigarettes, etc.  <a href="namespaceiuse.html#acc9979793768905336b3047886fa5282">More...</a><br /></td></tr>
<tr class="separator:acc9979793768905336b3047886fa5282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae246e477e0e0f04bbf15bca5e511636e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae246e477e0e0f04bbf15bca5e511636e">thorazine</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae246e477e0e0f04bbf15bca5e511636e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515b77bf8a878a3e44dd621632efad1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a515b77bf8a878a3e44dd621632efad1b">weed_cake</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a515b77bf8a878a3e44dd621632efad1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d06d1a26ca2f3397911708b8cb5dcf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5d06d1a26ca2f3397911708b8cb5dcf9">xanax</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5d06d1a26ca2f3397911708b8cb5dcf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7341f957264dc912c86791af1baa4b87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7341f957264dc912c86791af1baa4b87">acidbomb_act</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7341f957264dc912c86791af1baa4b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b6693c57aaadaf10455a3799673341"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a25b6693c57aaadaf10455a3799673341">adrenaline_injector</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a25b6693c57aaadaf10455a3799673341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6464b824647295da6d3d9c65efd3dda0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a6464b824647295da6d3d9c65efd3dda0">afs_translocator</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a6464b824647295da6d3d9c65efd3dda0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad124568be7fc9e3b53fd22e409ffd105"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad124568be7fc9e3b53fd22e409ffd105">bell</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad124568be7fc9e3b53fd22e409ffd105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22258fb2a1d2ff3ab4d592f76160588"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae22258fb2a1d2ff3ab4d592f76160588">blood_draw</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae22258fb2a1d2ff3ab4d592f76160588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb8d8a8da543e07d5c9a38dc70a1de0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8bb8d8a8da543e07d5c9a38dc70a1de0">boltcutters</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8bb8d8a8da543e07d5c9a38dc70a1de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b30807de7680324f381aea4345eeea2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a4b30807de7680324f381aea4345eeea2">break_stick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a4b30807de7680324f381aea4345eeea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2dc5f9fde24098df2e2977aa0be0773"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa2dc5f9fde24098df2e2977aa0be0773">c4</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa2dc5f9fde24098df2e2977aa0be0773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a0712b717b9b14b3cdf49dd71b1215"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a67a0712b717b9b14b3cdf49dd71b1215">call_of_tindalos</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a67a0712b717b9b14b3cdf49dd71b1215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d39e67548dd42a39fdbc1176ee5a686"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1d39e67548dd42a39fdbc1176ee5a686">camera</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1d39e67548dd42a39fdbc1176ee5a686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a584512f8293bc65b48a7a6420bc9f17c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a584512f8293bc65b48a7a6420bc9f17c">can_goo</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a584512f8293bc65b48a7a6420bc9f17c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7758692d4d37e5f962bec202df6472ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7758692d4d37e5f962bec202df6472ef">capture_monster_act</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7758692d4d37e5f962bec202df6472ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3182ba0d596fce518f8a701075565ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af3182ba0d596fce518f8a701075565ab">capture_monster_veh</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af3182ba0d596fce518f8a701075565ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715d67d4dc585de01b91fe9e62674f5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a715d67d4dc585de01b91fe9e62674f5f">change_eyes</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a715d67d4dc585de01b91fe9e62674f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258b13e1c76cd6f96f98d02d68c8ed27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a258b13e1c76cd6f96f98d02d68c8ed27">change_skin</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a258b13e1c76cd6f96f98d02d68c8ed27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1978f80267c705ce4011143096a527e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa1978f80267c705ce4011143096a527e">chop_logs</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa1978f80267c705ce4011143096a527e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb10c16dedd50a5f2cf6d3a5308af40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3cb10c16dedd50a5f2cf6d3a5308af40">chop_tree</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3cb10c16dedd50a5f2cf6d3a5308af40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da7c6f8769914baeef050e18b2838d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a4da7c6f8769914baeef050e18b2838d4">clear_rubble</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a4da7c6f8769914baeef050e18b2838d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4711d604b2c2629bdb7dc78e0eea08f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a4711d604b2c2629bdb7dc78e0eea08f2">coin_flip</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a4711d604b2c2629bdb7dc78e0eea08f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abacdd5d614a0ad0dca47ce3785dbdd70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abacdd5d614a0ad0dca47ce3785dbdd70">contacts</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abacdd5d614a0ad0dca47ce3785dbdd70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e61fe7c6df1284dc3fbe613c456ce8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">crowbar</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1e61fe7c6df1284dc3fbe613c456ce8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae23e18216c07772d07cd9676c4402d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aae23e18216c07772d07cd9676c4402d8">crowbar_weak</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aae23e18216c07772d07cd9676c4402d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a1c625609c7a13fb0833cc0259aed92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5a1c625609c7a13fb0833cc0259aed92">dig</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5a1c625609c7a13fb0833cc0259aed92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad237e98b818e25194ea182c0003933f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad237e98b818e25194ea182c0003933f2">dig_channel</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad237e98b818e25194ea182c0003933f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adab6b73b206eb43b5402344b47614b0f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#adab6b73b206eb43b5402344b47614b0f">directional_antenna</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:adab6b73b206eb43b5402344b47614b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3380b7c6e177ae52c1ed955c8f0cd429"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3380b7c6e177ae52c1ed955c8f0cd429">directional_hologram</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3380b7c6e177ae52c1ed955c8f0cd429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d80690ffeeccd8acdc670ad4e5f1e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae9d80690ffeeccd8acdc670ad4e5f1e1">dive_tank_activate</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae9d80690ffeeccd8acdc670ad4e5f1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6120adfc71b4c1ec6a89dd84f8cc435"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad6120adfc71b4c1ec6a89dd84f8cc435">dive_tank</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad6120adfc71b4c1ec6a89dd84f8cc435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f817a798c3b3dc964213258cae83c84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2f817a798c3b3dc964213258cae83c84">dog_whistle</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2f817a798c3b3dc964213258cae83c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dce8bfc65592c248d14dd7f0c2fe31b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5dce8bfc65592c248d14dd7f0c2fe31b">ehandcuffs</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5dce8bfc65592c248d14dd7f0c2fe31b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a610c8bd93f97da84d6bc96416085a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af1a610c8bd93f97da84d6bc96416085a">ehandcuffs_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af1a610c8bd93f97da84d6bc96416085a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaff238678a7537e407f351f436cb408"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abaff238678a7537e407f351f436cb408">epic_music</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abaff238678a7537e407f351f436cb408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7226ce0f0d3e2bd4e29adcbfeac04b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae7226ce0f0d3e2bd4e29adcbfeac04b1">einktabletpc</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae7226ce0f0d3e2bd4e29adcbfeac04b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f37766208d39460d69a3d15c3b65b72"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2f37766208d39460d69a3d15c3b65b72">emf_passive_on</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2f37766208d39460d69a3d15c3b65b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e24ddc2fd629058ebd45499803d0c34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a0e24ddc2fd629058ebd45499803d0c34">extinguisher</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a0e24ddc2fd629058ebd45499803d0c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022e42fa672453892c959d789bc782fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a022e42fa672453892c959d789bc782fa">fill_pit</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a022e42fa672453892c959d789bc782fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66232b4dbf97f6fb5b896e0c90abbe8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a66232b4dbf97f6fb5b896e0c90abbe8a">firecracker</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a66232b4dbf97f6fb5b896e0c90abbe8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce9f52bd3e45c37d762d834ace087ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7ce9f52bd3e45c37d762d834ace087ac">firecracker_pack</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7ce9f52bd3e45c37d762d834ace087ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7884fe54e2eac90255b18d263234b4d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7884fe54e2eac90255b18d263234b4d7">firecracker_pack_act</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7884fe54e2eac90255b18d263234b4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17003a2092768f41d1c60a681622200a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a17003a2092768f41d1c60a681622200a">fish_trap</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a17003a2092768f41d1c60a681622200a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36c2f44e3f488ea9360aef65ca8a1ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad36c2f44e3f488ea9360aef65ca8a1ee">fish_trap_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad36c2f44e3f488ea9360aef65ca8a1ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1e77b5aed48f08625766fd3a4c8996"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8d1e77b5aed48f08625766fd3a4c8996">fishing_rod</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8d1e77b5aed48f08625766fd3a4c8996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34760a5d74b44c11fe67bf0ac5d5a50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad34760a5d74b44c11fe67bf0ac5d5a50">fitness_check</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *it, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad34760a5d74b44c11fe67bf0ac5d5a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05518c9c8a638e1b594ca4c9311d556d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a05518c9c8a638e1b594ca4c9311d556d">foodperson</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a05518c9c8a638e1b594ca4c9311d556d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edbf686ed750df42f1ed9f2cef004f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a6edbf686ed750df42f1ed9f2cef004f0">foodperson_voice</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a6edbf686ed750df42f1ed9f2cef004f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36c707483ed517d1d5639815dacc587"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ac36c707483ed517d1d5639815dacc587">gasmask</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ac36c707483ed517d1d5639815dacc587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaedb3c693d953eca4780be500de284b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#acaedb3c693d953eca4780be500de284b">gasmask_activate</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:acaedb3c693d953eca4780be500de284b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb111931df64f89983c2a55e2e761fa5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aeb111931df64f89983c2a55e2e761fa5">geiger</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aeb111931df64f89983c2a55e2e761fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbcb64b7dbeaf1b6d89d5ad218500d7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abbcb64b7dbeaf1b6d89d5ad218500d7a">geiger_active</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abbcb64b7dbeaf1b6d89d5ad218500d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d75813ba7f9c05f7504b7623d55ea99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8d75813ba7f9c05f7504b7623d55ea99">granade_act</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8d75813ba7f9c05f7504b7623d55ea99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abff950d44529ee5a01b6cf5b9a722150"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abff950d44529ee5a01b6cf5b9a722150">grenade_inc_act</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abff950d44529ee5a01b6cf5b9a722150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c62e8155f0f686f8f80e58f629071c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7c62e8155f0f686f8f80e58f629071c1">gun_repair</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7c62e8155f0f686f8f80e58f629071c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb611eda7fd237a2b9c470bfb5212840"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abb611eda7fd237a2b9c470bfb5212840">gunmod_attach</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abb611eda7fd237a2b9c470bfb5212840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f3a7c26cee6c0836c660510a428609"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a60f3a7c26cee6c0836c660510a428609">hacksaw</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;it_pnt)</td></tr>
<tr class="separator:a60f3a7c26cee6c0836c660510a428609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba185eb2052400a70e1d7df0446927c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aba185eb2052400a70e1d7df0446927c0">hairkit</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aba185eb2052400a70e1d7df0446927c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2e14fe7af245b21ebec7f68bb1fadd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ac2e14fe7af245b21ebec7f68bb1fadd6">hammer</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ac2e14fe7af245b21ebec7f68bb1fadd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba40ae64ce69ac474af2c3f93e6d9062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aba40ae64ce69ac474af2c3f93e6d9062">hand_crank</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aba40ae64ce69ac474af2c3f93e6d9062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a6f2518410cd9fdba30e3051b3259c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a75a6f2518410cd9fdba30e3051b3259c">heat_food</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a75a6f2518410cd9fdba30e3051b3259c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a43dab57bdd3c8eee883fbabdcf3ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af8a43dab57bdd3c8eee883fbabdcf3ce">heatpack</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af8a43dab57bdd3c8eee883fbabdcf3ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c902b0f778f1f2fadb6913901398f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae9c902b0f778f1f2fadb6913901398f1">hotplate</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae9c902b0f778f1f2fadb6913901398f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2b57a28e228f3f3d4bc4ca35bb84b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#afd2b57a28e228f3f3d4bc4ca35bb84b7">hotplate_atomic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:afd2b57a28e228f3f3d4bc4ca35bb84b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb8577a02113f71e59589690f2a9518"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7eb8577a02113f71e59589690f2a9518">jackhammer</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7eb8577a02113f71e59589690f2a9518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed245dbdf2a98482598ee81194f54c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aaed245dbdf2a98482598ee81194f54c2">jet_injector</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aaed245dbdf2a98482598ee81194f54c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfb3b5e80488c39c6214ebbbdde59a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3dfb3b5e80488c39c6214ebbbdde59a1">lumber</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3dfb3b5e80488c39c6214ebbbdde59a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50bfd66f72ec01f785e1be5965da498"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ab50bfd66f72ec01f785e1be5965da498">ma_manual</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ab50bfd66f72ec01f785e1be5965da498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e388ce3877e20825c96f507fa18c302"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8e388ce3877e20825c96f507fa18c302">magic_8_ball</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8e388ce3877e20825c96f507fa18c302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802d0cd933f590e71bc0a03612544d9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a802d0cd933f590e71bc0a03612544d9a">measure_resonance</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a802d0cd933f590e71bc0a03612544d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad832f42294f185680d3279ace95df195"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad832f42294f185680d3279ace95df195">electricstorage</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad832f42294f185680d3279ace95df195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7fdd07b4a0c88adb7732b5bdb7bdf52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ab7fdd07b4a0c88adb7732b5bdb7bdf52">ebooksave</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ab7fdd07b4a0c88adb7732b5bdb7bdf52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6a39bf4d03d6f81f6c99574924a808"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a0d6a39bf4d03d6f81f6c99574924a808">ebookread</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a0d6a39bf4d03d6f81f6c99574924a808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bfe213300c4138b64eb22f5f068f094"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a0bfe213300c4138b64eb22f5f068f094">makemound</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a0bfe213300c4138b64eb22f5f068f094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21df22da742ffa9539caacc95c9357f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa21df22da742ffa9539caacc95c9357f">mace</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa21df22da742ffa9539caacc95c9357f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3baef8958ce46cb42bb162f3c5bff2f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3baef8958ce46cb42bb162f3c5bff2f1">manage_exosuit</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3baef8958ce46cb42bb162f3c5bff2f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9789e53daad301d30ace1ac055f05f4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9789e53daad301d30ace1ac055f05f4d">melatonin_tablet</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9789e53daad301d30ace1ac055f05f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029973f78948208bf9cb17090a778fa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a029973f78948208bf9cb17090a778fa7">mininuke</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a029973f78948208bf9cb17090a778fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a5c5c31578c093c0de96c98f6e4193"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a83a5c5c31578c093c0de96c98f6e4193">molotov_lit</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a83a5c5c31578c093c0de96c98f6e4193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78ed0746aa741f05071a687cc3a6244"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae78ed0746aa741f05071a687cc3a6244">mop</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae78ed0746aa741f05071a687cc3a6244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa115b359fe8260eca81d45dbd5a17d4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa115b359fe8260eca81d45dbd5a17d4e">mp3</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa115b359fe8260eca81d45dbd5a17d4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace19128a8e391cd843c40950958f3854"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ace19128a8e391cd843c40950958f3854">mp3_on</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ace19128a8e391cd843c40950958f3854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5647528d6db37fe36e3ecd52ccaa2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5c5647528d6db37fe36e3ecd52ccaa2d">mp3_deactivate</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5c5647528d6db37fe36e3ecd52ccaa2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db2d297bf6d7717d50bf70fd09d5e62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3db2d297bf6d7717d50bf70fd09d5e62">noise_emitter_on</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3db2d297bf6d7717d50bf70fd09d5e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa28fa6a58bdfa71593e86c9e908f18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8aa28fa6a58bdfa71593e86c9e908f18">oxygen_bottle</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8aa28fa6a58bdfa71593e86c9e908f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91daa8843aca07c214f1c7a0ca3a373a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a91daa8843aca07c214f1c7a0ca3a373a">oxytorch</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a91daa8843aca07c214f1c7a0ca3a373a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae12ec7d9025b6ad54b9380ad2bc34e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5ae12ec7d9025b6ad54b9380ad2bc34e">binder_add_recipe</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5ae12ec7d9025b6ad54b9380ad2bc34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11a0b1f048dc2e56a03590765cb6b34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af11a0b1f048dc2e56a03590765cb6b34">binder_manage_recipe</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af11a0b1f048dc2e56a03590765cb6b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff60437495f56c9e8ce557a328b8a72"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7ff60437495f56c9e8ce557a328b8a72">pack_cbm</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *it, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7ff60437495f56c9e8ce557a328b8a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41708c4b5c33c118e7906782f78d7a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ab41708c4b5c33c118e7906782f78d7a6">pack_item</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ab41708c4b5c33c118e7906782f78d7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b605f6d204c8cc9c0b203b1a3deaa0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8b605f6d204c8cc9c0b203b1a3deaa0e">pick_lock</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *it, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="separator:a8b605f6d204c8cc9c0b203b1a3deaa0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcc86332f7e77a3d2bfbefb12ecb955"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aefcc86332f7e77a3d2bfbefb12ecb955">pickaxe</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aefcc86332f7e77a3d2bfbefb12ecb955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68bdbc09b8985bd6aa6c97d0bafe40a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a68bdbc09b8985bd6aa6c97d0bafe40a1">play_game</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a68bdbc09b8985bd6aa6c97d0bafe40a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b7f720ce7cd6c3b8cc00791a8a46e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a85b7f720ce7cd6c3b8cc00791a8a46e0">portable_game</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a85b7f720ce7cd6c3b8cc00791a8a46e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17324fc3e69608300deb4760f7ff10da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a17324fc3e69608300deb4760f7ff10da">portal</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a17324fc3e69608300deb4760f7ff10da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a804fce8e3d1ae7476d41f0cc16699f88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a804fce8e3d1ae7476d41f0cc16699f88">radglove</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a804fce8e3d1ae7476d41f0cc16699f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f2a515f184aaf7f4ca5d597e7231bce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5f2a515f184aaf7f4ca5d597e7231bce">radio_mod</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5f2a515f184aaf7f4ca5d597e7231bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5257e1a41f6c18543b2cb2769cf3b5e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a5257e1a41f6c18543b2cb2769cf3b5e0">radio_off</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a5257e1a41f6c18543b2cb2769cf3b5e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9dea35382b5a1d73cda29cc1d4302a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9d9dea35382b5a1d73cda29cc1d4302a">radio_on</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9d9dea35382b5a1d73cda29cc1d4302a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed9908cabb36951f63aa480cafe71c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a6ed9908cabb36951f63aa480cafe71c4">radio_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a6ed9908cabb36951f63aa480cafe71c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a5d32634c68ecc96deac6847d8c0a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a15a5d32634c68ecc96deac6847d8c0a7">remove_all_mods</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a15a5d32634c68ecc96deac6847d8c0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad907a5b6293dc78b83cc9863efbb6eeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad907a5b6293dc78b83cc9863efbb6eeb">robotcontrol</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad907a5b6293dc78b83cc9863efbb6eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1749fc8225eeaec0b7dfe4ef70c2367c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1749fc8225eeaec0b7dfe4ef70c2367c">rpgdie</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1749fc8225eeaec0b7dfe4ef70c2367c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81079151986b7a91874751dae6720a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae81079151986b7a91874751dae6720a5">seed</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae81079151986b7a91874751dae6720a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2282b0ac45aefd3842171881d09108b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2282b0ac45aefd3842171881d09108b6">shavekit</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2282b0ac45aefd3842171881d09108b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ed1b2b51c69008e5beff8e27576f0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a01ed1b2b51c69008e5beff8e27576f0e">shocktonfa_off</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a01ed1b2b51c69008e5beff8e27576f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9181dfd00576bfaddeb22cf117aae62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ad9181dfd00576bfaddeb22cf117aae62">shocktonfa_on</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ad9181dfd00576bfaddeb22cf117aae62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d222a0d4791285bcfd1f4931a7c8c75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7d222a0d4791285bcfd1f4931a7c8c75">siphon</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7d222a0d4791285bcfd1f4931a7c8c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc0f8096945223d4f89036b84ee070d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#accc0f8096945223d4f89036b84ee070d">solarpack</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:accc0f8096945223d4f89036b84ee070d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23e7d15dfb30b39d0e2ed4044eda3bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae23e7d15dfb30b39d0e2ed4044eda3bf">solarpack_off</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae23e7d15dfb30b39d0e2ed4044eda3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8684a173355a1746766060d7298f4d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae8684a173355a1746766060d7298f4d2">spray_can</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae8684a173355a1746766060d7298f4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c284fc77ef107deccb75a6b17a3b36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a84c284fc77ef107deccb75a6b17a3b36">stimpack</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a84c284fc77ef107deccb75a6b17a3b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2392f15a7de79ad6bd5bea5643480faa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2392f15a7de79ad6bd5bea5643480faa">strong_antibiotic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2392f15a7de79ad6bd5bea5643480faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafa142c7bed1e2b6ceecadfbd0d30ee5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aafa142c7bed1e2b6ceecadfbd0d30ee5">talking_doll</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aafa142c7bed1e2b6ceecadfbd0d30ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ddf58b64f06b9e91ed946ee217a48cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9ddf58b64f06b9e91ed946ee217a48cc">tazer</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9ddf58b64f06b9e91ed946ee217a48cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27370e4a030a81d8bef9d17e96def01b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">tazer2</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a27370e4a030a81d8bef9d17e96def01b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a470e36c4a87310339cd4ac42ccf9b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9a470e36c4a87310339cd4ac42ccf9b9">teleport</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9a470e36c4a87310339cd4ac42ccf9b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a66e2caedd3083f98d3c04025b3824b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a8a66e2caedd3083f98d3c04025b3824b">toolmod_attach</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a8a66e2caedd3083f98d3c04025b3824b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be263d2564579adab8fcb2db24bbf1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9be263d2564579adab8fcb2db24bbf1a">towel</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9be263d2564579adab8fcb2db24bbf1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed2047296de97284c321af16b9eb26e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#abed2047296de97284c321af16b9eb26e">unfold_generic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:abed2047296de97284c321af16b9eb26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa506a3bba5e08ac1d6d193c4ed4eee27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa506a3bba5e08ac1d6d193c4ed4eee27">unpack_item</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa506a3bba5e08ac1d6d193c4ed4eee27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b11f14565a70be2cc19366cbe43266"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a61b11f14565a70be2cc19366cbe43266">vibe</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a61b11f14565a70be2cc19366cbe43266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a20f8bfde5f4d89a486fa33de8ead7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a62a20f8bfde5f4d89a486fa33de8ead7">voltmeter</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *it, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a62a20f8bfde5f4d89a486fa33de8ead7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8916dea8e9d4477f1822ee9a7f74a2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af8916dea8e9d4477f1822ee9a7f74a2e">vortex</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af8916dea8e9d4477f1822ee9a7f74a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aed8ad3c9d74cb0c90a44684889b6fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a9aed8ad3c9d74cb0c90a44684889b6fc">wash_all_items</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a9aed8ad3c9d74cb0c90a44684889b6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec57f3dc11c77dbf445d5df1d7b99df7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aec57f3dc11c77dbf445d5df1d7b99df7">wash_hard_items</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aec57f3dc11c77dbf445d5df1d7b99df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7c6de87c732b8541fd0d6f6039e5ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1e7c6de87c732b8541fd0d6f6039e5ca">wash_items</a> (<a class="el" href="classCharacter.html">Character</a> *p, bool soft_items, bool hard_items)</td></tr>
<tr class="separator:a1e7c6de87c732b8541fd0d6f6039e5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c1eba6bed33d5c6aa77f6663955071"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a86c1eba6bed33d5c6aa77f6663955071">wash_soft_items</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a86c1eba6bed33d5c6aa77f6663955071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31522ea230f611408238b5ca4816f8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa31522ea230f611408238b5ca4816f8c">water_purifier</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa31522ea230f611408238b5ca4816f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f22223365b4a47dfbe1aee766cf30ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2f22223365b4a47dfbe1aee766cf30ac">weak_antibiotic</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2f22223365b4a47dfbe1aee766cf30ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b731cc1720938427d5e2cb3aabd4d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a28b731cc1720938427d5e2cb3aabd4d1">weather_tool</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a28b731cc1720938427d5e2cb3aabd4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3288281df68588407dc8829f3152d521"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3288281df68588407dc8829f3152d521">sextant</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3288281df68588407dc8829f3152d521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3c9103d99033e7a245d1c3b0d5cf3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1a3c9103d99033e7a245d1c3b0d5cf3a">lux_meter</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1a3c9103d99033e7a245d1c3b0d5cf3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2315308129adbe8c0aea7e012b061aee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a2315308129adbe8c0aea7e012b061aee">dbg_lux_meter</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a2315308129adbe8c0aea7e012b061aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f1a3a8eca6ec8320b1bd4236f9053a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#ae4f1a3a8eca6ec8320b1bd4236f9053a">calories_intake_tracker</a> (<a class="el" href="classCharacter.html">Character</a> *p, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:ae4f1a3a8eca6ec8320b1bd4236f9053a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6ef12d4b7a69abb68652ab447f7b7b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aae6ef12d4b7a69abb68652ab447f7b7b">radiocar</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aae6ef12d4b7a69abb68652ab447f7b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bc3df10296a34a3757586995cdb8b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aa2bc3df10296a34a3757586995cdb8b1">radiocaron</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aa2bc3df10296a34a3757586995cdb8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb4fef2a26209ed9508557251219116"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#aedb4fef2a26209ed9508557251219116">radiocontrol</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:aedb4fef2a26209ed9508557251219116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc5c07211986b306952b42b584c2db2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1cc5c07211986b306952b42b584c2db2">radiocontrol_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1cc5c07211986b306952b42b584c2db2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca57f0d03084f4c873c034633817ede"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a7ca57f0d03084f4c873c034633817ede">multicooker</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a7ca57f0d03084f4c873c034633817ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b543b9b0e566ce1c903c926d2d9dce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a25b543b9b0e566ce1c903c926d2d9dce">multicooker_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a25b543b9b0e566ce1c903c926d2d9dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d986076627c9327a54e8ab036aac530"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a3d986076627c9327a54e8ab036aac530">remoteveh</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a3d986076627c9327a54e8ab036aac530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e170dc5c4229337842e4b35365b0bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#af5e170dc5c4229337842e4b35365b0bc">remoteveh_tick</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:af5e170dc5c4229337842e4b35365b0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f315b4f024892d60d4bf51c1c2ebaf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a4f315b4f024892d60d4bf51c1c2ebaf9">craft</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a4f315b4f024892d60d4bf51c1c2ebaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1850ccc2fe2ae159a2d88bb31d67eedc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1850ccc2fe2ae159a2d88bb31d67eedc">disassemble</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, const <a class="el" href="structtripoint.html">tripoint</a> &amp;)</td></tr>
<tr class="separator:a1850ccc2fe2ae159a2d88bb31d67eedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c918bef9271c1ce52f049bffb28596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a33c918bef9271c1ce52f049bffb28596">cut_log_into_planks</a> (<a class="el" href="classCharacter.html">Character</a> &amp;)</td></tr>
<tr class="separator:a33c918bef9271c1ce52f049bffb28596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb12a40a0a229ae9901588301ba37c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a1cb12a40a0a229ae9901588301ba37c5">play_music</a> (<a class="el" href="classCharacter.html">Character</a> *p, const <a class="el" href="structtripoint.html">tripoint</a> &amp;source, int volume, int max_morale)</td></tr>
<tr class="separator:a1cb12a40a0a229ae9901588301ba37c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d51721d3c384fb8c60d3f2207853091"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a4d51721d3c384fb8c60d3f2207853091">towel_common</a> (<a class="el" href="classCharacter.html">Character</a> *, <a class="el" href="classitem.html">item</a> *, bool)</td></tr>
<tr class="separator:a4d51721d3c384fb8c60d3f2207853091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cc2405c3e142bd7d3f2b4af39b3824"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a81cc2405c3e142bd7d3f2b4af39b3824">robotcontrol_can_target</a> (<a class="el" href="classCharacter.html">Character</a> *, const <a class="el" href="classmonster.html">monster</a> &amp;)</td></tr>
<tr class="separator:a81cc2405c3e142bd7d3f2b4af39b3824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32100cdc409ab595ebbb4e5d2115883a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a32100cdc409ab595ebbb4e5d2115883a">handle_ground_graffiti</a> (<a class="el" href="classCharacter.html">Character</a> &amp;p, <a class="el" href="classitem.html">item</a> *it, const std::string &amp;prefix, const <a class="el" href="structtripoint.html">tripoint</a> &amp;where)</td></tr>
<tr class="separator:a32100cdc409ab595ebbb4e5d2115883a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d862264df8d80c14f753c0e823e415"><td class="memItemLeft" align="right" valign="top"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiuse.html#a85d862264df8d80c14f753c0e823e415">can_smoke</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;you)</td></tr>
<tr class="separator:a85d862264df8d80c14f753c0e823e415"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7341f957264dc912c86791af1baa4b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7341f957264dc912c86791af1baa4b87">&#9670;&nbsp;</a></span>acidbomb_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::acidbomb_act </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03422">3422</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;        it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = -1;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;tmp : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 1 ) ) {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( tmp, <a class="code" href="field__type_8cpp.html#a58c69cd6c8ba46b692c5ca3fbe4f0ae4">fd_acid</a>, 3 );</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        }</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    }</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03133">item.h:3133</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_a32a9de57ddea3145ca42e6acfde7f3d6"><div class="ttname"><a href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">map::add_field</a></div><div class="ttdeci">bool add_field(const tripoint &amp;p, const field_type_id &amp;type_id, int intensity=INT_MAX, const time_duration &amp;age=0_turns, bool hit_player=true)</div><div class="ttdoc">Add field entry at point, or set intensity if present.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06563">map.cpp:6563</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10109">map.cpp:10109</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a58c69cd6c8ba46b692c5ca3fbe4f0ae4"><div class="ttname"><a href="field__type_8cpp.html#a58c69cd6c8ba46b692c5ca3fbe4f0ae4">fd_acid</a></div><div class="ttdeci">const field_type_str_id fd_acid(&quot;fd_acid&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="anamespacemath__opers_html_a2f0118617735cc810b9d76d62bd182f6"><div class="ttname"><a href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">math_opers::pos</a></div><div class="ttdeci">constexpr double pos(double, double r)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__impl_8h_source.html#l00203">math_parser_impl.h:203</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00129">point.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="field__type_8cpp.html#a58c69cd6c8ba46b692c5ca3fbe4f0ae4">fd_acid</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a25b6693c57aaadaf10455a3799673341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b6693c57aaadaf10455a3799673341">&#9670;&nbsp;</a></span>adrenaline_injector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::adrenaline_injector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05028">5028</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;{</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() &amp;&amp; p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a> ) &gt;= 30_minutes ) {</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;    }</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160; </div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inject yourself with adrenaline.&quot;</span> ),</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; injects themselves with adrenaline.&quot;</span> ) );</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160; </div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;    <a class="code" href="classitem.html">item</a> syringe( <span class="stringliteral">&quot;syringe&quot;</span>, it-&gt;<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">i_add</a>( syringe );</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a> ) ) {</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your heart spasms!&quot;</span> ) );</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;        <span class="comment">// Note: not the mod, the health</span></div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a6bfb0d79cb38f3f5bb270b6d34ee2e0d">mod_livestyle</a>( -20 );</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;    }</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160; </div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a>, 20_minutes );</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160; </div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6bfb0d79cb38f3f5bb270b6d34ee2e0d"><div class="ttname"><a href="classCharacter.html#a6bfb0d79cb38f3f5bb270b6d34ee2e0d">Character::mod_livestyle</a></div><div class="ttdeci">void mod_livestyle(int nhealthy)</div><div class="ttdoc">Modifiers for health values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04323">character.cpp:4323</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac81e06f5fbbb42c673f235a6f37d9d4b"><div class="ttname"><a href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">Character::add_msg_player_or_npc</a></div><div class="ttdeci">void add_msg_player_or_npc(const std::string &amp;player_msg, const std::string &amp;npc_str) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00861">character.cpp:861</a></div></div>
<div class="ttc" id="aclassCharacter_html_af04d061e415da9cb6f1fc234b04f3dfb"><div class="ttname"><a href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">Character::i_add</a></div><div class="ttdeci">item_location i_add(item it, bool should_stack=true, const item *avoid=nullptr, const item *original_inventory_item=nullptr, bool allow_drop=true, bool allow_wield=true, bool ignore_pkt_settings=false)</div><div class="ttdoc">Adds the item to the character's worn items or wields it, or prompts if the Character cannot pick it ...</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00326">character_inventory.cpp:326</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0503012f1ff927cbb5ad126e39cb103"><div class="ttname"><a href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">Character::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00856">character.cpp:856</a></div></div>
<div class="ttc" id="aclassCreature_html_a1ba25d990e8532dd2b0331bfc6cc694c"><div class="ttname"><a href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">Creature::get_effect_dur</a></div><div class="ttdeci">time_duration get_effect_dur(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns the duration of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01863">creature.cpp:1863</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_a891bc2d0c564449cb462178317819254"><div class="ttname"><a href="classCreature.html#a891bc2d0c564449cb462178317819254">Creature::mod_moves</a></div><div class="ttdeci">void mod_moves(int nmoves)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02008">creature.cpp:2008</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassitem_html_a46b9bb1181827a365eb83d935c663677"><div class="ttname"><a href="classitem.html#a46b9bb1181827a365eb83d935c663677">item::birthday</a></div><div class="ttdeci">time_point birthday() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14686">item.cpp:14686</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a1b24df80fb6fce16dd4527cc4a6fa6ca"><div class="ttname"><a href="iuse_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a></div><div class="ttdeci">static const efftype_id effect_adrenaline(&quot;adrenaline&quot;)</div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="iuse_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00326">Character::i_add()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="character_8cpp_source.html#l04323">Character::mod_livestyle()</a>, and <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>.</p>

<p class="reference">Referenced by <a class="el" href="consumption_8cpp_source.html#l01709">Character::get_consume_time()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a6464b824647295da6d3d9c65efd3dda0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6464b824647295da6d3d9c65efd3dda0">&#9670;&nbsp;</a></span>afs_translocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::afs_translocator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06896">6896</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;{</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;    }</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160; </div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; dest_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Create buoy where?&quot;</span> ) );</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;    <span class="keywordflow">if</span>( !dest_ ) {</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    }</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160; </div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> dest = *dest_;</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160; </div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160; </div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( dest ) || here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a>, dest ) ||</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;        here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( dest ) ) {</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s, emits a short angry beep.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;        here.<a class="code" href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">furn_set</a>( dest, <a class="code" href="iuse_8cpp.html#a343f5c82ccd61d37462ca7ff22ead344">furn_f_translocator_buoy</a> );</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Space warps momentarily as the %s is created.&quot;</span> ),</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;                 <a class="code" href="iuse_8cpp.html#a343f5c82ccd61d37462ca7ff22ead344">furn_f_translocator_buoy</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">name</a>() );</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;        <span class="keywordflow">return</span>  1;</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;    }</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;}</div>
<div class="ttc" id="aaction_8cpp_html_a503aa06052a763e1b8c0be791e403acc"><div class="ttname"><a href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; choose_adjacent(const std::string &amp;message, const bool allow_vertical)</div><div class="ttdoc">Request player input of adjacent tile, possibly including vertical tiles.</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l01188">action.cpp:1188</a></div></div>
<div class="ttc" id="aclassitem_html_a30837987c08ac5daf3b1e377e0ecaa21"><div class="ttname"><a href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, tname::segment_bitset const &amp;segments=tname::default_tname) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06814">item.cpp:6814</a></div></div>
<div class="ttc" id="aclassitem_html_aafdd6e14936eb02b0d71a96e7e325746"><div class="ttname"><a href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">item::ammo_sufficient</a></div><div class="ttdeci">bool ammo_sufficient(const Character *carrier, int qty=1) const</div><div class="ttdoc">Check if sufficient ammo is loaded for given number of uses.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10855">item.cpp:10855</a></div></div>
<div class="ttc" id="aclassmap_html_a00008f407a53edc2445622618d7ed071"><div class="ttname"><a href="classmap.html#a00008f407a53edc2445622618d7ed071">map::has_furn</a></div><div class="ttdeci">bool has_furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01712">map.cpp:1712</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03077">map.cpp:3077</a></div></div>
<div class="ttc" id="aclassmap_html_a410a8dcd3e1ee0e87da584bf878d6f83"><div class="ttname"><a href="classmap.html#a410a8dcd3e1ee0e87da584bf878d6f83">map::furn_set</a></div><div class="ttdeci">bool furn_set(const tripoint &amp;p, const furn_id &amp;new_furniture, bool furn_reset=false, bool avoid_creatures=false)</div><div class="ttdoc">furn_reset should be true if new_furniture is being set to f_null when the player is grab-moving furn...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01743">map.cpp:1743</a></div></div>
<div class="ttc" id="aclassmap_html_a802cc11379d4be61f4e2b13a50f6390e"><div class="ttname"><a href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">map::impassable</a></div><div class="ttdeci">bool impassable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02462">map.cpp:2462</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00071">achievement.cpp:71</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00352">enums.h:352</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a343f5c82ccd61d37462ca7ff22ead344"><div class="ttname"><a href="iuse_8cpp.html#a343f5c82ccd61d37462ca7ff22ead344">furn_f_translocator_buoy</a></div><div class="ttdeci">static const furn_str_id furn_f_translocator_buoy(&quot;f_translocator_buoy&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a></div><div class="ttdeci">@ TFLAG_NO_FLOOR</div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="astructmap__data__common__t_html_a1e749bfdff8adff5829dc013dcac0cc1"><div class="ttname"><a href="structmap__data__common__t.html#a1e749bfdff8adff5829dc013dcac0cc1">map_data_common_t::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00563">mapdata.cpp:563</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="iuse_8cpp.html#a343f5c82ccd61d37462ca7ff22ead344">furn_f_translocator_buoy</a>, <a class="el" href="map_8cpp_source.html#l01743">map::furn_set()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="map_8cpp_source.html#l02462">map::impassable()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mapdata_8cpp_source.html#l00563">map_data_common_t::name()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">TFLAG_NO_FLOOR</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a0ae5807d1dda88ee994942c17a4f1069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae5807d1dda88ee994942c17a4f1069">&#9670;&nbsp;</a></span>alcohol_medium()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::alcohol_medium </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00526">526</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iuse_8cpp.html#a12e8090af98afe8c3ac111b0e0a3d367">alcohol</a>( *p, *it, 1 );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a12e8090af98afe8c3ac111b0e0a3d367"><div class="ttname"><a href="iuse_8cpp.html#a12e8090af98afe8c3ac111b0e0a3d367">alcohol</a></div><div class="ttdeci">static int alcohol(Character &amp;p, const item &amp;it, const int strength)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00498">iuse.cpp:498</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l00498">alcohol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9eb97792608dbdf6bbfd9ab52fdc2419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eb97792608dbdf6bbfd9ab52fdc2419">&#9670;&nbsp;</a></span>alcohol_strong()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::alcohol_strong </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00531">531</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iuse_8cpp.html#a12e8090af98afe8c3ac111b0e0a3d367">alcohol</a>( *p, *it, 2 );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l00498">alcohol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a98aedd1967c366bd4ec8320abbc3b342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98aedd1967c366bd4ec8320abbc3b342">&#9670;&nbsp;</a></span>alcohol_weak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::alcohol_weak </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00521">521</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iuse_8cpp.html#a12e8090af98afe8c3ac111b0e0a3d367">alcohol</a>( *p, *it, 0 );</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l00498">alcohol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3cb85440abeae511cd6dc0745866600e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cb85440abeae511cd6dc0745866600e">&#9670;&nbsp;</a></span>antibiotic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::antibiotic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00625">625</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some antibiotics.&quot;</span> ),</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; takes some antibiotics.&quot;</span> ) );</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a> ) ) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a> );</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The muscle spasms start to go away.&quot;</span> ) );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The medication does nothing to help the spasms.&quot;</span> ) );</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a> ) ) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Maybe this is just the placebo effect, but you feel a little better as the dose settles in.&quot;</span> ) );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a>, 12_hours );</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a198307f31b3dca3f107624b5a91f374a">effect_antibiotic_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a4249b6f1d0842211bfe53e5f9e206a10"><div class="ttname"><a href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a></div><div class="ttdeci">time_duration rng(time_duration lo, time_duration hi)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00779">calendar.cpp:779</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00347">enums.h:347</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a></div><div class="ttdeci">@ m_neutral</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00354">enums.h:354</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a198307f31b3dca3f107624b5a91f374a"><div class="ttname"><a href="iuse_8cpp.html#a198307f31b3dca3f107624b5a91f374a">effect_antibiotic_visible</a></div><div class="ttdeci">static const efftype_id effect_antibiotic_visible(&quot;antibiotic_visible&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a1de43fa1f6d16ce87ab7a3a49e47c463"><div class="ttname"><a href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a></div><div class="ttdeci">static const efftype_id effect_infected(&quot;infected&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a2ebc0d3c09d8f2896a466db2794c2845"><div class="ttname"><a href="iuse_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_antibiotic(&quot;antibiotic&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_acb76793db7227b1d22461d91189b44ab"><div class="ttname"><a href="iuse_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a></div><div class="ttdeci">static const efftype_id effect_tetanus(&quot;tetanus&quot;)</div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="iuse_8cpp.html#a2ebc0d3c09d8f2896a466db2794c2845">effect_antibiotic</a>, <a class="el" href="iuse_8cpp.html#a198307f31b3dca3f107624b5a91f374a">effect_antibiotic_visible</a>, <a class="el" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="iuse_8cpp.html#acb76793db7227b1d22461d91189b44ab">effect_tetanus</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, and <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a13f90f434f43a8404e071731dd9ad64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f90f434f43a8404e071731dd9ad64b">&#9670;&nbsp;</a></span>anticonvulsant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::anticonvulsant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength reduces duration of anticonvulsant medication 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00789">789</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;{</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some anticonvulsant medication.&quot;</span> ) );<span class="comment"></span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">    /** @EFFECT_STR reduces duration of anticonvulsant medication */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> duration = 8_hours - p-&gt;<a class="code" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> * <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0_turns, 10_minutes );</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a> ) ) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        duration -= 1_hours;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a> ) ) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        duration += 2_hours;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#acfad4e8017ecde8182c83fee1ad037cd">effect_valium</a>, duration );</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a16f659b9f964b38febd06909ea528130">effect_took_anticonvulsant_visible</a>, duration );</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a>, duration );</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a> ) ) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a> );</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You stop shaking.&quot;</span> ) );</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a26369a0a81eef76cfe75214d22ed32b4"><div class="ttname"><a href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">Character::str_cur</a></div><div class="ttdeci">int str_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00577">character.h:577</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a16f659b9f964b38febd06909ea528130"><div class="ttname"><a href="iuse_8cpp.html#a16f659b9f964b38febd06909ea528130">effect_took_anticonvulsant_visible</a></div><div class="ttdeci">static const efftype_id effect_took_anticonvulsant_visible(&quot;took_anticonvulsant_visible&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a2d866d9790623dc33511f3f08ec510b5"><div class="ttname"><a href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a></div><div class="ttdeci">static const trait_id trait_TOLERANCE(&quot;TOLERANCE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a460bb4cc70f1bbe0edae8969fb092c00"><div class="ttname"><a href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a></div><div class="ttdeci">static const efftype_id effect_high(&quot;high&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a513ee3dfdb798f83e30d99f697f2fa5b"><div class="ttname"><a href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a></div><div class="ttdeci">static const trait_id trait_LIGHTWEIGHT(&quot;LIGHTWEIGHT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_acf409ab736a978a27fd03d8e155eeee5"><div class="ttname"><a href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a></div><div class="ttdeci">static const efftype_id effect_shakes(&quot;shakes&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_acfad4e8017ecde8182c83fee1ad037cd"><div class="ttname"><a href="iuse_8cpp.html#acfad4e8017ecde8182c83fee1ad037cd">effect_valium</a></div><div class="ttdeci">static const efftype_id effect_valium(&quot;valium&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a>, <a class="el" href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a>, <a class="el" href="iuse_8cpp.html#a16f659b9f964b38febd06909ea528130">effect_took_anticonvulsant_visible</a>, <a class="el" href="iuse_8cpp.html#acfad4e8017ecde8182c83fee1ad037cd">effect_valium</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="character_8h_source.html#l00577">Character::str_cur</a>, <a class="el" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a>, and <a class="el" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5c6276358c59abd658c4798e1e6ecfd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6276358c59abd658c4798e1e6ecfd4">&#9670;&nbsp;</a></span>antifungal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::antifungal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00722">722</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ab7841592a2e46520e3c3a3d3b677345c">effect_antifungal</a>, 4_hours );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> ) ) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel a burning sensation slowly radiating throughout your skin.&quot;</span> ) );</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a> ) ) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> ) ) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your skin grows warm for a moment.&quot;</span> ) );</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_ada7a49ad443c0522cdd7422d53bef2c1"><div class="ttname"><a href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">Creature::cant_do_underwater</a></div><div class="ttdeci">bool cant_do_underwater(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00280">creature.cpp:280</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a08ed8f8240259a6a457502b0db459e08"><div class="ttname"><a href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a></div><div class="ttdeci">static const efftype_id effect_fungus(&quot;fungus&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a5700afe28dcf80d2e04f44172a1eebd7"><div class="ttname"><a href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a></div><div class="ttdeci">static const efftype_id effect_spores(&quot;spores&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab7841592a2e46520e3c3a3d3b677345c"><div class="ttname"><a href="iuse_8cpp.html#ab7841592a2e46520e3c3a3d3b677345c">effect_antifungal</a></div><div class="ttdeci">static const efftype_id effect_antifungal(&quot;antifungal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="iuse_8cpp.html#ab7841592a2e46520e3c3a3d3b677345c">effect_antifungal</a>, <a class="el" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="el" href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, and <a class="el" href="enums_8h_source.html#l00351">m_warning</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a878655c7093b227b1b388247bef69fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a878655c7093b227b1b388247bef69fb4">&#9670;&nbsp;</a></span>antiparasitic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::antiparasitic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00740">740</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;{</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some antiparasitic medication.&quot;</span> ) );</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> ) ) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The itching sensation under your skin fades away.&quot;</span> ) );</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> ) ) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> );</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">guts</a>.<a class="code" href="classstomach__contents.html#af942a9e51785fc36ec8b059dbe1028dc">mod_nutr</a>( -1 ); <span class="comment">// You just digested the tapeworm.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> ) ) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your bowels clench as something inside them dies.&quot;</span> ) );</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100">m_mixed</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your bowels spasm painfully as something inside them dies.&quot;</span> ) );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 8, 24 ) );</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> ) ) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> );</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your skin prickles and your veins itch for a few moments.&quot;</span> ) );</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a0c3aa853465e1c40dccbc7e16414c7bd">effect_blood_spiders</a> ) ) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a0c3aa853465e1c40dccbc7e16414c7bd">effect_blood_spiders</a> );</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your veins relax in a soothing wave through your body.&quot;</span> ) );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> ) ) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> ) ) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The pressure inside your head feels better already.&quot;</span> ) );</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100">m_mixed</a>,</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your head pounds like a sore tooth as something inside of it dies.&quot;</span> ) );</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 8, 24 ) );</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a> ) ) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a> );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> ) ) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The stiffness in your joints goes away.&quot;</span> ) );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The pain in your joints goes away.&quot;</span> ) );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a01a3b9dd92576401225db8f71192f9f0"><div class="ttname"><a href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">Character::mod_pain</a></div><div class="ttdeci">void mod_pain(int npain) override</div><div class="ttdoc">Modifies a pain value by player traits before passing it to Creature::mod_pain()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12483">character.cpp:12483</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6e24aab61f2ff8333a4f938cce785b3f"><div class="ttname"><a href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">Character::guts</a></div><div class="ttdeci">stomach_contents guts</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02729">character.h:2729</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaaec0279242f05b51af5c8b7bb416bb1"><div class="ttname"><a href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">Character::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdoc">Returns true if player has a trait, bionic, effect, bodypart, or martial arts buff with a flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11967">character.cpp:11967</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_af942a9e51785fc36ec8b059dbe1028dc"><div class="ttname"><a href="classstomach__contents.html#af942a9e51785fc36ec8b059dbe1028dc">stomach_contents::mod_nutr</a></div><div class="ttdeci">void mod_nutr(int nutr)</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00415">stomach.cpp:415</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaa65a3cd4a2c6d0fbb31833ade22ee100">m_mixed</a></div><div class="ttdeci">@ m_mixed</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00349">enums.h:349</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a074b87b8d18347675f51ed9e6d7e8787"><div class="ttname"><a href="iuse_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a></div><div class="ttdeci">static const efftype_id effect_bloodworms(&quot;bloodworms&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a0c3aa853465e1c40dccbc7e16414c7bd"><div class="ttname"><a href="iuse_8cpp.html#a0c3aa853465e1c40dccbc7e16414c7bd">effect_blood_spiders</a></div><div class="ttdeci">static const efftype_id effect_blood_spiders(&quot;blood_spiders&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a13af1ce0f1c5467c2718b3d683c13c28"><div class="ttname"><a href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a></div><div class="ttdeci">static const efftype_id effect_dermatik(&quot;dermatik&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a3eff2536d0f2d082101e71815160a288"><div class="ttname"><a href="iuse_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_PAIN_IMMUNE(&quot;PAIN_IMMUNE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a41e08c32ee980d1dd390b1d031c16696"><div class="ttname"><a href="iuse_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a></div><div class="ttdeci">static const efftype_id effect_tapeworm(&quot;tapeworm&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a914db3df05fd548e81adc85699eaaf05"><div class="ttname"><a href="iuse_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a></div><div class="ttdeci">static const efftype_id effect_paincysts(&quot;paincysts&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af39c36bbd4b4d5ea9cc11bbaba43570f"><div class="ttname"><a href="iuse_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a></div><div class="ttdeci">static const efftype_id effect_brainworms(&quot;brainworms&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="iuse_8cpp.html#a0c3aa853465e1c40dccbc7e16414c7bd">effect_blood_spiders</a>, <a class="el" href="iuse_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a>, <a class="el" href="iuse_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a>, <a class="el" href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a>, <a class="el" href="iuse_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a>, <a class="el" href="iuse_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a>, <a class="el" href="character_8h_source.html#l02729">Character::guts</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="iuse_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00349">m_mixed</a>, <a class="el" href="stomach_8cpp_source.html#l00415">stomach_contents::mod_nutr()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, and <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad124568be7fc9e3b53fd22e409ffd105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad124568be7fc9e3b53fd22e409ffd105">&#9670;&nbsp;</a></span>bell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::bell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05281">5281</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;{</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a063489e6fa1f84ae993db988b9045b5f">itype_cow_bell</a> ) {</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 12, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Clank!  Clank!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>,</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;                       <span class="stringliteral">&quot;cow_bell&quot;</span> );</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">is_deaf</a>() ) {</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;            <span class="keyword">auto</span> cattle_level =</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">mutation_category_level</a>.find( <a class="code" href="iuse_8cpp.html#a0b873da1564446cbd394922258c8bf0a">mutation_category_CATTLE</a> );</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> cow_factor = 1 + ( cattle_level == p-&gt;<a class="code" href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">mutation_category_level</a>.end() ?</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;                                         0 : cattle_level-&gt;second );</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( cow_factor, 1 + cow_factor ) ) {</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a8e336d6b24cd55f48ba13b9a62519ffb">MORALE_MUSIC</a>, 1, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( cow_factor, 100 ) );</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;            }</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        }</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 4, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ring!  Ring!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;bell&quot;</span> );</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;    }</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00784">calendar.cpp:784</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6c503eb356bd61d6433d49d0a5ebf984"><div class="ttname"><a href="classCharacter.html#a6c503eb356bd61d6433d49d0a5ebf984">Character::mutation_category_level</a></div><div class="ttdeci">std::map&lt; mutation_category_id, int &gt; mutation_category_level</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03179">character.h:3179</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aclassCharacter_html_aecadb13556a47d015e1a1ac7c46d56a7"><div class="ttname"><a href="classCharacter.html#aecadb13556a47d015e1a1ac7c46d56a7">Character::is_deaf</a></div><div class="ttdeci">bool is_deaf() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04614">character.cpp:4614</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassitem_html_a4a9972e826d25be6736b749ab94b230f"><div class="ttname"><a href="classitem.html#a4a9972e826d25be6736b749ab94b230f">item::typeId</a></div><div class="ttdeci">itype_id typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11850">item.cpp:11850</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a063489e6fa1f84ae993db988b9045b5f"><div class="ttname"><a href="iuse_8cpp.html#a063489e6fa1f84ae993db988b9045b5f">itype_cow_bell</a></div><div class="ttdeci">static const itype_id itype_cow_bell(&quot;cow_bell&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a0b873da1564446cbd394922258c8bf0a"><div class="ttname"><a href="iuse_8cpp.html#a0b873da1564446cbd394922258c8bf0a">mutation_category_CATTLE</a></div><div class="ttdeci">static const mutation_category_id mutation_category_CATTLE(&quot;CATTLE&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amorale__types_8cpp_html_a8e336d6b24cd55f48ba13b9a62519ffb"><div class="ttname"><a href="morale__types_8cpp.html#a8e336d6b24cd55f48ba13b9a62519ffb">MORALE_MUSIC</a></div><div class="ttdeci">const morale_type MORALE_MUSIC(&quot;morale_music&quot;)</div></div>
<div class="ttc" id="anamespacesounds_html_a6bb79ae1c9c3dcd8c8e0b28c66b0398d"><div class="ttname"><a href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a></div><div class="ttdeci">void sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description, bool ambient=false, const std::string &amp;id=&quot;&quot;, const std::string &amp;variant=&quot;default&quot;)</div><div class="ttdoc">Sound at (p) of intensity (vol)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00318">sounds.cpp:318</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a></div><div class="ttdeci">@ music</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l04614">Character::is_deaf()</a>, <a class="el" href="iuse_8cpp.html#a063489e6fa1f84ae993db988b9045b5f">itype_cow_bell</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="morale__types_8cpp.html#a8e336d6b24cd55f48ba13b9a62519ffb">MORALE_MUSIC</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::music</a>, <a class="el" href="iuse_8cpp.html#a0b873da1564446cbd394922258c8bf0a">mutation_category_CATTLE</a>, <a class="el" href="character_8h_source.html#l03179">Character::mutation_category_level</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="calendar_8cpp_source.html#l00784">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5ae12ec7d9025b6ad54b9380ad2bc34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae12ec7d9025b6ad54b9380ad2bc34e">&#9670;&nbsp;</a></span>binder_add_recipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::binder_add_recipe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>binder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08756">8756</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;{</div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;    }</div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160; </div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You rethink trying to write underwater.&quot;</span> ) );</div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;    }</div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160; </div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> crafting_inv = p-&gt;<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;    <span class="keyword">const</span> std::vector&lt;const item *&gt; writing_tools = crafting_inv.<a class="code" href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">items_with</a>( [&amp;]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a> ) &amp;&amp; it.<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p );</div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;    } );</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160; </div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;    <span class="keywordflow">if</span>( writing_tools.empty() ) {</div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have anything to write with.&quot;</span> ) );</div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;    }</div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160; </div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4.0f ) {</div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s too dark to write!&quot;</span> ) );</div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;    }</div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160; </div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;    <span class="keyword">const</span> <a class="code" href="classrecipe__subset.html">recipe_subset</a> res = p-&gt;<a class="code" href="classCharacter.html#a550c8c5c6bdba68da13f0d9f11b0ba47">get_recipes_from_books</a>( crafting_inv );</div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;    <span class="keyword">const</span> std::vector&lt;const recipe *&gt; recipes( res.<a class="code" href="classrecipe__subset.html#a36c25155236247c865a9e1c96670ff9e">begin</a>(), res.<a class="code" href="classrecipe__subset.html#a31ca9e11ad90f60465229e44bab3b295">end</a>() );</div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> enough_writing_tool_charges = [&amp;writing_tools]( <span class="keywordtype">int</span> pages ) {</div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : writing_tools ) {</div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>() == 0 ) {</div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;            }</div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;            pages -= it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() / it-&gt;<a class="code" href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">ammo_required</a>();</div>
<div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;            <span class="keywordflow">if</span>( pages &lt;= 0 ) {</div>
<div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;            }</div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;        }</div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;    };</div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160; </div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;    <a class="code" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;    menu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose recipe to copy&quot;</span> );</div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;    menu.<a class="code" href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">hilight_disabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;    menu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *r : recipes ) {</div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;        std::string desc;</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pages = <a class="code" href="classbookbinder__copy__activity__actor.html#aa21361e9d78d53d90051ce463f5853e7">bookbinder_copy_activity_actor::pages_for_recipe</a>( *r );</div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;        <span class="keyword">const</span> std::string pages_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;%1$d page&quot;</span>, <span class="stringliteral">&quot;%1$d pages&quot;</span>, pages ), pages );</div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160; </div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( <a class="code" href="iuse_8cpp.html#a4a2fe33602bcbe7e9468053d2a84fa53">itype_paper</a>, pages ) ) {</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;            desc = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have enough paper to copy this recipe.&quot;</span> );</div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( binder-&gt;<a class="code" href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">remaining_ammo_capacity</a>() &lt;  pages ) {</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;            desc = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your recipe book can not fit this recipe.&quot;</span> );</div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( binder-&gt;<a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>().count( r-&gt;ident() ) != 0 ) {</div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;            desc = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your recipe book already has a recipe for %s.&quot;</span> ), r-&gt;result_name() );</div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !enough_writing_tool_charges( pages ) ) {</div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;            desc = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your writing tools do not have enough charges.&quot;</span> );</div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;        }</div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;        menu.<a class="code" href="classuilist.html#aeb94dad388233cff38909c131ae31f99">addentry_col</a>( -1, desc.empty(), std::nullopt, r-&gt;result_name(), pages_str, desc );</div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;    }</div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;    <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.empty() ) {</div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You do not have any recipes you can copy.&quot;</span> ) );</div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;    }</div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;    menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;    <span class="keywordflow">if</span>( menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 ) {</div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;    }</div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160; </div>
<div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;    <a class="code" href="classbookbinder__copy__activity__actor.html">bookbinder_copy_activity_actor</a> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code" href="classitem__location.html">item_location</a>( *p, binder ), recipes[menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>]-&gt;ident() );</div>
<div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160; </div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2e48b53e07d4a302039de49cacec41f2"><div class="ttname"><a href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">Character::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const tripoint &amp;p=tripoint_min) const</div><div class="ttdoc">Returns a value from 1.0 to 11.0 that acts as a multiplier for the time taken to perform tasks that r...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02791">character.cpp:2791</a></div></div>
<div class="ttc" id="aclassCharacter_html_a35e813323d0b9a1754cb6fdb078aafa2"><div class="ttname"><a href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">Character::cant_do_mounted</a></div><div class="ttdeci">bool cant_do_mounted(bool msg=true) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01720">character.cpp:1720</a></div></div>
<div class="ttc" id="aclassCharacter_html_a550c8c5c6bdba68da13f0d9f11b0ba47"><div class="ttname"><a href="classCharacter.html#a550c8c5c6bdba68da13f0d9f11b0ba47">Character::get_recipes_from_books</a></div><div class="ttdeci">recipe_subset get_recipes_from_books(const inventory &amp;crafting_inv) const</div><div class="ttdoc">Returns all recipes that are known from the books (either in inventory or nearby).</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00122">character_crafting.cpp:122</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa33f9870c95a95d8a46423c9d6477d99"><div class="ttname"><a href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">Character::has_charges</a></div><div class="ttdeci">bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09586">character.cpp:9586</a></div></div>
<div class="ttc" id="aclassCharacter_html_ace218285f4fbc7c7a9feac8378bc632e"><div class="ttname"><a href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">Character::crafting_inventory</a></div><div class="ttdeci">const inventory &amp; crafting_inventory(bool clear_path) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00629">crafting.cpp:629</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7d50915d362a56eeff40bc6b392326d"><div class="ttname"><a href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">Character::assign_activity</a></div><div class="ttdeci">void assign_activity(const activity_id &amp;type, int moves=calendar::INDEFINITELY_LONG, int index=-1, int pos=INT_MIN, const std::string &amp;name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08935">character.cpp:8935</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00292">creature.cpp:292</a></div></div>
<div class="ttc" id="aclassbookbinder__copy__activity__actor_html"><div class="ttname"><a href="classbookbinder__copy__activity__actor.html">bookbinder_copy_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00237">activity_actor_definitions.h:238</a></div></div>
<div class="ttc" id="aclassbookbinder__copy__activity__actor_html_aa21361e9d78d53d90051ce463f5853e7"><div class="ttname"><a href="classbookbinder__copy__activity__actor.html#aa21361e9d78d53d90051ce463f5853e7">bookbinder_copy_activity_actor::pages_for_recipe</a></div><div class="ttdeci">static int pages_for_recipe(const recipe &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00262">activity_actor_definitions.h:262</a></div></div>
<div class="ttc" id="aclassinventory_html"><div class="ttname"><a href="classinventory.html">inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory_8h_source.html#l00107">inventory.h:108</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00028">item_location.h:29</a></div></div>
<div class="ttc" id="aclassitem_html_a3e532e4e5b7cef943634b1d910f99384"><div class="ttname"><a href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">item::has_flag</a></div><div class="ttdeci">bool has_flag(const flag_id &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07578">item.cpp:7578</a></div></div>
<div class="ttc" id="aclassitem_html_a428ea67bcf1a68b717f7cd4871b0b980"><div class="ttname"><a href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining(const Character *carrier=nullptr, bool include_linked=false) const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10739">item.cpp:10739</a></div></div>
<div class="ttc" id="aclassitem_html_a7dc5d9ccf5638ae80cebe1864050fa26"><div class="ttname"><a href="classitem.html#a7dc5d9ccf5638ae80cebe1864050fa26">item::ammo_required</a></div><div class="ttdeci">int ammo_required() const</div><div class="ttdoc">Quantity of ammunition consumed per usage of tool or with each shot of gun.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10821">item.cpp:10821</a></div></div>
<div class="ttc" id="aclassitem_html_aa75b056a2af85e5706c7629d1bbbaf06"><div class="ttname"><a href="classitem.html#aa75b056a2af85e5706c7629d1bbbaf06">item::remaining_ammo_capacity</a></div><div class="ttdeci">int remaining_ammo_capacity() const</div><div class="ttdoc">how much more ammo can fit into this item if this item is not loaded, gives remaining capacity of its...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10787">item.cpp:10787</a></div></div>
<div class="ttc" id="aclassitem_html_aeaf79d99756c14502ef9ee8860514662"><div class="ttname"><a href="classitem.html#aeaf79d99756c14502ef9ee8860514662">item::get_saved_recipes</a></div><div class="ttdeci">std::set&lt; recipe_id &gt; get_saved_recipes() const</div><div class="ttdoc">Returns recipes stored on the item (laptops, smartphones, sd cards etc) Filters out !...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10287">item.cpp:10287</a></div></div>
<div class="ttc" id="aclassrecipe__subset_html"><div class="ttname"><a href="classrecipe__subset.html">recipe_subset</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8h_source.html#l00090">recipe_dictionary.h:91</a></div></div>
<div class="ttc" id="aclassrecipe__subset_html_a31ca9e11ad90f60465229e44bab3b295"><div class="ttname"><a href="classrecipe__subset.html#a31ca9e11ad90f60465229e44bab3b295">recipe_subset::end</a></div><div class="ttdeci">std::set&lt; const recipe * &gt;::const_iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8h_source.html#l00198">recipe_dictionary.h:198</a></div></div>
<div class="ttc" id="aclassrecipe__subset_html_a36c25155236247c865a9e1c96670ff9e"><div class="ttname"><a href="classrecipe__subset.html#a36c25155236247c865a9e1c96670ff9e">recipe_subset::begin</a></div><div class="ttdeci">std::set&lt; const recipe * &gt;::const_iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe__dictionary_8h_source.html#l00194">recipe_dictionary.h:194</a></div></div>
<div class="ttc" id="aclassrecipe_html"><div class="ttname"><a href="classrecipe.html">recipe</a></div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00086">recipe.h:87</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00451">ui.h:451</a></div></div>
<div class="ttc" id="aclassuilist_html_ae4ae08b4f010935825c956ea705065aa"><div class="ttname"><a href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">uilist::hilight_disabled</a></div><div class="ttdeci">bool hilight_disabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00467">ui.h:467</a></div></div>
<div class="ttc" id="aclassuilist_html_aeb94dad388233cff38909c131ae31f99"><div class="ttname"><a href="classuilist.html#aeb94dad388233cff38909c131ae31f99">uilist::addentry_col</a></div><div class="ttdeci">void addentry_col(int retval, bool enabled, int key, const std::string &amp;txt, const std::string &amp;column, const std::string &amp;desc=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01244">ui.cpp:1244</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00422">ui.h:422</a></div></div>
<div class="ttc" id="aclassvisitable_html_a3e80572268abd951cf016d275febe4e6"><div class="ttname"><a href="classvisitable.html#a3e80572268abd951cf016d275febe4e6">visitable::items_with</a></div><div class="ttdeci">std::vector&lt; const item * &gt; items_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00330">visitable.cpp:330</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a969363fa9d77d33f00efed259dc98322"><div class="ttname"><a href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a></div><div class="ttdeci">const flag_id flag_WRITE_MESSAGE(&quot;WRITE_MESSAGE&quot;)</div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a4a2fe33602bcbe7e9468053d2a84fa53"><div class="ttname"><a href="iuse_8cpp.html#a4a2fe33602bcbe7e9468053d2a84fa53">itype_paper</a></div><div class="ttdeci">static const itype_id itype_paper(&quot;paper&quot;)</div></div>
<div class="ttc" id="asounds_8cpp_html_ad9fe7b616a93a8209da903eba756237e"><div class="ttname"><a href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a></div><div class="ttdeci">static activity_id act</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00079">sounds.cpp:79</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="atranslations_8h_html_a45dd4e3da9b83845bcd1c2d8e80cf802"><div class="ttname"><a href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a></div><div class="ttdeci">#define n_gettext(STRING1, STRING2, COUNT)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00091">translations.h:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01244">uilist::addentry_col()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l10821">item::ammo_required()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="recipe__dictionary_8h_source.html#l00194">recipe_subset::begin()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="ui_8h_source.html#l00451">uilist::desc_enabled</a>, <a class="el" href="recipe__dictionary_8h_source.html#l00198">recipe_subset::end()</a>, <a class="el" href="ui_8h_source.html#l00422">uilist::entries</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="flag_8cpp.html#a969363fa9d77d33f00efed259dc98322">flag_WRITE_MESSAGE</a>, <a class="el" href="character__crafting_8cpp_source.html#l00122">Character::get_recipes_from_books()</a>, <a class="el" href="item_8cpp_source.html#l10287">item::get_saved_recipes()</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="ui_8h_source.html#l00467">uilist::hilight_disabled</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="visitable_8cpp_source.html#l00330">visitable::items_with()</a>, <a class="el" href="iuse_8cpp.html#a4a2fe33602bcbe7e9468053d2a84fa53">itype_paper</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00262">bookbinder_copy_activity_actor::pages_for_recipe()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="item_8cpp_source.html#l10787">item::remaining_ammo_capacity()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="af11a0b1f048dc2e56a03590765cb6b34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11a0b1f048dc2e56a03590765cb6b34">&#9670;&nbsp;</a></span>binder_manage_recipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::binder_manage_recipe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>binder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>ipos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08832">8832</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;{</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Doing that would ruin the %1$s.&quot;</span> ), binder-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;    }</div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160; </div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;    std::set&lt;recipe_id&gt; binder_recipes = binder-&gt;<a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>();</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;    <span class="keyword">const</span> std::vector&lt;recipe_id&gt; recipes( binder_recipes.begin(), binder_recipes.end() );</div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160; </div>
<div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;    <span class="keywordflow">if</span>( binder_recipes.empty() ) {</div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no recipes to manage.&quot;</span> ) );</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;    }</div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160; </div>
<div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;    <a class="code" href="classuilist.html">uilist</a> rmenu;</div>
<div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;    rmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Manage recipes&quot;</span> );</div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160; </div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;new_recipe : recipes ) {</div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;        std::string recipe_name = new_recipe-&gt;result_name();</div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">knows_recipe</a>( &amp;new_recipe.obj() ) ) {</div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;            recipe_name += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (KNOWN)&quot;</span> );</div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;        }</div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160; </div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pages = <a class="code" href="classbookbinder__copy__activity__actor.html#aa21361e9d78d53d90051ce463f5853e7">bookbinder_copy_activity_actor::pages_for_recipe</a>( *new_recipe );</div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;        rmenu.<a class="code" href="classuilist.html#aeb94dad388233cff38909c131ae31f99">addentry_col</a>( -1, <span class="keyword">true</span>, <span class="charliteral">&#39; &#39;</span>, recipe_name,</div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;                            <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;%1$d page&quot;</span>, <span class="stringliteral">&quot;%1$d pages&quot;</span>, pages ), pages ) );</div>
<div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;    }</div>
<div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160; </div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;    rmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;    <span class="keywordflow">if</span>( rmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 ) {</div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;    }</div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;rec = recipes[rmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>];</div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove the recipe for %1$s?&quot;</span> ), rec-&gt;<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() ) ) {</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;    }</div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;    binder_recipes.erase( rec );</div>
<div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;    binder-&gt;<a class="code" href="classitem.html#af849bd11bb6afad312bb858a2f21021b">set_saved_recipes</a>( binder_recipes );</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160; </div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pages = <a class="code" href="classbookbinder__copy__activity__actor.html#aa21361e9d78d53d90051ce463f5853e7">bookbinder_copy_activity_actor::pages_for_recipe</a>( *rec );</div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;    binder-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( pages, ipos, p );</div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160; </div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7950b035ea05fa28a0851b4107377265"><div class="ttname"><a href="classCharacter.html#a7950b035ea05fa28a0851b4107377265">Character::knows_recipe</a></div><div class="ttdeci">bool knows_recipe(const recipe *rec) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00026">character_crafting.cpp:26</a></div></div>
<div class="ttc" id="aclassitem_html_a57b10fc9db286a3449ddc92ab3d896f5"><div class="ttname"><a href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">item::ammo_consume</a></div><div class="ttdeci">int ammo_consume(int qty, const tripoint &amp;pos, Character *carrier)</div><div class="ttdoc">Consume ammo (if available) and return the amount of ammo that was consumed Consume order: loaded ite...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10878">item.cpp:10878</a></div></div>
<div class="ttc" id="aclassitem_html_af849bd11bb6afad312bb858a2f21021b"><div class="ttname"><a href="classitem.html#af849bd11bb6afad312bb858a2f21021b">item::set_saved_recipes</a></div><div class="ttdeci">void set_saved_recipes(const std::set&lt; recipe_id &gt; &amp;recipes)</div><div class="ttdoc">Sets recipes stored on the item (laptops, smartphones, sd cards etc)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10308">item.cpp:10308</a></div></div>
<div class="ttc" id="aclassrecipe_html_a7aab303fc95f1e765db693bc59823ed6"><div class="ttname"><a href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">recipe::result_name</a></div><div class="ttdeci">std::string result_name(bool decorated=false) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l01216">recipe.cpp:1216</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; recipe &gt;</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00811">output.cpp:811</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01244">uilist::addentry_col()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10287">item::get_saved_recipes()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="character__crafting_8cpp_source.html#l00026">Character::knows_recipe()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00262">bookbinder_copy_activity_actor::pages_for_recipe()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="recipe_8cpp_source.html#l01216">recipe::result_name()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="item_8cpp_source.html#l10308">item::set_saved_recipes()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a0b9bfd559e1dfec2838f3b48f63e17c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b9bfd559e1dfec2838f3b48f63e17c8">&#9670;&nbsp;</a></span>blech()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::blech </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01054">1054</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;{</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// TODO: Add more effects?</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This looks unhealthy, sure you want to drink it?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">//Assume that if a blech consumable isn&#39;t a drink, it will be eaten.</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This looks unhealthy, sure you want to eat it?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#abb4cccd46c9ecd4ab9482d09b336f4ba">flag_ACID</a> ) &amp;&amp; ( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a> ) ||</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                                       p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a> ) ) ) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Blech, that tastes gross!&quot;</span> ) );</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">//reverse the harmful values of drinking this acid.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordtype">double</span> multiplier = -1;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#af942a9e51785fc36ec8b059dbe1028dc">mod_nutr</a>( -p-&gt;<a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">nutrition_for</a>( *it ) * multiplier );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( -it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench * multiplier );</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a62e153b0a72373e2101844281a7afcaa">mod_quench</a>( 20 ); <span class="comment">//acidproof people can drink acids like diluted water.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy * multiplier,</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                             it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy * multiplier );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ae5bf12aa6533cebf50765069d6d78eb0">MORALE_FOOD_BAD</a>, it-&gt;<a class="code" href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">get_comestible_fun</a>() * multiplier, 60, 1_hours, 30_minutes,</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                       <span class="keyword">false</span>, it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#abb4cccd46c9ecd4ab9482d09b336f4ba">flag_ACID</a> ) || it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5fe7b0e92871b9a78f8df4d3f5744c7d">flag_CORROSIVE</a> ) ) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Blech, that burns your throat!&quot;</span> ) );</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 32, 64 ) );</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, 1_hours );</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 4, 12 ) );</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Blech, you don&#39;t feel you can stomach much of that.&quot;</span> ) );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a>, 3_minutes );</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;}</div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00032">bodypart.h:32</a></div></div>
<div class="ttc" id="aclassCharacter_html_a358731acbb8b137aa540bb8d49109ca3"><div class="ttname"><a href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">Character::query_yn</a></div><div class="ttdeci">bool query_yn(const char *const msg, Args &amp;&amp;... args) const</div><div class="ttdoc">It is supposed to hide the query_yn to simplify player vs.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02544">character.h:2544</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aa889eacdf39af30d230991dd773bd1"><div class="ttname"><a href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">Character::mod_daily_health</a></div><div class="ttdeci">void mod_daily_health(int nhealthy_mod, int cap)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04334">character.cpp:4334</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72b82d2498ae823e0cd6cad311215327"><div class="ttname"><a href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">Character::vomit</a></div><div class="ttdeci">void vomit()</div><div class="ttdoc">Handles Character vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07521">character.cpp:7521</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7c11a4f12bee9f80279bff21faa54153"><div class="ttname"><a href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">Character::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id hurt, int dam, bool bypass_med=false) override</div><div class="ttdoc">Actually hurt the player, hurts a body_part directly, no armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08207">character.cpp:8207</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9ce2644a98b526b5e453b043f5fa49bc"><div class="ttname"><a href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">Character::mod_thirst</a></div><div class="ttdeci">void mod_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04528">character.cpp:4528</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa4ecfee35839a07be48afccbe582023e"><div class="ttname"><a href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">Character::stomach</a></div><div class="ttdeci">stomach_contents stomach</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02728">character.h:2728</a></div></div>
<div class="ttc" id="aclassCharacter_html_adfe305dc4dab1ce52dc6b46c73f4883f"><div class="ttname"><a href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">Character::nutrition_for</a></div><div class="ttdeci">int nutrition_for(const item &amp;comest) const</div><div class="ttdoc">Handles the nutrition value for a comestible.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00442">consumption.cpp:442</a></div></div>
<div class="ttc" id="aclassitem_html_a0795ac0d3e2ba958ab3a6ff4e282482b"><div class="ttname"><a href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">item::made_of</a></div><div class="ttdeci">const std::map&lt; material_id, int &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09146">item.cpp:9146</a></div></div>
<div class="ttc" id="aclassitem_html_a411163e892e27c57b802d0d015c05162"><div class="ttname"><a href="classitem.html#a411163e892e27c57b802d0d015c05162">item::get_comestible</a></div><div class="ttdeci">const cata::value_ptr&lt; islot_comestible &gt; &amp; get_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14803">item.cpp:14803</a></div></div>
<div class="ttc" id="aclassitem_html_a66b0bbc211f6fb668781640c971d3acc"><div class="ttname"><a href="classitem.html#a66b0bbc211f6fb668781640c971d3acc">item::get_comestible_fun</a></div><div class="ttdeci">int get_comestible_fun() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07798">item.cpp:7798</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03074">item.h:3074</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a62e153b0a72373e2101844281a7afcaa"><div class="ttname"><a href="classstomach__contents.html#a62e153b0a72373e2101844281a7afcaa">stomach_contents::mod_quench</a></div><div class="ttdeci">void mod_quench(int quench)</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00428">stomach.cpp:428</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a></div><div class="ttdeci">@ LIQUID</div></div>
<div class="ttc" id="aflag_8cpp_html_a5fe7b0e92871b9a78f8df4d3f5744c7d"><div class="ttname"><a href="flag_8cpp.html#a5fe7b0e92871b9a78f8df4d3f5744c7d">flag_CORROSIVE</a></div><div class="ttdeci">const flag_id flag_CORROSIVE(&quot;CORROSIVE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_abb4cccd46c9ecd4ab9482d09b336f4ba"><div class="ttname"><a href="flag_8cpp.html#abb4cccd46c9ecd4ab9482d09b336f4ba">flag_ACID</a></div><div class="ttdeci">const flag_id flag_ACID(&quot;ACID&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a5fccb1c22e58777ef464ef0cbb372541"><div class="ttname"><a href="iuse_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a></div><div class="ttdeci">static const trait_id trait_ACIDPROOF(&quot;ACIDPROOF&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac00dfe681a5a2f2b03bfe2ad27df1721"><div class="ttname"><a href="iuse_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a></div><div class="ttdeci">static const efftype_id effect_nausea(&quot;nausea&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ace42425e1e703ebbe953ade0f6110b7c"><div class="ttname"><a href="iuse_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a></div><div class="ttdeci">static const efftype_id effect_poison(&quot;poison&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af18c51d2a8f81b4d06912d40760e9691"><div class="ttname"><a href="iuse_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a></div><div class="ttdeci">static const trait_id trait_ACIDBLOOD(&quot;ACIDBLOOD&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae5bf12aa6533cebf50765069d6d78eb0"><div class="ttname"><a href="morale__types_8cpp.html#ae5bf12aa6533cebf50765069d6d78eb0">MORALE_FOOD_BAD</a></div><div class="ttdeci">const morale_type MORALE_FOOD_BAD(&quot;morale_food_bad&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08207">Character::apply_damage()</a>, <a class="el" href="iuse_8cpp.html#ac00dfe681a5a2f2b03bfe2ad27df1721">effect_nausea</a>, <a class="el" href="iuse_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, <a class="el" href="flag_8cpp.html#abb4cccd46c9ecd4ab9482d09b336f4ba">flag_ACID</a>, <a class="el" href="flag_8cpp.html#a5fe7b0e92871b9a78f8df4d3f5744c7d">flag_CORROSIVE</a>, <a class="el" href="item_8cpp_source.html#l14803">item::get_comestible()</a>, <a class="el" href="item_8cpp_source.html#l07798">item::get_comestible_fun()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="character_8cpp_source.html#l04334">Character::mod_daily_health()</a>, <a class="el" href="stomach_8cpp_source.html#l00415">stomach_contents::mod_nutr()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="stomach_8cpp_source.html#l00428">stomach_contents::mod_quench()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="morale__types_8cpp.html#ae5bf12aa6533cebf50765069d6d78eb0">MORALE_FOOD_BAD</a>, <a class="el" href="consumption_8cpp_source.html#l00442">Character::nutrition_for()</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="character_8h_source.html#l02728">Character::stomach</a>, <a class="el" href="iuse_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a>, <a class="el" href="iuse_8cpp.html#a5fccb1c22e58777ef464ef0cbb372541">trait_ACIDPROOF</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="character_8cpp_source.html#l07521">Character::vomit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="iuse_8cpp_source.html#l01108">plantblech()</a>.</p>

</div>
</div>
<a id="a281d73413ffa3a2a01fc89190e132bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281d73413ffa3a2a01fc89190e132bcd">&#9670;&nbsp;</a></span>blech_because_unclean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::blech_because_unclean </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01092">1092</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;{</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This looks unclean; are you sure you want to drink it?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">//Assume that if a blech consumable isn&#39;t a drink, it will be eaten.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This looks unclean; are you sure you want to eat it?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, and <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae22258fb2a1d2ff3ab4d592f76160588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22258fb2a1d2ff3ab4d592f76160588">&#9670;&nbsp;</a></span>blood_draw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::blood_draw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04389">4389</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;{</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;        <span class="keywordflow">return</span> std::nullopt;    <span class="comment">// No NPCs for now!</span></div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    }</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    }</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() ) {</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s is full!&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    }</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160; </div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <a class="code" href="classitem.html">item</a> blood( <span class="stringliteral">&quot;blood&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <span class="keywordtype">bool</span> drew_blood = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;    <span class="keywordtype">bool</span> acid_blood = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;    <span class="keywordtype">bool</span> vampire = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::temperature</a> blood_temp = <a class="code" href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a>( -1.0f ); <span class="comment">//kelvins</span></div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;map_it : <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().i_at( <a class="code" href="structpoint.html">point</a>( p-&gt;<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>(), p-&gt;<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() ) ) ) {</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;        <span class="keywordflow">if</span>( map_it.is_corpse() &amp;&amp;</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;            <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Draw blood from %s?&quot;</span> ),</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;                      <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( map_it.tname(), map_it.color_in_inventory() ) ) ) {</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drew blood from the %s&quot;</span> ), map_it.tname() );</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;            drew_blood = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;            blood_temp = map_it.temperature;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160; </div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;            <a class="code" href="classint__id.html">field_type_id</a> bloodtype( map_it.get_mtype()-&gt;bloodType() );</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;            <span class="keywordflow">if</span>( bloodtype.obj().has_acid ) {</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;                acid_blood = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;                blood.set_mtype( map_it.get_mtype() );</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160; </div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structharvest__entry.html">harvest_entry</a> &amp;entry : map_it.get_mtype()-&gt;harvest.obj() ) {</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;                    <span class="keywordflow">if</span>( entry.type == <a class="code" href="iuse_8cpp.html#ad2c8a56774ced219b6509ba6bf2f9380">harvest_drop_blood</a> ) {</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;                        blood.convert( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( entry.drop ) );</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                    }</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                }</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;            }</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;        }</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;    }</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160; </div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;    <span class="keywordflow">if</span>( !drew_blood &amp;&amp; <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Draw your own blood?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You drew your own blood&quot;</span> ) );</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;        drew_blood = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;        blood_temp = <a class="code" href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a>( 37 );</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a> ) ) {</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;            acid_blood = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        }</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a9319c55fcaea262e1af9715f8c1b14dc">trait_VAMPIRE</a> ) ) {</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;            vampire = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;        }</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;        <span class="comment">// From wikipedia,</span></div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;        <span class="comment">// &quot;To compare, this (volume of blood loss that causes death) is five to eight times</span></div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        <span class="comment">// as much blood as people usually give in a blood donation.[2]&quot;</span></div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;        <span class="comment">// This is half a TU, hence I&#39;m setting it to 1/10th of a lethal exsanguination.</span></div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( <a class="code" href="iuse_8cpp.html#a0d60f3a7b773ff207225d45af8f4acfc">vitamin_redcells</a>, <a class="code" href="iuse_8cpp.html#a0d60f3a7b773ff207225d45af8f4acfc">vitamin_redcells</a>-&gt;<a class="code" href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">min</a>() / 10 );</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( <a class="code" href="iuse_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a>, <a class="code" href="iuse_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a>-&gt;<a class="code" href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">min</a>() / 10 );</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( 3 );</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    }</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    <span class="keywordflow">if</span>( acid_blood ) {</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;        <a class="code" href="classitem.html">item</a> <a class="code" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>( <span class="stringliteral">&quot;blood_acid&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;        <a class="code" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>.set_item_temperature( blood_temp );</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        it-&gt;<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( <a class="code" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">inc_damage</a>() ) {</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;but acidic blood melts the %s, destroying it!&quot;</span> ),</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;                                      it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( it );</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;            }</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;but acidic blood damages the %s!&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;        }</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    }</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">if</span>( vampire ) {</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( <a class="code" href="iuse_8cpp.html#a4bc8f583fb82b3118d91b3878e2715d1">vitamin_human_blood_vitamin</a>, -500 );</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    }</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160; </div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">if</span>( !drew_blood ) {</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;        <span class="keywordflow">return</span> std::nullopt;;</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    }</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160; </div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;    blood.set_item_temperature( blood_temp );</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    it-&gt;<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( blood, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 5_seconds ) );</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a379081ad133b17e4ab3d230270b2414d"><div class="ttname"><a href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">Character::i_rem</a></div><div class="ttdeci">item i_rem(const item *it)</div><div class="ttdoc">Remove a specific item from player possession.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00433">character_inventory.cpp:433</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae411805e21f6e2adcca747c5c61b9be0"><div class="ttname"><a href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">Character::vitamin_mod</a></div><div class="ttdeci">int vitamin_mod(const vitamin_id &amp;vit, int qty)</div><div class="ttdoc">Add or subtract vitamins from character storage pools.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00624">consumption.cpp:624</a></div></div>
<div class="ttc" id="aclassCreature_html_a9f0365208b65ab1c45d23f03f402f491"><div class="ttname"><a href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">Creature::posy</a></div><div class="ttdeci">int posy() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00314">creature.h:314</a></div></div>
<div class="ttc" id="aclassCreature_html_aecea7d852ffba499ec12350c95340b9d"><div class="ttname"><a href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">Creature::posx</a></div><div class="ttdeci">int posx() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00311">creature.h:311</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; field_type &gt;</a></div></div>
<div class="ttc" id="aclassitem_html_a018fe1a11eaa7e18cae915d683088c02"><div class="ttname"><a href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">item::put_in</a></div><div class="ttdeci">ret_val&lt; void &gt; put_in(const item &amp;payload, pocket_type pk_type, bool unseal_pockets=false, Character *carrier=nullptr)</div><div class="ttdoc">Puts the given item into this one.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01784">item.cpp:1784</a></div></div>
<div class="ttc" id="aclassitem_html_a6dc463a17ae0cac2850b6d1bc8b34fa7"><div class="ttname"><a href="classitem.html#a6dc463a17ae0cac2850b6d1bc8b34fa7">item::inc_damage</a></div><div class="ttdeci">bool inc_damage()</div><div class="ttdoc">Same as mod_damage( itype::damage_scale ), advances item to next damage level.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08947">item.cpp:8947</a></div></div>
<div class="ttc" id="aclassitem_html_ae05d298b2cf91e4c12d5beca5f38c67f"><div class="ttname"><a href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">item::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15135">item.cpp:15135</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassvitamin_html_acfc2222126afc9c1040c1d71fb75ebe1"><div class="ttname"><a href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">vitamin::min</a></div><div class="ttdeci">int min() const</div><div class="ttdoc">Lower bound for deficiency of this vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00070">vitamin.h:70</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a0d60f3a7b773ff207225d45af8f4acfc"><div class="ttname"><a href="iuse_8cpp.html#a0d60f3a7b773ff207225d45af8f4acfc">vitamin_redcells</a></div><div class="ttdeci">static const vitamin_id vitamin_redcells(&quot;redcells&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a0fc6709b43edf2d7ca11dccafdb71052"><div class="ttname"><a href="iuse_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a></div><div class="ttdeci">static const vitamin_id vitamin_blood(&quot;blood&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a4bc8f583fb82b3118d91b3878e2715d1"><div class="ttname"><a href="iuse_8cpp.html#a4bc8f583fb82b3118d91b3878e2715d1">vitamin_human_blood_vitamin</a></div><div class="ttdeci">static const vitamin_id vitamin_human_blood_vitamin(&quot;human_blood_vitamin&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a9319c55fcaea262e1af9715f8c1b14dc"><div class="ttname"><a href="iuse_8cpp.html#a9319c55fcaea262e1af9715f8c1b14dc">trait_VAMPIRE</a></div><div class="ttdeci">static const trait_id trait_VAMPIRE(&quot;VAMPIRE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad2c8a56774ced219b6509ba6bf2f9380"><div class="ttname"><a href="iuse_8cpp.html#ad2c8a56774ced219b6509ba6bf2f9380">harvest_drop_blood</a></div><div class="ttdeci">static const harvest_drop_type_id harvest_drop_blood(&quot;blood&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacemattack_html_acdda0be7e7c8dabb76e9bd130547a3fa"><div class="ttname"><a href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">mattack::acid</a></div><div class="ttdeci">bool acid(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00767">monattack.cpp:767</a></div></div>
<div class="ttc" id="anamespaceunits_html_a5152e4aef05ed3617e160e36b95ef3ad"><div class="ttname"><a href="namespaceunits.html#a5152e4aef05ed3617e160e36b95ef3ad">units::from_celsius</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature::value_type, temperature_in_kelvin_tag &gt; from_celsius(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00418">units.h:418</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae0a8630df3fd6591e6014e1f888bf318"><div class="ttname"><a href="namespaceunits.html#ae0a8630df3fd6591e6014e1f888bf318">units::from_kelvin</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature::value_type, temperature_in_kelvin_tag &gt; from_kelvin(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00404">units.h:404</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a></div><div class="ttdeci">@ CONTAINER</div></div>
<div class="ttc" id="astructharvest__entry_html"><div class="ttname"><a href="structharvest__entry.html">harvest_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="harvest_8h_source.html#l00073">harvest.h:73</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00020">point.h:20</a></div></div>
<div class="ttc" id="atype__id_8h_html_ac2f82f863d4e9e8f267a77a73910ebbf"><div class="ttname"><a href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a></div><div class="ttdeci">string_id&lt; itype &gt; itype_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00122">type_id.h:122</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="monattack_8cpp_source.html#l00767">mattack::acid()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8cpp_source.html#l15135">item::empty()</a>, <a class="el" href="units_8h_source.html#l00418">units::from_celsius()</a>, <a class="el" href="units_8h_source.html#l00404">units::from_kelvin()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp.html#ad2c8a56774ced219b6509ba6bf2f9380">harvest_drop_blood</a>, <a class="el" href="field__type_8h_source.html#l00206">field_type::has_acid</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00433">Character::i_rem()</a>, <a class="el" href="item_8cpp_source.html#l08947">item::inc_damage()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="vitamin_8h_source.html#l00070">vitamin::min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="item_8cpp_source.html#l01784">item::put_in()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="item_8cpp_source.html#l12146">item::set_item_temperature()</a>, <a class="el" href="item_8cpp_source.html#l09568">item::set_mtype()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a>, <a class="el" href="iuse_8cpp.html#a9319c55fcaea262e1af9715f8c1b14dc">trait_VAMPIRE</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="iuse_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a>, <a class="el" href="iuse_8cpp.html#a4bc8f583fb82b3118d91b3878e2715d1">vitamin_human_blood_vitamin</a>, <a class="el" href="consumption_8cpp_source.html#l00624">Character::vitamin_mod()</a>, and <a class="el" href="iuse_8cpp.html#a0d60f3a7b773ff207225d45af8f4acfc">vitamin_redcells</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8bb8d8a8da543e07d5c9a38dc70a1de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bb8d8a8da543e07d5c9a38dc70a1de0">&#9670;&nbsp;</a></span>boltcutters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::boltcutters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04726">4726</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;{</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;    }</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160; </div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f =</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;    [&amp;here, p]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( pnt ) ) {</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pnt )-&gt;<a class="code" href="structfurn__t.html#af1e8e4d4b7d29e3e96b36dd30ea16260">boltcut</a>-&gt;valid();</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a27531d8882b8c6684dfda1fa41acce1f">is_null</a>() ) {</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a008eeff484d6a94af38e8151b5b9bd13">boltcut</a>-&gt;valid();</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;        }</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;    };</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cut up metal where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no metal to cut up nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;    }</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You neatly sever all of the veins and arteries in your body.  Oh, wait; never mind.&quot;</span> ) );</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t cut that.&quot;</span> ) );</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        }</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;    }</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160; </div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classboltcutting__activity__actor.html">boltcutting_activity_actor</a>( pnt, <a class="code" href="classitem__location.html">item_location</a>{*p, it} ) );</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;}</div>
<div class="ttc" id="aaction_8cpp_html_aacc6080fc103e50e9a4b54671c1c031a"><div class="ttname"><a href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a></div><div class="ttdeci">std::optional&lt; tripoint &gt; choose_adjacent_highlight(const std::string &amp;message, const std::string &amp;failure_message, const action_id action, const bool allow_vertical, const bool allow_autoselect)</div><div class="ttdoc">Request player input of adjacent tile with highlighting, possibly on different z-level.</div><div class="ttdef"><b>Definition:</b> <a href="action_8cpp_source.html#l01212">action.cpp:1212</a></div></div>
<div class="ttc" id="aclassboltcutting__activity__actor_html"><div class="ttname"><a href="classboltcutting__activity__actor.html">boltcutting_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00586">activity_actor_definitions.h:587</a></div></div>
<div class="ttc" id="aclassmap_html_aba8f330c2cc25be0652489b42d8dd530"><div class="ttname"><a href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">map::ter</a></div><div class="ttdeci">ter_id ter(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01922">map.cpp:1922</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="astructfurn__t_html_af1e8e4d4b7d29e3e96b36dd30ea16260"><div class="ttname"><a href="structfurn__t.html#af1e8e4d4b7d29e3e96b36dd30ea16260">furn_t::boltcut</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_furn &gt; boltcut</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00660">mapdata.h:660</a></div></div>
<div class="ttc" id="astructter__t_html_a008eeff484d6a94af38e8151b5b9bd13"><div class="ttname"><a href="structter__t.html#a008eeff484d6a94af38e8151b5b9bd13">ter_t::boltcut</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_ter &gt; boltcut</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00609">mapdata.h:609</a></div></div>
<div class="ttc" id="astructter__t_html_a27531d8882b8c6684dfda1fa41acce1f"><div class="ttname"><a href="structter__t.html#a27531d8882b8c6684dfda1fa41acce1f">ter_t::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00864">mapdata.cpp:864</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="mapdata_8h_source.html#l00609">ter_t::boltcut</a>, <a class="el" href="mapdata_8h_source.html#l00660">furn_t::boltcut</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00864">ter_t::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, and <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a4b30807de7680324f381aea4345eeea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b30807de7680324f381aea4345eeea2">&#9670;&nbsp;</a></span>break_stick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::break_stick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08253">8253</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;{</div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac29de3d2bc90dd1c8d921b539fb05cfb">mod_stamina</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( 0.05f * p-&gt;<a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() ) );</div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160; </div>
<div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() &lt; 5 ) {</div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too weak to even try.&quot;</span> ) );</div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">get_str</a>() &lt;= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 11 ) ) {</div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You use all your strength, but the stick won&#39;t break.  Perhaps try again?&quot;</span> ) );</div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;    }</div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;    std::vector&lt;item_comp&gt; comps;</div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;    comps.emplace_back( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), 1 );</div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( comps, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;    <span class="keywordtype">int</span> chance = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 100 );</div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;    <span class="keywordflow">if</span>( chance &lt;= 20 ) {</div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to break the stick in two, but it shatters into splinters.&quot;</span> ) );</div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;splinter&quot;</span>, 2 );</div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( chance &lt;= 40 ) {</div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The stick breaks clean into two parts.&quot;</span> ) );</div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;stick&quot;</span>, 2 );</div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( chance &lt;= 100 ) {</div>
<div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You break the stick, but one half shatters into splinters.&quot;</span> ) );</div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;stick&quot;</span>, 1 );</div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;        here.<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <span class="stringliteral">&quot;splinter&quot;</span>, 1 );</div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;    }</div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a5aba683ccf77cb560a0a932308289bd9"><div class="ttname"><a href="classCharacter.html#a5aba683ccf77cb560a0a932308289bd9">Character::get_str</a></div><div class="ttdeci">int get_str() const</div><div class="ttdoc">Getters for stats exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04127">character.cpp:4127</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5d161e8df8122b5f3d74a081ee8d12cf"><div class="ttname"><a href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">Character::consume_items</a></div><div class="ttdeci">std::list&lt; item &gt; consume_items(const comp_selection&lt; item_comp &gt; &amp;is, int batch, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, bool select_ind=false)</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02029">crafting.cpp:2029</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac29de3d2bc90dd1c8d921b539fb05cfb"><div class="ttname"><a href="classCharacter.html#ac29de3d2bc90dd1c8d921b539fb05cfb">Character::mod_stamina</a></div><div class="ttdeci">void mod_stamina(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06940">character.cpp:6940</a></div></div>
<div class="ttc" id="aclassCharacter_html_aefe5432750eb1c2c65fea628fd9878a7"><div class="ttname"><a href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">Character::get_stamina_max</a></div><div class="ttdeci">int get_stamina_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06815">character.cpp:6815</a></div></div>
<div class="ttc" id="aclassmap_html_a4417ea41f79e4b624612ae64ebac1d07"><div class="ttname"><a href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">map::spawn_item</a></div><div class="ttdeci">void spawn_item(const tripoint &amp;p, const itype_id &amp;type_id, unsigned quantity=1, int charges=0, const time_point &amp;birthday=calendar::start_of_cataclysm, int damlevel=0, const std::set&lt; flag_id &gt; &amp;flags={}, const std::string &amp;variant=&quot;&quot;, const std::string &amp;faction=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05100">map.cpp:5100</a></div></div>
<div class="ttc" id="aitem_8h_html_a64c6001518eb0b959300f427a0086eb0"><div class="ttname"><a href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a></div><div class="ttdeci">bool is_crafting_component(const item &amp;component)</div><div class="ttdoc">Default filter for crafting component searches.</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03267">item.h:3267</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l06815">Character::get_stamina_max()</a>, <a class="el" href="character_8cpp_source.html#l04127">Character::get_str()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l06940">Character::mod_stamina()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa2dc5f9fde24098df2e2977aa0be0773"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2dc5f9fde24098df2e2977aa0be0773">&#9670;&nbsp;</a></span>c4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::c4 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03406">3406</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;{</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    <span class="keywordtype">int</span> time;</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <span class="keywordtype">bool</span> got_value = <a class="code" href="output_8cpp.html#a50bf918604539ddd8b2204e5df918dc9">query_int</a>( time, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set the timer to how many seconds (0 to cancel)?&quot;</span> ) );</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <span class="keywordflow">if</span>( !got_value || time &lt;= 0 ) {</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    }</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;You set the timer to %d second.&quot;</span>,</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                                     <span class="stringliteral">&quot;You set the timer to %d seconds.&quot;</span>, time ), time );</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a> );</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( time );</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a2993eb10a5ae589e6bb1be0a74cb65c1"><div class="ttname"><a href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">item::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03212">item.h:3212</a></div></div>
<div class="ttc" id="aclassitem_html_aa7f4a67b2a035ea80827211cda4cb590"><div class="ttname"><a href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">item::countdown_point</a></div><div class="ttdeci">time_point countdown_point</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03145">item.h:3145</a></div></div>
<div class="ttc" id="aclassitem_html_abf446115b6197c91dd21139de6688d18"><div class="ttname"><a href="classitem.html#abf446115b6197c91dd21139de6688d18">item::convert</a></div><div class="ttdeci">item &amp; convert(const itype_id &amp;new_type, Character *carrier=nullptr)</div><div class="ttdoc">Filter converting this instance to another type preserving all other aspects.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00634">item.cpp:634</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a24e810d76ce97cfab15fbe68a32a00ca"><div class="ttname"><a href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a></div><div class="ttdeci">static constexpr time_duration from_seconds(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00229">calendar.h:229</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a55a9a6f265b455727ff04b5bd5671587"><div class="ttname"><a href="iuse_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a></div><div class="ttdeci">static const itype_id itype_c4armed(&quot;c4armed&quot;)</div></div>
<div class="ttc" id="aoutput_8cpp_html_a50bf918604539ddd8b2204e5df918dc9"><div class="ttname"><a href="output_8cpp.html#a50bf918604539ddd8b2204e5df918dc9">query_int</a></div><div class="ttdeci">bool query_int(int &amp;result, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00880">output.cpp:880</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8h_source.html#l03145">item::countdown_point</a>, <a class="el" href="calendar_8h_source.html#l00229">time_duration::from_seconds()</a>, <a class="el" href="iuse_8cpp.html#a55a9a6f265b455727ff04b5bd5671587">itype_c4armed</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="output_8cpp_source.html#l00880">query_int()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="simplexnoise_8cpp_source.html#l00408">raw_noise_4d()</a>.</p>

</div>
</div>
<a id="a67a0712b717b9b14b3cdf49dd71b1215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a0712b717b9b14b3cdf49dd71b1215">&#9670;&nbsp;</a></span>call_of_tindalos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::call_of_tindalos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04377">4377</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;{</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 12 ) ) {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a574a8aa376ea529e51b058ca083a81d2">is_cornerfloor</a>( dest ) ) {</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dest, <a class="code" href="field__type_8cpp.html#aa7f44e2fb786704eca7d625d9084b301">fd_tindalos_rift</a>, 3 );</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You hear a low-pitched echoing howl.&quot;</span> ) );</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        }</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    }</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a574a8aa376ea529e51b058ca083a81d2"><div class="ttname"><a href="classmap.html#a574a8aa376ea529e51b058ca083a81d2">map::is_cornerfloor</a></div><div class="ttdeci">bool is_cornerfloor(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l10434">map.cpp:10434</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_aa7f44e2fb786704eca7d625d9084b301"><div class="ttname"><a href="field__type_8cpp.html#aa7f44e2fb786704eca7d625d9084b301">fd_tindalos_rift</a></div><div class="ttdeci">const field_type_str_id fd_tindalos_rift(&quot;fd_tindalos_rift&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="field__type_8cpp.html#aa7f44e2fb786704eca7d625d9084b301">fd_tindalos_rift</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l10434">map::is_cornerfloor()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, and <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae4f1a3a8eca6ec8320b1bd4236f9053a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4f1a3a8eca6ec8320b1bd4236f9053a">&#9670;&nbsp;</a></span>calories_intake_tracker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::calories_intake_tracker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07895">7895</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;{</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t know what you&#39;re looking at.&quot;</span> ) );</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;        std::string msg;</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;        msg.append( <span class="stringliteral">&quot;***  &quot;</span> );</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You check your registered calories intake on your %s.&quot;</span> ),</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;                                   it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( 1, <span class="keyword">false</span> ) ) );</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;        msg.append( <span class="stringliteral">&quot;  ***\n\n&quot;</span> );</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;        msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You consumed %d kcal today and %d kcal yesterday.&quot;</span> ),</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">get_daily_ingested_kcal</a>( <span class="keyword">false</span> ),</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">get_daily_ingested_kcal</a>( <span class="keyword">true</span> ) ) );</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, msg );</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( msg );</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;    }</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclassavatar_html_a2e1e62369b3ec336c6488edd04edd8f9"><div class="ttname"><a href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">avatar::get_daily_ingested_kcal</a></div><div class="ttdeci">int get_daily_ingested_kcal(bool yesterday) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01605">avatar.cpp:1605</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a357572465dfb7a0a417d86e1be77af49"><div class="ttname"><a href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a></div><div class="ttdeci">static const trait_id trait_ILLITERATE(&quot;ILLITERATE&quot;)</div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00912">output.cpp:912</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="avatar_8cpp_source.html#l01605">avatar::get_daily_ingested_kcal()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1d39e67548dd42a39fdbc1176ee5a686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d39e67548dd42a39fdbc1176ee5a686">&#9670;&nbsp;</a></span>camera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::camera </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06517">6517</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;{</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <span class="keyword">enum</span> {c_shot, c_photos, c_monsters, c_upload};</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160; </div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;    <span class="comment">// From item processing</span></div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action camera that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;    }</div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160; </div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;    <span class="comment">// CAMERA_NPC_PHOTOS is old save variable</span></div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;    <span class="keywordtype">bool</span> found_extended_photos = !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_NPC_PHOTOS&quot;</span> ).empty() ||</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;                                 !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_EXTENDED_PHOTOS&quot;</span> ).empty();</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;    <span class="keywordtype">bool</span> found_monster_photos = !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_MONSTER_PHOTOS&quot;</span> ).empty();</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160; </div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;    <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with camera?&quot;</span> );</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;    amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( c_shot, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take a photo&quot;</span> ) );</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;    <span class="keywordflow">if</span>( !found_extended_photos &amp;&amp; !found_monster_photos ) {</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( c_photos, <span class="keyword">false</span>, <span class="charliteral">&#39;l&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No photos in memory&quot;</span> ) );</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;        <span class="keywordflow">if</span>( found_extended_photos ) {</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( c_photos, <span class="keyword">true</span>, <span class="charliteral">&#39;l&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;List photos&quot;</span> ) );</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;        }</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;        <span class="keywordflow">if</span>( found_monster_photos ) {</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( c_monsters, <span class="keyword">true</span>, <span class="charliteral">&#39;m&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your collection of monsters&quot;</span> ) );</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;        }</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( c_upload, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Upload photos to memory card&quot;</span> ) );</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;    }</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160; </div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;    amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> choice = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160; </div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;    }</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160; </div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;    <span class="keywordflow">if</span>( c_shot == choice ) {</div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; aim_point_ = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;look_around();</div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160; </div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;        <span class="keywordflow">if</span>( !aim_point_ ) {</div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;        }</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> aim_point = *aim_point_;</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;        <span class="keywordtype">bool</span> incorrect_focus = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;        <a class="code" href="classtripoint__range.html">tripoint_range&lt;tripoint&gt;</a> aim_bounds = here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( aim_point, 2 );</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160; </div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;        std::vector&lt;tripoint&gt; <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a> = <a class="code" href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), aim_point, 0, 0 );</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;        <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.push_back( aim_point );</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160; </div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.5 );</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 8, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Click.&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;                       <span class="stringliteral">&quot;camera_shutter&quot;</span> );</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160; </div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;        <span class="keywordflow">for</span>( std::vector&lt;tripoint&gt;::iterator point_it = <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.begin();</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;             point_it != <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.end();</div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;             ++point_it ) {</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;            <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> trajectory_point = *point_it;</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;            <span class="keywordflow">if</span>( point_it != <a class="code" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">trajectory</a>.end() ) {</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;                <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> next_point = *( point_it + 1 ); <span class="comment">// Trajectory ends on last visible tile</span></div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;                <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aa8a67baac3cc72b2f5fbd669894587a0">sees</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), next_point, <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), next_point ) + 3 ) ) {</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have the wrong camera focus.&quot;</span> ) );</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;                    incorrect_focus = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;                    <span class="comment">// recalculate target point</span></div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;                    aim_point = trajectory_point;</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;                    aim_bounds = here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( trajectory_point, 2 );</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;                }</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;            }</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160; </div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;            <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( trajectory_point, true );</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;            <a class="code" href="classCharacter.html">Character</a> *<span class="keyword">const</span> guy = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classCharacter.html">Character</a>&gt;( trajectory_point );</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;            <span class="keywordflow">if</span>( mon || guy || trajectory_point == aim_point ) {</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;                <span class="keywordtype">int</span> dist = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), trajectory_point );</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160; </div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;                <span class="keywordtype">int</span> camera_bonus = it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a90b535d3ebee701c0652cc2bef2e06ee">flag_CAMERA_PRO</a> ) ? 10 : 0;</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;                <span class="keywordtype">int</span> photo_quality = 20 - <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( dist, dist * 2 ) * 2 + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( camera_bonus / 2, camera_bonus );</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;                <span class="keywordflow">if</span>( photo_quality &gt; 5 ) {</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;                    photo_quality = 5;</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;                }</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;                <span class="keywordflow">if</span>( photo_quality &lt; 0 ) {</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;                    photo_quality = 0;</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;                }</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;                <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ) {</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;                    photo_quality /= 2;</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;                }</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160; </div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;                <span class="keywordflow">if</span>( mon ) {</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;                    <a class="code" href="classmonster.html">monster</a> &amp;z = *mon;</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160; </div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;                    <span class="comment">// shoot past small monsters and hallucinations</span></div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;                    <span class="keywordflow">if</span>( trajectory_point != aim_point &amp;&amp; ( z.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#aa03998a1de174a26778a0d6384d55b89">size</a> &lt;= <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a> ||</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;                                                           z.<a class="code" href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">is_hallucination</a>() ||</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;                                                           z.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="iuse_8cpp.html#a9db9d1cf419d74abb270272636751d03">species_HALLUCINATION</a> ) ) ) {</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;                    }</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;                    <span class="keywordflow">if</span>( !aim_bounds.<a class="code" href="classtripoint__range.html#a1f85e617be27ca5b5a34f7c9e0d65195">is_point_inside</a>( trajectory_point ) ) {</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;                        <span class="comment">// take a photo of the monster that&#39;s in the way</span></div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A %s got in the way of your photo.&quot;</span> ), z.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;                        incorrect_focus = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trajectory_point != aim_point ) { <span class="comment">// shoot past mon that will be in photo anyway</span></div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;                    }</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;                    <span class="comment">// get a special message if the target is a hallucination</span></div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;                    <span class="keywordflow">if</span>( trajectory_point == aim_point &amp;&amp; ( z.<a class="code" href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">is_hallucination</a>() ||</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;                                                           z.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="iuse_8cpp.html#a9db9d1cf419d74abb270272636751d03">species_HALLUCINATION</a> ) ) ) {</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Strange there&#39;s nothing in the center of this picture?&quot;</span> ) );</div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;                    }</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( guy ) {</div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;                    <span class="keywordflow">if</span>( trajectory_point == aim_point &amp;&amp; guy-&gt;is_hallucination() ) {</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Strange %s isn&#39;t visible on the picture?&quot;</span> ), guy-&gt;get_name() );</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !aim_bounds.<a class="code" href="classtripoint__range.html#a1f85e617be27ca5b5a34f7c9e0d65195">is_point_inside</a>( trajectory_point ) ) {</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;                        <span class="comment">// take a photo of the monster that&#39;s in the way</span></div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s got in the way of your photo.&quot;</span> ), guy-&gt;get_name() );</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;                        incorrect_focus = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( trajectory_point != aim_point ) {  <span class="comment">// shoot past guy that will be in photo anyway</span></div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;                    }</div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;                }</div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;                <span class="keywordflow">if</span>( incorrect_focus ) {</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;                    photo_quality = photo_quality == 0 ? 0 : photo_quality - 1;</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;                }</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160; </div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;                std::vector&lt;item::extended_photo_def&gt; extended_photos;</div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;                std::vector&lt;monster *&gt; monster_vec;</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;                std::vector&lt;Character *&gt; character_vec;</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;                <a class="code" href="structitem_1_1extended__photo__def.html">item::extended_photo_def</a> photo = <a class="code" href="iuse_8cpp.html#ae9de7cb76924c60495ad42c37b0e822e">photo_def_for_camera_point</a>( trajectory_point, p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(),</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;                                                 monster_vec, character_vec );</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;                photo.<a class="code" href="structitem_1_1extended__photo__def.html#a2bcf7afe0f0b6f2bfca39151632a0e1c">quality</a> = photo_quality;</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160; </div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;                    it-&gt;<a class="code" href="classitem.html#a6696d83b68d4ab10abf6f9f2fce60c0f">read_extended_photos</a>( extended_photos, <span class="stringliteral">&quot;CAMERA_EXTENDED_PHOTOS&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;                    extended_photos.push_back( photo );</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;                    it-&gt;<a class="code" href="classitem.html#ad1cadfa207fa5c79ae78a00da2d0214e">write_extended_photos</a>( extended_photos, <span class="stringliteral">&quot;CAMERA_EXTENDED_PHOTOS&quot;</span> );</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;                } <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code" href="classJsonError.html">JsonError</a> &amp;e ) {</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;                    <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Error when adding new photo (loaded photos = %i): %s&quot;</span>, extended_photos.size(),</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;                              e.<a class="code" href="classJsonError.html#a0410313762dadcc275463255af393353">c_str</a>() );</div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;                }</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160; </div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> selfie = std::find( character_vec.begin(), character_vec.end(),</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;                                               p ) != character_vec.end();</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160; </div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;                <span class="keywordflow">if</span>( selfie ) {</div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You took a selfie.&quot;</span> ) );</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;                    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ) {</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You took a photo of %s.&quot;</span> ), photo.<a class="code" href="structitem_1_1extended__photo__def.html#a8fa5bbce9dc79d6e3cbb048cd8b90cf2">name</a> );</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You took a photo of %1$s. It is %2$s.&quot;</span> ), photo.<a class="code" href="structitem_1_1extended__photo__def.html#a8fa5bbce9dc79d6e3cbb048cd8b90cf2">name</a>,</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;                                              <a class="code" href="iuse_8cpp.html#a9dafb5bfb47673f6289a30a37384a24b">photo_quality_name</a>( photo_quality ) );</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;                    }</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;                    std::vector&lt;std::string&gt; blinded_names;</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classmonster.html">monster</a> * <span class="keyword">const</span> &amp;monster_p : monster_vec ) {</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;                        <span class="keywordflow">if</span>( dist &lt; 4 &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist + 2 ) &amp;&amp; monster_p-&gt;has_flag( <a class="code" href="mtype_8cpp.html#a0f90cef22d42e0b8c911e8d289e1a10e">mon_flag_SEES</a> ) ) {</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;                            monster_p-&gt;add_effect( <a class="code" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5_turns, 10_turns ) );</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;                            blinded_names.push_back( monster_p-&gt;name() );</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;                        }</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;                    }</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;                    <span class="keywordflow">for</span>( <a class="code" href="classCharacter.html">Character</a> * <span class="keyword">const</span> &amp;character_p : character_vec ) {</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;                        <span class="keywordflow">if</span>( dist &lt; 4 &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( dist + 2 ) &amp;&amp; !character_p-&gt;is_blind() ) {</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;                            character_p-&gt;add_effect( <a class="code" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5_turns, 10_turns ) );</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;                            blinded_names.push_back( character_p-&gt;get_name() );</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;                        }</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;                    }</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;                    <span class="keywordflow">if</span>( !blinded_names.empty() ) {</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;                        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s looks blinded.&quot;</span> ), <a class="code" href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a>( blinded_names.begin(),</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;                        blinded_names.end(), []( <span class="keyword">const</span> std::string &amp; it ) {</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;                            return colorize( it, c_light_blue );</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;                        } ) );</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;                    }</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;                }</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;                <span class="keywordflow">if</span>( !monster_vec.empty() ) {</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;                    <a class="code" href="iuse_8cpp.html#a477314084198625c9012fd39cd70902d">item_save_monsters</a>( *p, *it, monster_vec, photo_quality );</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;                }</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;            }</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;        }</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;    }</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160; </div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;    <span class="keywordflow">if</span>( c_photos == choice ) {</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;        <a class="code" href="iuse_8cpp.html#ac3f80f1c8745dbbfbf26f6101c846cda">show_photo_selection</a>( *p, *it, <span class="stringliteral">&quot;CAMERA_EXTENDED_PHOTOS&quot;</span> );</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    }</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160; </div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;    <span class="keywordflow">if</span>( c_monsters == choice ) {</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ) {</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see the camera screen, you&#39;re blind.&quot;</span> ) );</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;        }</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;        <a class="code" href="classuilist.html">uilist</a> pmenu;</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160; </div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;        pmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your collection of monsters:&quot;</span> );</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160; </div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;        std::vector&lt;mtype_id&gt; monster_photos;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        std::vector&lt;std::string&gt; descriptions;</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160; </div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;        std::istringstream f_mon( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_MONSTER_PHOTOS&quot;</span> ) );</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;        std::string s;</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;        <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;        <span class="keywordflow">while</span>( getline( f_mon, s, <span class="charliteral">&#39;,&#39;</span> ) ) {</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160; </div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;            <span class="keywordflow">if</span>( s.empty() ) {</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;            }</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160; </div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;            monster_photos.emplace_back( s );</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160; </div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;            std::string menu_str;</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160; </div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;            <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> dummy( monster_photos.back() );</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;            menu_str = dummy.name();</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;            descriptions.push_back( dummy.type-&gt;get_description() );</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160; </div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;            getline( f_mon, s, <span class="charliteral">&#39;,&#39;</span> );</div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structquality.html">quality</a> = <a class="code" href="iuse_8cpp.html#a0260d6075fc8551cc2f6a80d9134d897">get_quality_from_string</a>( s );</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160; </div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;            menu_str += <span class="stringliteral">&quot; [&quot;</span> + <a class="code" href="iuse_8cpp.html#a9dafb5bfb47673f6289a30a37384a24b">photo_quality_name</a>( <a class="code" href="structquality.html">quality</a> ) + <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160; </div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;            pmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( k++, <span class="keyword">true</span>, -1, menu_str.c_str() );</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;        }</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160; </div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;        <span class="keywordtype">int</span> choice;</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;            pmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;            choice = pmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160; </div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;            <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;            }</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160; </div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;            <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <span class="stringliteral">&quot;%s&quot;</span>, descriptions[choice].c_str() );</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160; </div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;        } <span class="keywordflow">while</span>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160; </div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;    }</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160; </div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;    <span class="keywordflow">if</span>( c_upload == choice ) {</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160; </div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ) {</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see the camera screen, you&#39;re blind.&quot;</span> ) );</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;        }</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160; </div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160; </div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;        <a class="code" href="classavatar.html">avatar</a> *you = p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>();</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> loc;</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;        <span class="keywordflow">if</span>( you != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;            loc = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;                <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a752e4752c02d95a1c75aa85adff1dea1">flag_MC_MOBILE</a> );</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;            }, *you, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insert memory card&quot;</span> ) );</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;        }</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;        <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;        }</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;mc = *loc;</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160; </div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;        <span class="keywordflow">if</span>( mc.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a> ) ) {</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to clear the old data on the card?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;            }</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;        }</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160; </div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;        mc.<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#aa67b5d8ebe15a9166e1839baaf669c1f">itype_memory_card</a> );</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;        mc.<a class="code" href="classitem.html#acf9b4242998c869e09a76406ffe0bb34">clear_vars</a>();</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;        mc.<a class="code" href="classitem.html#aa4529b4c18a10ffd5a1f111536ad879b">unset_flags</a>();</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;        mc.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a> );</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160; </div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;        mc.<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;MC_MONSTER_PHOTOS&quot;</span>, it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_MONSTER_PHOTOS&quot;</span> ) );</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;        mc.<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;MC_EXTENDED_PHOTOS&quot;</span>, it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;CAMERA_EXTENDED_PHOTOS&quot;</span> ) );</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You upload your photos and monster collection to the memory card.&quot;</span> ) );</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160; </div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;    }</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160; </div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00522">character.h:523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4a9671b1264d53cb74469e78000e2544"><div class="ttname"><a href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">Character::is_blind</a></div><div class="ttdeci">bool is_blind() const</div><div class="ttdoc">Returns true if the player isn't able to see.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05996">character.cpp:5996</a></div></div>
<div class="ttc" id="aclassJsonError_html"><div class="ttname"><a href="classJsonError.html">JsonError</a></div><div class="ttdef"><b>Definition:</b> <a href="json__error_8h_source.html#l00007">json_error.h:8</a></div></div>
<div class="ttc" id="aclassJsonError_html_a0410313762dadcc275463255af393353"><div class="ttname"><a href="classJsonError.html#a0410313762dadcc275463255af393353">JsonError::c_str</a></div><div class="ttdeci">const char * c_str() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="json__error_8h_source.html#l00011">json_error.h:11</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00083">avatar.h:84</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html"><div class="ttname"><a href="classcreature__tracker.html">creature_tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8h_source.html#l00024">creature_tracker.h:25</a></div></div>
<div class="ttc" id="aclasscreature__tracker_html_aba3c6663688bcd1806ea685d6961cb72"><div class="ttname"><a href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_tracker::creature_at</a></div><div class="ttdeci">T * creature_at(const tripoint &amp;p, bool allow_hallucination=false)</div><div class="ttdoc">Returns the Creature at the given location.</div><div class="ttdef"><b>Definition:</b> <a href="creature__tracker_8cpp_source.html#l00303">creature_tracker.cpp:303</a></div></div>
<div class="ttc" id="aclassitem_html_a0b12108a604ac9d940716bb8f1368cf5"><div class="ttname"><a href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">item::get_var</a></div><div class="ttdeci">double get_var(const std::string &amp;name, double default_value) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01839">item.cpp:1839</a></div></div>
<div class="ttc" id="aclassitem_html_a4938361b8fe897c4e85d66020ef91aff"><div class="ttname"><a href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">item::set_var</a></div><div class="ttdeci">void set_var(const std::string &amp;name, int value)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01809">item.cpp:1809</a></div></div>
<div class="ttc" id="aclassitem_html_a5b29c86dff457effe5dc4b9e7a24da12"><div class="ttname"><a href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">item::set_flag</a></div><div class="ttdeci">item &amp; set_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter setting an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07602">item.cpp:7602</a></div></div>
<div class="ttc" id="aclassitem_html_a6696d83b68d4ab10abf6f9f2fce60c0f"><div class="ttname"><a href="classitem.html#a6696d83b68d4ab10abf6f9f2fce60c0f">item::read_extended_photos</a></div><div class="ttdeci">bool read_extended_photos(std::vector&lt; extended_photo_def &gt; &amp;extended_photos, const std::string &amp;var_name, bool insert_at_begin) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06431">iuse.cpp:6431</a></div></div>
<div class="ttc" id="aclassitem_html_aa4529b4c18a10ffd5a1f111536ad879b"><div class="ttname"><a href="classitem.html#aa4529b4c18a10ffd5a1f111536ad879b">item::unset_flags</a></div><div class="ttdeci">void unset_flags()</div><div class="ttdoc">Removes all item specific flags.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07552">item.cpp:7552</a></div></div>
<div class="ttc" id="aclassitem_html_acf9b4242998c869e09a76406ffe0bb34"><div class="ttname"><a href="classitem.html#acf9b4242998c869e09a76406ffe0bb34">item::clear_vars</a></div><div class="ttdeci">void clear_vars()</div><div class="ttdoc">Removes all item variables.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01938">item.cpp:1938</a></div></div>
<div class="ttc" id="aclassitem_html_ad1cadfa207fa5c79ae78a00da2d0214e"><div class="ttname"><a href="classitem.html#ad1cadfa207fa5c79ae78a00da2d0214e">item::write_extended_photos</a></div><div class="ttdeci">void write_extended_photos(const std::vector&lt; extended_photo_def &gt; &amp;, const std::string &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06452">iuse.cpp:6452</a></div></div>
<div class="ttc" id="aclassmap_html_aa8a67baac3cc72b2f5fbd669894587a0"><div class="ttname"><a href="classmap.html#aa8a67baac3cc72b2f5fbd669894587a0">map::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;F, const tripoint &amp;T, int range, bool with_fields=true) const</div><div class="ttdoc">Returns whether F sees T with a view range of range.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l07377">map.cpp:7377</a></div></div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00085">monster.h:86</a></div></div>
<div class="ttc" id="aclassmonster_html_a70c250ac59c7d91b374dfa5d7b8da66c"><div class="ttname"><a href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">monster::is_hallucination</a></div><div class="ttdeci">bool is_hallucination() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03460">monster.cpp:3460</a></div></div>
<div class="ttc" id="aclassmonster_html_a7cb9d9786d11c2c0926d3482d3f51ffe"><div class="ttname"><a href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">monster::name</a></div><div class="ttdeci">std::string name(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00722">monster.cpp:722</a></div></div>
<div class="ttc" id="aclassmonster_html_aa30f973bf524ba275ada847f6118b048"><div class="ttname"><a href="classmonster.html#aa30f973bf524ba275ada847f6118b048">monster::type</a></div><div class="ttdeci">const mtype * type</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00550">monster.h:550</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae75b0a209b55081a67c5fe6c17a4be00"><div class="ttname"><a href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00260">string_id.h:260</a></div></div>
<div class="ttc" id="aclasstripoint__range_html"><div class="ttname"><a href="classtripoint__range.html">tripoint_range</a></div><div class="ttdef"><b>Definition:</b> <a href="map__iterator_8h_source.html#l00012">map_iterator.h:13</a></div></div>
<div class="ttc" id="aclasstripoint__range_html_a1f85e617be27ca5b5a34f7c9e0d65195"><div class="ttname"><a href="classtripoint__range.html#a1f85e617be27ca5b5a34f7c9e0d65195">tripoint_range::is_point_inside</a></div><div class="ttdeci">bool is_point_inside(const Tripoint &amp;point) const</div><div class="ttdef"><b>Definition:</b> <a href="map__iterator_8h_source.html#l00136">map_iterator.h:136</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a31847b31c6ef002e9d16afd7fd0005e3"><div class="ttname"><a href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &amp;&amp;RhsInBounds &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00798">coordinates.h:798</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a8e2cbab6dac12095f06b4cff66857fbb"><div class="ttname"><a href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a></div><div class="ttdeci">int rl_dist(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00769">coordinates.h:769</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a></div><div class="ttdeci">@ small</div></div>
<div class="ttc" id="acreature__tracker_8h_html_a16f631f70e72b53e590770670fb301fb"><div class="ttname"><a href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a></div><div class="ttdeci">creature_tracker &amp; get_creature_tracker()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13827">game.cpp:13827</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level D_ERROR and class D_MAIN, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00069">debug.h:69</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a5e973ea036d0f760170dc88b28b891b2"><div class="ttname"><a href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a></div><div class="ttdeci">const flag_id flag_MC_HAS_DATA(&quot;MC_HAS_DATA&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a752e4752c02d95a1c75aa85adff1dea1"><div class="ttname"><a href="flag_8cpp.html#a752e4752c02d95a1c75aa85adff1dea1">flag_MC_MOBILE</a></div><div class="ttdeci">const flag_id flag_MC_MOBILE(&quot;MC_MOBILE&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a90b535d3ebee701c0652cc2bef2e06ee"><div class="ttname"><a href="flag_8cpp.html#a90b535d3ebee701c0652cc2bef2e06ee">flag_CAMERA_PRO</a></div><div class="ttdeci">const flag_id flag_CAMERA_PRO(&quot;CAMERA_PRO&quot;)</div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a0260d6075fc8551cc2f6a80d9134d897"><div class="ttname"><a href="iuse_8cpp.html#a0260d6075fc8551cc2f6a80d9134d897">get_quality_from_string</a></div><div class="ttdeci">static int get_quality_from_string(const std::string_view s)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05447">iuse.cpp:5447</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a09e952ef4d27618e2f60ec737a8d1bae"><div class="ttname"><a href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a></div><div class="ttdeci">static const efftype_id effect_blind(&quot;blind&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a477314084198625c9012fd39cd70902d"><div class="ttname"><a href="iuse_8cpp.html#a477314084198625c9012fd39cd70902d">item_save_monsters</a></div><div class="ttdeci">static void item_save_monsters(Character &amp;p, item &amp;it, const std::vector&lt; monster * &gt; &amp;monster_vec, int photo_quality)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06382">iuse.cpp:6382</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a9dafb5bfb47673f6289a30a37384a24b"><div class="ttname"><a href="iuse_8cpp.html#a9dafb5bfb47673f6289a30a37384a24b">photo_quality_name</a></div><div class="ttdeci">static std::string photo_quality_name(const int index)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05458">iuse.cpp:5458</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a9db9d1cf419d74abb270272636751d03"><div class="ttname"><a href="iuse_8cpp.html#a9db9d1cf419d74abb270272636751d03">species_HALLUCINATION</a></div><div class="ttdeci">static const species_id species_HALLUCINATION(&quot;HALLUCINATION&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa67b5d8ebe15a9166e1839baaf669c1f"><div class="ttname"><a href="iuse_8cpp.html#aa67b5d8ebe15a9166e1839baaf669c1f">itype_memory_card</a></div><div class="ttdeci">static const itype_id itype_memory_card(&quot;memory_card&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac3f80f1c8745dbbfbf26f6101c846cda"><div class="ttname"><a href="iuse_8cpp.html#ac3f80f1c8745dbbfbf26f6101c846cda">show_photo_selection</a></div><div class="ttdeci">static bool show_photo_selection(Character &amp;p, item &amp;it, const std::string &amp;var_name)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06461">iuse.cpp:6461</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ae9de7cb76924c60495ad42c37b0e822e"><div class="ttname"><a href="iuse_8cpp.html#ae9de7cb76924c60495ad42c37b0e822e">photo_def_for_camera_point</a></div><div class="ttdeci">static item::extended_photo_def photo_def_for_camera_point(const tripoint &amp;aim_point, const tripoint &amp;camera_pos, std::vector&lt; monster * &gt; &amp;monster_vec, std::vector&lt; Character * &gt; &amp;character_vec)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l06109">iuse.cpp:6109</a></div></div>
<div class="ttc" id="amtype_8cpp_html_a0f90cef22d42e0b8c911e8d289e1a10e"><div class="ttname"><a href="mtype_8cpp.html#a0f90cef22d42e0b8c911e8d289e1a10e">mon_flag_SEES</a></div><div class="ttdeci">mon_flag_id mon_flag_SEES</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00143">mtype.cpp:143</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_ae7ae320be6561b1bdf63acdb07e0aad9"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a></div><div class="ttdeci">item_location titled_filter_menu(const item_filter &amp;filter, Character &amp;you, const std::string &amp;title, int radius=-1, const std::string &amp;none_message=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l00315">game_inventory.cpp:315</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::sound_t::activity</a></div><div class="ttdeci">@ activity</div></div>
<div class="ttc" id="anamespacetarget__handler_html_aea843144f5e69546ddea88eeda177640"><div class="ttname"><a href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; trajectory</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00029">ranged.h:29</a></div></div>
<div class="ttc" id="aoutput_8h_html_a4be67498ee67b5186fcae5cf706f7512"><div class="ttname"><a href="output_8h.html#a4be67498ee67b5186fcae5cf706f7512">enumerate_as_string</a></div><div class="ttdeci">std::string enumerate_as_string(const Container &amp;values, enumeration_conjunction conj=enumeration_conjunction::and_)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00647">output.h:647</a></div></div>
<div class="ttc" id="astructitem_1_1extended__photo__def_html"><div class="ttname"><a href="structitem_1_1extended__photo__def.html">item::extended_photo_def</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01924">item.h:1924</a></div></div>
<div class="ttc" id="astructitem_1_1extended__photo__def_html_a2bcf7afe0f0b6f2bfca39151632a0e1c"><div class="ttname"><a href="structitem_1_1extended__photo__def.html#a2bcf7afe0f0b6f2bfca39151632a0e1c">item::extended_photo_def::quality</a></div><div class="ttdeci">int quality</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01925">item.h:1925</a></div></div>
<div class="ttc" id="astructitem_1_1extended__photo__def_html_a8fa5bbce9dc79d6e3cbb048cd8b90cf2"><div class="ttname"><a href="structitem_1_1extended__photo__def.html#a8fa5bbce9dc79d6e3cbb048cd8b90cf2">item::extended_photo_def::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l01926">item.h:1926</a></div></div>
<div class="ttc" id="astructmtype_html_a51ec342d71717bb513f0158198b12840"><div class="ttname"><a href="structmtype.html#a51ec342d71717bb513f0158198b12840">mtype::in_species</a></div><div class="ttdeci">bool in_species(const species_id &amp;spec) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00385">mtype.cpp:385</a></div></div>
<div class="ttc" id="astructmtype_html_aa03998a1de174a26778a0d6384d55b89"><div class="ttname"><a href="structmtype.html#aa03998a1de174a26778a0d6384d55b89">mtype::size</a></div><div class="ttdeci">creature_size size</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00407">mtype.h:407</a></div></div>
<div class="ttc" id="astructquality_html"><div class="ttname"><a href="structquality.html">quality</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00044">requirements.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a69a256025f66e4ce5d15c9dd7225d357">sounds::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="json__error_8h_source.html#l00011">JsonError::c_str()</a>, <a class="el" href="item_8cpp_source.html#l01938">item::clear_vars()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="el" href="output_8h_source.html#l00647">enumerate_as_string()</a>, <a class="el" href="flag_8cpp.html#a90b535d3ebee701c0652cc2bef2e06ee">flag_CAMERA_PRO</a>, <a class="el" href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a>, <a class="el" href="flag_8cpp.html#a752e4752c02d95a1c75aa85adff1dea1">flag_MC_MOBILE</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="mtype_8cpp_source.html#l00503">mtype::get_description()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp_source.html#l05447">get_quality_from_string()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="mtype_8cpp_source.html#l00385">mtype::in_species()</a>, <a class="el" href="character_8cpp_source.html#l05996">Character::is_blind()</a>, <a class="el" href="monster_8cpp_source.html#l03460">monster::is_hallucination()</a>, <a class="el" href="map__iterator_8h_source.html#l00136">tripoint_range&lt; Tripoint &gt;::is_point_inside()</a>, <a class="el" href="iuse_8cpp_source.html#l06382">item_save_monsters()</a>, <a class="el" href="iuse_8cpp.html#aa67b5d8ebe15a9166e1839baaf669c1f">itype_memory_card</a>, <a class="el" href="coordinates_8h_source.html#l00798">line_to()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mtype_8cpp_source.html#l00143">mon_flag_SEES</a>, <a class="el" href="item_8h_source.html#l01926">item::extended_photo_def::name</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="iuse_8cpp_source.html#l06109">photo_def_for_camera_point()</a>, <a class="el" href="iuse_8cpp_source.html#l05458">photo_quality_name()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="item_8h_source.html#l01925">item::extended_photo_def::quality</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="iuse_8cpp_source.html#l06431">item::read_extended_photos()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="map_8cpp_source.html#l07377">map::sees()</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="iuse_8cpp_source.html#l06461">show_photo_selection()</a>, <a class="el" href="mtype_8h_source.html#l00407">mtype::size</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="iuse_8cpp.html#a9db9d1cf419d74abb270272636751d03">species_HALLUCINATION</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>, <a class="el" href="monster_8h_source.html#l00550">monster::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="item_8cpp_source.html#l07552">item::unset_flags()</a>, and <a class="el" href="iuse_8cpp_source.html#l06452">item::write_extended_photos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lightmap_8cpp_source.html#l00979">map::build_seen_cache()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a584512f8293bc65b48a7a6420bc9f17c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a584512f8293bc65b48a7a6420bc9f17c">&#9670;&nbsp;</a></span>can_goo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::can_goo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03225">3225</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;{</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a866e0b0ea3a028ee6220b8454f3de0bc">itype_canister_empty</a> );</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <span class="keywordtype">int</span> tries = 0;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> goop;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    goop.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = p-&gt;<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>();</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        goop.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = p-&gt;<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 );</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        goop.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = p-&gt;<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 );</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        tries++;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    } <span class="keywordflow">while</span>( here.<a class="code" href="classmap.html#a802cc11379d4be61f4e2b13a50f6390e">impassable</a>( goop ) &amp;&amp; tries &lt; 10 );</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keywordflow">if</span>( tries == 10 ) {</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    }</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( goop ) ) {</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( goop, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Black goo emerges from the canister and envelopes the %s!&quot;</span> ),</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;                                critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        critter.<a class="code" href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">poly</a>( <a class="code" href="iuse_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a> );</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        critter.<a class="code" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( critter.<a class="code" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() - <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 25 ) );</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        critter.<a class="code" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( critter.<a class="code" href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">get_speed</a>() );</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( goop, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Living black goo emerges from the canister!&quot;</span> ) );</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> <a class="code" href="namespacetrapfunc.html#af7d4351552782f280afe061707a23d02">goo</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code" href="iuse_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a>, goop ) ) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <a class="code" href="namespacetrapfunc.html#af7d4351552782f280afe061707a23d02">goo</a>-&gt;friendly = -1;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        }</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 3.0, 4.0 ) ) {</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;        tries = 0;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            goop.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = p-&gt;<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 );</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            goop.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = p-&gt;<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 );</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            tries++;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            found = here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( goop ) &amp;&amp; here.<a class="code" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( goop ).<a class="code" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>();</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        } <span class="keywordflow">while</span>( !found &amp;&amp; tries &lt; 10 );</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;        <span class="keywordflow">if</span>( found ) {</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;            <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( goop, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A nearby splatter of goo forms into a goo pit.&quot;</span> ) );</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            here.<a class="code" href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">trap_set</a>( goop, <a class="code" href="trap_8cpp.html#af7be0fdf59a1f94184f49073494ded76">tr_goo</a> );</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;        }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    }</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a261dff3caa6aabe255ae9d3eaa94d3de"><div class="ttname"><a href="classCreature.html#a261dff3caa6aabe255ae9d3eaa94d3de">Creature::get_speed</a></div><div class="ttdeci">virtual int get_speed() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02138">creature.cpp:2138</a></div></div>
<div class="ttc" id="aclassCreature_html_a88c28bc08aa3e0d6fa1b187cee97d1c4"><div class="ttname"><a href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">Creature::posz</a></div><div class="ttdeci">int posz() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00317">creature.h:317</a></div></div>
<div class="ttc" id="aclassCreature_html_acfac03f5782f8ea53e1efcb5321ead1b"><div class="ttname"><a href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">Creature::get_speed_base</a></div><div class="ttdeci">virtual int get_speed_base() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02782">creature.cpp:2782</a></div></div>
<div class="ttc" id="aclassCreature_html_afedb5874d4d3438d3c82cb2104ec49fa"><div class="ttname"><a href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">Creature::set_speed_base</a></div><div class="ttdeci">virtual void set_speed_base(int nspeed)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02873">creature.cpp:2873</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06213">map.cpp:6213</a></div></div>
<div class="ttc" id="aclassmap_html_ade82e480520c05f5a4e8917df19cef8c"><div class="ttname"><a href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">map::trap_set</a></div><div class="ttdeci">void trap_set(const tripoint &amp;p, const trap_id &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06297">map.cpp:6297</a></div></div>
<div class="ttc" id="aclassmap_html_af563dc2397e71a053569cb45c6bb7e77"><div class="ttname"><a href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">map::passable</a></div><div class="ttdeci">bool passable(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02472">map.cpp:2472</a></div></div>
<div class="ttc" id="aclassmonster_html_a39d78be1e47deaf970439c3b9504e5d9"><div class="ttname"><a href="classmonster.html#a39d78be1e47deaf970439c3b9504e5d9">monster::poly</a></div><div class="ttdeci">void poly(const mtype_id &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l00375">monster.cpp:375</a></div></div>
<div class="ttc" id="aclassmonster_html_a98c421c82c34706735f13afe25ea7f1f"><div class="ttname"><a href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">monster::set_hp</a></div><div class="ttdeci">void set_hp(int hp)</div><div class="ttdoc">Directly set the current hp of the monster (not capped at the maximal hp).</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02164">monster.cpp:2164</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a866e0b0ea3a028ee6220b8454f3de0bc"><div class="ttname"><a href="iuse_8cpp.html#a866e0b0ea3a028ee6220b8454f3de0bc">itype_canister_empty</a></div><div class="ttdeci">static const itype_id itype_canister_empty(&quot;canister_empty&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa38c932036191fc88554990d16a891a2"><div class="ttname"><a href="iuse_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a></div><div class="ttdeci">static const mtype_id mon_blob(&quot;mon_blob&quot;)</div></div>
<div class="ttc" id="amessages_8cpp_html_a3ea1aed1d11cd410cce07fb5be7aa34f"><div class="ttname"><a href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a></div><div class="ttdeci">void add_msg_if_player_sees(const tripoint &amp;target, std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l01007">messages.cpp:1007</a></div></div>
<div class="ttc" id="anamespacetrapfunc_html_af7d4351552782f280afe061707a23d02"><div class="ttname"><a href="namespacetrapfunc.html#af7d4351552782f280afe061707a23d02">trapfunc::goo</a></div><div class="ttdeci">bool goo(const tripoint &amp;p, Creature *c, item *i)</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l00731">trapfunc.cpp:731</a></div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00366">trap.cpp:366</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00134">point.h:134</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00132">point.h:132</a></div></div>
<div class="ttc" id="atrap_8cpp_html_af7be0fdf59a1f94184f49073494ded76"><div class="ttname"><a href="trap_8cpp.html#af7be0fdf59a1f94184f49073494ded76">tr_goo</a></div><div class="ttdeci">const trap_str_id tr_goo(&quot;tr_goo&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l01007">add_msg_if_player_sees()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02138">Creature::get_speed()</a>, <a class="el" href="creature_8cpp_source.html#l02782">Creature::get_speed_base()</a>, <a class="el" href="trapfunc_8cpp_source.html#l00731">trapfunc::goo()</a>, <a class="el" href="map_8cpp_source.html#l02462">map::impassable()</a>, <a class="el" href="trap_8cpp_source.html#l00366">trap::is_null()</a>, <a class="el" href="iuse_8cpp.html#a866e0b0ea3a028ee6220b8454f3de0bc">itype_canister_empty</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="iuse_8cpp.html#aa38c932036191fc88554990d16a891a2">mon_blob</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="monster_8cpp_source.html#l00375">monster::poly()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="creature_8h_source.html#l00317">Creature::posz()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="monster_8cpp_source.html#l02164">monster::set_hp()</a>, <a class="el" href="creature_8cpp_source.html#l02873">Creature::set_speed_base()</a>, <a class="el" href="map_8cpp_source.html#l06213">map::tr_at()</a>, <a class="el" href="trap_8cpp.html#af7be0fdf59a1f94184f49073494ded76">tr_goo</a>, <a class="el" href="map_8cpp_source.html#l06297">map::trap_set()</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="calendar_8cpp_source.html#l00784">x_in_y()</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a85d862264df8d80c14f753c0e823e415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d862264df8d80c14f753c0e823e415">&#9670;&nbsp;</a></span>can_smoke()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; std::string &gt; iuse::can_smoke </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>you</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00451">451</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">auto</span> cigs = you.<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <a class="code" href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a>, []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    } );</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span>( !cigs.empty() ) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re already smoking a %s!&quot;</span> ), cigs[0]-&gt;<a class="code" href="namespacetname.html">tname</a>() );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span>( !you.<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( <a class="code" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have anything to light it with!&quot;</span> );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0e8509fc038cee083b5a7cc7bdf0f8f9"><div class="ttname"><a href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">Character::cache_get_items_with</a></div><div class="ttdeci">std::vector&lt; item * &gt; cache_get_items_with(const itype_id &amp;type, const std::function&lt; bool(item &amp;)&gt; &amp;do_and_check_func=return_true&lt; item &gt;)</div><div class="ttdoc">Returns all items with the given flag and/or that pass the given boolean item function,...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09494">character.cpp:9494</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a113069751de186b31961efa44fd458fd"><div class="ttname"><a href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a></div><div class="ttdeci">const flag_id flag_LITCIG(&quot;LITCIG&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa5ffa4fd2e1363b9474c32c3a47a6df9"><div class="ttname"><a href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a></div><div class="ttdeci">static const itype_id itype_fire(&quot;fire&quot;)</div></div>
<div class="ttc" id="anamespacetname_html"><div class="ttname"><a href="namespacetname.html">tname</a></div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00612">item_tname.cpp:613</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="flag_8cpp.html#a113069751de186b31961efa44fd458fd">flag_LITCIG</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, and <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="consumption_8cpp_source.html#l00769">Character::can_eat()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01091">activatable_inventory_preset::get_denial()</a>, and <a class="el" href="iuse_8cpp_source.html#l00544">smoking()</a>.</p>

</div>
</div>
<a id="a7758692d4d37e5f962bec202df6472ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7758692d4d37e5f962bec202df6472ef">&#9670;&nbsp;</a></span>capture_monster_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::capture_monster_act </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07997">7997</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;{</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t capture a creature mounted.&quot;</span> ) );</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;    }</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span> ) ) {</div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;        <span class="comment">// Remember contained_name for messages after release_monster erases it</span></div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;        <span class="keyword">const</span> std::string contained_name = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;contained_name&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160; </div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#abf522557723e9d3342000d7589cead16">release_monster</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;            <span class="comment">// It&#39;s been activated somewhere where there isn&#39;t a player or monster, good.</span></div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;        }</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0ae60a6ec7b491b2e3651832420fa06b">flag_PLACE_RANDOMLY</a> ) ) {</div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#abf522557723e9d3342000d7589cead16">release_monster</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;            }</div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no place to put the %s.&quot;</span> ), contained_name );</div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;            <span class="keyword">const</span> std::string query = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Place the %s where?&quot;</span> ), contained_name );</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;            <span class="keyword">const</span> std::optional&lt;tripoint&gt; pos_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( query );</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;            <span class="keywordflow">if</span>( !pos_ ) {</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;            }</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#abf522557723e9d3342000d7589cead16">release_monster</a>( *pos_ ) ) {</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You release the %s.&quot;</span> ), contained_name );</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;            }</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t place the %s there!&quot;</span> ), contained_name );</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;        }</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aeb49bb1b64eba3731e606ffe83e95b4f">has_property</a>( <span class="stringliteral">&quot;creature_size_capacity&quot;</span> ) ) {</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s has no creature_size_capacity.&quot;</span>, it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;        }</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;        <span class="keyword">const</span> std::string capacity = it-&gt;<a class="code" href="classitem.html#ac7c536dbf6f3c3e9e28015990a060e41">get_property_string</a>( <span class="stringliteral">&quot;creature_size_capacity&quot;</span> );</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#aface2aa918ea59decfc3f71fd891396c">Creature::size_map</a>.count( capacity ) == 0 ) {</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s has invalid creature_size_capacity %s.&quot;</span>,</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;                      it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), capacity.c_str() );</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;        }</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;        <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; adjacent_capturable = []( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;            <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> *mon_ptr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( pnt );</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;            <span class="keywordflow">return</span> mon_ptr != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;        };</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;        <span class="keyword">const</span> std::string query = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Grab which creature to place in the %s?&quot;</span> ),</div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; target_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>( query,</div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;                                                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no creature nearby you can capture.&quot;</span> ), adjacent_capturable, <span class="keyword">false</span> );</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;        <span class="keywordflow">if</span>( !target_ ) {</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t use a %s there.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;        }</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> target = *target_;</div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160; </div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;        <span class="comment">// Capture the thing, if it&#39;s on the target square.</span></div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;        <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( target ) ) {</div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;            <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> &amp;f = *mon_ptr;</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160; </div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;            <span class="keywordflow">if</span>( f.<a class="code" href="classmonster.html#ab92cac0ecb2b2062fd4f821b671f86ac">get_size</a>() &gt; <a class="code" href="classCreature.html#aface2aa918ea59decfc3f71fd891396c">Creature::size_map</a>.find( capacity )-&gt;second ) {</div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s is too big to put in your %2$s.&quot;</span> ),</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;                                      f.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>(), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;            }</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;            <span class="comment">// TODO: replace this with some kind of melee check.</span></div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;            <span class="keywordtype">int</span> chance = f.<a class="code" href="classmonster.html#aed44761b8e8ac00ee8ffef0347265e4c">hp_percentage</a>() / 10;</div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;            <span class="comment">// A weaker monster is easier to capture.</span></div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;            <span class="comment">// If the monster is friendly, then put it in the item</span></div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;            <span class="comment">// without checking if it rolled a success.</span></div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;            <span class="keywordflow">if</span>( f.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> != 0 || <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( chance ) ) {</div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You capture the %1$s in your %2$s.&quot;</span> ),</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;                                      f.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>(), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;                <span class="keywordflow">return</span> it-&gt;<a class="code" href="classitem.html#a5b2240199659bfe1bc99201615926a57">contain_monster</a>( target );</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s avoids your attempts to put it in the %2$s.&quot;</span> ),</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;                                      f.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">nname</a>(), it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( 1 ) );</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;            }</div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s can&#39;t capture nothing&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;        }</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;    }</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01732">character.cpp:1732</a></div></div>
<div class="ttc" id="aclassCreature_html_aface2aa918ea59decfc3f71fd891396c"><div class="ttname"><a href="classCreature.html#aface2aa918ea59decfc3f71fd891396c">Creature::size_map</a></div><div class="ttdeci">static const std::map&lt; std::string, creature_size &gt; size_map</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00255">creature.h:255</a></div></div>
<div class="ttc" id="aclassitem_html_a478ecf81e48540e1ba39de33df968c43"><div class="ttname"><a href="classitem.html#a478ecf81e48540e1ba39de33df968c43">item::has_var</a></div><div class="ttdeci">bool has_var(const std::string &amp;name) const</div><div class="ttdoc">Whether the variable is defined at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01928">item.cpp:1928</a></div></div>
<div class="ttc" id="aclassitem_html_a5b2240199659bfe1bc99201615926a57"><div class="ttname"><a href="classitem.html#a5b2240199659bfe1bc99201615926a57">item::contain_monster</a></div><div class="ttdeci">int contain_monster(const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07979">iuse.cpp:7979</a></div></div>
<div class="ttc" id="aclassitem_html_abf522557723e9d3342000d7589cead16"><div class="ttname"><a href="classitem.html#abf522557723e9d3342000d7589cead16">item::release_monster</a></div><div class="ttdeci">bool release_monster(const tripoint &amp;target, int radius=0)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07958">iuse.cpp:7958</a></div></div>
<div class="ttc" id="aclassitem_html_ac7c536dbf6f3c3e9e28015990a060e41"><div class="ttname"><a href="classitem.html#ac7c536dbf6f3c3e9e28015990a060e41">item::get_property_string</a></div><div class="ttdeci">std::string get_property_string(const std::string &amp;prop, const std::string &amp;def=&quot;&quot;) const</div><div class="ttdoc">Get typed property for item.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07680">item.cpp:7680</a></div></div>
<div class="ttc" id="aclassitem_html_aeb49bb1b64eba3731e606ffe83e95b4f"><div class="ttname"><a href="classitem.html#aeb49bb1b64eba3731e606ffe83e95b4f">item::has_property</a></div><div class="ttdeci">bool has_property(const std::string &amp;prop) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07675">item.cpp:7675</a></div></div>
<div class="ttc" id="aclassmonster_html_a4e17d0d504a12d9b2e4de3e7a7503fff"><div class="ttname"><a href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">monster::friendly</a></div><div class="ttdeci">int friendly</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00539">monster.h:539</a></div></div>
<div class="ttc" id="aclassmonster_html_ab92cac0ecb2b2062fd4f821b671f86ac"><div class="ttname"><a href="classmonster.html#ab92cac0ecb2b2062fd4f821b671f86ac">monster::get_size</a></div><div class="ttdeci">creature_size get_size() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03503">monster.cpp:3503</a></div></div>
<div class="ttc" id="aclassmonster_html_aed44761b8e8ac00ee8ffef0347265e4c"><div class="ttname"><a href="classmonster.html#aed44761b8e8ac00ee8ffef0347265e4c">monster::hp_percentage</a></div><div class="ttdeci">int hp_percentage() const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01652">monster.cpp:1652</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a0ae60a6ec7b491b2e3651832420fa06b"><div class="ttname"><a href="flag_8cpp.html#a0ae60a6ec7b491b2e3651832420fa06b">flag_PLACE_RANDOMLY</a></div><div class="ttdeci">const flag_id flag_PLACE_RANDOMLY(&quot;PLACE_RANDOMLY&quot;)</div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00095">itype.cpp:95</a></div></div>
<div class="ttc" id="astructmtype_html_a9a8f4ead67d1836e3f4db624533af5aa"><div class="ttname"><a href="structmtype.html#a9a8f4ead67d1836e3f4db624533af5aa">mtype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity=1) const</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00330">mtype.cpp:330</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="iuse_8cpp_source.html#l07979">item::contain_monster()</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flag_8cpp.html#a0ae60a6ec7b491b2e3651832420fa06b">flag_PLACE_RANDOMLY</a>, <a class="el" href="monster_8h_source.html#l00539">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="item_8cpp_source.html#l07680">item::get_property_string()</a>, <a class="el" href="monster_8cpp_source.html#l03503">monster::get_size()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l07675">item::has_property()</a>, <a class="el" href="item_8cpp_source.html#l01928">item::has_var()</a>, <a class="el" href="monster_8cpp_source.html#l01652">monster::hp_percentage()</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="itype_8cpp_source.html#l00095">itype::nname()</a>, <a class="el" href="mtype_8cpp_source.html#l00330">mtype::nname()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="iuse_8cpp_source.html#l07958">item::release_monster()</a>, <a class="el" href="creature_8h_source.html#l00255">Creature::size_map</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="monster_8h_source.html#l00550">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l07944">capture_monster_veh()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="af3182ba0d596fce518f8a701075565ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3182ba0d596fce518f8a701075565ab">&#9670;&nbsp;</a></span>capture_monster_veh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::capture_monster_veh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07944">7944</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;{</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;    }</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a> ) ) {</div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s must be installed in a vehicle before being loaded.&quot;</span> ),</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;    }</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;    <a class="code" href="namespaceiuse.html#a7758692d4d37e5f962bec202df6472ef">capture_monster_act</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a5d1fa7fb2e0d7c717f7bc1cc461407db"><div class="ttname"><a href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a></div><div class="ttdeci">const flag_id flag_VEHICLE(&quot;VEHICLE&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a7758692d4d37e5f962bec202df6472ef"><div class="ttname"><a href="namespaceiuse.html#a7758692d4d37e5f962bec202df6472ef">iuse::capture_monster_act</a></div><div class="ttdeci">std::optional&lt; int &gt; capture_monster_act(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07997">iuse.cpp:7997</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="iuse_8cpp_source.html#l07997">capture_monster_act()</a>, <a class="el" href="flag_8cpp.html#a5d1fa7fb2e0d7c717f7bc1cc461407db">flag_VEHICLE</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a715d67d4dc585de01b91fe9e62674f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a715d67d4dc585de01b91fe9e62674f5f">&#9670;&nbsp;</a></span>change_eyes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::change_eyes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02964">2964</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;{</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a203f26701c655cebed5511a56f777158">customize_appearance</a>( <a class="code" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">customize_appearance_choice::EYES</a> );</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    }</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605"><div class="ttname"><a href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">customize_appearance_choice::EYES</a></div><div class="ttdeci">@ EYES</div></div>
<div class="ttc" id="aclassCharacter_html_a203f26701c655cebed5511a56f777158"><div class="ttname"><a href="classCharacter.html#a203f26701c655cebed5511a56f777158">Character::customize_appearance</a></div><div class="ttdeci">void customize_appearance(customize_appearance_choice choice)</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l02354">mutation.cpp:2354</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutation_8cpp_source.html#l02354">Character::customize_appearance()</a>, <a class="el" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a0f5a0565219c50fa7a790bb6a56eb605">EYES</a>, and <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a258b13e1c76cd6f96f98d02d68c8ed27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a258b13e1c76cd6f96f98d02d68c8ed27">&#9670;&nbsp;</a></span>change_skin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::change_skin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02972">2972</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;{</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a203f26701c655cebed5511a56f777158">customize_appearance</a>( <a class="code" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">customize_appearance_choice::SKIN</a> );</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    }</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60"><div class="ttname"><a href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">customize_appearance_choice::SKIN</a></div><div class="ttdeci">@ SKIN</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutation_8cpp_source.html#l02354">Character::customize_appearance()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, and <a class="el" href="character_8h.html#ac9118628a45fc36a55c85d4acf0e36f8a017ef937cce02f08a30f875ebcb80a60">SKIN</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a417111224f79dd3394e544f94be5cd84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417111224f79dd3394e544f94be5cd84">&#9670;&nbsp;</a></span>chew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::chew </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01131">1131</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;{</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">// TODO: Add more effects?</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You chew your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="consumption_8cpp_source.html#l01031">eat()</a>, <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="consumption_8cpp_source.html#l01276">Character::modify_morale()</a>.</p>

</div>
</div>
<a id="aa1978f80267c705ce4011143096a527e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1978f80267c705ce4011143096a527e">&#9670;&nbsp;</a></span>chop_logs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::chop_logs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04587">4587</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;{</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action chop_logs that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    }</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    }</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160; </div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    <span class="keyword">const</span> std::set&lt;ter_str_id&gt; allowed_ter_id {</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <a class="code" href="iuse_8cpp.html#aa2400d283615d4c642e5dc0856a62a98">ter_t_trunk</a>,</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;        <a class="code" href="iuse_8cpp.html#a32e06432f8d94a516a3c9e76cbe68f9f">ter_t_stump</a></div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;    };</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;allowed_ter_id, &amp;here]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">ter_id</a> <a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a> = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt );</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> is_allowed_terrain = allowed_ter_id.find( <a class="code" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">type</a>.id() ) != allowed_ter_id.end();</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;        <span class="keywordflow">return</span> is_allowed_terrain;</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;    };</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160; </div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Chop which tree trunk?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no tree trunk to chop nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;    }</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t chop that.&quot;</span> ) );</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;    }</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160; </div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;    <span class="keywordtype">int</span> moves = <a class="code" href="iuse_8cpp.html#a751071d7c8d046780b9ea56e119254d1">chop_moves</a>( p, it );</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;    <span class="keyword">const</span> std::vector&lt;Character *&gt; helpers = p-&gt;<a class="code" href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">get_crafting_helpers</a>();</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;    <span class="keywordflow">for</span>( std::size_t i = 0; i &lt; helpers.size() &amp;&amp; i &lt; 3; i++ ) {</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s helps with this task&quot;</span> ), helpers[i]-&gt;get_name() );</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    }</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classchop__logs__activity__actor.html">chop_logs_activity_actor</a>( moves, <a class="code" href="classitem__location.html">item_location</a>( *p, it ) ) );</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( pnt );</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160; </div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02709">character.h:2709</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6c34c8584d08676678b5001a74de77dc"><div class="ttname"><a href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">Character::get_crafting_helpers</a></div><div class="ttdeci">std::vector&lt; Character * &gt; get_crafting_helpers() const</div><div class="ttdoc">Return nearby Characters ready and willing to help with crafting.</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l03051">crafting.cpp:3051</a></div></div>
<div class="ttc" id="aclasschop__logs__activity__actor_html"><div class="ttname"><a href="classchop__logs__activity__actor.html">chop_logs_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01809">activity_actor_definitions.h:1810</a></div></div>
<div class="ttc" id="aclassmap_html_ac868b594b36b6b9bbcb130650fd4f61f"><div class="ttname"><a href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">map::getglobal</a></div><div class="ttdeci">tripoint_abs_ms getglobal(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09625">map.cpp:9625</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_ace15a2f5a970ee2cdb53e5ded21d08a2"><div class="ttname"><a href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">player_activity::placement</a></div><div class="ttdeci">tripoint_abs_ms placement</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00068">player_activity.h:68</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a32e06432f8d94a516a3c9e76cbe68f9f"><div class="ttname"><a href="iuse_8cpp.html#a32e06432f8d94a516a3c9e76cbe68f9f">ter_t_stump</a></div><div class="ttdeci">static const ter_str_id ter_t_stump(&quot;t_stump&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a751071d7c8d046780b9ea56e119254d1"><div class="ttname"><a href="iuse_8cpp.html#a751071d7c8d046780b9ea56e119254d1">chop_moves</a></div><div class="ttdeci">static int chop_moves(Character *p, item *it)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04530">iuse.cpp:4530</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aa2400d283615d4c642e5dc0856a62a98"><div class="ttname"><a href="iuse_8cpp.html#aa2400d283615d4c642e5dc0856a62a98">ter_t_trunk</a></div><div class="ttdeci">static const ter_str_id ter_t_trunk(&quot;t_trunk&quot;)</div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7c"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a></div><div class="ttdeci">type</div><div class="ttdoc">Basic enum for directions.</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00054">omdata.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="iuse_8cpp_source.html#l04530">chop_moves()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="crafting_8cpp_source.html#l03051">Character::get_crafting_helpers()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="iuse_8cpp.html#a32e06432f8d94a516a3c9e76cbe68f9f">ter_t_stump</a>, <a class="el" href="iuse_8cpp.html#aa2400d283615d4c642e5dc0856a62a98">ter_t_trunk</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3cb10c16dedd50a5f2cf6d3a5308af40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cb10c16dedd50a5f2cf6d3a5308af40">&#9670;&nbsp;</a></span>chop_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::chop_tree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04544">4544</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;{</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action chop_tree that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    }</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    }</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;here, p]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;        }</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;        <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054abe48b536fff3d333d53c8c4e5c07b664">ter_furn_flag::TFLAG_TREE</a>, pnt );</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;    };</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160; </div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Chop down which tree?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no tree to chop down nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;    }</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re not stern enough to shave yourself with THIS.&quot;</span> ) );</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t chop down that.&quot;</span> ) );</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;        }</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    }</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    <span class="keywordtype">int</span> moves = <a class="code" href="iuse_8cpp.html#a751071d7c8d046780b9ea56e119254d1">chop_moves</a>( p, it );</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keyword">const</span> std::vector&lt;Character *&gt; helpers = p-&gt;<a class="code" href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">get_crafting_helpers</a>();</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    <span class="keywordflow">for</span>( std::size_t i = 0; i &lt; helpers.size() &amp;&amp; i &lt; 3; i++ ) {</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s helps with this task&quot;</span> ), helpers[i]-&gt;get_name() );</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    }</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classchop__tree__activity__actor.html">chop_tree_activity_actor</a>( moves, <a class="code" href="classitem__location.html">item_location</a>( *p, it ) ) );</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( pnt );</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160; </div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;}</div>
<div class="ttc" id="aclasschop__tree__activity__actor_html"><div class="ttname"><a href="classchop__tree__activity__actor.html">chop_tree_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01860">activity_actor_definitions.h:1861</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054abe48b536fff3d333d53c8c4e5c07b664"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054abe48b536fff3d333d53c8c4e5c07b664">ter_furn_flag::TFLAG_TREE</a></div><div class="ttdeci">@ TFLAG_TREE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="iuse_8cpp_source.html#l04530">chop_moves()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="crafting_8cpp_source.html#l03051">Character::get_crafting_helpers()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054abe48b536fff3d333d53c8c4e5c07b664">TFLAG_TREE</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a4da7c6f8769914baeef050e18b2838d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da7c6f8769914baeef050e18b2838d4">&#9670;&nbsp;</a></span>clear_rubble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::clear_rubble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02894">2894</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;{</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action clear_rubble that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    }</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    }</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160; </div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    std::vector&lt;construction&gt; <span class="keyword">const</span> &amp;cnstr = <a class="code" href="construction_8cpp.html#abf6972c182dd899261674bc5ad29650a">get_constructions</a>();</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> build = std::find_if( cnstr.begin(), cnstr.end(), []( <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp; it ) {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        return it.str_id == construction_constr_clear_rubble;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    } );</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <a class="code" href="construction_8cpp.html#a31f53c2594f5af9a55fa88dd810e60eb">place_construction</a>( { build-&gt;group } );</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;}</div>
<div class="ttc" id="aconstruction_8cpp_html_a31f53c2594f5af9a55fa88dd810e60eb"><div class="ttname"><a href="construction_8cpp.html#a31f53c2594f5af9a55fa88dd810e60eb">place_construction</a></div><div class="ttdeci">void place_construction(std::vector&lt; construction_group_str_id &gt; const &amp;groups)</div><div class="ttdef"><b>Definition:</b> <a href="construction_8cpp_source.html#l00996">construction.cpp:996</a></div></div>
<div class="ttc" id="aconstruction_8cpp_html_abf6972c182dd899261674bc5ad29650a"><div class="ttname"><a href="construction_8cpp.html#abf6972c182dd899261674bc5ad29650a">get_constructions</a></div><div class="ttdeci">const std::vector&lt; construction &gt; &amp; get_constructions()</div><div class="ttdef"><b>Definition:</b> <a href="construction_8cpp_source.html#l00358">construction.cpp:358</a></div></div>
<div class="ttc" id="astructconstruction_html"><div class="ttname"><a href="structconstruction.html">construction</a></div><div class="ttdef"><b>Definition:</b> <a href="construction_8h_source.html#l00043">construction.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="construction_8cpp_source.html#l00358">get_constructions()</a>, <a class="el" href="construction_8cpp_source.html#l00996">place_construction()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a4711d604b2c2629bdb7dc78e0eea08f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4711d604b2c2629bdb7dc78e0eea08f2">&#9670;&nbsp;</a></span>coin_flip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::coin_flip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08395">8395</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;{</div>
<div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You flip a %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Heads!&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tails!&quot;</span> ) );</div>
<div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae3f77bc1e845d285caf3f49d6e370733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f77bc1e845d285caf3f49d6e370733">&#9670;&nbsp;</a></span>coke()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::coke </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength reduces duration of coke 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00834">834</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;{</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You snort a bump of coke.&quot;</span> ) );<span class="comment"></span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">    /** @EFFECT_STR reduces duration of coke */</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> duration = 20_minutes - 1_seconds * p-&gt;<a class="code" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0_minutes, 1_minutes );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a> ) ) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        duration -= 1_minutes; <span class="comment">// Symmetry would cause problems :-/</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a> ) ) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        duration += 2_minutes;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( -8 );</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a>, duration );</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aa5b5af8930de14abd0df92f007e9d176"><div class="ttname"><a href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">Character::mod_hunger</a></div><div class="ttdeci">void mod_hunger(int nhunger)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04486">character.cpp:4486</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l04486">Character::mod_hunger()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="character_8h_source.html#l00577">Character::str_cur</a>, <a class="el" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a>, and <a class="el" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abacdd5d614a0ad0dca47ce3785dbdd70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abacdd5d614a0ad0dca47ce3785dbdd70">&#9670;&nbsp;</a></span>contacts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;int&gt; iuse::contacts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f315b4f024892d60d4bf51c1c2ebaf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f315b4f024892d60d4bf51c1c2ebaf9">&#9670;&nbsp;</a></span>craft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::craft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08329">8329</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;{</div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;    }</div>
<div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;    it = <a class="code" href="iuse_8cpp.html#ab4665c5cc8678d9748340d830e356140">wield_before_use</a>( p, it, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wield the %s and start working?&quot;</span> ) );</div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;    <span class="keywordflow">if</span>( !it ) {</div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;    }</div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160; </div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;    <span class="keyword">const</span> std::string craft_name = it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>();</div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160; </div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">is_craft</a>() ) {</div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Attempted to start working on non craft &#39;%s.&#39;  Aborting.&quot;</span>, craft_name );</div>
<div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;    }</div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160; </div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a9f0a75ae7afe2a19dcb4415262df12f5">can_continue_craft</a>( *it ) ) {</div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;    }</div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;    <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> &amp;rec = it-&gt;<a class="code" href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">get_making</a>();</div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a535167f4db9b14541d3f26268cb7c4d0">has_recipe</a>( &amp;rec ) ) {</div>
<div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t know the recipe for the %s and can&#39;t continue crafting.&quot;</span> ),</div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; doesn&#39;t know the recipe for the %s and can&#39;t continue crafting.&quot;</span> ),</div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;            rec.<a class="code" href="classrecipe.html#a7aab303fc95f1e765db693bc59823ed6">result_name</a>() );</div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;    }</div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;        <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;in progress craft&quot;</span>, <span class="stringliteral">&quot;You start working on the %s.&quot;</span> ),</div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;        <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;in progress craft&quot;</span>, <span class="stringliteral">&quot;&lt;npcname&gt; starts working on the %s.&quot;</span> ), craft_name );</div>
<div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> craft_loc = <a class="code" href="classitem__location.html">item_location</a>( *p, it );</div>
<div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classcraft__activity__actor.html">craft_activity_actor</a>( craft_loc, <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160; </div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a535167f4db9b14541d3f26268cb7c4d0"><div class="ttname"><a href="classCharacter.html#a535167f4db9b14541d3f26268cb7c4d0">Character::has_recipe</a></div><div class="ttdeci">bool has_recipe(const recipe *r) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00021">character_crafting.cpp:21</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9f0a75ae7afe2a19dcb4415262df12f5"><div class="ttname"><a href="classCharacter.html#a9f0a75ae7afe2a19dcb4415262df12f5">Character::can_continue_craft</a></div><div class="ttdeci">bool can_continue_craft(item &amp;craft)</div><div class="ttdoc">Check if the player meets the requirements to continue the in progress craft and if unable to continu...</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l01553">crafting.cpp:1553</a></div></div>
<div class="ttc" id="aclasscraft__activity__actor_html"><div class="ttname"><a href="classcraft__activity__actor.html">craft_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00933">activity_actor_definitions.h:934</a></div></div>
<div class="ttc" id="aclassitem_html_a685baa0530bf9e4cb57c2cea27ed332b"><div class="ttname"><a href="classitem.html#a685baa0530bf9e4cb57c2cea27ed332b">item::get_making</a></div><div class="ttdeci">const recipe &amp; get_making() const</div><div class="ttdoc">Get the stored recipe for in progress crafts.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14758">item.cpp:14758</a></div></div>
<div class="ttc" id="aclassitem_html_a7f25e0430419609c538b07f704d6ba7a"><div class="ttname"><a href="classitem.html#a7f25e0430419609c538b07f704d6ba7a">item::is_craft</a></div><div class="ttdeci">bool is_craft() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09930">item.cpp:9930</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ab4665c5cc8678d9748340d830e356140"><div class="ttname"><a href="iuse_8cpp.html#ab4665c5cc8678d9748340d830e356140">wield_before_use</a></div><div class="ttdeci">static item * wield_before_use(Character *const p, item *const it, const std::string &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08310">iuse.cpp:8310</a></div></div>
<div class="ttc" id="atranslations_8h_html_a46bdf4dff9d320938561cade1c9a5f7e"><div class="ttname"><a href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a></div><div class="ttdeci">#define pgettext(STRING1, STRING2)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00092">translations.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="crafting_8cpp_source.html#l01553">Character::can_continue_craft()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l14758">item::get_making()</a>, <a class="el" href="character__crafting_8cpp_source.html#l00021">Character::has_recipe()</a>, <a class="el" href="item_8cpp_source.html#l09930">item::is_craft()</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="recipe_8cpp_source.html#l01216">recipe::result_name()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="iuse_8cpp_source.html#l08310">wield_before_use()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1e61fe7c6df1284dc3fbe613c456ce8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e61fe7c6df1284dc3fbe613c456ce8a">&#9670;&nbsp;</a></span>crowbar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::crowbar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02719">2719</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;{</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    }</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f =</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    [&amp;here, p]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( pnt ) ) {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pnt )-&gt;<a class="code" href="structfurn__t.html#a27e414abdc53ff0f4da546d9d740fca8">prying</a>-&gt;valid();</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a27531d8882b8c6684dfda1fa41acce1f">is_null</a>() ) {</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#ad97e44c5c5cbf5b7d42eff45ff01f132">prying</a>-&gt;valid();</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        }</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    };</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = ( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> != p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ? <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> : <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pry where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is nothing to pry nearby.&quot;</span> ), f, false );</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    }</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160; </div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160; </div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keyword">const</span> <a class="code" href="structpry__data.html">pry_data</a> *prying;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( pnt ) ) {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        prying = &amp;here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pnt )-&gt;<a class="code" href="structfurn__t.html#a27e414abdc53ff0f4da546d9d740fca8">prying</a>-&gt;prying_data();</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;        prying = &amp;here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#ad97e44c5c5cbf5b7d42eff45ff01f132">prying</a>-&gt;prying_data();</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    }</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160; </div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( <span class="stringliteral">&quot;hammer&quot;</span> ) ) ) {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to hit yourself with the hammer.&quot;</span> ) );</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;But you can&#39;t touch this.&quot;</span> ) );</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to pry open your wallet, &quot;</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                                                 <span class="stringliteral">&quot;but alas.  You are just too miserly.&quot;</span> ) );</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            }</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t pry that.&quot;</span> ) );</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        }</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="comment">// previously iuse::hammer</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">if</span>( prying-&gt;<a class="code" href="structpry__data.html#a98ae751b726bfa2bac42689ed38f2d04">prying_nails</a> ) {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classprying__activity__actor.html">prying_activity_actor</a>( pnt, <a class="code" href="classitem__location.html">item_location</a>{*p, it} ) );</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    }</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="comment">// Doors need PRY 2 which is on a crowbar, crates need PRY 1 which is on a crowbar</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="comment">// &amp; a claw hammer.</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="comment">// The iexamine function for crate supplies a hammer object.</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="comment">// So this stops the player (A)ctivating a Hammer with a Crowbar in their backpack</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="comment">// then managing to open a door.</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pry_level = it-&gt;<a class="code" href="classitem.html#a7d1ba8693571b9563e111fe709348438">get_quality</a>( <a class="code" href="iuse_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a> );</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="keywordflow">if</span>( pry_level &lt; prying-&gt;prying_level ) {</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        <span class="comment">// This doesn&#39;t really make it clear to the player</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="comment">// why their attempt is failing.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t get sufficient leverage to open that with your %1$s.&quot;</span> ),</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -50 ); <span class="comment">// spend a few moves trying it.</span></div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    }</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160; </div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classprying__activity__actor.html">prying_activity_actor</a>( pnt, <a class="code" href="classitem__location.html">item_location</a>{*p, it} ) );</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160; </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a7d1ba8693571b9563e111fe709348438"><div class="ttname"><a href="classitem.html#a7d1ba8693571b9563e111fe709348438">item::get_quality</a></div><div class="ttdeci">int get_quality(const quality_id &amp;id, bool strict_boiling=true) const</div><div class="ttdoc">Return the level of a given quality the tool may have, or INT_MIN if it does not have that quality,...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07737">item.cpp:7737</a></div></div>
<div class="ttc" id="aclassprying__activity__actor_html"><div class="ttname"><a href="classprying__activity__actor.html">prying_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01463">activity_actor_definitions.h:1464</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ab1b63cf78382cbe22b62b8b62e9c71b7"><div class="ttname"><a href="iuse_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a></div><div class="ttdeci">static const quality_id qual_PRY(&quot;PRY&quot;)</div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="astructfurn__t_html_a27e414abdc53ff0f4da546d9d740fca8"><div class="ttname"><a href="structfurn__t.html#a27e414abdc53ff0f4da546d9d740fca8">furn_t::prying</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_furn &gt; prying</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00663">mapdata.h:663</a></div></div>
<div class="ttc" id="astructpry__data_html"><div class="ttname"><a href="structpry__data.html">pry_data</a></div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00362">mapdata.h:362</a></div></div>
<div class="ttc" id="astructpry__data_html_a98ae751b726bfa2bac42689ed38f2d04"><div class="ttname"><a href="structpry__data.html#a98ae751b726bfa2bac42689ed38f2d04">pry_data::prying_nails</a></div><div class="ttdeci">bool prying_nails</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00363">mapdata.h:363</a></div></div>
<div class="ttc" id="astructter__t_html_ad97e44c5c5cbf5b7d42eff45ff01f132"><div class="ttname"><a href="structter__t.html#ad97e44c5c5cbf5b7d42eff45ff01f132">ter_t::prying</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_ter &gt; prying</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00612">mapdata.h:612</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l07737">item::get_quality()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00864">ter_t::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="mapdata_8h_source.html#l00612">ter_t::prying</a>, <a class="el" href="mapdata_8h_source.html#l00663">furn_t::prying</a>, <a class="el" href="mapdata_8h_source.html#l00363">pry_data::prying_nails</a>, <a class="el" href="iuse_8cpp.html#ab1b63cf78382cbe22b62b8b62e9c71b7">qual_PRY</a>, <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l02714">crowbar_weak()</a>, <a class="el" href="iuse_8cpp_source.html#l02709">hammer()</a>, <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="iexamine_8cpp_source.html#l01826">iexamine::locked_object()</a>.</p>

</div>
</div>
<a id="aae23e18216c07772d07cd9676c4402d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae23e18216c07772d07cd9676c4402d8">&#9670;&nbsp;</a></span>crowbar_weak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::crowbar_weak </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02714">2714</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;{</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;}</div>
<div class="ttc" id="anamespaceiuse_html_a1e61fe7c6df1284dc3fbe613c456ce8a"><div class="ttname"><a href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a></div><div class="ttdeci">std::optional&lt; int &gt; crowbar(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02719">iuse.cpp:2719</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l02719">crowbar()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a33c918bef9271c1ce52f049bffb28596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c918bef9271c1ce52f049bffb28596">&#9670;&nbsp;</a></span>cut_log_into_planks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iuse::cut_log_into_planks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04479">4479</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;{</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;    <span class="keywordflow">if</span>( p.<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    }</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( 20_minutes );</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cut the log into planks.&quot;</span> ) );</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160; </div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    p.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classchop__planks__activity__actor.html">chop_planks_activity_actor</a>( moves ) );</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    p.<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( p.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;}</div>
<div class="ttc" id="aclasschop__planks__activity__actor_html"><div class="ttname"><a href="classchop__planks__activity__actor.html">chop_planks_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01835">activity_actor_definitions.h:1836</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, and <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="construction_8cpp_source.html#l01397">construct::done_trunk_plank()</a>, and <a class="el" href="iuse_8cpp_source.html#l04491">lumber()</a>.</p>

</div>
</div>
<a id="af3433902868365f40cf8698f711b20ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3433902868365f40cf8698f711b20ab">&#9670;&nbsp;</a></span>datura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::datura </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00988">988</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;{</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a0a3de1e6679128988d176115710ddd03">effect_datura</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3_hours, 13_hours ) );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You eat the datura seed.&quot;</span> ) );</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a> ) ) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, 36, 72, 2_hours, 1_hours, <span class="keyword">false</span>, it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a0a3de1e6679128988d176115710ddd03"><div class="ttname"><a href="iuse_8cpp.html#a0a3de1e6679128988d176115710ddd03">effect_datura</a></div><div class="ttdeci">static const efftype_id effect_datura(&quot;datura&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_abf47c050c3a01d3496c3eb251fa9c517"><div class="ttname"><a href="iuse_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a></div><div class="ttdeci">static const trait_id trait_SPIRITUAL(&quot;SPIRITUAL&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ab2e7f135d6749b067f488c38bec7eb8c"><div class="ttname"><a href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a></div><div class="ttdeci">const morale_type MORALE_FOOD_GOOD(&quot;morale_food_good&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a0a3de1e6679128988d176115710ddd03">effect_datura</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="iuse_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2315308129adbe8c0aea7e012b061aee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2315308129adbe8c0aea7e012b061aee">&#9670;&nbsp;</a></span>dbg_lux_meter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dbg_lux_meter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07878">7878</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;{</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> incident_light = <a class="code" href="group__Weather.html#gae4b653b6edfa7478802ae5887ea4a9dc">incident_sunlight</a>( <a class="code" href="group__Weather.html#gafc64a9b34f249d6f8319072719d52720">current_weather</a>( here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ),</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;                                 <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> nat_light = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;natural_light_level( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.z );</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> sunlight = <a class="code" href="calendar_8cpp.html#a515637eec30a1a2cc7357a1e08ddae27">sun_light_at</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> sun_irrad = <a class="code" href="calendar_8cpp.html#aaad5c602d279e8e1a5830ca4b698acc6">sun_irradiance</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> incident_irrad = <a class="code" href="group__Weather.html#gad83f21ad25e9b3edcd48ada9130cd512">incident_sun_irradiance</a>( <a class="code" href="group__Weather.html#gafc64a9b34f249d6f8319072719d52720">current_weather</a>( here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ),</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;                                 <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Incident light: %.1f\nNatural light: %.1f\nSunlight: %.1f\nSun irradiance: %.1f\nIncident irradiance %.1f&quot;</span> ),</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;                          incident_light, nat_light, sunlight, sun_irrad, incident_irrad );</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160; </div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a515637eec30a1a2cc7357a1e08ddae27"><div class="ttname"><a href="calendar_8cpp.html#a515637eec30a1a2cc7357a1e08ddae27">sun_light_at</a></div><div class="ttdeci">float sun_light_at(const time_point &amp;p)</div><div class="ttdoc">Returns the current sunlight.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00383">calendar.cpp:383</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_aaad5c602d279e8e1a5830ca4b698acc6"><div class="ttname"><a href="calendar_8cpp.html#aaad5c602d279e8e1a5830ca4b698acc6">sun_irradiance</a></div><div class="ttdeci">float sun_irradiance(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00406">calendar.cpp:406</a></div></div>
<div class="ttc" id="agroup__Weather_html_gad83f21ad25e9b3edcd48ada9130cd512"><div class="ttname"><a href="group__Weather.html#gad83f21ad25e9b3edcd48ada9130cd512">incident_sun_irradiance</a></div><div class="ttdeci">float incident_sun_irradiance(const weather_type_id &amp;wtype, const time_point &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00143">weather.cpp:143</a></div></div>
<div class="ttc" id="agroup__Weather_html_gae4b653b6edfa7478802ae5887ea4a9dc"><div class="ttname"><a href="group__Weather.html#gae4b653b6edfa7478802ae5887ea4a9dc">incident_sunlight</a></div><div class="ttdeci">float incident_sunlight(const weather_type_id &amp;wtype, const time_point &amp;t)</div><div class="ttdoc">Amount of sunlight incident at the ground, taking weather and time of day into account.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00138">weather.cpp:138</a></div></div>
<div class="ttc" id="agroup__Weather_html_gafc64a9b34f249d6f8319072719d52720"><div class="ttname"><a href="group__Weather.html#gafc64a9b34f249d6f8319072719d52720">current_weather</a></div><div class="ttdeci">weather_type_id current_weather(const tripoint_abs_ms &amp;location, const time_point &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00176">weather.cpp:176</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="weather_8cpp_source.html#l00176">current_weather()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="weather_8cpp_source.html#l00143">incident_sun_irradiance()</a>, <a class="el" href="weather_8cpp_source.html#l00138">incident_sunlight()</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00406">sun_irradiance()</a>, <a class="el" href="calendar_8cpp_source.html#l00383">sun_light_at()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5a1c625609c7a13fb0833cc0259aed92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a1c625609c7a13fb0833cc0259aed92">&#9670;&nbsp;</a></span>dig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02830">2830</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;{</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action dig that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    }</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    }</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160; </div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    std::vector&lt;construction&gt; <span class="keyword">const</span> &amp;cnstr = <a class="code" href="construction_8cpp.html#abf6972c182dd899261674bc5ad29650a">get_constructions</a>();</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> build = std::find_if( cnstr.begin(), cnstr.end(), []( <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp; it ) {</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        return it.str_id == construction_constr_pit;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    } );</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> build_shallow = std::find_if( cnstr.begin(), cnstr.end(), []( <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp; it ) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        return it.str_id == construction_constr_pit_shallow;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    } );</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160; </div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <a class="code" href="construction_8cpp.html#a31f53c2594f5af9a55fa88dd810e60eb">place_construction</a>( { build-&gt;group, build_shallow-&gt;group } );</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="construction_8cpp_source.html#l00358">get_constructions()</a>, <a class="el" href="construction_8cpp_source.html#l00996">place_construction()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="construction_8cpp_source.html#l01629">construct::done_digormine_stair()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad237e98b818e25194ea182c0003933f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad237e98b818e25194ea182c0003933f2">&#9670;&nbsp;</a></span>dig_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dig_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02854">2854</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;{</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action dig_channel that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    }</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    std::vector&lt;construction&gt; <span class="keyword">const</span> &amp;cnstr = <a class="code" href="construction_8cpp.html#abf6972c182dd899261674bc5ad29650a">get_constructions</a>();</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> build = std::find_if( cnstr.begin(), cnstr.end(), []( <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp; it ) {</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;        return it.str_id == construction_constr_water_channel;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    } );</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160; </div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <a class="code" href="construction_8cpp.html#a31f53c2594f5af9a55fa88dd810e60eb">place_construction</a>( { build-&gt;group } );</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="construction_8cpp_source.html#l00358">get_constructions()</a>, <a class="el" href="construction_8cpp_source.html#l00996">place_construction()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="adab6b73b206eb43b5402344b47614b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adab6b73b206eb43b5402344b47614b0f">&#9670;&nbsp;</a></span>directional_antenna()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::directional_antenna </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02473">2473</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;{</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="comment">// Find out if we have an active radio</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keyword">auto</span> radios = p-&gt;<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( <a class="code" href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a> );</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="comment">// If we don&#39;t wield the radio, also check on the ground</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <span class="keywordflow">if</span>( radios.empty() ) {</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <a class="code" href="classmap__stack.html">map_stack</a> items = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;an_item : items ) {</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            <span class="keywordflow">if</span>( an_item.typeId() == <a class="code" href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a> ) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                radios.push_back( &amp;an_item );</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            }</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="keywordflow">if</span>( radios.empty() ) {</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You must have an active radio to check for signal direction.&quot;</span> ) );</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> <a class="code" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">radio</a> = *radios.front();</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="comment">// Find the radio station it&#39;s tuned to (if any)</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <span class="keyword">const</span> <a class="code" href="structradio__tower__reference.html">radio_tower_reference</a> tref = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a52ff63bf974047e40515dffc2b413167">find_radio_station</a>( <a class="code" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">radio</a>.frequency );</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="keywordflow">if</span>( !tref ) {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t find the direction if your radio isn&#39;t tuned.&quot;</span> ) );</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <span class="comment">// Report direction.</span></div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_sm</a> player_pos = p-&gt;<a class="code" href="classCreature.html#ac211737fb0fabb73b28d9aee3922ae50">global_sm_location</a>();</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = <a class="code" href="coordinates_8h.html#a70d5706d5a84c7c1953498fa0c651b3e">direction_from</a>( player_pos.<a class="code" href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">xy</a>(), tref.<a class="code" href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">abs_sm_pos</a> );</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The signal seems strongest to the %s.&quot;</span> ), <a class="code" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>( <a class="code" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> ) );</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_ac211737fb0fabb73b28d9aee3922ae50"><div class="ttname"><a href="classCreature.html#ac211737fb0fabb73b28d9aee3922ae50">Creature::global_sm_location</a></div><div class="ttdeci">tripoint_abs_sm global_sm_location() const</div><div class="ttdoc">Returns the location of the creature in global submap coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03237">creature.cpp:3237</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::sm &gt;</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a7b5804160d1d0e69a9f2fba098bea723"><div class="ttname"><a href="classcoords_1_1coord__point.html#a7b5804160d1d0e69a9f2fba098bea723">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00273">coordinates.h:273</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00106">map.h:107</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04978">map.cpp:4978</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a52ff63bf974047e40515dffc2b413167"><div class="ttname"><a href="classovermapbuffer.html#a52ff63bf974047e40515dffc2b413167">overmapbuffer::find_radio_station</a></div><div class="ttdeci">radio_tower_reference find_radio_station(int frequency)</div><div class="ttdoc">Find radio station with given frequency, search an unspecified area around the current player locatio...</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01384">overmapbuffer.cpp:1384</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a70d5706d5a84c7c1953498fa0c651b3e"><div class="ttname"><a href="coordinates_8h.html#a70d5706d5a84c7c1953498fa0c651b3e">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale, LhsInBounds &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale, RhsInBounds &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00790">coordinates.h:790</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a731e18ebb9fe98be814fd8e70499907d"><div class="ttname"><a href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a></div><div class="ttdeci">static const itype_id itype_radio_on(&quot;radio_on&quot;)</div></div>
<div class="ttc" id="aline_8cpp_html_a19634ed59e09da9312d6fa110a38539c"><div class="ttname"><a href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a></div><div class="ttdeci">std::string direction_name(const direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00612">line.cpp:612</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00042">line.h:42</a></div></div>
<div class="ttc" id="anamespacesfx_html_af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5"><div class="ttname"><a href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">sfx::channel::radio</a></div><div class="ttdeci">@ radio</div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00075">units_fwd.h:75</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="astructradio__tower__reference_html"><div class="ttname"><a href="structradio__tower__reference.html">radio_tower_reference</a></div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00060">overmapbuffer.h:60</a></div></div>
<div class="ttc" id="astructradio__tower__reference_html_ac13e6b8f6baac0d892f30845bb7d2d3d"><div class="ttname"><a href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">radio_tower_reference::abs_sm_pos</a></div><div class="ttdeci">point_abs_sm abs_sm_pos</div><div class="ttdoc">The global absolute position of the tower (in submap coordinates)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00064">overmapbuffer.h:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="overmapbuffer_8h_source.html#l00064">radio_tower_reference::abs_sm_pos</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="coordinates_8h_source.html#l00790">direction_from()</a>, <a class="el" href="line_8cpp_source.html#l00612">direction_name()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01384">overmapbuffer::find_radio_station()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l03237">Creature::global_sm_location()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, and <a class="el" href="coordinates_8h_source.html#l00273">coords::coord_point&lt; Point, Origin, Scale, InBounds &gt;::xy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3380b7c6e177ae52c1ed955c8f0cd429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3380b7c6e177ae52c1ed955c8f0cd429">&#9670;&nbsp;</a></span>directional_hologram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::directional_hologram </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07916">7916</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;{</div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp;  !p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to wear the %1$s before activating it.&quot;</span> ),</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;    }</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; posp = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose hologram direction.&quot;</span> ) );</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;    <span class="keywordflow">if</span>( !posp ) {</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;    }</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> delta = *posp - <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160; </div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;    <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> hologram = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code" href="iuse_8cpp.html#ab0d084494ccdd0e181ec0111482260e1">mon_hologram</a>, *posp );</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;    <span class="keywordflow">if</span>( !hologram ) {</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Can&#39;t create a hologram there.&quot;</span> ) );</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;    }</div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;    <a class="code" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a> target = p-&gt;<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>() + delta * ( 4 * <a class="code" href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a> );</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;    hologram-&gt;<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = -1;</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;    hologram-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, 1_hours );</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;    hologram-&gt;<a class="code" href="classmonster.html#a88c30bfeb57c6d44b965f92265fc16d2">wandf</a> = -30;</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;    hologram-&gt;<a class="code" href="classCreature.html#a36478eccbdd3eab446c0534fbca13644">set_summon_time</a>( 60_seconds );</div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;    hologram-&gt;<a class="code" href="classmonster.html#a59dab0b0d7e791038c18d01277393686">set_dest</a>( target );</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_abaafa6561de05c3b1324214e3048745a"><div class="ttname"><a href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13807">game.cpp:13807</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4d8d747c469431f530acb05c5f7a7f45"><div class="ttname"><a href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">Character::is_worn</a></div><div class="ttdeci">bool is_worn(const item &amp;thing) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01911">character.h:1911</a></div></div>
<div class="ttc" id="aclassCreature_html_a3261de1530798f5b934a71b9a4e17f5b"><div class="ttname"><a href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">Creature::get_location</a></div><div class="ttdeci">tripoint_abs_ms get_location() const</div><div class="ttdoc">Returns the location of the creature in map square coordinates (the most detailed coordinate system),...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03232">creature.cpp:3232</a></div></div>
<div class="ttc" id="aclassCreature_html_a36478eccbdd3eab446c0534fbca13644"><div class="ttname"><a href="classCreature.html#a36478eccbdd3eab446c0534fbca13644">Creature::set_summon_time</a></div><div class="ttdeci">void set_summon_time(const time_duration &amp;length)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02045">creature.cpp:2045</a></div></div>
<div class="ttc" id="aclassitem_html_a9aab8660fb40eedb8d2da95e797ecd32"><div class="ttname"><a href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a></div><div class="ttdeci">bool is_armor() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09623">item.cpp:9623</a></div></div>
<div class="ttc" id="aclassmonster_html_a59dab0b0d7e791038c18d01277393686"><div class="ttname"><a href="classmonster.html#a59dab0b0d7e791038c18d01277393686">monster::set_dest</a></div><div class="ttdeci">void set_dest(const tripoint_abs_ms &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01380">monster.cpp:1380</a></div></div>
<div class="ttc" id="aclassmonster_html_a88c30bfeb57c6d44b965f92265fc16d2"><div class="ttname"><a href="classmonster.html#a88c30bfeb57c6d44b965f92265fc16d2">monster::wandf</a></div><div class="ttdeci">int wandf</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00523">monster.h:523</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a39fd8a829e3dc412646663066dbdb54c"><div class="ttname"><a href="game__constants_8h.html#a39fd8a829e3dc412646663066dbdb54c">SEEX</a></div><div class="ttdeci">constexpr int SEEX</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00042">game_constants.h:42</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a924fe96bf3dd9ac954c9925fdd5b6901"><div class="ttname"><a href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a></div><div class="ttdeci">static const efftype_id effect_docile(&quot;docile&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab0d084494ccdd0e181ec0111482260e1"><div class="ttname"><a href="iuse_8cpp.html#ab0d084494ccdd0e181ec0111482260e1">mon_hologram</a></div><div class="ttdeci">static const mtype_id mon_hologram(&quot;mon_hologram&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, <a class="el" href="monster_8h_source.html#l00539">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="item_8cpp_source.html#l09623">item::is_armor()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="iuse_8cpp.html#ab0d084494ccdd0e181ec0111482260e1">mon_hologram</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="game__constants_8h_source.html#l00042">SEEX</a>, <a class="el" href="monster_8cpp_source.html#l01380">monster::set_dest()</a>, <a class="el" href="creature_8cpp_source.html#l02045">Creature::set_summon_time()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="monster_8h_source.html#l00523">monster::wandf</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1850ccc2fe2ae159a2d88bb31d67eedc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1850ccc2fe2ae159a2d88bb31d67eedc">&#9670;&nbsp;</a></span>disassemble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::disassemble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08366">8366</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;{</div>
<div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;    }</div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;    it = <a class="code" href="iuse_8cpp.html#ab4665c5cc8678d9748340d830e356140">wield_before_use</a>( p, it, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wield the %s and start working?&quot;</span> ) );</div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;    <span class="keywordflow">if</span>( !it ) {</div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;    }</div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *it ) ) {</div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;    }</div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160; </div>
<div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a5a8618d4d772b5b84a09d5357a6cd5cc">disassemble</a>( <a class="code" href="classitem__location.html">item_location</a>( *p, it ), <span class="keyword">false</span> );</div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160; </div>
<div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a5a8618d4d772b5b84a09d5357a6cd5cc"><div class="ttname"><a href="classCharacter.html#a5a8618d4d772b5b84a09d5357a6cd5cc">Character::disassemble</a></div><div class="ttdeci">bool disassemble()</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l02577">crafting.cpp:2577</a></div></div>
<div class="ttc" id="aclassvisitable_html_af49d5ef7b3f2f0a8664c23097a56373f"><div class="ttname"><a href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">visitable::has_item</a></div><div class="ttdeci">bool has_item(const item &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00075">visitable.cpp:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="crafting_8cpp_source.html#l02577">Character::disassemble()</a>, <a class="el" href="visitable_8cpp_source.html#l00075">visitable::has_item()</a>, and <a class="el" href="iuse_8cpp_source.html#l08310">wield_before_use()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad6120adfc71b4c1ec6a89dd84f8cc435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6120adfc71b4c1ec6a89dd84f8cc435">&#9670;&nbsp;</a></span>dive_tank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dive_tank </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03861">3861</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;{</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    <span class="keywordflow">if</span>( p &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> &lt; 10 ) {</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> += 20;</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        }</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 15 ) ) {</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take a deep breath from your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        }</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Air in your %s runs out.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;            it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span> );</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        }</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// not worn = off thanks to on-demand regulator</span></div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span> );</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    }</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160; </div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a865e5eb770c71b3bd4ec4a05235cd3b6"><div class="ttname"><a href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">Character::oxygen</a></div><div class="ttdeci">int oxygen</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02735">character.h:2735</a></div></div>
<div class="ttc" id="aclassitem_html_aa24fc115fb6cd1124efec30970cfcd9b"><div class="ttname"><a href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">item::erase_var</a></div><div class="ttdeci">void erase_var(const std::string &amp;name)</div><div class="ttdoc">Erase the value of the given variable.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01933">item.cpp:1933</a></div></div>
<div class="ttc" id="astructitype_html_a5122ad2da0463bc322c472df1dc9ce43"><div class="ttname"><a href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">itype::revert_to</a></div><div class="ttdeci">std::optional&lt; itype_id &gt; revert_to</div><div class="ttdoc">If set the item will revert to this after countdown.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01382">itype.h:1382</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="character_8h_source.html#l02735">Character::oxygen</a>, <a class="el" href="itype_8h_source.html#l01382">itype::revert_to</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae9d80690ffeeccd8acdc670ad4e5f1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9d80690ffeeccd8acdc670ad4e5f1e1">&#9670;&nbsp;</a></span>dive_tank_activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dive_tank_activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03883">3883</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;{</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is empty.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) { <span class="comment">//off</span></div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn off the regulator and close the air valve.&quot;</span> ) );</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span> );</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( *it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a5122ad2da0463bc322c472df1dc9ce43">revert_to</a> ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">//on</span></div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You should wear it first.&quot;</span> ) );</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn on the regulator and open the air valve.&quot;</span> ) );</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span>, it-&gt;<a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">get_base_env_resist_w_filter</a>() );</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot;_on&quot;</span> ) ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        }</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    }</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_acb31dfc93d0de49315fdbbac504236df"><div class="ttname"><a href="classitem.html#acb31dfc93d0de49315fdbbac504236df">item::get_base_env_resist_w_filter</a></div><div class="ttdeci">int get_base_env_resist_w_filter() const</div><div class="ttdoc">Returns the base resistance to environmental effects if an item (for example a gas mask) requires a g...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08029">item.cpp:8029</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="item_8cpp_source.html#l08029">item::get_base_env_resist_w_filter()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="itype_8h_source.html#l01382">itype::revert_to</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2f817a798c3b3dc964213258cae83c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f817a798c3b3dc964213258cae83c84">&#9670;&nbsp;</a></span>dog_whistle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::dog_whistle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04317">4317</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;{</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    }</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    }</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You blow your dog whistle.&quot;</span> ) );</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160; </div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <span class="comment">// Can the Character hear the dog whistle?</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;    <span class="keyword">auto</span> hearing_check = [p]( <span class="keyword">const</span> <a class="code" href="classCharacter.html">Character</a> &amp; who ) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        <span class="keywordflow">return</span> !who.is_deaf() &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( who ) &amp;&amp;</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        who.has_trait( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a>( <span class="stringliteral">&quot;THRESH_LUPINE&quot;</span> ) ) );</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;    };</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160; </div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp;subject : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_npcs() ) {</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;        <span class="keywordflow">if</span>( !( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) &amp;&amp; hearing_check( subject ) ) ) {</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;        }</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160; </div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;        std::optional&lt;translation&gt; npc_message;</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160; </div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a6b6a4fc8bbec9e138f0e3922bdbf2ce9">attitude_to</a>( subject ) == <a class="code" href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::Attitude::HOSTILE</a> ) {</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;            npc_message = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;dogwhistle_message_npc_hostile&quot;</span> );</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;            npc_message = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;dogwhistle_message_npc_not_hostile&quot;</span> );</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;        }</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160; </div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;        <span class="keywordflow">if</span>( npc_message ) {</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;            subject.say( npc_message.value().translated() );</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;        }</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    }</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160; </div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <span class="keywordflow">if</span>( hearing_check( *p ) &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;        std::optional&lt;translation&gt; your_message = <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;dogwhistle_message_you&quot;</span> );</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        <span class="keywordflow">if</span>( your_message ) {</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, your_message.value().translated() );</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;        }</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;    }</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160; </div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classmonster.html">monster</a> &amp;critter : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;        <span class="keywordflow">if</span>( critter.friendly != 0 &amp;&amp; critter.has_flag( <a class="code" href="mtype_8cpp.html#a71a637cd8893c5beb2abbc8ad079453e">mon_flag_DOGFOOD</a> ) ) {</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            <span class="keywordtype">bool</span> u_see = <a class="code" href="game_8cpp.html#ab5c977b7e81348725fb7bf09fc64ed95">get_player_view</a>().<a class="code" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">sees</a>( critter );</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            <span class="keywordflow">if</span>( critter.has_effect( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a> ) ) {</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s looks ready to attack.&quot;</span> ), critter.name() );</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;                }</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                critter.remove_effect( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a> );</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;                <span class="keywordflow">if</span>( u_see ) {</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s goes docile.&quot;</span> ), critter.name() );</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;                }</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                critter.add_effect( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;            }</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;        }</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;    }</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6b6a4fc8bbec9e138f0e3922bdbf2ce9"><div class="ttname"><a href="classCharacter.html#a6b6a4fc8bbec9e138f0e3922bdbf2ce9">Character::attitude_to</a></div><div class="ttdeci">Attitude attitude_to(const Creature &amp;other) const override</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11349">character.cpp:11349</a></div></div>
<div class="ttc" id="aclassCharacter_html_a906192bd3a5f29a61ee12695e18d2eb5"><div class="ttname"><a href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_avatar=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11397">character.cpp:11397</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::Attitude::HOSTILE</a></div><div class="ttdeci">@ HOSTILE</div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00791">npc.h:792</a></div></div>
<div class="ttc" id="aclasssnippet__library_html_a685c0168b039e17ca677a61e21900fe1"><div class="ttname"><a href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">snippet_library::random_from_category</a></div><div class="ttdeci">std::optional&lt; translation &gt; random_from_category(const std::string &amp;cat) const</div><div class="ttdoc">Returns a random snippet out of the given category.</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00286">text_snippets.cpp:286</a></div></div>
<div class="ttc" id="aclassviewer_html_a204fe140cdc73d2452fa9a390a32ba29"><div class="ttname"><a href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">viewer::sees</a></div><div class="ttdeci">virtual bool sees(const tripoint &amp;target, bool is_avatar=false, int range_mod=0) const =0</div></div>
<div class="ttc" id="agame_8cpp_html_ab5c977b7e81348725fb7bf09fc64ed95"><div class="ttname"><a href="game_8cpp.html#ab5c977b7e81348725fb7bf09fc64ed95">get_player_view</a></div><div class="ttdeci">viewer &amp; get_player_view()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13812">game.cpp:13812</a></div></div>
<div class="ttc" id="amtype_8cpp_html_a71a637cd8893c5beb2abbc8ad079453e"><div class="ttname"><a href="mtype_8cpp.html#a71a637cd8893c5beb2abbc8ad079453e">mon_flag_DOGFOOD</a></div><div class="ttdeci">mon_flag_id mon_flag_DOGFOOD</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00070">mtype.cpp:70</a></div></div>
<div class="ttc" id="atext__snippets_8cpp_html_ac3fc11c159cd056aa15ad7c0b37b070a"><div class="ttname"><a href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a></div><div class="ttdeci">snippet_library SNIPPET</div><div class="ttdef"><b>Definition:</b> <a href="text__snippets_8cpp_source.html#l00015">text_snippets.cpp:15</a></div></div>
<div class="ttc" id="atype__id_8h_html_a44aa01c09faf1c1723400eb9075a1f4d"><div class="ttname"><a href="type__id_8h.html#a44aa01c09faf1c1723400eb9075a1f4d">trait_id</a></div><div class="ttdeci">string_id&lt; mutation_branch &gt; trait_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00280">type_id.h:280</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l11349">Character::attitude_to()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13812">get_player_view()</a>, <a class="el" href="classCreature.html#a8a475630b3289c468bd06cf114008217a10794171f9c3f68753d26303cfec9747">Creature::HOSTILE</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mtype_8cpp_source.html#l00070">mon_flag_DOGFOOD</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00286">snippet_library::random_from_category()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">viewer::sees()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, and <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a0d6a39bf4d03d6f81f6c99574924a808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6a39bf4d03d6f81f6c99574924a808">&#9670;&nbsp;</a></span>ebookread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ebookread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08707">8707</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;{</div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action ebookread that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;    }</div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">is_ebook_storage</a>() ) {</div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;EBOOKREAD iuse called on item without ebook type pocket&quot;</span> );</div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;    }</div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160; </div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;    }</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160; </div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unfortunately your device is not waterproof.&quot;</span> ) );</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;    }</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160; </div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;        !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) &amp;&amp;</div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;        !p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a> ) ) {</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;    }</div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160; </div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;    <span class="comment">// Only turn on the eBook light, if it&#39;s too dark to read</span></div>
<div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 &amp;&amp; !it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> &amp;&amp; it-&gt;<a class="code" href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">is_transformable</a>() ) {</div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;        <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *readinglight = it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;transform&quot;</span> );</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;        <span class="keywordflow">if</span>( readinglight ) {</div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;            readinglight-&gt;<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( p, *it, p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;        }</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;    }</div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160; </div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> ereader = <a class="code" href="classitem__location.html">item_location</a>( *p, it );</div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> book = <a class="code" href="namespacegame__menus_1_1inv.html#a988cfc756cfe06759bb48784ad7fb2c4">game_menus::inv::ebookread</a>( *p, ereader );</div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160; </div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;    <span class="keywordflow">if</span>( !book ) {</div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;    }</div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160; </div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a070c1b744213489475a890af58a6dbea">read</a>( book, ereader );</div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160; </div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_addcf2c54cf8c3920f66328e2441830fb"><div class="ttname"><a href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00548">character_attire.cpp:548</a></div></div>
<div class="ttc" id="aclassavatar_html_a070c1b744213489475a890af58a6dbea"><div class="ttname"><a href="classavatar.html#a070c1b744213489475a890af58a6dbea">avatar::read</a></div><div class="ttdeci">bool read(item_location &amp;book, item_location ereader={})</div><div class="ttdoc">Handles reading effects and returns true if activity started.</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00432">avatar.cpp:432</a></div></div>
<div class="ttc" id="aclassitem_html_a08a65f52f9de30e8f4a76e270bfc67a1"><div class="ttname"><a href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">item::is_transformable</a></div><div class="ttdeci">bool is_transformable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09958">item.cpp:9958</a></div></div>
<div class="ttc" id="aclassitem_html_af273ef83e89ee90f20f60b04402a4ec1"><div class="ttname"><a href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">item::is_ebook_storage</a></div><div class="ttdeci">bool is_ebook_storage() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08596">item.cpp:8596</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a50f5a8208b7d57bd83312fa8a9b8b1c3"><div class="ttname"><a href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a></div><div class="ttdeci">const flag_id flag_FIX_FARSIGHT(&quot;FIX_FARSIGHT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a149b663b733ea4a7320bb3348eaa0b55"><div class="ttname"><a href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a></div><div class="ttdeci">static const efftype_id effect_transition_contacts(&quot;transition_contacts&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a205762841bcda5e69b1394f92e6863b5"><div class="ttname"><a href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a></div><div class="ttdeci">static const json_character_flag json_flag_ENHANCED_VISION(&quot;ENHANCED_VISION&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a3151d4a613895c95436a5981e382ef80"><div class="ttname"><a href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a></div><div class="ttdeci">static const efftype_id effect_contacts(&quot;contacts&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af5e248cae7a3f771bcc50d3f026b7207"><div class="ttname"><a href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a></div><div class="ttdeci">static const json_character_flag json_flag_HYPEROPIC(&quot;HYPEROPIC&quot;)</div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a988cfc756cfe06759bb48784ad7fb2c4"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a988cfc756cfe06759bb48784ad7fb2c4">game_menus::inv::ebookread</a></div><div class="ttdeci">item_location ebookread(Character &amp;you, item_location &amp;ereader)</div><div class="ttdoc">eBook reading menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l01564">game_inventory.cpp:1564</a></div></div>
<div class="ttc" id="astructitype_html_a304367633fdfe6c63a53bdce0caced92"><div class="ttname"><a href="structitype.html#a304367633fdfe6c63a53bdce0caced92">itype::get_use</a></div><div class="ttdeci">const use_function * get_use(const std::string &amp;iuse_name) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00179">itype.cpp:179</a></div></div>
<div class="ttc" id="astructuse__function_html"><div class="ttname"><a href="structuse__function.html">use_function</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00302">iuse.h:302</a></div></div>
<div class="ttc" id="astructuse__function_html_a308134b3f05ca40164e867ac8d922da8"><div class="ttname"><a href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">use_function::call</a></div><div class="ttdeci">std::optional&lt; int &gt; call(Character *, item &amp;, const tripoint &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08922">iuse.cpp:8922</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="iuse_8cpp_source.html#l08922">use_function::call()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="game__inventory_8cpp_source.html#l01564">game_menus::inv::ebookread()</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="itype_8cpp_source.html#l00179">itype::get_use()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l08596">item::is_ebook_storage()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="item_8cpp_source.html#l09958">item::is_transformable()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="avatar_8cpp_source.html#l00432">avatar::read()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ab7fdd07b4a0c88adb7732b5bdb7bdf52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7fdd07b4a0c88adb7732b5bdb7bdf52">&#9670;&nbsp;</a></span>ebooksave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ebooksave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08665">8665</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;{</div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action ebooksave that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;    }</div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">is_ebook_storage</a>() ) {</div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;EBOOKSAVE iuse called on item without ebook type pocket&quot;</span> );</div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;    }</div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160; </div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;    }</div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160; </div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unfortunately your device is not waterproof.&quot;</span> ) );</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;    }</div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160; </div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;        !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) &amp;&amp;</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;        !p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a> ) ) {</div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;    }</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160; </div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> ereader = <a class="code" href="classitem__location.html">item_location</a>( *p, it );</div>
<div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;    <span class="keyword">const</span> <a class="code" href="activity__item__handling_8cpp.html#a14dcded7a48aa4f96aeecf1e76f8f947">drop_locations</a> to_scan = <a class="code" href="namespacegame__menus_1_1inv.html#a0e28615fa2705dd59d32d80265636a23">game_menus::inv::ebooksave</a>( *p, ereader );</div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;    <span class="keywordflow">if</span>( to_scan.empty() ) {</div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;    }</div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;    std::vector&lt;item_location&gt; books;</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pair : to_scan ) {</div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;        books.push_back( pair.first );</div>
<div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;    }</div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classebooksave__activity__actor.html">ebooksave_activity_actor</a>( books, ereader ) );</div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a14dcded7a48aa4f96aeecf1e76f8f947"><div class="ttname"><a href="activity__item__handling_8cpp.html#a14dcded7a48aa4f96aeecf1e76f8f947">drop_locations</a></div><div class="ttdeci">std::list&lt; std::pair&lt; item_location, int &gt; &gt; drop_locations</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00184">activity_item_handling.cpp:184</a></div></div>
<div class="ttc" id="aclassebooksave__activity__actor_html"><div class="ttname"><a href="classebooksave__activity__actor.html">ebooksave_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00669">activity_actor_definitions.h:670</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a0e28615fa2705dd59d32d80265636a23"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a0e28615fa2705dd59d32d80265636a23">game_menus::inv::ebooksave</a></div><div class="ttdeci">drop_locations ebooksave(Character &amp;who, item_location &amp;ereader)</div><div class="ttdoc">Select books to save to E-Book reader menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l01590">game_inventory.cpp:1590</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="game__inventory_8cpp_source.html#l01590">game_menus::inv::ebooksave()</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l08596">item::is_ebook_storage()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2d1b39affe1c38fac4396785bbe81255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d1b39affe1c38fac4396785bbe81255">&#9670;&nbsp;</a></span>ecig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ecig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00598">598</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#aae1e9a5185012ed8c4a56409559c9aca">itype_ecig</a> ) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take a puff from your electronic cigarette.&quot;</span> ) );</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a4365e043c6b960fe0360ad63470383d9">itype_advanced_ecig</a> ) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( <a class="code" href="iuse_8cpp.html#ad80db25cf47a7d58c6163230edf5b416">itype_nicotine_liquid</a>, 1 ) ) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inhale some vapor from your advanced electronic cigarette.&quot;</span> ) );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code" href="iuse_8cpp.html#ad80db25cf47a7d58c6163230edf5b416">itype_nicotine_liquid</a>, 1 );</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="classitem.html">item</a> dummy_ecig = <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;ecig&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">consume_effects</a>( dummy_ecig );</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any nicotine liquid!&quot;</span> ) );</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 1 );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( -1 );</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>, 10_minutes );</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a> ) &gt; 10_minutes * ( p-&gt;<a class="code" href="classCharacter.html#aeec57f9be2ff6c4dea96f2fd5e1d44f0">addiction_level</a>(</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <a class="code" href="iuse_8cpp.html#ac4f52be5cc9929fe9e0078e55e769800">addiction_nicotine</a> ) + 1 ) ) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ugh, too much nicotine you feel nasty.&quot;</span> ) );</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdoc">Use charges in character inventory.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09769">character.cpp:9769</a></div></div>
<div class="ttc" id="aclassCharacter_html_a54f90ca736510c41a6539c8d8ad833b6"><div class="ttname"><a href="classCharacter.html#a54f90ca736510c41a6539c8d8ad833b6">Character::consume_effects</a></div><div class="ttdeci">bool consume_effects(item &amp;food)</div><div class="ttdoc">Handles the effects of consuming an item.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l01534">consumption.cpp:1534</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeec57f9be2ff6c4dea96f2fd5e1d44f0"><div class="ttname"><a href="classCharacter.html#aeec57f9be2ff6c4dea96f2fd5e1d44f0">Character::addiction_level</a></div><div class="ttdeci">int addiction_level(const addiction_id &amp;type) const</div><div class="ttdoc">Returns the intensity of the specified addiction.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02089">suffer.cpp:2089</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a4365e043c6b960fe0360ad63470383d9"><div class="ttname"><a href="iuse_8cpp.html#a4365e043c6b960fe0360ad63470383d9">itype_advanced_ecig</a></div><div class="ttdeci">static const itype_id itype_advanced_ecig(&quot;advanced_ecig&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa6055e7b9d5b2cb3ecd4cce48a416d33"><div class="ttname"><a href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a></div><div class="ttdeci">static const efftype_id effect_cig(&quot;cig&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aae1e9a5185012ed8c4a56409559c9aca"><div class="ttname"><a href="iuse_8cpp.html#aae1e9a5185012ed8c4a56409559c9aca">itype_ecig</a></div><div class="ttdeci">static const itype_id itype_ecig(&quot;ecig&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac4f52be5cc9929fe9e0078e55e769800"><div class="ttname"><a href="iuse_8cpp.html#ac4f52be5cc9929fe9e0078e55e769800">addiction_nicotine</a></div><div class="ttdeci">static const addiction_id addiction_nicotine(&quot;nicotine&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad80db25cf47a7d58c6163230edf5b416"><div class="ttname"><a href="iuse_8cpp.html#ad80db25cf47a7d58c6163230edf5b416">itype_nicotine_liquid</a></div><div class="ttdeci">static const itype_id itype_nicotine_liquid(&quot;nicotine_liquid&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="suffer_8cpp_source.html#l02089">Character::addiction_level()</a>, <a class="el" href="iuse_8cpp.html#ac4f52be5cc9929fe9e0078e55e769800">addiction_nicotine</a>, <a class="el" href="consumption_8cpp_source.html#l01534">Character::consume_effects()</a>, <a class="el" href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>, <a class="el" href="iuse_8cpp.html#a4365e043c6b960fe0360ad63470383d9">itype_advanced_ecig</a>, <a class="el" href="iuse_8cpp.html#aae1e9a5185012ed8c4a56409559c9aca">itype_ecig</a>, <a class="el" href="iuse_8cpp.html#ad80db25cf47a7d58c6163230edf5b416">itype_nicotine_liquid</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="character_8cpp_source.html#l04486">Character::mod_hunger()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character_8cpp_source.html#l09769">Character::use_charges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5dce8bfc65592c248d14dd7f0c2fe31b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dce8bfc65592c248d14dd7f0c2fe31b">&#9670;&nbsp;</a></span>ehandcuffs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ehandcuffs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06884">6884</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;{</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s are clamped tightly on your wrists.  You can&#39;t take them off.&quot;</span> ),</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;                 it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s have discharged and can be taken off.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;    }</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160; </div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="af1a610c8bd93f97da84d6bc96416085a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a610c8bd93f97da84d6bc96416085a">&#9670;&nbsp;</a></span>ehandcuffs_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ehandcuffs_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06802">6802</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;{</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160; </div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().has_flag( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.xy() ) ) {</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;        it-&gt;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a> );</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">ammo_unset</a>();</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s automatically turned off!&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;    }</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160; </div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;        <span class="comment">// Active but not in use. Deactivate</span></div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 2, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <span class="stringliteral">&quot;Click.&quot;</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;tools&quot;</span>, <span class="stringliteral">&quot;handcuffs&quot;</span> );</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;        it-&gt;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a> );</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;    }</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160; </div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> == 0 ) {</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 2, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <span class="stringliteral">&quot;Click.&quot;</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;tools&quot;</span>, <span class="stringliteral">&quot;handcuffs&quot;</span> );</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;        it-&gt;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a> );</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160; </div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;        <span class="keywordflow">if</span>( p ) {</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s on your wrists opened!&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;        }</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160; </div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;    }</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160; </div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="iuse_8cpp.html#a9719257cccee9b21df38a95f2ca195fa">bio_shock</a> ) &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt;= <a class="code" href="iuse_8cpp.html#a9719257cccee9b21df38a95f2ca195fa">bio_shock</a>-&gt;<a class="code" href="structbionic__data.html#a01bb3ba6e83ceeb4fed579177f084ae3">power_trigger</a> &amp;&amp;</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;        <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -<a class="code" href="iuse_8cpp.html#a9719257cccee9b21df38a95f2ca195fa">bio_shock</a>-&gt;<a class="code" href="structbionic__data.html#a01bb3ba6e83ceeb4fed579177f084ae3">power_trigger</a> );</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160; </div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;        it-&gt;<a class="code" href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">unset_flag</a>( <a class="code" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a> );</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;        it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 0;</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s crackle with electricity from your bionic, then come off your hands!&quot;</span> ),</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;                 it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160; </div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;    }</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160; </div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) ) {</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 10, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;a police siren, whoop WHOOP.&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;                       <span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;police_siren&quot;</span> );</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;    }</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160; </div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;    <span class="keyword">const</span> <a class="code" href="structpoint.html">point</a> p2( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;HANDCUFFS_X&quot;</span>, 0 ), it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;HANDCUFFS_Y&quot;</span>, 0 ) );</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160; </div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;    <span class="keywordflow">if</span>( ( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &gt; it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>() - 1000 ) &amp;&amp; ( p2.x != <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.x ||</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;            p2.y != <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.y ) ) {</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160; </div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2fcc1fc6fbdadd5dc6f404eb80351b3f">is_elec_immune</a>() ) {</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The cuffs try to shock you, but you&#39;re protected from electricity.&quot;</span> ) );</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;            }</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ouch, the cuffs shock you!&quot;</span> ) );</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160; </div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 2 ) );</div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 2 ) );</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 2, 5 ) );</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160; </div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;        }</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160; </div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;        it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> -= 50;</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt; 1 ) {</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;            it-&gt;<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> = 1;</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;        }</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160; </div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;        it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;HANDCUFFS_X&quot;</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.x );</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;        it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;HANDCUFFS_Y&quot;</span>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.y );</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160; </div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160; </div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;    }</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160; </div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02852">character.cpp:2852</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2fcc1fc6fbdadd5dc6f404eb80351b3f"><div class="ttname"><a href="classCharacter.html#a2fcc1fc6fbdadd5dc6f404eb80351b3f">Character::is_elec_immune</a></div><div class="ttdeci">bool is_elec_immune() const override</div><div class="ttdoc">Returns true is the player is protected from electric shocks.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05877">character.cpp:5877</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02824">character.cpp:2824</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02658">bionics.cpp:2658</a></div></div>
<div class="ttc" id="aclassitem_html_aa31ffbae3561dd20a3a60e541f6fd02e"><div class="ttname"><a href="classitem.html#aa31ffbae3561dd20a3a60e541f6fd02e">item::ammo_unset</a></div><div class="ttdeci">item &amp; ammo_unset()</div><div class="ttdoc">Filter removing all ammo from this instance If the item is neither a tool, gun nor magazine is a no-o...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00837">item.cpp:837</a></div></div>
<div class="ttc" id="aclassitem_html_aed157a025c9aef5188bd5eadf5d556ab"><div class="ttname"><a href="classitem.html#aed157a025c9aef5188bd5eadf5d556ab">item::unset_flag</a></div><div class="ttdeci">item &amp; unset_flag(const flag_id &amp;flag)</div><div class="ttdoc">Idempotent filter removing an item specific flag.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07641">item.cpp:7641</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a936d1c7b90d01c5d07e69d0628c81235"><div class="ttname"><a href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a></div><div class="ttdeci">const flag_id flag_NO_UNWIELD(&quot;NO_UNWIELD&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a9719257cccee9b21df38a95f2ca195fa"><div class="ttname"><a href="iuse_8cpp.html#a9719257cccee9b21df38a95f2ca195fa">bio_shock</a></div><div class="ttdeci">static const bionic_id bio_shock(&quot;bio_shock&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">ter_furn_flag::TFLAG_SWIMMABLE</a></div><div class="ttdeci">@ TFLAG_SWIMMABLE</div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00753">calendar.cpp:753</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a></div><div class="ttdeci">@ alarm</div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a></div><div class="ttdeci">@ combat</div></div>
<div class="ttc" id="astructbionic__data_html_a01bb3ba6e83ceeb4fed579177f084ae3"><div class="ttname"><a href="structbionic__data.html#a01bb3ba6e83ceeb4fed579177f084ae3">bionic_data::power_trigger</a></div><div class="ttdeci">units::energy power_trigger</div><div class="ttdoc">Power cost when the bionic's special effect is triggered.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00043">bionics.h:43</a></div></div>
<div class="ttc" id="astructitype_html_af238865694d157c403d1c7d0b74106dc"><div class="ttname"><a href="structitype.html#af238865694d157c403d1c7d0b74106dc">itype::maximum_charges</a></div><div class="ttdeci">int maximum_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01514">itype.h:1514</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l00837">item::ammo_unset()</a>, <a class="el" href="character_8cpp_source.html#l08207">Character::apply_damage()</a>, <a class="el" href="iuse_8cpp.html#a9719257cccee9b21df38a95f2ca195fa">bio_shock</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="flag_8cpp.html#a936d1c7b90d01c5d07e69d0628c81235">flag_NO_UNWIELD</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l02824">Character::get_power_level()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="bionics_8cpp_source.html#l02658">Character::has_active_bionic()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l05877">Character::is_elec_immune()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="itype_8h_source.html#l01514">itype::maximum_charges()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="character_8cpp_source.html#l02852">Character::mod_power_level()</a>, <a class="el" href="calendar_8cpp_source.html#l00753">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="bionics_8h_source.html#l00043">bionic_data::power_trigger</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a1fc389d4c9efd3d3954eb2b1557c895b">TFLAG_SWIMMABLE</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l07641">item::unset_flag()</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, and <a class="el" href="point_8h_source.html#l00024">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae7226ce0f0d3e2bd4e29adcbfeac04b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7226ce0f0d3e2bd4e29adcbfeac04b1">&#9670;&nbsp;</a></span>einktabletpc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::einktabletpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05497">5497</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;{</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160; </div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160; </div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;        <span class="keyword">enum</span> {</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;            ei_invalid, ei_photo, ei_music, ei_recipe, ei_uploaded_photos, ei_monsters, ei_download,</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;        };</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160; </div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;        }</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t read a computer screen.&quot;</span> ) );</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;        }</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;            !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) &amp;&amp;</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;            !p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a> ) ) {</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;        }</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160; </div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;            it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span> );</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;        }</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;        <a class="code" href="classuilist.html">uilist</a> amenu;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160; </div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;        amenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose menu option:&quot;</span> );</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160; </div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> photos = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_PHOTOS&quot;</span>, 0 );</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;        <span class="keywordflow">if</span>( photos &gt; 0 ) {</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_photo, <span class="keyword">true</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unsorted photos [%d]&quot;</span> ), photos );</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_photo, <span class="keyword">false</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No photos on device&quot;</span> ) );</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;        }</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160; </div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> songs = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC&quot;</span>, 0 );</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;        <span class="keywordflow">if</span>( songs &gt; 0 ) {</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span> ) ) {</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;                amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_music, <span class="keyword">true</span>, <span class="charliteral">&#39;m&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn music off&quot;</span> ) );</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;                amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_music, <span class="keyword">true</span>, <span class="charliteral">&#39;m&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn music on [%d]&quot;</span> ), songs );</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;            }</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_music, <span class="keyword">false</span>, <span class="charliteral">&#39;m&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No music on device&quot;</span> ) );</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;        }</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160; </div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>().empty() ) {</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_recipe, <span class="keyword">true</span>, <span class="charliteral">&#39;r&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;List stored recipes&quot;</span> ) );</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;        }</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160; </div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_EXTENDED_PHOTOS&quot;</span> ).empty() ) {</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_uploaded_photos, <span class="keyword">true</span>, <span class="charliteral">&#39;l&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your photos&quot;</span> ) );</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;        }</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160; </div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EINK_MONSTER_PHOTOS&quot;</span> ).empty() ) {</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_monsters, <span class="keyword">true</span>, <span class="charliteral">&#39;y&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your collection of monsters&quot;</span> ) );</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;            amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_monsters, <span class="keyword">false</span>, <span class="charliteral">&#39;y&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Collection of monsters is empty&quot;</span> ) );</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;        }</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160; </div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;        amenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( ei_download, <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Download data from memory cards&quot;</span> ) );</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;        amenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160; </div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> choice = amenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160; </div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;        <span class="keywordflow">if</span>( ei_photo == choice ) {</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160; </div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> photos = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_PHOTOS&quot;</span>, 0 );</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> viewed = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( photos, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 10, 30 ) ) );</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> count = photos - viewed;</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;            <span class="keywordflow">if</span>( count == 0 ) {</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;                it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;EIPC_PHOTOS&quot;</span> );</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;                it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;EIPC_PHOTOS&quot;</span>, count );</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;            }</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160; </div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3_seconds, 7_seconds ) ) );</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160; </div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;            <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a> ) ) {</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wasted time.  These pictures do not provoke your senses.&quot;</span> ) );</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a0a98cf03667f194eebb08d502713fad0">MORALE_PHOTOS</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 15, 30 ), 100 );</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;                                      <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;examine_photo_msg&quot;</span> ).value_or( <a class="code" href="classtranslation.html">translation</a>() ) );</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;            }</div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160; </div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;        }</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160; </div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;        <span class="keywordflow">if</span>( ei_music == choice ) {</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160; </div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.3 );</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;            <span class="comment">// Turn on the screen before playing musics</span></div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;            <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;                <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">is_transformable</a>() ) {</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structuse__function.html">use_function</a> *readinglight = it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a304367633fdfe6c63a53bdce0caced92">get_use</a>( <span class="stringliteral">&quot;transform&quot;</span> );</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;                    <span class="keywordflow">if</span>( readinglight ) {</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;                        readinglight-&gt;<a class="code" href="structuse__function.html#a308134b3f05ca40164e867ac8d922da8">call</a>( p, *it, p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;                    }</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;                }</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;                it-&gt;<a class="code" href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">activate</a>();</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;            }</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;            <span class="comment">// If transformable we use transform action to turn off the device</span></div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a08a65f52f9de30e8f4a76e270bfc67a1">is_transformable</a>() ) {</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;                it-&gt;<a class="code" href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">deactivate</a>();</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;            }</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160; </div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a478ecf81e48540e1ba39de33df968c43">has_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span> ) ) {</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;                it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span> );</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160; </div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turned off the music on your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;                it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span>, <span class="stringliteral">&quot;1&quot;</span> );</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turned on the music on your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;            }</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160; </div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;        }</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160; </div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;        <span class="keywordflow">if</span>( ei_recipe == choice ) {</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.5 );</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160; </div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;            <a class="code" href="classuilist.html">uilist</a> rmenu;</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">recipe_id</a> &amp;rid : it-&gt;<a class="code" href="classitem.html#aeaf79d99756c14502ef9ee8860514662">get_saved_recipes</a>() ) {</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;                rmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 0, <span class="keyword">true</span>, 0, rid-&gt;result_name( <span class="comment">/* decorated = */</span> <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;            }</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160; </div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;            rmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;List recipes:&quot;</span> );</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;            rmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160; </div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;        }</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160; </div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;        <span class="keywordflow">if</span>( ei_uploaded_photos == choice ) {</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;            <a class="code" href="iuse_8cpp.html#ac3f80f1c8745dbbfbf26f6101c846cda">show_photo_selection</a>( *p, *it, <span class="stringliteral">&quot;EIPC_EXTENDED_PHOTOS&quot;</span> );</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;        }</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160; </div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;        <span class="keywordflow">if</span>( ei_monsters == choice ) {</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160; </div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;            <a class="code" href="classuilist.html">uilist</a> pmenu;</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160; </div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;            pmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your collection of monsters:&quot;</span> );</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160; </div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;            std::vector&lt;mtype_id&gt; monster_photos;</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160; </div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;            std::istringstream f( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EINK_MONSTER_PHOTOS&quot;</span> ) );</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;            std::string s;</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;            <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;            <span class="keywordflow">while</span>( getline( f, s, <span class="charliteral">&#39;,&#39;</span> ) ) {</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;                <span class="keywordflow">if</span>( s.empty() ) {</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;                }</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;                monster_photos.emplace_back( s );</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;                std::string menu_str;</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> dummy( monster_photos.back() );</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;                menu_str = dummy.name();</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;                getline( f, s, <span class="charliteral">&#39;,&#39;</span> );</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structquality.html">quality</a> = <a class="code" href="iuse_8cpp.html#a0260d6075fc8551cc2f6a80d9134d897">get_quality_from_string</a>( s );</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;                menu_str += <span class="stringliteral">&quot; [&quot;</span> + <a class="code" href="iuse_8cpp.html#a9dafb5bfb47673f6289a30a37384a24b">photo_quality_name</a>( <a class="code" href="structquality.html">quality</a> ) + <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;                pmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( k++, <span class="keyword">true</span>, -1, menu_str.c_str() );</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;            }</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160; </div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;            <span class="keywordtype">int</span> choice;</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;                pmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;                choice = pmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160; </div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;                <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;                }</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160; </div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> dummy( monster_photos[choice] );</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;                <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( dummy.type-&gt;get_description() );</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;            } <span class="keywordflow">while</span>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;        }</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160; </div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;        <span class="keywordflow">if</span>( ei_download == choice ) {</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;            <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classvisitable.html#af49d5ef7b3f2f0a8664c23097a56373f">has_item</a>( *it ) ) {</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;                <span class="keywordflow">return</span> std::nullopt; <span class="comment">// need posession of reader item for item_location to work right</span></div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;            }</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;            <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;                <span class="keywordflow">return</span> std::nullopt; <span class="comment">// npc triggered iuse?</span></div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;            }</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;            <a class="code" href="classinventory__filter__preset.html">inventory_filter_preset</a> preset( []( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp; it ) {</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;                <span class="keywordflow">return</span> it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a> ) || it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a4b9d5e3c1c7e05bbdbbb8f253a73d8da">memory_card_data</a>;</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;            } );</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;            <a class="code" href="classinventory__multiselector.html">inventory_multiselector</a> inv_s( *p, preset );</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160; </div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;            inv_s.set_title( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose memory cards to download data from:&quot;</span> ) );</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;            inv_s.set_display_stats( <span class="keyword">true</span> );</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;            inv_s.add_character_items( *p );</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;            inv_s.add_nearby_items( 1 );</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160; </div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;            <span class="keyword">const</span> std::list&lt;std::pair&lt;item_location, int&gt;&gt; locs = inv_s.execute();</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;            <span class="keywordflow">if</span>( locs.empty() ) {</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Nevermind.&quot;</span> ) );</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;            }</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;            std::vector&lt;item_location&gt; targets;</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; [item_loc, count] : locs ) {</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;                targets.emplace_back( item_loc );</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;            }</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;            <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> reader( *p, it );</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;            <span class="keyword">const</span> <a class="code" href="classdata__handling__activity__actor.html">data_handling_activity_actor</a> actor( reader, targets );</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classplayer__activity.html">player_activity</a>( actor ) );</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;        }</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    }</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;}</div>
<div class="ttc" id="aclassdata__handling__activity__actor_html"><div class="ttname"><a href="classdata__handling__activity__actor.html">data_handling_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00278">activity_actor_definitions.h:279</a></div></div>
<div class="ttc" id="aclassinventory__filter__preset_html"><div class="ttname"><a href="classinventory__filter__preset.html">inventory_filter_preset</a></div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8h_source.html#l00026">game_inventory.h:27</a></div></div>
<div class="ttc" id="aclassinventory__multiselector_html"><div class="ttname"><a href="classinventory__multiselector.html">inventory_multiselector</a></div><div class="ttdef"><b>Definition:</b> <a href="inventory__ui_8h_source.html#l00961">inventory_ui.h:962</a></div></div>
<div class="ttc" id="aclassitem_html_a3e058f8327de11a69a8e33f597be6d80"><div class="ttname"><a href="classitem.html#a3e058f8327de11a69a8e33f597be6d80">item::deactivate</a></div><div class="ttdeci">item &amp; deactivate(const Character *ch=nullptr, bool alert=true)</div><div class="ttdoc">Filter converting this instance to the inactive type If the item is either inactive or cannot be deac...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00668">item.cpp:668</a></div></div>
<div class="ttc" id="aclassitem_html_a7f1ae4e309841707eea0852dd4cd95a3"><div class="ttname"><a href="classitem.html#a7f1ae4e309841707eea0852dd4cd95a3">item::activate</a></div><div class="ttdeci">item &amp; activate()</div><div class="ttdoc">Filter converting instance to active state.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00685">item.cpp:685</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00032">player_activity.h:33</a></div></div>
<div class="ttc" id="aclasstranslation_html"><div class="ttname"><a href="classtranslation.html">translation</a></div><div class="ttdoc">Class for storing translation context and raw string for deferred translation.</div><div class="ttdef"><b>Definition:</b> <a href="translation_8h_source.html#l00017">translation.h:18</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a9bbf692360c0fe96f9fccf41db5756be"><div class="ttname"><a href="iuse_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a></div><div class="ttdeci">static const trait_id trait_PSYCHOPATH(&quot;PSYCHOPATH&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a0a98cf03667f194eebb08d502713fad0"><div class="ttname"><a href="morale__types_8cpp.html#a0a98cf03667f194eebb08d502713fad0">MORALE_PHOTOS</a></div><div class="ttdeci">const morale_type MORALE_PHOTOS(&quot;morale_photos&quot;)</div></div>
<div class="ttc" id="astructitype_html_a4b9d5e3c1c7e05bbdbbb8f253a73d8da"><div class="ttname"><a href="structitype.html#a4b9d5e3c1c7e05bbdbbb8f253a73d8da">itype::memory_card_data</a></div><div class="ttdeci">cata::value_ptr&lt; memory_card_info &gt; memory_card_data</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01350">itype.h:1350</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8cpp_source.html#l00685">item::activate()</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="iuse_8cpp_source.html#l08922">use_function::call()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8cpp_source.html#l08623">item::count()</a>, <a class="el" href="item_8cpp_source.html#l00668">item::deactivate()</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="flag_8cpp.html#a5e973ea036d0f760170dc88b28b891b2">flag_MC_HAS_DATA</a>, <a class="el" href="mtype_8cpp_source.html#l00503">mtype::get_description()</a>, <a class="el" href="iuse_8cpp_source.html#l05447">get_quality_from_string()</a>, <a class="el" href="item_8cpp_source.html#l10287">item::get_saved_recipes()</a>, <a class="el" href="itype_8cpp_source.html#l00179">itype::get_use()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="visitable_8cpp_source.html#l00075">visitable::has_item()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="item_8cpp_source.html#l01928">item::has_var()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="item_8cpp_source.html#l09958">item::is_transformable()</a>, <a class="el" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="itype_8h_source.html#l01350">itype::memory_card_data</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="morale__types_8cpp.html#a0a98cf03667f194eebb08d502713fad0">MORALE_PHOTOS</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="iuse_8cpp_source.html#l05458">photo_quality_name()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00286">snippet_library::random_from_category()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="iuse_8cpp_source.html#l06461">show_photo_selection()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, <a class="el" href="iuse_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="monster_8h_source.html#l00550">monster::type</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad832f42294f185680d3279ace95df195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad832f42294f185680d3279ace95df195">&#9670;&nbsp;</a></span>electricstorage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::electricstorage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08537">8537</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;{</div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;    <span class="comment">// From item processing</span></div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action electricstorage that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;    }</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160; </div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;    }</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160; </div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Unfortunately your device is not waterproof.&quot;</span> ) );</div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;    }</div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160; </div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#af273ef83e89ee90f20f60b04402a4ec1">is_ebook_storage</a>() ) {</div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ELECTRICSTORAGE iuse called on item without ebook type pocket&quot;</span> );</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;    }</div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160; </div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;        !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) &amp;&amp;</div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;        !p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a> ) ) {</div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;    }</div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160; </div>
<div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;    <span class="keyword">auto</span> <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = [it]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;        <span class="keywordflow">return</span> !itm.is_broken() &amp;&amp;</div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;               &amp;itm != it &amp;&amp;</div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;               itm.<a class="code" href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">has_pocket_type</a>( <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">pocket_type::EBOOK</a> );</div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;    };</div>
<div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160; </div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> storage_card = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>(</div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;                                     filter, *p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>(), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Use what storage device?&quot;</span> ),</div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;                                     -1, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any empty book storage devices.&quot;</span> ) );</div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160; </div>
<div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;    <span class="keywordflow">if</span>( !storage_card ) {</div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;    }</div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160; </div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;    <span class="comment">// list of books of from_it that are not in to_it</span></div>
<div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;    <span class="keyword">auto</span> book_difference = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; from_it, <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; to_it ) -&gt; std::vector&lt;const item *&gt; {</div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;        std::set&lt;itype_id&gt; existing_ebooks;</div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *ebook : to_it.<a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">ebooks</a>() )</div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;        {</div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;            <span class="keywordflow">if</span>( !ebook-&gt;is_book() ) {</div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ebook type pocket contains non-book item %s&quot;</span>, ebook-&gt;typeId().str() );</div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;            }</div>
<div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160; </div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;            existing_ebooks.insert( ebook-&gt;typeId() );</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;        }</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160; </div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;        std::vector&lt;const item *&gt; ebooks;</div>
<div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *ebook : from_it.<a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">ebooks</a>() )</div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;        {</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;            <span class="keywordflow">if</span>( !ebook-&gt;is_book() ) {</div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;                <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ebook type pocket contains non-book item %s&quot;</span>, ebook-&gt;typeId().str() );</div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;            }</div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160; </div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;            <span class="keywordflow">if</span>( existing_ebooks.count( ebook-&gt;typeId() ) ) {</div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;            }</div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160; </div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;            ebooks.emplace_back( ebook );</div>
<div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;        }</div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;        <span class="keywordflow">return</span> ebooks;</div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;    };</div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160; </div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;    std::vector&lt;const item *&gt; to_storage = book_difference( *it, *storage_card );</div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;    std::vector&lt;const item *&gt; to_device = book_difference( *storage_card, *it );</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160; </div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;    <a class="code" href="classuilist.html">uilist</a> smenu;</div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;    smenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with your storage devices:&quot;</span> );</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160; </div>
<div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;    smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 1, !to_device.empty(), <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Copy to device from the card&quot;</span> ) );</div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;    smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 2, !to_storage.empty(), <span class="charliteral">&#39;f&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Copy from device to the card&quot;</span> ) );</div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;    smenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( 3, !storage_card-&gt;<a class="code" href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">ebooks</a>().empty(), <span class="charliteral">&#39;v&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;View books in the card&quot;</span> ) );</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;    smenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160; </div>
<div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;    <span class="comment">// were any books moved to or from the device</span></div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;    <span class="keywordtype">int</span> books_moved = 0;</div>
<div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160; </div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;    <span class="keyword">auto</span> move_books = [&amp;books_moved]( <span class="keyword">const</span> std::vector&lt;const item *&gt; &amp;fromset, <a class="code" href="classitem.html">item</a> &amp; toit ) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;        books_moved = fromset.size();</div>
<div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *ebook : fromset )</div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;        {</div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;            toit.put_in( *ebook, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">pocket_type::EBOOK</a> );</div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;        }</div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;    };</div>
<div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160; </div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;    <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 1 ) {</div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;        <span class="comment">// to device</span></div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;        move_books( to_device, *it );</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 2 ) {</div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;        <span class="comment">// from device</span></div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;        move_books( to_storage, *storage_card );</div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 3 ) {</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;        <a class="code" href="namespacegame__menus_1_1inv.html#a988cfc756cfe06759bb48784ad7fb2c4">game_menus::inv::ebookread</a>( *p, storage_card );</div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;    }</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160; </div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;    <span class="keywordflow">if</span>( books_moved &gt; 0 ) {</div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;        <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 1 ) {</div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;                                  <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Copied one book to the device.&quot;</span>,</div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;                                             <span class="stringliteral">&quot;Copied %1$s books to the device.&quot;</span>, books_moved ),</div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;                                  books_moved );</div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( smenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> == 2 ) {</div>
<div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;                                  <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;Copied one book to the %2$s.&quot;</span>,</div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;                                             <span class="stringliteral">&quot;Copied %1$s books to the %2$s.&quot;</span>, books_moved ),</div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;                                  books_moved, storage_card-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;        }</div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;    }</div>
<div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160; </div>
<div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a54040b19e6b59078c7736a141e0d6c6a"><div class="ttname"><a href="classitem.html#a54040b19e6b59078c7736a141e0d6c6a">item::has_pocket_type</a></div><div class="ttdeci">bool has_pocket_type(pocket_type pk_type) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09685">item.cpp:9685</a></div></div>
<div class="ttc" id="aclassitem_html_a7d0d70bd9b2bdcfd2541bee14866b010"><div class="ttname"><a href="classitem.html#a7d0d70bd9b2bdcfd2541bee14866b010">item::ebooks</a></div><div class="ttdeci">std::vector&lt; const item * &gt; ebooks() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11237">item.cpp:11237</a></div></div>
<div class="ttc" id="ainput__context_8cpp_html_a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a"><div class="ttname"><a href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">kb_menu_status::filter</a></div><div class="ttdeci">@ filter</div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">pocket_type::EBOOK</a></div><div class="ttdeci">@ EBOOK</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a41f6170ed65d24f97b6165d9e4ce9665">EBOOK</a>, <a class="el" href="game__inventory_8cpp_source.html#l01564">game_menus::inv::ebookread()</a>, <a class="el" href="item_8cpp_source.html#l11237">item::ebooks()</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l09685">item::has_pocket_type()</a>, <a class="el" href="item_8cpp_source.html#l08596">item::is_ebook_storage()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2f37766208d39460d69a3d15c3b65b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f37766208d39460d69a3d15c3b65b72">&#9670;&nbsp;</a></span>emf_passive_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::emf_passive_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02638">2638</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;{</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="comment">// need to calculate distance to closest electrical thing</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160; </div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="comment">// set distance as farther than the radius</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> = 10;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="keywordtype">int</span> distance = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> + 1;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160; </div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    <span class="comment">// can&#39;t get a reading during a portal storm</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id == <a class="code" href="iuse_8cpp.html#ab9a23663ac9b21f8cab9932fd81971f1">weather_portal_storm</a> ) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BEEEEE-CHHHHHHH-eeEEEEEEE-CHHHHHHHHHHHH&quot;</span> ), <span class="keyword">true</span>,</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                       <span class="stringliteral">&quot;tool&quot;</span>, <span class="stringliteral">&quot;emf_detector&quot;</span> );</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <span class="comment">// skip continuing to check for locations</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    }</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;loc : <a class="code" href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a> ) ) {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <span class="keyword">const</span> <a class="code" href="classCreature.html">Creature</a> *critter = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( loc );</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160; </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">// if the creature exists and is either a robot or electric</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        <span class="keywordtype">bool</span> found = critter != <span class="keyword">nullptr</span> &amp;&amp; critter-&gt;<a class="code" href="classCreature.html#a4006cd01d567e2ab92b9ea803bda2e82">is_electrical</a>();</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <span class="comment">// check for an electrical field</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;fd : here.<a class="code" href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">field_at</a>( loc ) ) {</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                <span class="keywordflow">if</span>( fd.first-&gt;has_elec ) {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                    found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                }</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;            }</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        }</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160; </div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;        <span class="comment">// if an electrical field or creature is nearby</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <span class="keywordflow">if</span>( found ) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;            distance = <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, loc );</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            <span class="keywordflow">if</span>( distance &lt;= 3 ) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 4, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BEEEEEEP BEEEEEEP&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                               <span class="stringliteral">&quot;emf_detector&quot;</span> );</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( distance &lt;= 7 ) {</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 3, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BEEP BEEP&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                               <span class="stringliteral">&quot;emf_detector&quot;</span> );</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( distance &lt;= 10 ) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 2, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;beep beep&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                               <span class="stringliteral">&quot;emf_detector&quot;</span> );</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            }</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            <span class="comment">// skip continuing to check for locations</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        }</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    }</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00250">creature.h:251</a></div></div>
<div class="ttc" id="aclassCreature_html_a4006cd01d567e2ab92b9ea803bda2e82"><div class="ttname"><a href="classCreature.html#a4006cd01d567e2ab92b9ea803bda2e82">Creature::is_electrical</a></div><div class="ttdeci">virtual bool is_electrical() const =0</div></div>
<div class="ttc" id="aclassmap_html_a395a729a4b954692cf08d13e1d32f73e"><div class="ttname"><a href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">map::field_at</a></div><div class="ttdeci">const field &amp; field_at(const tripoint &amp;p) const</div><div class="ttdoc">Get the fields that are here.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06379">map.cpp:6379</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a560abf1cd341e88e2f13f454ec2ecc99"><div class="ttname"><a href="coordinates_8h.html#a560abf1cd341e88e2f13f454ec2ecc99">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00848">coordinates.h:848</a></div></div>
<div class="ttc" id="agame_8cpp_html_a20e1e24b746d8844d2e554086ba3b3bb"><div class="ttname"><a href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13866">game.cpp:13866</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ab9a23663ac9b21f8cab9932fd81971f1"><div class="ttname"><a href="iuse_8cpp.html#ab9a23663ac9b21f8cab9932fd81971f1">weather_portal_storm</a></div><div class="ttdeci">static const weather_type_id weather_portal_storm(&quot;portal_storm&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="coordinates_8h_source.html#l00848">closest_points_first()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="map_8cpp_source.html#l06379">map::field_at()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13866">get_weather()</a>, <a class="el" href="classCreature.html#a4006cd01d567e2ab92b9ea803bda2e82">Creature::is_electrical()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, and <a class="el" href="iuse_8cpp.html#ab9a23663ac9b21f8cab9932fd81971f1">weather_portal_storm</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abaff238678a7537e407f351f436cb408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaff238678a7537e407f351f436cb408">&#9670;&nbsp;</a></span>epic_music()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::epic_music </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05485">5485</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;{</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC_ON&quot;</span> ).empty() &amp;&amp;</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;        it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160; </div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;        <span class="comment">//the more varied music, the better max mood.</span></div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> songs = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;EIPC_MUSIC&quot;</span>, 0 );</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;        <a class="code" href="sdlsound_8h.html#a283388f57294fc9cc61dae8b158e4e2c">play_music</a>( p, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 8, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 25, songs ) );</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;    }</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;}</div>
<div class="ttc" id="asdlsound_8h_html_a283388f57294fc9cc61dae8b158e4e2c"><div class="ttname"><a href="sdlsound_8h.html#a283388f57294fc9cc61dae8b158e4e2c">play_music</a></div><div class="ttdeci">void play_music(const std::string &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="sdlsound_8h_source.html#l00025">sdlsound.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="sdlsound_8h_source.html#l00025">play_music()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a0e24ddc2fd629058ebd45499803d0c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e24ddc2fd629058ebd45499803d0c34">&#9670;&nbsp;</a></span>extinguisher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::extinguisher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01918">1918</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;{</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="comment">// If anyone other than the player wants to use one of these,</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="comment">// they&#39;re going to need to figure out how to aim it.</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; dest_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spray where?&quot;</span> ) );</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">if</span>( !dest_ ) {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> dest = *dest_;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">// Reduce the strength of fire (if any) in the target tile.</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dest, <a class="code" href="field__type_8cpp.html#a152b699e58ee0b2261621761188ecff9">fd_extinguisher</a>, 3, 10_turns );</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="comment">// Also spray monsters in that tile.</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( dest, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        critter.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordtype">bool</span> blind = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; critter.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a0f90cef22d42e0b8c911e8d289e1a10e">mon_flag_SEES</a> ) ) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            blind = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            critter.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1_minutes, 2_minutes ) );</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <a class="code" href="classviewer.html">viewer</a> &amp;player_view = <a class="code" href="game_8cpp.html#ab5c977b7e81348725fb7bf09fc64ed95">get_player_view</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">if</span>( player_view.<a class="code" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">sees</a>( critter ) ) {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is sprayed!&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">if</span>( blind ) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s looks blinded.&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        <span class="keywordflow">if</span>( critter.<a class="code" href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            <span class="keywordflow">if</span>( player_view.<a class="code" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">sees</a>( critter ) ) {</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is frozen!&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            }</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            critter.<a class="code" href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">apply_damage</a>( p, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 20, 60 ) );</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            critter.<a class="code" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( critter.<a class="code" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() / 2 );</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160; </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="comment">// Slightly reduce the strength of fire immediately behind the target tile.</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( dest ) ) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        dest.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> += ( dest.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> - p-&gt;<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() );</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        dest.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> += ( dest.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> - p-&gt;<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() );</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        here.<a class="code" href="classmap.html#ace2f169fced91ed2daf1f3ab1fb0d0cf">mod_field_intensity</a>( dest, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 0 - <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 1 ) + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 1 ), 0 ) );</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_ace2f169fced91ed2daf1f3ab1fb0d0cf"><div class="ttname"><a href="classmap.html#ace2f169fced91ed2daf1f3ab1fb0d0cf">map::mod_field_intensity</a></div><div class="ttdeci">int mod_field_intensity(const tripoint &amp;p, const field_type_id &amp;type, int offset)</div><div class="ttdoc">Increment/decrement intensity of field entry at point, creating if not present, removing if intensity...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06429">map.cpp:6429</a></div></div>
<div class="ttc" id="aclassmonster_html_a43202b3e829143741862e0f5f1e826a7"><div class="ttname"><a href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">monster::has_flag</a></div><div class="ttdeci">bool has_flag(const mon_flag_id &amp;f) const final</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01202">monster.cpp:1202</a></div></div>
<div class="ttc" id="aclassmonster_html_a6e03e18c6ea5e5adb496634b2bbaea52"><div class="ttname"><a href="classmonster.html#a6e03e18c6ea5e5adb496634b2bbaea52">monster::made_of</a></div><div class="ttdeci">bool made_of(const material_id &amp;m) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l01304">monster.cpp:1304</a></div></div>
<div class="ttc" id="aclassmonster_html_afc6e6f5443145732310dd4901a394b4f"><div class="ttname"><a href="classmonster.html#afc6e6f5443145732310dd4901a394b4f">monster::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id bp, int dam, bool bypass_med=false) override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02169">monster.cpp:2169</a></div></div>
<div class="ttc" id="aclassviewer_html"><div class="ttname"><a href="classviewer.html">viewer</a></div><div class="ttdef"><b>Definition:</b> <a href="viewer_8h_source.html#l00010">viewer.h:11</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_a0090428c1f6724209c133c6b04b037cd"><div class="ttname"><a href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a></div><div class="ttdeci">const field_type_str_id fd_fire(&quot;fd_fire&quot;)</div></div>
<div class="ttc" id="afield__type_8cpp_html_a152b699e58ee0b2261621761188ecff9"><div class="ttname"><a href="field__type_8cpp.html#a152b699e58ee0b2261621761188ecff9">fd_extinguisher</a></div><div class="ttdeci">const field_type_str_id fd_extinguisher(&quot;fd_extinguisher&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="monster_8cpp_source.html#l02169">monster::apply_damage()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="el" href="field__type_8cpp.html#a152b699e58ee0b2261621761188ecff9">fd_extinguisher</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13812">get_player_view()</a>, <a class="el" href="creature_8cpp_source.html#l02782">Creature::get_speed_base()</a>, <a class="el" href="monster_8cpp_source.html#l01202">monster::has_flag()</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="monster_8cpp_source.html#l01304">monster::made_of()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="map_8cpp_source.html#l06429">map::mod_field_intensity()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mtype_8cpp_source.html#l00143">mon_flag_SEES</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">viewer::sees()</a>, <a class="el" href="creature_8cpp_source.html#l02873">Creature::set_speed_base()</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, and <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="acc505d2082da6d8adcd7b96e12c933b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc505d2082da6d8adcd7b96e12c933b8">&#9670;&nbsp;</a></span>eyedrops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::eyedrops </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00647">647</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;{</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re out of %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You use your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> ) ) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> );</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You wash the slime from your eyes.&quot;</span> ) );</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a468a4ea99d05230e46c7e014a68270a7"><div class="ttname"><a href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a></div><div class="ttdeci">static const efftype_id effect_boomered(&quot;boomered&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a022e42fa672453892c959d789bc782fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022e42fa672453892c959d789bc782fa">&#9670;&nbsp;</a></span>fill_pit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fill_pit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02874">2874</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;{</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action fill_pit that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    }</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    }</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    std::vector&lt;construction&gt; <span class="keyword">const</span> &amp;cnstr = <a class="code" href="construction_8cpp.html#abf6972c182dd899261674bc5ad29650a">get_constructions</a>();</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> build = std::find_if( cnstr.begin(), cnstr.end(), []( <span class="keyword">const</span> <a class="code" href="structconstruction.html">construction</a> &amp; it ) {</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        return it.str_id == construction_constr_fill_pit;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    } );</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    <a class="code" href="construction_8cpp.html#a31f53c2594f5af9a55fa88dd810e60eb">place_construction</a>( { build-&gt;group } );</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="construction_8cpp_source.html#l00358">get_constructions()</a>, <a class="el" href="construction_8cpp_source.html#l00996">place_construction()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a66232b4dbf97f6fb5b896e0c90abbe8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66232b4dbf97f6fb5b896e0c90abbe8a">&#9670;&nbsp;</a></span>firecracker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::firecracker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03528">3528</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;{</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;    }</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a8a33b517f5d4f8a85c83a71a3bc8cdaf">use_charges_if_avail</a>( <a class="code" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a source of fire!&quot;</span> ) );</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    }</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You light the firecracker.&quot;</span> ) );</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a7426dca8a4823f1b70c7e79953ad89a7">itype_firecracker_act</a>, p );</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 2_seconds;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a8a33b517f5d4f8a85c83a71a3bc8cdaf"><div class="ttname"><a href="classCharacter.html#a8a33b517f5d4f8a85c83a71a3bc8cdaf">Character::use_charges_if_avail</a></div><div class="ttdeci">bool use_charges_if_avail(const itype_id &amp;it, int quantity)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09633">character.cpp:9633</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a7426dca8a4823f1b70c7e79953ad89a7"><div class="ttname"><a href="iuse_8cpp.html#a7426dca8a4823f1b70c7e79953ad89a7">itype_firecracker_act</a></div><div class="ttdeci">static const itype_id itype_firecracker_act(&quot;firecracker_act&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8h_source.html#l03145">item::countdown_point</a>, <a class="el" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="iuse_8cpp.html#a7426dca8a4823f1b70c7e79953ad89a7">itype_firecracker_act</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="character_8cpp_source.html#l09633">Character::use_charges_if_avail()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7ce9f52bd3e45c37d762d834ace087ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce9f52bd3e45c37d762d834ace087ac">&#9670;&nbsp;</a></span>firecracker_pack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::firecracker_pack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03491">3491</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;{</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    }</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#aa33f9870c95a95d8a46423c9d6477d99">has_charges</a>( <a class="code" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a source of fire!&quot;</span> ) );</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    }</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You light the pack of firecrackers.&quot;</span> ) );</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#adcfa1469d248639fa8653f746a07a1a6">itype_firecracker_pack_act</a>, p );</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 27_seconds;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    it-&gt;<a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// don&#39;t use any charges at all. it has became a new item</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_ab55a5629e6fe769a7ac314c02d25ecef"><div class="ttname"><a href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">item::set_age</a></div><div class="ttdeci">void set_age(const time_duration &amp;age)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14681">item.cpp:14681</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_adcfa1469d248639fa8653f746a07a1a6"><div class="ttname"><a href="iuse_8cpp.html#adcfa1469d248639fa8653f746a07a1a6">itype_firecracker_pack_act</a></div><div class="ttdeci">static const itype_id itype_firecracker_pack_act(&quot;firecracker_pack_act&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8h_source.html#l03145">item::countdown_point</a>, <a class="el" href="character_8cpp_source.html#l09586">Character::has_charges()</a>, <a class="el" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="iuse_8cpp.html#adcfa1469d248639fa8653f746a07a1a6">itype_firecracker_pack_act</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l14681">item::set_age()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7884fe54e2eac90255b18d263234b4d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7884fe54e2eac90255b18d263234b4d7">&#9670;&nbsp;</a></span>firecracker_pack_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::firecracker_pack_act </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03508">3508</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;{</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">// Two seconds of lit fuse burning</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="comment">// Followed by random number of explosions (4-6) per turn until 25 epxlosions have happened</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    <span class="comment">// Finally item despawns since countdown has ended</span></div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() &lt; 2_seconds ) {</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 0, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ssss&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;lit_fuse&quot;</span> );</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        <span class="comment">// Time left to countdown_point is used to track of number of explosions</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        <span class="keywordtype">int</span> explosions = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 4, 6 );</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        explosions = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( explosions, to_seconds&lt;int&gt;( it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> - <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;        <span class="keywordflow">for</span>( i = 0; i &lt; explosions; i++ ) {</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 20, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::sound_t::combat</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bang!&quot;</span> ), <span class="keyword">false</span>, <span class="stringliteral">&quot;explosion&quot;</span>, <span class="stringliteral">&quot;small&quot;</span> );</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        }</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> -= ( explosions - 1 ) * 1_seconds;</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    }</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a66fcc8b7976e6c73904bdfbe5296c150"><div class="ttname"><a href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">item::age</a></div><div class="ttdeci">time_duration age() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14676">item.cpp:14676</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ac222ae0d4e9c59bd254b72521b9e74ed">sounds::combat</a>, <a class="el" href="item_8h_source.html#l03145">item::countdown_point</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a17003a2092768f41d1c60a681622200a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17003a2092768f41d1c60a681622200a">&#9670;&nbsp;</a></span>fish_trap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fish_trap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01784">1784</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;{</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="comment">// Handle deploying fish trap.</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fish aren&#39;t foolish enough to go in here without bait.&quot;</span> ) );</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160; </div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Put fish trap where?&quot;</span> ) );</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> pnt = *pnt_;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">ter_furn_flag::TFLAG_FISHABLE</a>, pnt ) ) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t fish there!&quot;</span> ) );</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="iuse_8cpp.html#a4c2987467aeeff3ae6ace4755d262b70">good_fishing_spot</a>( pnt, p ) ) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    }</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    it-&gt;<a class="code" href="classitem.html#ab55a5629e6fe769a7ac314c02d25ecef">set_age</a>( 0_turns );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( pnt, *it );</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( it );</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                          <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You place the fish trap; in three hours or so, you may catch some fish.&quot;</span> ) );</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a5579e13088b4ccd9c5a75458919d528a"><div class="ttname"><a href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">map::add_item_or_charges</a></div><div class="ttdeci">item &amp; add_item_or_charges(const tripoint &amp;pos, item obj, bool overflow=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05177">map.cpp:5177</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a4c2987467aeeff3ae6ace4755d262b70"><div class="ttname"><a href="iuse_8cpp.html#a4c2987467aeeff3ae6ace4755d262b70">good_fishing_spot</a></div><div class="ttdeci">static bool good_fishing_spot(const tripoint &amp;pos, Character *p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01734">iuse.cpp:1734</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">ter_furn_flag::TFLAG_FISHABLE</a></div><div class="ttdeci">@ TFLAG_FISHABLE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp_source.html#l01734">good_fishing_spot()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00433">Character::i_rem()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l14681">item::set_age()</a>, and <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">TFLAG_FISHABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad36c2f44e3f488ea9360aef65ca8a1ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad36c2f44e3f488ea9360aef65ca8a1ee">&#9670;&nbsp;</a></span>fish_trap_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fish_trap_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Survival randomly increases number of fish caught in fishing trap 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01829">1829</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;{</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">// Handle processing fish trap over time.</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a66fcc8b7976e6c73904bdfbe5296c150">age</a>() &gt; 3_hours ) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">ter_furn_flag::TFLAG_FISHABLE</a>, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">success</a> = -50;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> surv = <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.get_skill_level( <a class="code" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> );</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> attempts = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>(), it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() * it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; attempts; i++ ) {<span class="comment"></span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">            /** @EFFECT_SURVIVAL randomly increases number of fish caught in fishing trap */</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <a class="code" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">success</a> += <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a>( surv ), <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a>( surv * surv ) );</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordtype">int</span> bait_consumed = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() + 1 );</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keywordflow">if</span>( bait_consumed &gt; it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            bait_consumed = it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>();</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <span class="keywordtype">int</span> fishes = 0;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">if</span>( success &lt; 0 ) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            fishes = 0;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( success &lt; 300 ) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            fishes = 1;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( success &lt; 1500 ) {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            fishes = 2;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            fishes = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3, 5 );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <span class="keywordflow">if</span>( fishes == 0 ) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            it-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>(), <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.practice( <a class="code" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 15 ) );</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="comment">//get the fishables around the trap&#39;s spot</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        std::unordered_set&lt;tripoint&gt; fishable_locations = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_fishable_locations( 60, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        std::vector&lt;monster *&gt; fishables = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_fishable_monsters( fishable_locations );</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; fishes; i++ ) {</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.practice( <a class="code" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3, 10 ) );</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">if</span>( !fishables.empty() ) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                <a class="code" href="classmonster.html">monster</a> *chosen_fish = <a class="code" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( fishables );</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                <span class="comment">// reduce the abstract fish_population marker of that fish</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                chosen_fish-&gt;<a class="code" href="classmonster.html#a1bcf8c4105ed1ba90775fbdef4afeaf6">fish_population</a> -= 1;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                <span class="keywordflow">if</span>( chosen_fish-&gt;<a class="code" href="classmonster.html#a1bcf8c4105ed1ba90775fbdef4afeaf6">fish_population</a> &lt;= 0 ) {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;catch_a_monster( chosen_fish, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, p, 300_hours ); <span class="comment">//catch the fish!</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classitem.html#a843e57d31c5f26b3300b607446c8b860">item::make_corpse</a>( chosen_fish-&gt;<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">id</a>,</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                                              <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0_turns,</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                                                      3_hours ) ) );</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                <span class="comment">//there will always be a chance that the player will get lucky and catch a fish</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                <span class="comment">//not existing in the fishables vector. (maybe it was in range, but wandered off)</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                <span class="comment">//lets say it is a 5% chance per fish to catch</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                    <span class="keyword">const</span> std::vector&lt;mtype_id&gt; fish_group = <a class="code" href="classMonsterGroupManager.html#a6fa8f96e34b03af7e563c0027292bfac">MonsterGroupManager::GetMonstersFromGroup</a>(</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                                <a class="code" href="iuse_8cpp.html#ab95d97ed8a44c318326937f8869e9359">GROUP_FISH</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classstring__id.html">mtype_id</a> &amp;fish_mon = <a class="code" href="rng_8h.html#a4fdc7c520170d091a7d541ede1c93d48">random_entry_ref</a>( fish_group );</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                    <span class="comment">//Yes, we can put fishes in the trap like knives in the boot,</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                    <span class="comment">//and then get fishes via activation of the item,</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                    <span class="comment">//but it&#39;s not as comfortable as if you just put fishes in the same tile with the trap.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                    <span class="comment">//Also: corpses and comestibles do not rot in containers like this, but on the ground they will rot.</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                    <span class="comment">//we don&#39;t know when it was caught so use a random turn</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                    here.<a class="code" href="classmap.html#a5579e13088b4ccd9c5a75458919d528a">add_item_or_charges</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="classitem.html#a843e57d31c5f26b3300b607446c8b860">item::make_corpse</a>( fish_mon, it-&gt;<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0_turns,</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                                              3_hours ) ) );</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                    <span class="keywordflow">break</span>; <span class="comment">//this can happen only once</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                }</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        it-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( bait_consumed, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div>
<div class="ttc" id="aavatar_8h_html_a7fe2c1a3376948380f856732d4f34c5c"><div class="ttname"><a href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13817">game.cpp:13817</a></div></div>
<div class="ttc" id="aclassMonsterGroupManager_html_a6fa8f96e34b03af7e563c0027292bfac"><div class="ttname"><a href="classMonsterGroupManager.html#a6fa8f96e34b03af7e563c0027292bfac">MonsterGroupManager::GetMonstersFromGroup</a></div><div class="ttdeci">static std::vector&lt; mtype_id &gt; GetMonstersFromGroup(const mongroup_id &amp;group, bool from_subgroups)</div><div class="ttdef"><b>Definition:</b> <a href="mongroup_8cpp_source.html#l00324">mongroup.cpp:324</a></div></div>
<div class="ttc" id="aclassitem_html_a843e57d31c5f26b3300b607446c8b860"><div class="ttname"><a href="classitem.html#a843e57d31c5f26b3300b607446c8b860">item::make_corpse</a></div><div class="ttdeci">static item make_corpse(const mtype_id &amp;mt=string_id&lt; mtype &gt;::NULL_ID(), time_point turn=calendar::turn, const std::string &amp;name=&quot;&quot;, int upgrade_time=-1)</div><div class="ttdoc">Make a corpse of the given monster type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00604">item.cpp:604</a></div></div>
<div class="ttc" id="aclassmonster_html_a1bcf8c4105ed1ba90775fbdef4afeaf6"><div class="ttname"><a href="classmonster.html#a1bcf8c4105ed1ba90775fbdef4afeaf6">monster::fish_population</a></div><div class="ttdeci">int fish_population</div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00569">monster.h:569</a></div></div>
<div class="ttc" id="acraft__command_8h_html_a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6"><div class="ttname"><a href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">usage_from::player</a></div><div class="ttdeci">@ player</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab95d97ed8a44c318326937f8869e9359"><div class="ttname"><a href="iuse_8cpp.html#ab95d97ed8a44c318326937f8869e9359">GROUP_FISH</a></div><div class="ttdeci">static const mongroup_id GROUP_FISH(&quot;GROUP_FISH&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac038c6319122de04af85fb88e6618601"><div class="ttname"><a href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a></div><div class="ttdeci">static const skill_id skill_survival(&quot;survival&quot;)</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a5834219bcffc7118c95b395b8cdeec20"><div class="ttname"><a href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a></div><div class="ttdeci">double round(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00110">math_parser_func.h:110</a></div></div>
<div class="ttc" id="anamespacebehavior_html_af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">behavior::status_t::success</a></div><div class="ttdeci">@ success</div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00104">rng.h:104</a></div></div>
<div class="ttc" id="arng_8h_html_a4fdc7c520170d091a7d541ede1c93d48"><div class="ttname"><a href="rng_8h.html#a4fdc7c520170d091a7d541ede1c93d48">random_entry_ref</a></div><div class="ttdeci">std::enable_if_t&lt; !is_std_array&lt; C &gt;::value, const V &amp; &gt; random_entry_ref(const C &amp;container)</div><div class="ttdoc">Same as above, but with a statically allocated default value (using the default constructor).</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00165">rng.h:165</a></div></div>
<div class="ttc" id="astructmtype_html_a60dea81cdc4c627313e540831d311b5a"><div class="ttname"><a href="structmtype.html#a60dea81cdc4c627313e540831d311b5a">mtype::id</a></div><div class="ttdeci">mtype_id id</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00301">mtype.h:301</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="map_8cpp_source.html#l05177">map::add_item_or_charges()</a>, <a class="el" href="item_8cpp_source.html#l14676">item::age()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="monster_8h_source.html#l00569">monster::fish_population</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mongroup_8cpp_source.html#l00324">MonsterGroupManager::GetMonstersFromGroup()</a>, <a class="el" href="iuse_8cpp.html#ab95d97ed8a44c318326937f8869e9359">GROUP_FISH</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="mtype_8h_source.html#l00301">mtype::id</a>, <a class="el" href="item_8cpp_source.html#l00604">item::make_corpse()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="rng_8h_source.html#l00104">random_entry()</a>, <a class="el" href="rng_8h_source.html#l00165">random_entry_ref()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">TFLAG_FISHABLE</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, and <a class="el" href="monster_8h_source.html#l00550">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8d1e77b5aed48f08625766fd3a4c8996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d1e77b5aed48f08625766fd3a4c8996">&#9670;&nbsp;</a></span>fishing_rod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fishing_rod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01756">1756</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;{</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="comment">// Long actions - NPCs don&#39;t like those yet.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    std::optional&lt;tripoint&gt; found;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">ter_furn_flag::TFLAG_FISHABLE</a>, pnt ) &amp;&amp; <a class="code" href="iuse_8cpp.html#a4c2987467aeeff3ae6ace4755d262b70">good_fishing_spot</a>( pnt, p ) ) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            found = pnt;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t fish there!&quot;</span> ) );</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cast your line and wait to hook something&quot;</span> ) );</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a63532169a015e803e57202c5af8ce838">ACT_FISH</a>, to_moves&lt;int&gt;( 5_hours ), 0, 0, it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *p, it );</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#adb6198e1b33fc9dfa2d7ef2003a0ea54">coord_set</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_fishable_locations( 60, *found );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;}</div>
<div class="ttc" id="aclassplayer__activity_html_a979cd5aca677ff30dcbb767d4a3980d2"><div class="ttname"><a href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">player_activity::targets</a></div><div class="ttdeci">std::vector&lt; item_location &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00061">player_activity.h:61</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_adb6198e1b33fc9dfa2d7ef2003a0ea54"><div class="ttname"><a href="classplayer__activity.html#adb6198e1b33fc9dfa2d7ef2003a0ea54">player_activity::coord_set</a></div><div class="ttdeci">std::unordered_set&lt; tripoint &gt; coord_set</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00065">player_activity.h:65</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a63532169a015e803e57202c5af8ce838"><div class="ttname"><a href="iuse_8cpp.html#a63532169a015e803e57202c5af8ce838">ACT_FISH</a></div><div class="ttdeci">static const activity_id ACT_FISH(&quot;ACT_FISH&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#a63532169a015e803e57202c5af8ce838">ACT_FISH</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="player__activity_8h_source.html#l00065">player_activity::coord_set</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp_source.html#l01734">good_fishing_spot()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a98d2abec0e29addb862143328dfecef7">TFLAG_FISHABLE</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad34760a5d74b44c11fe67bf0ac5d5a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34760a5d74b44c11fe67bf0ac5d5a50">&#9670;&nbsp;</a></span>fitness_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fitness_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04164">4164</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;{</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t know what you&#39;re looking at.&quot;</span> ) );</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        <span class="comment">//What else should block using f-band?</span></div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        std::string msg;</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        msg.append( <span class="stringliteral">&quot;***  &quot;</span> );</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You check your health metrics on your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( 1,</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                                   <span class="keyword">false</span> ) ) );</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;        msg.append( <span class="stringliteral">&quot;  ***\n\n&quot;</span> );</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> bpm = p-&gt;<a class="code" href="classCharacter.html#a55df35ed26eb90ce3909765796b29f01">heartrate_bpm</a>();</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;        msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your heart rate is %i bpm.&quot;</span> ), bpm ) );</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        <span class="keywordflow">if</span>( bpm &gt; 179 ) {</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            msg.append( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;WARNING!  Slow down!  Your pulse is getting too high, champion!&quot;</span> ) );</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        }</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="keyword">const</span> std::string exercise = p-&gt;<a class="code" href="classCharacter.html#a356ecbfa60d91c3764efc2ff8da9db13">activity_level_str</a>();</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;        msg.append( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;        msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        <span class="keywordflow">if</span>( exercise == <span class="stringliteral">&quot;NO_EXERCISE&quot;</span> ) {</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You haven&#39;t really been active today.  Try going for a walk!&quot;</span> ) );</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( exercise == <span class="stringliteral">&quot;LIGHT_EXERCISE&quot;</span> ) {</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Good start!  Keep it up and move more.&quot;</span> ) );</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( exercise == <span class="stringliteral">&quot;MODERATE_EXERCISE&quot;</span> ) {</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Doing good!  Don&#39;t stop, push the limit!&quot;</span> ) );</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( exercise == <span class="stringliteral">&quot;ACTIVE_EXERCISE&quot;</span> ) {</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Great job!  Take a break and don&#39;t forget about hydration!&quot;</span> ) );</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;            msg.append( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too active!  Avoid overexertion for your safety and health.&quot;</span> ) );</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        }</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;        msg.append( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;        msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You consumed %d kcal today and %d kcal yesterday.&quot;</span> ),</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">get_daily_ingested_kcal</a>( <span class="keyword">false</span> ),</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a2e1e62369b3ec336c6488edd04edd8f9">get_daily_ingested_kcal</a>( <span class="keyword">true</span> ) ) );</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;        msg.append( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;        msg.append( <span class="stringliteral">&quot;-&gt; &quot;</span> );</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;        msg.append( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You burned %d kcal today and %d kcal yesterday.&quot;</span> ),</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82">get_daily_spent_kcal</a>( <span class="keyword">false</span> ),</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;                                   p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82">get_daily_spent_kcal</a>( <span class="keyword">true</span> ) ) );</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;        <span class="comment">//TODO add whatever else makes sense (steps, sleep quality, health level approximation?)</span></div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, msg );</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( msg );</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    }</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a356ecbfa60d91c3764efc2ff8da9db13"><div class="ttname"><a href="classCharacter.html#a356ecbfa60d91c3764efc2ff8da9db13">Character::activity_level_str</a></div><div class="ttdeci">std::string activity_level_str() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06561">character.cpp:6561</a></div></div>
<div class="ttc" id="aclassCharacter_html_a55df35ed26eb90ce3909765796b29f01"><div class="ttname"><a href="classCharacter.html#a55df35ed26eb90ce3909765796b29f01">Character::heartrate_bpm</a></div><div class="ttdeci">int heartrate_bpm() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09913">character.cpp:9913</a></div></div>
<div class="ttc" id="aclassavatar_html_a442dd75dc4462353f4d75c84ab77cf82"><div class="ttname"><a href="classavatar.html#a442dd75dc4462353f4d75c84ab77cf82">avatar::get_daily_spent_kcal</a></div><div class="ttdeci">int get_daily_spent_kcal(bool yesterday) const</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01592">avatar.cpp:1592</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l06561">Character::activity_level_str()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="avatar_8cpp_source.html#l01605">avatar::get_daily_ingested_kcal()</a>, <a class="el" href="avatar_8cpp_source.html#l01592">avatar::get_daily_spent_kcal()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l09913">Character::heartrate_bpm()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa93a7a8252fcd7d5ce9c245b43a9b33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa93a7a8252fcd7d5ce9c245b43a9b33d">&#9670;&nbsp;</a></span>flu_vaccine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::flu_vaccine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00888">888</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;{</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inject the vaccine.&quot;</span> ) );</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="classtime__point.html">time_point</a> expiration_date = it-&gt;<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() + 24_weeks;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> remaining_time = expiration_date - <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// FIXME Removing feedback and visible status would be more realistic</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span>( remaining_time &gt; 0_turns ) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You no longer need to fear the flu, at least for some time.&quot;</span> ) );</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#afabb19f7e9e120ad892b1769b08aad39">effect_flushot</a>, remaining_time, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You notice the date on the packaging is pretty old.  It may no longer be effective.&quot;</span> ) );</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( 3 );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="classitem.html">item</a> syringe( <span class="stringliteral">&quot;syringe&quot;</span>, it-&gt;<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( syringe );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ae2d66e536142cf363783d099b6ae93da"><div class="ttname"><a href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">Character::i_add_or_drop</a></div><div class="ttdeci">bool i_add_or_drop(item &amp;it, int qty=1, const item *avoid=nullptr, const item *original_inventory_item=nullptr)</div><div class="ttdoc">Sets invlet and adds to inventory if possible, drops otherwise, returns true if either succeeded.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00451">character_inventory.cpp:451</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00459">calendar.h:460</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_afabb19f7e9e120ad892b1769b08aad39"><div class="ttname"><a href="iuse_8cpp.html#afabb19f7e9e120ad892b1769b08aad39">effect_flushot</a></div><div class="ttdeci">static const efftype_id effect_flushot(&quot;flushot&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="iuse_8cpp.html#afabb19f7e9e120ad892b1769b08aad39">effect_flushot</a>, <a class="el" href="character__inventory_8cpp_source.html#l00451">Character::i_add_or_drop()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae6ba2f4a41e8a170d9aa4609c7f0298e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ba2f4a41e8a170d9aa4609c7f0298e">&#9670;&nbsp;</a></span>flumed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::flumed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01002">1002</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;{</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a298d7fdbd56c13ca020ae33f002fad54">effect_took_flumed</a>, 10_hours );</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a298d7fdbd56c13ca020ae33f002fad54"><div class="ttname"><a href="iuse_8cpp.html#a298d7fdbd56c13ca020ae33f002fad54">effect_took_flumed</a></div><div class="ttdeci">static const efftype_id effect_took_flumed(&quot;took_flumed&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a298d7fdbd56c13ca020ae33f002fad54">effect_took_flumed</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa9c8ef7491ae4a0f3274ebc563f44aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c8ef7491ae4a0f3274ebc563f44aae">&#9670;&nbsp;</a></span>flusleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::flusleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01009">1009</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;{</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a298d7fdbd56c13ca020ae33f002fad54">effect_took_flumed</a>, 12_hours );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 30 );</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel very sleepy&quot;</span> ) );</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ae7eecab0795b77cbd6fabebc0e140486"><div class="ttname"><a href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">Character::mod_sleepiness</a></div><div class="ttdeci">void mod_sleepiness(int nsleepiness)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04544">character.cpp:4544</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a298d7fdbd56c13ca020ae33f002fad54">effect_took_flumed</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a05518c9c8a638e1b594ca4c9311d556d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05518c9c8a638e1b594ca4c9311d556d">&#9670;&nbsp;</a></span>foodperson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::foodperson </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06934">6934</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;{</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;    <span class="comment">// Prevent crash if battery was somehow removed.</span></div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;    }</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160; </div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> <a class="code" href="input__enums_8h.html#a1f876ea56927f9d927b8783a4c55d7d4a2ab64f4ee279e5baf7ab7059b15e6d12">shift</a> = <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( it-&gt;<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() *</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;                          it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;turns_per_charge );</div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160; </div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your HUD lights-up: \&quot;Your shift ends in %s\&quot;.&quot;</span> ),</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;                          <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( shift ) );</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_abf1cdb8f4662bf96c8d762e9229df8d9"><div class="ttname"><a href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d, const bool compact)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00546">calendar.cpp:546</a></div></div>
<div class="ttc" id="aclassitem_html_ab22fc9a4e0f9c6f5569b93e00deccfac"><div class="ttname"><a href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a></div><div class="ttdeci">item * magazine_current()</div><div class="ttdoc">Currently loaded magazine (if any)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11207">item.cpp:11207</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00221">calendar.h:221</a></div></div>
<div class="ttc" id="ainput__enums_8h_html_a1f876ea56927f9d927b8783a4c55d7d4a2ab64f4ee279e5baf7ab7059b15e6d12"><div class="ttname"><a href="input__enums_8h.html#a1f876ea56927f9d927b8783a4c55d7d4a2ab64f4ee279e5baf7ab7059b15e6d12">keymod_t::shift</a></div><div class="ttdeci">@ shift</div></div>
<div class="ttc" id="astructitype_html_a62a6e70840cb0e484f8d61e273f440f4"><div class="ttname"><a href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">itype::tool</a></div><div class="ttdeci">cata::value_ptr&lt; islot_tool &gt; tool</div><div class="ttdoc">Slots for various item type properties.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01197">itype.h:1197</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="calendar_8h_source.html#l00221">time_duration::from_turns()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l11207">item::magazine_current()</a>, <a class="el" href="input__enums_8h.html#a1f876ea56927f9d927b8783a4c55d7d4a2ab64f4ee279e5baf7ab7059b15e6d12">shift</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a6edbf686ed750df42f1ed9f2cef004f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6edbf686ed750df42f1ed9f2cef004f0">&#9670;&nbsp;</a></span>foodperson_voice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::foodperson_voice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06924">6924</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;{</div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) ) {</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;        <span class="keyword">const</span> <a class="code" href="structSpeechBubble.html">SpeechBubble</a> &amp;<a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a> = <a class="code" href="speech_8cpp.html#ae6fbca69b3cfc44557dd9692227d16a9">get_speech</a>( <span class="stringliteral">&quot;foodperson_mask&quot;</span> );</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.volume, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.text.translated(), <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>,</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;                       <span class="stringliteral">&quot;foodperson_mask&quot;</span> );</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;    }</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;}</div>
<div class="ttc" id="aspeech_8cpp_html_a67a91181969e507f1132304946b6360b"><div class="ttname"><a href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a></div><div class="ttdeci">static std::map&lt; std::string, std::vector&lt; SpeechBubble &gt; &gt; speech</div><div class="ttdef"><b>Definition:</b> <a href="speech_8cpp_source.html#l00012">speech.cpp:12</a></div></div>
<div class="ttc" id="aspeech_8cpp_html_ae6fbca69b3cfc44557dd9692227d16a9"><div class="ttname"><a href="speech_8cpp.html#ae6fbca69b3cfc44557dd9692227d16a9">get_speech</a></div><div class="ttdeci">const SpeechBubble &amp; get_speech(const std::string &amp;label)</div><div class="ttdef"><b>Definition:</b> <a href="speech_8cpp_source.html#l00031">speech.cpp:31</a></div></div>
<div class="ttc" id="astructSpeechBubble_html"><div class="ttname"><a href="structSpeechBubble.html">SpeechBubble</a></div><div class="ttdef"><b>Definition:</b> <a href="speech_8h_source.html#l00011">speech.h:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="speech_8cpp_source.html#l00031">get_speech()</a>, <a class="el" href="calendar_8cpp_source.html#l00753">calendar::once_every()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, and <a class="el" href="speech_8cpp_source.html#l00012">speech</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="add3f1721b816cf46af6c28c73f61eb14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3f1721b816cf46af6c28c73f61eb14">&#9670;&nbsp;</a></span>fungicide()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::fungicide </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00665">665</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_fungus = p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_spores = p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a> );</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() &amp;&amp; !has_fungus &amp;&amp; !has_spores ) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You use your fungicide.&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; uses some fungicide.&quot;</span> ) );</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span>( has_fungus &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">// this is not a medicine, the effect is shorter</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ab7841592a2e46520e3c3a3d3b677345c">effect_antifungal</a>, 1_hours );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> ) ) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel a burning sensation slowly radiating throughout your skin.&quot;</span> ) );</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span>( has_spores &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> ) ) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your skin grows warm for a moment.&quot;</span> ) );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a> );</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordtype">int</span> spore_count = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 6 );</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">if</span>( spore_count == 0 ) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">if</span>( dest == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af563dc2397e71a053569cb45c6bb7e77">passable</a>( dest ) &amp;&amp; <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( spore_count, 8 ) ) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    <span class="keywordflow">if</span>( !critter.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="iuse_8cpp.html#ae4aecc728b6b9084078aaa79046ce038">species_FUNGUS</a> ) ) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                        <a class="code" href="messages_8cpp.html#a3ea1aed1d11cd410cce07fb5be7aa34f">add_msg_if_player_sees</a>( dest, <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is covered in tiny spores!&quot;</span> ),</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                                critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    <span class="keywordflow">if</span>( !critter.<a class="code" href="classmonster.html#a4fddab3f065220c8b7c015572a5de408">make_fungus</a>() ) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        critter.<a class="code" href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">die</a>( p ); <span class="comment">// counts as kill by player</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code" href="iuse_8cpp.html#a88e7476f01684d4172178130beb46ce0">mon_spore</a>, dest );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                spore_count--;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div>
<div class="ttc" id="aclassmonster_html_a4fddab3f065220c8b7c015572a5de408"><div class="ttname"><a href="classmonster.html#a4fddab3f065220c8b7c015572a5de408">monster::make_fungus</a></div><div class="ttdeci">bool make_fungus()</div><div class="ttdoc">Makes this monster into a fungus version Returns false if no such monster exists Returns true if mons...</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03413">monster.cpp:3413</a></div></div>
<div class="ttc" id="aclassmonster_html_a82ae41773b05af94d4b678cb33bfb329"><div class="ttname"><a href="classmonster.html#a82ae41773b05af94d4b678cb33bfb329">monster::die</a></div><div class="ttdeci">void die(Creature *killer) override</div><div class="ttdoc">Empty function.</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02742">monster.cpp:2742</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a88e7476f01684d4172178130beb46ce0"><div class="ttname"><a href="iuse_8cpp.html#a88e7476f01684d4172178130beb46ce0">mon_spore</a></div><div class="ttdeci">static const mtype_id mon_spore(&quot;mon_spore&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae4aecc728b6b9084078aaa79046ce038"><div class="ttname"><a href="iuse_8cpp.html#ae4aecc728b6b9084078aaa79046ce038">species_FUNGUS</a></div><div class="ttdeci">static const species_id species_FUNGUS(&quot;FUNGUS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="messages_8cpp_source.html#l01007">add_msg_if_player_sees()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="monster_8cpp_source.html#l02742">monster::die()</a>, <a class="el" href="iuse_8cpp.html#ab7841592a2e46520e3c3a3d3b677345c">effect_antifungal</a>, <a class="el" href="iuse_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>, <a class="el" href="iuse_8cpp.html#a5700afe28dcf80d2e04f44172a1eebd7">effect_spores</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="mtype_8cpp_source.html#l00385">mtype::in_species()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="monster_8cpp_source.html#l03413">monster::make_fungus()</a>, <a class="el" href="iuse_8cpp.html#a88e7476f01684d4172178130beb46ce0">mon_spore</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="map_8cpp_source.html#l02472">map::passable()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="iuse_8cpp.html#ae4aecc728b6b9084078aaa79046ce038">species_FUNGUS</a>, <a class="el" href="monster_8h_source.html#l00550">monster::type</a>, and <a class="el" href="calendar_8cpp_source.html#l00784">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ac36c707483ed517d1d5639815dacc587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac36c707483ed517d1d5639815dacc587">&#9670;&nbsp;</a></span>gasmask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::gasmask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>6000/that is the amount of "gas absorbed" charges to tick up every second in order to reach that number.</p>

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03972">3972</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;{</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;    <span class="keywordflow">if</span>( p &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;        <span class="comment">// calculate amount of absorbed gas per filter charge</span></div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;        <span class="keyword">const</span> <a class="code" href="classfield.html">field</a> &amp;gasfield = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">field_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dfield : gasfield ) {</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;            <span class="keyword">const</span> <a class="code" href="classfield__entry.html">field_entry</a> &amp;entry = dfield.second;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;            <span class="keywordtype">int</span> gas_abs_factor = to_turns&lt;int&gt;( entry.<a class="code" href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">get_field_type</a>()-&gt;<a class="code" href="structfield__type.html#a7d40db259ba3db0e98b90fe30ffd0662">gas_absorption_factor</a> );</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;            <span class="comment">// Not set, skip this field</span></div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;            <span class="keywordflow">if</span>( gas_abs_factor == 0 ) {</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;            }</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;            <span class="keyword">const</span> <a class="code" href="structfield__intensity__level.html">field_intensity_level</a> &amp;int_level = entry.<a class="code" href="classfield__entry.html#ab0adab0144bb341b2685ef1393cfbc9d">get_intensity_level</a>();</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;            <span class="comment">// 6000 is the amount of &quot;gas absorbed&quot; charges in a full 100 capacity gas mask cartridge.</span></div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            <span class="comment">// factor/concentration gives an amount of seconds the cartidge is expected to last in current conditions.</span><span class="comment"></span></div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="comment">            /// 6000/that is the amount of &quot;gas absorbed&quot; charges to tick up every second in order to reach that number.</span></div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="comment"></span>            <span class="keywordtype">float</span> gas_absorbed = 6000 / ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( gas_abs_factor ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                                          ( int_level.<a class="code" href="structfield__intensity__level.html#a752b9849e083a3138b99bd616495cf6f">concentration</a> ) );</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;            <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb">debugmode::DF_IUSE</a>, <span class="stringliteral">&quot;Absorbing %g/60 from field: 6000 / (%d * %d)&quot;</span>, gas_absorbed,</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                           gas_abs_factor, int_level.<a class="code" href="structfield__intensity__level.html#a752b9849e083a3138b99bd616495cf6f">concentration</a> );</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;            <span class="keywordflow">if</span>( gas_absorbed &gt; 0 ) {</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;gas_absorbed&quot;</span>, it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gas_absorbed&quot;</span>, 0 ) + gas_absorbed );</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;            }</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;        }</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;gas_absorbed&quot;</span>, 0 ) &gt;= 60 ) {</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;            it-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( 1, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, p );</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;gas_absorbed&quot;</span>, 0 );</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &lt; 10 ) {</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;                    <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is getting hard to breathe in!&quot;</span> ),</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt;&#39;s gas mask is getting hard to breathe in!&quot;</span> )</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;                    , it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;            }</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        }</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>(</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s requires new filters!&quot;</span> ),</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; needs new gas mask filters!&quot;</span> )</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;                , it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        }</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    }</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160; </div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;        it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span>, 0 );</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;    }</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;}</div>
<div class="ttc" id="aclassfield__entry_html"><div class="ttname"><a href="classfield__entry.html">field_entry</a></div><div class="ttdoc">An active or passive effect existing on a tile.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00020">field.h:21</a></div></div>
<div class="ttc" id="aclassfield__entry_html_ab0adab0144bb341b2685ef1393cfbc9d"><div class="ttname"><a href="classfield__entry.html#ab0adab0144bb341b2685ef1393cfbc9d">field_entry::get_intensity_level</a></div><div class="ttdeci">const field_intensity_level &amp; get_intensity_level() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00022">field.cpp:22</a></div></div>
<div class="ttc" id="aclassfield__entry_html_af76e247514edaeed4bdc58638bfa0ae1"><div class="ttname"><a href="classfield__entry.html#af76e247514edaeed4bdc58638bfa0ae1">field_entry::get_field_type</a></div><div class="ttdeci">field_type_id get_field_type() const</div><div class="ttdef"><b>Definition:</b> <a href="field_8cpp_source.html#l00037">field.cpp:37</a></div></div>
<div class="ttc" id="aclassfield_html"><div class="ttname"><a href="classfield.html">field</a></div><div class="ttdoc">A variable sized collection of field entries on a given map square.</div><div class="ttdef"><b>Definition:</b> <a href="field_8h_source.html#l00106">field.h:107</a></div></div>
<div class="ttc" id="amessages_8h_html_ab6590bda29b082a7282bcc1a9cc8f02a"><div class="ttname"><a href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a></div><div class="ttdeci">#define add_msg_debug(type,...)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00177">messages.h:177</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2a769b730bd9bd7950b568fad03c87c6cb">debugmode::DF_IUSE</a></div><div class="ttdeci">@ DF_IUSE</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00260">debug.h:260</a></div></div>
<div class="ttc" id="astructfield__intensity__level_html"><div class="ttname"><a href="structfield__intensity__level.html">field_intensity_level</a></div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00100">field_type.h:100</a></div></div>
<div class="ttc" id="astructfield__intensity__level_html_a752b9849e083a3138b99bd616495cf6f"><div class="ttname"><a href="structfield__intensity__level.html#a752b9849e083a3138b99bd616495cf6f">field_intensity_level::concentration</a></div><div class="ttdeci">int concentration</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00121">field_type.h:121</a></div></div>
<div class="ttc" id="astructfield__type_html_a7d40db259ba3db0e98b90fe30ffd0662"><div class="ttname"><a href="structfield__type.html#a7d40db259ba3db0e98b90fe30ffd0662">field_type::gas_absorption_factor</a></div><div class="ttdeci">time_duration gas_absorption_factor</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8h_source.html#l00202">field_type.h:202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="field__type_8h_source.html#l00121">field_intensity_level::concentration</a>, <a class="el" href="debug_8h_source.html#l00260">debugmode::DF_IUSE</a>, <a class="el" href="map_8cpp_source.html#l06379">map::field_at()</a>, <a class="el" href="field__type_8h_source.html#l00202">field_type::gas_absorption_factor</a>, <a class="el" href="field_8cpp_source.html#l00037">field_entry::get_field_type()</a>, <a class="el" href="field_8cpp_source.html#l00022">field_entry::get_intensity_level()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="acaedb3c693d953eca4780be500de284b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaedb3c693d953eca4780be500de284b">&#9670;&nbsp;</a></span>gasmask_activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::gasmask_activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03959">3959</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;{</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() == 0 ) {</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s doesn&#39;t have a filter.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You prepare your %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;        it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;overwrite_env_resist&quot;</span>, it-&gt;<a class="code" href="classitem.html#acb31dfc93d0de49315fdbbac504236df">get_base_env_resist_w_filter</a>() );</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    }</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160; </div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l08029">item::get_base_env_resist_w_filter()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aeb111931df64f89983c2a55e2e761fa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb111931df64f89983c2a55e2e761fa5">&#9670;&nbsp;</a></span>geiger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::geiger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03127">3127</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;{</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordtype">int</span> ch = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Geiger counter:&quot;</span> ), {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Scan yourself or other person&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Scan the ground&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn continuous scan on&quot;</span> )</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    } );</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <span class="keywordflow">switch</span>( ch ) {</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">case</span> 0: {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="keywordflow">return</span> creatures.creature_at&lt;<a class="code" href="classCharacter.html">Character</a>&gt;( pnt ) != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;            };</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;            <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Scan whom?&quot;</span> ),</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                                                 <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no one to scan nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            }</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your radiation level: %d mSv (%d mSv from items)&quot;</span> ), p-&gt;<a class="code" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>(),</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                                      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( p-&gt;<a class="code" href="classCharacter.html#af12ff6161fef6fc0c4785ae0268a8374">get_leak_level</a>() ) );</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> person_ = creatures.creature_at&lt;<a class="code" href="classnpc.html">npc</a>&gt;( pnt ) ) {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                <a class="code" href="classnpc.html">npc</a> &amp;person = *person_;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s&#39;s radiation level: %d mSv (%d mSv from items)&quot;</span> ),</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                                      person.<a class="code" href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">get_name</a>(), person.<a class="code" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>(),</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                                      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( person.<a class="code" href="classCharacter.html#af12ff6161fef6fc0c4785ae0268a8374">get_leak_level</a>() ) );</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            }</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        }</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The ground&#39;s radiation level: %d mSv/h&quot;</span> ),</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                                  <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().get_radiation( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter&#39;s scan LED turns on.&quot;</span> ) );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a8dc36a92349db80ee1b3fab6a0fd785a">itype_geiger_on</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    }</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -100 );</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_aa81a4b0db6f2387bfc02706a6b7a678e"><div class="ttname"><a href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">Character::get_rad</a></div><div class="ttdeci">int get_rad() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06757">character.cpp:6757</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae47514f140700c67ea21ccbadf66d106"><div class="ttname"><a href="classCharacter.html#ae47514f140700c67ea21ccbadf66d106">Character::get_name</a></div><div class="ttdeci">std::string get_name() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05731">character.cpp:5731</a></div></div>
<div class="ttc" id="aclassCharacter_html_af12ff6161fef6fc0c4785ae0268a8374"><div class="ttname"><a href="classCharacter.html#af12ff6161fef6fc0c4785ae0268a8374">Character::get_leak_level</a></div><div class="ttdeci">float get_leak_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06796">character.cpp:6796</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a8dc36a92349db80ee1b3fab6a0fd785a"><div class="ttname"><a href="iuse_8cpp.html#a8dc36a92349db80ee1b3fab6a0fd785a">itype_geiger_on</a></div><div class="ttdeci">static const itype_id itype_geiger_on(&quot;geiger_on&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="character_8cpp_source.html#l06796">Character::get_leak_level()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l05731">Character::get_name()</a>, <a class="el" href="character_8cpp_source.html#l06757">Character::get_rad()</a>, <a class="el" href="iuse_8cpp.html#a8dc36a92349db80ee1b3fab6a0fd785a">itype_geiger_on</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, and <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abbcb64b7dbeaf1b6d89d5ad218500d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbcb64b7dbeaf1b6d89d5ad218500d7a">&#9670;&nbsp;</a></span>geiger_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::geiger_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03174">3174</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;{</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> rads = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a49871648d1ab92a02a1a6f12797390a7">get_radiation</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="keywordflow">if</span>( rads == 0 ) {</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    std::string description = rads &gt; 50 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;buzzing&quot;</span> ) :</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                              rads &gt; 25 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;rapid clicking&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;clicking&quot;</span> );</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    std::string sound_var = rads &gt; 50 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;geiger_high&quot;</span> ) :</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                            rads &gt; 25 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;geiger_medium&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;geiger_low&quot;</span> );</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, description, <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>, sound_var );</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().can_hear( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 6 ) ) {</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="comment">// can not hear it, but may have alarmed other creatures</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">if</span>( rads &gt; 50 ) {</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter buzzes intensely.&quot;</span> ) );</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rads &gt; 35 ) {</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks wildly.&quot;</span> ) );</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rads &gt; 25 ) {</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks rapidly.&quot;</span> ) );</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rads &gt; 15 ) {</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks steadily.&quot;</span> ) );</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rads &gt; 8 ) {</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks slowly.&quot;</span> ) );</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rads &gt; 4 ) {</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks intermittently.&quot;</span> ) );</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The geiger counter clicks once.&quot;</span> ) );</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    }</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a49871648d1ab92a02a1a6f12797390a7"><div class="ttname"><a href="classmap.html#a49871648d1ab92a02a1a6f12797390a7">map::get_radiation</a></div><div class="ttdeci">int get_radiation(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04899">map.cpp:4899</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04899">map::get_radiation()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8d75813ba7f9c05f7504b7623d55ea99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d75813ba7f9c05f7504b7623d55ea99">&#9670;&nbsp;</a></span>granade_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::granade_act </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Maximum Strength increases possible granade str buff for NPCs Maximum Dexterity increases possible granade dex buff for NPCs Maximum Intelligence increases possible granade int buff for NPCs Maximum Perception increases possible granade per buff for NPCs Maximum Strength increases possible granade str buff Maximum Dexterity increases possible granade dex buff Maximum Intelligence increases possible granade int buff Maximum Perception increases possible granade per buff Maximum Strength increases possible granade str debuff for NPCs (NEGATIVE) Maximum Dexterity increases possible granade dex debuff for NPCs (NEGATIVE) Maximum Intelligence increases possible granade int debuff for NPCs (NEGATIVE) Maximum Perception increases possible granade per debuff for NPCs (NEGATIVE) Maximum Strength increases possible granade str debuff (NEGATIVE) Maximum Dexterity increases possible granade dex debuff (NEGATIVE) Maximum Intelligence increases possible granade int debuff (NEGATIVE) Maximum Perception increases possible granade per debuff (NEGATIVE) 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03274">3274</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;{</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.x == -999 || <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.y == -999 ) {</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    }</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordtype">int</span> explosion_radius = 3;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordtype">int</span> effect_roll = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 4 );</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="keyword">auto</span> buff_stat = [&amp;]( <span class="keywordtype">int</span> &amp;current_stat, <span class="keywordtype">int</span> modify_by ) {</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        <span class="keywordtype">int</span> modified_stat = current_stat + modify_by;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        current_stat = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( current_stat, <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( 15, modified_stat ) );</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    };</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <span class="keywordflow">switch</span>( effect_roll ) {</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 100, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BUGFIXES!&quot;</span> ),</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;                           <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;            <a class="code" href="namespaceexplosion__handler.html#ab197cd7247cc8facd08954a32977ca70">explosion_handler::draw_explosion</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius, <a class="code" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a> );</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius ) ) {</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;                <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest, true );</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;                <span class="keywordflow">if</span>( mon &amp;&amp; ( mon-&gt;<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="iuse_8cpp.html#a7c8b3bad2e609f9d260b64273102d498">species_INSECT</a> ) || mon-&gt;<a class="code" href="classmonster.html#a70c250ac59c7d91b374dfa5d7b8da66c">is_hallucination</a>() ) ) {</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                    mon-&gt;<a class="code" href="classmonster.html#aee322ddbd0d998f61aa928c4392396e8">die_in_explosion</a>( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;                }</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            }</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 100, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;BUFFS!&quot;</span> ),</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;                           <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <a class="code" href="namespaceexplosion__handler.html#ab197cd7247cc8facd08954a32977ca70">explosion_handler::draw_explosion</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius, <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> );</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius ) ) {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;                    <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;                    critter.<a class="code" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>(</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;                        critter.<a class="code" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1.1, 2.0 ) );</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;                    critter.<a class="code" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( critter.<a class="code" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1.1, 2.0 ) );</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> person = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classnpc.html">npc</a>&gt;( dest ) ) {<span class="comment"></span></div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="comment">                    /** @EFFECT_STR_MAX increases possible granade str buff for NPCs */</span></div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                    buff_stat( person-&gt;str_max, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;str_max / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;<span class="comment">                    /** @EFFECT_DEX_MAX increases possible granade dex buff for NPCs */</span></div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;                    buff_stat( person-&gt;dex_max, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;dex_max / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="comment">                    /** @EFFECT_INT_MAX increases possible granade int buff for NPCs */</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;                    buff_stat( person-&gt;int_max, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;int_max / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="comment">                    /** @EFFECT_PER_MAX increases possible granade per buff for NPCs */</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;                    buff_stat( person-&gt;per_max, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;per_max / 2 ) );</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == dest ) {<span class="comment"></span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="comment">                    /** @EFFECT_STR_MAX increases possible granade str buff */</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                    buff_stat( player_character.<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="comment">                    /** @EFFECT_DEX_MAX increases possible granade dex buff */</span></div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;                    buff_stat( player_character.<a class="code" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a> / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment">                    /** @EFFECT_INT_MAX increases possible granade int buff */</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                    buff_stat( player_character.<a class="code" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a> / 2 ) );<span class="comment"></span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="comment">                    /** @EFFECT_PER_MAX increases possible granade per buff */</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                    buff_stat( player_character.<a class="code" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a> / 2 ) );</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                    player_character.<a class="code" href="classCharacter.html#ae9de69bc0450c41078c9f5c86bcf837c">recalc_hp</a>();</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : player_character.<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>(</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                             <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a> ) ) {</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;                        player_character.<a class="code" href="classCharacter.html#acd7722cca040440eb161fc85fb6a7e73">set_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, player_character.<a class="code" href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">get_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1,</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;                                                          1.2 ) );</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> hp_max = player_character.<a class="code" href="classCreature.html#aad6dc5532f233030d367ed67e0ea6613">get_part_hp_max</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                        <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">get_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; hp_max ) {</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                            player_character.<a class="code" href="classCharacter.html#acd7722cca040440eb161fc85fb6a7e73">set_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, hp_max );</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;                        }</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                    }</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                }</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;            }</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160; </div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 100, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;NERFS!&quot;</span> ),</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                           <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;            <a class="code" href="namespaceexplosion__handler.html#ab197cd7247cc8facd08954a32977ca70">explosion_handler::draw_explosion</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius, <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius ) ) {</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                    <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                    critter.<a class="code" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>(</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                        <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, critter.<a class="code" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() ) );</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                    critter.<a class="code" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, critter.<a class="code" href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">get_hp</a>() ) );</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> person = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classnpc.html">npc</a>&gt;( dest ) ) {<span class="comment"></span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;<span class="comment">                    /** @EFFECT_STR_MAX increases possible granade str debuff for NPCs (NEGATIVE) */</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                    person-&gt;str_max -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;str_max / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;<span class="comment">                    /** @EFFECT_DEX_MAX increases possible granade dex debuff for NPCs (NEGATIVE) */</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                    person-&gt;dex_max -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;dex_max / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="comment">                    /** @EFFECT_INT_MAX increases possible granade int debuff for NPCs (NEGATIVE) */</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                    person-&gt;int_max -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;int_max / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;<span class="comment">                    /** @EFFECT_PER_MAX increases possible granade per debuff for NPCs (NEGATIVE) */</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;                    person-&gt;per_max -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, person-&gt;per_max / 2 );</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == dest ) {<span class="comment"></span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="comment">                    /** @EFFECT_STR_MAX increases possible granade str debuff (NEGATIVE) */</span></div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                    player_character.<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;<span class="comment">                    /** @EFFECT_DEX_MAX increases possible granade dex debuff (NEGATIVE) */</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                    player_character.<a class="code" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a> -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a> / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;<span class="comment">                    /** @EFFECT_INT_MAX increases possible granade int debuff (NEGATIVE) */</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                    player_character.<a class="code" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a> -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a> / 2 );<span class="comment"></span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="comment">                    /** @EFFECT_PER_MAX increases possible granade per debuff (NEGATIVE) */</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;                    player_character.<a class="code" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a> -= <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, player_character.<a class="code" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a> / 2 );</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                    player_character.<a class="code" href="classCharacter.html#ae9de69bc0450c41078c9f5c86bcf837c">recalc_hp</a>();</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : player_character.<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>(</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                             <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a> ) ) {</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> hp_cur = player_character.<a class="code" href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">get_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                        <span class="keywordflow">if</span>( hp_cur &gt; 0 ) {</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                            player_character.<a class="code" href="classCharacter.html#acd7722cca040440eb161fc85fb6a7e73">set_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, hp_cur ) );</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                        }</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;                    }</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                }</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            }</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160; </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 100, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;REVERTS!&quot;</span> ),</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;                           <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;            <a class="code" href="namespaceexplosion__handler.html#ab197cd7247cc8facd08954a32977ca70">explosion_handler::draw_explosion</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius, <a class="code" href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a> );</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, explosion_radius ) ) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( dest ) ) {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                    <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                    critter.<a class="code" href="classCreature.html#afedb5874d4d3438d3c82cb2104ec49fa">set_speed_base</a>( critter.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">speed</a> );</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                    critter.<a class="code" href="classmonster.html#a98c421c82c34706735f13afe25ea7f1f">set_hp</a>( critter.<a class="code" href="classmonster.html#a551f4a380282f8ec082c74f410c397de">get_hp_max</a>() );</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;                    critter.<a class="code" href="classCreature.html#ade25d295e89504f92aff453b05cd2bbe">clear_effects</a>();</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> person = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classnpc.html">npc</a>&gt;( dest ) ) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                    person-&gt;environmental_revert_effect();</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( player_character.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == dest ) {</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;                    player_character.<a class="code" href="classCharacter.html#a2d0693f6056f737b0308d79857247f4b">environmental_revert_effect</a>();</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;                    <a class="code" href="iuse_8cpp.html#ad751eb50d3c11fa20f7cec086619d103">do_purify</a>( player_character );</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;                }</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            }</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a0bbd9aa7982f98e08f67db130e4eb9f8"><div class="ttname"><a href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">Character::str_max</a></div><div class="ttdeci">int str_max</div><div class="ttdoc">Character stats.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00572">character.h:572</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2d0693f6056f737b0308d79857247f4b"><div class="ttname"><a href="classCharacter.html#a2d0693f6056f737b0308d79857247f4b">Character::environmental_revert_effect</a></div><div class="ttdeci">void environmental_revert_effect()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l13141">character.cpp:13141</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4b20f9ae261b906ead741771a8a48311"><div class="ttname"><a href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">Character::per_max</a></div><div class="ttdeci">int per_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00575">character.h:575</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9c3a6b61668d4d7d771441e50095c544"><div class="ttname"><a href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">Character::int_max</a></div><div class="ttdeci">int int_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00574">character.h:574</a></div></div>
<div class="ttc" id="aclassCharacter_html_acd7722cca040440eb161fc85fb6a7e73"><div class="ttname"><a href="classCharacter.html#acd7722cca040440eb161fc85fb6a7e73">Character::set_part_hp_cur</a></div><div class="ttdeci">void set_part_hp_cur(const bodypart_id &amp;id, int set) override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01909">character.cpp:1909</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae4ce8cb45c93fcafc3f4ba489e63a4c2"><div class="ttname"><a href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">Character::dex_max</a></div><div class="ttdeci">int dex_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00573">character.h:573</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae9de69bc0450c41078c9f5c86bcf837c"><div class="ttname"><a href="classCharacter.html#ae9de69bc0450c41078c9f5c86bcf837c">Character::recalc_hp</a></div><div class="ttdeci">void recalc_hp()</div><div class="ttdoc">Recalculates HP after a change to max strength or enchantment.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02464">character.cpp:2464</a></div></div>
<div class="ttc" id="aclassCreature_html_a4537397ede1aea8ecec28183252aabe3"><div class="ttname"><a href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(get_body_part_flags=get_body_part_flags::none) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02627">creature.cpp:2627</a></div></div>
<div class="ttc" id="aclassCreature_html_aad6dc5532f233030d367ed67e0ea6613"><div class="ttname"><a href="classCreature.html#aad6dc5532f233030d367ed67e0ea6613">Creature::get_part_hp_max</a></div><div class="ttdeci">int get_part_hp_max(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02282">creature.cpp:2282</a></div></div>
<div class="ttc" id="aclassCreature_html_ab901ee8b150fdad01ff2028ec8dba84c"><div class="ttname"><a href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">Creature::get_part_hp_cur</a></div><div class="ttdeci">int get_part_hp_cur(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02277">creature.cpp:2277</a></div></div>
<div class="ttc" id="aclassCreature_html_ade25d295e89504f92aff453b05cd2bbe"><div class="ttname"><a href="classCreature.html#ade25d295e89504f92aff453b05cd2bbe">Creature::clear_effects</a></div><div class="ttdeci">void clear_effects()</div><div class="ttdoc">Remove all effects.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01712">creature.cpp:1712</a></div></div>
<div class="ttc" id="aclassmonster_html_a2d0e466b9d25796cd99402ddd5d3ce20"><div class="ttname"><a href="classmonster.html#a2d0e466b9d25796cd99402ddd5d3ce20">monster::get_hp</a></div><div class="ttdeci">int get_hp(const bodypart_id &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03743">monster.cpp:3743</a></div></div>
<div class="ttc" id="aclassmonster_html_a551f4a380282f8ec082c74f410c397de"><div class="ttname"><a href="classmonster.html#a551f4a380282f8ec082c74f410c397de">monster::get_hp_max</a></div><div class="ttdeci">int get_hp_max(const bodypart_id &amp;) const override</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03733">monster.cpp:3733</a></div></div>
<div class="ttc" id="aclassmonster_html_aee322ddbd0d998f61aa928c4392396e8"><div class="ttname"><a href="classmonster.html#aee322ddbd0d998f61aa928c4392396e8">monster::die_in_explosion</a></div><div class="ttdeci">void die_in_explosion(Creature *source)</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l02189">monster.cpp:2189</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a6c870a877c442090edead1e229b3953d"><div class="ttname"><a href="color_8h.html#a6c870a877c442090edead1e229b3953d">c_pink</a></div><div class="ttdeci">#define c_pink</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acolor_8h_html_a894265dad49331c44392826fc52b848f"><div class="ttname"><a href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a></div><div class="ttdeci">#define c_light_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="acreature_8h_html_aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787"><div class="ttname"><a href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a></div><div class="ttdeci">@ only_main</div></div>
<div class="ttc" id="aiuse_8cpp_html_a7c8b3bad2e609f9d260b64273102d498"><div class="ttname"><a href="iuse_8cpp.html#a7c8b3bad2e609f9d260b64273102d498">species_INSECT</a></div><div class="ttdeci">static const species_id species_INSECT(&quot;INSECT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad751eb50d3c11fa20f7cec086619d103"><div class="ttname"><a href="iuse_8cpp.html#ad751eb50d3c11fa20f7cec086619d103">do_purify</a></div><div class="ttdeci">static void do_purify(Character &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01139">iuse.cpp:1139</a></div></div>
<div class="ttc" id="anamespaceexplosion__handler_html_ab197cd7247cc8facd08954a32977ca70"><div class="ttname"><a href="namespaceexplosion__handler.html#ab197cd7247cc8facd08954a32977ca70">explosion_handler::draw_explosion</a></div><div class="ttdeci">void draw_explosion(const tripoint &amp;p, int radius, const nc_color &amp;col)</div><div class="ttdef"><b>Definition:</b> <a href="animation_8cpp_source.html#l00303">animation.cpp:303</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a></div><div class="ttdeci">@ electronic_speech</div></div>
<div class="ttc" id="arng_8cpp_html_a0c88381d6334a2fbaa726c53f5cf9bb9"><div class="ttname"><a href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a></div><div class="ttdeci">double rng_float(double lo, double hi)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00027">rng.cpp:27</a></div></div>
<div class="ttc" id="astructmtype_html_addfa6852e581c8cebbd1bbf9c4ebbd9a"><div class="ttname"><a href="structmtype.html#addfa6852e581c8cebbd1bbf9c4ebbd9a">mtype::speed</a></div><div class="ttdeci">int speed</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00414">mtype.h:414</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00238">bp</a>, <a class="el" href="color_8h_source.html#l00020">c_green</a>, <a class="el" href="color_8h_source.html#l00028">c_light_cyan</a>, <a class="el" href="color_8h_source.html#l00029">c_pink</a>, <a class="el" href="color_8h_source.html#l00019">c_red</a>, <a class="el" href="creature_8cpp_source.html#l01712">Creature::clear_effects()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="character_8h_source.html#l00573">Character::dex_max</a>, <a class="el" href="monster_8cpp_source.html#l02189">monster::die_in_explosion()</a>, <a class="el" href="iuse_8cpp_source.html#l01139">do_purify()</a>, <a class="el" href="animation_8cpp_source.html#l00303">explosion_handler::draw_explosion()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="character_8cpp_source.html#l13141">Character::environmental_revert_effect()</a>, <a class="el" href="creature_8cpp_source.html#l02627">Creature::get_all_body_parts()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="monster_8cpp_source.html#l03743">monster::get_hp()</a>, <a class="el" href="monster_8cpp_source.html#l03733">monster::get_hp_max()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l02277">Creature::get_part_hp_cur()</a>, <a class="el" href="creature_8cpp_source.html#l02282">Creature::get_part_hp_max()</a>, <a class="el" href="creature_8cpp_source.html#l02782">Creature::get_speed_base()</a>, <a class="el" href="mtype_8cpp_source.html#l00385">mtype::in_species()</a>, <a class="el" href="character_8h_source.html#l00574">Character::int_max</a>, <a class="el" href="monster_8cpp_source.html#l03460">monster::is_hallucination()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, <a class="el" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">only_main</a>, <a class="el" href="character_8h_source.html#l00575">Character::per_max</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="character_8cpp_source.html#l02464">Character::recalc_hp()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="rng_8cpp_source.html#l00027">rng_float()</a>, <a class="el" href="monster_8cpp_source.html#l02164">monster::set_hp()</a>, <a class="el" href="character_8cpp_source.html#l01909">Character::set_part_hp_cur()</a>, <a class="el" href="creature_8cpp_source.html#l02873">Creature::set_speed_base()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="iuse_8cpp.html#a7c8b3bad2e609f9d260b64273102d498">species_INSECT</a>, <a class="el" href="mtype_8h_source.html#l00414">mtype::speed</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="character_8h_source.html#l00572">Character::str_max</a>, <a class="el" href="monster_8h_source.html#l00550">monster::type</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abff950d44529ee5a01b6cf5b9a722150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abff950d44529ee5a01b6cf5b9a722150">&#9670;&nbsp;</a></span>grenade_inc_act()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::grenade_inc_act </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03435">3435</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;{</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.x == -999 || <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.y == -999 ) {</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    }</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    <span class="keywordtype">int</span> num_flames = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 3, 5 );</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> current_flame = 0; current_flame &lt; num_flames; current_flame++ ) {</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;        <a class="code" href="structtripoint.html">tripoint</a> dest( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> + <a class="code" href="structpoint.html">point</a>( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -5, 5 ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -5, 5 ) ) );</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        std::vector&lt;tripoint&gt; flames = <a class="code" href="coordinates_8h.html#a31847b31c6ef002e9d16afd7fd0005e3">line_to</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, dest, 0, 0 );</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">flame</a> : flames ) {</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( <a class="code" href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">flame</a>, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 2 ) );</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;        }</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    }</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <a class="code" href="namespaceexplosion__handler.html#af4ae8e07a9627dbfe22b2d07ea577587">explosion_handler::explosion</a>( p, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 8, 0.8, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;dest : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 2 ) ) {</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dest, <a class="code" href="field__type_8cpp.html#ae38c47f5c53778c73462a97099baa908">fd_incendiary</a>, 3 );</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    }</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160; </div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.has_trait( <a class="code" href="iuse_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a> ) &amp;&amp; <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.sees( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.add_morale( <a class="code" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, 15, 15, 8_hours, 6_hours );</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;        <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.rem_morale( <a class="code" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a> );</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fire  Good&quot;</span> ) );</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;    }</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;}</div>
<div class="ttc" id="afield__type_8cpp_html_ae38c47f5c53778c73462a97099baa908"><div class="ttname"><a href="field__type_8cpp.html#ae38c47f5c53778c73462a97099baa908">fd_incendiary</a></div><div class="ttdeci">const field_type_str_id fd_incendiary(&quot;fd_incendiary&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a512959ad2b35ea057f2fed5445fc23c4"><div class="ttname"><a href="iuse_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a></div><div class="ttdeci">static const trait_id trait_PYROMANIA(&quot;PYROMANIA&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a7a7fa39cff1d7efe58e013c63b7f0ee6"><div class="ttname"><a href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_STARTFIRE(&quot;morale_pyromania_startfire&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae932ffaaef9c3a4092fc8727141405bf"><div class="ttname"><a href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_NOFIRE(&quot;morale_pyromania_nofire&quot;)</div></div>
<div class="ttc" id="anamespaceexplosion__handler_html_af4ae8e07a9627dbfe22b2d07ea577587"><div class="ttname"><a href="namespaceexplosion__handler.html#af4ae8e07a9627dbfe22b2d07ea577587">explosion_handler::explosion</a></div><div class="ttdeci">void explosion(const Creature *source, const tripoint &amp;p, float power, float factor, bool fire, int casing_mass, float frag_mass)</div><div class="ttdoc">Queue an explosion at p of intensity (power) with (shrapnel) chunks of shrapnel.</div><div class="ttdef"><b>Definition:</b> <a href="explosion_8cpp_source.html#l00489">explosion.cpp:489</a></div></div>
<div class="ttc" id="anamespacemattack_html_a74c5bd8b75ec90d4af94f3fc218b3eba"><div class="ttname"><a href="namespacemattack.html#a74c5bd8b75ec90d4af94f3fc218b3eba">mattack::flame</a></div><div class="ttdeci">void flame(monster *z, Creature *target)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l03619">monattack.cpp:3619</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="explosion_8cpp_source.html#l00489">explosion_handler::explosion()</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="field__type_8cpp.html#ae38c47f5c53778c73462a97099baa908">fd_incendiary</a>, <a class="el" href="monattack_8cpp_source.html#l03619">mattack::flame()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="coordinates_8h_source.html#l00798">line_to()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a>, <a class="el" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="iuse_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7c62e8155f0f686f8f80e58f629071c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c62e8155f0f686f8f80e58f629071c1">&#9670;&nbsp;</a></span>gun_repair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::gun_repair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Mechanics &gt;1 allows gun repair 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05139">5139</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;{</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;    }</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;    }</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;<span class="comment">    /** @EFFECT_MECHANICS &gt;1 allows gun repair */</span></div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a> ) &lt; 2 ) {</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a mechanics skill of 2 to use this repair kit.&quot;</span> ) );</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;    }</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>( []( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp; loc ) {</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        <span class="keywordflow">return</span> loc-&gt;<a class="code" href="classitem.html#ac690c252311f4c021cb82c9487d35242">is_firearm</a>() &amp;&amp; !loc-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a> );</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;    }, <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>(), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select the firearm to repair:&quot;</span> ) );</div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;    }</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;    <a class="code" href="iuse_8cpp.html#a0b616f0d1e6c3e3db8a19ad2aced6169">return ::gun_repair</a>( p, it, loc );</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a93a3570e884214ba5c0eb3cdf1af75cc"><div class="ttname"><a href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">Character::get_skill_level</a></div><div class="ttdeci">float get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03428">character.cpp:3428</a></div></div>
<div class="ttc" id="aclassitem_html_ac690c252311f4c021cb82c9487d35242"><div class="ttname"><a href="classitem.html#ac690c252311f4c021cb82c9487d35242">item::is_firearm</a></div><div class="ttdeci">bool is_firearm() const</div><div class="ttdoc">Does it require gunsmithing tools to repair.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09405">item.cpp:9405</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a0c4794877bf330a3ebe213d225ec32db"><div class="ttname"><a href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a></div><div class="ttdeci">const flag_id flag_NO_REPAIR(&quot;NO_REPAIR&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a0b616f0d1e6c3e3db8a19ad2aced6169"><div class="ttname"><a href="iuse_8cpp.html#a0b616f0d1e6c3e3db8a19ad2aced6169">gun_repair</a></div><div class="ttdeci">std::optional&lt; int &gt; gun_repair(Character *p, item *, item_location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05165">iuse.cpp:5165</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a53a27ba882bb24158d8752e53158bf46"><div class="ttname"><a href="iuse_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a></div><div class="ttdeci">static const skill_id skill_mechanics(&quot;mechanics&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="flag_8cpp.html#a0c4794877bf330a3ebe213d225ec32db">flag_NO_REPAIR</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="iuse_8cpp_source.html#l05165">gun_repair()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l09405">item::is_firearm()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iuse_8cpp.html#a53a27ba882bb24158d8752e53158bf46">skill_mechanics</a>, and <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abb611eda7fd237a2b9c470bfb5212840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb611eda7fd237a2b9c470bfb5212840">&#9670;&nbsp;</a></span>gunmod_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::gunmod_attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05194">5194</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;{</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;    <span class="keywordflow">if</span>( !it || !it-&gt;<a class="code" href="classitem.html#a9b06bb61116b722a90aa372a4561337a">is_gunmod</a>() ) {</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to attach non-gunmod&quot;</span> );</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    }</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160; </div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    }</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160; </div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;        <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="namespacegame__menus_1_1inv.html#aa6426b868d27fda8d8116968e63db4db">game_menus::inv::gun_to_modify</a>( *p-&gt;<a class="code" href="classCharacter.html#a01a7950e28e24252e372d7e74078e12f">as_character</a>(), *it );</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160; </div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;        <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;        }</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160; </div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;        <span class="keywordflow">if</span>( !loc-&gt;<a class="code" href="classitem.html#af92f1cedcba23fcf2aab8b821554a89b">is_gunmod_compatible</a>( *it ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;        }</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160; </div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> mod_copy( *it );</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;        <a class="code" href="classitem.html">item</a> modded_gun( *loc );</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160; </div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;        modded_gun.put_in( mod_copy, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a> );</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160; </div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespacegame__menus_1_1inv.html#a5ff3f5c27c60a8b35508dd9b3e078306">game_menus::inv::compare_items</a>( *loc, modded_gun, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Attach modification?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;        }</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160; </div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a781660c9650a753558f46b586faf56b5">gunmod_add</a>( *loc, *it );</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;    } <span class="keywordflow">while</span>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a01a7950e28e24252e372d7e74078e12f"><div class="ttname"><a href="classCharacter.html#a01a7950e28e24252e372d7e74078e12f">Character::as_character</a></div><div class="ttdeci">Character * as_character() override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00532">character.h:532</a></div></div>
<div class="ttc" id="aclassCharacter_html_a781660c9650a753558f46b586faf56b5"><div class="ttname"><a href="classCharacter.html#a781660c9650a753558f46b586faf56b5">Character::gunmod_add</a></div><div class="ttdeci">void gunmod_add(item &amp;gun, item &amp;mod)</div><div class="ttdoc">Starts activity to install gunmod having warned user about any risk of failure or irremovable mods s.</div><div class="ttdef"><b>Definition:</b> <a href="character__guns_8cpp_source.html#l00163">character_guns.cpp:163</a></div></div>
<div class="ttc" id="aclassitem_html_a9b06bb61116b722a90aa372a4561337a"><div class="ttname"><a href="classitem.html#a9b06bb61116b722a90aa372a4561337a">item::is_gunmod</a></div><div class="ttdeci">bool is_gunmod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09435">item.cpp:9435</a></div></div>
<div class="ttc" id="aclassitem_html_af92f1cedcba23fcf2aab8b821554a89b"><div class="ttname"><a href="classitem.html#af92f1cedcba23fcf2aab8b821554a89b">item::is_gunmod_compatible</a></div><div class="ttdeci">ret_val&lt; void &gt; is_gunmod_compatible(const item &amp;mod) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l11270">item.cpp:11270</a></div></div>
<div class="ttc" id="aclassret__val__common_html_a933807b816264e791e488ed5e7abb1c3"><div class="ttname"><a href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">ret_val_common::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00013">ret_val.h:13</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_a5ff3f5c27c60a8b35508dd9b3e078306"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#a5ff3f5c27c60a8b35508dd9b3e078306">game_menus::inv::compare_items</a></div><div class="ttdeci">bool compare_items(const item &amp;first, const item &amp;second, const std::string &amp;confirm_message=&quot;&quot;)</div><div class="ttdoc">Compares two items, if confirm_message isn't empty then it will be printed to the screen and function...</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l02292">game_inventory.cpp:2292</a></div></div>
<div class="ttc" id="anamespacegame__menus_1_1inv_html_aa6426b868d27fda8d8116968e63db4db"><div class="ttname"><a href="namespacegame__menus_1_1inv.html#aa6426b868d27fda8d8116968e63db4db">game_menus::inv::gun_to_modify</a></div><div class="ttdeci">item_location gun_to_modify(Character &amp;you, const item &amp;gunmod)</div><div class="ttdoc">Gunmod installation menu.</div><div class="ttdef"><b>Definition:</b> <a href="game__inventory_8cpp_source.html#l01251">game_inventory.cpp:1251</a></div></div>
<div class="ttc" id="apocket__type_8h_html_af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967"><div class="ttname"><a href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">pocket_type::MOD</a></div><div class="ttdeci">@ MOD</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8h_source.html#l00532">Character::as_character()</a>, <a class="el" href="game__inventory_8cpp_source.html#l02292">game_menus::inv::compare_items()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="game__inventory_8cpp_source.html#l01251">game_menus::inv::gun_to_modify()</a>, <a class="el" href="character__guns_8cpp_source.html#l00163">Character::gunmod_add()</a>, <a class="el" href="item_8cpp_source.html#l09435">item::is_gunmod()</a>, <a class="el" href="item_8cpp_source.html#l11270">item::is_gunmod_compatible()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1ac5a28f4b35a2884fa3277150ac5d0967">MOD</a>, <a class="el" href="item_8cpp_source.html#l01784">item::put_in()</a>, and <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a60f3a7c26cee6c0836c660510a428609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60f3a7c26cee6c0836c660510a428609">&#9670;&nbsp;</a></span>hacksaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::hacksaw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>it_pnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04678">4678</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;{</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action hacksaw that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;    }</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;    }</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160; </div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f =</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    [&amp;here, p]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( pnt ) ) {</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pnt )-&gt;<a class="code" href="structfurn__t.html#aa1dd5ea7a12aca533ba2be3d3d25f155">hacksaw</a>-&gt;valid();</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a27531d8882b8c6684dfda1fa41acce1f">is_null</a>() ) {</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#aee0f01130b6c748fc815cfe256eacceb">hacksaw</a>-&gt;valid();</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;        }</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;    };</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160; </div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cut up metal where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no metal to cut up nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;    }</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Why would you do that?&quot;</span> ) );</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re not even chained to a boiler.&quot;</span> ) );</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t cut that.&quot;</span> ) );</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;        }</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;    }</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == it_pnt ) {</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classhacksaw__activity__actor.html">hacksaw_activity_actor</a>( pnt, <a class="code" href="classitem__location.html">item_location</a>{ *p, it } ) );</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classhacksaw__activity__actor.html">hacksaw_activity_actor</a>( pnt, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), it_pnt ) );</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;    }</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160; </div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;}</div>
<div class="ttc" id="aclasshacksaw__activity__actor_html"><div class="ttname"><a href="classhacksaw__activity__actor.html">hacksaw_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00177">activity_actor_definitions.h:178</a></div></div>
<div class="ttc" id="astructfurn__t_html_aa1dd5ea7a12aca533ba2be3d3d25f155"><div class="ttname"><a href="structfurn__t.html#aa1dd5ea7a12aca533ba2be3d3d25f155">furn_t::hacksaw</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_furn &gt; hacksaw</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00661">mapdata.h:661</a></div></div>
<div class="ttc" id="astructter__t_html_aee0f01130b6c748fc815cfe256eacceb"><div class="ttname"><a href="structter__t.html#aee0f01130b6c748fc815cfe256eacceb">ter_t::hacksaw</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_ter &gt; hacksaw</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00610">mapdata.h:610</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="mapdata_8h_source.html#l00610">ter_t::hacksaw</a>, <a class="el" href="mapdata_8h_source.html#l00661">furn_t::hacksaw</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="mapdata_8cpp_source.html#l00864">ter_t::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aba185eb2052400a70e1d7df0446927c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba185eb2052400a70e1d7df0446927c0">&#9670;&nbsp;</a></span>hairkit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;int&gt; iuse::hairkit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac2e14fe7af245b21ebec7f68bb1fadd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2e14fe7af245b21ebec7f68bb1fadd6">&#9670;&nbsp;</a></span>hammer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::hammer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02709">2709</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;{</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a1e61fe7c6df1284dc3fbe613c456ce8a">iuse::crowbar</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l02719">crowbar()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aba40ae64ce69ac474af2c3f93e6d9062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba40ae64ce69ac474af2c3f93e6d9062">&#9670;&nbsp;</a></span>hand_crank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::hand_crank </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04215">4215</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;{</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;        <span class="comment">// Long action</span></div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    }</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s not waterproof enough to work underwater.&quot;</span> ) );</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    }</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">get_sleepiness</a>() &gt;= <a class="code" href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">sleepiness_levels::DEAD_TIRED</a> ) {</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re too exhausted to keep cranking.&quot;</span> ) );</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    }</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <a class="code" href="classitem.html">item</a> *magazine = it-&gt;<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>();</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;    <span class="keywordflow">if</span>( magazine &amp;&amp; magazine-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a> ) ) {</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        <span class="comment">// 1600 minutes. It shouldn&#39;t ever run this long, but it&#39;s an upper bound.</span></div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        <span class="comment">// expectation is it runs until the player is too tired.</span></div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;        <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( 1600_minutes );</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a084b8b7138242ba272d566bf49d007c3">ammo_capacity</a>( <a class="code" href="iuse_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a> ) &gt; it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start cranking the %s to charge its %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>()-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a4e1de2690242373f2205a99a8d032098">ACT_HAND_CRANK</a>, moves, -1, 0, <span class="stringliteral">&quot;hand-cranking&quot;</span> );</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *p, it );</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You could use the %s to charge its %s, but it&#39;s already charged.&quot;</span> ),</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), magazine-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        }</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a rechargeable battery cell to charge.&quot;</span> ) );</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    }</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;}</div>
<div class="ttc" id="acharacter_8h_html_a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32"><div class="ttname"><a href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">sleepiness_levels::DEAD_TIRED</a></div><div class="ttdeci">@ DEAD_TIRED</div></div>
<div class="ttc" id="aclassCharacter_html_a241e50ee41a2a2b54f1c1329cb60a174"><div class="ttname"><a href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">Character::get_sleepiness</a></div><div class="ttdeci">int get_sleepiness() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04604">character.cpp:4604</a></div></div>
<div class="ttc" id="aclassitem_html_a084b8b7138242ba272d566bf49d007c3"><div class="ttname"><a href="classitem.html#a084b8b7138242ba272d566bf49d007c3">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity(const ammotype &amp;ammo, bool include_linked=false) const</div><div class="ttdoc">ammo capacity for a specific ammo</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10801">item.cpp:10801</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a159fec9d4d5f11fb2e74992e39f0b066"><div class="ttname"><a href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a></div><div class="ttdeci">const flag_id flag_RECHARGE(&quot;RECHARGE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a13798283d6d3fdd8f38838da9d52fd19"><div class="ttname"><a href="iuse_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a></div><div class="ttdeci">static const ammotype ammo_battery(&quot;battery&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a4e1de2690242373f2205a99a8d032098"><div class="ttname"><a href="iuse_8cpp.html#a4e1de2690242373f2205a99a8d032098">ACT_HAND_CRANK</a></div><div class="ttdeci">static const activity_id ACT_HAND_CRANK(&quot;ACT_HAND_CRANK&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#a4e1de2690242373f2205a99a8d032098">ACT_HAND_CRANK</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a13798283d6d3fdd8f38838da9d52fd19">ammo_battery</a>, <a class="el" href="item_8cpp_source.html#l10801">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">DEAD_TIRED</a>, <a class="el" href="flag_8cpp.html#a159fec9d4d5f11fb2e74992e39f0b066">flag_RECHARGE</a>, <a class="el" href="character_8cpp_source.html#l04604">Character::get_sleepiness()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l11207">item::magazine_current()</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a32100cdc409ab595ebbb4e5d2115883a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32100cdc409ab595ebbb4e5d2115883a">&#9670;&nbsp;</a></span>handle_ground_graffiti()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::handle_ground_graffiti </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04817">4817</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;{</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <a class="code" href="classstring__input__popup.html">string_input_popup</a> <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>;</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;    std::string <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;                          .description( prefix + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;(To delete, clear the text and confirm)&quot;</span> ) )</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;                          .text( here.<a class="code" href="classmap.html#a5ccfdc04bdc6f516d836502579aeac89">has_graffiti_at</a>( where ) ? here.<a class="code" href="classmap.html#ae074b6e1e06913bee442d894f590131f">graffiti_at</a>( where ) : std::string() )</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;                          .identifier( <span class="stringliteral">&quot;graffiti&quot;</span> )</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;                          .query_string();</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>.canceled() ) {</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    }</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160; </div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;    <span class="keywordtype">bool</span> grave = here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( where ) == <a class="code" href="iuse_8cpp.html#af5b9bfb065de2b72c50f7b5bb3f16793">ter_t_grave_new</a>;</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a>;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>.empty() ) {</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a5ccfdc04bdc6f516d836502579aeac89">has_graffiti_at</a>( where ) ) {</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;            <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 3 * here.<a class="code" href="classmap.html#ae074b6e1e06913bee442d894f590131f">graffiti_at</a>( where ).length();</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;            here.<a class="code" href="classmap.html#a024fc101274d566dd204484cc627dc0b">delete_graffiti</a>( where );</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;            <span class="keywordflow">if</span>( grave ) {</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;                p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You blur the inscription on the grave.&quot;</span> ) );</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;                p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You manage to get rid of the message on the surface.&quot;</span> ) );</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;            }</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;        }</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        here.<a class="code" href="classmap.html#adfdb43bc66ebe32a7a7cc4665b7786f8">set_graffiti</a>( where, <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> );</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;        <span class="keywordflow">if</span>( grave ) {</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;            p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You carve an inscription on the grave.&quot;</span> ) );</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;            p.<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You write a message on the surface.&quot;</span> ) );</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;        }</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;        <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = 2 * <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>.length();</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;    }</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;    p.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -move_cost );</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;    <span class="keywordflow">if</span>( it != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;    }</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a024fc101274d566dd204484cc627dc0b"><div class="ttname"><a href="classmap.html#a024fc101274d566dd204484cc627dc0b">map::delete_graffiti</a></div><div class="ttdeci">void delete_graffiti(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09167">map.cpp:9167</a></div></div>
<div class="ttc" id="aclassmap_html_a5ccfdc04bdc6f516d836502579aeac89"><div class="ttname"><a href="classmap.html#a5ccfdc04bdc6f516d836502579aeac89">map::has_graffiti_at</a></div><div class="ttdeci">bool has_graffiti_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09197">map.cpp:9197</a></div></div>
<div class="ttc" id="aclassmap_html_adfdb43bc66ebe32a7a7cc4665b7786f8"><div class="ttname"><a href="classmap.html#adfdb43bc66ebe32a7a7cc4665b7786f8">map::set_graffiti</a></div><div class="ttdeci">void set_graffiti(const tripoint &amp;p, const std::string &amp;contents)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09153">map.cpp:9153</a></div></div>
<div class="ttc" id="aclassmap_html_ae074b6e1e06913bee442d894f590131f"><div class="ttname"><a href="classmap.html#ae074b6e1e06913bee442d894f590131f">map::graffiti_at</a></div><div class="ttdeci">const std::string &amp; graffiti_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l09181">map.cpp:9181</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00048">string_input_popup.h:49</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_af5b9bfb065de2b72c50f7b5bb3f16793"><div class="ttname"><a href="iuse_8cpp.html#af5b9bfb065de2b72c50f7b5bb3f16793">ter_t_grave_new</a></div><div class="ttdeci">static const ter_str_id ter_t_grave_new(&quot;t_grave_new&quot;)</div></div>
<div class="ttc" id="anamespaceactivity__handlers_html_a88e87301f5548ff4bc7076a59fcde638"><div class="ttname"><a href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">activity_handlers::move_cost</a></div><div class="ttdeci">int move_cost(const item &amp;it, const tripoint_bub_ms &amp;src, const tripoint_bub_ms &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00538">activity_item_handling.cpp:538</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_a616ad2c7ee2eb002b683b41b04a888c1"><div class="ttname"><a href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">mapgen_defer::message</a></div><div class="ttdeci">static std::string message</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00632">mapgen.cpp:632</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="map_8cpp_source.html#l09167">map::delete_graffiti()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09181">map::graffiti_at()</a>, <a class="el" href="map_8cpp_source.html#l09197">map::has_graffiti_at()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mapgen_8cpp_source.html#l00632">mapgen_defer::message</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="map_8cpp_source.html#l09153">map::set_graffiti()</a>, <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>, and <a class="el" href="iuse_8cpp.html#af5b9bfb065de2b72c50f7b5bb3f16793">ter_t_grave_new</a>.</p>

<p class="reference">Referenced by <a class="el" href="construction_8cpp_source.html#l01406">construct::done_grave()</a>, <a class="el" href="iuse_8cpp_source.html#l04808">spray_can()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l01880">inscribe_actor::use()</a>.</p>

</div>
</div>
<a id="a75a6f2518410cd9fdba30e3051b3259c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75a6f2518410cd9fdba30e3051b3259c">&#9670;&nbsp;</a></span>heat_food()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::heat_food </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04901">4901</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;{</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().has_nearby_fire( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;        <a class="code" href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a>( *p );</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code" href="iuse_8cpp.html#aa9ea7a0d746861db71e7549c5186aa75">bio_tools</a> ) &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() &gt; 10_kJ &amp;&amp;</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;               <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no fire around; use your integrated toolset instead?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a>( *p ) ) {</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( -10_kJ );</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;        }</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to be next to a fire to heat something up with the %s.&quot;</span> ),</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    }</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a80c2755ef8fdaa6453eb935573a2d3e5"><div class="ttname"><a href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a></div><div class="ttdeci">static bool heat_item(Character &amp;p)</div><div class="ttdoc">Heats up a food item.</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04866">iuse.cpp:4866</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aa9ea7a0d746861db71e7549c5186aa75"><div class="ttname"><a href="iuse_8cpp.html#aa9ea7a0d746861db71e7549c5186aa75">bio_tools</a></div><div class="ttdeci">static const bionic_id bio_tools(&quot;bio_tools&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#aa9ea7a0d746861db71e7549c5186aa75">bio_tools</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l02824">Character::get_power_level()</a>, <a class="el" href="bionics_8cpp_source.html#l02658">Character::has_active_bionic()</a>, <a class="el" href="iuse_8cpp_source.html#l04866">heat_item()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="character_8cpp_source.html#l02852">Character::mod_power_level()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="af8a43dab57bdd3c8eee883fbabdcf3ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a43dab57bdd3c8eee883fbabdcf3ce">&#9670;&nbsp;</a></span>heatpack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::heatpack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04893">4893</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;{</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a>( *p ) ) {</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#ad0299bd5269b4deb3a5833a1a91f3afc">itype_heatpack_used</a>, p );</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;    }</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_ad0299bd5269b4deb3a5833a1a91f3afc"><div class="ttname"><a href="iuse_8cpp.html#ad0299bd5269b4deb3a5833a1a91f3afc">itype_heatpack_used</a></div><div class="ttdeci">static const itype_id itype_heatpack_used(&quot;heatpack_used&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="iuse_8cpp_source.html#l04866">heat_item()</a>, and <a class="el" href="iuse_8cpp.html#ad0299bd5269b4deb3a5833a1a91f3afc">itype_heatpack_used</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a52056abc483314816045ccf43bb5c1db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52056abc483314816045ccf43bb5c1db">&#9670;&nbsp;</a></span>honeycomb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::honeycomb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00478">478</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#a4417ea41f79e4b624612ae64ebac1d07">spawn_item</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="iuse_8cpp.html#aa1d7f6396d078e12885997a44118961d">itype_wax</a>, 2 );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_aa1d7f6396d078e12885997a44118961d"><div class="ttname"><a href="iuse_8cpp.html#aa1d7f6396d078e12885997a44118961d">itype_wax</a></div><div class="ttdeci">static const itype_id itype_wax(&quot;wax&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp.html#aa1d7f6396d078e12885997a44118961d">itype_wax</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, and <a class="el" href="map_8cpp_source.html#l05100">map::spawn_item()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae9c902b0f778f1f2fadb6913901398f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c902b0f778f1f2fadb6913901398f1">&#9670;&nbsp;</a></span>hotplate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::hotplate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04920">4920</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;{</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    }</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s batteries are dead.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;    }</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160; </div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a>( *p ) ) {</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;    }</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="iuse_8cpp_source.html#l04866">heat_item()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="afd2b57a28e228f3f3d4bc4ca35bb84b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2b57a28e228f3f3d4bc4ca35bb84b7">&#9670;&nbsp;</a></span>hotplate_atomic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::hotplate_atomic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04936">4936</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;{</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;    }</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a9815690a2df194d939616153ea4c60c3">itype_atomic_coffeepot</a> ) {</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;        <a class="code" href="iuse_8cpp.html#a80c2755ef8fdaa6453eb935573a2d3e5">heat_item</a>( *p );</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;    }</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160; </div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a9815690a2df194d939616153ea4c60c3"><div class="ttname"><a href="iuse_8cpp.html#a9815690a2df194d939616153ea4c60c3">itype_atomic_coffeepot</a></div><div class="ttdeci">static const itype_id itype_atomic_coffeepot(&quot;atomic_coffeepot&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="iuse_8cpp_source.html#l04866">heat_item()</a>, <a class="el" href="iuse_8cpp.html#a9815690a2df194d939616153ea4c60c3">itype_atomic_coffeepot</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a56237a295cef407df0c5d042a7f10ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56237a295cef407df0c5d042a7f10ea9">&#9670;&nbsp;</a></span>inhaler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::inhaler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01018">1018</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take a puff from your inhaler.&quot;</span> ),</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; takes a puff from their inhaler.&quot;</span> ) );</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a> ) ) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( -3 ); <span class="comment">// if we don&#39;t have asthma can be used as stimulant</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 20 ) ) {   <span class="comment">// with a small but significant risk of adverse reaction</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 2_minutes, 5_minutes ) );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ac463f5152e7c53eb06a46800211cb6ea">effect_took_antiasthmatic</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 6_hours, 12_hours ) );</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a> );</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a2dde49329eef942ec57d25db274942c0"><div class="ttname"><a href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a></div><div class="ttdeci">static const efftype_id effect_asthma(&quot;asthma&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac463f5152e7c53eb06a46800211cb6ea"><div class="ttname"><a href="iuse_8cpp.html#ac463f5152e7c53eb06a46800211cb6ea">effect_took_antiasthmatic</a></div><div class="ttdeci">static const efftype_id effect_took_antiasthmatic(&quot;took_antiasthmatic&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af1ff45b9c9d3bca1b10df53f444f2b09"><div class="ttname"><a href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a></div><div class="ttdeci">static const efftype_id effect_smoke_lungs(&quot;smoke_lungs&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a>, <a class="el" href="iuse_8cpp.html#acf409ab736a978a27fd03d8e155eeee5">effect_shakes</a>, <a class="el" href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a>, <a class="el" href="iuse_8cpp.html#ac463f5152e7c53eb06a46800211cb6ea">effect_took_antiasthmatic</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, and <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7eb8577a02113f71e59589690f2a9518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb8577a02113f71e59589690f2a9518">&#9670;&nbsp;</a></span>jackhammer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::jackhammer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03051">3051</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;{</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="comment">// use has_enough_charges to check for UPS availability</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="comment">// p is assumed to exist for iuse cases</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    }</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160; </div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iuse_8cpp.html#a6b98b4d9933c4af5150475b8c7f05b0d">dig_tool</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="iuse_8cpp.html#a14c5af3dcb69e85df7220ceaf63faae5">ACT_JACKHAMMER</a>,</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Drill where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t drill there.&quot;</span> ),</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start drilling into the %1$s with your %2$s.&quot;</span> ) );</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a14c5af3dcb69e85df7220ceaf63faae5"><div class="ttname"><a href="iuse_8cpp.html#a14c5af3dcb69e85df7220ceaf63faae5">ACT_JACKHAMMER</a></div><div class="ttdeci">static const activity_id ACT_JACKHAMMER(&quot;ACT_JACKHAMMER&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a6b98b4d9933c4af5150475b8c7f05b0d"><div class="ttname"><a href="iuse_8cpp.html#a6b98b4d9933c4af5150475b8c7f05b0d">dig_tool</a></div><div class="ttdeci">static std::optional&lt; int &gt; dig_tool(Character *p, item *it, const tripoint &amp;pos, const activity_id activity, const std::string &amp;prompt, const std::string &amp;fail, const std::string &amp;success, int extra_moves=0)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02980">iuse.cpp:2980</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#a14c5af3dcb69e85df7220ceaf63faae5">ACT_JACKHAMMER</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="iuse_8cpp_source.html#l02980">dig_tool()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aaed245dbdf2a98482598ee81194f54c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed245dbdf2a98482598ee81194f54c2">&#9670;&nbsp;</a></span>jet_injector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::jet_injector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05051">5051</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;{</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The jet injector is empty.&quot;</span> ) );</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inject yourself with the jet injector.&quot;</span> ) );</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;        <span class="comment">// Intensity is 2 here because intensity = 1 is the comedown</span></div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#aafcb720ac4a196206c7053dc1dec4025">effect_jetinjector</a>, 20_minutes, <span class="keyword">false</span>, 2 );</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 20 );</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( 10 );</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7a558a2455f552673b825e3ad2e0fd4">healall</a>( 20 );</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;    }</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160; </div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#aafcb720ac4a196206c7053dc1dec4025">effect_jetinjector</a> ) ) {</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#aafcb720ac4a196206c7053dc1dec4025">effect_jetinjector</a> ) &gt; 20_minutes ) {</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your heart is beating alarmingly fast!&quot;</span> ) );</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;        }</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    }</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a9790ad52dd6dfc8fd6c615ed994f8105"><div class="ttname"><a href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">Character::mod_painkiller</a></div><div class="ttdeci">void mod_painkiller(int npkill)</div><div class="ttdoc">Modifies intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09818">character.cpp:9818</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac840406f65172cadd93d4274ddd78e15"><div class="ttname"><a href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">Character::mod_stim</a></div><div class="ttdeci">void mod_stim(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06752">character.cpp:6752</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae7a558a2455f552673b825e3ad2e0fd4"><div class="ttname"><a href="classCharacter.html#ae7a558a2455f552673b825e3ad2e0fd4">Character::healall</a></div><div class="ttdeci">void healall(int dam)</div><div class="ttdoc">Heals all body parts for dam.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08427">character.cpp:8427</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aafcb720ac4a196206c7053dc1dec4025"><div class="ttname"><a href="iuse_8cpp.html#aafcb720ac4a196206c7053dc1dec4025">effect_jetinjector</a></div><div class="ttdeci">static const efftype_id effect_jetinjector(&quot;jetinjector&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="iuse_8cpp.html#aafcb720ac4a196206c7053dc1dec4025">effect_jetinjector</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l08427">Character::healall()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="character_8cpp_source.html#l09818">Character::mod_painkiller()</a>, and <a class="el" href="character_8cpp_source.html#l06752">Character::mod_stim()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3dfb3b5e80488c39c6214ebbbdde59a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dfb3b5e80488c39c6214ebbbdde59a1">&#9670;&nbsp;</a></span>lumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::lumber </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04491">4491</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;{</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action lumber that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    }</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    }</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    <span class="comment">// Check if player is standing on any lumber</span></div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> &amp;i : here.<a class="code" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;        <span class="keywordflow">if</span>( i.typeId() == <a class="code" href="iuse_8cpp.html#acc460662ddee537de32b9aa08feb81f1">itype_log</a> ) {</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;            here.<a class="code" href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">i_rem</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), &amp;i );</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;            <a class="code" href="namespaceiuse.html#a33c918bef9271c1ce52f049bffb28596">cut_log_into_planks</a>( *p );</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        }</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    }</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160; </div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;    <span class="comment">// If the player is not standing on a log, check inventory</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;    <a class="code" href="classavatar.html">avatar</a> *you = p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>();</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc;</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;    <span class="keyword">auto</span> <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#acc460662ddee537de32b9aa08feb81f1">itype_log</a>;</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    };</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    <span class="keywordflow">if</span>( you != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;        loc = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>( filter, *you, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cut up what?&quot;</span> ) );</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;    }</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160; </div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;    }</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( &amp;*loc );</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    <a class="code" href="namespaceiuse.html#a33c918bef9271c1ce52f049bffb28596">cut_log_into_planks</a>( *p );</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_ab075f4bc498a7cbf386b8f53b86b017d"><div class="ttname"><a href="classmap.html#ab075f4bc498a7cbf386b8f53b86b017d">map::i_rem</a></div><div class="ttdeci">map_stack::iterator i_rem(const tripoint &amp;p, const map_stack::const_iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05001">map.cpp:5001</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_acc460662ddee537de32b9aa08feb81f1"><div class="ttname"><a href="iuse_8cpp.html#acc460662ddee537de32b9aa08feb81f1">itype_log</a></div><div class="ttdeci">static const itype_id itype_log(&quot;log&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a33c918bef9271c1ce52f049bffb28596"><div class="ttname"><a href="namespaceiuse.html#a33c918bef9271c1ce52f049bffb28596">iuse::cut_log_into_planks</a></div><div class="ttdeci">void cut_log_into_planks(Character &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04479">iuse.cpp:4479</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="iuse_8cpp_source.html#l04479">cut_log_into_planks()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l04978">map::i_at()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00433">Character::i_rem()</a>, <a class="el" href="map_8cpp_source.html#l05001">map::i_rem()</a>, <a class="el" href="iuse_8cpp.html#acc460662ddee537de32b9aa08feb81f1">itype_log</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1a3c9103d99033e7a245d1c3b0d5cf3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a3c9103d99033e7a245d1c3b0d5cf3a">&#9670;&nbsp;</a></span>lux_meter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::lux_meter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07870">7870</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;{</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The illumination is %.1f.&quot;</span> ),</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;                          <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;natural_light_level( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>.z ) );</div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160; </div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;    <span class="keywordflow">return</span> it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>();</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;}</div>
<div class="ttc" id="astructitype_html_a953828c9c01185fef0f619ecdcd7f3b1"><div class="ttname"><a href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">itype::charges_to_use</a></div><div class="ttdeci">int charges_to_use() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00139">itype.cpp:139</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="itype_8cpp_source.html#l00139">itype::charges_to_use()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ab50bfd66f72ec01f785e1be5965da498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50bfd66f72ec01f785e1be5965da498">&#9670;&nbsp;</a></span>ma_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::ma_manual </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02692">2692</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;{</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="comment">// [CR] - should NPCs just be allowed to learn this stuff? Just like that?</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">matype_id</a> style_to_learn = <a class="code" href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a>( *it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keywordflow">if</span>( !style_to_learn.<a class="code" href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">is_valid</a>() ) {</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;ERROR: Invalid martial art&quot;</span> );</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    }</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160; </div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;learn_style( style_to_learn, p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() );</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02724">character.h:2724</a></div></div>
<div class="ttc" id="aclassstring__id_html_a8ca0e76fa665125f1e50bd1ed8dbd213"><div class="ttname"><a href="classstring__id.html#a8ca0e76fa665125f1e50bd1ed8dbd213">string_id::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">Returns whether this id is valid, that means whether it refers to an existing object.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00078">achievement.cpp:78</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_ad99254fef8817d713c1577c9f7021eb0"><div class="ttname"><a href="martialarts_8cpp.html#ad99254fef8817d713c1577c9f7021eb0">martial_art_learned_from</a></div><div class="ttdeci">matype_id martial_art_learned_from(const itype &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00109">martialarts.cpp:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="achievement_8cpp_source.html#l00078">string_id&lt; T &gt;::is_valid()</a>, <a class="el" href="martialarts_8cpp_source.html#l00109">martial_art_learned_from()</a>, <a class="el" href="character_8h_source.html#l02724">Character::martial_arts_data</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa21df22da742ffa9539caacc95c9357f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21df22da742ffa9539caacc95c9357f">&#9670;&nbsp;</a></span>mace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02295">2295</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;{</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="comment">// If anyone other than the player wants to use one of these,</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="comment">// they&#39;re going to need to figure out how to aim it.</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; dest_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spray where?&quot;</span> ) );</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordflow">if</span>( !dest_ ) {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> dest = *dest_;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( dest, <a class="code" href="field__type_8cpp.html#ab8075375efc414fc22e3589b0b165b9d">fd_tear_gas</a>, 2, 3_turns );</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160; </div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="comment">// Also spray monsters in that tile.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon_ptr = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().creature_at&lt;monster&gt;( dest, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <a class="code" href="classmonster.html">monster</a> &amp;critter = *mon_ptr;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        critter.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordtype">bool</span> blind = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; critter.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a0f90cef22d42e0b8c911e8d289e1a10e">mon_flag_SEES</a> ) ) {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            blind = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            critter.<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1_minutes, 2_minutes ) );</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <span class="comment">// even if it&#39;s not blinded getting maced hurts a lot and stuns it</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="keywordflow">if</span>( !critter.<a class="code" href="classmonster.html#a43202b3e829143741862e0f5f1e826a7">has_flag</a>( <a class="code" href="mtype_8cpp.html#a4c417260415c080a792537389ec1c0fe">mon_flag_NO_BREATHE</a> ) ) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            critter.<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 3_seconds ) );</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s recoils in pain!&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <a class="code" href="classviewer.html">viewer</a> &amp;player_view = <a class="code" href="game_8cpp.html#ab5c977b7e81348725fb7bf09fc64ed95">get_player_view</a>();</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <span class="keywordflow">if</span>( player_view.<a class="code" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">sees</a>( critter ) ) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s is sprayed!&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            <span class="keywordflow">if</span>( blind ) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s looks blinded.&quot;</span> ), critter.<a class="code" href="classmonster.html#a7cb9d9786d11c2c0926d3482d3f51ffe">name</a>() );</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160; </div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;}</div>
<div class="ttc" id="afield__type_8cpp_html_ab8075375efc414fc22e3589b0b165b9d"><div class="ttname"><a href="field__type_8cpp.html#ab8075375efc414fc22e3589b0b165b9d">fd_tear_gas</a></div><div class="ttdeci">const field_type_str_id fd_tear_gas(&quot;fd_tear_gas&quot;)</div></div>
<div class="ttc" id="amtype_8cpp_html_a4c417260415c080a792537389ec1c0fe"><div class="ttname"><a href="mtype_8cpp.html#a4c417260415c080a792537389ec1c0fe">mon_flag_NO_BREATHE</a></div><div class="ttdeci">mon_flag_id mon_flag_NO_BREATHE</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00116">mtype.cpp:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="iuse_8cpp.html#a09e952ef4d27618e2f60ec737a8d1bae">effect_blind</a>, <a class="el" href="field__type_8cpp.html#ab8075375efc414fc22e3589b0b165b9d">fd_tear_gas</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13812">get_player_view()</a>, <a class="el" href="monster_8cpp_source.html#l01202">monster::has_flag()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mtype_8cpp_source.html#l00116">mon_flag_NO_BREATHE</a>, <a class="el" href="mtype_8cpp_source.html#l00143">mon_flag_SEES</a>, <a class="el" href="monster_8cpp_source.html#l00722">monster::name()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="classviewer.html#a204fe140cdc73d2452fa9a390a32ba29">viewer::sees()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8e388ce3877e20825c96f507fa18c302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e388ce3877e20825c96f507fa18c302">&#9670;&nbsp;</a></span>magic_8_ball()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::magic_8_ball </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08450">8450</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;{</div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You ask the %s, then flip it.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;    <span class="keywordtype">int</span> rn = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 3 );</div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;    std::string msg_category;</div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;    <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096e">game_message_type</a> <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>;</div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;    <span class="keywordflow">if</span>( rn == 0 ) {</div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;        msg_category = <span class="stringliteral">&quot;magic_8ball_bad&quot;</span>;</div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>;</div>
<div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rn == 1 ) {</div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;        msg_category = <span class="stringliteral">&quot;magic_8ball_unknown&quot;</span>;</div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>;</div>
<div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;        msg_category = <span class="stringliteral">&quot;magic_8ball_good&quot;</span>;</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;        <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>;</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;    }</div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s says: %s&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;                          <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( msg_category ).value_or( <a class="code" href="classtranslation.html">translation</a>() ) );</div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;}</div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096e"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096e">game_message_type</a></div><div class="ttdeci">game_message_type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00346">enums.h:346</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l07018">item::color()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="text__snippets_8cpp_source.html#l00286">snippet_library::random_from_category()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a0bfe213300c4138b64eb22f5f068f094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bfe213300c4138b64eb22f5f068f094">&#9670;&nbsp;</a></span>makemound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::makemound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02795">2795</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;{</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action makemound that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    }</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    }</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Till soil where?&quot;</span> ) );</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    }</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> pnt = *pnt_;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You think about jumping on a shovel, but then change your mind.&quot;</span> ) );</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    }</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f">ter_furn_flag::TFLAG_PLOWABLE</a>, pnt ) &amp;&amp;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">ter_furn_flag::TFLAG_PLANT</a>, pnt ) ) {</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start churning up the earth here.&quot;</span> ) );</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classchurn__activity__actor.html">churn_activity_actor</a>( 18000, <a class="code" href="classitem__location.html">item_location</a>( *p, it ) ) );</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#ace15a2f5a970ee2cdb53e5ded21d08a2">placement</a> = here.<a class="code" href="classmap.html#ac868b594b36b6b9bbcb130650fd4f61f">getglobal</a>( pnt );</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t churn up this ground.&quot;</span> ) );</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;}</div>
<div class="ttc" id="aclasschurn__activity__actor_html"><div class="ttname"><a href="classchurn__activity__actor.html">churn_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01886">activity_actor_definitions.h:1887</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f">ter_furn_flag::TFLAG_PLOWABLE</a></div><div class="ttdeci">@ TFLAG_PLOWABLE</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">ter_furn_flag::TFLAG_PLANT</a></div><div class="ttdeci">@ TFLAG_PLANT</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l09625">map::getglobal()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00068">player_activity::placement</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ae5766475d1ced54289ab8c1a4495338d">TFLAG_PLANT</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a221159541bad30f18e428846bfde438f">TFLAG_PLOWABLE</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3baef8958ce46cb42bb162f3c5bff2f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3baef8958ce46cb42bb162f3c5bff2f1">&#9670;&nbsp;</a></span>manage_exosuit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::manage_exosuit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02339">2339</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;{</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    }</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">get_all_contained_pockets</a>().empty() ) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s does not have any pockets to contain modules.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    }</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -<a class="code" href="classexosuit__interact.html#a9ea217e9386df1e1a1eecf9eef855680">exosuit_interact::run</a>( it ) );</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div>
<div class="ttc" id="aclassexosuit__interact_html_a9ea217e9386df1e1a1eecf9eef855680"><div class="ttname"><a href="classexosuit__interact.html#a9ea217e9386df1e1a1eecf9eef855680">exosuit_interact::run</a></div><div class="ttdeci">static int run(item *it)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01976">iuse.cpp:1976</a></div></div>
<div class="ttc" id="aclassitem_html_a6047039a5b290b71d4a2f8c9f0b8c364"><div class="ttname"><a href="classitem.html#a6047039a5b290b71d4a2f8c9f0b8c364">item::get_all_contained_pockets</a></div><div class="ttdeci">std::vector&lt; const item_pocket * &gt; get_all_contained_pockets() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09701">item.cpp:9701</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="item_8cpp_source.html#l09701">item::get_all_contained_pockets()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="iuse_8cpp_source.html#l01976">exosuit_interact::run()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a541feee13557661664abb151898dd8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541feee13557661664abb151898dd8dd">&#9670;&nbsp;</a></span>marloss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::marloss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01383">1383</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;{</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a65cf42f2a84e4b46b7c9b1ccf16c21db">marloss_prevented</a>( *p ) ) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">event_type::consumes_marloss_item</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="iuse_8cpp.html#a0b6e1c4c8ea5c351d78cf084c46857ce">marloss_common</a>( *p, *it, <a class="code" href="iuse_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a> );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_adb54bdcb284abb66b6be99c8ae225065"><div class="ttname"><a href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">Character::getID</a></div><div class="ttdeci">character_id getID() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00652">character.cpp:652</a></div></div>
<div class="ttc" id="aclassevent__bus_html_ab753616a3a663185377ac52560068194"><div class="ttname"><a href="classevent__bus.html#ab753616a3a663185377ac52560068194">event_bus::send</a></div><div class="ttdeci">void send(const cata::event &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="event__bus_8cpp_source.html#l00072">event_bus.cpp:72</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">event_type::consumes_marloss_item</a></div><div class="ttdeci">@ consumes_marloss_item</div></div>
<div class="ttc" id="aevent__bus_8h_html_a4f760194b9225ccf92a1419748def636"><div class="ttname"><a href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a></div><div class="ttdeci">event_bus &amp; get_event_bus()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13832">game.cpp:13832</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a0b6e1c4c8ea5c351d78cf084c46857ce"><div class="ttname"><a href="iuse_8cpp.html#a0b6e1c4c8ea5c351d78cf084c46857ce">marloss_common</a></div><div class="ttdeci">static void marloss_common(Character &amp;p, item &amp;it, const trait_id &amp;current_color)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01239">iuse.cpp:1239</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a65cf42f2a84e4b46b7c9b1ccf16c21db"><div class="ttname"><a href="iuse_8cpp.html#a65cf42f2a84e4b46b7c9b1ccf16c21db">marloss_prevented</a></div><div class="ttdeci">static bool marloss_prevented(const Character &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01363">iuse.cpp:1363</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a9ed97178aef2274e9fdb82feeda84b3a"><div class="ttname"><a href="iuse_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_MARLOSS(&quot;MARLOSS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">consumes_marloss_item</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="iuse_8cpp_source.html#l01239">marloss_common()</a>, <a class="el" href="iuse_8cpp_source.html#l01363">marloss_prevented()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="iuse_8cpp.html#a9ed97178aef2274e9fdb82feeda84b3a">trait_MARLOSS</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7b5fe1d8d9efeb8329b859fa8271327d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5fe1d8d9efeb8329b859fa8271327d">&#9670;&nbsp;</a></span>marloss_gel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::marloss_gel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01412">1412</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;{</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a65cf42f2a84e4b46b7c9b1ccf16c21db">marloss_prevented</a>( *p ) ) {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">event_type::consumes_marloss_item</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <a class="code" href="iuse_8cpp.html#a0b6e1c4c8ea5c351d78cf084c46857ce">marloss_common</a>( *p, *it, <a class="code" href="iuse_8cpp.html#ac6e886f6e3b4c3257b9d06df920e79b4">trait_MARLOSS_YELLOW</a> );</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_ac6e886f6e3b4c3257b9d06df920e79b4"><div class="ttname"><a href="iuse_8cpp.html#ac6e886f6e3b4c3257b9d06df920e79b4">trait_MARLOSS_YELLOW</a></div><div class="ttdeci">static const trait_id trait_MARLOSS_YELLOW(&quot;MARLOSS_YELLOW&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">consumes_marloss_item</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="iuse_8cpp_source.html#l01239">marloss_common()</a>, <a class="el" href="iuse_8cpp_source.html#l01363">marloss_prevented()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="iuse_8cpp.html#ac6e886f6e3b4c3257b9d06df920e79b4">trait_MARLOSS_YELLOW</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="abc44b17e87ebda604c17412017ec34de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc44b17e87ebda604c17412017ec34de">&#9670;&nbsp;</a></span>marloss_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::marloss_seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01395">1395</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to eat the %s?  You could plant it in a mound of dirt.&quot;</span> ),</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                   <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), it-&gt;<a class="code" href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">color_in_inventory</a>() ) ) ) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">return</span> std::nullopt; <span class="comment">// Save the seed for later!</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a65cf42f2a84e4b46b7c9b1ccf16c21db">marloss_prevented</a>( *p ) ) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">event_type::consumes_marloss_item</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(), it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() );</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="iuse_8cpp.html#a0b6e1c4c8ea5c351d78cf084c46857ce">marloss_common</a>( *p, *it, <a class="code" href="iuse_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a> );</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a2e1ea4d40574ffdce04aa81eb128dca9"><div class="ttname"><a href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">item::color_in_inventory</a></div><div class="ttdeci">nc_color color_in_inventory(const Character *ch=nullptr) const</div><div class="ttdoc">Returns the color of the item depending on usefulness for the player character, e....</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06298">item.cpp:6298</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ace9d1890ec80f6dd15d66b99f6d30d2e"><div class="ttname"><a href="iuse_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a></div><div class="ttdeci">static const trait_id trait_MARLOSS_BLUE(&quot;MARLOSS_BLUE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8cpp_source.html#l06298">item::color_in_inventory()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731aa835727151122744039a6355de038e38">consumes_marloss_item</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="iuse_8cpp_source.html#l01239">marloss_common()</a>, <a class="el" href="iuse_8cpp_source.html#l01363">marloss_prevented()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#ace9d1890ec80f6dd15d66b99f6d30d2e">trait_MARLOSS_BLUE</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a802d0cd933f590e71bc0a03612544d9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802d0cd933f590e71bc0a03612544d9a">&#9670;&nbsp;</a></span>measure_resonance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::measure_resonance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08471">8471</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;{</div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The device doesn&#39;t have enough power to function!&quot;</span> ) );</div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;    }</div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;    <span class="comment">// Get a list of resonant artifacts to show the player.</span></div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;    std::vector&lt;uilist_entry&gt; uile;</div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;    std::vector&lt;item_location&gt; artifacts;</div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp;item_loc : p-&gt;<a class="code" href="classCharacter.html#a1624f2527b544f78f2f9c3c11771fba6">all_items_loc</a>() ) {</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;        <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *tested_item = item_loc.get_item();</div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;        <span class="keywordflow">if</span>( !tested_item-&gt;<a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">get_proc_enchantments</a>().empty() ) {</div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;            <span class="comment">// We&#39;ve found an item with an enchantment. This doesn&#39;t guarantee it is an artifact! Prune the list to only items with resonance</span></div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;            <span class="keywordtype">bool</span> is_resonant_artifact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;maybe_artifact : tested_item-&gt;<a class="code" href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">get_proc_enchantments</a>() ) {</div>
<div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;                <span class="keywordflow">if</span>( maybe_artifact.get_value_add( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a38919b1f079754f5fdd63ac54484805e">enchant_vals::mod::ARTIFACT_RESONANCE</a> ) ) {</div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;                    <span class="comment">// Found an artifact with resonance!</span></div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;                    is_resonant_artifact = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;                }</div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;            }</div>
<div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;            <span class="keywordflow">if</span>( is_resonant_artifact ) {</div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;                <span class="comment">// Return tname, should handle renamed artifacts?</span></div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;                <a class="code" href="structuilist__entry.html">uilist_entry</a> entry( i, <span class="keyword">true</span>, i + 49, item_loc.get_item()-&gt;tname() );</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;                uile.emplace_back( entry );</div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;                artifacts.emplace_back( item_loc );</div>
<div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160;                i++;</div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;            }</div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;        }</div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;    }</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160; </div>
<div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;    <span class="keywordflow">if</span>( artifacts.empty() ) {</div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The device indicates none of the items on your person resonate with registered nether phenomena.&quot;</span> ) );</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;        <span class="comment">// Explicitly no cost for passive detection</span></div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;    }</div>
<div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;    <span class="keywordtype">int</span> choice = 0;</div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;    choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The device found these items have resonant properties.\nChoose one to scan.&quot;</span> ),</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;                     uile );</div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160; </div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( choice ) &gt;= artifacts.size() ) {</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;        <span class="comment">// Player exited menu. No cost, return early.</span></div>
<div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;    }</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160; </div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;    <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Calculating.&quot;</span> ) );</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;    <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Calculating&quot;</span> ) );</div>
<div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;    <span class="keywordtype">int</span> actual_resonance = 0;</div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;    <span class="comment">// Add up the resonance of all the enchantments on the selected item to get the item&#39;s total resonance</span></div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classenchant__cache.html">enchant_cache</a> &amp;this_ench : artifacts.at( choice ).get_item()-&gt;get_proc_enchantments() ) {</div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;        actual_resonance += this_ench.get_value_add( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a38919b1f079754f5fdd63ac54484805e">enchant_vals::mod::ARTIFACT_RESONANCE</a> );</div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;    }</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;    <span class="comment">// Random 15% +- on the detection, no freebies here.</span></div>
<div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;    <span class="keywordtype">int</span> resonance_offset_low = 0.85 * actual_resonance;</div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;    <span class="keywordtype">int</span> resonance_offset_high = 1.15 * actual_resonance;</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;    <span class="keywordtype">int</span> detected_resonance = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( resonance_offset_low, resonance_offset_high );</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;    <span class="comment">// Different messages for different resonance levels? Dangerous resonance levels are in suffer::from_artifact_resonance</span></div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;    <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Detected resonance approximately equal to %i units.&quot;</span> ), detected_resonance );</div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160; </div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">consume_charges</a>( *it, it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a953828c9c01185fef0f619ecdcd7f3b1">charges_to_use</a>() );</div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_minutes ) );</div>
<div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160; </div>
<div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160; </div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1624f2527b544f78f2f9c3c11771fba6"><div class="ttname"><a href="classCharacter.html#a1624f2527b544f78f2f9c3c11771fba6">Character::all_items_loc</a></div><div class="ttdeci">std::vector&lt; item_location &gt; all_items_loc()</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00513">character_inventory.cpp:513</a></div></div>
<div class="ttc" id="aclassCharacter_html_a440c45f92704e6fe31024a90f10ac9c1"><div class="ttname"><a href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">Character::consume_charges</a></div><div class="ttdeci">bool consume_charges(item &amp;used, int qty)</div><div class="ttdoc">Consume charges of a tool or comestible item, potentially destroying it in the process.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07239">character.cpp:7239</a></div></div>
<div class="ttc" id="aclassenchant__cache_html"><div class="ttname"><a href="classenchant__cache.html">enchant_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00280">magic_enchantment.h:281</a></div></div>
<div class="ttc" id="aclassitem_html_ac9312acb1a0cd7c9b033d6df91b97a29"><div class="ttname"><a href="classitem.html#ac9312acb1a0cd7c9b033d6df91b97a29">item::get_proc_enchantments</a></div><div class="ttdeci">std::vector&lt; enchant_cache &gt; get_proc_enchantments() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09994">item.cpp:9994</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a38919b1f079754f5fdd63ac54484805e"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a38919b1f079754f5fdd63ac54484805e">enchant_vals::mod::ARTIFACT_RESONANCE</a></div><div class="ttdeci">@ ARTIFACT_RESONANCE</div></div>
<div class="ttc" id="astructuilist__entry_html"><div class="ttname"><a href="structuilist__entry.html">uilist_entry</a></div><div class="ttdoc">uilist_entry: entry line for uilist</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00059">ui.h:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character__inventory_8cpp_source.html#l00513">Character::all_items_loc()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a38919b1f079754f5fdd63ac54484805e">enchant_vals::ARTIFACT_RESONANCE</a>, <a class="el" href="itype_8cpp_source.html#l00139">itype::charges_to_use()</a>, <a class="el" href="character_8cpp_source.html#l07239">Character::consume_charges()</a>, <a class="el" href="item_8cpp_source.html#l09994">item::get_proc_enchantments()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5a8b1f1817669ffe1b630a978e890b5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a8b1f1817669ffe1b630a978e890b5a">&#9670;&nbsp;</a></span>meditate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::meditate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00929">929</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;{</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action meditate that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a> ) ) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classmeditate__activity__actor.html">meditate_activity_actor</a>() );</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This %s probably meant a lot to someone at one time.&quot;</span> ),</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="ttc" id="aclassmeditate__activity__actor_html"><div class="ttname"><a href="classmeditate__activity__actor.html">meditate_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01416">activity_actor_definitions.h:1417</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9789e53daad301d30ace1ac055f05f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9789e53daad301d30ace1ac055f05f4d">&#9670;&nbsp;</a></span>melatonin_tablet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::melatonin_tablet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08384">8384</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;{</div>
<div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pop a %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#ab4221c2946f18438531a405fc7c21052">effect_melatonin</a> ) ) {</div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Simply taking more melatonin won&#39;t help.  You have to go to sleep for it to work.&quot;</span> ) );</div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;    }</div>
<div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ab4221c2946f18438531a405fc7c21052">effect_melatonin</a>, 16_hours );</div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_ab4221c2946f18438531a405fc7c21052"><div class="ttname"><a href="iuse_8cpp.html#ab4221c2946f18438531a405fc7c21052">effect_melatonin</a></div><div class="ttdeci">static const efftype_id effect_melatonin(&quot;melatonin&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#ab4221c2946f18438531a405fc7c21052">effect_melatonin</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

</div>
</div>
<a id="af8ddca8d934da5ae1ffbf496ea2b02f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ddca8d934da5ae1ffbf496ea2b02f5">&#9670;&nbsp;</a></span>meth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::meth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength reduces duration of meth Maximum Strength &gt;4 experiences less hunger benefit from meth 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00850">850</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">    /** @EFFECT_STR reduces duration of meth */</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> duration = 1_minutes * ( 60 - p-&gt;<a class="code" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> );</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iuse_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a>, 1 ) &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a8a33b517f5d4f8a85c83a71a3bc8cdaf">use_charges_if_avail</a>( <a class="code" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 ) ) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You smoke your meth.&quot;</span> ) );</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The world seems to sharpen.&quot;</span> ) );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( -375 );</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a> ) ) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            duration *= 1.2;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            duration *= ( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a> ) ? 1.8 : 1.5 );</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="comment">// breathe out some smoke</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 3; i++ ) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <a class="code" href="structpoint.html">point</a> offset( <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 ), <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 ) );</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( p-&gt;<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>() + offset, <a class="code" href="classint__id.html">field_type_id</a>( <span class="stringliteral">&quot;fd_methsmoke&quot;</span> ), 2 );</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You snort some crystal meth.&quot;</span> ) );</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( -300 );</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a> ) ) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        duration += 1_hours;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span>( duration &gt; 0_turns ) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// meth actually inhibits hunger, weaker characters benefit more</span><span class="comment"></span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">        /** @EFFECT_STR_MAX &gt;4 experiences less hunger benefit from meth */</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordtype">int</span> hungerpen = p-&gt;<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> &lt; 5 ? 35 : 40 - ( 2 * p-&gt;<a class="code" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> );</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">if</span>( hungerpen &gt; 0 ) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( -hungerpen );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a>, duration );</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_af7172e571c5c69240d9f71a01fddf035"><div class="ttname"><a href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">Creature::pos_bub</a></div><div class="ttdeci">tripoint_bub_ms pos_bub() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00183">creature.cpp:183</a></div></div>
<div class="ttc" id="aclassvisitable_html_aa199bd0ea7a41c50a2de5761dd987338"><div class="ttname"><a href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">visitable::has_amount</a></div><div class="ttdeci">bool has_amount(const itype_id &amp;what, int qty, bool pseudo, const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l01018">visitable.cpp:1018</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a5ba3e18250fa524fe8548fa0a1e98535"><div class="ttname"><a href="iuse_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a></div><div class="ttdeci">static const efftype_id effect_meth(&quot;meth&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af39b0184e307d15344e6631cd30c479e"><div class="ttname"><a href="iuse_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a></div><div class="ttdeci">static const itype_id itype_apparatus(&quot;apparatus&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="iuse_8cpp.html#af39b0184e307d15344e6631cd30c479e">itype_apparatus</a>, <a class="el" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="character_8cpp_source.html#l04486">Character::mod_hunger()</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="character_8h_source.html#l00577">Character::str_cur</a>, <a class="el" href="character_8h_source.html#l00572">Character::str_max</a>, <a class="el" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a>, <a class="el" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a>, and <a class="el" href="character_8cpp_source.html#l09633">Character::use_charges_if_avail()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a029973f78948208bf9cb17090a778fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029973f78948208bf9cb17090a778fa7">&#9670;&nbsp;</a></span>mininuke()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mininuke </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03544">3544</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;{</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="keywordtype">int</span> time;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="keywordtype">bool</span> got_value = <a class="code" href="output_8cpp.html#a50bf918604539ddd8b2204e5df918dc9">query_int</a>( time, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set the timer to ___ turns (0 to cancel)?&quot;</span> ) );</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <span class="keywordflow">if</span>( !got_value || time &lt;= 0 ) {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You set the timer to %s.&quot;</span> ),</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                          <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( <a class="code" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( time ) ) );</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a913e44b8d4d2273f958054ef6975d65a">event_type::activates_mininuke</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() );</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a>, p );</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    it-&gt;<a class="code" href="classitem.html#aa7f4a67b2a035ea80827211cda4cb590">countdown_point</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + <a class="code" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( time );</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;}</div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a913e44b8d4d2273f958054ef6975d65a"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a913e44b8d4d2273f958054ef6975d65a">event_type::activates_mininuke</a></div><div class="ttdeci">@ activates_mininuke</div></div>
<div class="ttc" id="aiuse_8cpp_html_af15dda390fbc6ecaba6fa78540d00487"><div class="ttname"><a href="iuse_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a></div><div class="ttdeci">static const itype_id itype_mininuke_act(&quot;mininuke_act&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a913e44b8d4d2273f958054ef6975d65a">activates_mininuke</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8h_source.html#l03145">item::countdown_point</a>, <a class="el" href="calendar_8h_source.html#l00229">time_duration::from_seconds()</a>, <a class="el" href="calendar_8h_source.html#l00221">time_duration::from_turns()</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="iuse_8cpp.html#af15dda390fbc6ecaba6fa78540d00487">itype_mininuke_act</a>, <a class="el" href="output_8cpp_source.html#l00880">query_int()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="explosion_8cpp_source.html#l00804">explosion_handler::nuke()</a>.</p>

</div>
</div>
<a id="a83a5c5c31578c093c0de96c98f6e4193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83a5c5c31578c093c0de96c98f6e4193">&#9670;&nbsp;</a></span>molotov_lit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::molotov_lit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03464">3464</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;{</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160; </div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        <span class="comment">// It was thrown or dropped, so burst into flames</span></div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pt : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 1, 0 ) ) {</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a> = 1 + <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) + <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 );</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            here.<a class="code" href="classmap.html#a32a9de57ddea3145ca42e6acfde7f3d6">add_field</a>( pt, <a class="code" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="code" href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a> );</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;        }</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;        <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.has_trait( <a class="code" href="iuse_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a> ) &amp;&amp; <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.sees( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;            <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.add_morale( <a class="code" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, 15, 15, 8_hours, 6_hours );</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;            <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.rem_morale( <a class="code" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a> );</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Fire  Good&quot;</span> ) );</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        }</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    }</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160; </div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="comment">// 20% chance of going out harmlessly.</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your lit Molotov goes out.&quot;</span> ) );</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a179150155224ba5af2768f5cea703e4c">itype_molotov</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    }</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;}</div>
<div class="ttc" id="acreature_8h_html_a299ec0c42ccc5a2d79d1739428ac3210"><div class="ttname"><a href="creature_8h.html#a299ec0c42ccc5a2d79d1739428ac3210">intensity</a></div><div class="ttdeci">int intensity</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00240">creature.h:240</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a179150155224ba5af2768f5cea703e4c"><div class="ttname"><a href="iuse_8cpp.html#a179150155224ba5af2768f5cea703e4c">itype_molotov</a></div><div class="ttdeci">static const itype_id itype_molotov(&quot;molotov&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="map_8cpp_source.html#l06563">map::add_field()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="field__type_8cpp.html#a0090428c1f6724209c133c6b04b037cd">fd_fire</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8h_source.html#l00240">intensity</a>, <a class="el" href="iuse_8cpp.html#a179150155224ba5af2768f5cea703e4c">itype_molotov</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a>, <a class="el" href="morale__types_8cpp.html#a7a7fa39cff1d7efe58e013c63b7f0ee6">MORALE_PYROMANIA_STARTFIRE</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="iuse_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae78ed0746aa741f05071a687cc3a6244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78ed0746aa741f05071a687cc3a6244">&#9670;&nbsp;</a></span>mop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04765">4765</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;{</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    }</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;here]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;        <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;        <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#a6496c230ed0a4f604e30bca984baf4a4">terrain_moppable</a>( <a class="code" href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a>( pnt ) );</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;    };</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160; </div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mop where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is nothing to mop nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;    }</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">tripoint_bub_ms</a> pnt( *pnt_ );</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <span class="keywordflow">if</span>( !f( pnt.raw() ) ) {</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#af7172e571c5c69240d9f71a01fddf035">pos_bub</a>() ) {</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You mop yourself up.&quot;</span> ) );</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The universe implodes and reforms around you.&quot;</span> ) );</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s nothing to mop there.&quot;</span> ) );</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;        }</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ) {</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You move the mop around, unsure whether it&#39;s doing any good.&quot;</span> ) );</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.15 );</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;            here.<a class="code" href="classmap.html#ac0f2abd4806cc1d145bbb29493c9f2cd">mop_spills</a>( pnt );</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;        }</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#ac0f2abd4806cc1d145bbb29493c9f2cd">mop_spills</a>( pnt ) ) {</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You mop up the spill.&quot;</span> ) );</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.15 );</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;    }</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_a6496c230ed0a4f604e30bca984baf4a4"><div class="ttname"><a href="classmap.html#a6496c230ed0a4f604e30bca984baf4a4">map::terrain_moppable</a></div><div class="ttdeci">bool terrain_moppable(const tripoint_bub_ms &amp;p)</div><div class="ttdoc">Check for moppable fields/items at this location.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03651">map.cpp:3651</a></div></div>
<div class="ttc" id="aclassmap_html_ac0f2abd4806cc1d145bbb29493c9f2cd"><div class="ttname"><a href="classmap.html#ac0f2abd4806cc1d145bbb29493c9f2cd">map::mop_spills</a></div><div class="ttdeci">bool mop_spills(const tripoint_bub_ms &amp;p)</div><div class="ttdoc">Remove moppable fields/items at this location.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03695">map.cpp:3695</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a38e880e550bb0688dea9353138da8683"><div class="ttname"><a href="coordinates_8h.html#a38e880e550bb0688dea9353138da8683">tripoint_bub_ms</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::reality_bubble, coords::ms &gt; tripoint_bub_ms</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00716">coordinates.h:716</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l05996">Character::is_blind()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="map_8cpp_source.html#l03695">map::mop_spills()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l00183">Creature::pos_bub()</a>, <a class="el" href="coordinates_8h_source.html#l00157">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::raw()</a>, and <a class="el" href="map_8cpp_source.html#l03651">map::terrain_moppable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa115b359fe8260eca81d45dbd5a17d4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa115b359fe8260eca81d45dbd5a17d4e">&#9670;&nbsp;</a></span>mp3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mp3 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03718">3718</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;{</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="comment">// TODO: avoid item id hardcoding to make this function usable for pure json-defined devices.</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The device&#39;s batteries are dead.&quot;</span> ) );</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a37f135e792eeba920085377b9bdb9a9b">has_active_item</a>( <a class="code" href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a> ) || p-&gt;<a class="code" href="classCharacter.html#a37f135e792eeba920085377b9bdb9a9b">has_active_item</a>( <a class="code" href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a> ) ||</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;               p-&gt;<a class="code" href="classCharacter.html#a37f135e792eeba920085377b9bdb9a9b">has_active_item</a>( <a class="code" href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a> ) ||</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;               p-&gt;<a class="code" href="classCharacter.html#a37f135e792eeba920085377b9bdb9a9b">has_active_item</a>( <a class="code" href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a> ) ) {</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are already listening to music!&quot;</span> ) );</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You put in the earbuds and start listening to music.&quot;</span> ) );</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a52d568d70e6f9f62ba2784dae37f08d7">itype_mp3</a> ) {</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ab766201e9552074c6c297fec427103f4">itype_smart_phone</a> ) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a8a14db3f66fcd11a5a3a03d77bb3dfbb">itype_afs_atomic_smartphone</a> ) {</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#acd52623988abc6e82a3f8c299c9c512f">itype_afs_wraitheon_smartphone</a> ) {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        }</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -200 );</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    }</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a37f135e792eeba920085377b9bdb9a9b"><div class="ttname"><a href="classCharacter.html#a37f135e792eeba920085377b9bdb9a9b">Character::has_active_item</a></div><div class="ttdeci">bool has_active_item(const itype_id &amp;id) const</div><div class="ttdoc">Whether the player carries an active item of the given item type.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00650">character_inventory.cpp:650</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a1eb74fd8e342d40dcdde584c17c5b080"><div class="ttname"><a href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a></div><div class="ttdeci">static const itype_id itype_smartphone_music(&quot;smartphone_music&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a52d568d70e6f9f62ba2784dae37f08d7"><div class="ttname"><a href="iuse_8cpp.html#a52d568d70e6f9f62ba2784dae37f08d7">itype_mp3</a></div><div class="ttdeci">static const itype_id itype_mp3(&quot;mp3&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a8a14db3f66fcd11a5a3a03d77bb3dfbb"><div class="ttname"><a href="iuse_8cpp.html#a8a14db3f66fcd11a5a3a03d77bb3dfbb">itype_afs_atomic_smartphone</a></div><div class="ttdeci">static const itype_id itype_afs_atomic_smartphone(&quot;afs_atomic_smartphone&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab766201e9552074c6c297fec427103f4"><div class="ttname"><a href="iuse_8cpp.html#ab766201e9552074c6c297fec427103f4">itype_smart_phone</a></div><div class="ttdeci">static const itype_id itype_smart_phone(&quot;smart_phone&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_acd52623988abc6e82a3f8c299c9c512f"><div class="ttname"><a href="iuse_8cpp.html#acd52623988abc6e82a3f8c299c9c512f">itype_afs_wraitheon_smartphone</a></div><div class="ttdeci">static const itype_id itype_afs_wraitheon_smartphone(&quot;afs_wraitheon_smartphone&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad06f93fc6fcd45a5c314474739099ae2"><div class="ttname"><a href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a></div><div class="ttdeci">static const itype_id itype_afs_atomic_smartphone_music(&quot;afs_atomic_smartphone_music&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af87dd034285ad6095cf29e4fd16a61d0"><div class="ttname"><a href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a></div><div class="ttdeci">static const itype_id itype_afs_atomic_wraitheon_music(&quot;afs_atomic_wraitheon_music&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_afe103308d22d817a160b7232dd630c45"><div class="ttname"><a href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a></div><div class="ttdeci">static const itype_id itype_mp3_on(&quot;mp3_on&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00650">Character::has_active_item()</a>, <a class="el" href="iuse_8cpp.html#a8a14db3f66fcd11a5a3a03d77bb3dfbb">itype_afs_atomic_smartphone</a>, <a class="el" href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a>, <a class="el" href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a>, <a class="el" href="iuse_8cpp.html#acd52623988abc6e82a3f8c299c9c512f">itype_afs_wraitheon_smartphone</a>, <a class="el" href="iuse_8cpp.html#a52d568d70e6f9f62ba2784dae37f08d7">itype_mp3</a>, <a class="el" href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a>, <a class="el" href="iuse_8cpp.html#ab766201e9552074c6c297fec427103f4">itype_smart_phone</a>, <a class="el" href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5c5647528d6db37fe36e3ecd52ccaa2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5647528d6db37fe36e3ecd52ccaa2d">&#9670;&nbsp;</a></span>mp3_deactivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mp3_deactivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03816">3816</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;{</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160; </div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a> ) {</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The mp3 player turns off.&quot;</span> ) );</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a52d568d70e6f9f62ba2784dae37f08d7">itype_mp3</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a> ) {</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The phone turns off.&quot;</span> ) );</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#ab766201e9552074c6c297fec427103f4">itype_smart_phone</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a> ) {</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The phone turns off.&quot;</span> ) );</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a8a14db3f66fcd11a5a3a03d77bb3dfbb">itype_afs_atomic_smartphone</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a> ) {</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The phone turns off.&quot;</span> ) );</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#acd52623988abc6e82a3f8c299c9c512f">itype_afs_wraitheon_smartphone</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    }</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -200 );</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    <a class="code" href="namespacemusic.html#a83a460e070f6677d5cc06eaedf85d410">music::deactivate_music_id</a>( <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ae63a134939869944941b8ece8b4cb3c0">music::music_id::mp3</a> );</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160; </div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160; </div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;}</div>
<div class="ttc" id="anamespacemusic_html_a83a460e070f6677d5cc06eaedf85d410"><div class="ttname"><a href="namespacemusic.html#a83a460e070f6677d5cc06eaedf85d410">music::deactivate_music_id</a></div><div class="ttdeci">void deactivate_music_id(music_id data)</div><div class="ttdef"><b>Definition:</b> <a href="music_8cpp_source.html#l00064">music.cpp:64</a></div></div>
<div class="ttc" id="anamespacemusic_html_a9c32fc77ff4a8513eb6beec268d48e12ae63a134939869944941b8ece8b4cb3c0"><div class="ttname"><a href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ae63a134939869944941b8ece8b4cb3c0">music::mp3</a></div><div class="ttdeci">@ mp3</div><div class="ttdef"><b>Definition:</b> <a href="music_8h_source.html#l00011">music.h:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="music_8cpp_source.html#l00064">music::deactivate_music_id()</a>, <a class="el" href="iuse_8cpp.html#a8a14db3f66fcd11a5a3a03d77bb3dfbb">itype_afs_atomic_smartphone</a>, <a class="el" href="iuse_8cpp.html#ad06f93fc6fcd45a5c314474739099ae2">itype_afs_atomic_smartphone_music</a>, <a class="el" href="iuse_8cpp.html#af87dd034285ad6095cf29e4fd16a61d0">itype_afs_atomic_wraitheon_music</a>, <a class="el" href="iuse_8cpp.html#acd52623988abc6e82a3f8c299c9c512f">itype_afs_wraitheon_smartphone</a>, <a class="el" href="iuse_8cpp.html#a52d568d70e6f9f62ba2784dae37f08d7">itype_mp3</a>, <a class="el" href="iuse_8cpp.html#afe103308d22d817a160b7232dd630c45">itype_mp3_on</a>, <a class="el" href="iuse_8cpp.html#ab766201e9552074c6c297fec427103f4">itype_smart_phone</a>, <a class="el" href="iuse_8cpp.html#a1eb74fd8e342d40dcdde584c17c5b080">itype_smartphone_music</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="music_8h_source.html#l00011">music::mp3</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ace19128a8e391cd843c40950958f3854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace19128a8e391cd843c40950958f3854">&#9670;&nbsp;</a></span>mp3_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mp3_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03808">3808</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;{</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    <span class="comment">// mp3 player in inventory, we can listen</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <a class="code" href="sdlsound_8h.html#a283388f57294fc9cc61dae8b158e4e2c">play_music</a>( p, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 0, 20 );</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    <a class="code" href="namespacemusic.html#a21b4e2257ce8d783612fc26bec1807f9">music::activate_music_id</a>( <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ae63a134939869944941b8ece8b4cb3c0">music::music_id::mp3</a> );</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;}</div>
<div class="ttc" id="anamespacemusic_html_a21b4e2257ce8d783612fc26bec1807f9"><div class="ttname"><a href="namespacemusic.html#a21b4e2257ce8d783612fc26bec1807f9">music::activate_music_id</a></div><div class="ttdeci">void activate_music_id(music_id data)</div><div class="ttdef"><b>Definition:</b> <a href="music_8cpp_source.html#l00054">music.cpp:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="music_8cpp_source.html#l00054">music::activate_music_id()</a>, <a class="el" href="music_8h_source.html#l00011">music::mp3</a>, <a class="el" href="sdlsound_8h_source.html#l00025">play_music()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7ca57f0d03084f4c873c034633817ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca57f0d03084f4c873c034633817ede">&#9670;&nbsp;</a></span>multicooker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::multicooker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Electronics &gt;3 allows multicooker upgrade Fabrication &gt;3 allows multicooker upgrade Intelligence increases chance to successfully upgrade multi-cooker Electronics increases chance to successfully upgrade multi-cooker Fabrication increases chance to successfully upgrade multi-cooker 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07431">7431</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;{</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> charges_to_start = 50;</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> charge_buffer = 2;</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160; </div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;    <span class="keyword">enum</span> {</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;        mc_start, mc_stop, mc_take, mc_upgrade, mc_empty</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;    };</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160; </div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;    }</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160; </div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t read, and don&#39;t understand the screen or the buttons!&quot;</span> ) );</div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    }</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160; </div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a> ) || p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a> ) ) {</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="iuse_8cpp.html#a408070cfe77ea346d75b816e8254b2f2">multicooker_hallu</a>( *p ) ) {</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;        }</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;    }</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160; </div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;        !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) ) {</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;    }</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160; </div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;    <a class="code" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;    menu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Welcome to the RobotChef3000.  Choose option:&quot;</span> );</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160; </div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    <a class="code" href="classitem.html">item</a> *dish_it = it-&gt;<a class="code" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">get_item_with</a>(</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;        <span class="keywordflow">return</span> !( it.<a class="code" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">is_toolmod</a>() || it.<a class="code" href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">is_magazine</a>() );</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    } );</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160; </div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_stop, <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop cooking&quot;</span> ) );</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;        <span class="keywordflow">if</span>( dish_it == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( p, <span class="keyword">true</span> ) &lt; charges_to_start ) {</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Batteries are low.&quot;</span> ) );</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;            }</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;            menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_start, <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Start cooking&quot;</span> ) );</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;<span class="comment">            /** @EFFECT_ELECTRONICS &gt;3 allows multicooker upgrade */</span></div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;<span class="comment">            /** @EFFECT_FABRICATION &gt;3 allows multicooker upgrade */</span></div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;            <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a> ) &gt;= 4 &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> ) &gt;= 4 ) {</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;                <span class="keyword">const</span> std::string upgr = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;MULTI_COOK_UPGRADE&quot;</span> );</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;                <span class="keywordflow">if</span>( upgr.empty() ) {</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;                    menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_upgrade, <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Upgrade multi-cooker&quot;</span> ) );</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;                    <span class="keywordflow">if</span>( upgr == <span class="stringliteral">&quot;UPGRADE&quot;</span> ) {</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;                        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_upgrade, <span class="keyword">false</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Multi-cooker already upgraded&quot;</span> ) );</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;                        menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_upgrade, <span class="keyword">false</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Multi-cooker unable to upgrade&quot;</span> ) );</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;                    }</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;                }</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;            }</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;            <span class="comment">// Something other than a recipe item might be stored in the pocket.</span></div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;            <span class="keywordflow">if</span>( dish_it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() == it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;DISH&quot;</span> ) ) {</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;                menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_take, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take out dish&quot;</span> ) );</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;                menu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( mc_empty, <span class="keyword">true</span>, <span class="charliteral">&#39;t&#39;</span>,</div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Obstruction detected.  Please remove any items lodged in the multi-cooker.&quot;</span> ) );</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;            }</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;        }</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;    }</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160; </div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;    menu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;    <span class="keywordtype">int</span> choice = menu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160; </div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;    }</div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160; </div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;    <span class="keywordflow">if</span>( mc_stop == choice ) {</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Really stop cooking?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;            it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;            it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;DISH&quot;</span> );</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;            it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;COOKTIME&quot;</span> );</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;            it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span> );</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a>, p );</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;        }</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;    }</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160; </div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;    <span class="keywordflow">if</span>( mc_take == choice ) {</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;        <a class="code" href="classitem.html">item</a> &amp;dish = *dish_it;</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;        <span class="keywordflow">if</span>( dish.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a> ) ) {</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;            dish.<a class="code" href="classitem.html#a2ad99faa90026d50e9572d04f7b0d95c">cold_up</a>();  <span class="comment">//don&#39;t know how to check if the dish is frozen liquid and prevent extraction of it into inventory...</span></div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;        }</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;        <span class="keyword">const</span> std::string dish_name = dish.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>( dish.<a class="code" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> is_delicious = dish.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a> ) &amp;&amp; dish.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e8c0f9f3287ada7724cea507f6e0987">flag_EATEN_HOT</a> );</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;        <span class="keywordflow">if</span>( dish.<a class="code" href="classitem.html#a0795ac0d3e2ba958ab3a6ff4e282482b">made_of</a>( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> ) ) {</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;            <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#aa6ebc0421b11e808ad5aad14576ecd1d">check_eligible_containers_for_crafting</a>( *<a class="code" href="classstring__id.html">recipe_id</a>( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span> ) ), 1 ) ) {</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have a suitable container to store your %s.&quot;</span> ),</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;                                      dish_name );</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160; </div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;            }</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;            <a class="code" href="namespaceliquid__handler.html#aa161cfecbfcfa0e1b42f391f3e39af79">liquid_handler::handle_all_liquid</a>( dish, <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> );</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">i_add</a>( dish );</div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;        }</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160; </div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;        it-&gt;<a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *dish_it );</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span> );</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;        <span class="keywordflow">if</span>( is_delicious ) {</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You got the dish from the multi-cooker.  The %s smells delicious.&quot;</span> ),</div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;                                  dish_name );</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You got the %s from the multi-cooker.&quot;</span> ),</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;                                  dish_name );</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;        }</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160; </div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;    }</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160; </div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;    <span class="comment">// Do nothing if there&#39;s non-dish contained in the cooker</span></div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;    <span class="keywordflow">if</span>( mc_empty == choice ) {</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;    }</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160; </div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;    <span class="keywordflow">if</span>( mc_start == choice ) {</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;        <a class="code" href="classuilist.html">uilist</a> dmenu;</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;        dmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose desired meal:&quot;</span> );</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160; </div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;        std::vector&lt;const recipe *&gt; dishes;</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160; </div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;        <a class="code" href="classinventory.html">inventory</a> crafting_inv = p-&gt;<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;        <span class="comment">// add some tools and qualities. we can&#39;t add this qualities to</span></div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;        <span class="comment">// json, because multicook must be used only by activating, not as</span></div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;        <span class="comment">// component other crafts.</span></div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;        crafting_inv.<a class="code" href="classinventory.html#a2fc0c051b701e87b3ce58dad4f8c5288">push_back</a>( <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;hotplate&quot;</span>, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> ) ); <span class="comment">//hotplate inside</span></div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;        <span class="comment">// some recipes requires tongs</span></div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;        crafting_inv.<a class="code" href="classinventory.html#a2fc0c051b701e87b3ce58dad4f8c5288">push_back</a>( <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;tongs&quot;</span>, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> ) );</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;        <span class="comment">// toolset with CUT and other qualities inside</span></div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;        crafting_inv.<a class="code" href="classinventory.html#a2fc0c051b701e87b3ce58dad4f8c5288">push_back</a>( <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;toolset&quot;</span>, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> ) );</div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;        <span class="comment">// good COOK, BOIL, CONTAIN qualities inside</span></div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;        crafting_inv.<a class="code" href="classinventory.html#a2fc0c051b701e87b3ce58dad4f8c5288">push_back</a>( <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;pot&quot;</span>, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> ) );</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160; </div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;        <span class="keywordtype">int</span> counter = 0;</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> std::set&lt;std::string&gt; multicooked_subcats = { <span class="stringliteral">&quot;CSC_FOOD_MEAT&quot;</span>, <span class="stringliteral">&quot;CSC_FOOD_VEGGI&quot;</span>, <span class="stringliteral">&quot;CSC_FOOD_PASTA&quot;</span> };</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160; </div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> * <span class="keyword">const</span> &amp;r : <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>().get_learned_recipes().in_category( <span class="stringliteral">&quot;CC_FOOD&quot;</span> ) ) {</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;            <span class="keywordflow">if</span>( multicooked_subcats.count( r-&gt;subcategory ) &gt; 0 ) {</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;                dishes.push_back( r );</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">bool</span> can_make = r-&gt;deduped_requirements().can_make_with_inventory(</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;                                          crafting_inv, r-&gt;get_component_filter() );</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160; </div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;                dmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( counter++, can_make, -1, r-&gt;result_name( <span class="comment">/*decorated=*/</span><span class="keyword">true</span> ) );</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;            }</div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;        }</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160; </div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;        dmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160; </div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;        <span class="keywordtype">int</span> choice = dmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160; </div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;        <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;            <span class="keyword">const</span> <a class="code" href="classrecipe.html">recipe</a> *meal = dishes[choice];</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;            <span class="keywordtype">int</span> mealtime;</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;MULTI_COOK_UPGRADE&quot;</span> ) == <span class="stringliteral">&quot;UPGRADE&quot;</span> ) {</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;                mealtime = meal-&gt;<a class="code" href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">time_to_craft_moves</a>( *p, <a class="code" href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a> );</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;                mealtime = meal-&gt;<a class="code" href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">time_to_craft_moves</a>( *p, <a class="code" href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a> ) * 2;</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;            }</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160; </div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> all_charges = charges_to_start + mealtime / 1000 * <a class="code" href="namespaceunits.html#a76c965afaad76c83c6caa338d1eb6777">units::to_watt</a>(</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;                                        it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a62a6e70840cb0e484f8d61e273f440f4">tool</a>-&gt;power_draw ) / 1000;</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160; </div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;            <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( p, <span class="keyword">true</span> ) &lt; all_charges ) {</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160; </div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The multi-cooker needs %d charges to cook this dish.&quot;</span> ),</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;                                      all_charges );</div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160; </div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;            }</div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160; </div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a>;</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;            <span class="keyword">const</span> <a class="code" href="structrequirement__data.html">requirement_data</a> *reqs =</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;                meal-&gt;<a class="code" href="classrecipe.html#ab1b55d41175b239729f740aaad63f306">deduped_requirements</a>().<a class="code" href="classdeduped__requirement__data.html#af6bca939b4ec13da257c42363b69c0ef">select_alternative</a>( *p, crafting_inv, filter );</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;            <span class="keywordflow">if</span>( !reqs ) {</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;            }</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160; </div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="structcomponent.html">component</a> : reqs-&gt;<a class="code" href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">get_components</a>() ) {</div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( <a class="code" href="structcomponent.html">component</a>, 1, filter );</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;            }</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160; </div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span>, meal-&gt;<a class="code" href="classrecipe.html#aa75469c5d2213a774931a5abf668a9dc">ident</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;DISH&quot;</span>, meal-&gt;<a class="code" href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">result</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;COOKTIME&quot;</span>, mealtime );</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160; </div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The screen flashes blue symbols and scales as the multi-cooker begins to shake.&quot;</span> ) );</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160; </div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#af305e7ad8f70969f4453060bf5894885">itype_multi_cooker_filled</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;            it-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( charges_to_start - charge_buffer, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, p );</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160; </div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iuse_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, meal-&gt;<a class="code" href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">difficulty</a> * 3 ); <span class="comment">//little bonus</span></div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160; </div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;        }</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;    }</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160; </div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;    <span class="keywordflow">if</span>( mc_upgrade == choice ) {</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160; </div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a9ca7c0c3d959ba59a58203261e051acd">has_morale_to_craft</a>() ) {</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your morale is too low to craft&quot;</span> ) );</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;        }</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160; </div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;        <span class="keywordtype">bool</span> has_tools = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160; </div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;        <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;cinv = p-&gt;<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160; </div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;        <span class="keywordflow">if</span>( !cinv.<a class="code" href="classvisitable.html#aa199bd0ea7a41c50a2de5761dd987338">has_amount</a>( <a class="code" href="iuse_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a>, 1 ) ) {</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need a %s.&quot;</span> ),</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;                                  <a class="code" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( <a class="code" href="iuse_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a> ) );</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;            has_tools = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;        }</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160; </div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;        <span class="keywordflow">if</span>( !cinv.<a class="code" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">has_quality</a>( <a class="code" href="iuse_8cpp.html#aa848b2fb4367ac6b160e3c16eb9a4414">qual_SCREW_FINE</a> ) ) {</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need an item with %s of 1 or more to upgrade this.&quot;</span> ),</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;                                  <a class="code" href="iuse_8cpp.html#aa848b2fb4367ac6b160e3c16eb9a4414">qual_SCREW_FINE</a>.<a class="code" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structquality.html#ada68ce89e3e548a8bd2e7ea8a02c26b4">name</a> );</div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;            has_tools = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;        }</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160; </div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;        <span class="keywordflow">if</span>( !has_tools ) {</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;        }</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160; </div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 10 ) );</div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 10 ) );</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160; </div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 7_seconds ) );</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;<span class="comment">        /** @EFFECT_INT increases chance to successfully upgrade multi-cooker */</span></div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;<span class="comment">        /** @EFFECT_ELECTRONICS increases chance to successfully upgrade multi-cooker */</span></div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;<span class="comment">        /** @EFFECT_FABRICATION increases chance to successfully upgrade multi-cooker */</span></div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a> ) + p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a> ) + p-&gt;<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> &gt;</div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;            <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 20, 35 ) ) {</div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160; </div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 20 ) );</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">practice</a>( <a class="code" href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 5, 20 ) );</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160; </div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ve successfully upgraded the multi-cooker, master tinkerer!  Now it cooks faster!&quot;</span> ) );</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160; </div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;            it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;MULTI_COOK_UPGRADE&quot;</span>, <span class="stringliteral">&quot;UPGRADE&quot;</span> );</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160; </div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160; </div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160; </div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You sagely examine and analyze the multi-cooker, but don&#39;t manage to accomplish anything.&quot;</span> ) );</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your tinkering nearly breaks the multi-cooker!  Fortunately, it still works, but best to stop messing with it.&quot;</span> ) );</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;                it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;MULTI_COOK_UPGRADE&quot;</span>, <span class="stringliteral">&quot;DAMAGED&quot;</span> );</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;            }</div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160; </div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160; </div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;        }</div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160; </div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;    }</div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160; </div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6535a02158a1d6b23b0a6bb623dfae19"><div class="ttname"><a href="classCharacter.html#a6535a02158a1d6b23b0a6bb623dfae19">Character::practice</a></div><div class="ttdeci">bool practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02683">character.cpp:2683</a></div></div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00579">character.h:579</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9ca7c0c3d959ba59a58203261e051acd"><div class="ttname"><a href="classCharacter.html#a9ca7c0c3d959ba59a58203261e051acd">Character::has_morale_to_craft</a></div><div class="ttdeci">bool has_morale_to_craft() const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00389">crafting.cpp:389</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa6ebc0421b11e808ad5aad14576ecd1d"><div class="ttname"><a href="classCharacter.html#aa6ebc0421b11e808ad5aad14576ecd1d">Character::check_eligible_containers_for_crafting</a></div><div class="ttdeci">bool check_eligible_containers_for_crafting(const recipe &amp;rec, int batch_size=1) const</div><div class="ttdef"><b>Definition:</b> <a href="crafting_8cpp_source.html#l00475">crafting.cpp:475</a></div></div>
<div class="ttc" id="aclassdeduped__requirement__data_html_af6bca939b4ec13da257c42363b69c0ef"><div class="ttname"><a href="classdeduped__requirement__data.html#af6bca939b4ec13da257c42363b69c0ef">deduped_requirement_data::select_alternative</a></div><div class="ttdeci">const requirement_data * select_alternative(Character &amp;, const std::function&lt; bool(const item &amp;)&gt; &amp;filter, int batch=1, craft_flags=craft_flags::none) const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01694">requirements.cpp:1694</a></div></div>
<div class="ttc" id="aclassinventory_html_a2fc0c051b701e87b3ce58dad4f8c5288"><div class="ttname"><a href="classinventory.html#a2fc0c051b701e87b3ce58dad4f8c5288">inventory::push_back</a></div><div class="ttdeci">void push_back(const std::list&lt; item &gt; &amp;newits)</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00259">inventory.cpp:259</a></div></div>
<div class="ttc" id="aclassinventory_html_a8646038685427ab8967fd8ea2ee36e92"><div class="ttname"><a href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const override</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div></div>
<div class="ttc" id="aclassitem_html_a2ad99faa90026d50e9572d04f7b0d95c"><div class="ttname"><a href="classitem.html#a2ad99faa90026d50e9572d04f7b0d95c">item::cold_up</a></div><div class="ttdeci">void cold_up()</div><div class="ttdoc">Set the item to COLD and resets last_temp_check.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l12981">item.cpp:12981</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14557">item.cpp:14557</a></div></div>
<div class="ttc" id="aclassitem_html_a91fb3717957325c9800f90c58a03ba4c"><div class="ttname"><a href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">item::is_toolmod</a></div><div class="ttdeci">bool is_toolmod() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09775">item.cpp:9775</a></div></div>
<div class="ttc" id="aclassitem_html_a9b88938f2a635283227bdc51a97a8988"><div class="ttname"><a href="classitem.html#a9b88938f2a635283227bdc51a97a8988">item::get_item_with</a></div><div class="ttdeci">item * get_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l15155">item.cpp:15155</a></div></div>
<div class="ttc" id="aclassitem_html_adce43f2490a85e2dc212a26ce5ded4fc"><div class="ttname"><a href="classitem.html#adce43f2490a85e2dc212a26ce5ded4fc">item::is_magazine</a></div><div class="ttdeci">bool is_magazine() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09445">item.cpp:9445</a></div></div>
<div class="ttc" id="aclassrecipe_html_a10e4e7582e7174825ead3d07c3e4fca1"><div class="ttname"><a href="classrecipe.html#a10e4e7582e7174825ead3d07c3e4fca1">recipe::difficulty</a></div><div class="ttdeci">int difficulty</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00133">recipe.h:133</a></div></div>
<div class="ttc" id="aclassrecipe_html_a76ff3dd477c2e0fb63a4d5845beb97a2"><div class="ttname"><a href="classrecipe.html#a76ff3dd477c2e0fb63a4d5845beb97a2">recipe::time_to_craft_moves</a></div><div class="ttdeci">int64_t time_to_craft_moves(const Character &amp;guy, recipe_time_flag flags=recipe_time_flag::none) const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8cpp_source.html#l00092">recipe.cpp:92</a></div></div>
<div class="ttc" id="aclassrecipe_html_aa75469c5d2213a774931a5abf668a9dc"><div class="ttname"><a href="classrecipe.html#aa75469c5d2213a774931a5abf668a9dc">recipe::ident</a></div><div class="ttdeci">const recipe_id &amp; ident() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00155">recipe.h:155</a></div></div>
<div class="ttc" id="aclassrecipe_html_ab1b55d41175b239729f740aaad63f306"><div class="ttname"><a href="classrecipe.html#ab1b55d41175b239729f740aaad63f306">recipe::deduped_requirements</a></div><div class="ttdeci">const deduped_requirement_data &amp; deduped_requirements() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00151">recipe.h:151</a></div></div>
<div class="ttc" id="aclassrecipe_html_aeefe6a56019c2cdaf9c6754ef65f1b81"><div class="ttname"><a href="classrecipe.html#aeefe6a56019c2cdaf9c6754ef65f1b81">recipe::result</a></div><div class="ttdeci">const itype_id &amp; result() const</div><div class="ttdef"><b>Definition:</b> <a href="recipe_8h_source.html#l00111">recipe.h:111</a></div></div>
<div class="ttc" id="aclassvisitable_html_adeb03e3af46e1b106a5f88f112add296"><div class="ttname"><a href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">visitable::remove_item</a></div><div class="ttdeci">item remove_item(item &amp;it)</div><div class="ttdoc">Removes and returns the item which must be contained by this instance.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00543">visitable.cpp:543</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3e8c0f9f3287ada7724cea507f6e0987"><div class="ttname"><a href="flag_8cpp.html#a3e8c0f9f3287ada7724cea507f6e0987">flag_EATEN_HOT</a></div><div class="ttdeci">const flag_id flag_EATEN_HOT(&quot;EATEN_HOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a4efafd2b42751d5a01f93e10ed31af01"><div class="ttname"><a href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a></div><div class="ttdeci">const flag_id flag_HOT(&quot;HOT&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a617ff8737418db1b70ad7c05f3044b7a"><div class="ttname"><a href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a></div><div class="ttdeci">const flag_id flag_FROZEN(&quot;FROZEN&quot;)</div></div>
<div class="ttc" id="agame__constants_8h_html_afec5544a31d4183805cff025dd84b5f4"><div class="ttname"><a href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a></div><div class="ttdeci">constexpr int PICKUP_RANGE</div><div class="ttdoc">Items on the map with at most this distance to the player are considered available for crafting,...</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00070">game_constants.h:70</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a33d14d146dbc0f416314bdb87d8fca77"><div class="ttname"><a href="iuse_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a></div><div class="ttdeci">static const efftype_id effect_hallu(&quot;hallu&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a33dde1f8402abf0eea62ecee985182e3"><div class="ttname"><a href="iuse_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a></div><div class="ttdeci">static const itype_id itype_soldering_iron(&quot;soldering_iron&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a39e569f5e0f4ae83fdef1fd5bcddc02e"><div class="ttname"><a href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a></div><div class="ttdeci">static const itype_id itype_multi_cooker(&quot;multi_cooker&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a408070cfe77ea346d75b816e8254b2f2"><div class="ttname"><a href="iuse_8cpp.html#a408070cfe77ea346d75b816e8254b2f2">multicooker_hallu</a></div><div class="ttdeci">static bool multicooker_hallu(Character &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07379">iuse.cpp:7379</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a6e356b8c88f37fd089a667b39f6b4419"><div class="ttname"><a href="iuse_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a></div><div class="ttdeci">static const efftype_id effect_visuals(&quot;visuals&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a92adaaef73b238fc4ae42c4f0ee72a86"><div class="ttname"><a href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a></div><div class="ttdeci">static const skill_id skill_fabrication(&quot;fabrication&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa848b2fb4367ac6b160e3c16eb9a4414"><div class="ttname"><a href="iuse_8cpp.html#aa848b2fb4367ac6b160e3c16eb9a4414">qual_SCREW_FINE</a></div><div class="ttdeci">static const quality_id qual_SCREW_FINE(&quot;SCREW_FINE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad0e39d29af45ea0a03f280197b35ca72"><div class="ttname"><a href="iuse_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a></div><div class="ttdeci">static const skill_id skill_cooking(&quot;cooking&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af305e7ad8f70969f4453060bf5894885"><div class="ttname"><a href="iuse_8cpp.html#af305e7ad8f70969f4453060bf5894885">itype_multi_cooker_filled</a></div><div class="ttdeci">static const itype_id itype_multi_cooker_filled(&quot;multi_cooker_filled&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af557f83ca09615da5b2ff84b924e01c0"><div class="ttname"><a href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a></div><div class="ttdeci">static const skill_id skill_electronics(&quot;electronics&quot;)</div></div>
<div class="ttc" id="anamespacecalendar_html_a2830b54b0424fe452c0933f87d6201b3"><div class="ttname"><a href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a></div><div class="ttdeci">constexpr time_point turn_zero</div><div class="ttdoc">Represents time point 0.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00541">calendar.h:541</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_aa161cfecbfcfa0e1b42f391f3e39af79"><div class="ttname"><a href="namespaceliquid__handler.html#aa161cfecbfcfa0e1b42f391f3e39af79">liquid_handler::handle_all_liquid</a></div><div class="ttdeci">void handle_all_liquid(item liquid, const int radius, const item *const avoid)</div><div class="ttdoc">Consume / handle all of the liquid.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00107">handle_liquid.cpp:107</a></div></div>
<div class="ttc" id="anamespaceunits_html_a76c965afaad76c83c6caa338d1eb6777"><div class="ttname"><a href="namespaceunits.html#a76c965afaad76c83c6caa338d1eb6777">units::to_watt</a></div><div class="ttdeci">constexpr value_type to_watt(const quantity&lt; value_type, power_in_milliwatt_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00626">units.h:626</a></div></div>
<div class="ttc" id="arecipe_8h_html_ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2"><div class="ttname"><a href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">recipe_time_flag::ignore_proficiencies</a></div><div class="ttdeci">@ ignore_proficiencies</div></div>
<div class="ttc" id="astructcomponent_html"><div class="ttname"><a href="structcomponent.html">component</a></div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00058">requirements.h:58</a></div></div>
<div class="ttc" id="astructquality_html_ada68ce89e3e548a8bd2e7ea8a02c26b4"><div class="ttname"><a href="structquality.html#ada68ce89e3e548a8bd2e7ea8a02c26b4">quality::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00048">requirements.h:48</a></div></div>
<div class="ttc" id="astructrequirement__data_html"><div class="ttname"><a href="structrequirement__data.html">requirement_data</a></div><div class="ttdoc">The *_vector members represent list of alternatives requirements: alter_tool_comp_vector = { * { { a,...</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8h_source.html#l00209">requirements.h:209</a></div></div>
<div class="ttc" id="astructrequirement__data_html_a56dbf23ade6bced0dc6148b8e1a12d4c"><div class="ttname"><a href="structrequirement__data.html#a56dbf23ade6bced0dc6148b8e1a12d4c">requirement_data::get_components</a></div><div class="ttdeci">const alter_item_comp_vector &amp; get_components() const</div><div class="ttdef"><b>Definition:</b> <a href="requirements_8cpp_source.html#l01162">requirements.cpp:1162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="crafting_8cpp_source.html#l00475">Character::check_eligible_containers_for_crafting()</a>, <a class="el" href="item_8cpp_source.html#l12981">item::cold_up()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="recipe_8h_source.html#l00151">recipe::deduped_requirements()</a>, <a class="el" href="recipe_8h_source.html#l00133">recipe::difficulty</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="iuse_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#a3e8c0f9f3287ada7724cea507f6e0987">flag_EATEN_HOT</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="flag_8cpp.html#a617ff8737418db1b70ad7c05f3044b7a">flag_FROZEN</a>, <a class="el" href="flag_8cpp.html#a4efafd2b42751d5a01f93e10ed31af01">flag_HOT</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="requirements_8cpp_source.html#l01162">requirement_data::get_components()</a>, <a class="el" href="item_8cpp_source.html#l15155">item::get_item_with()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00107">liquid_handler::handle_all_liquid()</a>, <a class="el" href="visitable_8cpp_source.html#l01018">visitable::has_amount()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="crafting_8cpp_source.html#l00389">Character::has_morale_to_craft()</a>, <a class="el" href="classinventory.html#a8646038685427ab8967fd8ea2ee36e92">inventory::has_quality()</a>, <a class="el" href="visitable_8cpp_source.html#l00211">read_only_visitable::has_tools()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00326">Character::i_add()</a>, <a class="el" href="recipe_8h_source.html#l00155">recipe::ident()</a>, <a class="el" href="recipe_8h.html#ade9de105a82decda087a706099933839a8b6a7448fd0cfb3a8588c5f6355c3ac2">ignore_proficiencies</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="item_8cpp_source.html#l09445">item::is_magazine()</a>, <a class="el" href="item_8cpp_source.html#l09775">item::is_toolmod()</a>, <a class="el" href="item_8cpp_source.html#l00291">item::item()</a>, <a class="el" href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a>, <a class="el" href="iuse_8cpp.html#af305e7ad8f70969f4453060bf5894885">itype_multi_cooker_filled</a>, <a class="el" href="iuse_8cpp.html#a33dde1f8402abf0eea62ecee985182e3">itype_soldering_iron</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="item_8cpp_source.html#l09146">item::made_of()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="iuse_8cpp_source.html#l07379">multicooker_hallu()</a>, <a class="el" href="requirements_8h_source.html#l00048">quality::name</a>, <a class="el" href="item_8cpp_source.html#l14557">item::nname()</a>, <a class="el" href="achievement_8cpp_source.html#l00071">string_id&lt; T &gt;::obj()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="character_8cpp_source.html#l02683">Character::practice()</a>, <a class="el" href="inventory_8cpp_source.html#l00259">inventory::push_back()</a>, <a class="el" href="iuse_8cpp.html#aa848b2fb4367ac6b160e3c16eb9a4414">qual_SCREW_FINE</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="visitable_8cpp_source.html#l00543">visitable::remove_item()</a>, <a class="el" href="recipe_8h_source.html#l00111">recipe::result()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="requirements_8cpp_source.html#l01694">deduped_requirement_data::select_alternative()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="iuse_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, <a class="el" href="iuse_8cpp.html#af557f83ca09615da5b2ff84b924e01c0">skill_electronics</a>, <a class="el" href="iuse_8cpp.html#a92adaaef73b238fc4ae42c4f0ee72a86">skill_fabrication</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="recipe_8cpp_source.html#l00092">recipe::time_to_craft_moves()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="units_8h_source.html#l00626">units::to_watt()</a>, <a class="el" href="itype_8h_source.html#l01197">itype::tool</a>, <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, <a class="el" href="calendar_8h_source.html#l00541">calendar::turn_zero</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a25b543b9b0e566ce1c903c926d2d9dce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b543b9b0e566ce1c903c926d2d9dce">&#9670;&nbsp;</a></span>multicooker_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::multicooker_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence increases chance of checking multi-cooker on time Survival increases chance of checking multi-cooker on time 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07718">7718</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;{</div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> charge_buffer = 2;</div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160; </div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;    <span class="comment">//stop action before power runs out and iuse deletes the cooker</span></div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( p, <span class="keyword">true</span> ) &lt; charge_buffer ) {</div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span> );</div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a>, p );</div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;        <span class="comment">//drain the buffer amount given at activation</span></div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;        it-&gt;<a class="code" href="classitem.html#a57b10fc9db286a3449ddc92ab3d896f5">ammo_consume</a>( charge_buffer, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, p );</div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Batteries low, entering standby mode.  With a low buzzing sound the multi-cooker shuts down.&quot;</span> ) );</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;    }</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160; </div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;    <span class="keywordtype">int</span> cooktime = it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;COOKTIME&quot;</span>, 0 );</div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;    cooktime -= 100;</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160; </div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;    <span class="keywordflow">if</span>( cooktime &gt;= 300 &amp;&amp; cooktime &lt; 400 ) {</div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;        <span class="comment">//Smart or good cook or careful</span><span class="comment"></span></div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;<span class="comment">        /** @EFFECT_INT increases chance of checking multi-cooker on time */</span></div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;<span class="comment">        /** @EFFECT_SURVIVAL increases chance of checking multi-cooker on time */</span></div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;        <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.int_cur + <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.get_skill_level( <a class="code" href="iuse_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a> ) + <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.get_skill_level(</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;                <a class="code" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a> ) &gt; 16 ) {</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The multi-cooker should be finishing shortly&quot;</span> ) );</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;        }</div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;    }</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160; </div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;    <span class="keywordflow">if</span>( cooktime &lt;= 0 ) {</div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;        <a class="code" href="classitem.html">item</a> meal( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;DISH&quot;</span> ), <a class="code" href="classtime__point.html">time_point</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ), 1 );</div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;        <span class="keywordflow">if</span>( ( *<a class="code" href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a>( it-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;RECIPE&quot;</span> ) ) ).hot_result() ) {</div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;            meal.heat_up();</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;            meal.set_item_temperature( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <a class="code" href="namespacetemperatures.html#a6a0e3903fa0a749ee4c45d95eb6016d2">temperatures::cold</a>,</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;                                                 <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().get_temperature( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) );</div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;        }</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160; </div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;        it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;COOKTIME&quot;</span> );</div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a>, p );</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">can_contain</a>( meal ).<a class="code" href="classret__val__common.html#a933807b816264e791e488ed5e7abb1c3">success</a>() ) {</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;            it-&gt;<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( meal, <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Obstruction detected.  Please remove any items lodged in the multi-cooker.&quot;</span> ) );</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;        }</div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160; </div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;        <span class="comment">//~ sound of a multi-cooker finishing its cycle!</span></div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;        <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 8, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ding!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;ding&quot;</span> );</div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160; </div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;        it-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;COOKTIME&quot;</span>, cooktime );</div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;    }</div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160; </div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;}</div>
<div class="ttc" id="aclassitem_html_a28fa4969a257ea0b79acc9c60595ee7b"><div class="ttname"><a href="classitem.html#a28fa4969a257ea0b79acc9c60595ee7b">item::can_contain</a></div><div class="ttdeci">ret_val&lt; void &gt; can_contain(const item &amp;it, bool nested=false, bool ignore_rigidity=false, bool ignore_pkt_settings=true, bool is_pick_up_inv=false, const item_location &amp;parent_it=item_location(), units::volume remaining_parent_volume=10000000_ml, bool allow_nested=true) const</div><div class="ttdoc">Can the pocket contain the specified item?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10101">item.cpp:10101</a></div></div>
<div class="ttc" id="anamespacetemperatures_html_a6a0e3903fa0a749ee4c45d95eb6016d2"><div class="ttname"><a href="namespacetemperatures.html#a6a0e3903fa0a749ee4c45d95eb6016d2">temperatures::cold</a></div><div class="ttdeci">constexpr units::temperature cold</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00104">game_constants.h:104</a></div></div>
<div class="ttc" id="atype__id_8h_html_a7d1934ae1f3ab6bea8bd75f88070482d"><div class="ttname"><a href="type__id_8h.html#a7d1934ae1f3ab6bea8bd75f88070482d">recipe_id</a></div><div class="ttdeci">string_id&lt; recipe &gt; recipe_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00214">type_id.h:214</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="item_8cpp_source.html#l10878">item::ammo_consume()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l10101">item::can_contain()</a>, <a class="el" href="game__constants_8h_source.html#l00104">temperatures::cold</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="game_8cpp_source.html#l13866">get_weather()</a>, <a class="el" href="item_8cpp_source.html#l12966">item::heat_up()</a>, <a class="el" href="iuse_8cpp.html#a39e569f5e0f4ae83fdef1fd5bcddc02e">itype_multi_cooker</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="item_8cpp_source.html#l01784">item::put_in()</a>, <a class="el" href="item_8cpp_source.html#l12146">item::set_item_temperature()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, <a class="el" href="iuse_8cpp.html#ad0e39d29af45ea0a03f280197b35ca72">skill_cooking</a>, <a class="el" href="iuse_8cpp.html#ac038c6319122de04af85fb88e6618601">skill_survival</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="ret__val_8h_source.html#l00013">ret_val_common::success()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a87919f860221208970b40d2ec859fd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87919f860221208970b40d2ec859fd55">&#9670;&nbsp;</a></span>mycus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::mycus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence slightly reduces sleep duration when eating Mycus 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01424">1424</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">// Welcome our guide.  Welcome.  To. The Mycus.</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// From an end-user perspective, dialogue should be presented uniformly:</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">// initial caps, as in human writing, or all lowercase letters.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// I think that all lowercase, because it contrasts with normal convention, reinforces the Mycus&#39; alien nature</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> ) ) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a9436c1f8a8fbba03e4b7ea8a8dc5b3e1">event_type::crosses_mycus_threshold</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>() );</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>,</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It tastes amazing, and you finish it quickly.&quot;</span> ) );</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel better all over.&quot;</span> ) );</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 30 );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ad06f0f9440098eb66fa9a6c46d033324">set_rad</a>( 0 );</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7a558a2455f552673b825e3ad2e0fd4">healall</a>( 4 ); <span class="comment">// Can&#39;t make you a whole new person, but not for lack of trying</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;As it settles in, you feel ecstasy radiating through every part of your body&quot;</span> ) );</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a469eab74882c318b14859579b2391a3d">MORALE_MARLOSS</a>, 1000, 1000 ); <span class="comment">// Last time you&#39;ll ever have it this good.  So enjoy.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your eyes roll back in your head.  Everything dissolves into a blissful haze&quot;</span> ) );<span class="comment"></span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">        /** @EFFECT_INT slightly reduces sleep duration when eating Mycus */</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">fall_asleep</a>( 5_hours - p-&gt;<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> * 1_minutes );</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a4d0c8ac674e4cadce1faf3c002353a3b">unset_mutation</a>( <a class="code" href="iuse_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a> );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9256aa3e6577c96e4a19eb23d8810ca6">set_mutation</a>( <a class="code" href="iuse_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> );</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="comment">//~ The Mycus does not use the term (or encourage the concept of) &quot;you&quot;.  The PC is a local/native organism, but is now the Mycus.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="comment">//~ It still understands the concept, but uninitelligent fungaloids and mind-bent symbiotes should not need it.</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="comment">//~ We are the Mycus.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;we welcome into us.  we have endured long in this forbidding world.&quot;</span> ) );</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A sea of white caps, waving gently.  A haze of spores wafting silently over a forest.&quot;</span> ) );</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;the natives have a saying: \&quot;e pluribus unum.\&quot;  out of many, one.&quot;</span> ) );</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The blazing pink redness of the berry.  The juices spreading across our tongue, the warmth draping over us like a lover&#39;s embrace.&quot;</span> ) );</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;we welcome the union of our lines in our local guide.  we will prosper, and unite this world.  even now, our fruits adapt to better serve local physiology.&quot;</span> ) );</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The sky-blue of the seed.  The nutty, creamy flavors intermingling with the berry, a memory that will never leave us.&quot;</span> ) );</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;as, in time, shall we adapt to better welcome those who have not received us.&quot;</span> ) );</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <span class="stringliteral">&quot; &quot;</span> );</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The amber-yellow of the sap.  Feel it flowing through our veins, taking the place of the strange, thin red gruel called \&quot;blood.\&quot;&quot;</span> ) );</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;we are the Mycus.&quot;</span> ) );</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">/*p-&gt;add_msg_if_player( m_good,</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">                              _( &quot;We welcome into us.  We have endured long in this forbidding world.&quot; ) );</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">        p-&gt;add_msg_if_player( m_good,</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">                              _( &quot;The natives have a saying: \&quot;E Pluribus Unum\&quot;  Out of many, one.&quot; ) );</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">        p-&gt;add_msg_if_player( m_good,</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment">                              _( &quot;We welcome the union of our lines in our local guide.  We will prosper, and unite this world.&quot; ) );</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment">        p-&gt;add_msg_if_player( m_good, _( &quot;Even now, our fruits adapt to better serve local physiology.&quot; ) );</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">        p-&gt;add_msg_if_player( m_good,</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">                              _( &quot;As, in time, shall we adapt to better welcome those who have not received us.&quot; ) );*/</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="classfungal__effects.html">fungal_effects</a> fe;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;nearby_pos : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 3 ) ) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#abe9e7b93cf8ee15c370ad55c3138c4f6">move_cost</a>( nearby_pos ) != 0 &amp;&amp; !here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( nearby_pos ) &amp;&amp;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, nearby_pos ) &amp;&amp;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                !here.<a class="code" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">ter_furn_flag::TFLAG_NO_FLOOR</a>, nearby_pos ) ) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                fe.<a class="code" href="classfungal__effects.html#a9910235901d533def85febc547e6e23a">marlossify</a>( nearby_pos );</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af9374bac7243b4cb6e31377993a00b61">rem_addiction</a>( <a class="code" href="iuse_8cpp.html#a6fc2795049887445f930ab8b95eb9aef">addiction_marloss_r</a> );</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af9374bac7243b4cb6e31377993a00b61">rem_addiction</a>( <a class="code" href="iuse_8cpp.html#ab869eb5a2d614f1cdc22128c95faa732">addiction_marloss_b</a> );</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af9374bac7243b4cb6e31377993a00b61">rem_addiction</a>( <a class="code" href="iuse_8cpp.html#a9abab46c079227b696b500699a304dc2">addiction_marloss_y</a> );</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) &amp;&amp;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;               !p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> ) ) { <span class="comment">// OK, now set the hook.</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a0e1b71f2af17e0e3f0181dd441a457eb">mutate_category</a>( <a class="code" href="iuse_8cpp.html#affd7d8b7e056d2574852a424a438b49c">mutation_category_MYCUS</a>, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a04fc1337bdd5b0865a7c47e36b034b7e">mod_stored_kcal</a>( -87 );</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 10 );</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 5 );</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a469eab74882c318b14859579b2391a3d">MORALE_MARLOSS</a>, 25, 200 ); <span class="comment">// still covers up mutation pain</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a> ) ) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 5 );</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( 5 );</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// In case someone gets one without having been adapted first.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="comment">// Marloss is the Mycus&#39; method of co-opting humans.  Mycus fruit is for symbiotes&#39; maintenance and development.</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This tastes really weird!  You&#39;re not sure it&#39;s good for you&quot;</span> ) );</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ada433682735a3c541acfc9bf6f1de0d7">mutate</a>();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( 2 * <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 5 ) );</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a04fc1337bdd5b0865a7c47e36b034b7e">mod_stored_kcal</a>( -87 );</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 10 );</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 5 );</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>(); <span class="comment">// no hunger/quench benefit for you</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( -8, -50 );</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a04fc1337bdd5b0865a7c47e36b034b7e"><div class="ttname"><a href="classCharacter.html#a04fc1337bdd5b0865a7c47e36b034b7e">Character::mod_stored_kcal</a></div><div class="ttdeci">void mod_stored_kcal(int nkcal, bool ignore_weariness=false)</div><div class="ttdoc">Modifiers for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04426">character.cpp:4426</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0e1b71f2af17e0e3f0181dd441a457eb"><div class="ttname"><a href="classCharacter.html#a0e1b71f2af17e0e3f0181dd441a457eb">Character::mutate_category</a></div><div class="ttdeci">void mutate_category(const mutation_category_id &amp;mut_cat, bool use_vitamins, bool true_random=false)</div><div class="ttdoc">Picks a random valid mutation in a category and mutate_towards() it.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01273">mutation.cpp:1273</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4886c07d74c7e8ad7ce2ced7d8238015"><div class="ttname"><a href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">Character::fall_asleep</a></div><div class="ttdeci">void fall_asleep()</div><div class="ttdoc">Adds &quot;sleep&quot; to the player.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09029">character.cpp:9029</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4d0c8ac674e4cadce1faf3c002353a3b"><div class="ttname"><a href="classCharacter.html#a4d0c8ac674e4cadce1faf3c002353a3b">Character::unset_mutation</a></div><div class="ttdeci">void unset_mutation(const trait_id &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00297">mutation.cpp:297</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9256aa3e6577c96e4a19eb23d8810ca6"><div class="ttname"><a href="classCharacter.html#a9256aa3e6577c96e4a19eb23d8810ca6">Character::set_mutation</a></div><div class="ttdeci">void set_mutation(const trait_id &amp;, const mutation_variant *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00283">mutation.cpp:283</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad06f0f9440098eb66fa9a6c46d033324"><div class="ttname"><a href="classCharacter.html#ad06f0f9440098eb66fa9a6c46d033324">Character::set_rad</a></div><div class="ttdeci">void set_rad(int new_rad)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06762">character.cpp:6762</a></div></div>
<div class="ttc" id="aclassCharacter_html_ada433682735a3c541acfc9bf6f1de0d7"><div class="ttname"><a href="classCharacter.html#ada433682735a3c541acfc9bf6f1de0d7">Character::mutate</a></div><div class="ttdeci">void mutate(const int &amp;true_random_chance, bool use_vitamins)</div><div class="ttdoc">Picks a random valid mutation and gives it to the Character, possibly removing/changing others along ...</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01058">mutation.cpp:1058</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9374bac7243b4cb6e31377993a00b61"><div class="ttname"><a href="classCharacter.html#af9374bac7243b4cb6e31377993a00b61">Character::rem_addiction</a></div><div class="ttdeci">void rem_addiction(const addiction_id &amp;type)</div><div class="ttdoc">Removes an addition from the player.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02076">suffer.cpp:2076</a></div></div>
<div class="ttc" id="aclassfungal__effects_html"><div class="ttname"><a href="classfungal__effects.html">fungal_effects</a></div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8h_source.html#l00008">fungal_effects.h:9</a></div></div>
<div class="ttc" id="aclassfungal__effects_html_a9910235901d533def85febc547e6e23a"><div class="ttname"><a href="classfungal__effects.html#a9910235901d533def85febc547e6e23a">fungal_effects::marlossify</a></div><div class="ttdeci">void marlossify(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="fungal__effects_8cpp_source.html#l00125">fungal_effects.cpp:125</a></div></div>
<div class="ttc" id="aclassmap_html_abe9e7b93cf8ee15c370ad55c3138c4f6"><div class="ttname"><a href="classmap.html#abe9e7b93cf8ee15c370ad55c3138c4f6">map::move_cost</a></div><div class="ttdeci">int move_cost(const tripoint &amp;p, const vehicle *ignored_vehicle=nullptr) const</div><div class="ttdoc">Calculate the cost to move past the tile at p.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02434">map.cpp:2434</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a9436c1f8a8fbba03e4b7ea8a8dc5b3e1"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a9436c1f8a8fbba03e4b7ea8a8dc5b3e1">event_type::crosses_mycus_threshold</a></div><div class="ttdeci">@ crosses_mycus_threshold</div></div>
<div class="ttc" id="aiuse_8cpp_html_a0d7873e243723a1ba7390f11e934f61f"><div class="ttname"><a href="iuse_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MARLOSS(&quot;THRESH_MARLOSS&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a40331e22a139e13b3b70f387c9fdd390"><div class="ttname"><a href="iuse_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a></div><div class="ttdeci">static const trait_id trait_THRESH_MYCUS(&quot;THRESH_MYCUS&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a6fc2795049887445f930ab8b95eb9aef"><div class="ttname"><a href="iuse_8cpp.html#a6fc2795049887445f930ab8b95eb9aef">addiction_marloss_r</a></div><div class="ttdeci">static const addiction_id addiction_marloss_r(&quot;marloss_r&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a9abab46c079227b696b500699a304dc2"><div class="ttname"><a href="iuse_8cpp.html#a9abab46c079227b696b500699a304dc2">addiction_marloss_y</a></div><div class="ttdeci">static const addiction_id addiction_marloss_y(&quot;marloss_y&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab869eb5a2d614f1cdc22128c95faa732"><div class="ttname"><a href="iuse_8cpp.html#ab869eb5a2d614f1cdc22128c95faa732">addiction_marloss_b</a></div><div class="ttdeci">static const addiction_id addiction_marloss_b(&quot;marloss_b&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ac71452586eb6cf87fab888bc561dc897"><div class="ttname"><a href="iuse_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_M_DEPENDENT(&quot;M_DEPENDENT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_affd7d8b7e056d2574852a424a438b49c"><div class="ttname"><a href="iuse_8cpp.html#affd7d8b7e056d2574852a424a438b49c">mutation_category_MYCUS</a></div><div class="ttdeci">static const mutation_category_id mutation_category_MYCUS(&quot;MYCUS&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a469eab74882c318b14859579b2391a3d"><div class="ttname"><a href="morale__types_8cpp.html#a469eab74882c318b14859579b2391a3d">MORALE_MARLOSS</a></div><div class="ttdeci">const morale_type MORALE_MARLOSS(&quot;morale_marloss&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#ab869eb5a2d614f1cdc22128c95faa732">addiction_marloss_b</a>, <a class="el" href="iuse_8cpp.html#a6fc2795049887445f930ab8b95eb9aef">addiction_marloss_r</a>, <a class="el" href="iuse_8cpp.html#a9abab46c079227b696b500699a304dc2">addiction_marloss_y</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a9436c1f8a8fbba03e4b7ea8a8dc5b3e1">crosses_mycus_threshold</a>, <a class="el" href="character_8cpp_source.html#l09029">Character::fall_asleep()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="map_8cpp_source.html#l03077">map::has_flag()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l08427">Character::healall()</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00125">fungal_effects::marlossify()</a>, <a class="el" href="character_8cpp_source.html#l04334">Character::mod_daily_health()</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="character_8cpp_source.html#l09818">Character::mod_painkiller()</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="character_8cpp_source.html#l06752">Character::mod_stim()</a>, <a class="el" href="character_8cpp_source.html#l04426">Character::mod_stored_kcal()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="morale__types_8cpp.html#a469eab74882c318b14859579b2391a3d">MORALE_MARLOSS</a>, <a class="el" href="map_8cpp_source.html#l02434">map::move_cost()</a>, <a class="el" href="mutation_8cpp_source.html#l01058">Character::mutate()</a>, <a class="el" href="mutation_8cpp_source.html#l01273">Character::mutate_category()</a>, <a class="el" href="iuse_8cpp.html#affd7d8b7e056d2574852a424a438b49c">mutation_category_MYCUS</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="suffer_8cpp_source.html#l02076">Character::rem_addiction()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, <a class="el" href="mutation_8cpp_source.html#l00283">Character::set_mutation()</a>, <a class="el" href="character_8cpp_source.html#l06762">Character::set_rad()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">TFLAG_DEEP_WATER</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054af607730a38ff7975c6724b22881e0e58">TFLAG_NO_FLOOR</a>, <a class="el" href="iuse_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>, <a class="el" href="iuse_8cpp.html#a0d7873e243723a1ba7390f11e934f61f">trait_THRESH_MARLOSS</a>, <a class="el" href="iuse_8cpp.html#a40331e22a139e13b3b70f387c9fdd390">trait_THRESH_MYCUS</a>, <a class="el" href="mutation_8cpp_source.html#l00297">Character::unset_mutation()</a>, and <a class="el" href="character_8cpp_source.html#l07521">Character::vomit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="monattack_8cpp_source.html#l02179">mattack::fungus_fortify()</a>, <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="character__body_8cpp_source.html#l00952">Character::update_stomach()</a>.</p>

</div>
</div>
<a id="a3db2d297bf6d7717d50bf70fd09d5e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db2d297bf6d7717d50bf70fd09d5e62">&#9670;&nbsp;</a></span>noise_emitter_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::noise_emitter_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02631">2631</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;{</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 30, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::sound_t::alarm</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;KXSHHHHRRCRKLKKK!&quot;</span> ), <span class="keyword">true</span>, <span class="stringliteral">&quot;tool&quot;</span>,</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                   <span class="stringliteral">&quot;noise_emitter&quot;</span> );</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a6486b4e98228b83d4b13d54febe5f170">sounds::alarm</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8aa28fa6a58bdfa71593e86c9e908f18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa28fa6a58bdfa71593e86c9e908f18">&#9670;&nbsp;</a></span>oxygen_bottle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::oxygen_bottle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01033">1033</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;{</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You breathe deeply from the %s.&quot;</span> ),</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ),</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                              <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; breathes from the %s.&quot;</span> ),</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                                      it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a> ) ) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a> );</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a> ) ) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a> );</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a> ) ) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a> );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>() &lt; 16 ) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( 8 );</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 2 );</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 2 );</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06742">character.cpp:6742</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ad37b6925aab6c082f9b6bbf00e6336aa"><div class="ttname"><a href="iuse_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a></div><div class="ttdeci">static const efftype_id effect_teargas(&quot;teargas&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="iuse_8cpp.html#a2dde49329eef942ec57d25db274942c0">effect_asthma</a>, <a class="el" href="iuse_8cpp.html#af1ff45b9c9d3bca1b10df53f444f2b09">effect_smoke_lungs</a>, <a class="el" href="iuse_8cpp.html#ad37b6925aab6c082f9b6bbf00e6336aa">effect_teargas</a>, <a class="el" href="character_8cpp_source.html#l06742">Character::get_stim()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l09818">Character::mod_painkiller()</a>, <a class="el" href="character_8cpp_source.html#l06752">Character::mod_stim()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a91daa8843aca07c214f1c7a0ca3a373a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91daa8843aca07c214f1c7a0ca3a373a">&#9670;&nbsp;</a></span>oxytorch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::oxytorch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04631">4631</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;{</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;        <span class="comment">// Long action</span></div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    }</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;    }</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">has_quality</a>( <a class="code" href="iuse_8cpp.html#aabb8e7b420b71f02cdc2a0625c053152">qual_GLARE</a>, 1 ) ) {</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need welding goggles to do that.&quot;</span> ) );</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;    }</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160; </div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f =</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;    [&amp;here, p]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#a00008f407a53edc2445622618d7ed071">has_furn</a>( pnt ) ) {</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( pnt )-&gt;<a class="code" href="structfurn__t.html#a3b4a3291b349ed77b5a27b17b253b9ef">oxytorch</a>-&gt;valid();</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a27531d8882b8c6684dfda1fa41acce1f">is_null</a>() ) {</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;            <span class="keywordflow">return</span> here.<a class="code" href="classmap.html#aba8f330c2cc25be0652489b42d8dd530">ter</a>( pnt )-&gt;<a class="code" href="structter__t.html#a59344d1b2a289227695b91cdc3024986">oxytorch</a>-&gt;valid();</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        }</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    };</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160; </div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cut up metal where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is no metal to cut up nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    }</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;pnt = *pnt_;</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    <span class="keywordflow">if</span>( !f( pnt ) ) {</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;        <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Yuck.  Acetylene gas smells weird.&quot;</span> ) );</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t cut that.&quot;</span> ) );</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;        }</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;    }</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160; </div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classoxytorch__activity__actor.html">oxytorch_activity_actor</a>( pnt, <a class="code" href="classitem__location.html">item_location</a>{*p, it} ) );</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160; </div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4fbb9c4ed21da8c03ce7d04036beea63"><div class="ttname"><a href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality</a></div><div class="ttdeci">bool has_quality(const quality_id &amp;qual, int level=1, int qty=1) const override</div><div class="ttdoc">Returns true if instance has amount (or more) items of at least quality level.</div></div>
<div class="ttc" id="aclassoxytorch__activity__actor_html"><div class="ttname"><a href="classoxytorch__activity__actor.html">oxytorch_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01381">activity_actor_definitions.h:1382</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aabb8e7b420b71f02cdc2a0625c053152"><div class="ttname"><a href="iuse_8cpp.html#aabb8e7b420b71f02cdc2a0625c053152">qual_GLARE</a></div><div class="ttdeci">static const quality_id qual_GLARE(&quot;GLARE&quot;)</div></div>
<div class="ttc" id="astructfurn__t_html_a3b4a3291b349ed77b5a27b17b253b9ef"><div class="ttname"><a href="structfurn__t.html#a3b4a3291b349ed77b5a27b17b253b9ef">furn_t::oxytorch</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_furn &gt; oxytorch</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00662">mapdata.h:662</a></div></div>
<div class="ttc" id="astructter__t_html_a59344d1b2a289227695b91cdc3024986"><div class="ttname"><a href="structter__t.html#a59344d1b2a289227695b91cdc3024986">ter_t::oxytorch</a></div><div class="ttdeci">cata::value_ptr&lt; activity_data_ter &gt; oxytorch</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00611">mapdata.h:611</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="map_8cpp_source.html#l01722">map::furn()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="map_8cpp_source.html#l01712">map::has_furn()</a>, <a class="el" href="classCharacter.html#a4fbb9c4ed21da8c03ce7d04036beea63">Character::has_quality()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="mapdata_8cpp_source.html#l00864">ter_t::is_null()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="mapdata_8h_source.html#l00611">ter_t::oxytorch</a>, <a class="el" href="mapdata_8h_source.html#l00662">furn_t::oxytorch</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="iuse_8cpp.html#aabb8e7b420b71f02cdc2a0625c053152">qual_GLARE</a>, and <a class="el" href="map_8cpp_source.html#l01922">map::ter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7ff60437495f56c9e8ce557a328b8a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff60437495f56c9e8ce557a328b8a72">&#9670;&nbsp;</a></span>pack_cbm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::pack_cbm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02366">2366</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;{</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> <a class="code" href="structbionic.html">bionic</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <span class="keywordflow">return</span> e.<a class="code" href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">is_bionic</a>() &amp;&amp; e.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a> );</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose CBM to pack&quot;</span> ), <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any CBMs.&quot;</span> ) );</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structbionic.html">bionic</a> ) {</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="structbionic.html">bionic</a>.get_item()-&gt;faults.empty() ) {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This CBM is faulty.  You should mend it first.  Do you want to try?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a7f2a451a9100f19df686fd1197c46208">mend_item</a>( std::move( <a class="code" href="structbionic.html">bionic</a> ) );</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacebehavior.html#af83204dc0162740f1458e4bbea975a07a260ca9dd8a4577fc00b7bd5810298076">success</a> = <a class="code" href="math__parser__func_8h.html#a5834219bcffc7118c95b395b8cdeec20">round</a>( p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a> ) ) - <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 6 );</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <span class="keywordflow">if</span>( success &gt; 0 ) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You carefully prepare the CBM for sterilization.&quot;</span> ) );</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <a class="code" href="structbionic.html">bionic</a>.get_item()-&gt;unset_flag( <a class="code" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a> );</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fail to properly prepare the CBM.&quot;</span> ) );</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    }</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160; </div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    std::vector&lt;item_comp&gt; comps;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    comps.emplace_back( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), 1 );</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a5d161e8df8122b5f3d74a081ee8d12cf">consume_items</a>( comps, 1, <a class="code" href="item_8h.html#a64c6001518eb0b959300f427a0086eb0">is_crafting_component</a> );</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a7f2a451a9100f19df686fd1197c46208"><div class="ttname"><a href="classCharacter.html#a7f2a451a9100f19df686fd1197c46208">Character::mend_item</a></div><div class="ttdeci">void mend_item(item_location &amp;&amp;obj, bool interactive=true)</div><div class="ttdoc">Attempt to mend an item (fix any current faults)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06566">character.cpp:6566</a></div></div>
<div class="ttc" id="aclassitem_html_a699d0314aa1c5ee9903cf3cf862ee8cf"><div class="ttname"><a href="classitem.html#a699d0314aa1c5ee9903cf3cf862ee8cf">item::is_bionic</a></div><div class="ttdeci">bool is_bionic() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09440">item.cpp:9440</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a16473ae4fa75bf2d7699f22f28811b00"><div class="ttname"><a href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a></div><div class="ttdeci">const flag_id flag_NO_PACKED(&quot;NO_PACKED&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aaf598d0fedebd89ec20f768da3b5fd8a"><div class="ttname"><a href="iuse_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a></div><div class="ttdeci">static const skill_id skill_firstaid(&quot;firstaid&quot;)</div></div>
<div class="ttc" id="astructbionic_html"><div class="ttname"><a href="structbionic.html">bionic</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00198">bionics.h:198</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="crafting_8cpp_source.html#l02029">Character::consume_items()</a>, <a class="el" href="flag_8cpp.html#a16473ae4fa75bf2d7699f22f28811b00">flag_NO_PACKED</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l09440">item::is_bionic()</a>, <a class="el" href="item_8h_source.html#l03267">is_crafting_component()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="character_8cpp_source.html#l06566">Character::mend_item()</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="math__parser__func_8h_source.html#l00110">round()</a>, <a class="el" href="iuse_8cpp.html#aaf598d0fedebd89ec20f768da3b5fd8a">skill_firstaid</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ab41708c4b5c33c118e7906782f78d7a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab41708c4b5c33c118e7906782f78d7a6">&#9670;&nbsp;</a></span>pack_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::pack_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02397">2397</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;{</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action pack_item that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    }</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160; </div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t pack your %s until you take it off.&quot;</span> ),</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// Turning it off</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        std::string oname = it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>();</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="cata__utility_8h.html#a9c0114ce66e3c9758214c5a9d68e8702">string_ends_with</a>( oname, <span class="stringliteral">&quot;_on&quot;</span> ) ) {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            oname.erase( oname.length() - 3, 3 );</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;no item type to turn it into (%s)!&quot;</span>, oname );</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You pack your %s for storage.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( oname ), p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;}</div>
<div class="ttc" id="acata__utility_8h_html_a9c0114ce66e3c9758214c5a9d68e8702"><div class="ttname"><a href="cata__utility_8h.html#a9c0114ce66e3c9758214c5a9d68e8702">string_ends_with</a></div><div class="ttdeci">bool string_ends_with(std::string_view s1, std::string_view s2)</div><div class="ttdoc">Returns true iff s1 ends with s2.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00458">cata_utility.h:458</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="cata__utility_8h_source.html#l00458">string_ends_with()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a590535dd168a4ef6c8c762a2e812c104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a590535dd168a4ef6c8c762a2e812c104">&#9670;&nbsp;</a></span>petfood()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::petfood </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01525">1525</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;{</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#ac070089c03e5dc687bae39670edd5401">is_comestible</a>() ) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You doubt someone would want to eat %1$s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Tame which animal with %s?&quot;</span> ),</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                            it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) );</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">if</span>( !pnt ) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="classcreature__tracker.html">creature_tracker</a> &amp;creatures = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>();</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">// First a check to see if we are trying to feed a NPC dog food.</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classnpc.html">npc</a> *<span class="keyword">const</span> who = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classnpc.html">npc</a>&gt;( *pnt ) ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to feed a person %1$s?&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) ) {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You put your %1$s into %2$s&#39;s mouth!&quot;</span> ),</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), who-&gt;disp_name( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 9, 10 ) || who-&gt;is_ally( *p ) ) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                who-&gt;say(</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Okay, but please, don&#39;t give me this again.  I don&#39;t want to eat pet food in the Cataclysm all day.&quot;</span> ) );</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s knocks it from your hand!&quot;</span> ), who-&gt;disp_name() );</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                who-&gt;make_angry();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">consume_charges</a>( *it, 1 );</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="comment">// Then monsters.</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = creatures.<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>&lt;<a class="code" href="classmonster.html">monster</a>&gt;( *pnt, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <span class="keywordtype">bool</span> can_feed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keyword">const</span> <a class="code" href="structpet__food__data.html">pet_food_data</a> &amp;<a class="code" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">petfood</a> = mon-&gt;type-&gt;petfood;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <span class="keyword">const</span> std::set&lt;std::string&gt; &amp;itemfood = it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;petfood;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;food : <a class="code" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">petfood</a>.food ) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            <span class="keywordflow">if</span>( itemfood.find( food ) != itemfood.end() ) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                can_feed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keywordflow">if</span>( !can_feed ) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s doesn&#39;t want that kind of food.&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordtype">bool</span> halluc = mon-&gt;is_hallucination();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">if</span>( mon-&gt;type-&gt;id == <a class="code" href="iuse_8cpp.html#abba17bddc3842ecab72974ff65125b4d">mon_dog_thing</a> ) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;            <span class="keywordflow">if</span>( !halluc ) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af49ce8d5205baca839ff4a1939ff49ef">deal_damage</a>( mon, <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;hand_r&quot;</span> ), <a class="code" href="structdamage__instance.html">damage_instance</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a>( <span class="stringliteral">&quot;cut&quot;</span> ) ),</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                                <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, 10 ) ) );</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You want to feed it the dog food, but it bites your fingers!&quot;</span> ) );</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Apparently, it&#39;s more interested in your flesh than the dog food in your hand!&quot;</span> ) );</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                <span class="keywordflow">if</span>( halluc ) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                    <a class="code" href="classitem.html">item</a> drop_me = p-&gt;<a class="code" href="classCharacter.html#a014447fddb4949aaedc856e3d579c6f9">reduce_charges</a>( it, 1 );</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#a68bf59ec5fc6dd8dd52dce8e41f32fd1">i_drop_at</a>( drop_me );</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">consume_charges</a>( *it, 1 );</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="keywordflow">if</span>( halluc &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You try to feed the %1$s some %2$s, but it vanishes!&quot;</span> ),</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                                  mon-&gt;type-&gt;nname(), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            mon-&gt;die( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        }</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feed your %1$s to the %2$s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), mon-&gt;get_name() );</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="keywordflow">if</span>( mon-&gt;has_flag( <a class="code" href="mtype_8cpp.html#aa37e8c765633b2710dcc31bf2c864b37">mon_flag_EATS</a> ) ) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <span class="keywordtype">int</span> kcal = it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;default_nutrition.kcal();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            mon-&gt;amount_eaten += kcal;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            <span class="keywordflow">if</span>( mon-&gt;amount_eaten &gt;= mon-&gt;stomach_size ) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s seems full now.&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !mon-&gt;has_flag( <a class="code" href="mtype_8cpp.html#aa37e8c765633b2710dcc31bf2c864b37">mon_flag_EATS</a> ) ) {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            mon-&gt;add_effect( <a class="code" href="iuse_8cpp.html#ad060c301873debf1b1401edcee21874f">effect_critter_well_fed</a>, 24_hours );</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">petfood</a>.feed.empty() ) {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s is your pet now!&quot;</span> ), mon-&gt;get_name() );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">petfood</a>.feed, mon-&gt;get_name() );</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        mon-&gt;friendly = -1;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        mon-&gt;add_effect( <a class="code" href="iuse_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordflow">if</span>( halluc ) {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            <a class="code" href="classitem.html">item</a> drop_me = p-&gt;<a class="code" href="classCharacter.html#a014447fddb4949aaedc856e3d579c6f9">reduce_charges</a>( it, 1 );</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a68bf59ec5fc6dd8dd52dce8e41f32fd1">i_drop_at</a>( drop_me );</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a440c45f92704e6fe31024a90f10ac9c1">consume_charges</a>( *it, 1 );</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is nothing to be fed here.&quot;</span> ) );</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a014447fddb4949aaedc856e3d579c6f9"><div class="ttname"><a href="classCharacter.html#a014447fddb4949aaedc856e3d579c6f9">Character::reduce_charges</a></div><div class="ttdeci">item reduce_charges(item *it, int quantity)</div><div class="ttdoc">Remove charges from a specific item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05202">character.cpp:5202</a></div></div>
<div class="ttc" id="aclassCharacter_html_a68bf59ec5fc6dd8dd52dce8e41f32fd1"><div class="ttname"><a href="classCharacter.html#a68bf59ec5fc6dd8dd52dce8e41f32fd1">Character::i_drop_at</a></div><div class="ttdeci">bool i_drop_at(item &amp;it, int qty=1)</div><div class="ttdoc">Drops items at player location An optional qty can be provided (and will perform better than separate...</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00481">character_inventory.cpp:481</a></div></div>
<div class="ttc" id="aclassCharacter_html_af49ce8d5205baca839ff4a1939ff49ef"><div class="ttname"><a href="classCharacter.html#af49ce8d5205baca839ff4a1939ff49ef">Character::deal_damage</a></div><div class="ttdeci">dealt_damage_instance deal_damage(Creature *source, bodypart_id bp, const damage_instance &amp;d, const weakpoint_attack &amp;attack=weakpoint_attack()) override</div><div class="ttdoc">Calls Creature::deal_damage and handles damaged effects (waking up, etc.)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08263">character.cpp:8263</a></div></div>
<div class="ttc" id="aclassitem_html_ac070089c03e5dc687bae39670edd5401"><div class="ttname"><a href="classitem.html#ac070089c03e5dc687bae39670edd5401">item::is_comestible</a></div><div class="ttdeci">bool is_comestible() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09475">item.cpp:9475</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a02a4844a7fb68c13a34dc40b0a9e94d8"><div class="ttname"><a href="iuse_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a></div><div class="ttdeci">static const efftype_id effect_pet(&quot;pet&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_abba17bddc3842ecab72974ff65125b4d"><div class="ttname"><a href="iuse_8cpp.html#abba17bddc3842ecab72974ff65125b4d">mon_dog_thing</a></div><div class="ttdeci">static const mtype_id mon_dog_thing(&quot;mon_dog_thing&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad060c301873debf1b1401edcee21874f"><div class="ttname"><a href="iuse_8cpp.html#ad060c301873debf1b1401edcee21874f">effect_critter_well_fed</a></div><div class="ttdeci">static const efftype_id effect_critter_well_fed(&quot;critter_well_fed&quot;)</div></div>
<div class="ttc" id="amtype_8cpp_html_aa37e8c765633b2710dcc31bf2c864b37"><div class="ttname"><a href="mtype_8cpp.html#aa37e8c765633b2710dcc31bf2c864b37">mon_flag_EATS</a></div><div class="ttdeci">mon_flag_id mon_flag_EATS</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00077">mtype.cpp:77</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a590535dd168a4ef6c8c762a2e812c104"><div class="ttname"><a href="namespaceiuse.html#a590535dd168a4ef6c8c762a2e812c104">iuse::petfood</a></div><div class="ttdeci">std::optional&lt; int &gt; petfood(Character *p, item *it, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01525">iuse.cpp:1525</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00132">damage.h:132</a></div></div>
<div class="ttc" id="astructpet__food__data_html"><div class="ttname"><a href="structpet__food__data.html">pet_food_data</a></div><div class="ttdoc">Pet food data.</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8h_source.html#l00230">mtype.h:230</a></div></div>
<div class="ttc" id="atype__id_8h_html_a119965745ae171b731d18a45ec6ee424"><div class="ttname"><a href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a></div><div class="ttdeci">string_id&lt; damage_type &gt; damage_type_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00071">type_id.h:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="character_8cpp_source.html#l07239">Character::consume_charges()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="character_8cpp_source.html#l08263">Character::deal_damage()</a>, <a class="el" href="iuse_8cpp.html#ad060c301873debf1b1401edcee21874f">effect_critter_well_fed</a>, <a class="el" href="iuse_8cpp.html#a02a4844a7fb68c13a34dc40b0a9e94d8">effect_pet</a>, <a class="el" href="item_8cpp_source.html#l14803">item::get_comestible()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00481">Character::i_drop_at()</a>, <a class="el" href="item_8cpp_source.html#l09475">item::is_comestible()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="iuse_8cpp.html#abba17bddc3842ecab72974ff65125b4d">mon_dog_thing</a>, <a class="el" href="mtype_8cpp_source.html#l00077">mon_flag_EATS</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="character_8cpp_source.html#l05202">Character::reduce_charges()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="calendar_8cpp_source.html#l00784">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8b605f6d204c8cc9c0b203b1a3deaa0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b605f6d204c8cc9c0b203b1a3deaa0e">&#9670;&nbsp;</a></span>pick_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::pick_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Dexterity speeds up door lock picking Lock Picking speeds up door lock picking 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03065">3065</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;{</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    }</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;you = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classavatar.html">avatar</a> &amp;<span class="keyword">&gt;</span>( *p );</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160; </div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    std::optional&lt;tripoint&gt; target;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="comment">// Prompt for a target lock to pick, or use the given tripoint</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> == you.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        target = <a class="code" href="classlockpick__activity__actor.html#a75c7d30f55e4b4d2373b50bea0d007c4">lockpick_activity_actor::select_location</a>( you );</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        target = <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    }</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span>( !target.has_value() ) {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    }</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160; </div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordtype">int</span> qual = it-&gt;<a class="code" href="classitem.html#a7d1ba8693571b9563e111fe709348438">get_quality</a>( <a class="code" href="iuse_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a> );</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="keywordflow">if</span>( qual &lt; 1 ) {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Item %s with &#39;PICK_LOCK&#39; use action requires LOCKPICK quality of at least 1.&quot;</span>,</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">c_str</a>() );</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;        qual = 1;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    }</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="comment">    /** @EFFECT_DEX speeds up door lock picking */</span><span class="comment"></span></div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="comment">    /** @EFFECT_LOCKPICK speeds up door lock picking */</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="keywordtype">int</span> duration_proficiency_factor = 10;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160; </div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iuse_8cpp.html#ab2f820ae061a1981f057cef2748f8ffa">proficiency_prof_lockpicking</a> ) ) {</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        duration_proficiency_factor = 5;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    }</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <span class="keywordflow">if</span>( you.<a class="code" href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">has_proficiency</a>( <a class="code" href="iuse_8cpp.html#a35b93b2ec6f22958d83f685cee9c94cc">proficiency_prof_lockpicking_expert</a> ) ) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        duration_proficiency_factor = 1;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    }</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> duration = 5_seconds;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a26a9df9e17c82854fc8085475ebd0c8c">flag_PERFECT_LOCKPICK</a> ) ) {</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        duration = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 30_seconds,</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                             ( 10_minutes - <a class="code" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( qual + <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( you.<a class="code" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> ) / 4.0f +</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;                                     you.<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a> ) ) ) * duration_proficiency_factor );</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    }</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    you.<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classlockpick__activity__actor.html#a931927f02e0fd420db4fdca8e17bd9ab">lockpick_activity_actor::use_item</a>( to_moves&lt;int&gt;( duration ),</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;                         <a class="code" href="classitem__location.html">item_location</a>( you, it ), <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().getabs( *target ) ) );</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00578">character.h:578</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72472dd1bc3a1fba8b053682ae5a2244"><div class="ttname"><a href="classCharacter.html#a72472dd1bc3a1fba8b053682ae5a2244">Character::has_proficiency</a></div><div class="ttdeci">bool has_proficiency(const proficiency_id &amp;prof) const</div><div class="ttdef"><b>Definition:</b> <a href="character__proficiency_8cpp_source.html#l00019">character_proficiency.cpp:19</a></div></div>
<div class="ttc" id="aclasslockpick__activity__actor_html_a75c7d30f55e4b4d2373b50bea0d007c4"><div class="ttname"><a href="classlockpick__activity__actor.html#a75c7d30f55e4b4d2373b50bea0d007c4">lockpick_activity_actor::select_location</a></div><div class="ttdeci">static std::optional&lt; tripoint &gt; select_location(avatar &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l02865">activity_actor.cpp:2865</a></div></div>
<div class="ttc" id="aclasslockpick__activity__actor_html_a931927f02e0fd420db4fdca8e17bd9ab"><div class="ttname"><a href="classlockpick__activity__actor.html#a931927f02e0fd420db4fdca8e17bd9ab">lockpick_activity_actor::use_item</a></div><div class="ttdeci">static lockpick_activity_actor use_item(int moves_total, const item_location &amp;lockpick, const tripoint &amp;target)</div><div class="ttdoc">Use regular lockpick.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor_8cpp_source.html#l02670">activity_actor.cpp:2670</a></div></div>
<div class="ttc" id="aclassstring__id_html_a2c0e3a434bcb9e3c353b337053ff22d8"><div class="ttname"><a href="classstring__id.html#a2c0e3a434bcb9e3c353b337053ff22d8">string_id::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Interface to the plain C-string of the id.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00252">string_id.h:252</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a20688ca0a8848ec0d73636ede90d27ad"><div class="ttname"><a href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a></div><div class="ttdeci">static constexpr time_duration from_minutes(const T m)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00233">calendar.h:233</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a26a9df9e17c82854fc8085475ebd0c8c"><div class="ttname"><a href="flag_8cpp.html#a26a9df9e17c82854fc8085475ebd0c8c">flag_PERFECT_LOCKPICK</a></div><div class="ttdeci">const flag_id flag_PERFECT_LOCKPICK(&quot;PERFECT_LOCKPICK&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a35b93b2ec6f22958d83f685cee9c94cc"><div class="ttname"><a href="iuse_8cpp.html#a35b93b2ec6f22958d83f685cee9c94cc">proficiency_prof_lockpicking_expert</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_lockpicking_expert(&quot;prof_lockpicking_expert&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a9353c39452c59a433c7c4c301386e91f"><div class="ttname"><a href="iuse_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a></div><div class="ttdeci">static const skill_id skill_traps(&quot;traps&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab2f820ae061a1981f057cef2748f8ffa"><div class="ttname"><a href="iuse_8cpp.html#ab2f820ae061a1981f057cef2748f8ffa">proficiency_prof_lockpicking</a></div><div class="ttdeci">static const proficiency_id proficiency_prof_lockpicking(&quot;prof_lockpicking&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab78ab4891ee6307746c1e74a8b77de8d"><div class="ttname"><a href="iuse_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a></div><div class="ttdeci">static const quality_id qual_LOCKPICK(&quot;LOCKPICK&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="string__id_8h_source.html#l00252">string_id&lt; T &gt;::c_str()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="character_8h_source.html#l00578">Character::dex_cur</a>, <a class="el" href="flag_8cpp.html#a26a9df9e17c82854fc8085475ebd0c8c">flag_PERFECT_LOCKPICK</a>, <a class="el" href="calendar_8h_source.html#l00233">time_duration::from_minutes()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="item_8cpp_source.html#l07737">item::get_quality()</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character__proficiency_8cpp_source.html#l00019">Character::has_proficiency()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="iuse_8cpp.html#ab2f820ae061a1981f057cef2748f8ffa">proficiency_prof_lockpicking</a>, <a class="el" href="iuse_8cpp.html#a35b93b2ec6f22958d83f685cee9c94cc">proficiency_prof_lockpicking_expert</a>, <a class="el" href="iuse_8cpp.html#ab78ab4891ee6307746c1e74a8b77de8d">qual_LOCKPICK</a>, <a class="el" href="activity__actor_8cpp_source.html#l02865">lockpick_activity_actor::select_location()</a>, <a class="el" href="iuse_8cpp.html#a9353c39452c59a433c7c4c301386e91f">skill_traps</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="activity__actor_8cpp_source.html#l02670">lockpick_activity_actor::use_item()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aefcc86332f7e77a3d2bfbefb12ecb955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefcc86332f7e77a3d2bfbefb12ecb955">&#9670;&nbsp;</a></span>pickaxe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::pickaxe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength decreases time to dig with a pickaxe 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03112">3112</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;{</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        <span class="comment">// Long action</span></div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="comment">    /** @EFFECT_STR decreases time to dig with a pickaxe */</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordtype">int</span> extra_moves = ( ( <a class="code" href="game__constants_8h.html#a3be415f83c03136e3832fe5e047cea94">MAX_STAT</a> + 4 ) -</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;                        <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( p-&gt;<a class="code" href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">get_arm_str</a>(), <a class="code" href="game__constants_8h.html#a3be415f83c03136e3832fe5e047cea94">MAX_STAT</a> ) ) * to_moves&lt;int&gt;( 5_minutes );</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="iuse_8cpp.html#a6b98b4d9933c4af5150475b8c7f05b0d">dig_tool</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, <a class="code" href="iuse_8cpp.html#af0f6a1c716782ccc53519e943b63c61d">ACT_PICKAXE</a>,</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Mine where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t mine there.&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You strike the %1$s with your %2$s.&quot;</span> ),</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;                     extra_moves );</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160; </div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_af707ac7d1e7995274f21a9f0ac740c9a"><div class="ttname"><a href="classCharacter.html#af707ac7d1e7995274f21a9f0ac740c9a">Character::get_arm_str</a></div><div class="ttdeci">int get_arm_str() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04200">character.cpp:4200</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3be415f83c03136e3832fe5e047cea94"><div class="ttname"><a href="game__constants_8h.html#a3be415f83c03136e3832fe5e047cea94">MAX_STAT</a></div><div class="ttdeci">constexpr int MAX_STAT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00123">game_constants.h:123</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_af0f6a1c716782ccc53519e943b63c61d"><div class="ttname"><a href="iuse_8cpp.html#af0f6a1c716782ccc53519e943b63c61d">ACT_PICKAXE</a></div><div class="ttdeci">static const activity_id ACT_PICKAXE(&quot;ACT_PICKAXE&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#af0f6a1c716782ccc53519e943b63c61d">ACT_PICKAXE</a>, <a class="el" href="iuse_8cpp_source.html#l02980">dig_tool()</a>, <a class="el" href="character_8cpp_source.html#l04200">Character::get_arm_str()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="game__constants_8h_source.html#l00123">MAX_STAT</a>, <a class="el" href="math__parser__func_8h_source.html#l00043">min()</a>, and <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7ef8a452a30b8f27ed576260caaa33ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ef8a452a30b8f27ed576260caaa33ec">&#9670;&nbsp;</a></span>plantblech()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::plantblech </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01108">1108</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a> ) ) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordtype">double</span> multiplier = -1;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a> ) ) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            multiplier = -3;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The meal is revitalizing.&quot;</span> ) );</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Oddly enough, this doesn&#39;t taste so bad.&quot;</span> ) );</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="comment">//reverses the harmful values of drinking fertilizer</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#af942a9e51785fc36ec8b059dbe1028dc">mod_nutr</a>( p-&gt;<a class="code" href="classCharacter.html#adfe305dc4dab1ce52dc6b46c73f4883f">nutrition_for</a>( *it ) * multiplier );</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( -it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;quench * multiplier );</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy * multiplier,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                             it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;healthy * multiplier );</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, -10 * multiplier, 60, 1_hours, 30_minutes, <span class="keyword">false</span>, it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a0b9bfd559e1dfec2838f3b48f63e17c8">blech</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a2d2463d7a32338731d9a8cd1be4faad0"><div class="ttname"><a href="iuse_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a></div><div class="ttdeci">static const trait_id trait_THRESH_PLANT(&quot;THRESH_PLANT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aba25188f1c6479109ff8fb4004f03ebb"><div class="ttname"><a href="iuse_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a></div><div class="ttdeci">static const trait_id trait_CHLOROMORPH(&quot;CHLOROMORPH&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a0b9bfd559e1dfec2838f3b48f63e17c8"><div class="ttname"><a href="namespaceiuse.html#a0b9bfd559e1dfec2838f3b48f63e17c8">iuse::blech</a></div><div class="ttdeci">std::optional&lt; int &gt; blech(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01054">iuse.cpp:1054</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp_source.html#l01054">blech()</a>, <a class="el" href="item_8cpp_source.html#l14803">item::get_comestible()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="character_8cpp_source.html#l04334">Character::mod_daily_health()</a>, <a class="el" href="stomach_8cpp_source.html#l00415">stomach_contents::mod_nutr()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="morale__types_8cpp.html#ab2e7f135d6749b067f488c38bec7eb8c">MORALE_FOOD_GOOD</a>, <a class="el" href="consumption_8cpp_source.html#l00442">Character::nutrition_for()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="character_8h_source.html#l02728">Character::stomach</a>, <a class="el" href="iuse_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a>, <a class="el" href="iuse_8cpp.html#a2d2463d7a32338731d9a8cd1be4faad0">trait_THRESH_PLANT</a>, and <a class="el" href="item_8h_source.html#l03074">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a68bdbc09b8985bd6aa6c97d0bafe40a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68bdbc09b8985bd6aa6c97d0bafe40a1">&#9670;&nbsp;</a></span>play_game()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::play_game </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08402">8402</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;{</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;        std::vector&lt;npc *&gt; followers = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_npcs_if( [p]( <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp; n ) {</div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;            <span class="keywordflow">return</span> n.<a class="code" href="classnpc.html#a325fff8094f3e9ce2ba6970f969ada3f">is_ally</a>( *p ) &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( n ) &amp;&amp; n.<a class="code" href="classCharacter.html#ab0ad8a1c48785fa554d5b2f662248697">can_hear</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), p-&gt;<a class="code" href="classCharacter.html#af9d3573dd5389eef3e7db0475b134095">get_shout_volume</a>() );</div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;        } );</div>
<div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;        <span class="keywordtype">int</span> fcount = followers.size();</div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;        <span class="keywordflow">if</span>( fcount &gt; 0 ) {</div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *qstr = fcount &gt; 1 ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play the %s with your friends?&quot;</span> ) :</div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;                               <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play the %s with your friend?&quot;</span> );</div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;            std::string res = <a class="code" href="classquery__popup.html">query_popup</a>()</div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;                              .<a class="code" href="classquery__popup.html#a0fcdd9c0efe58e77f0dbebe2cf0a0a92">context</a>( <span class="stringliteral">&quot;FRIENDS_ME_CANCEL&quot;</span> )</div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;                              .<a class="code" href="classquery__popup.html#ab8f062cd374f409c7191b608c074ec1c">message</a>( qstr, it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() )</div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;                              .<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;FRIENDS&quot;</span> ).<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;ME&quot;</span> ).<a class="code" href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">option</a>( <span class="stringliteral">&quot;CANCEL&quot;</span> )</div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;                              .<a class="code" href="classquery__popup.html#aa26700877b0cf2a70bb3af9926c9588b">query</a>().<a class="code" href="structquery__popup_1_1result.html#a319891694f37a6970df28ca2279cf851">action</a>;</div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;            <span class="keywordflow">if</span>( res == <span class="stringliteral">&quot;FRIENDS&quot;</span> ) {</div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;                <span class="keywordflow">if</span>( fcount &gt; 1 ) {</div>
<div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#a45dd4e3da9b83845bcd1c2d8e80cf802">n_gettext</a>( <span class="stringliteral">&quot;You and your %d friend start playing.&quot;</span>,</div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;                                        <span class="stringliteral">&quot;You and your %d friends start playing.&quot;</span>, fcount ), fcount );</div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You and your friend start playing.&quot;</span> ) );</div>
<div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;                }</div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, to_moves&lt;int&gt;( 1_hours ), fcount,</div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;                                    p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ), <span class="stringliteral">&quot;gaming with friends&quot;</span> );</div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;                <span class="keywordflow">for</span>( <a class="code" href="classnpc.html">npc</a> *n : followers ) {</div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;                    n-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, to_moves&lt;int&gt;( 1_hours ), fcount,</div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;                                        n-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ), <span class="stringliteral">&quot;gaming with friends&quot;</span> );</div>
<div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;                }</div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( res == <span class="stringliteral">&quot;ME&quot;</span> ) {</div>
<div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start playing.&quot;</span> ) );</div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, to_moves&lt;int&gt;( 1_hours ), -1,</div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;                                    p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ), <span class="stringliteral">&quot;gaming&quot;</span> );</div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;            }</div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;        } <span class="comment">// else, fall through to playing alone</span></div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;    }</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play a game with the %s?&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() ) ) {</div>
<div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start playing.&quot;</span> ) );</div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, to_moves&lt;int&gt;( 1_hours ), -1,</div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;                            p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ), <span class="stringliteral">&quot;gaming&quot;</span> );</div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;    }</div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a50ca774a69b5d6e12f7fba07434d9b35"><div class="ttname"><a href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">Character::get_item_position</a></div><div class="ttdeci">int get_item_position(const item *it) const</div><div class="ttdoc">Returns the item position (suitable for i_at or similar) of a specific item.</div><div class="ttdef"><b>Definition:</b> <a href="character__inventory_8cpp_source.html#l00565">character_inventory.cpp:565</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab0ad8a1c48785fa554d5b2f662248697"><div class="ttname"><a href="classCharacter.html#ab0ad8a1c48785fa554d5b2f662248697">Character::can_hear</a></div><div class="ttdeci">bool can_hear(const tripoint &amp;source, int volume) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10717">character.cpp:10717</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9d3573dd5389eef3e7db0475b134095"><div class="ttname"><a href="classCharacter.html#af9d3573dd5389eef3e7db0475b134095">Character::get_shout_volume</a></div><div class="ttdeci">int get_shout_volume() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07413">character.cpp:7413</a></div></div>
<div class="ttc" id="aclassnpc_html_a325fff8094f3e9ce2ba6970f969ada3f"><div class="ttname"><a href="classnpc.html#a325fff8094f3e9ce2ba6970f969ada3f">npc::is_ally</a></div><div class="ttdeci">bool is_ally(const Character &amp;p) const override</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02260">npc.cpp:2260</a></div></div>
<div class="ttc" id="aclassquery__popup_html"><div class="ttname"><a href="classquery__popup.html">query_popup</a></div><div class="ttdoc">UI class for displaying messages or querying player input with popups.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00035">popup.h:36</a></div></div>
<div class="ttc" id="aclassquery__popup_html_a0fcdd9c0efe58e77f0dbebe2cf0a0a92"><div class="ttname"><a href="classquery__popup.html#a0fcdd9c0efe58e77f0dbebe2cf0a0a92">query_popup::context</a></div><div class="ttdeci">query_popup &amp; context(const std::string &amp;cat)</div><div class="ttdoc">Specify the input context.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00153">popup.cpp:153</a></div></div>
<div class="ttc" id="aclassquery__popup_html_a677ca3e1f238f2bdaa7d2ad0eadf49e1"><div class="ttname"><a href="classquery__popup.html#a677ca3e1f238f2bdaa7d2ad0eadf49e1">query_popup::option</a></div><div class="ttdeci">query_popup &amp; option(const std::string &amp;opt)</div><div class="ttdoc">Specify an action as an option.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00160">popup.cpp:160</a></div></div>
<div class="ttc" id="aclassquery__popup_html_aa26700877b0cf2a70bb3af9926c9588b"><div class="ttname"><a href="classquery__popup.html#aa26700877b0cf2a70bb3af9926c9588b">query_popup::query</a></div><div class="ttdeci">result query()</div><div class="ttdoc">Query until a valid action or an error happens and return the result.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8cpp_source.html#l00403">popup.cpp:403</a></div></div>
<div class="ttc" id="aclassquery__popup_html_ab8f062cd374f409c7191b608c074ec1c"><div class="ttname"><a href="classquery__popup.html#ab8f062cd374f409c7191b608c074ec1c">query_popup::message</a></div><div class="ttdeci">query_popup &amp; message(const std::string &amp;fmt, Args &amp;&amp;... args)</div><div class="ttdoc">Specify the query message.</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00089">popup.h:89</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a28173ebcffae962fc376d3207b28bc36"><div class="ttname"><a href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a></div><div class="ttdeci">static const activity_id ACT_GENERIC_GAME(&quot;ACT_GENERIC_GAME&quot;)</div></div>
<div class="ttc" id="astructquery__popup_1_1result_html_a319891694f37a6970df28ca2279cf851"><div class="ttname"><a href="structquery__popup_1_1result.html#a319891694f37a6970df28ca2279cf851">query_popup::result::action</a></div><div class="ttdeci">std::string action</div><div class="ttdef"><b>Definition:</b> <a href="popup_8h_source.html#l00066">popup.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, <a class="el" href="popup_8h_source.html#l00066">query_popup::result::action</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l10717">Character::can_hear()</a>, <a class="el" href="popup_8cpp_source.html#l00153">query_popup::context()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="character__inventory_8cpp_source.html#l00565">Character::get_item_position()</a>, <a class="el" href="character_8cpp_source.html#l07413">Character::get_shout_volume()</a>, <a class="el" href="npc_8cpp_source.html#l02260">npc::is_ally()</a>, <a class="el" href="creature_8h_source.html#l00265">Creature::is_avatar()</a>, <a class="el" href="popup_8h_source.html#l00089">query_popup::message()</a>, <a class="el" href="translations_8h_source.html#l00091">n_gettext</a>, <a class="el" href="popup_8cpp_source.html#l00160">query_popup::option()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="popup_8cpp_source.html#l00403">query_popup::query()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1cb12a40a0a229ae9901588301ba37c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cb12a40a0a229ae9901588301ba37c5">&#9670;&nbsp;</a></span>play_music()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iuse::play_music </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_morale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03773">3773</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;{</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="comment">// TODO: what about other &quot;player&quot;, e.g. when a NPC is listening or when the PC is listening,</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <span class="comment">// the other characters around should be able to profit as well.</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> do_effects = p &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#ab0ad8a1c48785fa554d5b2f662248697">can_hear</a>( source, <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>();</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    std::string <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ab294eb68522c1ed565bb30a6476ce9f2">sound</a> = <span class="stringliteral">&quot;music&quot;</span>;</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160; </div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( <a class="code" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>(</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                                  get_option&lt;int&gt;( <span class="stringliteral">&quot;DESCRIBE_MUSIC_FREQUENCY&quot;</span> ) ) ) ) {</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        <span class="comment">// Every X minutes, describe the music</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="namespacemusic.html">music</a> = <a class="code" href="iuse_8cpp.html#ae7aa54e18e458e0542264b6039053136">get_music_description</a>();</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="namespacemusic.html">music</a>.empty() ) {</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;            <a class="code" href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ab294eb68522c1ed565bb30a6476ce9f2">sound</a> = <a class="code" href="namespacemusic.html">music</a>;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;            <span class="comment">// descriptions aren&#39;t printed for sounds at our position</span></div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;            <span class="keywordflow">if</span>( do_effects &amp;&amp; p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() == source ) {</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You listen to %s&quot;</span> ), <a class="code" href="namespacemusic.html">music</a> );</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;            }</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        }</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    }</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160; </div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> != 0 ) {</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        <a class="code" href="namespacesounds.html#a554f3adef264edde34e8c53e22022e3d">sounds::ambient_sound</a>( source, <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a>, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::sound_t::music</a>, sound );</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    }</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160; </div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <span class="keywordflow">if</span>( do_effects ) {</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ae1891fc61c3cb4d5a199eaecbbafe3c7">effect_music</a>, 1_turns );</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#a8e336d6b24cd55f48ba13b9a62519ffb">MORALE_MUSIC</a>, 1, max_morale, 5_minutes, 2_minutes, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        <span class="comment">// mp3 player reduces hearing</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">volume</a> == 0 ) {</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a>, 1_turns );</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;        }</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;    }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4f0bdbd929787a486a0dd5748ef10c65"><div class="ttname"><a href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">Character::in_sleep_state</a></div><div class="ttdeci">bool in_sleep_state() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09307">character.cpp:9307</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ac9366c6b0a0c6068675bf92321130b46"><div class="ttname"><a href="iuse_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a></div><div class="ttdeci">static const efftype_id effect_earphones(&quot;earphones&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae1891fc61c3cb4d5a199eaecbbafe3c7"><div class="ttname"><a href="iuse_8cpp.html#ae1891fc61c3cb4d5a199eaecbbafe3c7">effect_music</a></div><div class="ttdeci">static const efftype_id effect_music(&quot;music&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae7aa54e18e458e0542264b6039053136"><div class="ttname"><a href="iuse_8cpp.html#ae7aa54e18e458e0542264b6039053136">get_music_description</a></div><div class="ttdeci">static std::string get_music_description()</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03743">iuse.cpp:3743</a></div></div>
<div class="ttc" id="anamespacemusic_html"><div class="ttname"><a href="namespacemusic.html">music</a></div><div class="ttdef"><b>Definition:</b> <a href="music_8cpp_source.html#l00027">music.cpp:28</a></div></div>
<div class="ttc" id="anamespacemusic_html_a9c32fc77ff4a8513eb6beec268d48e12ab294eb68522c1ed565bb30a6476ce9f2"><div class="ttname"><a href="namespacemusic.html#a9c32fc77ff4a8513eb6beec268d48e12ab294eb68522c1ed565bb30a6476ce9f2">music::sound</a></div><div class="ttdeci">@ sound</div><div class="ttdef"><b>Definition:</b> <a href="music_8h_source.html#l00013">music.h:13</a></div></div>
<div class="ttc" id="anamespacesounds_html_a554f3adef264edde34e8c53e22022e3d"><div class="ttname"><a href="namespacesounds.html#a554f3adef264edde34e8c53e22022e3d">sounds::ambient_sound</a></div><div class="ttdeci">void ambient_sound(const tripoint &amp;p, int vol, sound_t category, const std::string &amp;description)</div><div class="ttdoc">Functions identical to sound(..., true).</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l00312">sounds.cpp:312</a></div></div>
<div class="ttc" id="anamespaceunits_html_a5d16607c866588620acb381e7dbbf0a6"><div class="ttname"><a href="namespaceunits.html#a5d16607c866588620acb381e7dbbf0a6">units::volume</a></div><div class="ttdeci">quantity&lt; int, volume_in_milliliter_tag &gt; volume</div><div class="ttdef"><b>Definition:</b> <a href="units__fwd_8h_source.html#l00017">units_fwd.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="sounds_8cpp_source.html#l00312">sounds::ambient_sound()</a>, <a class="el" href="character_8cpp_source.html#l10717">Character::can_hear()</a>, <a class="el" href="iuse_8cpp.html#ac9366c6b0a0c6068675bf92321130b46">effect_earphones</a>, <a class="el" href="iuse_8cpp.html#ae1891fc61c3cb4d5a199eaecbbafe3c7">effect_music</a>, <a class="el" href="calendar_8h_source.html#l00233">time_duration::from_minutes()</a>, <a class="el" href="iuse_8cpp_source.html#l03743">get_music_description()</a>, <a class="el" href="character_8cpp_source.html#l09307">Character::in_sleep_state()</a>, <a class="el" href="morale__types_8cpp.html#a8e336d6b24cd55f48ba13b9a62519ffb">MORALE_MUSIC</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a18d6769919266cd0bd6cd78aa405d5d0">sounds::music</a>, <a class="el" href="calendar_8cpp_source.html#l00753">calendar::once_every()</a>, and <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00937">vehicle::play_music()</a>.</p>

</div>
</div>
<a id="a58c2604cb18e59b64c1e993b52bcb49f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c2604cb18e59b64c1e993b52bcb49f">&#9670;&nbsp;</a></span>poison()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::poison </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Strength increases EATPOISON trait effectiveness (50-90%) 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00907">907</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;{</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a> ) ) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// NPCs have a magical sense of what is inedible</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// Players can abuse the crafting menu instead...</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a> ) &amp;&amp;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        ( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ||</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;          !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to eat this?  It looks poisonous&quot;</span> ) ) ) ) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">    /** @EFFECT_STR increases EATPOISON trait effectiveness (50-90%) */</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#aa454ed582bf25901dbbaa716ee23f621">trait_EATPOISON</a> ) &amp;&amp; ( !<a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( p-&gt;<a class="code" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> / 2 ) ) ) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, 1_hours );</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a>, 3_hours );</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a9cbb8a5112cb5a6227de1e4867bf5d41"><div class="ttname"><a href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a></div><div class="ttdeci">const flag_id flag_HIDDEN_POISON(&quot;HIDDEN_POISON&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a1eb34af6b7fba64663cb266638373e1b"><div class="ttname"><a href="iuse_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a></div><div class="ttdeci">static const trait_id trait_EATDEAD(&quot;EATDEAD&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa454ed582bf25901dbbaa716ee23f621"><div class="ttname"><a href="iuse_8cpp.html#aa454ed582bf25901dbbaa716ee23f621">trait_EATPOISON</a></div><div class="ttdeci">static const trait_id trait_EATPOISON(&quot;EATPOISON&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_add6199d38f99fd7341acd9e5b7f2df63"><div class="ttname"><a href="iuse_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a></div><div class="ttdeci">static const efftype_id effect_foodpoison(&quot;foodpoison&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="iuse_8cpp.html#add6199d38f99fd7341acd9e5b7f2df63">effect_foodpoison</a>, <a class="el" href="iuse_8cpp.html#ace42425e1e703ebbe953ade0f6110b7c">effect_poison</a>, <a class="el" href="flag_8cpp.html#a9cbb8a5112cb5a6227de1e4867bf5d41">flag_HIDDEN_POISON</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="character_8h_source.html#l00577">Character::str_cur</a>, <a class="el" href="iuse_8cpp.html#a1eb34af6b7fba64663cb266638373e1b">trait_EATDEAD</a>, and <a class="el" href="iuse_8cpp.html#aa454ed582bf25901dbbaa716ee23f621">trait_EATPOISON</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="savegame__json_8cpp_source.html#l02812">item::io()</a>.</p>

</div>
</div>
<a id="a85b7f720ce7cd6c3b8cc00791a8a46e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b7f720ce7cd6c3b8cc00791a8a46e0">&#9670;&nbsp;</a></span>portable_game()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::portable_game </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04023">4023</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;{</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        <span class="comment">// Long action</span></div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    }</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    }</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    }</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re illiterate!&quot;</span> ) );</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() != <a class="code" href="iuse_8cpp.html#a1f66e867258f406f4781c62bf925fbb1">itype_arcade_machine</a> &amp;&amp; !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s batteries are dead.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        std::string loaded_software = <span class="stringliteral">&quot;robot_finds_kitten&quot;</span>;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;        <span class="comment">// number of nearby friends with gaming devices</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;        std::vector&lt;npc *&gt; friends_w_game = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_npcs_if( [&amp;it, p]( <span class="keyword">const</span> <a class="code" href="classnpc.html">npc</a> &amp; n ) {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;            <span class="keywordflow">return</span> n.<a class="code" href="classnpc.html#ab762e1b5cc3053fb9b04df37714e14b7">is_player_ally</a>() &amp;&amp; p-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( n ) &amp;&amp;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;                   n.<a class="code" href="classCharacter.html#ab0ad8a1c48785fa554d5b2f662248697">can_hear</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), p-&gt;<a class="code" href="classCharacter.html#af9d3573dd5389eef3e7db0475b134095">get_shout_volume</a>() ) &amp;&amp;</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;            n.<a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( [&amp;it]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                return i.typeId() == it-&gt;typeId() &amp;&amp; i.ammo_sufficient( nullptr );</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;            } );</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;        } );</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160; </div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;        <a class="code" href="classuilist.html">uilist</a> as_m;</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;        as_m.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What do you want to play?&quot;</span> );</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;        as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 1, <span class="keyword">true</span>, <span class="charliteral">&#39;1&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;robotfindskitten&quot;</span> ) );</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 2, <span class="keyword">true</span>, <span class="charliteral">&#39;2&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;S N A K E&quot;</span> ) );</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 3, <span class="keyword">true</span>, <span class="charliteral">&#39;3&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Sokoban&quot;</span> ) );</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;        as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 4, <span class="keyword">true</span>, <span class="charliteral">&#39;4&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Minesweeper&quot;</span> ) );</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;        as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 5, <span class="keyword">true</span>, <span class="charliteral">&#39;5&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lights on!&quot;</span> ) );</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;        <span class="keywordflow">if</span>( friends_w_game.empty() ) {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;            as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 6, <span class="keyword">true</span>, <span class="charliteral">&#39;6&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play anything for a while&quot;</span> ) );</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;            as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 6, <span class="keyword">true</span>, <span class="charliteral">&#39;6&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play something with friends&quot;</span> ) );</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            as_m.<a class="code" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( 7, <span class="keyword">true</span>, <span class="charliteral">&#39;7&#39;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Play something alone&quot;</span> ) );</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;        }</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;        as_m.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;        <span class="keywordtype">bool</span> w_friends = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;        <span class="keywordflow">switch</span>( as_m.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) {</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                loaded_software = <span class="stringliteral">&quot;robot_finds_kitten&quot;</span>;</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                loaded_software = <span class="stringliteral">&quot;snake_game&quot;</span>;</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                loaded_software = <span class="stringliteral">&quot;sokoban_game&quot;</span>;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;            <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;                loaded_software = <span class="stringliteral">&quot;minesweeper_game&quot;</span>;</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                loaded_software = <span class="stringliteral">&quot;lightson_game&quot;</span>;</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;            <span class="keywordflow">case</span> 6:</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;                loaded_software = <span class="stringliteral">&quot;null&quot;</span>;</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;                w_friends = !friends_w_game.empty();</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;            <span class="keywordflow">case</span> 7: {</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                <span class="keywordflow">if</span>( friends_w_game.empty() ) {</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                }</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                loaded_software = <span class="stringliteral">&quot;null&quot;</span>;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;            }</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                <span class="comment">//Cancel</span></div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;        }</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160; </div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;        <span class="comment">//Play in 15-minute chunks</span></div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( 15_minutes );</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;        <span class="keywordtype">size_t</span> num_friends = w_friends ? friends_w_game.size() : 0;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;        <span class="keywordtype">int</span> winner = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, num_friends );</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;        <span class="keywordflow">if</span>( winner == 0 ) {</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;            winner = <a class="code" href="character_8h.html#abaafa6561de05c3b1324214e3048745a">get_player_character</a>().<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>().<a class="code" href="classcharacter__id.html#a57a3bebd5dc5168d0b278cfccdbdcd18">get_value</a>();</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;            winner = friends_w_game[winner - 1]-&gt;getID().get_value();</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;        }</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;        <a class="code" href="classplayer__activity.html">player_activity</a> game_act( <a class="code" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, to_moves&lt;int&gt;( 1_hours ), num_friends,</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                                  p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ), w_friends ? <span class="stringliteral">&quot;gaming with friends&quot;</span> : <span class="stringliteral">&quot;gaming&quot;</span> );</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;        game_act.values.emplace_back( winner );</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160; </div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;        <span class="keywordflow">if</span>( w_friends ) {</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;            std::string it_name = it-&gt;<a class="code" href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">type_name</a>( num_friends + 1 );</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;            <span class="keywordflow">if</span>( num_friends &gt; 1 ) {</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You and your %1$u friends play on your %2$s for a while.&quot;</span> ), num_friends,</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                                      it_name );</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You and your friend play on your %s for a while.&quot;</span> ), it_name );</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;            }</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classnpc.html">npc</a> *n : friends_w_game ) {</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                std::vector&lt;item *&gt; nit = n-&gt;<a class="code" href="classCharacter.html#a0e8509fc038cee083b5a7cc7bdf0f8f9">cache_get_items_with</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>(), []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; i ) {</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                    return i.ammo_sufficient( nullptr );</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                } );</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;                n-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( game_act );</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;                n-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *n, nit.front() );</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;                n-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a3c0f4901d647d15e63531cf1091daf19">position</a> = n-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( nit.front() );</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;            }</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You play on your %s for a while.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;        }</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        <span class="keywordflow">if</span>( loaded_software == <span class="stringliteral">&quot;null&quot;</span> ) {</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( game_act );</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *p, it );</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;        }</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#a42d6b7855ec8abf909a933f7f2d10b71">ACT_GAME</a>, moves, -1, 0, <span class="stringliteral">&quot;gaming&quot;</span> );</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *p, it );</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;        std::map&lt;std::string, std::string&gt; game_data;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;        game_data.clear();</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;        <span class="keywordtype">int</span> game_score = 0;</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160; </div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;        <a class="code" href="iuse__software_8cpp.html#ac1695181c85ba087f331907711bf501e">play_videogame</a>( loaded_software, game_data, game_score );</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160; </div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        <span class="keywordflow">if</span>( game_data.find( <span class="stringliteral">&quot;end_message&quot;</span> ) != game_data.end() ) {</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( game_data[<span class="stringliteral">&quot;end_message&quot;</span>] );</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;        }</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160; </div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;        <span class="keywordflow">if</span>( game_score != 0 ) {</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;            <span class="keywordflow">if</span>( game_data.find( <span class="stringliteral">&quot;moraletype&quot;</span> ) != game_data.end() ) {</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                std::string moraletype = game_data.find( <span class="stringliteral">&quot;moraletype&quot;</span> )-&gt;second;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                <span class="keywordflow">if</span>( moraletype == <span class="stringliteral">&quot;MORALE_GAME_FOUND_KITTEN&quot;</span> ) {</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#adb3eb8d82d0478b848e399a8db0d6243">MORALE_GAME_FOUND_KITTEN</a>, game_score, 110 );</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                } <span class="comment">/*else if ( ...*/</span></div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#acdb2e41937e75c45a45d458493d2270e">MORALE_GAME</a>, game_score, 110 );</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;            }</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        }</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160; </div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    }</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;}</div>
<div class="ttc" id="aclasscharacter__id_html_a57a3bebd5dc5168d0b278cfccdbdcd18"><div class="ttname"><a href="classcharacter__id.html#a57a3bebd5dc5168d0b278cfccdbdcd18">character_id::get_value</a></div><div class="ttdeci">int get_value() const</div><div class="ttdef"><b>Definition:</b> <a href="character__id_8h_source.html#l00021">character_id.h:21</a></div></div>
<div class="ttc" id="aclassitem_html_abfb7ed1fed5f72c532192eb33e6c4962"><div class="ttname"><a href="classitem.html#abfb7ed1fed5f72c532192eb33e6c4962">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1, bool use_variant=true, bool use_cond_name=true, bool use_corpse=true) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14449">item.cpp:14449</a></div></div>
<div class="ttc" id="aclassnpc_html_ab762e1b5cc3053fb9b04df37714e14b7"><div class="ttname"><a href="classnpc.html#ab762e1b5cc3053fb9b04df37714e14b7">npc::is_player_ally</a></div><div class="ttdeci">bool is_player_ally() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02297">npc.cpp:2297</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a3c0f4901d647d15e63531cf1091daf19"><div class="ttname"><a href="classplayer__activity.html#a3c0f4901d647d15e63531cf1091daf19">player_activity::position</a></div><div class="ttdeci">int position</div><div class="ttdoc">An activity specific value.</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00059">player_activity.h:59</a></div></div>
<div class="ttc" id="aclassvisitable_html_abf24bf044bbf16def702fd78351fc46f"><div class="ttname"><a href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">visitable::has_item_with</a></div><div class="ttdeci">bool has_item_with(const std::function&lt; bool(const item &amp;)&gt; &amp;filter) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00083">visitable.cpp:83</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a1f66e867258f406f4781c62bf925fbb1"><div class="ttname"><a href="iuse_8cpp.html#a1f66e867258f406f4781c62bf925fbb1">itype_arcade_machine</a></div><div class="ttdeci">static const itype_id itype_arcade_machine(&quot;arcade_machine&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a42d6b7855ec8abf909a933f7f2d10b71"><div class="ttname"><a href="iuse_8cpp.html#a42d6b7855ec8abf909a933f7f2d10b71">ACT_GAME</a></div><div class="ttdeci">static const activity_id ACT_GAME(&quot;ACT_GAME&quot;)</div></div>
<div class="ttc" id="aiuse__software_8cpp_html_ac1695181c85ba087f331907711bf501e"><div class="ttname"><a href="iuse__software_8cpp.html#ac1695181c85ba087f331907711bf501e">play_videogame</a></div><div class="ttdeci">bool play_videogame(const std::string &amp;function_name, std::map&lt; std::string, std::string &gt; &amp;game_data, int &amp;score)</div><div class="ttdef"><b>Definition:</b> <a href="iuse__software_8cpp_source.html#l00015">iuse_software.cpp:15</a></div></div>
<div class="ttc" id="amorale__types_8cpp_html_acdb2e41937e75c45a45d458493d2270e"><div class="ttname"><a href="morale__types_8cpp.html#acdb2e41937e75c45a45d458493d2270e">MORALE_GAME</a></div><div class="ttdeci">const morale_type MORALE_GAME(&quot;morale_game&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_adb3eb8d82d0478b848e399a8db0d6243"><div class="ttname"><a href="morale__types_8cpp.html#adb3eb8d82d0478b848e399a8db0d6243">MORALE_GAME_FOUND_KITTEN</a></div><div class="ttdeci">const morale_type MORALE_GAME_FOUND_KITTEN(&quot;morale_game_found_kitten&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#a42d6b7855ec8abf909a933f7f2d10b71">ACT_GAME</a>, <a class="el" href="iuse_8cpp.html#a28173ebcffae962fc376d3207b28bc36">ACT_GENERIC_GAME</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character__morale_8cpp_source.html#l00142">Character::add_morale()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8cpp_source.html#l09494">Character::cache_get_items_with()</a>, <a class="el" href="character_8cpp_source.html#l10717">Character::can_hear()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="ui_8h_source.html#l00422">uilist::entries</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="character__inventory_8cpp_source.html#l00565">Character::get_item_position()</a>, <a class="el" href="game_8cpp_source.html#l13807">get_player_character()</a>, <a class="el" href="character_8cpp_source.html#l07413">Character::get_shout_volume()</a>, <a class="el" href="character__id_8h_source.html#l00021">character_id::get_value()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="visitable_8cpp_source.html#l00083">visitable::has_item_with()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="npc_8cpp_source.html#l02297">npc::is_player_ally()</a>, <a class="el" href="iuse_8cpp.html#a1f66e867258f406f4781c62bf925fbb1">itype_arcade_machine</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="morale__types_8cpp.html#acdb2e41937e75c45a45d458493d2270e">MORALE_GAME</a>, <a class="el" href="morale__types_8cpp.html#adb3eb8d82d0478b848e399a8db0d6243">MORALE_GAME_FOUND_KITTEN</a>, <a class="el" href="iuse__software_8cpp_source.html#l00015">play_videogame()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="player__activity_8h_source.html#l00059">player_activity::position</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, <a class="el" href="item_8cpp_source.html#l14449">item::type_name()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="player__activity_8h_source.html#l00062">player_activity::values</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l00285">vehicle::build_electronics_menu()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a17324fc3e69608300deb4760f7ff10da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17324fc3e69608300deb4760f7ff10da">&#9670;&nbsp;</a></span>portal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::portal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03561">3561</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;{</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    }</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    }</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> t( p-&gt;<a class="code" href="classCreature.html#aecea7d852ffba499ec12350c95340b9d">posx</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 ), p-&gt;<a class="code" href="classCreature.html#a9f0365208b65ab1c45d23f03f402f491">posy</a>() + <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( -2, 2 ), p-&gt;<a class="code" href="classCreature.html#a88c28bc08aa3e0d6fa1b187cee97d1c4">posz</a>() );</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().<a class="code" href="classmap.html#ade82e480520c05f5a4e8917df19cef8c">trap_set</a>( t, <a class="code" href="trap_8cpp.html#a6ae504247f90efd7f9bfcd7b2bad7ae6">tr_portal</a> );</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;}</div>
<div class="ttc" id="atrap_8cpp_html_a6ae504247f90efd7f9bfcd7b2bad7ae6"><div class="ttname"><a href="trap_8cpp.html#a6ae504247f90efd7f9bfcd7b2bad7ae6">tr_portal</a></div><div class="ttdeci">const trap_str_id tr_portal(&quot;tr_portal&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="creature_8h_source.html#l00311">Creature::posx()</a>, <a class="el" href="creature_8h_source.html#l00314">Creature::posy()</a>, <a class="el" href="creature_8h_source.html#l00317">Creature::posz()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="trap_8cpp.html#a6ae504247f90efd7f9bfcd7b2bad7ae6">tr_portal</a>, and <a class="el" href="map_8cpp_source.html#l06297">map::trap_set()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ab0f3c19d61836eb7b474eae278b603ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f3c19d61836eb7b474eae278b603ca">&#9670;&nbsp;</a></span>prozac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::prozac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00973">973</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;{</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a09fec42ea1d19920f66b5a9afd8e7606">effect_took_prozac</a> ) ) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a09fec42ea1d19920f66b5a9afd8e7606">effect_took_prozac</a>, 12_hours );</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( 3 );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) ) { <span class="comment">// adverse reaction, same duration as prozac effect.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You suddenly feel hollow inside.&quot;</span> ) );</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#af06d6c676520c79c4ada995dcb0494ef">effect_took_prozac_bad</a>, p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#a09fec42ea1d19920f66b5a9afd8e7606">effect_took_prozac</a> ) );</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ad1f53618cbfaff69e3d1f8d614455e3a">effect_took_prozac_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a09fec42ea1d19920f66b5a9afd8e7606"><div class="ttname"><a href="iuse_8cpp.html#a09fec42ea1d19920f66b5a9afd8e7606">effect_took_prozac</a></div><div class="ttdeci">static const efftype_id effect_took_prozac(&quot;took_prozac&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad1f53618cbfaff69e3d1f8d614455e3a"><div class="ttname"><a href="iuse_8cpp.html#ad1f53618cbfaff69e3d1f8d614455e3a">effect_took_prozac_visible</a></div><div class="ttdeci">static const efftype_id effect_took_prozac_visible(&quot;took_prozac_visible&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af06d6c676520c79c4ada995dcb0494ef"><div class="ttname"><a href="iuse_8cpp.html#af06d6c676520c79c4ada995dcb0494ef">effect_took_prozac_bad</a></div><div class="ttdeci">static const efftype_id effect_took_prozac_bad(&quot;took_prozac_bad&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a09fec42ea1d19920f66b5a9afd8e7606">effect_took_prozac</a>, <a class="el" href="iuse_8cpp.html#af06d6c676520c79c4ada995dcb0494ef">effect_took_prozac_bad</a>, <a class="el" href="iuse_8cpp.html#ad1f53618cbfaff69e3d1f8d614455e3a">effect_took_prozac_visible</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="character_8cpp_source.html#l06752">Character::mod_stim()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, and <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ab170ea3231e8cb4e0957cef21d8921c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab170ea3231e8cb4e0957cef21d8921c8">&#9670;&nbsp;</a></span>purify_smart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::purify_smart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01164">1164</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;{</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    std::vector&lt;trait_id&gt; valid; <span class="comment">// Which flags the player has</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    std::vector&lt;std::string&gt; valid_names; <span class="comment">// Which flags the player has</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structmutation__branch.html">mutation_branch</a> &amp;traits_iter : <a class="code" href="structmutation__branch.html#a15421800b8099c46fc7ed169e607ac56">mutation_branch::get_all</a>() ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( traits_iter.id ) &amp;&amp;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            !p-&gt;<a class="code" href="classCharacter.html#a8e6396a377235ed8f76339fb4d1cff2c">has_base_trait</a>( traits_iter.id ) &amp;&amp;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a3505ef1972b6c13e0fe19946e31c1474">purifiable</a>( traits_iter.id ) ) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            <span class="comment">//Looks for active mutation</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            valid.push_back( traits_iter.id );</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            valid_names.push_back( p-&gt;<a class="code" href="classCharacter.html#a248ff3360a76d3c24283a711a33b915c">mutation_name</a>( traits_iter.id ) );</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">if</span>( valid.empty() ) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any mutations to purify.&quot;</span> ) );</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordtype">int</span> mutation_index = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose a mutation to purify: &quot;</span> ), valid_names );</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// Because valid_names doesn&#39;t start with a space,</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// include one here to prettify the output</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span>( mutation_index &lt; 0 ) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inject the purifier.  The liquid thrashes inside the tube and goes down reluctantly.&quot;</span> ) );</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a1874479b9834819441c65081acf5fa05">remove_mutation</a>( valid[mutation_index] );</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    valid.erase( valid.begin() + mutation_index );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// and one or two more untargeted purifications.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">if</span>( !valid.empty() ) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a1874479b9834819441c65081acf5fa05">remove_mutation</a>( <a class="code" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( valid ) );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span>( !valid.empty() &amp;&amp; <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a1874479b9834819441c65081acf5fa05">remove_mutation</a>( <a class="code" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( valid ) );</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( 3 );</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="classitem.html">item</a> syringe( <span class="stringliteral">&quot;syringe&quot;</span>, it-&gt;<a class="code" href="classitem.html#a46b9bb1181827a365eb83d935c663677">birthday</a>() );</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">i_add</a>( syringe );</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">vitamins_mod</a>( it-&gt;<a class="code" href="classitem.html#a411163e892e27c57b802d0d015c05162">get_comestible</a>()-&gt;default_nutrition.vitamins() );</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a9ba82f400cd81bc3911637aeb78ff97c">event_type::administers_mutagen</a>&gt;( p-&gt;<a class="code" href="classCharacter.html#adb54bdcb284abb66b6be99c8ae225065">getID</a>(),</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <a class="code" href="mutation_8h.html#a2012fbeb10f692e9f86dfe9590e27849ac292a684363fc5c425e052ca5a5af0a7">mutagen_technique::injected_smart_purifier</a> );</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1874479b9834819441c65081acf5fa05"><div class="ttname"><a href="classCharacter.html#a1874479b9834819441c65081acf5fa05">Character::remove_mutation</a></div><div class="ttdeci">void remove_mutation(const trait_id &amp;mut, bool silent=false)</div><div class="ttdoc">Removes a mutation, downgrading to the previous level if possible.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01996">mutation.cpp:1996</a></div></div>
<div class="ttc" id="aclassCharacter_html_a248ff3360a76d3c24283a711a33b915c"><div class="ttname"><a href="classCharacter.html#a248ff3360a76d3c24283a711a33b915c">Character::mutation_name</a></div><div class="ttdeci">std::string mutation_name(const trait_id &amp;mut) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l02334">mutation.cpp:2334</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3505ef1972b6c13e0fe19946e31c1474"><div class="ttname"><a href="classCharacter.html#a3505ef1972b6c13e0fe19946e31c1474">Character::purifiable</a></div><div class="ttdeci">bool purifiable(const trait_id &amp;flag) const</div><div class="ttdoc">Returns true if the entered trait may be purified away Defaults to true.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l01971">mutation.cpp:1971</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e6396a377235ed8f76339fb4d1cff2c"><div class="ttname"><a href="classCharacter.html#a8e6396a377235ed8f76339fb4d1cff2c">Character::has_base_trait</a></div><div class="ttdeci">bool has_base_trait(const trait_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered starting trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00169">mutation.cpp:169</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac39374642038bc8b3dff5346d8a92000"><div class="ttname"><a href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">Character::vitamins_mod</a></div><div class="ttdeci">void vitamins_mod(const std::map&lt; vitamin_id, int &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00662">consumption.cpp:662</a></div></div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a9ba82f400cd81bc3911637aeb78ff97c"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a9ba82f400cd81bc3911637aeb78ff97c">event_type::administers_mutagen</a></div><div class="ttdeci">@ administers_mutagen</div></div>
<div class="ttc" id="amutation_8h_html_a2012fbeb10f692e9f86dfe9590e27849ac292a684363fc5c425e052ca5a5af0a7"><div class="ttname"><a href="mutation_8h.html#a2012fbeb10f692e9f86dfe9590e27849ac292a684363fc5c425e052ca5a5af0a7">mutagen_technique::injected_smart_purifier</a></div><div class="ttdeci">@ injected_smart_purifier</div></div>
<div class="ttc" id="arng_8h_html_ac634f688b3c7864ab6992939ac7b0a6e"><div class="ttname"><a href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a></div><div class="ttdeci">V random_entry_removed(C &amp;container)</div><div class="ttdoc">Returns a random entry in the container and removes it from the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00186">rng.h:186</a></div></div>
<div class="ttc" id="astructmutation__branch_html"><div class="ttname"><a href="structmutation__branch.html">mutation_branch</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00172">mutation.h:172</a></div></div>
<div class="ttc" id="astructmutation__branch_html_a15421800b8099c46fc7ed169e607ac56"><div class="ttname"><a href="structmutation__branch.html#a15421800b8099c46fc7ed169e607ac56">mutation_branch::get_all</a></div><div class="ttdeci">static const std::vector&lt; mutation_branch &gt; &amp; get_all()</div><div class="ttdoc">All known mutations.</div><div class="ttdef"><b>Definition:</b> <a href="mutation__data_8cpp_source.html#l00849">mutation_data.cpp:849</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a9ba82f400cd81bc3911637aeb78ff97c">administers_mutagen</a>, <a class="el" href="item_8cpp_source.html#l14686">item::birthday()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00849">mutation_branch::get_all()</a>, <a class="el" href="item_8cpp_source.html#l14803">item::get_comestible()</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8cpp_source.html#l00652">Character::getID()</a>, <a class="el" href="mutation_8cpp_source.html#l00169">Character::has_base_trait()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00326">Character::i_add()</a>, <a class="el" href="mutation_8h.html#a2012fbeb10f692e9f86dfe9590e27849ac292a684363fc5c425e052ca5a5af0a7">injected_smart_purifier</a>, <a class="el" href="character_8cpp_source.html#l12483">Character::mod_pain()</a>, <a class="el" href="mutation_8cpp_source.html#l02334">Character::mutation_name()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="mutation_8cpp_source.html#l01971">Character::purifiable()</a>, <a class="el" href="rng_8h_source.html#l00186">random_entry_removed()</a>, <a class="el" href="mutation_8cpp_source.html#l01996">Character::remove_mutation()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, and <a class="el" href="consumption_8cpp_source.html#l00662">Character::vitamins_mod()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a804fce8e3d1ae7476d41f0cc16699f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a804fce8e3d1ae7476d41f0cc16699f88">&#9670;&nbsp;</a></span>radglove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radglove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05096">5096</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;{</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ) &gt;= -1 ) {</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You must wear the radiation biomonitor before you can activate it.&quot;</span> ) );</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The radiation biomonitor needs batteries to function.&quot;</span> ) );</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You activate your radiation biomonitor.&quot;</span> ) );</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>() &gt;= 1 ) {</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are currently irradiated.&quot;</span> ) );</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a9fee61b7db951516b376375bbd6f189a">add_msg_player_or_say</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your radiation level: %d mSv.&quot;</span> ),</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It says here that my radiation level is %d mSv.&quot;</span> ),</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;                                      p-&gt;<a class="code" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>() );</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a9fee61b7db951516b376375bbd6f189a">add_msg_player_or_say</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You aren&#39;t currently irradiated.&quot;</span> ),</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;                                      <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It says I&#39;m not irradiated.&quot;</span> ) );</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        }</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Have a nice day!&quot;</span> ) );</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    }</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160; </div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a9fee61b7db951516b376375bbd6f189a"><div class="ttname"><a href="classCharacter.html#a9fee61b7db951516b376375bbd6f189a">Character::add_msg_player_or_say</a></div><div class="ttdeci">void add_msg_player_or_say(const std::string &amp;player_msg, const std::string &amp;npc_speech) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00879">character.cpp:879</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00879">Character::add_msg_player_or_say()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00565">Character::get_item_position()</a>, <a class="el" href="character_8cpp_source.html#l06757">Character::get_rad()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, and <a class="el" href="enums_8h_source.html#l00351">m_warning</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5f2a515f184aaf7f4ca5d597e7231bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f2a515f184aaf7f4ca5d597e7231bce">&#9670;&nbsp;</a></span>radio_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radio_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01637">1637</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;{</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="comment">// Now THAT would be kinda cruel</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keyword">auto</span> <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">return</span> itm.has_flag( <a class="code" href="flag_8cpp.html#af0c7be16091ec964d909d9255aa736f7">flag_RADIO_MODABLE</a> );</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    };</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="comment">// note: if !p-&gt;is_npc() then p is avatar</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>(</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                            filter, *p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>(), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Modify what?&quot;</span> ) );</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <a class="code" href="classitem.html">item</a> &amp;modded = *loc;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Which signal should activate the item?&quot;</span> ), {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Red\&quot;&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Blue\&quot;&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Green\&quot;&quot;</span> )</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    } );</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="classstring__id.html">flag_id</a> newtag;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    std::string colorname;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            newtag = <a class="code" href="flag_8cpp.html#a20d9b9b13ede35084497c208f9938184">flag_RADIOSIGNAL_1</a>;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            colorname = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Red\&quot;&quot;</span> );</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            newtag = <a class="code" href="flag_8cpp.html#a7b1205d03feada08c8559220b861548a">flag_RADIOSIGNAL_2</a>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            colorname = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Blue\&quot;&quot;</span> );</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            newtag = <a class="code" href="flag_8cpp.html#a174140adb2da2c8f0ec6e3779cc5aee2">flag_RADIOSIGNAL_3</a>;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            colorname = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;\&quot;Green\&quot;&quot;</span> );</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span>( modded.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a> ) &amp;&amp; modded.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( newtag ) ) {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;This item has been modified this way already.&quot;</span> ) );</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="iuse_8cpp.html#a521afc478ad191054bba94040845dae7">remove_radio_mod</a>( modded, *p );</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You modify your %1$s to listen for the %2$s activation signal on the radio.&quot;</span> ),</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        modded.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), colorname );</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    modded.<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a> )</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    .<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a> )</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    .<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a> )</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    .<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( newtag );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;}</div>
<div class="ttc" id="aflag_8cpp_html_a03638a62d3262fbbe23590142201ab63"><div class="ttname"><a href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a></div><div class="ttdeci">const flag_id flag_RADIO_ACTIVATION(&quot;RADIO_ACTIVATION&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a174140adb2da2c8f0ec6e3779cc5aee2"><div class="ttname"><a href="flag_8cpp.html#a174140adb2da2c8f0ec6e3779cc5aee2">flag_RADIOSIGNAL_3</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_3(&quot;RADIOSIGNAL_3&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a20d9b9b13ede35084497c208f9938184"><div class="ttname"><a href="flag_8cpp.html#a20d9b9b13ede35084497c208f9938184">flag_RADIOSIGNAL_1</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_1(&quot;RADIOSIGNAL_1&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a51adb974be6e6a32ab5a78cd541556b0"><div class="ttname"><a href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a></div><div class="ttdeci">const flag_id flag_RADIOCARITEM(&quot;RADIOCARITEM&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a70f7136fda398c1e666898d83307791c"><div class="ttname"><a href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a></div><div class="ttdeci">const flag_id flag_RADIO_MOD(&quot;RADIO_MOD&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7b1205d03feada08c8559220b861548a"><div class="ttname"><a href="flag_8cpp.html#a7b1205d03feada08c8559220b861548a">flag_RADIOSIGNAL_2</a></div><div class="ttdeci">const flag_id flag_RADIOSIGNAL_2(&quot;RADIOSIGNAL_2&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_af0c7be16091ec964d909d9255aa736f7"><div class="ttname"><a href="flag_8cpp.html#af0c7be16091ec964d909d9255aa736f7">flag_RADIO_MODABLE</a></div><div class="ttdeci">const flag_id flag_RADIO_MODABLE(&quot;RADIO_MODABLE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a521afc478ad191054bba94040845dae7"><div class="ttname"><a href="iuse_8cpp.html#a521afc478ad191054bba94040845dae7">remove_radio_mod</a></div><div class="ttdeci">void remove_radio_mod(item &amp;it, Character &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00434">iuse.cpp:434</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#a03638a62d3262fbbe23590142201ab63">flag_RADIO_ACTIVATION</a>, <a class="el" href="flag_8cpp.html#a70f7136fda398c1e666898d83307791c">flag_RADIO_MOD</a>, <a class="el" href="flag_8cpp.html#af0c7be16091ec964d909d9255aa736f7">flag_RADIO_MODABLE</a>, <a class="el" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a>, <a class="el" href="flag_8cpp.html#a20d9b9b13ede35084497c208f9938184">flag_RADIOSIGNAL_1</a>, <a class="el" href="flag_8cpp.html#a7b1205d03feada08c8559220b861548a">flag_RADIOSIGNAL_2</a>, <a class="el" href="flag_8cpp.html#a174140adb2da2c8f0ec6e3779cc5aee2">flag_RADIOSIGNAL_3</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="iuse_8cpp_source.html#l00434">remove_radio_mod()</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5257e1a41f6c18543b2cb2769cf3b5e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5257e1a41f6c18543b2cb2769cf3b5e0">&#9670;&nbsp;</a></span>radio_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radio_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02462">2462</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;{</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It&#39;s dead.&quot;</span> ) );</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the radio on.&quot;</span> ) );</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, and <a class="el" href="iuse_8cpp.html#a731e18ebb9fe98be814fd8e70499907d">itype_radio_on</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9d9dea35382b5a1d73cda29cc1d4302a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9dea35382b5a1d73cda29cc1d4302a">&#9670;&nbsp;</a></span>radio_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radio_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02582">2582</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;{</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> tower_desc = []( <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacespell__effect.html#a778d669e005669b220e9643309e48d25">noise</a> ) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="keywordflow">if</span>( noise == 0 ) {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_0&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( noise &lt;= 20 ) {</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_20&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( noise &lt;= 40 ) {</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_40&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( noise &lt;= 60 ) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_60&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( noise &lt;= 80 ) {</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_80&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        }</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_station_desc_noise_max&quot;</span> )-&gt;translated();</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    };</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160; </div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    std::vector&lt;radio_tower_reference&gt; <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a> = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a9ce6fbc8481dcd30fbf1483cd0099b09">find_all_radio_stations</a>();</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.<a class="code" href="classcata__path.html#a7f2f127dbfbedaad66da359be8984543">empty</a>() ) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code" href="text__snippets_8cpp.html#ac3fc11c159cd056aa15ad7c0b37b070a">SNIPPET</a>.<a class="code" href="classsnippet__library.html#a685c0168b039e17ca677a61e21900fe1">random_from_category</a>( <span class="stringliteral">&quot;radio_scan_no_stations&quot;</span> )-&gt;translated() );</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <a class="code" href="classuilist.html">uilist</a> scanlist;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    scanlist.<a class="code" href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">title</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select a station&quot;</span> );</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    scanlist.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a>, <span class="stringliteral">&quot;Radio scan:&quot;</span> );</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.size(); ++i ) {</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        std::string selected_text;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        <span class="keyword">const</span> <a class="code" href="structradio__tower__reference.html">radio_tower_reference</a> &amp;tref = <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>[i];</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#ad16474656a39dfa7b0d89aec3345308f">frequency</a> == tref.<a class="code" href="structradio__tower__reference.html#a26f2e82817817ca5291a8376bb416784">tower</a>-&gt;<a class="code" href="structradio__tower.html#a4223126d1dc2658ece35c232ce57e98d">frequency</a> ) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            selected_text = <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;radio station&quot;</span>, <span class="stringliteral">&quot; (selected)&quot;</span> );</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        }</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="comment">//~ Selected radio station, %d is a number in sequence (1,2,3...),</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="comment">//~ %s is &#39; (selected)&#39; if this is the radio station playing, else nothing</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        <span class="keyword">const</span> std::string station_name = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Station %d%s&quot;</span> ), i + 1, selected_text );</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> noise_chance = <a class="code" href="iuse_8cpp.html#ac0fa89bd6bfd9883a96ccc72b9b3c268">radio_static_chance</a>( tref );</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        scanlist.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( i, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, station_name, tower_desc( noise_chance ) );</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keyword">const</span> <a class="code" href="classcoords_1_1coord__point.html">point_abs_omt</a> dbgpos = project_to&lt;coords::omt&gt;( tref.<a class="code" href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">abs_sm_pos</a> );</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a>, <span class="stringliteral">&quot;  %d: %d at (%d %d) str [%d/%d]&quot;</span>, i + 1, tref.<a class="code" href="structradio__tower__reference.html#a26f2e82817817ca5291a8376bb416784">tower</a>-&gt;<a class="code" href="structradio__tower.html#a4223126d1dc2658ece35c232ce57e98d">frequency</a>,</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                       dbgpos.<a class="code" href="classcoords_1_1coord__point__mut.html#a0fa1f1039d6d6f5b5f744a5d3d039a02">x</a>(), dbgpos.<a class="code" href="classcoords_1_1coord__point__mut.html#a0e6b02267065e16149a37d98991f653e">y</a>(), tref.<a class="code" href="structradio__tower__reference.html#acf3cbb74d3da593ef07b179ace7324ae">signal_strength</a>, tref.<a class="code" href="structradio__tower__reference.html#a26f2e82817817ca5291a8376bb416784">tower</a>-&gt;<a class="code" href="structradio__tower.html#ab75e98832450a68008a2bb9608dc23f1">strength</a> );</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    }</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    scanlist.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sel = scanlist.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordflow">if</span>( sel &gt;= 0 &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( sel ) &lt; <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>.size() ) {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        it-&gt;<a class="code" href="classitem.html#ad16474656a39dfa7b0d89aec3345308f">frequency</a> = <a class="code" href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">options</a>[sel].tower-&gt;frequency;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;}</div>
<div class="ttc" id="aclasscata__path_html_a7f2f127dbfbedaad66da359be8984543"><div class="ttname"><a href="classcata__path.html#a7f2f127dbfbedaad66da359be8984543">cata_path::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="cata__path_8h_source.html#l00123">cata_path.h:123</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a0e6b02267065e16149a37d98991f653e"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a0e6b02267065e16149a37d98991f653e">coords::coord_point_mut::y</a></div><div class="ttdeci">constexpr auto y() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00164">coordinates.h:164</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point__mut_html_a0fa1f1039d6d6f5b5f744a5d3d039a02"><div class="ttname"><a href="classcoords_1_1coord__point__mut.html#a0fa1f1039d6d6f5b5f744a5d3d039a02">coords::coord_point_mut::x</a></div><div class="ttdeci">constexpr auto x() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00161">coordinates.h:161</a></div></div>
<div class="ttc" id="aclassitem_html_ad16474656a39dfa7b0d89aec3345308f"><div class="ttname"><a href="classitem.html#ad16474656a39dfa7b0d89aec3345308f">item::frequency</a></div><div class="ttdeci">int frequency</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03139">item.h:3139</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_a9ce6fbc8481dcd30fbf1483cd0099b09"><div class="ttname"><a href="classovermapbuffer.html#a9ce6fbc8481dcd30fbf1483cd0099b09">overmapbuffer::find_all_radio_stations</a></div><div class="ttdeci">std::vector&lt; radio_tower_reference &gt; find_all_radio_stations()</div><div class="ttdoc">Find all radio stations that can be received around the current player location.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01398">overmapbuffer.cpp:1398</a></div></div>
<div class="ttc" id="aclassuilist_html_a53ff5990a6abb4e7da837db31afea4b8"><div class="ttname"><a href="classuilist.html#a53ff5990a6abb4e7da837db31afea4b8">uilist::title</a></div><div class="ttdeci">std::string title</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00418">ui.h:418</a></div></div>
<div class="ttc" id="aclassuilist_html_adc2a36afdfede40aa5927aa8c3b0d526"><div class="ttname"><a href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">uilist::addentry_desc</a></div><div class="ttdeci">void addentry_desc(const std::string &amp;txt, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01227">ui.cpp:1227</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ac0fa89bd6bfd9883a96ccc72b9b3c268"><div class="ttname"><a href="iuse_8cpp.html#ac0fa89bd6bfd9883a96ccc72b9b3c268">radio_static_chance</a></div><div class="ttdeci">static int radio_static_chance(const radio_tower_reference &amp;tref)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l02505">iuse.cpp:2505</a></div></div>
<div class="ttc" id="anamespacePATH__INFO_html_af0e23485ab96118ed88e3e573b597636"><div class="ttname"><a href="namespacePATH__INFO.html#af0e23485ab96118ed88e3e573b597636">PATH_INFO::options</a></div><div class="ttdeci">cata_path options()</div><div class="ttdef"><b>Definition:</b> <a href="path__info_8cpp_source.html#l00354">path_info.cpp:354</a></div></div>
<div class="ttc" id="anamespacedebugmode_html_ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4"><div class="ttname"><a href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a></div><div class="ttdeci">@ DF_RADIO</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00272">debug.h:272</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_a778d669e005669b220e9643309e48d25"><div class="ttname"><a href="namespacespell__effect.html#a778d669e005669b220e9643309e48d25">spell_effect::noise</a></div><div class="ttdeci">void noise(const spell &amp;sp, Creature &amp;, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l01319">magic_spell_effect.cpp:1319</a></div></div>
<div class="ttc" id="astructradio__tower__reference_html_a26f2e82817817ca5291a8376bb416784"><div class="ttname"><a href="structradio__tower__reference.html#a26f2e82817817ca5291a8376bb416784">radio_tower_reference::tower</a></div><div class="ttdeci">radio_tower * tower</div><div class="ttdoc">The radio tower itself, points into overmap::radios.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00062">overmapbuffer.h:62</a></div></div>
<div class="ttc" id="astructradio__tower__reference_html_acf3cbb74d3da593ef07b179ace7324ae"><div class="ttname"><a href="structradio__tower__reference.html#acf3cbb74d3da593ef07b179ace7324ae">radio_tower_reference::signal_strength</a></div><div class="ttdeci">int signal_strength</div><div class="ttdoc">Perceived signal strength (tower output strength minus distance)</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00066">overmapbuffer.h:66</a></div></div>
<div class="ttc" id="astructradio__tower_html_a4223126d1dc2658ece35c232ce57e98d"><div class="ttname"><a href="structradio__tower.html#a4223126d1dc2658ece35c232ce57e98d">radio_tower::frequency</a></div><div class="ttdeci">int frequency</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00083">overmap.h:83</a></div></div>
<div class="ttc" id="astructradio__tower_html_ab75e98832450a68008a2bb9608dc23f1"><div class="ttname"><a href="structradio__tower.html#ab75e98832450a68008a2bb9608dc23f1">radio_tower::strength</a></div><div class="ttdeci">int strength</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00080">overmap.h:80</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00038">ui.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="overmapbuffer_8h_source.html#l00064">radio_tower_reference::abs_sm_pos</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="ui_8cpp_source.html#l01227">uilist::addentry_desc()</a>, <a class="el" href="ui_8h_source.html#l00451">uilist::desc_enabled</a>, <a class="el" href="debug_8h_source.html#l00272">debugmode::DF_RADIO</a>, <a class="el" href="cata__path_8h_source.html#l00123">cata_path::empty()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01398">overmapbuffer::find_all_radio_stations()</a>, <a class="el" href="item_8h_source.html#l03139">item::frequency</a>, <a class="el" href="overmap_8h_source.html#l00083">radio_tower::frequency</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="path__info_8cpp_source.html#l00354">PATH_INFO::options()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="iuse_8cpp_source.html#l02505">radio_static_chance()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00286">snippet_library::random_from_category()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="overmapbuffer_8h_source.html#l00066">radio_tower_reference::signal_strength</a>, <a class="el" href="text__snippets_8cpp_source.html#l00015">SNIPPET</a>, <a class="el" href="overmap_8h_source.html#l00080">radio_tower::strength</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="ui_8h_source.html#l00418">uilist::title</a>, <a class="el" href="overmapbuffer_8h_source.html#l00062">radio_tower_reference::tower</a>, <a class="el" href="coordinates_8h_source.html#l00161">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::x()</a>, and <a class="el" href="coordinates_8h_source.html#l00164">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a6ed9908cabb36951f63aa480cafe71c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed9908cabb36951f63aa480cafe71c4">&#9670;&nbsp;</a></span>radio_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radio_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02528">2528</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;{</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    std::string <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Radio: Kssssssssssssh.&quot;</span> );</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keyword">const</span> <a class="code" href="structradio__tower__reference.html">radio_tower_reference</a> tref = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#a52ff63bf974047e40515dffc2b413167">find_radio_station</a>( it-&gt;<a class="code" href="classitem.html#ad16474656a39dfa7b0d89aec3345308f">frequency</a> );</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a>, <span class="stringliteral">&quot;Set freq: %d&quot;</span>, it-&gt;<a class="code" href="classitem.html#ad16474656a39dfa7b0d89aec3345308f">frequency</a> );</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">if</span>( tref ) {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <a class="code" href="classcoords_1_1coord__point.html">point_abs_omt</a> dbgpos = project_to&lt;coords::omt&gt;( tref.<a class="code" href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">abs_sm_pos</a> );</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a>, <span class="stringliteral">&quot;found broadcast (str %d) at (%d %d)&quot;</span>,</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                       tref.<a class="code" href="structradio__tower__reference.html#acf3cbb74d3da593ef07b179ace7324ae">signal_strength</a>, dbgpos.<a class="code" href="classcoords_1_1coord__point__mut.html#a0fa1f1039d6d6f5b5f744a5d3d039a02">x</a>(), dbgpos.<a class="code" href="classcoords_1_1coord__point__mut.html#a0e6b02267065e16149a37d98991f653e">y</a>() );</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;        <span class="keyword">const</span> <a class="code" href="structradio__tower.html">radio_tower</a> *selected_tower = tref.<a class="code" href="structradio__tower__reference.html#a26f2e82817817ca5291a8376bb416784">tower</a>;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;        <span class="keywordflow">if</span>( selected_tower-&gt;<a class="code" href="structradio__tower.html#a2aaf6a73aa073d5f221e99b24d5e13bd">type</a> == <a class="code" href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6a0082e2c3663f70eda1cdda6145f2f2dd">radio_type::MESSAGE_BROADCAST</a> ) {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = selected_tower-&gt;<a class="code" href="structradio__tower.html#a03f6968ebcba8b7137577d55fd51196b">message</a>;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( selected_tower-&gt;<a class="code" href="structradio__tower.html#a2aaf6a73aa073d5f221e99b24d5e13bd">type</a> == <a class="code" href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6ae9bf89949c50540e0c72274a5520f5cc">radio_type::WEATHER_RADIO</a> ) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code" href="group__Weather.html#gab4893f4bb0b6f5044689488bf2ce20c3">weather_forecast</a>( tref.<a class="code" href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">abs_sm_pos</a> );</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        }</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160; </div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keyword">const</span> <a class="code" href="structcity.html">city</a> *<a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">closest_city</a>( <a class="code" href="coordinates_8h.html#ae72b84003f239e5e878a036da3758331">tripoint_abs_sm</a>( tref.<a class="code" href="structradio__tower__reference.html#ac13e6b8f6baac0d892f30845bb7d2d3d">abs_sm_pos</a>, 0 ) ).<a class="code" href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city</a>;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="comment">//~ radio noise</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keyword">const</span> std::string cityname = <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> == <span class="keyword">nullptr</span> ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ksssh&quot;</span> ) : <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>-&gt;<a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160; </div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        <a class="code" href="output_8cpp.html#a5a99cc337f99bf5186366cc4f548d28e">replace_city_tag</a>( <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>, cityname );</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <span class="keywordtype">int</span> static_chance = <a class="code" href="iuse_8cpp.html#ac0fa89bd6bfd9883a96ccc72b9b3c268">radio_static_chance</a>( tref );</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <a class="code" href="messages_8h.html#ab6590bda29b082a7282bcc1a9cc8f02a">add_msg_debug</a>( <a class="code" href="namespacedebugmode.html#ac654a55a1b56b11554103f87859968f2af4aae2ac9b6b3cb050a345ee91bcc8e4">debugmode::DF_RADIO</a>, <span class="stringliteral">&quot;Message: &#39;%s&#39; at %d%% noise&quot;</span>, <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>, static_chance );</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code" href="cata__utility_8cpp.html#ae4c8dd74377a990aa6e62bf4d8446e8b">obscure_message</a>( <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>, [&amp;static_chance]()-&gt;<span class="keywordtype">int</span> {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( static_chance, 100 ) )</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;            {</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                <span class="comment">// Gradually replace random characters with noise as distance increases</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) &amp;&amp; static_chance - <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, 25 ) &lt; 50 ) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                    <span class="comment">// Replace with random character</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                <span class="comment">// Replace with &#39;#&#39;</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                <span class="keywordflow">return</span> <span class="charliteral">&#39;#&#39;</span>;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            <span class="comment">// Leave unchanged</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        } );</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        std::vector&lt;std::string&gt; <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a> = <a class="code" href="output_8cpp.html#aea67d56cef07017be061e1ceefee80df">foldstring</a>( <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a>, <a class="code" href="iuse_8cpp.html#a972adda40bd181c749a1db633d405669">RADIO_PER_TURN</a> );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <span class="keywordtype">int</span> index = to_turn&lt;int&gt;( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) % <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a>.size();</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;radio: %s&quot;</span> ), <a class="code" href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">segments</a>[index] );</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="namespacesounds.html#a554f3adef264edde34e8c53e22022e3d">sounds::ambient_sound</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, 6, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>, <a class="code" href="namespacemapgen__defer.html#a616ad2c7ee2eb002b683b41b04a888c1">message</a> );</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="namespacesfx.html#a88183e69d6d84f21907582b482f2aa1b">sfx::is_channel_playing</a>( <a class="code" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">sfx::channel::radio</a> ) ) {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;            <a class="code" href="namespacesfx.html#ac2a55615b8a564140e0743f5084d7ab6">sfx::play_ambient_variant_sound</a>( <span class="stringliteral">&quot;radio&quot;</span>, <span class="stringliteral">&quot;static&quot;</span>, 100, <a class="code" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">sfx::channel::radio</a>, 300, -1, 0 );</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ) {</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;            <a class="code" href="namespacesfx.html#ac2a55615b8a564140e0743f5084d7ab6">sfx::play_ambient_variant_sound</a>( <span class="stringliteral">&quot;radio&quot;</span>, <span class="stringliteral">&quot;inaudible_chatter&quot;</span>, 100, <a class="code" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">sfx::channel::radio</a>, 300, -1,</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                                             0 );</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        }</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_ae4c8dd74377a990aa6e62bf4d8446e8b"><div class="ttname"><a href="cata__utility_8cpp.html#ae4c8dd74377a990aa6e62bf4d8446e8b">obscure_message</a></div><div class="ttdeci">std::string obscure_message(const std::string &amp;str, const std::function&lt; char()&gt; &amp;f)</div><div class="ttdoc">Apply fuzzy effect to a string like: Hello, world! --&gt; H##lo, wurl#!</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00606">cata_utility.cpp:606</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_ae65ce03be0ec7c6890583b7ae2ee639f"><div class="ttname"><a href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">overmapbuffer::closest_city</a></div><div class="ttdeci">city_reference closest_city(const tripoint_abs_sm &amp;center)</div><div class="ttdoc">Find the closest city.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01476">overmapbuffer.cpp:1476</a></div></div>
<div class="ttc" id="acoordinates_8h_html_ae72b84003f239e5e878a036da3758331"><div class="ttname"><a href="coordinates_8h.html#ae72b84003f239e5e878a036da3758331">tripoint_abs_sm</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::abs, coords::sm &gt; tripoint_abs_sm</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00720">coordinates.h:720</a></div></div>
<div class="ttc" id="agroup__Weather_html_gab4893f4bb0b6f5044689488bf2ce20c3"><div class="ttname"><a href="group__Weather.html#gab4893f4bb0b6f5044689488bf2ce20c3">weather_forecast</a></div><div class="ttdeci">std::string weather_forecast(const point_abs_sm &amp;abs_sm_pos)</div><div class="ttdoc">Generate textual weather forecast for the specified radio tower.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00524">weather.cpp:524</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a972adda40bd181c749a1db633d405669"><div class="ttname"><a href="iuse_8cpp.html#a972adda40bd181c749a1db633d405669">RADIO_PER_TURN</a></div><div class="ttdeci">static constexpr int RADIO_PER_TURN</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00384">iuse.cpp:384</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">static constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01568">magic.cpp:1568</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l06412">overmap.cpp:6412</a></div></div>
<div class="ttc" id="anamespacesfx_html_a88183e69d6d84f21907582b482f2aa1b"><div class="ttname"><a href="namespacesfx.html#a88183e69d6d84f21907582b482f2aa1b">sfx::is_channel_playing</a></div><div class="ttdeci">bool is_channel_playing(channel channel)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l02019">sounds.cpp:2019</a></div></div>
<div class="ttc" id="anamespacesfx_html_ac2a55615b8a564140e0743f5084d7ab6"><div class="ttname"><a href="namespacesfx.html#ac2a55615b8a564140e0743f5084d7ab6">sfx::play_ambient_variant_sound</a></div><div class="ttdeci">void play_ambient_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, channel channel, int fade_in_duration, double pitch=-1.0, int loops=-1)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l02002">sounds.cpp:2002</a></div></div>
<div class="ttc" id="anamespacetname_html_aa6dc2a5ef81ad3157f8280d5645e3ea6"><div class="ttname"><a href="namespacetname.html#aa6dc2a5ef81ad3157f8280d5645e3ea6">tname::segments</a></div><div class="ttdeci">segments</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8h_source.html#l00018">item_tname.h:18</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a5a99cc337f99bf5186366cc4f548d28e"><div class="ttname"><a href="output_8cpp.html#a5a99cc337f99bf5186366cc4f548d28e">replace_city_tag</a></div><div class="ttdeci">void replace_city_tag(std::string &amp;input, const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02490">output.cpp:2490</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aea67d56cef07017be061e1ceefee80df"><div class="ttname"><a href="output_8cpp.html#aea67d56cef07017be061e1ceefee80df">foldstring</a></div><div class="ttdeci">std::vector&lt; std::string &gt; foldstring(const std::string &amp;str, int width, const char split)</div><div class="ttdoc">Split the input text into separate lines and wrap long lines.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00123">output.cpp:123</a></div></div>
<div class="ttc" id="aovermap_8h_html_a70d86ad55f59766b1ec9c303f6133ca6a0082e2c3663f70eda1cdda6145f2f2dd"><div class="ttname"><a href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6a0082e2c3663f70eda1cdda6145f2f2dd">radio_type::MESSAGE_BROADCAST</a></div><div class="ttdeci">@ MESSAGE_BROADCAST</div></div>
<div class="ttc" id="aovermap_8h_html_a70d86ad55f59766b1ec9c303f6133ca6ae9bf89949c50540e0c72274a5520f5cc"><div class="ttname"><a href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6ae9bf89949c50540e0c72274a5520f5cc">radio_type::WEATHER_RADIO</a></div><div class="ttdeci">@ WEATHER_RADIO</div></div>
<div class="ttc" id="astructcity__reference_html_ab0c773d91319598da593679bf737f4aa"><div class="ttname"><a href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city_reference::city</a></div><div class="ttdeci">const struct city * city</div><div class="ttdoc">The city itself, points into overmap::cities.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00075">overmapbuffer.h:75</a></div></div>
<div class="ttc" id="astructcity_html"><div class="ttname"><a href="structcity.html">city</a></div><div class="ttdef"><b>Definition:</b> <a href="city_8h_source.html#l00015">city.h:15</a></div></div>
<div class="ttc" id="astructradio__tower_html"><div class="ttname"><a href="structradio__tower.html">radio_tower</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00077">overmap.h:77</a></div></div>
<div class="ttc" id="astructradio__tower_html_a03f6968ebcba8b7137577d55fd51196b"><div class="ttname"><a href="structradio__tower.html#a03f6968ebcba8b7137577d55fd51196b">radio_tower::message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00082">overmap.h:82</a></div></div>
<div class="ttc" id="astructradio__tower_html_a2aaf6a73aa073d5f221e99b24d5e13bd"><div class="ttname"><a href="structradio__tower.html#a2aaf6a73aa073d5f221e99b24d5e13bd">radio_tower::type</a></div><div class="ttdeci">radio_type type</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00081">overmap.h:81</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="overmapbuffer_8h_source.html#l00064">radio_tower_reference::abs_sm_pos</a>, <a class="el" href="messages_8h_source.html#l00177">add_msg_debug</a>, <a class="el" href="sounds_8cpp_source.html#l00312">sounds::ambient_sound()</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="overmapbuffer_8h_source.html#l00075">city_reference::city</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01476">overmapbuffer::closest_city()</a>, <a class="el" href="debug_8h_source.html#l00272">debugmode::DF_RADIO</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01384">overmapbuffer::find_radio_station()</a>, <a class="el" href="output_8cpp_source.html#l00123">foldstring()</a>, <a class="el" href="item_8h_source.html#l03139">item::frequency</a>, <a class="el" href="sounds_8cpp_source.html#l02019">sfx::is_channel_playing()</a>, <a class="el" href="mapgen_8cpp_source.html#l00632">mapgen_defer::message</a>, <a class="el" href="overmap_8h_source.html#l00082">radio_tower::message</a>, <a class="el" href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6a0082e2c3663f70eda1cdda6145f2f2dd">MESSAGE_BROADCAST</a>, <a class="el" href="cata__utility_8cpp_source.html#l00606">obscure_message()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="sounds_8cpp_source.html#l02002">sfx::play_ambient_variant_sound()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="namespacesfx.html#af20f2b1f5492d2f2d793da6d29740f18aa398fb77df76e6153df57cd65fd0a7c5">sfx::radio</a>, <a class="el" href="iuse_8cpp_source.html#l00384">RADIO_PER_TURN</a>, <a class="el" href="iuse_8cpp_source.html#l02505">radio_static_chance()</a>, <a class="el" href="output_8cpp_source.html#l02490">replace_city_tag()</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="overmapbuffer_8h_source.html#l00066">radio_tower_reference::signal_strength</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="overmapbuffer_8h_source.html#l00062">radio_tower_reference::tower</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="overmap_8h_source.html#l00081">radio_tower::type</a>, <a class="el" href="weather_8cpp_source.html#l00524">weather_forecast()</a>, <a class="el" href="overmap_8h.html#a70d86ad55f59766b1ec9c303f6133ca6ae9bf89949c50540e0c72274a5520f5cc">WEATHER_RADIO</a>, <a class="el" href="coordinates_8h_source.html#l00161">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::x()</a>, <a class="el" href="calendar_8cpp_source.html#l00784">x_in_y()</a>, and <a class="el" href="coordinates_8h_source.html#l00164">coords::coord_point_mut&lt; Point, Subpoint, InBounds &gt;::y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aae6ef12d4b7a69abb68652ab447f7b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6ef12d4b7a69abb68652ab447f7b7b">&#9670;&nbsp;</a></span>radiocar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radiocar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l06949">6949</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;{</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;    <span class="keywordtype">int</span> choice = -1;</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;    <a class="code" href="classitem.html">item</a> *bomb_it = it-&gt;<a class="code" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">get_item_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) {</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>.has_flag( <a class="code" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a> );</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;    } );</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;    <span class="keywordflow">if</span>( bomb_it == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;        choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Using RC car:&quot;</span> ), {</div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Put a bomb to car&quot;</span> )</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;        } );</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;        choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Using RC car:&quot;</span> ), {</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on&quot;</span> ), bomb_it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>()</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;        } );</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;    }</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;    }</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160; </div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;    <span class="keywordflow">if</span>( choice == 0 ) { <span class="comment">//Turn car ON</span></div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The RC car&#39;s batteries seem to be dead.&quot;</span> ) );</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;        }</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160; </div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#aca01588ad9ce25ed095aee31c62f3cb8">itype_radio_car_on</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160; </div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turned on your RC car; now place it on the ground, and use your radio control to play.&quot;</span> ) );</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160; </div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;    }</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160; </div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;    <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160; </div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;        <span class="keywordflow">if</span>( bomb_it == <span class="keyword">nullptr</span> ) { <span class="comment">//arming car with bomb</span></div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160; </div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;            <a class="code" href="classavatar.html">avatar</a> *you = p-&gt;<a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>();</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;            <a class="code" href="classitem__location.html">item_location</a> loc;</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;            <span class="keywordflow">if</span>( you != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;                loc = <a class="code" href="namespacegame__menus_1_1inv.html#ae7ae320be6561b1bdf63acdb07e0aad9">game_menus::inv::titled_filter_menu</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;                    <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a> );</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;                }, *you, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Arm what?&quot;</span> ) );</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;            }</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;            <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;            }</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;            <a class="code" href="classitem.html">item</a> &amp;put = *loc;</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160; </div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;            <span class="keywordflow">if</span>( put.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a> ) &amp;&amp; ( put.<a class="code" href="classitem.html#a686df014e8aa8bc4637883802d05f935">volume</a>() &lt;= 1250_ml ||</div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;                    ( put.<a class="code" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() &lt;= 2_kilogram ) ) ) {</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;                p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 3_seconds ) );</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You armed your RC car with %s.&quot;</span> ),</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;                                      put.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;                it-&gt;<a class="code" href="classitem.html#a018fe1a11eaa7e18cae915d683088c02">put_in</a>( p-&gt;<a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( &amp;put ), <a class="code" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">pocket_type::CONTAINER</a> );</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !put.<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a> ) ) {</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You want to arm your RC car with %s?  But how?&quot;</span> ),</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;                                      put.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s is too heavy or bulky for this RC car.&quot;</span> ),</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;                                      put.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;            }</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// Disarm the car</span></div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160; </div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;assign_empty_invlet( *bomb_it, *p, <span class="keyword">true</span> ); <span class="comment">// force getting an invlet.</span></div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af04d061e415da9cb6f1fc234b04f3dfb">i_add</a>( *bomb_it );</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;            it-&gt;<a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *bomb_it );</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160; </div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You disarmed your RC car.&quot;</span> ) );</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;        }</div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;    }</div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160; </div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a96ec9152d401f128cf31a7cc35c97f65"><div class="ttname"><a href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">Character::inv</a></div><div class="ttdeci">pimpl&lt; inventory &gt; inv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02712">character.h:2712</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdoc">Total weight of an item accounting for all contained/integrated items.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07081">item.cpp:7081</a></div></div>
<div class="ttc" id="aclassitem_html_a686df014e8aa8bc4637883802d05f935"><div class="ttname"><a href="classitem.html#a686df014e8aa8bc4637883802d05f935">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false, bool ignore_contents=false, int charges_in_vol=-1) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07360">item.cpp:7360</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aca01588ad9ce25ed095aee31c62f3cb8"><div class="ttname"><a href="iuse_8cpp.html#aca01588ad9ce25ed095aee31c62f3cb8">itype_radio_car_on</a></div><div class="ttdeci">static const itype_id itype_radio_car_on(&quot;radio_car_on&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="creature_8h_source.html#l00280">Creature::as_avatar()</a>, <a class="el" href="magic_8cpp_source.html#l01568">c</a>, <a class="el" href="pocket__type_8h.html#af41ed729a50321996f6fa60225086cf1a9bbab5f947b9e3fbb8a399ecc257459b">CONTAINER</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="flag_8cpp.html#a51adb974be6e6a32ab5a78cd541556b0">flag_RADIOCARITEM</a>, <a class="el" href="item_8cpp_source.html#l15155">item::get_item_with()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00326">Character::i_add()</a>, <a class="el" href="character__inventory_8cpp_source.html#l00433">Character::i_rem()</a>, <a class="el" href="character_8h_source.html#l02712">Character::inv</a>, <a class="el" href="iuse_8cpp.html#aca01588ad9ce25ed095aee31c62f3cb8">itype_radio_car_on</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="item_8cpp_source.html#l01784">item::put_in()</a>, <a class="el" href="visitable_8cpp_source.html#l00543">visitable::remove_item()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00315">game_menus::inv::titled_filter_menu()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l07360">item::volume()</a>, and <a class="el" href="item_8cpp_source.html#l07081">item::weight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa2bc3df10296a34a3757586995cdb8b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bc3df10296a34a3757586995cdb8b1">&#9670;&nbsp;</a></span>radiocaron()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radiocaron </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07026">7026</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;{</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;        <span class="comment">// Deactivate since other mode has an iuse too.</span></div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a15c663645df7776172ed0f17fb3e4225">itype_radio_car</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;    }</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160; </div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;    <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with your activated RC car?&quot;</span> ), {</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn off&quot;</span> )</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;    } );</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160; </div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;    }</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160; </div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a15c663645df7776172ed0f17fb3e4225">itype_radio_car</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160; </div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turned off your RC car.&quot;</span> ) );</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;    }</div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160; </div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a15c663645df7776172ed0f17fb3e4225"><div class="ttname"><a href="iuse_8cpp.html#a15c663645df7776172ed0f17fb3e4225">itype_radio_car</a></div><div class="ttdeci">static const itype_id itype_radio_car(&quot;radio_car&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, and <a class="el" href="iuse_8cpp.html#a15c663645df7776172ed0f17fb3e4225">itype_radio_car</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aedb4fef2a26209ed9508557251219116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb4fef2a26209ed9508557251219116">&#9670;&nbsp;</a></span>radiocontrol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radiocontrol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07111">7111</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;{</div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *car_action = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160; </div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;        car_action = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take control of RC car&quot;</span> );</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;        car_action = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop controlling RC car&quot;</span> );</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    }</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160; </div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;    <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with the radio control?&quot;</span> ), {</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;        car_action,</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Press red button&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Press blue button&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Press green button&quot;</span> )</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;    } );</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160; </div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 ) {</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> ) {</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;            it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a6ad06869ed97eb2701f5f74b7d36281e">remove_value</a>( <span class="stringliteral">&quot;remote_controlling&quot;</span> );</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;            std::list&lt;std::pair&lt;tripoint, item *&gt;&gt; rc_pairs = here.get_rc_items();</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;            <a class="code" href="structtripoint.html">tripoint</a> rc_item_location = {999, 999, 999};</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;            <span class="comment">// TODO: grab the closest car or similar?</span></div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;rc_pairs_rc_pair : rc_pairs ) {</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;                <span class="keywordflow">if</span>( rc_pairs_rc_pair.second-&gt;has_flag( <a class="code" href="flag_8cpp.html#a6142ef2344548e5b1fcaa1f79edc01a3">flag_RADIOCAR</a> ) &amp;&amp;</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;                    rc_pairs_rc_pair.second-&gt;active ) {</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;                    rc_item_location = rc_pairs_rc_pair.first;</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;                }</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;            }</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;            <span class="keywordflow">if</span>( rc_item_location.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> == 999 ) {</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No active RC cars on ground and in range.&quot;</span> ) );</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;                std::stringstream car_location_string;</div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;                <span class="comment">// Populate with the point and stash it.</span></div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;                car_location_string &lt;&lt; rc_item_location.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt;</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;                                    rc_item_location.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; rc_item_location.<a class="code" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take control of the RC car.&quot;</span> ) );</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160; </div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;                p-&gt;<a class="code" href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">set_value</a>( <span class="stringliteral">&quot;remote_controlling&quot;</span>, car_location_string.str() );</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;                it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;            }</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;        }</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;        <span class="keyword">const</span> <a class="code" href="classstring__id.html">flag_id</a> signal( <span class="stringliteral">&quot;RADIOSIGNAL_&quot;</span> + <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">std::to_string</a>( choice ) );</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160; </div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <a class="code" href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a>, [&amp;p, &amp;signal]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;        if( it.has_flag( flag_RADIO_ACTIVATION ) &amp;&amp; it.has_flag( signal ) ) {</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;                p-&gt;add_msg_if_player( m_warning,</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;                                      _( <span class="stringliteral">&quot;The %s in your inventory would explode on this signal.  Place it down before sending the signal.&quot;</span> ),</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;                                      it.display_name() );</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;                return true;</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;            }</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;        } ) ) {</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;        }</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160; </div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">cache_has_item_with</a>( <a class="code" href="flag_8cpp.html#a66c76029d00a2b1fa122d2521c85ba16">flag_RADIO_CONTAINER</a>, [&amp;p, &amp;signal]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;        const item *rad_cont = it.get_item_with( [&amp;signal]( const item &amp; c ) {</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;            return c.has_flag( flag_BOMB ) &amp;&amp; c.has_flag( signal );</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;            } );</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;            <span class="keywordflow">if</span>( rad_cont != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;                p-&gt;add_msg_if_player( m_warning,</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;                                      _( <span class="stringliteral">&quot;The %1$s in your %2$s would explode on this signal.  Place it down before sending the signal.&quot;</span> ),</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;                                      rad_cont-&gt;display_name(), it.display_name() );</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;                return true;</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;            }</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;        } ) ) {</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;        }</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160; </div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Click.&quot;</span> ) );</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;        <a class="code" href="iuse_8cpp.html#adf03d76171c22fa47150325ee7d824e7">sendRadioSignal</a>( *p, signal );</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;    }</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160; </div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a826c5c424fe53228582a9995a5bad7d5"><div class="ttname"><a href="classCharacter.html#a826c5c424fe53228582a9995a5bad7d5">Character::cache_has_item_with</a></div><div class="ttdeci">bool cache_has_item_with(const itype_id &amp;type, const std::function&lt; bool(const item &amp;)&gt; &amp;check_func=return_true&lt; item &gt;) const</div><div class="ttdoc">Returns true if the character has an item with given flag and/or that passes the given boolean item f...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09416">character.cpp:9416</a></div></div>
<div class="ttc" id="aclassCreature_html_a04c1983abeefbf67db1e3f2b2a9b58ab"><div class="ttname"><a href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">Creature::set_value</a></div><div class="ttdeci">void set_value(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01949">creature.cpp:1949</a></div></div>
<div class="ttc" id="aclassCreature_html_a6ad06869ed97eb2701f5f74b7d36281e"><div class="ttname"><a href="classCreature.html#a6ad06869ed97eb2701f5f74b7d36281e">Creature::remove_value</a></div><div class="ttdeci">void remove_value(const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01954">creature.cpp:1954</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a6142ef2344548e5b1fcaa1f79edc01a3"><div class="ttname"><a href="flag_8cpp.html#a6142ef2344548e5b1fcaa1f79edc01a3">flag_RADIOCAR</a></div><div class="ttdeci">const flag_id flag_RADIOCAR(&quot;RADIOCAR&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a66c76029d00a2b1fa122d2521c85ba16"><div class="ttname"><a href="flag_8cpp.html#a66c76029d00a2b1fa122d2521c85ba16">flag_RADIO_CONTAINER</a></div><div class="ttdeci">const flag_id flag_RADIO_CONTAINER(&quot;RADIO_CONTAINER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ad5d45b309cb751520ede6a1c591e20a6"><div class="ttname"><a href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a></div><div class="ttdeci">const flag_id flag_BOMB(&quot;BOMB&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_adf03d76171c22fa47150325ee7d824e7"><div class="ttname"><a href="iuse_8cpp.html#adf03d76171c22fa47150325ee7d824e7">sendRadioSignal</a></div><div class="ttdeci">static void sendRadioSignal(Character &amp;p, const flag_id &amp;signal)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07052">iuse.cpp:7052</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l09416">Character::cache_has_item_with()</a>, <a class="el" href="flag_8cpp.html#ad5d45b309cb751520ede6a1c591e20a6">flag_BOMB</a>, <a class="el" href="flag_8cpp.html#a66c76029d00a2b1fa122d2521c85ba16">flag_RADIO_CONTAINER</a>, <a class="el" href="flag_8cpp.html#a6142ef2344548e5b1fcaa1f79edc01a3">flag_RADIOCAR</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="creature_8cpp_source.html#l01954">Creature::remove_value()</a>, <a class="el" href="creature_8cpp_source.html#l01949">Creature::set_value()</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>, and <a class="el" href="point_8h_source.html#l00134">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1cc5c07211986b306952b42b584c2db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cc5c07211986b306952b42b584c2db2">&#9670;&nbsp;</a></span>radiocontrol_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::radiocontrol_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07092">7092</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;{</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;        <span class="comment">// Player has dropped the controller</span></div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;        <a class="code" href="classavatar.html">avatar</a> &amp;<a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a> = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;        <a class="code" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>.remove_value( <span class="stringliteral">&quot;remote_controlling&quot;</span> );</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;    }</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a6ad06869ed97eb2701f5f74b7d36281e">remove_value</a>( <span class="stringliteral">&quot;remote_controlling&quot;</span> );</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;remote_controlling&quot;</span> ).empty() ) {</div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;    }</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160; </div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;}</div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01959">creature.cpp:1959</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="creature_8cpp_source.html#l01959">Creature::get_value()</a>, <a class="el" href="craft__command_8h.html#a78e9fef1fc6aaee4239b8fa5cc3cd21fa912af0dff974604f1321254ca8ff38b6">player</a>, and <a class="el" href="creature_8cpp_source.html#l01954">Creature::remove_value()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3d986076627c9327a54e8ab036aac530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d986076627c9327a54e8ab036aac530">&#9670;&nbsp;</a></span>remoteveh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::remoteveh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07318">7318</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;{</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *remote = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh();</div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160; </div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;    <span class="keywordtype">bool</span> controlling = it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> &amp;&amp; remote != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;    <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;What to do with the remote vehicle control:&quot;</span> ), {</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;        controlling ? <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Stop controlling the vehicle.&quot;</span> ) : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Take control of a vehicle.&quot;</span> ),</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Execute one vehicle action&quot;</span> )</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;    } );</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160; </div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;    <span class="keywordflow">if</span>( choice &lt; 0 || choice &gt; 1 ) {</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;    }</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160; </div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;    <span class="keywordflow">if</span>( choice == 0 &amp;&amp; controlling ) {</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;    }</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160; </div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;    <a class="code" href="classavatar.html">avatar</a> &amp;player_character = <a class="code" href="avatar_8h.html#a7fe2c1a3376948380f856732d4f34c5c">get_avatar</a>();</div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    <a class="code" href="structpoint.html">point</a> p2( player_character.<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() );</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160; </div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *veh = <a class="code" href="iuse_8cpp.html#a7a164f99408a219acde9af7fa5a78138">pickveh</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>, choice == 0 );</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160; </div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;    <span class="keywordflow">if</span>( veh == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;    }</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160; </div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="iuse_8cpp.html#ae2fe4313590c4202ccc8e896e5a55401">hackveh</a>( *p, *it, *veh ) ) {</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;    }</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160; </div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;    <span class="keywordflow">if</span>( choice == 0 ) {</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#ada331e1a1d76dfffbc04f921862c78ca">trait_WAYFARER</a> ) ) {</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Despite using a controller, you still refuse to take control of this vehicle.&quot;</span> ) );</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;            it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;            <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( veh );</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take control of the vehicle.&quot;</span> ) );</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;            <span class="keywordflow">if</span>( !veh-&gt;<a class="code" href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">engine_on</a> ) {</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;                veh-&gt;<a class="code" href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">start_engines</a>();</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;            }</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;        }</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( choice == 1 ) {</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> rctrl_parts = veh-&gt;<a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;REMOTE_CONTROLS&quot;</span> );</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> electronics_parts = veh-&gt;<a class="code" href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">get_avail_parts</a>( <span class="stringliteral">&quot;CTRL_ELECTRONIC&quot;</span> );</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;        <span class="comment">// Revert to original behavior if we can&#39;t find remote controls.</span></div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;        <span class="keywordflow">if</span>( empty( rctrl_parts ) ) {</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;            veh-&gt;<a class="code" href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb">interact_with</a>( electronics_parts.begin()-&gt;pos() );</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;            veh-&gt;<a class="code" href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb">interact_with</a>( rctrl_parts.begin()-&gt;pos() );</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;        }</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;    }</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160; </div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;    player_character.<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a> = p2.x;</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;    player_character.<a class="code" href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">view_offset</a>.<a class="code" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a> = p2.y;</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_ad142b103f316b95f28681bd5502e79ef"><div class="ttname"><a href="classCharacter.html#ad142b103f316b95f28681bd5502e79ef">Character::view_offset</a></div><div class="ttdeci">tripoint view_offset</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02705">character.h:2705</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00801">vehicle.h:802</a></div></div>
<div class="ttc" id="aclassvehicle_html_a0ccf22f114d5d8f239ebe58f5c8f70ad"><div class="ttname"><a href="classvehicle.html#a0ccf22f114d5d8f239ebe58f5c8f70ad">vehicle::engine_on</a></div><div class="ttdeci">bool engine_on</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l02352">vehicle.h:2352</a></div></div>
<div class="ttc" id="aclassvehicle_html_a1b64eabc86039e338bf054c96f5a26ff"><div class="ttname"><a href="classvehicle.html#a1b64eabc86039e338bf054c96f5a26ff">vehicle::get_avail_parts</a></div><div class="ttdeci">vehicle_part_with_feature_range&lt; std::string &gt; get_avail_parts(std::string feature) const</div><div class="ttdoc">Yields a range of parts of this vehicle that each have the given feature and are available: not broke...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03007">vehicle.cpp:3007</a></div></div>
<div class="ttc" id="aclassvehicle_html_a7183b4a2eac4da678e316f5ca1d46e08"><div class="ttname"><a href="classvehicle.html#a7183b4a2eac4da678e316f5ca1d46e08">vehicle::start_engines</a></div><div class="ttdeci">void start_engines(bool take_control=false, bool autodrive=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l00778">vehicle_use.cpp:778</a></div></div>
<div class="ttc" id="aclassvehicle_html_ad86cc0a8a3062faefa39c24ca8e97fcb"><div class="ttname"><a href="classvehicle.html#ad86cc0a8a3062faefa39c24ca8e97fcb">vehicle::interact_with</a></div><div class="ttdeci">void interact_with(const tripoint &amp;p, bool with_pickup=false)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__use_8cpp_source.html#l02434">vehicle_use.cpp:2434</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a7a164f99408a219acde9af7fa5a78138"><div class="ttname"><a href="iuse_8cpp.html#a7a164f99408a219acde9af7fa5a78138">pickveh</a></div><div class="ttdeci">static vehicle * pickveh(const tripoint &amp;center, bool advanced)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07252">iuse.cpp:7252</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ada331e1a1d76dfffbc04f921862c78ca"><div class="ttname"><a href="iuse_8cpp.html#ada331e1a1d76dfffbc04f921862c78ca">trait_WAYFARER</a></div><div class="ttdeci">static const trait_id trait_WAYFARER(&quot;WAYFARER&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae2fe4313590c4202ccc8e896e5a55401"><div class="ttname"><a href="iuse_8cpp.html#ae2fe4313590c4202ccc8e896e5a55401">hackveh</a></div><div class="ttdeci">static bool hackveh(Character &amp;p, item &amp;it, vehicle &amp;veh)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l07195">iuse.cpp:7195</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00202">point.h:202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l15135">item::empty()</a>, <a class="el" href="vehicle_8h_source.html#l02352">vehicle::engine_on</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="vehicle_8cpp_source.html#l03007">vehicle::get_avail_parts()</a>, <a class="el" href="game_8cpp_source.html#l13817">get_avatar()</a>, <a class="el" href="iuse_8cpp_source.html#l07195">hackveh()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l02434">vehicle::interact_with()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="iuse_8cpp_source.html#l07252">pickveh()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00778">vehicle::start_engines()</a>, <a class="el" href="iuse_8cpp.html#ada331e1a1d76dfffbc04f921862c78ca">trait_WAYFARER</a>, <a class="el" href="character_8h_source.html#l02705">Character::view_offset</a>, <a class="el" href="point_8h_source.html#l00023">point::x</a>, <a class="el" href="point_8h_source.html#l00132">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00202">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00024">point::y</a>, and <a class="el" href="point_8h_source.html#l00133">tripoint::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="map_8cpp_source.html#l08008">map::shift()</a>.</p>

</div>
</div>
<a id="af5e170dc5c4229337842e4b35365b0bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e170dc5c4229337842e4b35365b0bc">&#9670;&nbsp;</a></span>remoteveh_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::remoteveh_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07296">7296</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;{</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *remote = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;remoteveh();</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;    <span class="keywordtype">bool</span> stop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The remote control&#39;s battery goes dead.&quot;</span> ) );</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;        stop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( remote == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Lost contact with the vehicle.&quot;</span> ) );</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;        stop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( remote-&gt;<a class="code" href="classvehicle.html#a1ef4731130505bdde94982112587d140">fuel_left</a>( <a class="code" href="iuse_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) == 0 ) {</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The vehicle&#39;s battery died.&quot;</span> ) );</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;        stop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;    }</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;    <span class="keywordflow">if</span>( stop ) {</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;        it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;        <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;setremoteveh( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;    }</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160; </div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;}</div>
<div class="ttc" id="aclassvehicle_html_a1ef4731130505bdde94982112587d140"><div class="ttname"><a href="classvehicle.html#a1ef4731130505bdde94982112587d140">vehicle::fuel_left</a></div><div class="ttdeci">int64_t fuel_left(const itype_id &amp;ftype, const std::function&lt; bool(const vehicle_part &amp;)&gt; &amp;filter=return_true&lt; const vehicle_part &amp; &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03516">vehicle.cpp:3516</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_ab5f267c571dc194e5b7e0b10b5136a33"><div class="ttname"><a href="iuse_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a></div><div class="ttdeci">static const itype_id itype_battery(&quot;battery&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="vehicle_8cpp_source.html#l03516">vehicle::fuel_left()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="iuse_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, and <a class="el" href="enums_8h_source.html#l00348">m_bad</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a15a5d32634c68ecc96deac6847d8c0a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a5d32634c68ecc96deac6847d8c0a7">&#9670;&nbsp;</a></span>remove_all_mods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::remove_all_mods </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l01698">1698</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;{</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *it : e.<a class="code" href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">toolmods</a>() ) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            if( !it-&gt;is_irremovable() ) {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                return true;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            }</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    },</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Remove mods from tool?&quot;</span> ), 1,</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have any modified tools.&quot;</span> ) );</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">if</span>( !loc-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() || p-&gt;<a class="code" href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">unload</a>( loc ) ) {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <a class="code" href="classitem.html">item</a> *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = loc-&gt;<a class="code" href="classitem.html#a9b88938f2a635283227bdc51a97a8988">get_item_with</a>(</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordflow">return</span> e.<a class="code" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">is_toolmod</a>() &amp;&amp; !e.<a class="code" href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">is_irremovable</a>();</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        } );</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You remove the %s from the tool.&quot;</span> ), <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>-&gt;tname() );</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae2d66e536142cf363783d099b6ae93da">i_add_or_drop</a>( *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        loc-&gt;<a class="code" href="classvisitable.html#adeb03e3af46e1b106a5f88f112add296">remove_item</a>( *<a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> );</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <a class="code" href="iuse_8cpp.html#a521afc478ad191054bba94040845dae7">remove_radio_mod</a>( *loc, *p );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        loc-&gt;<a class="code" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a3f04ae380d2d633eee808c7c6a11b6fb"><div class="ttname"><a href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">Character::unload</a></div><div class="ttdeci">bool unload(item_location &amp;loc, bool bypass_activity=false, const item_location &amp;new_container=item_location::nowhere)</div><div class="ttdoc">Unload item.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l11621">character.cpp:11621</a></div></div>
<div class="ttc" id="aclassitem_html_a01e04ebcbadc63b26b213c0a861b0188"><div class="ttname"><a href="classitem.html#a01e04ebcbadc63b26b213c0a861b0188">item::toolmods</a></div><div class="ttdeci">std::vector&lt; item * &gt; toolmods()</div><div class="ttdoc">Returns all toolmods currently attached to this item (always empty if item not a tool)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07765">item.cpp:7765</a></div></div>
<div class="ttc" id="aclassitem_html_a01f8af501d37d5cb4eaee8ba21270bd6"><div class="ttname"><a href="classitem.html#a01f8af501d37d5cb4eaee8ba21270bd6">item::is_irremovable</a></div><div class="ttdeci">bool is_irremovable() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09780">item.cpp:9780</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1575c31b1dc0df51cbe3a1dfbfef16"><div class="ttname"><a href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Callback when contents of the item are affected in any way other than just processing.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06722">item.cpp:6722</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00382">g</a>, and <a class="el" href="item_8cpp_source.html#l07765">item::toolmods()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad907a5b6293dc78b83cc9863efbb6eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad907a5b6293dc78b83cc9863efbb6eeb">&#9670;&nbsp;</a></span>robotcontrol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::robotcontrol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
Intelligence speeds up hacking preparation Computer speeds up hacking preparation 
<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05319">5319</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;{</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160; </div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;    <span class="keywordtype">bool</span> isComputer = !it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a62bc12fc022e91bf819c3620f2c8bf59">flag_MAGICAL</a> );</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;    <span class="keywordtype">int</span> choice = 0;</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160; </div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;    <span class="keywordflow">if</span>( isComputer ) {</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s batteries are dead.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;        }</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160; </div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a> ) ) {</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t read a computer screen.&quot;</span> ) );</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;        }</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160; </div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a> ) &amp;&amp;</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;            !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a> ) &amp;&amp;</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;            !p-&gt;<a class="code" href="classCharacter.html#aaaec0279242f05b51af5c8b7bb416bb1">has_flag</a>( <a class="code" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a> ) ) {</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;ll need to put on reading glasses before you can see the screen.&quot;</span> ) );</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;        }</div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160; </div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;        choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Welcome to hackPRO!&quot;</span> ), {</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Prepare IFF protocol override&quot;</span> ),</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set friendly robots to passive mode&quot;</span> ),</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set friendly robots to combat mode&quot;</span> )</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;        } );</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s lacks charge to function.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;        }</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;        choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You prepare to manipulate nearby robots!&quot;</span> ), {</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Prepare IFF protocol override&quot;</span> ),</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set friendly robots to passive mode&quot;</span> ),</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Set friendly robots to combat mode&quot;</span> )</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;        } );</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;    }</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;        <span class="keywordflow">case</span> 0: { <span class="comment">// attempt to make a robot friendly</span></div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;            <a class="code" href="classuilist.html">uilist</a> pick_robot;</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;            pick_robot.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Choose an endpoint to hack.&quot;</span> );</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;            <span class="comment">// Build a list of all unfriendly robots in range.</span></div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;            <span class="comment">// TODO: change into vector&lt;Creature*&gt;</span></div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;            std::vector&lt; shared_ptr_fast&lt; monster&gt; &gt; mons;</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;            std::vector&lt; tripoint &gt; <a class="code" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#aa2bfd485299479e73ab0b2c5c0ca4273">locations</a>;</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;            <span class="keywordtype">int</span> entry_num = 0;</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classmonster.html">monster</a> &amp;candidate : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#a81cc2405c3e142bd7d3f2b4af39b3824">robotcontrol_can_target</a>( p, candidate ) ) {</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;                    mons.push_back( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( candidate ) );</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;                    pick_robot.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( entry_num++, <span class="keyword">true</span>, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, candidate.name() );</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;                    <a class="code" href="structtripoint.html">tripoint</a> seen_loc;</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;                    <span class="comment">// Show locations of seen robots, center on player if robot is not seen</span></div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;                    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a906192bd3a5f29a61ee12695e18d2eb5">sees</a>( candidate ) ) {</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;                        seen_loc = candidate.pos();</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;                        seen_loc = p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>();</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;                    }</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;                    <a class="code" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#aa2bfd485299479e73ab0b2c5c0ca4273">locations</a>.push_back( seen_loc );</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;                }</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;            }</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;            <span class="keywordflow">if</span>( mons.empty() ) {</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No enemy robots in range.&quot;</span> ) );</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;            }</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;            <a class="code" href="classpointmenu__cb.html">pointmenu_cb</a> callback( <a class="code" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#aa2bfd485299479e73ab0b2c5c0ca4273">locations</a> );</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;            pick_robot.<a class="code" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;callback;</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;            pick_robot.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;            <span class="keywordflow">if</span>( pick_robot.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; 0 || <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( pick_robot.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &gt;= mons.size() ) {</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind&quot;</span> ) );</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;            }</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">size_t</span> mondex = pick_robot.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;            <a class="code" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt; monster &gt;</a> z = mons[mondex];</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start reprogramming the %s into an ally.&quot;</span> ), z-&gt;name() );</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;<span class="comment">            /** @EFFECT_INT speeds up hacking preparation */</span><span class="comment"></span></div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;<span class="comment">            /** @EFFECT_COMPUTER speeds up hacking preparation */</span></div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="namespaceactivity__handlers.html#a88e87301f5548ff4bc7076a59fcde638">move_cost</a> = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 100,</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;                                      1000 - <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( p-&gt;<a class="code" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> * 10 - p-&gt;<a class="code" href="classCharacter.html#a93a3570e884214ba5c0eb3cdf1af75cc">get_skill_level</a>( <a class="code" href="iuse_8cpp.html#a55717f512921183ce304b4024c20015c">skill_computer</a> ) * 10 ) );</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;            <a class="code" href="classplayer__activity.html">player_activity</a> <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>( <a class="code" href="iuse_8cpp.html#a2c1186e7f590df7ec8414ad90563c356">ACT_ROBOT_CONTROL</a>, move_cost );</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;            <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a>.monsters.emplace_back( z );</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160; </div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="sounds_8cpp.html#ad9fe7b616a93a8209da903eba756237e">act</a> );</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160; </div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;        }</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;        <span class="keywordflow">case</span> 1: { <span class="comment">//make all friendly robots stop their purposeless extermination of (un)life.</span></div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;            <span class="keywordtype">int</span> f = 0; <span class="comment">//flag to check if you have robotic allies</span></div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classmonster.html">monster</a> &amp;critter : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;                <span class="keywordflow">if</span>( critter.friendly != 0 &amp;&amp; critter.type-&gt;in_species( <a class="code" href="iuse_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a> ) ) {</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A following %s goes into passive mode.&quot;</span> ),</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;                                          critter.name() );</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;                    critter.add_effect( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, 1_turns, <span class="keyword">true</span> );</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;                    f = 1;</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;                }</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;            }</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;            <span class="keywordflow">if</span>( f == 0 ) {</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You aren&#39;t commanding any robots.&quot;</span> ) );</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;            }</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;        }</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;        <span class="keywordflow">case</span> 2: { <span class="comment">//make all friendly robots terminate (un)life with extreme prejudice</span></div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;            p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;            <span class="keywordtype">int</span> f = 0; <span class="comment">//flag to check if you have robotic allies</span></div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;            <span class="keywordflow">for</span>( <a class="code" href="classmonster.html">monster</a> &amp;critter : <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;all_monsters() ) {</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;                <span class="keywordflow">if</span>( critter.friendly != 0 &amp;&amp; critter.has_flag( <a class="code" href="mtype_8cpp.html#a61150b20889a6aab92d5857f2d831323">mon_flag_ELECTRONIC</a> ) ) {</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;A following %s goes into combat mode.&quot;</span> ),</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;                                          critter.name() );</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;                    critter.remove_effect( <a class="code" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a> );</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;                    f = 1;</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;                }</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;            }</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;            <span class="keywordflow">if</span>( f == 0 ) {</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You aren&#39;t commanding any robots.&quot;</span> ) );</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;            }</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;        }</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    }</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;}</div>
<div class="ttc" id="aclasspointmenu__cb_html"><div class="ttname"><a href="classpointmenu__cb.html">pointmenu_cb</a></div><div class="ttdoc">Callback for uilist that pairs menu entries with points When an entry is selected,...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00575">ui.h:576</a></div></div>
<div class="ttc" id="aclassuilist_html_ad4f5806d1d8ab3de3af8e3285faf47d6"><div class="ttname"><a href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">uilist::callback</a></div><div class="ttdeci">uilist_callback * callback</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00434">ui.h:434</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a62bc12fc022e91bf819c3620f2c8bf59"><div class="ttname"><a href="flag_8cpp.html#a62bc12fc022e91bf819c3620f2c8bf59">flag_MAGICAL</a></div><div class="ttdeci">const flag_id flag_MAGICAL(&quot;MAGICAL&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a2c1186e7f590df7ec8414ad90563c356"><div class="ttname"><a href="iuse_8cpp.html#a2c1186e7f590df7ec8414ad90563c356">ACT_ROBOT_CONTROL</a></div><div class="ttdeci">static const activity_id ACT_ROBOT_CONTROL(&quot;ACT_ROBOT_CONTROL&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a478c9c699e4248bf7d25ae31156bf0b7"><div class="ttname"><a href="iuse_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a></div><div class="ttdeci">static const species_id species_ROBOT(&quot;ROBOT&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a55717f512921183ce304b4024c20015c"><div class="ttname"><a href="iuse_8cpp.html#a55717f512921183ce304b4024c20015c">skill_computer</a></div><div class="ttdeci">static const skill_id skill_computer(&quot;computer&quot;)</div></div>
<div class="ttc" id="amemory__fast_8h_html_ada897699f31fc8b37c5af09d95d45840"><div class="ttname"><a href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00016">memory_fast.h:16</a></div></div>
<div class="ttc" id="amtype_8cpp_html_a61150b20889a6aab92d5857f2d831323"><div class="ttname"><a href="mtype_8cpp.html#a61150b20889a6aab92d5857f2d831323">mon_flag_ELECTRONIC</a></div><div class="ttdeci">mon_flag_id mon_flag_ELECTRONIC</div><div class="ttdef"><b>Definition:</b> <a href="mtype_8cpp_source.html#l00080">mtype.cpp:80</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02overmap__location_8cpp_03_html_aa2bfd485299479e73ab0b2c5c0ca4273"><div class="ttname"><a href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#aa2bfd485299479e73ab0b2c5c0ca4273">anonymous_namespace{overmap_location.cpp}::locations</a></div><div class="ttdeci">generic_factory&lt; overmap_location &gt; locations(&quot;overmap location&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a81cc2405c3e142bd7d3f2b4af39b3824"><div class="ttname"><a href="namespaceiuse.html#a81cc2405c3e142bd7d3f2b4af39b3824">iuse::robotcontrol_can_target</a></div><div class="ttdeci">bool robotcontrol_can_target(Character *, const monster &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l05311">iuse.cpp:5311</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="sounds_8cpp_source.html#l00079">act</a>, <a class="el" href="iuse_8cpp.html#a2c1186e7f590df7ec8414ad90563c356">ACT_ROBOT_CONTROL</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="ui_8cpp_source.html#l01210">uilist::addentry()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="ui_8h_source.html#l00434">uilist::callback</a>, <a class="el" href="iuse_8cpp.html#a3151d4a613895c95436a5981e382ef80">effect_contacts</a>, <a class="el" href="iuse_8cpp.html#a924fe96bf3dd9ac954c9925fdd5b6901">effect_docile</a>, <a class="el" href="iuse_8cpp.html#a149b663b733ea4a7320bb3348eaa0b55">effect_transition_contacts</a>, <a class="el" href="flag_8cpp.html#a50f5a8208b7d57bd83312fa8a9b8b1c3">flag_FIX_FARSIGHT</a>, <a class="el" href="flag_8cpp.html#a62bc12fc022e91bf819c3620f2c8bf59">flag_MAGICAL</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="character_8cpp_source.html#l03428">Character::get_skill_level()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="character_8cpp_source.html#l11967">Character::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8h_source.html#l00579">Character::int_cur</a>, <a class="el" href="iuse_8cpp.html#a205762841bcda5e69b1394f92e6863b5">json_flag_ENHANCED_VISION</a>, <a class="el" href="iuse_8cpp.html#af5e248cae7a3f771bcc50d3f026b7207">json_flag_HYPEROPIC</a>, <a class="el" href="namespaceanonymous__namespace_02overmap__location_8cpp_03.html#aa2bfd485299479e73ab0b2c5c0ca4273">anonymous_namespace{overmap_location.cpp}::locations</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="ui_8h_source.html#l00038">MENU_AUTOASSIGN</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="mtype_8cpp_source.html#l00080">mon_flag_ELECTRONIC</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="ui_8cpp_source.html#l01032">uilist::query()</a>, <a class="el" href="ui_8h_source.html#l00525">uilist::ret</a>, <a class="el" href="iuse_8cpp_source.html#l05311">robotcontrol_can_target()</a>, <a class="el" href="character_8cpp_source.html#l11397">Character::sees()</a>, <a class="el" href="iuse_8cpp.html#a55717f512921183ce304b4024c20015c">skill_computer</a>, <a class="el" href="iuse_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a>, <a class="el" href="ui_8h_source.html#l00419">uilist::text</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="iuse_8cpp.html#a357572465dfb7a0a417d86e1be77af49">trait_ILLITERATE</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a81cc2405c3e142bd7d3f2b4af39b3824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81cc2405c3e142bd7d3f2b4af39b3824">&#9670;&nbsp;</a></span>robotcontrol_can_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iuse::robotcontrol_can_target </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmonster.html">monster</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05311">5311</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;{</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;    <span class="keywordflow">return</span> !m.<a class="code" href="classmonster.html#af033816139df1dfa154c27b199b51da6">is_dead</a>()</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;           &amp;&amp; m.<a class="code" href="classmonster.html#aa30f973bf524ba275ada847f6118b048">type</a>-&gt;<a class="code" href="structmtype.html#a51ec342d71717bb513f0158198b12840">in_species</a>( <a class="code" href="iuse_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a> )</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;           &amp;&amp; m.<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> == 0</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;           &amp;&amp; <a class="code" href="coordinates_8h.html#a8e2cbab6dac12095f06b4cff66857fbb">rl_dist</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), m.<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &lt;= 10;</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;}</div>
<div class="ttc" id="aclassmonster_html_af033816139df1dfa154c27b199b51da6"><div class="ttname"><a href="classmonster.html#af033816139df1dfa154c27b199b51da6">monster::is_dead</a></div><div class="ttdeci">bool is_dead() const</div><div class="ttdef"><b>Definition:</b> <a href="monster_8cpp_source.html#l03580">monster.cpp:3580</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monster_8h_source.html#l00539">monster::friendly</a>, <a class="el" href="mtype_8cpp_source.html#l00385">mtype::in_species()</a>, <a class="el" href="monster_8cpp_source.html#l03580">monster::is_dead()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="coordinates_8h_source.html#l00769">rl_dist()</a>, <a class="el" href="iuse_8cpp.html#a478c9c699e4248bf7d25ae31156bf0b7">species_ROBOT</a>, and <a class="el" href="monster_8h_source.html#l00550">monster::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__handlers_8cpp_source.html#l03618">activity_handlers::robot_control_do_turn()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03636">activity_handlers::robot_control_finish()</a>, and <a class="el" href="iuse_8cpp_source.html#l05319">robotcontrol()</a>.</p>

</div>
</div>
<a id="a1749fc8225eeaec0b7dfe4ef70c2367c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1749fc8225eeaec0b7dfe4ef70c2367c">&#9670;&nbsp;</a></span>rpgdie()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::rpgdie </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>you</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>die</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03839">3839</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;{</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keywordflow">if</span>( you-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    }</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">num_sides</a> = die-&gt;<a class="code" href="classitem.html#a0b12108a604ac9d940716bb8f1368cf5">get_var</a>( <span class="stringliteral">&quot;die_num_sides&quot;</span>, 0 );</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="keywordflow">if</span>( num_sides == 0 ) {</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        <span class="keyword">const</span> std::vector&lt;int&gt; sides_options = { 4, 6, 8, 10, 12, 20, 50 };</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sides = sides_options[ <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 0, sides_options.size() - 1 ) ];</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;        <a class="code" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">num_sides</a> = sides;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        die-&gt;<a class="code" href="classitem.html#a4938361b8fe897c4e85d66020ef91aff">set_var</a>( <span class="stringliteral">&quot;die_num_sides&quot;</span>, sides );</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    }</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> roll = <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 1, num_sides );</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <span class="comment">//~ %1$d: roll number, %2$d: side number of a die, %3$s: die item name</span></div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    you-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;dice&quot;</span>, <span class="stringliteral">&quot;You roll a %1$d on your %2$d sided %3$s&quot;</span> ), roll,</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;                            num_sides, die-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    <span class="keywordflow">if</span>( roll == num_sides ) {</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Critical!&quot;</span> ) );</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    }</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="keywordflow">return</span> roll;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;}</div>
<div class="ttc" id="asubbodypart_8h_html_ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62"><div class="ttname"><a href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">side::num_sides</a></div><div class="ttdeci">@ num_sides</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="item_8cpp_source.html#l01839">item::get_var()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="subbodypart_8h.html#ae70ba95c272bf8b7296bc0df8bcd03e4ac15d0e5cabac1a48d48370cabf91ff62">num_sides</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, <a class="el" href="item_8cpp_source.html#l01809">item::set_var()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae81079151986b7a91874751dae6720a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81079151986b7a91874751dae6720a5">&#9670;&nbsp;</a></span>seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05301">5301</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;{</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ||</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;        <a class="code" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to eat the %s?  You could plant it in a mound of dirt.&quot;</span> ),</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;                  <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(), it-&gt;<a class="code" href="classitem.html#a2e1ea4d40574ffdce04aa81eb128dca9">color_in_inventory</a>() ) ) ) {</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">//This eats the seed object.</span></div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;    }</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8cpp_source.html#l06298">item::color_in_inventory()</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="output_8cpp_source.html#l00811">query_yn()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="computer__session_8cpp_source.html#l00625">computer_session::action_research()</a>, <a class="el" href="iexamine_8cpp_source.html#l02848">iexamine::aggie_plant()</a>, <a class="el" href="hash__utils_8h_source.html#l00031">cata::tuple_hash_detail::Impl&lt; Tuple, Index &gt;::apply()</a>, <a class="el" href="hash__utils_8h_source.html#l00039">cata::tuple_hash_detail::Impl&lt; Tuple, 0 &gt;::apply()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l01004">can_do_activity_there()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03547">farm_action()</a>, <a class="el" href="iexamine_8cpp_source.html#l02765">iexamine::fertilize_plant()</a>, <a class="el" href="mission__companion_8cpp_source.html#l01653">talk_function::field_harvest()</a>, <a class="el" href="mission__companion_8cpp_source.html#l01546">talk_function::field_plant()</a>, <a class="el" href="map_8cpp_source.html#l01888">map::furnname()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02970">generic_multi_activity_do()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00050">get_common_data()</a>, <a class="el" href="iexamine_8cpp_source.html#l02476">iexamine::get_seed_entries()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00114">weather_generator::get_weather()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00178">weather_generator::get_weather_conditions()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00108">weather_generator::get_weather_temperature()</a>, <a class="el" href="map_8cpp_source.html#l08369">map::grow_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l02676">iexamine::harvest_plant()</a>, <a class="el" href="iexamine_8cpp_source.html#l02652">iexamine::harvest_plant_ex()</a>, <a class="el" href="hash__utils_8h_source.html#l00019">cata::hash_combine()</a>, <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l01028">vehicle::operate_reaper()</a>, <a class="el" href="hash__utils_8h_source.html#l00076">cata::range_hash::operator()()</a>, <a class="el" href="hash__utils_8h_source.html#l00048">cata::tuple_hash::operator()()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00291">snippet_library::random_from_category()</a>, <a class="el" href="rng_8cpp_source.html#l00192">rng_get_first_seed()</a>, <a class="el" href="rng_8cpp_source.html#l00160">rng_sequence()</a>, <a class="el" href="rng_8cpp_source.html#l00206">rng_set_engine_seed()</a>, <a class="el" href="fungal__effects_8cpp_source.html#l00144">fungal_effects::spread_fungus_one_tile()</a>, <a class="el" href="faction__camp_8cpp_source.html#l03679">basecamp::start_farm_op()</a>, and <a class="el" href="weather__gen_8cpp_source.html#l00279">weather_generator::test_weather()</a>.</p>

</div>
</div>
<a id="aa0901bfdb67b0753239b54a545f76f92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0901bfdb67b0753239b54a545f76f92">&#9670;&nbsp;</a></span>sewage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::sewage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00467">467</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Are you sure you want to drink this?&quot;</span> ) ) ) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="event__bus_8h.html#a4f760194b9225ccf92a1419748def636">get_event_bus</a>().<a class="code" href="classevent__bus.html#ab753616a3a663185377ac52560068194">send</a>&lt;<a class="code" href="event_8h.html#a333a7721472705fe444b24f107f9a731a2d0450c5d939a7047795f86f94e7d2ba">event_type::eats_sewage</a>&gt;();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div>
<div class="ttc" id="aevent_8h_html_a333a7721472705fe444b24f107f9a731a2d0450c5d939a7047795f86f94e7d2ba"><div class="ttname"><a href="event_8h.html#a333a7721472705fe444b24f107f9a731a2d0450c5d939a7047795f86f94e7d2ba">event_type::eats_sewage</a></div><div class="ttdeci">@ eats_sewage</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="event_8h.html#a333a7721472705fe444b24f107f9a731a2d0450c5d939a7047795f86f94e7d2ba">eats_sewage</a>, <a class="el" href="game_8cpp_source.html#l13832">get_event_bus()</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="event__bus_8cpp_source.html#l00072">event_bus::send()</a>, and <a class="el" href="character_8cpp_source.html#l07521">Character::vomit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="computer__session_8cpp_source.html#l00503">computer_session::action_sample()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a3288281df68588407dc8829f3152d521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3288281df68588407dc8829f3152d521">&#9670;&nbsp;</a></span>sextant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::sextant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07851">7851</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;{</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;    <span class="keyword">const</span> std::pair&lt;units::angle, units::angle&gt; sun_position = <a class="code" href="calendar_8cpp.html#a232044aa52e8a97dd23f5ac6dcaa8521">sun_azimuth_altitude</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> altitude = <a class="code" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( sun_position.second );</div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a> ) {</div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;        <span class="comment">// Debug mode always shows all sun angles</span></div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> azimuth = <a class="code" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( sun_position.first );</div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <span class="stringliteral">&quot;Sun altitude %.1f, azimuth %.1f&quot;</span>, altitude, azimuth );</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> ) ) {</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see the Sun from here.&quot;</span> ) );</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( altitude &gt; 0 ) {</div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Sun is at an altitude of %.1f.&quot;</span> ), altitude );</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The Sun is below the horizon.&quot;</span> ) );</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;    }</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160; </div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;}</div>
<div class="ttc" id="acalendar_8cpp_html_a232044aa52e8a97dd23f5ac6dcaa8521"><div class="ttname"><a href="calendar_8cpp.html#a232044aa52e8a97dd23f5ac6dcaa8521">sun_azimuth_altitude</a></div><div class="ttdeci">std::pair&lt; units::angle, units::angle &gt; sun_azimuth_altitude(time_point ti)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00188">calendar.cpp:188</a></div></div>
<div class="ttc" id="adebug_8cpp_html_aa021995764a0c77f628e3411497239cc"><div class="ttname"><a href="debug_8cpp.html#aa021995764a0c77f628e3411497239cc">debug_mode</a></div><div class="ttdeci">bool debug_mode</div><div class="ttdoc">Extended debugging mode, can be toggled during game.</div><div class="ttdef"><b>Definition:</b> <a href="debug_8cpp_source.html#l00210">debug.cpp:210</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9ce2bc1618fa4acf9f9e98effd9f1ae0"><div class="ttname"><a href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">units::to_degrees</a></div><div class="ttdeci">constexpr double to_degrees(const units::angle v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00757">units.h:757</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="debug_8cpp_source.html#l00210">debug_mode</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="calendar_8cpp_source.html#l00188">sun_azimuth_altitude()</a>, <a class="el" href="units_8h_source.html#l00757">units::to_degrees()</a>, and <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2282b0ac45aefd3842171881d09108b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2282b0ac45aefd3842171881d09108b6">&#9670;&nbsp;</a></span>shavekit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt;int&gt; iuse::shavekit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a01ed1b2b51c69008e5beff8e27576f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01ed1b2b51c69008e5beff8e27576f0e">&#9670;&nbsp;</a></span>shocktonfa_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::shocktonfa_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03662">3662</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;{</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action shocktonfa_off that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    }</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;tactical tonfa&quot;</span> ), {</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Zap something&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn on light&quot;</span> )</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    } );</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160; </div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="keywordflow">case</span> 0: {</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">iuse::tazer2</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;        }</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;        <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;            <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The batteries are dead.&quot;</span> ) );</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;                p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn the light on.&quot;</span> ) );</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;                it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#ad696c1e63e51902fe46dea2b53c8d083">itype_shocktonfa_on</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;            }</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        }</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    }</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_ad696c1e63e51902fe46dea2b53c8d083"><div class="ttname"><a href="iuse_8cpp.html#ad696c1e63e51902fe46dea2b53c8d083">itype_shocktonfa_on</a></div><div class="ttdeci">static const itype_id itype_shocktonfa_on(&quot;shocktonfa_on&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a27370e4a030a81d8bef9d17e96def01b"><div class="ttname"><a href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">iuse::tazer2</a></div><div class="ttdeci">std::optional&lt; int &gt; tazer2(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03647">iuse.cpp:3647</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iuse_8cpp.html#ad696c1e63e51902fe46dea2b53c8d083">itype_shocktonfa_on</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="iuse_8cpp_source.html#l03647">tazer2()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ad9181dfd00576bfaddeb22cf117aae62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9181dfd00576bfaddeb22cf117aae62">&#9670;&nbsp;</a></span>shocktonfa_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::shocktonfa_on </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03690">3690</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;{</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="keywordflow">if</span>( !p ) { <span class="comment">// Effects while simply on</span></div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action shocktonfa_on that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your tactical tonfa is out of power.&quot;</span> ) );</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a252c605849af4acdf317b141e4ec098a">itype_shocktonfa_off</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;            <span class="keywordtype">int</span> choice = <a class="code" href="classuilist.html">uilist</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;tactical tonfa&quot;</span> ), {</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;                <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Zap something&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Turn off light&quot;</span> )</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;            } );</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160; </div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <span class="keywordflow">switch</span>( choice ) {</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                <span class="keywordflow">case</span> 0: {</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a27370e4a030a81d8bef9d17e96def01b">iuse::tazer2</a>( p, it, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                }</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                <span class="keywordflow">case</span> 1: {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You turn off the light.&quot;</span> ) );</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a252c605849af4acdf317b141e4ec098a">itype_shocktonfa_off</a>, p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;                }</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;            }</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        }</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    }</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a252c605849af4acdf317b141e4ec098a"><div class="ttname"><a href="iuse_8cpp.html#a252c605849af4acdf317b141e4ec098a">itype_shocktonfa_off</a></div><div class="ttdeci">static const itype_id itype_shocktonfa_off(&quot;shocktonfa_off&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iuse_8cpp.html#a252c605849af4acdf317b141e4ec098a">itype_shocktonfa_off</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="iuse_8cpp_source.html#l03647">tazer2()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a7d222a0d4791285bcfd1f4931a7c8c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d222a0d4791285bcfd1f4931a7c8c75">&#9670;&nbsp;</a></span>siphon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::siphon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02914">2914</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;{</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    }</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keyword">const</span> std::function&lt;bool( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; )&gt; f = [&amp;here]( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp; pnt ) {</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( pnt );</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <span class="keywordflow">return</span> !!vp;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    };</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <a class="code" href="classvehicle.html">vehicle</a> *v = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordtype">bool</span> found_more_than_one = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> &amp;<a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> : here.<a class="code" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), 1 ) ) {</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        <span class="keywordflow">if</span>( !vp ) {</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        }</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        <a class="code" href="classvehicle.html">vehicle</a> *vfound = &amp;vp-&gt;vehicle();</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <span class="keywordflow">if</span>( v == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;            v = vfound;</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <span class="comment">//found more than one vehicle?</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            <span class="keywordflow">if</span>( v != vfound ) {</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                v = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;                found_more_than_one = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;            }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        }</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    }</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="keywordflow">if</span>( found_more_than_one ) {</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;        std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#aacc6080fc103e50e9a4b54671c1c031a">choose_adjacent_highlight</a>(</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Siphon from where?&quot;</span> ), <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There is nothing to siphon from nearby.&quot;</span> ), f, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        }</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( *pnt_ );</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;            v = &amp;vp-&gt;vehicle();</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        }</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160; </div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="keywordflow">if</span>( v == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s no vehicle there.&quot;</span> ) );</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    }</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <a class="code" href="veh__interact_8cpp.html#a87f9f872387ab68271fd6d3043163044">act_vehicle_siphon</a>( v );</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;}</div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aveh__interact_8cpp_html_a87f9f872387ab68271fd6d3043163044"><div class="ttname"><a href="veh__interact_8cpp.html#a87f9f872387ab68271fd6d3043163044">act_vehicle_siphon</a></div><div class="ttdeci">void act_vehicle_siphon(vehicle *veh)</div><div class="ttdef"><b>Definition:</b> <a href="veh__interact_8cpp_source.html#l02999">veh_interact.cpp:2999</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="veh__interact_8cpp_source.html#l02999">act_vehicle_siphon()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="action_8cpp_source.html#l01212">choose_adjacent_highlight()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="map_8cpp_source.html#l10109">map::points_in_radius()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="acc9979793768905336b3047886fa5282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc9979793768905336b3047886fa5282">&#9670;&nbsp;</a></span>smoking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::smoking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry point for intentional bodily intake of smoke via paper wrapped one time use items: cigars, cigarettes, etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Player doing the smoking </td></tr>
    <tr><td class="paramname">it</td><td>the item to be smoked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Charges used in item smoked </dd></dl>

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00544">544</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    std::optional&lt;std::string&gt; litcig = <a class="code" href="namespaceiuse.html#a85d862264df8d80c14f753c0e823e415">can_smoke</a>( *p );</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span>( litcig.has_value() ) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( litcig.value_or( <span class="stringliteral">&quot;&quot;</span> ) ) );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="classitem.html">item</a> cig;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a3693acd1792401968cee9e92e2391eae">itype_cig</a> || it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ae49f3dc7e7f03bd94e5088ef752a3712">itype_handrolled_cig</a> ) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        cig = <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;cig_lit&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        cig.<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = to_turns&lt;int&gt;( 4_minutes );</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( -3 );</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 2 );</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#aca5afb622cf404d685c3c58b41cca21b">itype_cigar</a> ) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        cig = <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;cigar_lit&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        cig.<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = to_turns&lt;int&gt;( 12_minutes );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 3 );</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( -4 );</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a61439d96f7e6eff40cfdbbb56dd3dbfc">itype_joint</a> ) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        cig = <a class="code" href="classitem.html">item</a>( <span class="stringliteral">&quot;joint_lit&quot;</span>, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        cig.<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = to_turns&lt;int&gt;( 4_minutes );</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( 4 );</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 6 );</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() &lt; 5 ) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#a5f1a21ad76d22926f2688c1e49105311">set_painkiller</a>( ( p-&gt;<a class="code" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() + 3 ) * 2 );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Please let the devs know you should be able to smoke a %s, but the smoking code does not know how.&quot;</span> ),</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// If we&#39;re here, we better have a cig to light.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a8a33b517f5d4f8a85c83a71a3bc8cdaf">use_charges_if_avail</a>( <a class="code" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, 1 );</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    cig.<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;add_item( cig, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You light a %s.&quot;</span> ), cig.<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// Parting messages</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#a61439d96f7e6eff40cfdbbb56dd3dbfc">itype_joint</a> ) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="comment">// Would group with the joint, but awkward to mutter before lighting up.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <a class="code" href="effect_8cpp.html#a26d5bc5ed07e16a92731edf2cc9db42d">weed_msg</a>( *p );</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a> ) &gt; 10_minutes * ( p-&gt;<a class="code" href="classCharacter.html#aeec57f9be2ff6c4dea96f2fd5e1d44f0">addiction_level</a>(</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <a class="code" href="iuse_8cpp.html#ac4f52be5cc9929fe9e0078e55e769800">addiction_nicotine</a> ) + 1 ) ) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Ugh, too much smoke you feel nasty.&quot;</span> ) );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a1961ab0f9c702252e550bf42cb8dd974"><div class="ttname"><a href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">Character::get_painkiller</a></div><div class="ttdeci">int get_painkiller() const</div><div class="ttdoc">Returns intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09839">character.cpp:9839</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5f1a21ad76d22926f2688c1e49105311"><div class="ttname"><a href="classCharacter.html#a5f1a21ad76d22926f2688c1e49105311">Character::set_painkiller</a></div><div class="ttdeci">void set_painkiller(int npkill)</div><div class="ttdoc">Sets intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09823">character.cpp:9823</a></div></div>
<div class="ttc" id="aclassitem_html_ac5ff6ac1e7657b7b8525140669744a28"><div class="ttname"><a href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item::item_counter</a></div><div class="ttdeci">int item_counter</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l03142">item.h:3142</a></div></div>
<div class="ttc" id="aeffect_8cpp_html_a26d5bc5ed07e16a92731edf2cc9db42d"><div class="ttname"><a href="effect_8cpp.html#a26d5bc5ed07e16a92731edf2cc9db42d">weed_msg</a></div><div class="ttdeci">void weed_msg(Character &amp;p)</div><div class="ttdoc">Handles the large variety of weed messages.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00129">effect.cpp:129</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a3693acd1792401968cee9e92e2391eae"><div class="ttname"><a href="iuse_8cpp.html#a3693acd1792401968cee9e92e2391eae">itype_cig</a></div><div class="ttdeci">static const itype_id itype_cig(&quot;cig&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a61439d96f7e6eff40cfdbbb56dd3dbfc"><div class="ttname"><a href="iuse_8cpp.html#a61439d96f7e6eff40cfdbbb56dd3dbfc">itype_joint</a></div><div class="ttdeci">static const itype_id itype_joint(&quot;joint&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aca5afb622cf404d685c3c58b41cca21b"><div class="ttname"><a href="iuse_8cpp.html#aca5afb622cf404d685c3c58b41cca21b">itype_cigar</a></div><div class="ttdeci">static const itype_id itype_cigar(&quot;cigar&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae49f3dc7e7f03bd94e5088ef752a3712"><div class="ttname"><a href="iuse_8cpp.html#ae49f3dc7e7f03bd94e5088ef752a3712">itype_handrolled_cig</a></div><div class="ttdeci">static const itype_id itype_handrolled_cig(&quot;handrolled_cig&quot;)</div></div>
<div class="ttc" id="anamespaceiuse_html_a85d862264df8d80c14f753c0e823e415"><div class="ttname"><a href="namespaceiuse.html#a85d862264df8d80c14f753c0e823e415">iuse::can_smoke</a></div><div class="ttdeci">std::optional&lt; std::string &gt; can_smoke(const Character &amp;you)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l00451">iuse.cpp:451</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="suffer_8cpp_source.html#l02089">Character::addiction_level()</a>, <a class="el" href="iuse_8cpp.html#ac4f52be5cc9929fe9e0078e55e769800">addiction_nicotine</a>, <a class="el" href="iuse_8cpp_source.html#l00451">can_smoke()</a>, <a class="el" href="iuse_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="character_8cpp_source.html#l09839">Character::get_painkiller()</a>, <a class="el" href="character_8h_source.html#l02712">Character::inv</a>, <a class="el" href="magic_8h.html#a43ffd543787e68e5333debafdbb7ead7a447b7147e84be512208dcc0995d67ebc">item</a>, <a class="el" href="item_8h_source.html#l03142">item::item_counter</a>, <a class="el" href="iuse_8cpp.html#a3693acd1792401968cee9e92e2391eae">itype_cig</a>, <a class="el" href="iuse_8cpp.html#aca5afb622cf404d685c3c58b41cca21b">itype_cigar</a>, <a class="el" href="iuse_8cpp.html#aa5ffa4fd2e1363b9474c32c3a47a6df9">itype_fire</a>, <a class="el" href="iuse_8cpp.html#ae49f3dc7e7f03bd94e5088ef752a3712">itype_handrolled_cig</a>, <a class="el" href="iuse_8cpp.html#a61439d96f7e6eff40cfdbbb56dd3dbfc">itype_joint</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="character_8cpp_source.html#l04486">Character::mod_hunger()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="character_8cpp_source.html#l09823">Character::set_painkiller()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00038">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="character_8cpp_source.html#l09633">Character::use_charges_if_avail()</a>, and <a class="el" href="effect_8cpp_source.html#l00129">weed_msg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="consumption_8cpp_source.html#l00769">Character::can_eat()</a>, <a class="el" href="consumption_8cpp_source.html#l01709">Character::get_consume_time()</a>, <a class="el" href="game__inventory_8cpp_source.html#l01091">activatable_inventory_preset::get_denial()</a>, and <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="accc0f8096945223d4f89036b84ee070d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc0f8096945223d4f89036b84ee070d">&#9670;&nbsp;</a></span>solarpack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::solarpack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03903">3903</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;{</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action solarpack that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    }</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> rem_bid = p-&gt;<a class="code" href="classCharacter.html#a95f78cc0cde76f0a1428f6abd8742548">get_remote_fueled_bionic</a>();</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    <span class="keywordflow">if</span>( rem_bid.<a class="code" href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">is_empty</a>() ) {  <span class="comment">// Cable CBM required</span></div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;            <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have no cable charging system to plug it into, so you leave it alone.&quot;</span> ) );</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( rem_bid ) ) {  <span class="comment">// when OFF it takes no effect</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Activate your cable charging system to take advantage of it.&quot;</span> ) );</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    }</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160; </div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; !p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need to wear the %1$s before you can unfold it.&quot;</span> ),</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    }</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <span class="comment">// no doubled sources of power</span></div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a> ) ) {</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t use the %1$s with another of its kind.&quot;</span> ),</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You unfold the solar array from the pack.  You still need to connect it with a cable.&quot;</span> ) );</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160; </div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot;_on&quot;</span> ), p );</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a95f78cc0cde76f0a1428f6abd8742548"><div class="ttname"><a href="classCharacter.html#a95f78cc0cde76f0a1428f6abd8742548">Character::get_remote_fueled_bionic</a></div><div class="ttdeci">bionic_id get_remote_fueled_bionic() const</div><div class="ttdoc">Returns bionic_id of first remote fueled bionic found.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l03299">bionics.cpp:3299</a></div></div>
<div class="ttc" id="aclassstring__id_html_ac180a60056901aaf79f5c4b728a257bd"><div class="ttname"><a href="classstring__id.html#ac180a60056901aaf79f5c4b728a257bd">string_id::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdoc">Returns whether this id is empty.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00303">string_id.h:303</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a4128fdaa3fee42416124b2a161b2c327"><div class="ttname"><a href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a></div><div class="ttdeci">const flag_id flag_SOLARPACK_ON(&quot;SOLARPACK_ON&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="flag_8cpp.html#a4128fdaa3fee42416124b2a161b2c327">flag_SOLARPACK_ON</a>, <a class="el" href="bionics_8cpp_source.html#l03299">Character::get_remote_fueled_bionic()</a>, <a class="el" href="bionics_8cpp_source.html#l02658">Character::has_active_bionic()</a>, <a class="el" href="item_8cpp_source.html#l09623">item::is_armor()</a>, <a class="el" href="string__id_8h_source.html#l00303">string_id&lt; T &gt;::is_empty()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="character__attire_8cpp_source.html#l00548">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae23e7d15dfb30b39d0e2ed4044eda3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23e7d15dfb30b39d0e2ed4044eda3bf">&#9670;&nbsp;</a></span>solarpack_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::solarpack_off </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03937">3937</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;{</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action solarpack_off that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    }</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a4d8d747c469431f530acb05c5f7a7f45">is_worn</a>( *it ) ) {  <span class="comment">// folding when not worn</span></div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fold your portable solar array into the pack.&quot;</span> ) );</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You unplug your portable solar array, and fold it into the pack.&quot;</span> ) );</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    }</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160; </div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    it-&gt;<a class="code" href="classitem.html#aa24fc115fb6cd1124efec30970cfcd9b">erase_var</a>( <span class="stringliteral">&quot;cable&quot;</span> );</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160; </div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    <span class="comment">// 3 = &quot;_on&quot;</span></div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>().substr( 0,</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                           it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>().size() - 3 ) ), p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">process_items</a>(); <span class="comment">// Process carried items to disconnect any connected cables</span></div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2e269341e793c986871fd9ad2d5c7604"><div class="ttname"><a href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">Character::process_items</a></div><div class="ttdeci">void process_items()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12834">character.cpp:12834</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l01933">item::erase_var()</a>, <a class="el" href="character_8h_source.html#l01911">Character::is_worn()</a>, <a class="el" href="character_8cpp_source.html#l12834">Character::process_items()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae8684a173355a1746766060d7298f4d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8684a173355a1746766060d7298f4d2">&#9670;&nbsp;</a></span>spray_can()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::spray_can </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04808">4808</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;{</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; dest_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spray where?&quot;</span> ) );</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;    <span class="keywordflow">if</span>( !dest_ ) {</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;    }</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a32100cdc409ab595ebbb4e5d2115883a">handle_ground_graffiti</a>( *p, it, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Spray what?&quot;</span> ), dest_.value() );</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;}</div>
<div class="ttc" id="anamespaceiuse_html_a32100cdc409ab595ebbb4e5d2115883a"><div class="ttname"><a href="namespaceiuse.html#a32100cdc409ab595ebbb4e5d2115883a">iuse::handle_ground_graffiti</a></div><div class="ttdeci">std::optional&lt; int &gt; handle_ground_graffiti(Character &amp;p, item *it, const std::string &amp;prefix, const tripoint &amp;where)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04817">iuse.cpp:4817</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, and <a class="el" href="iuse_8cpp_source.html#l04817">handle_ground_graffiti()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a84c284fc77ef107deccb75a6b17a3b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c284fc77ef107deccb75a6b17a3b36">&#9670;&nbsp;</a></span>stimpack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::stimpack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05073">5073</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;{</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a50ca774a69b5d6e12f7fba07434d9b35">get_item_position</a>( it ) &gt;= -1 ) {</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>,</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;                              <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You must wear the stimulant delivery system before you can activate it.&quot;</span> ) );</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;    }</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160; </div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The stimulant delivery system is empty.&quot;</span> ) );</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You inject yourself with the stimulants.&quot;</span> ) );</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;        <span class="comment">// Intensity is 2 here because intensity = 1 is the comedown</span></div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a611aee9a5e9dcf6c95f0e46dbde8e30a">effect_stimpack</a>, 25_minutes, <span class="keyword">false</span>, 2 );</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( 2 );</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( 20 );</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( -100 );</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a65642ccc4e3370f7a594d77e4e1fd374">set_stamina</a>( p-&gt;<a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() );</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;    }</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a65642ccc4e3370f7a594d77e4e1fd374"><div class="ttname"><a href="classCharacter.html#a65642ccc4e3370f7a594d77e4e1fd374">Character::set_stamina</a></div><div class="ttdeci">void set_stamina(int new_stamina)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06836">character.cpp:6836</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a611aee9a5e9dcf6c95f0e46dbde8e30a"><div class="ttname"><a href="iuse_8cpp.html#a611aee9a5e9dcf6c95f0e46dbde8e30a">effect_stimpack</a></div><div class="ttdeci">static const efftype_id effect_stimpack(&quot;stimpack&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="iuse_8cpp.html#a611aee9a5e9dcf6c95f0e46dbde8e30a">effect_stimpack</a>, <a class="el" href="character__inventory_8cpp_source.html#l00565">Character::get_item_position()</a>, <a class="el" href="character_8cpp_source.html#l06815">Character::get_stamina_max()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="character_8cpp_source.html#l09818">Character::mod_painkiller()</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="character_8cpp_source.html#l06752">Character::mod_stim()</a>, and <a class="el" href="character_8cpp_source.html#l06836">Character::set_stamina()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2392f15a7de79ad6bd5bea5643480faa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2392f15a7de79ad6bd5bea5643480faa">&#9670;&nbsp;</a></span>strong_antibiotic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::strong_antibiotic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08299">8299</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;{</div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a> ) ) {</div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel much better - almost entirely.&quot;</span> ) );</div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;    }</div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, 12_hours );</div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_ab5d38652b4b5ac4a2a4810d0d8c3ded1"><div class="ttname"><a href="iuse_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_strong_antibiotic(&quot;strong_antibiotic&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ab871cc9455a5c251797be55e9c14f49d"><div class="ttname"><a href="iuse_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a></div><div class="ttdeci">static const efftype_id effect_strong_antibiotic_visible(&quot;strong_antibiotic_visible&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="iuse_8cpp.html#ab5d38652b4b5ac4a2a4810d0d8c3ded1">effect_strong_antibiotic</a>, <a class="el" href="iuse_8cpp.html#ab871cc9455a5c251797be55e9c14f49d">effect_strong_antibiotic_visible</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aafa142c7bed1e2b6ceecadfbd0d30ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafa142c7bed1e2b6ceecadfbd0d30ee5">&#9670;&nbsp;</a></span>talking_doll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::talking_doll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05124">5124</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;{</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s batteries are dead.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    }</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You press a button on the doll to make it talk.&quot;</span> ) );</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSpeechBubble.html">SpeechBubble</a> <a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a> = <a class="code" href="speech_8cpp.html#ae6fbca69b3cfc44557dd9692227d16a9">get_speech</a>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160; </div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    <a class="code" href="namespacesounds.html#a6bb79ae1c9c3dcd8c8e0b28c66b0398d">sounds::sound</a>( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>(), <a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.volume, <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::sound_t::electronic_speech</a>,</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;                   <a class="code" href="speech_8cpp.html#a67a91181969e507f1132304946b6360b">speech</a>.text.translated(), <span class="keyword">true</span>, <span class="stringliteral">&quot;speech&quot;</span>, it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160; </div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3ab761780ade49c11f48702cf2b0e3b0cd">sounds::electronic_speech</a>, <a class="el" href="speech_8cpp_source.html#l00031">get_speech()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="sounds_8cpp_source.html#l00318">sounds::sound()</a>, <a class="el" href="speech_8cpp_source.html#l00012">speech</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9ddf58b64f06b9e91ed946ee217a48cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ddf58b64f06b9e91ed946ee217a48cc">&#9670;&nbsp;</a></span>tazer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::tazer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03574">3574</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;{</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;    <a class="code" href="structtripoint.html">tripoint</a> pnt = <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a>;</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Shock where?&quot;</span> ) );</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        }</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;        pnt = *pnt_;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    }</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160; </div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    <span class="keywordflow">if</span>( pnt == p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) {</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Umm.  No.&quot;</span> ) );</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    }</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <a class="code" href="classCreature.html">Creature</a> *target = <a class="code" href="creature__tracker_8h.html#a16f631f70e72b53e590770670fb301fb">get_creature_tracker</a>().<a class="code" href="classcreature__tracker.html#aba3c6663688bcd1806ea685d6961cb72">creature_at</a>( pnt, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    <span class="keywordflow">if</span>( target == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s nothing to zap there!&quot;</span> ) );</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    }</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160; </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    <a class="code" href="classnpc.html">npc</a> *foe = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( target );</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        !foe-&gt;<a class="code" href="classnpc.html#a7ee1c9e434339418cb9b5907d8695806">is_enemy</a>() &amp;&amp;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        !p-&gt;<a class="code" href="classCharacter.html#a358731acbb8b137aa540bb8d49109ca3">query_yn</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Do you really want to shock %s?&quot;</span> ), target-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() ) ) {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    }</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160; </div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hit_roll = p-&gt;<a class="code" href="classCharacter.html#a5b1b6d0e3efd0577ed298752a12d5cd1">hit_roll</a>();</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160; </div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> tazer_was_dodged = target-&gt;<a class="code" href="classCreature.html#a25d21c9537d90ecb5648dd27721e7d2d">dodge_check</a>( p-&gt;<a class="code" href="classCharacter.html#a5b1b6d0e3efd0577ed298752a12d5cd1">hit_roll</a>() );</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> tazer_was_armored = hit_roll &lt; target-&gt;<a class="code" href="classCreature.html#aedc37f6985ad2742a64a300bd7254cc2">get_armor_type</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>(</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                                       <a class="code" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a>( <span class="stringliteral">&quot;bash&quot;</span> ) ), <a class="code" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) );</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    <span class="keywordflow">if</span>( tazer_was_dodged ) {</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to shock %s, but miss.&quot;</span> ),</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; attempts to shock %s, but misses.&quot;</span> ),</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                                  target-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tazer_was_armored ) {</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You attempt to shock %s, but are blocked by armor.&quot;</span> ),</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; attempts to shock %s, but is blocked by armor.&quot;</span> ),</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                                  target-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <span class="comment">// Stun duration scales harshly inversely with big creatures</span></div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <span class="keywordflow">if</span>( target-&gt;<a class="code" href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a> ) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;            target-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1.5, 2.5 ) );</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target-&gt;<a class="code" href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">creature_size::small</a> ) {</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;            target-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1.25, 2.0 ) );</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target-&gt;<a class="code" href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a> ) {</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;            target-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.95, 1.15 ) );</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( target-&gt;<a class="code" href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">get_size</a>() == <a class="code" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a> ) {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            target-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 0.5, 0.8 ) );</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            target-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * <a class="code" href="rng_8cpp.html#a0c88381d6334a2fbaa726c53f5cf9bb9">rng_float</a>( 1.1, 1.5 ) );</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        }</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ac81e06f5fbbb42c673f235a6f37d9d4b">add_msg_player_or_npc</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>,</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You shock %s!&quot;</span> ),</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;                                  <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; shocks %s!&quot;</span> ),</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;                                  target-&gt;<a class="code" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() );</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    }</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <span class="keywordflow">if</span>( foe != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;        foe-&gt;<a class="code" href="classnpc.html#a965eb2beb1c490bb1b8efef1c07e20d0">on_attacked</a>( *p );</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    }</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a5b1b6d0e3efd0577ed298752a12d5cd1"><div class="ttname"><a href="classCharacter.html#a5b1b6d0e3efd0577ed298752a12d5cd1">Character::hit_roll</a></div><div class="ttdeci">float hit_roll() const override</div><div class="ttdoc">Returns the player's basic hit roll that is compared to the target's dodge roll.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00367">melee.cpp:367</a></div></div>
<div class="ttc" id="aclassCreature_html_a25d21c9537d90ecb5648dd27721e7d2d"><div class="ttname"><a href="classCreature.html#a25d21c9537d90ecb5648dd27721e7d2d">Creature::dodge_check</a></div><div class="ttdeci">bool dodge_check(float hit_roll, bool force_try=false, float training_level=0.0f)</div><div class="ttdoc">If training_level is anything but 0, the check will only train target's skill to that level.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01447">creature.cpp:1447</a></div></div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassCreature_html_ac9fd76782cca4157eda2afcb7d66f02e"><div class="ttname"><a href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">Creature::get_size</a></div><div class="ttdeci">virtual creature_size get_size() const =0</div></div>
<div class="ttc" id="aclassCreature_html_aedc37f6985ad2742a64a300bd7254cc2"><div class="ttname"><a href="classCreature.html#aedc37f6985ad2742a64a300bd7254cc2">Creature::get_armor_type</a></div><div class="ttdeci">virtual int get_armor_type(const damage_type_id &amp;dt, bodypart_id bp) const =0</div></div>
<div class="ttc" id="aclassnpc_html_a7ee1c9e434339418cb9b5907d8695806"><div class="ttname"><a href="classnpc.html#a7ee1c9e434339418cb9b5907d8695806">npc::is_enemy</a></div><div class="ttdeci">bool is_enemy() const</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02352">npc.cpp:2352</a></div></div>
<div class="ttc" id="aclassnpc_html_a965eb2beb1c490bb1b8efef1c07e20d0"><div class="ttname"><a href="classnpc.html#a965eb2beb1c490bb1b8efef1c07e20d0">npc::on_attacked</a></div><div class="ttdeci">void on_attacked(const Creature &amp;attacker)</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l01650">npc.cpp:1650</a></div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">creature_size::large</a></div><div class="ttdeci">@ large</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">creature_size::huge</a></div><div class="ttdeci">@ huge</div></div>
<div class="ttc" id="acreature_8h_html_a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43"><div class="ttname"><a href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">creature_size::tiny</a></div><div class="ttdeci">@ tiny</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l00861">Character::add_msg_player_or_npc()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="creature__tracker_8cpp_source.html#l00303">creature_tracker::creature_at()</a>, <a class="el" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name()</a>, <a class="el" href="creature_8cpp_source.html#l01447">Creature::dodge_check()</a>, <a class="el" href="classCreature.html#aedc37f6985ad2742a64a300bd7254cc2">Creature::get_armor_type()</a>, <a class="el" href="game_8cpp_source.html#l13827">get_creature_tracker()</a>, <a class="el" href="classCreature.html#ac9fd76782cca4157eda2afcb7d66f02e">Creature::get_size()</a>, <a class="el" href="melee_8cpp_source.html#l00367">Character::hit_roll()</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ab7cf27ffe6ea83cdcf8af2ef29de9285">huge</a>, <a class="el" href="npc_8cpp_source.html#l02352">npc::is_enemy()</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aafacdb0a401ccdf6b48551bbc00e8a74">large</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="npc_8cpp_source.html#l01650">npc::on_attacked()</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="character_8h_source.html#l02544">Character::query_yn()</a>, <a class="el" href="rng_8cpp_source.html#l00027">rng_float()</a>, <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2aeb5c1399a871211c7e7ed732d15e3a8b">small</a>, <a class="el" href="make__static_8h_source.html#l00031">STATIC</a>, and <a class="el" href="creature_8h.html#a72acd342747a434c8b399cdceeadeea2ad60cadf1a41c651e1f0ade50136bad43">tiny</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, and <a class="el" href="iuse_8cpp_source.html#l03647">tazer2()</a>.</p>

</div>
</div>
<a id="a27370e4a030a81d8bef9d17e96def01b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27370e4a030a81d8bef9d17e96def01b">&#9670;&nbsp;</a></span>tazer2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::tazer2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03647">3647</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;{</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>( p, <span class="keyword">true</span> ) &gt;= 2 ) {</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        <span class="comment">// Instead of having a ctrl+c+v of the function above, spawn a fake tazer and use it</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;        <span class="comment">// Ugly, but less so than copied blocks</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        <a class="code" href="classitem.html">item</a> fake( <span class="stringliteral">&quot;tazer&quot;</span>, <a class="code" href="namespacecalendar.html#a2830b54b0424fe452c0933f87d6201b3">calendar::turn_zero</a> );</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;        fake.charges = 2;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a9ddf58b64f06b9e91ed946ee217a48cc">tazer</a>( p, &amp;fake, <a class="code" href="namespacemath__opers.html#a2f0118617735cc810b9d76d62bd182f6">pos</a> );</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Insufficient power&quot;</span> ) );</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    }</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160; </div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;}</div>
<div class="ttc" id="anamespaceiuse_html_a9ddf58b64f06b9e91ed946ee217a48cc"><div class="ttname"><a href="namespaceiuse.html#a9ddf58b64f06b9e91ed946ee217a48cc">iuse::tazer</a></div><div class="ttdeci">std::optional&lt; int &gt; tazer(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l03574">iuse.cpp:3574</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8h_source.html#l03133">item::charges</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__impl_8h_source.html#l00203">math_opers::pos()</a>, <a class="el" href="iuse_8cpp_source.html#l03574">tazer()</a>, and <a class="el" href="calendar_8h_source.html#l00541">calendar::turn_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>, <a class="el" href="iuse_8cpp_source.html#l03662">shocktonfa_off()</a>, and <a class="el" href="iuse_8cpp_source.html#l03690">shocktonfa_on()</a>.</p>

</div>
</div>
<a id="a9a470e36c4a87310339cd4ac42ccf9b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a470e36c4a87310339cd4ac42ccf9b9">&#9670;&nbsp;</a></span>teleport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::teleport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l03208">3208</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;{</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        <span class="comment">// That would be evil</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    }</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    }</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <a class="code" href="namespaceteleport.html#a24cbf298b41e9fc23770c73d32e33a47">teleport::teleport</a>( *p );</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;}</div>
<div class="ttc" id="anamespaceteleport_html_a24cbf298b41e9fc23770c73d32e33a47"><div class="ttname"><a href="namespaceteleport.html#a24cbf298b41e9fc23770c73d32e33a47">teleport::teleport</a></div><div class="ttdeci">bool teleport(Creature &amp;critter, int min_distance=2, int max_distance=12, bool safe=false, bool add_teleglow=true)</div><div class="ttdoc">Teleports a creature to a tile within min_distance and max_distance tiles.</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8cpp_source.html#l00034">teleport.cpp:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, and <a class="el" href="teleport_8cpp_source.html#l00034">teleport::teleport()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="ae246e477e0e0f04bbf15bca5e511636e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae246e477e0e0f04bbf15bca5e511636e">&#9670;&nbsp;</a></span>thorazine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::thorazine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00948">948</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;{</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) ) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> );</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 15 );</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a>, 12_hours );</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 5 );</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a> );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a> );</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a> );</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> ) ) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#ada6166c57df3b5758b910c90079ffd56">effect_formication</a> );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) ) { <span class="comment">// adverse reaction</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel completely exhausted.&quot;</span> ) );</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#ae7eecab0795b77cbd6fabebc0e140486">mod_sleepiness</a>( 15 );</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a580fd4e4d3eb6bc249a8ada1633862e4">effect_took_thorazine_bad</a>, p-&gt;<a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a> ) );</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel a bit wobbly.&quot;</span> ) );</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a31dd5581755af5be9596d4bf26d48e98">effect_took_thorazine_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a1d165daff78c283cec6eb4197cb9a4a7"><div class="ttname"><a href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a></div><div class="ttdeci">static const efftype_id effect_took_thorazine(&quot;took_thorazine&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a31dd5581755af5be9596d4bf26d48e98"><div class="ttname"><a href="iuse_8cpp.html#a31dd5581755af5be9596d4bf26d48e98">effect_took_thorazine_visible</a></div><div class="ttdeci">static const efftype_id effect_took_thorazine_visible(&quot;took_thorazine_visible&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a580fd4e4d3eb6bc249a8ada1633862e4"><div class="ttname"><a href="iuse_8cpp.html#a580fd4e4d3eb6bc249a8ada1633862e4">effect_took_thorazine_bad</a></div><div class="ttdeci">static const efftype_id effect_took_thorazine_bad(&quot;took_thorazine_bad&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ada6166c57df3b5758b910c90079ffd56"><div class="ttname"><a href="iuse_8cpp.html#ada6166c57df3b5758b910c90079ffd56">effect_formication</a></div><div class="ttdeci">static const efftype_id effect_formication(&quot;formication&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a>, <a class="el" href="iuse_8cpp.html#ada6166c57df3b5758b910c90079ffd56">effect_formication</a>, <a class="el" href="iuse_8cpp.html#a33d14d146dbc0f416314bdb87d8fca77">effect_hallu</a>, <a class="el" href="iuse_8cpp.html#a460bb4cc70f1bbe0edae8969fb092c00">effect_high</a>, <a class="el" href="iuse_8cpp.html#a1d165daff78c283cec6eb4197cb9a4a7">effect_took_thorazine</a>, <a class="el" href="iuse_8cpp.html#a580fd4e4d3eb6bc249a8ada1633862e4">effect_took_thorazine_bad</a>, <a class="el" href="iuse_8cpp.html#a31dd5581755af5be9596d4bf26d48e98">effect_took_thorazine_visible</a>, <a class="el" href="iuse_8cpp.html#a6e356b8c88f37fd089a667b39f6b4419">effect_visuals</a>, <a class="el" href="creature_8cpp_source.html#l01863">Creature::get_effect_dur()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00348">m_bad</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="character_8cpp_source.html#l04544">Character::mod_sleepiness()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, and <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a8a66e2caedd3083f98d3c04025b3824b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a66e2caedd3083f98d3c04025b3824b">&#9670;&nbsp;</a></span>toolmod_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::toolmod_attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05231">5231</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;{</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    <span class="keywordflow">if</span>( !it || !it-&gt;<a class="code" href="classitem.html#a91fb3717957325c9800f90c58a03ba4c">is_toolmod</a>() ) {</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;tried to attach non-toolmod&quot;</span> );</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;    }</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160; </div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;    }</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160; </div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;    <span class="keyword">auto</span> <a class="code" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a> = [&amp;it]( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;        <span class="comment">// don&#39;t allow ups or bionic battery mods on a UPS or UPS-powered/bionic-powered tools</span></div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;        <span class="keywordflow">if</span>( ( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) || it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) &amp;&amp;</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;            ( e.has_flag( <a class="code" href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a> ) || e.has_flag( <a class="code" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a> ) ||</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;              e.has_flag( <a class="code" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a> ) ) ) {</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;        }</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160; </div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;        <span class="comment">// can&#39;t mod non-tool, or a tool with existing mods, or a battery currently installed</span></div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;        <span class="keywordflow">if</span>( !e.is_tool() || !e.toolmods().empty() || e.magazine_current() ) {</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;        }</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160; </div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;        <span class="comment">// can only attach to unmodified tools that use compatible ammo</span></div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;        <span class="keywordflow">return</span> std::any_of( it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;acceptable_ammo.begin(),</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;        it-&gt;<a class="code" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code" href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">mod</a>-&gt;acceptable_ammo.end(), [&amp;]( <span class="keyword">const</span> <a class="code" href="classstring__id.html">ammotype</a> &amp; at ) {</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;            return e.type-&gt;tool-&gt;ammo_id.count( at );</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;        } );</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;    };</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160; </div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> loc = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( filter, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Select tool to modify:&quot;</span> ), 1,</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;                                           <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have compatible tools.&quot;</span> ) );</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160; </div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;    <span class="keywordflow">if</span>( !loc ) {</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;    }</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160; </div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    <span class="keywordflow">if</span>( loc-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() ) {</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;        <span class="keywordflow">if</span>( !p-&gt;<a class="code" href="classCharacter.html#a3f04ae380d2d633eee808c7c6a11b6fb">unload</a>( loc ) ) {</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You cancel unloading the tool.&quot;</span> ) );</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;        }</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;    }</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160; </div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af4cc975c08b6887057e8b20b2d770aa3">toolmod_add</a>( std::move( loc ), <a class="code" href="classitem__location.html">item_location</a>( *p, it ) );</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_af4cc975c08b6887057e8b20b2d770aa3"><div class="ttname"><a href="classCharacter.html#af4cc975c08b6887057e8b20b2d770aa3">Character::toolmod_add</a></div><div class="ttdeci">void toolmod_add(item_location tool, item_location mod)</div><div class="ttdoc">Starts activity to install toolmod.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05511">character.cpp:5511</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3e2d3cbf6b78ce65033d1f9cbf1f59bf"><div class="ttname"><a href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a></div><div class="ttdeci">const flag_id flag_USE_UPS(&quot;USE_UPS&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a7d8a64454549e0bab5aa7d7a7091f9d1"><div class="ttname"><a href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a></div><div class="ttdeci">const flag_id flag_USES_BIONIC_POWER(&quot;USES_BIONIC_POWER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_aa02e6b316d23f2611650b8f60a7c87f0"><div class="ttname"><a href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a></div><div class="ttdeci">const flag_id flag_IS_UPS(&quot;IS_UPS&quot;)</div></div>
<div class="ttc" id="astructitype_html_a7f957db922884120f5a9ce0d8789fdc4"><div class="ttname"><a href="structitype.html#a7f957db922884120f5a9ce0d8789fdc4">itype::mod</a></div><div class="ttdeci">cata::value_ptr&lt; islot_mod &gt; mod</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01204">itype.h:1204</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="input__context_8cpp.html#a077f0863a15ffb1731f2cb207abcb958ab2c97ae425dd751b0e48a3acae79cf4a">filter</a>, <a class="el" href="flag_8cpp.html#aa02e6b316d23f2611650b8f60a7c87f0">flag_IS_UPS</a>, <a class="el" href="flag_8cpp.html#a3e2d3cbf6b78ce65033d1f9cbf1f59bf">flag_USE_UPS</a>, <a class="el" href="flag_8cpp.html#a7d8a64454549e0bab5aa7d7a7091f9d1">flag_USES_BIONIC_POWER</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l09953">item::is_tool()</a>, <a class="el" href="item_8cpp_source.html#l09775">item::is_toolmod()</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="item_8cpp_source.html#l11207">item::magazine_current()</a>, <a class="el" href="itype_8h_source.html#l01204">itype::mod</a>, <a class="el" href="character_8cpp_source.html#l05511">Character::toolmod_add()</a>, <a class="el" href="item_8cpp_source.html#l07765">item::toolmods()</a>, <a class="el" href="item_8h_source.html#l03074">item::type</a>, and <a class="el" href="character_8cpp_source.html#l11621">Character::unload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9be263d2564579adab8fcb2db24bbf1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be263d2564579adab8fcb2db24bbf1a">&#9670;&nbsp;</a></span>towel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::towel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04948">4948</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;{</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceiuse.html#a4d51721d3c384fb8c60d3f2207853091">towel_common</a>( p, it, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;}</div>
<div class="ttc" id="anamespaceiuse_html_a4d51721d3c384fb8c60d3f2207853091"><div class="ttname"><a href="namespaceiuse.html#a4d51721d3c384fb8c60d3f2207853091">iuse::towel_common</a></div><div class="ttdeci">int towel_common(Character *, item *, bool)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l04953">iuse.cpp:4953</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="iuse_8cpp_source.html#l04953">towel_common()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a4d51721d3c384fb8c60d3f2207853091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d51721d3c384fb8c60d3f2207853091">&#9670;&nbsp;</a></span>towel_common()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iuse::towel_common </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04953">4953</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;{</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    <span class="keywordflow">if</span>( !p ) {</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;        <a class="code" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;%s called action towel that requires character but no character is present&quot;</span>,</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;                  it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() );</div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;    }</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;    <span class="keywordtype">bool</span> slime = p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a> );</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    <span class="keywordtype">bool</span> boom = p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> );</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacetrapfunc.html#a57eccd180e218b54329c4c014b5fe13c">glow</a> = p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a> );</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <span class="keywordtype">int</span> mult = slime + boom + <a class="code" href="namespacetrapfunc.html#a57eccd180e218b54329c4c014b5fe13c">glow</a>; <span class="comment">// cleaning off more than one at once makes it take longer</span></div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    <span class="keywordtype">bool</span> towelUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    <span class="keyword">const</span> std::string <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> = it ? it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() : <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;towel&quot;</span> );</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160; </div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;    <span class="comment">// can&#39;t use an already wet towel!</span></div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;    <span class="keywordflow">if</span>( it &amp;&amp; it-&gt;<a class="code" href="classitem.html#a5093379156498b4d523b3ac1f733adc4">is_filthy</a>() ) {</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s is too filthy to clean anything!&quot;</span> ),</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it &amp;&amp; it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a> ) ) {</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That %s is too wet to soak up any more liquid!&quot;</span> ),</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;        <span class="comment">// clean off the messes first, more important</span></div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( slime || boom || <a class="code" href="namespacetrapfunc.html#a57eccd180e218b54329c4c014b5fe13c">glow</a> ) {</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a> ); <span class="comment">// able to clean off all at once</span></div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> );</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="iuse_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a> );</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You use the %s to clean yourself off, saturating it with slime!&quot;</span> ),</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;                              <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160; </div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;        towelUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;        <span class="keywordflow">if</span>( it &amp;&amp; it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ad3c607806d47a97eff457cf43aefe736">itype_towel</a> ) {</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;            it-&gt;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a> );</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;        }</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160; </div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;        <span class="comment">// dry off from being wet</span></div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#adfe71cd74e297421f79b6b8f3f31f418">has_atleast_one_wet_part</a>() ) {</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#a018806645e51c4a028ef6bdfe9440d19">MORALE_WET</a> );</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a1f888e61e9f5fb97cbf3a816a1e9c3f1">set_all_parts_wetness</a>( 0 );</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You use the %s to dry off, saturating it with water!&quot;</span> ),</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;                              <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160; </div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;        towelUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <span class="keywordflow">if</span>( it &amp;&amp; it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ad3c607806d47a97eff457cf43aefe736">itype_towel</a> ) {</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            it-&gt;<a class="code" href="classitem.html#ac5ff6ac1e7657b7b8525140669744a28">item_counter</a> = to_turns&lt;int&gt;( 30_minutes );</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            <span class="comment">// change &quot;towel&quot; to a &quot;towel_wet&quot; (different flavor text/color)</span></div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;            it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#aa79e3b5eebd78aa052b047842beb5572">itype_towel_wet</a>, p );</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;        }</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;        <span class="comment">// default message</span></div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are already dry; the %s does nothing.&quot;</span> ), <a class="code" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;    }</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160; </div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;    <span class="comment">// towel was used</span></div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;    <span class="keywordflow">if</span>( towelUsed ) {</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;        <span class="keywordflow">if</span>( mult == 0 ) {</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;            mult = 1;</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;        }</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) * 0.5 * mult );</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;        <span class="keywordflow">if</span>( it ) {</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;            <span class="comment">// WET, active items have their timer decremented every turn</span></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;            it-&gt;<a class="code" href="classitem.html#a5b29c86dff457effe5dc4b9e7a24da12">set_flag</a>( <a class="code" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a> );</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;            it-&gt;<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;        }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    }</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="keywordflow">return</span> it ? 1 : 0;</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a2725bcbfa9e92e0590930e6a8e35764c"><div class="ttname"><a href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">Character::rem_morale</a></div><div class="ttdeci">void rem_morale(const morale_type &amp;type, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00154">character_morale.cpp:154</a></div></div>
<div class="ttc" id="aclassCreature_html_a1f888e61e9f5fb97cbf3a816a1e9c3f1"><div class="ttname"><a href="classCreature.html#a1f888e61e9f5fb97cbf3a816a1e9c3f1">Creature::set_all_parts_wetness</a></div><div class="ttdeci">void set_all_parts_wetness(int set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02470">creature.cpp:2470</a></div></div>
<div class="ttc" id="aclassCreature_html_adfe71cd74e297421f79b6b8f3f31f418"><div class="ttname"><a href="classCreature.html#adfe71cd74e297421f79b6b8f3f31f418">Creature::has_atleast_one_wet_part</a></div><div class="ttdeci">bool has_atleast_one_wet_part() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02491">creature.cpp:2491</a></div></div>
<div class="ttc" id="aclassitem_html_a5093379156498b4d523b3ac1f733adc4"><div class="ttname"><a href="classitem.html#a5093379156498b4d523b3ac1f733adc4">item::is_filthy</a></div><div class="ttdeci">bool is_filthy() const</div><div class="ttdoc">Marks the item as filthy, so characters with squeamish trait can't wear it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l14652">item.cpp:14652</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a3402d96f947f3ce1d7a3c327a870c185"><div class="ttname"><a href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a></div><div class="ttdeci">const flag_id flag_FILTHY(&quot;FILTHY&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a85e69021f878bebdb83c52b769a60a3c"><div class="ttname"><a href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a></div><div class="ttdeci">const flag_id flag_WET(&quot;WET&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a8f6887393d4085f03584ef53b2c63d2f"><div class="ttname"><a href="iuse_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a></div><div class="ttdeci">static const efftype_id effect_glowing(&quot;glowing&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa79e3b5eebd78aa052b047842beb5572"><div class="ttname"><a href="iuse_8cpp.html#aa79e3b5eebd78aa052b047842beb5572">itype_towel_wet</a></div><div class="ttdeci">static const itype_id itype_towel_wet(&quot;towel_wet&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ad3c607806d47a97eff457cf43aefe736"><div class="ttname"><a href="iuse_8cpp.html#ad3c607806d47a97eff457cf43aefe736">itype_towel</a></div><div class="ttdeci">static const itype_id itype_towel(&quot;towel&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af021f5736261db03cad28a0d64c9ec2b"><div class="ttname"><a href="iuse_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a></div><div class="ttdeci">static const efftype_id effect_slimed(&quot;slimed&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_a018806645e51c4a028ef6bdfe9440d19"><div class="ttname"><a href="morale__types_8cpp.html#a018806645e51c4a028ef6bdfe9440d19">MORALE_WET</a></div><div class="ttdeci">const morale_type MORALE_WET(&quot;morale_wet&quot;)</div></div>
<div class="ttc" id="anamespacetrapfunc_html_a57eccd180e218b54329c4c014b5fe13c"><div class="ttname"><a href="namespacetrapfunc.html#a57eccd180e218b54329c4c014b5fe13c">trapfunc::glow</a></div><div class="ttdeci">bool glow(const tripoint &amp;p, Creature *c, item *i)</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l01426">trapfunc.cpp:1426</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="debug_8h_source.html#l00069">debugmsg</a>, <a class="el" href="iuse_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="el" href="iuse_8cpp.html#a8f6887393d4085f03584ef53b2c63d2f">effect_glowing</a>, <a class="el" href="iuse_8cpp.html#af021f5736261db03cad28a0d64c9ec2b">effect_slimed</a>, <a class="el" href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a>, <a class="el" href="flag_8cpp.html#a85e69021f878bebdb83c52b769a60a3c">flag_WET</a>, <a class="el" href="trapfunc_8cpp_source.html#l01426">trapfunc::glow()</a>, <a class="el" href="creature_8cpp_source.html#l02491">Creature::has_atleast_one_wet_part()</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="item_8cpp_source.html#l14652">item::is_filthy()</a>, <a class="el" href="item_8h_source.html#l03142">item::item_counter</a>, <a class="el" href="iuse_8cpp.html#ad3c607806d47a97eff457cf43aefe736">itype_towel</a>, <a class="el" href="iuse_8cpp.html#aa79e3b5eebd78aa052b047842beb5572">itype_towel_wet</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="morale__types_8cpp.html#a018806645e51c4a028ef6bdfe9440d19">MORALE_WET</a>, <a class="el" href="overmap_8cpp_source.html#l06412">om_direction::name()</a>, <a class="el" href="character__morale_8cpp_source.html#l00154">Character::rem_morale()</a>, <a class="el" href="creature_8cpp_source.html#l01722">Creature::remove_effect()</a>, <a class="el" href="creature_8cpp_source.html#l02470">Creature::set_all_parts_wetness()</a>, <a class="el" href="item_8cpp_source.html#l07602">item::set_flag()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l04948">towel()</a>.</p>

</div>
</div>
<a id="abed2047296de97284c321af16b9eb26e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed2047296de97284c321af16b9eb26e">&#9670;&nbsp;</a></span>unfold_generic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::unfold_generic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l05021">5021</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;{</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classvehicle__unfolding__activity__actor.html">vehicle_unfolding_activity_actor</a>( *it ) );</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a379081ad133b17e4ab3d230270b2414d">i_rem</a>( it );</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;}</div>
<div class="ttc" id="aclassvehicle__unfolding__activity__actor_html"><div class="ttname"><a href="classvehicle__unfolding__activity__actor.html">vehicle_unfolding_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01639">activity_actor_definitions.h:1640</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, and <a class="el" href="character__inventory_8cpp_source.html#l00433">Character::i_rem()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa506a3bba5e08ac1d6d193c4ed4eee27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa506a3bba5e08ac1d6d193c4ed4eee27">&#9670;&nbsp;</a></span>unpack_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::unpack_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02352">2352</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;{</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#ada7a49ad443c0522cdd7422d53bef2c1">cant_do_underwater</a>() ) {</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    std::string oname = it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>().<a class="code" href="classstring__id.html#ae75b0a209b55081a67c5fe6c17a4be00">str</a>() + <span class="stringliteral">&quot;_on&quot;</span>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 10_seconds ) );</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You unpack your %s for use.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a>( oname ), p ).<a class="code" href="classitem.html#a2993eb10a5ae589e6bb1be0a74cb65c1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="comment">// Check if unpacking led to invalid container state</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#afdec750ba898d61951dea20d9d01d885">invalidate_inventory_validity_cache</a>();</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_afdec750ba898d61951dea20d9d01d885"><div class="ttname"><a href="classCharacter.html#afdec750ba898d61951dea20d9d01d885">Character::invalidate_inventory_validity_cache</a></div><div class="ttdeci">void invalidate_inventory_validity_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03315">character.cpp:3315</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="item_8h_source.html#l03212">item::active</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="creature_8cpp_source.html#l00280">Creature::cant_do_underwater()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="character_8cpp_source.html#l03315">Character::invalidate_inventory_validity_cache()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="string__id_8h_source.html#l00260">string_id&lt; T &gt;::str()</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a61b11f14565a70be2cc19366cbe43266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b11f14565a70be2cc19366cbe43266">&#9670;&nbsp;</a></span>vibe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::vibe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04249">4249</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;{</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;        <span class="comment">// Long action</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;        <span class="comment">// Also, that would be creepy as fuck, seriously</span></div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    }</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t do that while mounted.&quot;</span> ) );</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;    }</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() &amp;&amp; ( !( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#ae80efa3a14d1c8e9eed25359959541c4">trait_GILLS</a> ) ||</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;                                   p-&gt;<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="iuse_8cpp.html#a96eaa8c9ac5b1f1874144304ef2e6034">itype_rebreather_on</a> ) ||</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;                                   p-&gt;<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="iuse_8cpp.html#a5f845a454ca1968b830b6092fa77fb1a">itype_rebreather_xl_on</a> ) ||</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;                                   p-&gt;<a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="iuse_8cpp.html#aa80469e8b89e0c120ebc640ba213f3ca">itype_mask_h20survivor_on</a> ) ) ) ) {</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It might be waterproof, but your lungs aren&#39;t.&quot;</span> ) );</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    }</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p ) ) {</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s batteries are dead.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;    }</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">get_sleepiness</a>() &gt;= <a class="code" href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">sleepiness_levels::DEAD_TIRED</a> ) {</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;*Your* batteries are dead.&quot;</span> ) );</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;        <span class="keywordtype">int</span> moves = to_moves&lt;int&gt;( 20_minutes );</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a428ea67bcf1a68b717f7cd4871b0b980">ammo_remaining</a>() &gt; 0 ) {</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You fire up your %s and start getting the tension out.&quot;</span> ),</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You whip out your %s and start getting the tension out.&quot;</span> ),</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;                                  it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;        }</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="iuse_8cpp.html#acb4abc5eb29a421c42368040e27a6520">ACT_VIBE</a>, moves, -1, 0, <span class="stringliteral">&quot;de-stressing&quot;</span> );</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.emplace_back( *p, it );</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    }</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00538">character_attire.cpp:538</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a5f845a454ca1968b830b6092fa77fb1a"><div class="ttname"><a href="iuse_8cpp.html#a5f845a454ca1968b830b6092fa77fb1a">itype_rebreather_xl_on</a></div><div class="ttdeci">static const itype_id itype_rebreather_xl_on(&quot;rebreather_xl_on&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a96eaa8c9ac5b1f1874144304ef2e6034"><div class="ttname"><a href="iuse_8cpp.html#a96eaa8c9ac5b1f1874144304ef2e6034">itype_rebreather_on</a></div><div class="ttdeci">static const itype_id itype_rebreather_on(&quot;rebreather_on&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_aa80469e8b89e0c120ebc640ba213f3ca"><div class="ttname"><a href="iuse_8cpp.html#aa80469e8b89e0c120ebc640ba213f3ca">itype_mask_h20survivor_on</a></div><div class="ttdeci">static const itype_id itype_mask_h20survivor_on(&quot;mask_h20survivor_on&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_acb4abc5eb29a421c42368040e27a6520"><div class="ttname"><a href="iuse_8cpp.html#acb4abc5eb29a421c42368040e27a6520">ACT_VIBE</a></div><div class="ttdeci">static const activity_id ACT_VIBE(&quot;ACT_VIBE&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae80efa3a14d1c8e9eed25359959541c4"><div class="ttname"><a href="iuse_8cpp.html#ae80efa3a14d1c8e9eed25359959541c4">trait_GILLS</a></div><div class="ttdeci">static const trait_id trait_GILLS(&quot;GILLS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="iuse_8cpp.html#acb4abc5eb29a421c42368040e27a6520">ACT_VIBE</a>, <a class="el" href="character_8h_source.html#l02709">Character::activity</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10739">item::ammo_remaining()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">DEAD_TIRED</a>, <a class="el" href="character_8cpp_source.html#l04604">Character::get_sleepiness()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l01732">Character::is_mounted()</a>, <a class="el" href="character_8h_source.html#l00538">Character::is_npc()</a>, <a class="el" href="creature_8cpp_source.html#l00292">Creature::is_underwater()</a>, <a class="el" href="character__attire_8cpp_source.html#l00538">Character::is_wearing()</a>, <a class="el" href="iuse_8cpp.html#aa80469e8b89e0c120ebc640ba213f3ca">itype_mask_h20survivor_on</a>, <a class="el" href="iuse_8cpp.html#a96eaa8c9ac5b1f1874144304ef2e6034">itype_rebreather_on</a>, <a class="el" href="iuse_8cpp.html#a5f845a454ca1968b830b6092fa77fb1a">itype_rebreather_xl_on</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="player__activity_8h_source.html#l00061">player_activity::targets</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, and <a class="el" href="iuse_8cpp.html#ae80efa3a14d1c8e9eed25359959541c4">trait_GILLS</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a62a20f8bfde5f4d89a486fa33de8ead7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a20f8bfde5f4d89a486fa33de8ead7">&#9670;&nbsp;</a></span>voltmeter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::voltmeter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08879">8879</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;{</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;    <span class="keyword">const</span> std::optional&lt;tripoint&gt; pnt_ = <a class="code" href="action_8cpp.html#a503aa06052a763e1b8c0be791e403acc">choose_adjacent</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Check voltage where?&quot;</span> ) );</div>
<div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;    <span class="keywordflow">if</span>( !pnt_ ) {</div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;    }</div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160; </div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;    <span class="keyword">const</span> <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( *pnt_ );</div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160; </div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;    <span class="keywordflow">if</span>( !vp ) {</div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;There&#39;s nothing to measure there.&quot;</span> ) );</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;    }</div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;    <span class="keywordflow">if</span>( vp-&gt;vehicle().fuel_left( <a class="code" href="iuse_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a> ) ) {</div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s has voltage.&quot;</span> ), vp-&gt;vehicle().name );</div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s has no voltage.&quot;</span> ), vp-&gt;vehicle().name );</div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;    }</div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="action_8cpp_source.html#l01188">choose_adjacent()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="iuse_8cpp.html#ab5f267c571dc194e5b7e0b10b5136a33">itype_battery</a>, and <a class="el" href="map_8cpp_source.html#l01316">map::veh_at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="af8916dea8e9d4477f1822ee9a7f74a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8916dea8e9d4477f1822ee9a7f74a2e">&#9670;&nbsp;</a></span>vortex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::vortex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l04289">4289</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;{</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;    std::vector&lt;point&gt; spawn;</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = -3; i &lt;= 3; i++ ) {</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;        spawn.emplace_back( -3, i );</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;        spawn.emplace_back( +3, i );</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;        spawn.emplace_back( i, -3 );</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        spawn.emplace_back( i, +3 );</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;    }</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    <span class="keywordflow">while</span>( !spawn.empty() ) {</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;        <span class="keyword">const</span> <a class="code" href="structtripoint.html">tripoint</a> offset( <a class="code" href="rng_8h.html#ac634f688b3c7864ab6992939ac7b0a6e">random_entry_removed</a>( spawn ), 0 );</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;        <a class="code" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;place_critter_at( <a class="code" href="iuse_8cpp.html#a7d00b54295a4fca7c788987dc4cd966c">mon_vortex</a>, offset + p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;        <span class="keywordflow">if</span>( !mon ) {</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;        }</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Air swirls all over&quot;</span> ) );</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;        p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        it-&gt;<a class="code" href="classitem.html#abf446115b6197c91dd21139de6688d18">convert</a>( <a class="code" href="iuse_8cpp.html#a6bdc54cb8bf92849c73b5f6e87fb4a29">itype_spiral_stone</a>, p );</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        mon-&gt;<a class="code" href="classmonster.html#a4e17d0d504a12d9b2e4de3e7a7503fff">friendly</a> = -1;</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    }</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160; </div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <span class="comment">// Only reachable when no monster has been spawned.</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Air swirls around you for a moment.&quot;</span> ) );</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a6bdc54cb8bf92849c73b5f6e87fb4a29"><div class="ttname"><a href="iuse_8cpp.html#a6bdc54cb8bf92849c73b5f6e87fb4a29">itype_spiral_stone</a></div><div class="ttdeci">static const itype_id itype_spiral_stone(&quot;spiral_stone&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a7d00b54295a4fca7c788987dc4cd966c"><div class="ttname"><a href="iuse_8cpp.html#a7d00b54295a4fca7c788987dc4cd966c">mon_vortex</a></div><div class="ttdeci">static const mtype_id mon_vortex(&quot;mon_vortex&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l00634">item::convert()</a>, <a class="el" href="monster_8h_source.html#l00539">monster::friendly</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="iuse_8cpp.html#a6bdc54cb8bf92849c73b5f6e87fb4a29">itype_spiral_stone</a>, <a class="el" href="enums_8h_source.html#l00351">m_warning</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="iuse_8cpp.html#a7d00b54295a4fca7c788987dc4cd966c">mon_vortex</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, and <a class="el" href="rng_8h_source.html#l00186">random_entry_removed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a9aed8ad3c9d74cb0c90a44684889b6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aed8ad3c9d74cb0c90a44684889b6fc">&#9670;&nbsp;</a></span>wash_all_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::wash_all_items </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08134">8134</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;{</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see to do that!&quot;</span> ) );</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;    }</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160; </div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;    <span class="comment">// Check that player isn&#39;t over volume limit as this might cause it to break... this is a hack.</span></div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;    <span class="comment">// TODO: find a better solution.</span></div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4f0f412e4bec8d107de42bd34f1fa441">volume_capacity</a>() &lt; p-&gt;<a class="code" href="classCharacter.html#ab3a5a1cd76002a3e9903b7e09b77bb3f">volume_carried</a>() ) {</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re carrying too much to clean anything.&quot;</span> ) );</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;    }</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160; </div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;    <a class="code" href="namespaceiuse.html#a1e7c6de87c732b8541fd0d6f6039e5ca">wash_items</a>( p, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;}</div>
<div class="ttc" id="aclassCharacter_html_a4f0f412e4bec8d107de42bd34f1fa441"><div class="ttname"><a href="classCharacter.html#a4f0f412e4bec8d107de42bd34f1fa441">Character::volume_capacity</a></div><div class="ttdeci">units::volume volume_capacity() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08778">character.cpp:8778</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab3a5a1cd76002a3e9903b7e09b77bb3f"><div class="ttname"><a href="classCharacter.html#ab3a5a1cd76002a3e9903b7e09b77bb3f">Character::volume_carried</a></div><div class="ttdeci">units::volume volume_carried() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08814">character.cpp:8814</a></div></div>
<div class="ttc" id="anamespaceiuse_html_a1e7c6de87c732b8541fd0d6f6039e5ca"><div class="ttname"><a href="namespaceiuse.html#a1e7c6de87c732b8541fd0d6f6039e5ca">iuse::wash_items</a></div><div class="ttdeci">std::optional&lt; int &gt; wash_items(Character *p, bool soft_items, bool hard_items)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08152">iuse.cpp:8152</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="character_8cpp_source.html#l08778">Character::volume_capacity()</a>, <a class="el" href="character_8cpp_source.html#l08814">Character::volume_carried()</a>, and <a class="el" href="iuse_8cpp_source.html#l08152">wash_items()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aec57f3dc11c77dbf445d5df1d7b99df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec57f3dc11c77dbf445d5df1d7b99df7">&#9670;&nbsp;</a></span>wash_hard_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::wash_hard_items </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08114">8114</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;{</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see to do that!&quot;</span> ) );</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;    }</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;    }</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;    <span class="comment">// Check that player isn&#39;t over volume limit as this might cause it to break... this is a hack.</span></div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;    <span class="comment">// TODO: find a better solution.</span></div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4f0f412e4bec8d107de42bd34f1fa441">volume_capacity</a>() &lt; p-&gt;<a class="code" href="classCharacter.html#ab3a5a1cd76002a3e9903b7e09b77bb3f">volume_carried</a>() ) {</div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re carrying too much to clean anything.&quot;</span> ) );</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;    }</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160; </div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;    <a class="code" href="namespaceiuse.html#a1e7c6de87c732b8541fd0d6f6039e5ca">wash_items</a>( p, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="character_8cpp_source.html#l08778">Character::volume_capacity()</a>, <a class="el" href="character_8cpp_source.html#l08814">Character::volume_carried()</a>, and <a class="el" href="iuse_8cpp_source.html#l08152">wash_items()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a1e7c6de87c732b8541fd0d6f6039e5ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e7c6de87c732b8541fd0d6f6039e5ca">&#9670;&nbsp;</a></span>wash_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::wash_items </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>soft_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hard_items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08152">8152</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;{</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;    }</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a96ec9152d401f128cf31a7cc35c97f65">inv</a>-&gt;restack( *p );</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory.html">inventory</a> &amp;crafting_inv = p-&gt;<a class="code" href="classCharacter.html#ace218285f4fbc7c7a9feac8378bc632e">crafting_inventory</a>();</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160; </div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;    <span class="keyword">auto</span> is_liquid = []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;        <span class="keywordflow">return</span> it.made_of( <a class="code" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">phase_id::LIQUID</a> );</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;    };</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    <span class="keywordtype">int</span> available_water = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>(</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;                              crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, INT_MAX, is_liquid ),</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;                              crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, INT_MAX, is_liquid )</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;                          );</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;    <span class="keywordtype">int</span> available_cleanser = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iuse_8cpp.html#af7f323b693950fdd1745f8ef03b5d049">itype_soap</a> ),</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;                                       <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iuse_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a> ),</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;                                               crafting_inv.<a class="code" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">charges_of</a>( <a class="code" href="iuse_8cpp.html#adf52cda18cfec81d44b4e4615814ffb9">itype_liquid_soap</a>, INT_MAX, is_liquid ) ) );</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160; </div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;    <span class="keyword">const</span> <a class="code" href="classinventory__filter__preset.html">inventory_filter_preset</a> preset( [soft_items, hard_items]( <span class="keyword">const</span> <a class="code" href="classitem__location.html">item_location</a> &amp; <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a> ) {</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a> ) &amp;&amp; !<a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a>-&gt;has_flag( <a class="code" href="flag_8cpp.html#a68c155abe820febd0ff34ec442f71867">flag_NO_CLEAN</a> ) &amp;&amp;</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;               ( ( soft_items &amp;&amp; <a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a>-&gt;is_soft() ) || ( hard_items &amp;&amp; !<a class="code" href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a>-&gt;is_soft() ) );</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;    } );</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;    <span class="keyword">auto</span> make_raw_stats = [available_water,</div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;                           available_cleanser]( <span class="keyword">const</span> std::vector&lt;std::pair&lt;item_location, int&gt;&gt; &amp;locs</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;    ) {</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pair : locs ) {</div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;            total_volume += pair.first-&gt;volume( <span class="keyword">false</span>, <span class="keyword">true</span>, pair.second );</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;        }</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;        <a class="code" href="structwashing__requirements.html">washing_requirements</a> required = <a class="code" href="iuse_8cpp.html#a872ef39ddbb8402edcd87207bb199d4d">washing_requirements_for_volume</a>( total_volume );</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;        <span class="keyword">const</span> std::string time = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a>( <a class="code" href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a>( required.<a class="code" href="structwashing__requirements.html#ad9736bdc37ee3fba815318a196d3fcc2">time</a> ), <span class="keyword">true</span> ),</div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;                                           <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> );</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;        <span class="keyword">auto</span> <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a> = []( <span class="keywordtype">int</span> val ) -&gt; std::string {</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;            <span class="keywordflow">if</span>( val == INT_MAX )</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;            {</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="translations_8h.html#a46bdf4dff9d320938561cade1c9a5f7e">pgettext</a>( <span class="stringliteral">&quot;short for infinity&quot;</span>, <span class="stringliteral">&quot;inf&quot;</span> );</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;            }</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%3d&quot;</span>, val );</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;        };</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;        <span class="keyword">const</span> std::string <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a> = <a class="code" href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a>( <a class="code" href="inventory__ui_8cpp.html#a1ffa2a35d817b4e75b5584f9e4bedc60">display_stat</a>( <span class="stringliteral">&quot;&quot;</span>, required.<a class="code" href="structwashing__requirements.html#ae3b10ec7f13b71e5d0b8431d0acbbda1">water</a>, available_water,</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;                                               <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;        <span class="keyword">const</span> std::string cleanser = <a class="code" href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a>( <a class="code" href="inventory__ui_8cpp.html#a1ffa2a35d817b4e75b5584f9e4bedc60">display_stat</a>( <span class="stringliteral">&quot;&quot;</span>, required.<a class="code" href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">cleanser</a>, available_cleanser,</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;                                     <a class="code" href="calendar_8cpp.html#abf1cdb8f4662bf96c8d762e9229df8d9">to_string</a> ), <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;        <span class="keyword">using</span> <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a446501053769c06c565094b26d26e8ef">stats</a> = <a class="code" href="classinventory__selector.html#a67f8317d706e28a92df0372ec6f2920a">inventory_selector::stats</a>;</div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a446501053769c06c565094b26d26e8ef">stats</a>{{</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;                {{ <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Water&quot;</span> ), <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a> }},</div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;                {{ <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cleanser&quot;</span> ), cleanser }},</div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;                {{ <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Estimated time&quot;</span> ), time }}</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;            }};</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;    };</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;    <a class="code" href="classinventory__multiselector.html">inventory_multiselector</a> inv_s( *p, preset, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;ITEMS TO CLEAN&quot;</span> ),</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;                                   make_raw_stats, <span class="comment">/*allow_select_contained=*/</span><span class="keyword">true</span> );</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;    inv_s.add_character_items( *p );</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;    inv_s.add_nearby_items( <a class="code" href="game__constants_8h.html#afec5544a31d4183805cff025dd84b5f4">PICKUP_RANGE</a> );</div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;    inv_s.set_title( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Multiclean&quot;</span> ) );</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;    inv_s.set_hint( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;To clean x items, type a number before selecting.&quot;</span> ) );</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;    <span class="keywordflow">if</span>( inv_s.empty() ) {</div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;        <a class="code" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( std::string( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You have nothing to clean.&quot;</span> ) ), <a class="code" href="output_8h.html#ab214b85345aeab978acdcea0250f27f5ad0065579023647501fcb0f076a1c5240">PF_GET_KEY</a> );</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;    }</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;    <span class="keyword">const</span> <a class="code" href="activity__item__handling_8cpp.html#a14dcded7a48aa4f96aeecf1e76f8f947">drop_locations</a> to_clean = inv_s.execute();</div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;    <span class="keywordflow">if</span>( to_clean.empty() ) {</div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;    }</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;    <span class="comment">// Determine if we have enough water and cleanser for all the items.</span></div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;    <a class="code" href="classunits_1_1quantity.html">units::volume</a> total_volume = 0_ml;</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="activity__item__handling_8cpp.html#a115d183c47f43a022e7d4aa0f26e05b7">drop_location</a> pair : to_clean ) {</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;        <span class="keywordflow">if</span>( !pair.first ) {</div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Never mind.&quot;</span> ) );</div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;        }</div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;        total_volume += pair.first-&gt;volume( <span class="keyword">false</span>, <span class="keyword">true</span>, pair.second );</div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;    }</div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160; </div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;    <a class="code" href="structwashing__requirements.html">washing_requirements</a> required = <a class="code" href="iuse_8cpp.html#a872ef39ddbb8402edcd87207bb199d4d">washing_requirements_for_volume</a>( total_volume );</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160; </div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;    <span class="keywordflow">if</span>( !crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, required.<a class="code" href="structwashing__requirements.html#ae3b10ec7f13b71e5d0b8431d0acbbda1">water</a>, is_liquid ) &amp;&amp;</div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;        !crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, required.<a class="code" href="structwashing__requirements.html#ae3b10ec7f13b71e5d0b8431d0acbbda1">water</a>, is_liquid ) ) {</div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need %1$i charges of water or clean water to wash these items.&quot;</span> ),</div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;                              required.<a class="code" href="structwashing__requirements.html#ae3b10ec7f13b71e5d0b8431d0acbbda1">water</a> );</div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="iuse_8cpp.html#af7f323b693950fdd1745f8ef03b5d049">itype_soap</a>, required.<a class="code" href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">cleanser</a> ) &amp;&amp;</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;               !crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="iuse_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, required.<a class="code" href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">cleanser</a> ) &amp;&amp;</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;               !crafting_inv.<a class="code" href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">has_charges</a>( <a class="code" href="iuse_8cpp.html#adf52cda18cfec81d44b4e4615814ffb9">itype_liquid_soap</a>, required.<a class="code" href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">cleanser</a>, is_liquid ) ) {</div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You need %1$i charges of cleansing agent to wash these items.&quot;</span> ),</div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;                              required.<a class="code" href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">cleanser</a> );</div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;    }</div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;    <span class="keyword">const</span> std::vector&lt;Character *&gt; helpers = p-&gt;<a class="code" href="classCharacter.html#a6c34c8584d08676678b5001a74de77dc">get_crafting_helpers</a>();</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;    <span class="keyword">const</span> std::size_t helpersize = p-&gt;<a class="code" href="classCharacter.html#a080121ea19d921b4045567a96a32e149">get_num_crafting_helpers</a>( 3 );</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;    required.<a class="code" href="structwashing__requirements.html#ad9736bdc37ee3fba815318a196d3fcc2">time</a> *= ( 1.0f - ( helpersize / 10.0f ) );</div>
<div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;    <span class="keywordflow">for</span>( std::size_t i = 0; i &lt; helpersize; i++ ) {</div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;        <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%s helps with this task&quot;</span> ), helpers[i]-&gt;get_name() );</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;    }</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;    <span class="comment">// Assign the activity values.</span></div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af7d50915d362a56eeff40bc6b392326d">assign_activity</a>( <a class="code" href="classwash__activity__actor.html">wash_activity_actor</a>( to_clean, required ) );</div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160; </div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a115d183c47f43a022e7d4aa0f26e05b7"><div class="ttname"><a href="activity__item__handling_8cpp.html#a115d183c47f43a022e7d4aa0f26e05b7">drop_location</a></div><div class="ttdeci">std::pair&lt; item_location, int &gt; drop_location</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00183">activity_item_handling.cpp:183</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a6fe65b9e39049b6d361709241a23d1b6"><div class="ttname"><a href="calendar_8cpp.html#a6fe65b9e39049b6d361709241a23d1b6">location</a></div><div class="ttdeci">static lat_long location</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00034">calendar.cpp:34</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ac991956646ae07083eff5852c753b886"><div class="ttname"><a href="cata__utility_8h.html#ac991956646ae07083eff5852c753b886">string_join</a></div><div class="ttdeci">std::string string_join(const Container &amp;iterable, const std::string &amp;joiner)</div><div class="ttdoc">Joins an iterable (class implementing begin() and end()) of elements into a single string with specif...</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00495">cata_utility.h:495</a></div></div>
<div class="ttc" id="aclassCharacter_html_a080121ea19d921b4045567a96a32e149"><div class="ttname"><a href="classCharacter.html#a080121ea19d921b4045567a96a32e149">Character::get_num_crafting_helpers</a></div><div class="ttdeci">int get_num_crafting_helpers(int max) const</div><div class="ttdef"><b>Definition:</b> <a href="character__crafting_8cpp_source.html#l00213">character_crafting.cpp:213</a></div></div>
<div class="ttc" id="aclassinventory__selector_html_a67f8317d706e28a92df0372ec6f2920a"><div class="ttname"><a href="classinventory__selector.html#a67f8317d706e28a92df0372ec6f2920a">inventory_selector::stats</a></div><div class="ttdeci">std::array&lt; stat, 3 &gt; stats</div><div class="ttdef"><b>Definition:</b> <a href="inventory__ui_8h_source.html#l00675">inventory_ui.h:675</a></div></div>
<div class="ttc" id="aclassinventory_html_a5702debf38c9bd88deab93d7979c2511"><div class="ttname"><a href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of</a></div><div class="ttdeci">int charges_of(const itype_id &amp;what, int limit=INT_MAX, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;, const std::function&lt; void(int)&gt; &amp;visitor=nullptr, bool in_tools=false) const override</div><div class="ttdoc">Count maximum available charges from this instance and any contained items.</div></div>
<div class="ttc" id="aclassread__only__visitable_html_a97ab02b5ae44854ce2869532a222ee8d"><div class="ttname"><a href="classread__only__visitable.html#a97ab02b5ae44854ce2869532a222ee8d">read_only_visitable::has_charges</a></div><div class="ttdeci">virtual bool has_charges(const itype_id &amp;it, int quantity, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;) const</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00223">visitable.cpp:223</a></div></div>
<div class="ttc" id="aclasstime__duration_html_aacd074821aecb38a24d9ce6ca42a9127"><div class="ttname"><a href="classtime__duration.html#aacd074821aecb38a24d9ce6ca42a9127">time_duration::from_moves</a></div><div class="ttdeci">static constexpr time_duration from_moves(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00225">calendar.h:225</a></div></div>
<div class="ttc" id="aclasswash__activity__actor_html"><div class="ttname"><a href="classwash__activity__actor.html">wash_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l01673">activity_actor_definitions.h:1674</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a68c155abe820febd0ff34ec442f71867"><div class="ttname"><a href="flag_8cpp.html#a68c155abe820febd0ff34ec442f71867">flag_NO_CLEAN</a></div><div class="ttdeci">const flag_id flag_NO_CLEAN(&quot;NO_CLEAN&quot;)</div></div>
<div class="ttc" id="ainventory__ui_8cpp_html_a1ffa2a35d817b4e75b5584f9e4bedc60"><div class="ttname"><a href="inventory__ui_8cpp.html#a1ffa2a35d817b4e75b5584f9e4bedc60">display_stat</a></div><div class="ttdeci">inventory_selector::stat display_stat(const std::string &amp;caption, int cur_value, int max_value, const std::function&lt; std::string(int)&gt; &amp;disp_func)</div><div class="ttdef"><b>Definition:</b> <a href="inventory__ui_8cpp_source.html#l02509">inventory_ui.cpp:2509</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a04c0f30be5943072fbaecacc8a0cf848"><div class="ttname"><a href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a></div><div class="ttdeci">static const itype_id itype_water_clean(&quot;water_clean&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a872ef39ddbb8402edcd87207bb199d4d"><div class="ttname"><a href="iuse_8cpp.html#a872ef39ddbb8402edcd87207bb199d4d">washing_requirements_for_volume</a></div><div class="ttdeci">washing_requirements washing_requirements_for_volume(const units::volume &amp;vol)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l08086">iuse.cpp:8086</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_a94c468761d26393294e93fd61638b9b3"><div class="ttname"><a href="iuse_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a></div><div class="ttdeci">static const itype_id itype_detergent(&quot;detergent&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_adf52cda18cfec81d44b4e4615814ffb9"><div class="ttname"><a href="iuse_8cpp.html#adf52cda18cfec81d44b4e4615814ffb9">itype_liquid_soap</a></div><div class="ttdeci">static const itype_id itype_liquid_soap(&quot;liquid_soap&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af7f323b693950fdd1745f8ef03b5d049"><div class="ttname"><a href="iuse_8cpp.html#af7f323b693950fdd1745f8ef03b5d049">itype_soap</a></div><div class="ttdeci">static const itype_id itype_soap(&quot;soap&quot;)</div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02player__display_8cpp_03_html_a9cb33f7a7315d3cd8c5cf886691982b3a446501053769c06c565094b26d26e8ef"><div class="ttname"><a href="namespaceanonymous__namespace_02player__display_8cpp_03.html#a9cb33f7a7315d3cd8c5cf886691982b3a446501053769c06c565094b26d26e8ef">anonymous_namespace{player_display.cpp}::player_display_tab::stats</a></div><div class="ttdeci">@ stats</div></div>
<div class="ttc" id="aomdata_8h_html_ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c"><div class="ttname"><a href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">oter_flags::water</a></div><div class="ttdeci">@ water</div></div>
<div class="ttc" id="aoutput_8h_html_ab214b85345aeab978acdcea0250f27f5ad0065579023647501fcb0f076a1c5240"><div class="ttname"><a href="output_8h.html#ab214b85345aeab978acdcea0250f27f5ad0065579023647501fcb0f076a1c5240">PF_GET_KEY</a></div><div class="ttdeci">@ PF_GET_KEY</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00476">output.h:476</a></div></div>
<div class="ttc" id="astructwashing__requirements_html"><div class="ttname"><a href="structwashing__requirements.html">washing_requirements</a></div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00242">iuse.h:242</a></div></div>
<div class="ttc" id="astructwashing__requirements_html_aae40e45233f2f31576a80aa01618d48e"><div class="ttname"><a href="structwashing__requirements.html#aae40e45233f2f31576a80aa01618d48e">washing_requirements::cleanser</a></div><div class="ttdeci">int cleanser</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00244">iuse.h:244</a></div></div>
<div class="ttc" id="astructwashing__requirements_html_ad9736bdc37ee3fba815318a196d3fcc2"><div class="ttname"><a href="structwashing__requirements.html#ad9736bdc37ee3fba815318a196d3fcc2">washing_requirements::time</a></div><div class="ttdeci">int time</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00245">iuse.h:245</a></div></div>
<div class="ttc" id="astructwashing__requirements_html_ae3b10ec7f13b71e5d0b8431d0acbbda1"><div class="ttname"><a href="structwashing__requirements.html#ae3b10ec7f13b71e5d0b8431d0acbbda1">washing_requirements::water</a></div><div class="ttdeci">int water</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8h_source.html#l00243">iuse.h:243</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="inventory__ui_8cpp_source.html#l02079">inventory_selector::add_character_items()</a>, <a class="el" href="messages_8cpp_source.html#l00997">add_msg()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l02149">inventory_selector::add_nearby_items()</a>, <a class="el" href="character_8cpp_source.html#l08935">Character::assign_activity()</a>, <a class="el" href="color_8h_source.html#l00017">c_light_gray</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="classinventory.html#a5702debf38c9bd88deab93d7979c2511">inventory::charges_of()</a>, <a class="el" href="iuse_8h_source.html#l00244">washing_requirements::cleanser</a>, <a class="el" href="color_8cpp_source.html#l00742">colorize()</a>, <a class="el" href="crafting_8cpp_source.html#l00629">Character::crafting_inventory()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l02509">display_stat()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l02885">inventory_selector::empty()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l03705">inventory_multiselector::execute()</a>, <a class="el" href="flag_8cpp.html#a3402d96f947f3ce1d7a3c327a870c185">flag_FILTHY</a>, <a class="el" href="flag_8cpp.html#a68c155abe820febd0ff34ec442f71867">flag_NO_CLEAN</a>, <a class="el" href="calendar_8h_source.html#l00225">time_duration::from_moves()</a>, <a class="el" href="crafting_8cpp_source.html#l03051">Character::get_crafting_helpers()</a>, <a class="el" href="character__crafting_8cpp_source.html#l00213">Character::get_num_crafting_helpers()</a>, <a class="el" href="visitable_8cpp_source.html#l00223">read_only_visitable::has_charges()</a>, <a class="el" href="character_8h_source.html#l02712">Character::inv</a>, <a class="el" href="iuse_8cpp.html#a94c468761d26393294e93fd61638b9b3">itype_detergent</a>, <a class="el" href="iuse_8cpp.html#adf52cda18cfec81d44b4e4615814ffb9">itype_liquid_soap</a>, <a class="el" href="iuse_8cpp.html#af7f323b693950fdd1745f8ef03b5d049">itype_soap</a>, <a class="el" href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5a5918e24870f0ea98b9978dae8a69c533">LIQUID</a>, <a class="el" href="calendar_8cpp_source.html#l00034">location</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="math__parser__func_8h_source.html#l00035">max()</a>, <a class="el" href="output_8h_source.html#l00476">PF_GET_KEY</a>, <a class="el" href="translations_8h_source.html#l00092">pgettext</a>, <a class="el" href="game__constants_8h_source.html#l00070">PICKUP_RANGE</a>, <a class="el" href="output_8cpp_source.html#l00912">popup()</a>, <a class="el" href="inventory__ui_8h_source.html#l00630">inventory_selector::set_hint()</a>, <a class="el" href="inventory__ui_8h_source.html#l00626">inventory_selector::set_title()</a>, <a class="el" href="string__formatter_8h_source.html#l00417">string_format()</a>, <a class="el" href="cata__utility_8h_source.html#l00495">string_join()</a>, <a class="el" href="iuse_8h_source.html#l00245">washing_requirements::time</a>, <a class="el" href="calendar_8cpp_source.html#l00546">to_string()</a>, <a class="el" href="iuse_8cpp_source.html#l08086">washing_requirements_for_volume()</a>, <a class="el" href="iuse_8h_source.html#l00243">washing_requirements::water</a>, and <a class="el" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08134">wash_all_items()</a>, <a class="el" href="iuse_8cpp_source.html#l08114">wash_hard_items()</a>, and <a class="el" href="iuse_8cpp_source.html#l08094">wash_soft_items()</a>.</p>

</div>
</div>
<a id="a86c1eba6bed33d5c6aa77f6663955071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c1eba6bed33d5c6aa77f6663955071">&#9670;&nbsp;</a></span>wash_soft_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::wash_soft_items </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08094">8094</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;{</div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a2e48b53e07d4a302039de49cacec41f2">fine_detail_vision_mod</a>() &gt; 4 ) {</div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You can&#39;t see to do that!&quot;</span> ) );</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;    }</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;    }</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;    <span class="comment">// Check that player isn&#39;t over volume limit as this might cause it to break... this is a hack.</span></div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;    <span class="comment">// TODO: find a better solution.</span></div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a4f0f412e4bec8d107de42bd34f1fa441">volume_capacity</a>() &lt; p-&gt;<a class="code" href="classCharacter.html#ab3a5a1cd76002a3e9903b7e09b77bb3f">volume_carried</a>() ) {</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You&#39;re carrying too much to clean anything.&quot;</span> ) );</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;    }</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160; </div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;    <a class="code" href="namespaceiuse.html#a1e7c6de87c732b8541fd0d6f6039e5ca">wash_items</a>( p, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="character_8cpp_source.html#l02791">Character::fine_detail_vision_mod()</a>, <a class="el" href="character_8cpp_source.html#l08778">Character::volume_capacity()</a>, <a class="el" href="character_8cpp_source.html#l08814">Character::volume_carried()</a>, and <a class="el" href="iuse_8cpp_source.html#l08152">wash_items()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="aa31522ea230f611408238b5ca4816f8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31522ea230f611408238b5ca4816f8c">&#9670;&nbsp;</a></span>water_purifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::water_purifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l02426">2426</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;{</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a35e813323d0b9a1754cb6fdb078aafa2">cant_do_mounted</a>() ) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <a class="code" href="classitem__location.html">item_location</a> <a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a> = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;inv_map_splice( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; e ) {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="keywordflow">return</span> !e.<a class="code" href="classitem.html#ae05d298b2cf91e4c12d5beca5f38c67f">empty</a>() &amp;&amp; e.<a class="code" href="classvisitable.html#abf24bf044bbf16def702fd78351fc46f">has_item_with</a>( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;            return it.typeId() == itype_water;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        } );</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    }, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Purify what?&quot;</span> ), 1, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have water to purify.&quot;</span> ) );</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a> ) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t have that item!&quot;</span> ) );</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <span class="keyword">const</span> std::vector&lt;item *&gt; liquids = <a class="code" href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">obj</a>-&gt;items_with( []( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> &amp; it ) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="keywordflow">return</span> it.<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    } );</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordtype">int</span> charges_of_water = 0;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classitem.html">item</a> *water : liquids ) {</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        charges_of_water += <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a>-&gt;charges;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordflow">if</span>( !it-&gt;<a class="code" href="classitem.html#aafdd6e14936eb02b0d71a96e7e325746">ammo_sufficient</a>( p, charges_of_water ) ) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;That volume of water is too large to purify.&quot;</span> ) );</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 2_seconds ) );</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160; </div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="classitem.html">item</a> *water : liquids ) {</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        <a class="code" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a>-&gt;convert( <a class="code" href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, p ).poison = 0;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    }</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">return</span> charges_of_water;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;}</div>
<div class="ttc" id="aclassint__id_html_a315169d32cce4267b7c8dceff4b0d1d7"><div class="ttname"><a href="classint__id.html#a315169d32cce4267b7c8dceff4b0d1d7">int_id::obj</a></div><div class="ttdeci">const ammo_effect &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="item_8cpp_source.html#l10855">item::ammo_sufficient()</a>, <a class="el" href="character_8cpp_source.html#l01720">Character::cant_do_mounted()</a>, <a class="el" href="item_8cpp_source.html#l15135">item::empty()</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="visitable_8cpp_source.html#l00083">visitable::has_item_with()</a>, <a class="el" href="iuse_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="iuse_8cpp.html#a04c0f30be5943072fbaecacc8a0cf848">itype_water_clean</a>, <a class="el" href="enums_8h_source.html#l00352">m_info</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, and <a class="el" href="omdata_8h.html#ac214d1ec2c5c346a2ba8d8805839d08da9460370bb0ca1c98a779b1bcc6861c2c">water</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a2f22223365b4a47dfbe1aee766cf30ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f22223365b4a47dfbe1aee766cf30ac">&#9670;&nbsp;</a></span>weak_antibiotic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::weak_antibiotic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l08288">8288</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;{</div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a> ) &amp;&amp; !p-&gt;<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="iuse_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a> ) ) {</div>
<div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The throbbing of the infection diminishes.  Slightly.&quot;</span> ) );</div>
<div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;    }</div>
<div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a>, 12_hours );</div>
<div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a88b33113ca2c34b51cb243ac5ce03950">effect_weak_antibiotic_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 9_hours, 15_hours ) );</div>
<div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a66fbdfe284eb410fdbece4a3be98bf55"><div class="ttname"><a href="iuse_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a></div><div class="ttdeci">static const efftype_id effect_weak_antibiotic(&quot;weak_antibiotic&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_a88b33113ca2c34b51cb243ac5ce03950"><div class="ttname"><a href="iuse_8cpp.html#a88b33113ca2c34b51cb243ac5ce03950">effect_weak_antibiotic_visible</a></div><div class="ttdeci">static const efftype_id effect_weak_antibiotic_visible(&quot;weak_antibiotic_visible&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="el" href="iuse_8cpp.html#a66fbdfe284eb410fdbece4a3be98bf55">effect_weak_antibiotic</a>, <a class="el" href="iuse_8cpp.html#a88b33113ca2c34b51cb243ac5ce03950">effect_weak_antibiotic_visible</a>, <a class="el" href="creature_8cpp_source.html#l01770">Creature::has_effect()</a>, <a class="el" href="enums_8h_source.html#l00347">m_good</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a28b731cc1720938427d5e2cb3aabd4d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b731cc1720938427d5e2cb3aabd4d1">&#9670;&nbsp;</a></span>weather_tool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::weather_tool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l07781">7781</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;{</div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;    <a class="code" href="classweather__manager.html">weather_manager</a> &amp;<a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a> = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>();</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;    <span class="keyword">const</span> <a class="code" href="structw__point.html">w_point</a> weatherPoint = *<a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.weather_precise;</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160; </div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;    <span class="comment">/* Possibly used twice. Worth spending the time to precalculate. */</span></div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> player_local_temp = <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.get_temperature( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160; </div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#af41c813a7805e29ebce5fac86b07b133">itype_weather_reader</a> ) {</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %s&#39;s monitor slowly outputs the data&quot;</span> ),</div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;                              it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;    }</div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#ae7f53e774a12d5b6eac870c207630b5f">flag_THERMOMETER</a> ) ) {</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;        std::string temperature_str;</div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().has_flag_ter( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ||</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;            <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().has_flag_ter( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93">ter_furn_flag::TFLAG_SHALLOW_WATER</a>, p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;            temperature_str = <a class="code" href="group__Weather.html#ga05edac4f7c2a15412fb12fc89c961d42">print_temperature</a>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().get_cur_weather_gen().get_water_temperature() );</div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;            temperature_str = <a class="code" href="group__Weather.html#ga05edac4f7c2a15412fb12fc89c961d42">print_temperature</a>( player_local_temp );</div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;        }</div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s reads %2$s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;                              temperature_str );</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;    }</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a860bdb1bea06460e3a9910c711aa6954">flag_HYGROMETER</a> ) ) {</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#aa4311b0672401e15332293027507d0b6">itype_hygrometer</a> ) {</div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;                <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s reads %2$s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;                <a class="code" href="group__Weather.html#gaebdc6d79e870b8cc932aa71a7da1c7f1">print_humidity</a>( <a class="code" href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a>( weatherPoint.<a class="code" href="structw__point.html#a8eb98705d3735e84f406478b2f69ef18">humidity</a>, <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id,</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;                                                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) );</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;                <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Relative Humidity: %s.&quot;</span> ),</div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;                <a class="code" href="group__Weather.html#gaebdc6d79e870b8cc932aa71a7da1c7f1">print_humidity</a>( <a class="code" href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a>( weatherPoint.<a class="code" href="structw__point.html#a8eb98705d3735e84f406478b2f69ef18">humidity</a>, <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id,</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;                                                    <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) ) );</div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;        }</div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;    }</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a3e532e4e5b7cef943634b1d910f99384">has_flag</a>( <a class="code" href="flag_8cpp.html#a03291b3a93ac054dd4ae598e0a0fd1c2">flag_BAROMETER</a> ) ) {</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;        <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#ae4f5124bfe92144bc548101d51bf872b">itype_barometer</a> ) {</div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;                <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The %1$s reads %2$s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>(),</div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;                <a class="code" href="group__Weather.html#gaaa234adc23b8eaf838b0109bf51e38c0">print_pressure</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( weatherPoint.<a class="code" href="structw__point.html#aaf1ed8088df29634ce5259faca54f3d5">pressure</a> ) ) );</div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;            p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Pressure: %s.&quot;</span> ),</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;                                  <a class="code" href="group__Weather.html#gaaa234adc23b8eaf838b0109bf51e38c0">print_pressure</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( weatherPoint.<a class="code" href="structw__point.html#aaf1ed8088df29634ce5259faca54f3d5">pressure</a> ) ) );</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;        }</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;    }</div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160; </div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;    <span class="keywordflow">if</span>( it-&gt;<a class="code" href="classitem.html#a4a9972e826d25be6736b749ab94b230f">typeId</a>() == <a class="code" href="iuse_8cpp.html#af41c813a7805e29ebce5fac86b07b133">itype_weather_reader</a> ) {</div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;        <span class="keywordtype">int</span> vehwindspeed = 0;</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>().veh_at( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ) {</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;            vehwindspeed = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( vp-&gt;vehicle().velocity / 100 ); <span class="comment">// For mph</span></div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;        }</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">oter_id</a> &amp;cur_om_ter = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">ter</a>( p-&gt;<a class="code" href="classCreature.html#a14ecbd8f044628463354090421a805b4">global_omt_location</a>() );</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> windpower = <a class="code" href="group__Weather.html#ga41d8c01f9a844c01ed5bd8a7d3ad805b">get_local_windpower</a>( <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.windspeed + vehwindspeed, cur_om_ter,</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;                              p-&gt;<a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>(), <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.winddirection, <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( p-&gt;<a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160; </div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wind Speed: %.1f %s.&quot;</span> ),</div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;                              <a class="code" href="cata__utility_8h.html#ac1ae65aea2ccaf5d043cb644d64439ae">convert_velocity</a>( windpower * 100, <a class="code" href="cata__utility_8h.html#a8552a79ac91f30928afd501d057e074daaf245539afaf0807e04341c935d74668">VU_WIND</a> ),</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;                              <a class="code" href="cata__utility_8cpp.html#aa7913ee9a8cefb3ed6e7a07119818690">velocity_units</a>( <a class="code" href="cata__utility_8h.html#a8552a79ac91f30928afd501d057e074daaf245539afaf0807e04341c935d74668">VU_WIND</a> ) );</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;            <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Feels Like: %s.&quot;</span> ),</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;            <a class="code" href="group__Weather.html#ga05edac4f7c2a15412fb12fc89c961d42">print_temperature</a>( player_local_temp + <a class="code" href="group__Weather.html#ga8db4da91fa5a84dc3a064b99963cf846">get_local_windchill</a>( weatherPoint.<a class="code" href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">temperature</a>,</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;                               weatherPoint.<a class="code" href="structw__point.html#a8eb98705d3735e84f406478b2f69ef18">humidity</a>, windpower ) ) );</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;        std::string dirstring = <a class="code" href="group__Weather.html#ga91e01ef6a71f6495015d3a14131952f2">get_dirstring</a>( <a class="code" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">weather</a>.winddirection );</div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea3ab788e6c7dfa584be4ca2e90c49ec8c">m_neutral</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Wind Direction: From the %s.&quot;</span> ), dirstring );</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;    }</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160; </div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;    <span class="keywordflow">return</span> 1; <span class="comment">//TODO check</span></div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;}</div>
<div class="ttc" id="acata__utility_8cpp_html_aa7913ee9a8cefb3ed6e7a07119818690"><div class="ttname"><a href="cata__utility_8cpp.html#aa7913ee9a8cefb3ed6e7a07119818690">velocity_units</a></div><div class="ttdeci">const char * velocity_units(const units_type vel_units)</div><div class="ttdoc">Create a units label for a velocity value.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00210">cata_utility.cpp:210</a></div></div>
<div class="ttc" id="acata__utility_8h_html_a8552a79ac91f30928afd501d057e074daaf245539afaf0807e04341c935d74668"><div class="ttname"><a href="cata__utility_8h.html#a8552a79ac91f30928afd501d057e074daaf245539afaf0807e04341c935d74668">VU_WIND</a></div><div class="ttdeci">@ VU_WIND</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00057">cata_utility.h:56</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ac1ae65aea2ccaf5d043cb644d64439ae"><div class="ttname"><a href="cata__utility_8h.html#ac1ae65aea2ccaf5d043cb644d64439ae">convert_velocity</a></div><div class="ttdeci">double convert_velocity(int velocity, units_type vel_units)</div><div class="ttdoc">Convert internal velocity units to units defined by user.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00120">units_utility.cpp:120</a></div></div>
<div class="ttc" id="aclassCreature_html_a14ecbd8f044628463354090421a805b4"><div class="ttname"><a href="classCreature.html#a14ecbd8f044628463354090421a805b4">Creature::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdoc">Returns the location of the creature in global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03242">creature.cpp:3242</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aa9fbf966291f6b82de9c540262324aba"><div class="ttname"><a href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">overmapbuffer::ter</a></div><div class="ttdeci">const oter_id &amp; ter(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Returns the overmap terrain at the given OMT coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00780">overmapbuffer.cpp:780</a></div></div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00198">weather.h:199</a></div></div>
<div class="ttc" id="aflag_8cpp_html_a03291b3a93ac054dd4ae598e0a0fd1c2"><div class="ttname"><a href="flag_8cpp.html#a03291b3a93ac054dd4ae598e0a0fd1c2">flag_BAROMETER</a></div><div class="ttdeci">const flag_id flag_BAROMETER(&quot;BAROMETER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_a860bdb1bea06460e3a9910c711aa6954"><div class="ttname"><a href="flag_8cpp.html#a860bdb1bea06460e3a9910c711aa6954">flag_HYGROMETER</a></div><div class="ttdeci">const flag_id flag_HYGROMETER(&quot;HYGROMETER&quot;)</div></div>
<div class="ttc" id="aflag_8cpp_html_ae7f53e774a12d5b6eac870c207630b5f"><div class="ttname"><a href="flag_8cpp.html#ae7f53e774a12d5b6eac870c207630b5f">flag_THERMOMETER</a></div><div class="ttdeci">const flag_id flag_THERMOMETER(&quot;THERMOMETER&quot;)</div></div>
<div class="ttc" id="agroup__Weather_html_ga05edac4f7c2a15412fb12fc89c961d42"><div class="ttname"><a href="group__Weather.html#ga05edac4f7c2a15412fb12fc89c961d42">print_temperature</a></div><div class="ttdeci">std::string print_temperature(units::temperature temperature, int decimals)</div><div class="ttdoc">Print temperature (and convert to Celsius if Celsius display is enabled.)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00600">weather.cpp:600</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga3b6c37e7f8086254c46acb9572ea97d1"><div class="ttname"><a href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a></div><div class="ttdeci">int get_local_humidity(double humidity, const weather_type_id &amp;weather, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00772">weather.cpp:772</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga41d8c01f9a844c01ed5bd8a7d3ad805b"><div class="ttname"><a href="group__Weather.html#ga41d8c01f9a844c01ed5bd8a7d3ad805b">get_local_windpower</a></div><div class="ttdeci">int get_local_windpower(int windpower, const oter_id &amp;omter, const tripoint_abs_ms &amp;location, const int &amp;winddirection, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00786">weather.cpp:786</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga8db4da91fa5a84dc3a064b99963cf846"><div class="ttname"><a href="group__Weather.html#ga8db4da91fa5a84dc3a064b99963cf846">get_local_windchill</a></div><div class="ttdeci">units::temperature_delta get_local_windchill(units::temperature temperature, double humidity, double wind_mph)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00636">weather.cpp:636</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga91e01ef6a71f6495015d3a14131952f2"><div class="ttname"><a href="group__Weather.html#ga91e01ef6a71f6495015d3a14131952f2">get_dirstring</a></div><div class="ttdeci">std::string get_dirstring(int angle)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00722">weather.cpp:722</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaaa234adc23b8eaf838b0109bf51e38c0"><div class="ttname"><a href="group__Weather.html#gaaa234adc23b8eaf838b0109bf51e38c0">print_pressure</a></div><div class="ttdeci">std::string print_pressure(double pressure, int decimals)</div><div class="ttdoc">Print pressure (no conversions.)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00630">weather.cpp:630</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaebdc6d79e870b8cc932aa71a7da1c7f1"><div class="ttname"><a href="group__Weather.html#gaebdc6d79e870b8cc932aa71a7da1c7f1">print_humidity</a></div><div class="ttdeci">std::string print_humidity(double humidity, int decimals)</div><div class="ttdoc">Print relative humidity (no conversions.)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00621">weather.cpp:621</a></div></div>
<div class="ttc" id="aiuse_8cpp_html_aa4311b0672401e15332293027507d0b6"><div class="ttname"><a href="iuse_8cpp.html#aa4311b0672401e15332293027507d0b6">itype_hygrometer</a></div><div class="ttdeci">static const itype_id itype_hygrometer(&quot;hygrometer&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae4f5124bfe92144bc548101d51bf872b"><div class="ttname"><a href="iuse_8cpp.html#ae4f5124bfe92144bc548101d51bf872b">itype_barometer</a></div><div class="ttdeci">static const itype_id itype_barometer(&quot;barometer&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_af41c813a7805e29ebce5fac86b07b133"><div class="ttname"><a href="iuse_8cpp.html#af41c813a7805e29ebce5fac86b07b133">itype_weather_reader</a></div><div class="ttdeci">static const itype_id itype_weather_reader(&quot;weather_reader&quot;)</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93">ter_furn_flag::TFLAG_SHALLOW_WATER</a></div><div class="ttdeci">@ TFLAG_SHALLOW_WATER</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3aaab92e69374e4c7b8c6741fe02e574b9">sounds::sound_t::weather</a></div><div class="ttdeci">@ weather</div></div>
<div class="ttc" id="astructw__point_html"><div class="ttname"><a href="structw__point.html">w_point</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00017">weather_gen.h:17</a></div></div>
<div class="ttc" id="astructw__point_html_a3002b10d38744db5d25fa1011e28e09e"><div class="ttname"><a href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">w_point::temperature</a></div><div class="ttdeci">units::temperature temperature</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00018">weather_gen.h:18</a></div></div>
<div class="ttc" id="astructw__point_html_a8eb98705d3735e84f406478b2f69ef18"><div class="ttname"><a href="structw__point.html#a8eb98705d3735e84f406478b2f69ef18">w_point::humidity</a></div><div class="ttdeci">double humidity</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00019">weather_gen.h:19</a></div></div>
<div class="ttc" id="astructw__point_html_aaf1ed8088df29634ce5259faca54f3d5"><div class="ttname"><a href="structw__point.html#aaf1ed8088df29634ce5259faca54f3d5">w_point::pressure</a></div><div class="ttdeci">double pressure</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00020">weather_gen.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="math__parser__func_8h_source.html#l00030">abs()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="units__utility_8cpp_source.html#l00120">convert_velocity()</a>, <a class="el" href="flag_8cpp.html#a03291b3a93ac054dd4ae598e0a0fd1c2">flag_BAROMETER</a>, <a class="el" href="flag_8cpp.html#a860bdb1bea06460e3a9910c711aa6954">flag_HYGROMETER</a>, <a class="el" href="flag_8cpp.html#ae7f53e774a12d5b6eac870c207630b5f">flag_THERMOMETER</a>, <a class="el" href="game_8cpp_source.html#l00382">g</a>, <a class="el" href="weather_8cpp_source.html#l00722">get_dirstring()</a>, <a class="el" href="weather_8cpp_source.html#l00772">get_local_humidity()</a>, <a class="el" href="weather_8cpp_source.html#l00636">get_local_windchill()</a>, <a class="el" href="weather_8cpp_source.html#l00786">get_local_windpower()</a>, <a class="el" href="creature_8cpp_source.html#l03232">Creature::get_location()</a>, <a class="el" href="game_8cpp_source.html#l13822">get_map()</a>, <a class="el" href="game_8cpp_source.html#l13866">get_weather()</a>, <a class="el" href="creature_8cpp_source.html#l03242">Creature::global_omt_location()</a>, <a class="el" href="item_8cpp_source.html#l07578">item::has_flag()</a>, <a class="el" href="weather__gen_8h_source.html#l00019">w_point::humidity</a>, <a class="el" href="iuse_8cpp.html#ae4f5124bfe92144bc548101d51bf872b">itype_barometer</a>, <a class="el" href="iuse_8cpp.html#aa4311b0672401e15332293027507d0b6">itype_hygrometer</a>, <a class="el" href="iuse_8cpp.html#af41c813a7805e29ebce5fac86b07b133">itype_weather_reader</a>, <a class="el" href="enums_8h_source.html#l00354">m_neutral</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00051">overmap_buffer</a>, <a class="el" href="creature_8cpp_source.html#l00178">Creature::pos()</a>, <a class="el" href="weather__gen_8h_source.html#l00020">w_point::pressure</a>, <a class="el" href="weather_8cpp_source.html#l00621">print_humidity()</a>, <a class="el" href="weather_8cpp_source.html#l00630">print_pressure()</a>, <a class="el" href="weather_8cpp_source.html#l00600">print_temperature()</a>, <a class="el" href="weather__gen_8h_source.html#l00018">w_point::temperature</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00780">overmapbuffer::ter()</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">TFLAG_DEEP_WATER</a>, <a class="el" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93">TFLAG_SHALLOW_WATER</a>, <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>, <a class="el" href="item_8cpp_source.html#l11850">item::typeId()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00210">velocity_units()</a>, and <a class="el" href="cata__utility_8h_source.html#l00056">VU_WIND</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a515b77bf8a878a3e44dd621632efad1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515b77bf8a878a3e44dd621632efad1b">&#9670;&nbsp;</a></span>weed_cake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::weed_cake </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00810">810</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>(</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You start scarfing down the delicious cake.  It tastes a little funny, though&quot;</span> ) );</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="classtime__duration.html">time_duration</a> duration = 12_minutes;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a> ) ) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        duration = 9_minutes;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a> ) ) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        duration = 15_minutes;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( 2 );</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( 6 );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span>( p-&gt;<a class="code" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() &lt; 5 ) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        p-&gt;<a class="code" href="classCharacter.html#a5f1a21ad76d22926f2688c1e49105311">set_painkiller</a>( ( p-&gt;<a class="code" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() + 3 ) * 2 );</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a>, duration );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a891bc2d0c564449cb462178317819254">mod_moves</a>( -to_moves&lt;int&gt;( 1_seconds ) );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 5 ) ) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="effect_8cpp.html#a26d5bc5ed07e16a92731edf2cc9db42d">weed_msg</a>( *p );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_a07c1990d0d8dd3b8a3305dca2429de8a"><div class="ttname"><a href="iuse_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a></div><div class="ttdeci">static const efftype_id effect_weed_high(&quot;weed_high&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#a07c1990d0d8dd3b8a3305dca2429de8a">effect_weed_high</a>, <a class="el" href="character_8cpp_source.html#l09839">Character::get_painkiller()</a>, <a class="el" href="mutation_8cpp_source.html#l00111">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l04486">Character::mod_hunger()</a>, <a class="el" href="creature_8cpp_source.html#l02008">Creature::mod_moves()</a>, <a class="el" href="character_8cpp_source.html#l04528">Character::mod_thirst()</a>, <a class="el" href="rng_8cpp_source.html#l00108">one_in()</a>, <a class="el" href="character_8cpp_source.html#l09823">Character::set_painkiller()</a>, <a class="el" href="iuse_8cpp.html#a513ee3dfdb798f83e30d99f697f2fa5b">trait_LIGHTWEIGHT</a>, <a class="el" href="iuse_8cpp.html#a2d866d9790623dc33511f3f08ec510b5">trait_TOLERANCE</a>, and <a class="el" href="effect_8cpp_source.html#l00129">weed_msg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
<a id="a5d06d1a26ca2f3397911708b8cb5dcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d06d1a26ca2f3397911708b8cb5dcf9">&#9670;&nbsp;</a></span>xanax()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="generic__factory_8h.html#a25c837eac363cb522b8ac126ea9d3236">std::optional</a>&lt; int &gt; iuse::xanax </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> *&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iuse_8cpp_source.html#l00484">484</a> of file <a class="el" href="iuse_8cpp_source.html">iuse.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    p-&gt;<a class="code" href="classCharacter.html#af0503012f1ff927cbb5ad126e39cb103">add_msg_if_player</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You take some %s.&quot;</span> ), it-&gt;<a class="code" href="classitem.html#a30837987c08ac5daf3b1e377e0ecaa21">tname</a>() );</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#ae37624c520e2e6b05529cf6870489bc3">effect_took_xanax</a>, 90_minutes );</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    p-&gt;<a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="iuse_8cpp.html#aa063629d256d095f8f80fe2d497ce148">effect_took_xanax_visible</a>, <a class="code" href="calendar_8cpp.html#a4249b6f1d0842211bfe53e5f9e206a10">rng</a>( 70_minutes, 110_minutes ) );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
<div class="ttc" id="aiuse_8cpp_html_aa063629d256d095f8f80fe2d497ce148"><div class="ttname"><a href="iuse_8cpp.html#aa063629d256d095f8f80fe2d497ce148">effect_took_xanax_visible</a></div><div class="ttdeci">static const efftype_id effect_took_xanax_visible(&quot;took_xanax_visible&quot;)</div></div>
<div class="ttc" id="aiuse_8cpp_html_ae37624c520e2e6b05529cf6870489bc3"><div class="ttname"><a href="iuse_8cpp.html#ae37624c520e2e6b05529cf6870489bc3">effect_took_xanax</a></div><div class="ttdeci">static const efftype_id effect_took_xanax(&quot;took_xanax&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00089">_</a>, <a class="el" href="creature_8h_source.html#l00604">Creature::add_effect()</a>, <a class="el" href="character_8cpp_source.html#l00856">Character::add_msg_if_player()</a>, <a class="el" href="iuse_8cpp.html#ae37624c520e2e6b05529cf6870489bc3">effect_took_xanax</a>, <a class="el" href="iuse_8cpp.html#aa063629d256d095f8f80fe2d497ce148">effect_took_xanax_visible</a>, <a class="el" href="calendar_8cpp_source.html#l00779">rng()</a>, and <a class="el" href="item_8cpp_source.html#l06814">item::tname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item__factory_8cpp_source.html#l01713">Item_factory::init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:47 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
